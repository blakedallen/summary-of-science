{"id": "http://arxiv.org/abs/0712.1522v1", "guidislink": true, "updated": "2007-12-10T15:56:53Z", "updated_parsed": [2007, 12, 10, 15, 56, 53, 0, 344, 0], "published": "2007-12-10T15:56:53Z", "published_parsed": [2007, 12, 10, 15, 56, 53, 0, 344, 0], "title": "Freeware solutions for spectropolarimetric data reduction", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0712.0893%2C0712.3337%2C0712.2180%2C0712.3165%2C0712.0323%2C0712.0361%2C0712.3366%2C0712.2563%2C0712.2343%2C0712.1668%2C0712.2013%2C0712.0450%2C0712.0266%2C0712.3121%2C0712.4351%2C0712.0675%2C0712.0482%2C0712.3907%2C0712.1253%2C0712.2802%2C0712.2031%2C0712.1797%2C0712.0722%2C0712.3486%2C0712.3232%2C0712.3792%2C0712.1522%2C0712.2062%2C0712.0997%2C0712.2562%2C0712.0066%2C0712.0139%2C0712.0141%2C0712.4145%2C0712.3505%2C0712.2770%2C0712.1023%2C0712.4259%2C0712.1523%2C0712.1821%2C0712.0861%2C0712.4119%2C0712.0945%2C0712.1729%2C0712.4040%2C0712.2318%2C0712.3305%2C0712.2588%2C0712.4393%2C0712.4226%2C0712.0947%2C0712.3539%2C0712.1566%2C0712.2004%2C0712.0707%2C0712.0292%2C0712.1678%2C0712.2774%2C0712.1569%2C0712.1111%2C0712.3882%2C0712.4061%2C0712.4080%2C0712.1472%2C0712.1539%2C0712.0855%2C1110.1275%2C1110.6749%2C1110.3493%2C1110.0751%2C1110.1379%2C1110.5923%2C1110.1867%2C1110.6447%2C1110.1478%2C1110.3294%2C1110.2666%2C1110.3001%2C1110.0313%2C1110.6411%2C1110.3878%2C1110.0055%2C1110.0782%2C1110.2149%2C1110.2954%2C1110.4376%2C1110.6634%2C1110.2659%2C1110.6272%2C1110.4929%2C1110.6481%2C1110.3270%2C1110.2314%2C1110.1381%2C1110.1318%2C1110.4608%2C1110.5671%2C1110.5637%2C1110.6304%2C1110.1415%2C1110.1036&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Freeware solutions for spectropolarimetric data reduction"}, "summary": "Most of the solar physicists use very expensive software for data reduction\nand visualization. We present hereafter a reliable freeware solution based on\nthe Python language. This is made possible by the association of the latter\nwith a small set of additional libraries developed in the scientific community.\nIt provides then a very powerful and economical alternative to other\ninteractive data languages. Although it can also be used for any kind of\npost-processing of data, we demonstrate the capabities of such a set of\nfreeware tools using THeMIS observations of the second solar spectrum.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0712.0893%2C0712.3337%2C0712.2180%2C0712.3165%2C0712.0323%2C0712.0361%2C0712.3366%2C0712.2563%2C0712.2343%2C0712.1668%2C0712.2013%2C0712.0450%2C0712.0266%2C0712.3121%2C0712.4351%2C0712.0675%2C0712.0482%2C0712.3907%2C0712.1253%2C0712.2802%2C0712.2031%2C0712.1797%2C0712.0722%2C0712.3486%2C0712.3232%2C0712.3792%2C0712.1522%2C0712.2062%2C0712.0997%2C0712.2562%2C0712.0066%2C0712.0139%2C0712.0141%2C0712.4145%2C0712.3505%2C0712.2770%2C0712.1023%2C0712.4259%2C0712.1523%2C0712.1821%2C0712.0861%2C0712.4119%2C0712.0945%2C0712.1729%2C0712.4040%2C0712.2318%2C0712.3305%2C0712.2588%2C0712.4393%2C0712.4226%2C0712.0947%2C0712.3539%2C0712.1566%2C0712.2004%2C0712.0707%2C0712.0292%2C0712.1678%2C0712.2774%2C0712.1569%2C0712.1111%2C0712.3882%2C0712.4061%2C0712.4080%2C0712.1472%2C0712.1539%2C0712.0855%2C1110.1275%2C1110.6749%2C1110.3493%2C1110.0751%2C1110.1379%2C1110.5923%2C1110.1867%2C1110.6447%2C1110.1478%2C1110.3294%2C1110.2666%2C1110.3001%2C1110.0313%2C1110.6411%2C1110.3878%2C1110.0055%2C1110.0782%2C1110.2149%2C1110.2954%2C1110.4376%2C1110.6634%2C1110.2659%2C1110.6272%2C1110.4929%2C1110.6481%2C1110.3270%2C1110.2314%2C1110.1381%2C1110.1318%2C1110.4608%2C1110.5671%2C1110.5637%2C1110.6304%2C1110.1415%2C1110.1036&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Most of the solar physicists use very expensive software for data reduction\nand visualization. We present hereafter a reliable freeware solution based on\nthe Python language. This is made possible by the association of the latter\nwith a small set of additional libraries developed in the scientific community.\nIt provides then a very powerful and economical alternative to other\ninteractive data languages. Although it can also be used for any kind of\npost-processing of data, we demonstrate the capabities of such a set of\nfreeware tools using THeMIS observations of the second solar spectrum."}, "authors": ["F. Paletou", "R. Rezaei", "L. Leger"], "author_detail": {"name": "L. Leger"}, "author": "L. Leger", "arxiv_comment": "4 pages, 2 figures (to appear in the Procs. of Solar Polarization\n  Workshop #5, eds. Berdyugina, Nagendra and Ramelli)", "links": [{"href": "http://arxiv.org/abs/0712.1522v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/0712.1522v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "astro-ph", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "astro-ph", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/0712.1522v1", "affiliation": "OMP, Toulouse", "arxiv_url": "http://arxiv.org/abs/0712.1522v1", "journal_reference": null, "doi": null, "fulltext": "Solar Polarization Workshop 5\nASP Conference Series, Vol. SPW5, 2008\nS. Berdyugina, K.N. Nagendra and R. Ramelli, eds.\n\nFreeware solutions for spectropolarimetric data reduction\n\narXiv:0712.1522v1 [astro-ph] 10 Dec 2007\n\nFr\u00e9d\u00e9ric Paletou, and Ludovick L\u00e9ger\nUniversit\u00e9 de Toulouse, Observatoire Midi-Pyr\u00e9n\u00e9es, LATT\n(CNRS/UMR5572), 14 ave. E. Belin, F-31400 Toulouse, France\nReza Rezaei\nKipenheuer Institut f\u00fcr Sonnenphysik, Sch\u00f6neckstr. 6, D-79104\nFreiburg, Germany\nAbstract.\nMost of the solar physicists use very expensive software for data\nreduction and visualization. We present hereafter a reliable freeware solution\nbased on the Python language. This is made possible by the association of\nthe latter with a small set of additional libraries developed in the scientific\ncommunity. It provides then a very powerful and economical alternative to\nother interactive data languages. Although it can also be used for any kind of\npost-processing of data, we demonstrate the capabities of such a set of freeware\ntools using TH\u00e9MIS observations of the second solar spectrum.\n\n1.\n\nIntroduction\n\nThe Python language (van Rossum 1990) is increasingly popular in the scientific\nand, more specifically, in the astronomical community. For instance, it has\nbeen already adopted by very large communities such as the Space Telescope\nScience Institute (STScI) or by the ALMA project. It is also very strong among\nthe various tools used and developed in the frame of the Virtual Observatory\nendeavour (see http://www.ivoa.net/ for instance).\nIn combination with a small number of specific libraries, we explain briefly\nhere how it can provide a very powerful interactive data language which can be\nrun on a number of operating system platforms, such as Linux, Mac OS X or\nWindows. The set of Python libraries we shall describe herafter does not present\nan interest limited to data reduction since it can also be perfectly used for any\nkind of post-processing like, for instance, the one of output from numerical\nsimulations.\nFor the spectropolarimetric data reduction we performed here, we used a\ncombination of tools from the libraries PyFITS, numarray (now NumPY/SciPy)\nand matplotlib.\nUsing data collected by G. Molodij and F. Paletou in May 2000 at the\nTH\u00e9MIS solar telescope (Paletou & Molodij 2001), we demonstrate the capabilities of such tools by extracting the so-called 2nd spectrum of the Sr i spectral line at 460.7 nm close to the solar limb, as an illustrative example (e.g.,\nStenflo et al. 1997).\nBy reprocessing such data with our Python-based tools, we could easily\nreproduce the results published elsewhere (Trujillo Bueno et al. 2001).\n1\n\n\f2\n\nPaletou, Rezaei & L\u00e9ger\nQ/I [%]\n1.75\n\n100\n\n1.50\n1.25\n\nspatial pixel\n\n80\n\n1.00\n60\n\n0.75\n0.50\n\n40\n\n0.25\n0.00\n\n20\n\n-0.25\n0\n0\n\n50\n\n100\nspectral pixel\n\n150\n\n200\n\nFigure 1. x \u2212 \u03bb image of the fractional linear polarization Q(\u03bb)/I(\u03bb) in the\nspectral domain around 460.7 nm.\n\n2.\n\nNecessary resources\n\nIn order to deal with FITS format files, the STScI developed \u2013 and maintains\n\u2013 the PyFITS1 library. It is very easy to install and to use since it is very well\ndocumented. It allows for both the reading of such files, entirely or by slices,\nand for the generation of new FITS files; working with headers is also very easy.\nHowever its use implies that another library such as numarray or NumPy (see\nbelow) for handling multi-dimensional arrays is already available.\nIndeed, for our purpose vector calculations with multi-dimensional arrays\nhave been performed with the numarray library. With the latter comes along\nalso a number of high-level numerical tools allowing for linear algebra, statistical analysis, fast fourier transforms, convolutions or interpolations for instance.\nHowever, since numarray will not be supported anymore after 2007, we wish\nto warn the reader to use instead, from now on, the NumPy2 package for such\nscientific calculations (see also Oliphant 2006). An on-line cookbook and very\nuseful documentation can be found at http://www.scipy.org/.\nFinally, for graphical output and figures saving, we used the matplotlib3\nlibrary for 2D plots. The default GUI is very convenient, allowing for a posteriori\ninteractive work on the image, such as area selection and zooming. Unlike other\nsoftware, it is also very easy with matplotlib to export images into the most\nuseful formats. The quality of the output is perfectly suitable for publication\n(see e.g., the figures in L\u00e9ger et al. 2007).\n\n1\n\nhttp://www.stsci.edu/resources/software hardware/pyfits\n\n2\n\nhttp://numpy.scipy.org/\n\n3\n\nhttp://matplotlib.sourceforge.net/\n\n\f3\n\nFreeware solutions for spectropolarimetric data reduction\n\n1.6\n\n1.4\n\n1.2\n\nQ/I [%]\n\n1.0\n\n0.8\n\n0.6\n\n0.4\n\n0.2\n\n0.0\n0\n\n10\n\n20\n30\nspectral pixel\n\n40\n\n50\n\nFigure 2. Mean linear polarization profile in the 460.7 nm spectral domain.\nThe profile results from the averaging along the slit of the map displayed in\nFig. 1. The depolarization of a nearby Fe i line at pixel \u2248 33 can also be\nnoticed.\n\nThe freeware set we adopted was installed and used by us without any\ndifficulties together with several Linux distributions as well as Mac OS X.\n\n3.\n\nCapabilities and results\n\nThe raw data consisted in a time-sequence of 200 frames taken with the slit parallel to the solar limb at \u03bc \u2248 0.1 while modulating in time through a sequence of\n4 independent polarization states in order to perform full-Stokes measurements.\nDemodulation involving inverse or pseudo-inverse matrix calculation was\nvery easily coded with the linear algebra package of NumPy. Our older routines\n(written in IDL) for aligning spectral lines were also very quickly re-coded using convolution with a finite width kernel for bisector search, and cubic spline\nor Fourier interpolations for shifting the profiles line by line. The adequate\nfunctions are in the fftpack and signal packages of SciPy.\nIn Fig. 1, we plot the (x \u2212 \u03bb) image corresponding to the fractional linear\npolarization Q(\u03bb)/I(\u03bb) obtained by recombining the two polarized beams of the\nMTR@TH\u00e9MIS (Paletou & Molodij 2001) taken at 460.7 nm. The strong peak\nin the Sr i spectral line corresponds to \u2248 1.5%. Fig. 2 makes this reading easier\nsince it is the mean profile obtained by averaging the polarized signal over the\nrows of the previous image.\n\n\f4\n\nPaletou, Rezaei & L\u00e9ger\n\nIt is in agreement with previous values obtained at very high polarimetric sensitivity with the ZIMPOL i polarimeter attached to the NSO/Kitt Peak\nMacMath-Pierce facility (Stenflo et al. 1997).\nAs with other data language, these packages permit to build one's own\ncollection of specific functions and, therefore makes it possible for any user to\nconstitute its own library. The use of these public and private resources can be\nmade both from scripts and/or interactively, using a command line.\nOne of the advantages of using Python is flexibility. Several other high-level\nplotting libraries exist such as DISLIN4 , or VTK5 for 3D graphics, for instance.\nAnd should one be unsatisfied of some of the functions of matplotlib, it would\nbe very easy to use instead a number of functions from such other libraries.\n4.\n\nConclusions\n\nThe Python language and the numerous scientific and graphic libraries which are\nbeing developed for, already provide very valuable and powerful tools for data\nanalysis in astrophysics. It is well supported by increasingly larger communities\nso, shifting to such freeware tools appear to us as both reasonable and economical\n(not to say legal too...) options yet.\nOur experience with the reduction of TH\u00e9MIS spectropolarimetric data\nsince 1999 made rather fast, on the timescale of a few weeks only, the conversion\nof our former software written in IDL to the above-mentioned Python-based\nresources. We could reprocess without any difficulties whatsoever old data which\nlead to published results, and we now reduce our new data with those numerical\ntools. And finally, we definitely adopt a proselytizing attitude in favour of them.\nAcknowledgments. Rafael Manso is highly acknowledged for his constant\ninterest during this quest for freeware solutions.\nReferences\nL\u00e9ger, L., Chevallier, L. & Paletou, F. 2007, A&A, 470, 1\nOliphant, T.E. 2006, Guide to NumPy (over-the-web: Trelgol Publishing)\nPaletou, F., & Molodij, G. 2001, in ASP Conf. Ser. 236, Advanced Solar Polarimetry,\ned. M. Sigwarth, (San Francisco: ASP), 9\nStenflo, J.O., Bianda, M., Keller, C.U., & Solanki, S. 1997, A&A, 322, 985\nTrujillo Bueno, J., Collados, M., Paletou, F., & Molodij, G. 2001, in ASP Conf. Ser.\n236, Advanced Solar Polarimetry, ed. M. Sigwarth, (San Francisco: ASP), 141\nvan Rossum, G. 1990, http://www.python.org/\n\n4\n\nhttp://www.mps.mpg.de/dislin/\n\n5\n\nhttp://www.vtk.org/\n\n\f"}