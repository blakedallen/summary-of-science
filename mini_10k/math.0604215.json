{"id": "http://arxiv.org/abs/math/0604215v1", "guidislink": true, "updated": "2006-04-10T05:57:27Z", "updated_parsed": [2006, 4, 10, 5, 57, 27, 0, 100, 0], "published": "2006-04-10T05:57:27Z", "published_parsed": [2006, 4, 10, 5, 57, 27, 0, 100, 0], "title": "Processor Sharing Queues with Impatience", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0604324%2Cmath%2F0604042%2Cmath%2F0604491%2Cmath%2F0604158%2Cmath%2F0604465%2Cmath%2F0604369%2Cmath%2F0604447%2Cmath%2F0604383%2Cmath%2F0604188%2Cmath%2F0604133%2Cmath%2F0604073%2Cmath%2F0604226%2Cmath%2F0604329%2Cmath%2F0604202%2Cmath%2F0604584%2Cmath%2F0604224%2Cmath%2F0604222%2Cmath%2F0604044%2Cmath%2F0604027%2Cmath%2F0604064%2Cmath%2F0604391%2Cmath%2F0604611%2Cmath%2F0604351%2Cmath%2F0604600%2Cmath%2F0604215%2Cmath%2F0604058%2Cmath%2F0604096%2Cmath%2F0604594%2Cmath%2F0604629%2Cmath%2F0604540%2Cmath%2F0604160%2Cmath%2F0604084%2Cmath%2F0604542%2Cmath%2F0604081%2Cmath%2F0604093%2Cmath%2F0604495%2Cmath%2F0604233%2Cmath%2F0604388%2Cmath%2F0604601%2Cmath%2F0604039%2Cmath%2F0604630%2Cmath%2F0604007%2Cmath%2F0604201%2Cmath%2F0604126%2Cmath%2F0604455%2Cmath%2F0604270%2Cmath%2F0604119%2Cmath%2F0604118%2Cmath%2F0604361%2Cmath%2F0604577%2Cmath%2F0604498%2Cmath%2F0604576%2Cmath%2F0604561%2Cmath%2F0604610%2Cmath%2F0604237%2Cmath%2F0604236%2Cmath%2F0604055%2Cmath%2F0604486%2Cmath%2F0604197%2Cmath%2F0604191%2Cmath%2F0604634%2Cmath%2F0604168%2Cmath%2F0604285%2Cmath%2F0604525%2Cmath%2F0604249%2Cmath%2F0604616%2Cmath%2F0604243%2Cmath%2F0604524%2Cmath%2F0604506%2Cmath%2F0604163%2Cmath%2F0604532%2Cmath%2F0604200%2Cmath%2F0604425%2Cmath%2F0604371%2Cmath%2F0604633%2Cmath%2F0604574%2Cmath%2F0604252%2Cmath%2F0604552%2Cmath%2F0604015%2Cmath%2F0604209%2Cmath%2F0604301%2Cmath%2F0604406%2Cmath%2F0604536%2Cmath%2F0604303%2Cmath%2F0604456%2Cmath%2F0604637%2Cmath%2F0604047%2Cmath%2F0604512%2Cmath%2F0604477%2Cmath%2F0604318%2Cmath%2F0604021%2Cmath%2F0604298%2Cmath%2F0604204%2Cmath%2F0604172%2Cmath%2F0604180%2Cmath%2F0604223%2Cmath%2F0604095%2Cmath%2F0604631%2Cmath%2F0604279%2Cmath%2F0604323%2Cmath%2F0604239&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Processor Sharing Queues with Impatience"}, "summary": "We investigate a processor sharing queue with renewal arrivals and generally\ndistributed service times. Impatient jobs may abandon the queue, or renege,\nbefore completing service. The corresponding stochastic processes are\nrepresented by measure valued Markov processes on R^2\\_+. A scaling procedure\nthat gives rise to a fluid model with a nontrivial, yet tractable steady state\nbehavior, is presented. This fluid model model captures many essential features\nof the underlying stochastic model, and it is used to analyze the impact of\nimpatience in processor sharing queues.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0604324%2Cmath%2F0604042%2Cmath%2F0604491%2Cmath%2F0604158%2Cmath%2F0604465%2Cmath%2F0604369%2Cmath%2F0604447%2Cmath%2F0604383%2Cmath%2F0604188%2Cmath%2F0604133%2Cmath%2F0604073%2Cmath%2F0604226%2Cmath%2F0604329%2Cmath%2F0604202%2Cmath%2F0604584%2Cmath%2F0604224%2Cmath%2F0604222%2Cmath%2F0604044%2Cmath%2F0604027%2Cmath%2F0604064%2Cmath%2F0604391%2Cmath%2F0604611%2Cmath%2F0604351%2Cmath%2F0604600%2Cmath%2F0604215%2Cmath%2F0604058%2Cmath%2F0604096%2Cmath%2F0604594%2Cmath%2F0604629%2Cmath%2F0604540%2Cmath%2F0604160%2Cmath%2F0604084%2Cmath%2F0604542%2Cmath%2F0604081%2Cmath%2F0604093%2Cmath%2F0604495%2Cmath%2F0604233%2Cmath%2F0604388%2Cmath%2F0604601%2Cmath%2F0604039%2Cmath%2F0604630%2Cmath%2F0604007%2Cmath%2F0604201%2Cmath%2F0604126%2Cmath%2F0604455%2Cmath%2F0604270%2Cmath%2F0604119%2Cmath%2F0604118%2Cmath%2F0604361%2Cmath%2F0604577%2Cmath%2F0604498%2Cmath%2F0604576%2Cmath%2F0604561%2Cmath%2F0604610%2Cmath%2F0604237%2Cmath%2F0604236%2Cmath%2F0604055%2Cmath%2F0604486%2Cmath%2F0604197%2Cmath%2F0604191%2Cmath%2F0604634%2Cmath%2F0604168%2Cmath%2F0604285%2Cmath%2F0604525%2Cmath%2F0604249%2Cmath%2F0604616%2Cmath%2F0604243%2Cmath%2F0604524%2Cmath%2F0604506%2Cmath%2F0604163%2Cmath%2F0604532%2Cmath%2F0604200%2Cmath%2F0604425%2Cmath%2F0604371%2Cmath%2F0604633%2Cmath%2F0604574%2Cmath%2F0604252%2Cmath%2F0604552%2Cmath%2F0604015%2Cmath%2F0604209%2Cmath%2F0604301%2Cmath%2F0604406%2Cmath%2F0604536%2Cmath%2F0604303%2Cmath%2F0604456%2Cmath%2F0604637%2Cmath%2F0604047%2Cmath%2F0604512%2Cmath%2F0604477%2Cmath%2F0604318%2Cmath%2F0604021%2Cmath%2F0604298%2Cmath%2F0604204%2Cmath%2F0604172%2Cmath%2F0604180%2Cmath%2F0604223%2Cmath%2F0604095%2Cmath%2F0604631%2Cmath%2F0604279%2Cmath%2F0604323%2Cmath%2F0604239&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We investigate a processor sharing queue with renewal arrivals and generally\ndistributed service times. Impatient jobs may abandon the queue, or renege,\nbefore completing service. The corresponding stochastic processes are\nrepresented by measure valued Markov processes on R^2\\_+. A scaling procedure\nthat gives rise to a fluid model with a nontrivial, yet tractable steady state\nbehavior, is presented. This fluid model model captures many essential features\nof the underlying stochastic model, and it is used to analyze the impact of\nimpatience in processor sharing queues."}, "authors": ["Christian H. Gromoll", "Philippe Robert", "Bert Zwart"], "author_detail": {"name": "Bert Zwart"}, "author": "Bert Zwart", "links": [{"href": "http://arxiv.org/abs/math/0604215v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0604215v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0604215v1", "affiliation": "TUE", "arxiv_url": "http://arxiv.org/abs/math/0604215v1", "arxiv_comment": null, "journal_reference": "Mathematics of Operations Research, 33(2):375-402, May 2008", "doi": null, "fulltext": "arXiv:math/0604215v1 [math.PR] 10 Apr 2006\n\nFLUID LIMITS FOR PROCESSOR SHARING QUEUES\nWITH IMPATIENCE\nH. CHRISTIAN GROMOLL\u2217 , PHILIPPE ROBERT, AND BERT ZWART\u2020\nAbstract. We investigate a processor sharing queue with renewal arrivals and\ngenerally distributed service times. Impatient jobs may abandon the queue,\nor renege, before completing service. The random time representing a job's\npatience has a general distribution and may be dependent on its initial service\ntime requirement. A scaling procedure that gives rise to a fluid model with\nnontrivial yet tractable steady state behavior is presented. This fluid model\nmodel captures many essential features of the underlying stochastic model,\nand it is used to analyze the impact of impatience in processor sharing queues.\n\nContents\n1. Introduction\n2. Model Description and Results\n3. Some Properties of the Fluid Model\n4. Applications\n5. Tightness\n6. Limiting Fluid Equations\nReferences\n\n1\n3\n9\n16\n19\n29\n34\n\n1. Introduction\nProcessor-Sharing Policy and Impatience. Processor Sharing (PS) policies\nwere originally proposed as models of time sharing in computer operating systems.\nRecently, generalizations of this discipline have been used to describe data transfers\nin congested routes through the Internet, see Roberts and Massouli\u00e9 [29] and Kelly\nand Williams [18] and the references therein. This has created considerable renewed\ninterest in the analysis of PS policies.\nThis paper studies the behavior of a GI/GI/1 queue serving impatient jobs\naccording to the PS policy: if there are N jobs in the queue, each job receives\nsimultaneous service at rate 1/N . An impatient job has a random initial lead time\nin addition to its service time. Such a job has a deadline equal to its arrival time\nplus its initial lead time; if the job has not completed service when the deadline\nexpires, it abandons the queue (or reneges) and therefore does not complete service.\n1991 Mathematics Subject Classification. Primary 60K25, 60K30, 60G57, 60F17. Secondary\n90B15, 90B22.\nKey words and phrases. Processor Sharing. Queues with Impatience. Measure Valued Process.\nFluid Limits. Delay-Differential Equations. Empirical Processes.\n\u2217 Research supported in part by an NSF Mathematical Sciences Postdoctoral Research Fellowship, a European Union Marie Curie Postdoctoral Research Fellowship, and EURANDOM.\n\u2020 Research supported by an NWO-VENI grant.\n1\n\n\f2\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nFor example, the timeout of a TCP flow through the Internet can be thought of as\nthe expiration of a random deadline and subsequent reneging of the flow.\nThe impact of impatience on PS queues is larger than for First In First Out\n(FIFO) queues. A typical job that abandons a FIFO queue will do so while waiting\nto begin service. In contrast, a job that abandons a PS queue will have already\nreceived partial service. Since this partial service is wasted, impatience may create\na significant overhead for a PS server.\nThere is a large literature on queueing models with impatience under the FIFO\ndiscipline. An early paper by Barrer [1] considers an example arising in a military\napplication. Stanford [31] is a survey of the literature in this domain (see also\nStanford [30] and Boots and Tijms [5]). This body of work focuses primarily on\nexact performance analysis. Ward and Glynn [33] have recently obtained a diffusion\napproximation for single channel queues. There are also various studies of multiserver queues with abandonments, motivated by call center applications; see the\nsurvey by Gans et al. [10] and references therein.\nThere is some related literature treating other policies, but in the context of\nsoft deadlines. Jobs with soft deadlines are not impatient; they remain in the\nsystem until completing service, even if their deadlines have expired. In particular,\nthese queues are work conserving. Results for such models describe the extent to\nwhich overdue jobs are produced by the underlying service discipline, without the\neffect of abandonments. Doytchinov et al. [9], Kruk et al. [20, 21], and Yeung and\nLehoczky [34] investigate the heavy traffic behavior of various systems using the\nEarliest Deadline First and FIFO policies. Gromoll and Kruk [12] describes the\nheavy traffic behavior of a PS queue incorporating a fairly general structure of soft\ndeadlines.\nFor PS queues with impatience however, only a few results are known. Coffman\net al. [7] cover the special case of exponential service times and lead times, where\nthe lead time and service time are independent. Guillemin et al. [14] consider\nheavy tailed service times, and obtain some results on the reneging behavior of\nlarge jobs by analyzing the tail behavior of the sojourn time distribution. Using\nsome approximations, Bonald and Roberts [4] analyze the steady state of a system\nwith general service times and some dependence between service times and lead\ntimes.\nResults of the Paper. This paper analyzes the PS queue with impatience by\nusing fluid limits. The dynamics of the system are represented as a measure valued\nprocess: the system state at time t \u2265 0 is represented by a random point measure\nZ(t) on (0, \u221e] \u00d7 (0, \u221e], such that Z(t) has a point mass at (b, d) \u2208 (0, \u221e] \u00d7 (0, \u221e]\nif and only if there is a job in the system at time t with residual service time b and\nresidual lead time d. See Jean-Marie and Robert [16] and Doytchinov et al. [9] for\nan analogue representation of residual service times in single server queues. This\nsetup enables a fairly general analysis. The case of a general joint distribution of\nservice times and initial lead times, with possible dependence of the two random\nvariables is included in our setting.\nUnder mild assumptions, it is shown that, with a convenient scaling, a family of\nmeasure valued processes associated with (Z(t)) is tight and converges in distribution to some (\u03b6(t)). For t \u2265 0, \u03b6(t) is a nonnegative measure on (0, \u221e] \u00d7 (0, \u221e], it\nis the limit in distribution of the sequence of random points describing the queue.\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n3\n\nThis fluid limit is characterized as the solution of a functional Equation (2.8) which\ncan be viewed as a time changed functional differential equation.\nThe overloaded case \u03c1 > 1, which forms our main focus, presents a nontrivial\nand quite interesting steady state behavior. The total fluid mass in the system\nat equilibrium (the fluid analogue of the total number of jobs) is shown to be the\nsolution z\u221e of a simple fixed point equation (3.2). Moreover, the fluid steady state,\ni.e. the limit of \u03b6(t) as t goes to infinity, is a distribution on (0, \u221e] \u00d7 (0, \u221e] which\nhas a simple expression (2.11) in terms of z\u221e .\nThese results give also a significant insight on the qualitative properties of PS\nqueues with impatience. An interpretation of the fixed point equation (3.2) is given\nand used to analyze the total number of jobs in the system and to estimate the\nfraction of jobs that renege. The impact of the variability of the service times and\nof the lead times and other properties of this queue are extensively investigated in\nGromoll et al. [11].\nIn contrast to the models studied previously in this domain, the service discipline\nconsidered here is not work conserving. For this reason, analysis of the fluid model\nis more intricate. This is an important difference from earlier work on standard\nPS queues where the fact that the workload process coincides with that of FIFO\ndiscipline was a crucial ingredient in the proof of the key results. A different\napproach to prove existence, uniqueness, and convergence to steady state of fluid\nmodel solutions is proposed. It is shown that there exists a maximal fluid model\nsolution and by using monotonicity arguments, the properties of the fluid limits\ncan be investigated under quite general assumptions.\nOrganization. The paper is organized as follows. A detailed description of the\nmodel and the main results is presented in Section 2. Qualitative properties of the\nfluid model are analyzed in Section 3. Section 4 is devoted to examples. Section 5\nand 6 are concerned with convergence towards the fluid limit. Section 5 establishes\ntightness, and Section 6 characterizes limit points.\n2. Model Description and Results\nThis section gives a detailed description of the stochastic processes associated to\nthis queue and a summary of the main results.\n2.1. Stochastic model. The stochastic model consists of the following: a processor sharing server working at unit rate from an infinite capacity buffer, a collection\nof stochastic primitives E(*), {Bi , Di }\u221e\ni=1 describing respectively the process of arrivals and the services and the deadlines of the customers, and a random initial\ncondition specifying the state of the system at time 0. All random objects are\ndefined on a probability space (\u03a9, F , P) with expectation operator E(*).\nThe exogenous arrival process (E(t), t \u2265 0) has rate \u03bb>0, it is a delayed renewal\nprocess starting from zero, with ith jump time Ui . For t \u2265 0, E(t) is the number\nof jobs that arrive to the buffer during (0, t]. For i \u2265 1, Ui is the arrival time of job\ni; jobs already in the buffer at time 0 are called initial jobs.\nFor i \u2265 1, the service time Bi is a strictly positive random variable representing\nthe amount of processing time that job i requires from the server. The random\nvariable Di is strictly positive and determines the deadline of job i: it represents\nthe maximum amount of time that job i will stay in the buffer. Since it arrives at\ntime Ui , its deadline is at time Ui + Di . It will abandon the system at this time if\n\n\f4\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nit has not yet completed service. The random variable Di is called the initial lead\ntime of job i.\nThe model allows either the service time or the initial lead time (but not both)\nto be equal to infinity. Therefore, the random variable (Bi , Di ) has values in the\n2\nspace R+ = [0, \u221e] \u00d7 [0, \u221e]. Here, R+ = [0, \u221e] is the usual compactification of R+\nwith the arithmetic extensions x + \u221e = \u221e for all x \u2208 R+ , x * \u221e = \u221e for x > 0\n2\nand 0 * \u221e = 0. The collection of Borel subsets of R+ is denoted by B. Throughout\nthe paper, it is assumed that all sequences of services and deadlines {Bi , Di }\u221e\ni=1 are\n2\nindependent and identically distributed (i.i.d.) R+ -valued random variables, and\n2\n\nthat their common joint distribution \u03b8 on R+ satisfies\n\u03b8({0} \u00d7 R) = \u03b8(R \u00d7 {0}) = \u03b8((\u221e, \u221e)) = 0.\nNote that the random variables Bi and Di may be dependent. A generic random\n2\nelement of R+ with distribution \u03b8 will be denoted (B, D). Let \u03c1 = \u03bbE[B] denote\nthe traffic intensity of the system. It is assumed throughout that \u03c1 > 1, that\nis, the server is nominally overloaded. In this way, the classical PS queue, the\ninfinite server queue, and mixtures of the two are special cases of this model. (For\nexample the GI/GI/\u221e queue corresponds to the case when service times are equal\nto infinity.)\nInitial condition. The initial condition specifies Z(0), the number of initial jobs\npresent in the buffer at time zero, as well as the service times and initial lead\ntimes of these initial jobs. Assume that Z(0) is a non-negative, integer valued\nrandom variable. The service times and initial lead times for initial jobs are the\nfirst Z(0) elements of a sequence (Bj0 , Dj0 ) of i.i.d. random variables taking values\n2\n\nin {(0, \u221e] \u00d7 (0, \u221e]} \\ (\u221e, \u221e) almost surely. A generic random element of R+\ndistributed as (B00 , D00 ) will be denoted by (B 0 , D0 ). Assume that the expected\nnumber of initial jobs is finite: E[Z(0)] < \u221e.\nTime Evolution of the Queue. For each t \u2265 0, let Z(t) denote the number\nof jobs in the buffer (or queue length) at time t, and S(t) denotes the cumulative\nservice time per job provided by the server up to time t. Because of the processor\nsharing policy, the quantity S(t) is given by\nZ t\n1\n(2.1)\nS(t) =\nds,\nZ(s)\n0\n\nwhere the integrand is defined to be zero when the queue length equals zero. If a\njob arrived at time s \u2265 0 and is still present in the queue at t \u2265 s, at time t it has\nreceived the cumulative amount of processing time S(t) \u2212 S(s).\nTherefore, the residual service time at time t of job i \u2264 E(t) (and of initial job\nj \u2264 Z(0)) are given by\nBi (t) = (Bi \u2212 (S(t) \u2212 S(Ui )))+ ,\n\nand\n\nBj0 (t) = (Bj0 \u2212 S(t))+ .\n\nDefine the lead time at time t of job i \u2264 E(t) (and of initial job j \u2264 Z(0)) by\n(2.2)\n\nDi (t) = (Ui + Di \u2212 t)+ ,\n\nand\n\nDj0 (t) = (Dj0 \u2212 t)+ .\n\nA job's residual service time is the remaining amount of processing time required to\nfulfill its service requirement; its lead time is the remaining time until its deadline.\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n5\n\nLead times\n\n1/Z(t)\n\nDi (t)\n1\nService\ncompletion\n\nBi (t)\n\nAbandonment\n\nResidual service times\n\nFigure 1. Dynamics of the measure valued process Z(*)\nJob i will depart the system either when its service requirement is fulfilled or when\nits deadline arrives, it will leave the system at time\ninf{t \u2265 Ui : min{Bi (t), Di (t)} = 0}.\nThe state descriptor is a measure valued process that keeps track of the residual\nservice times and lead times of all jobs in the buffer. For job i, this information is\n2\nrepresented as a unit of mass at the point (Bi (t), Di (t)) \u2208 R+ at all times t \u2265 Ui\n+\nsuch that job i is still in the system. Let \u03b4(x,y)\ndenote the Dirac point measure at\n2\n\n+\n(x, y) \u2208 R+ if min{x, y} > 0, otherwise \u03b4(x,y)\nis the zero measure. Then the state\nof the system at time t \u2265 0 is represented by the random point measure\nE(t)\n\nZ(0)\n\nZ(t) =\n\nX\nj=1\n\n+\n\u03b4(B\n0 (t),D 0 (t)) +\nj\n\nj\n\nX\n\n+\n\u03b4(B\n.\ni (t),Di (t))\n\ni=1\n\nNote that the queue length at time t is given by the total mass of the measure Z(t),\nZ(t) = h1, Z(t)i,\nwhere hf, \u03bci =\n2\n\nR\n\n2\n\n2\n\nR+\n\nf d\u03bc for a Borel measure \u03bc on R+ and a \u03bc-integrable function\n\nf : R+ \u2192 R.\nIn this way, the dynamics of the system are represented as a distribution of point\n2\nmasses on R+ moving toward the axes. At time t \u2265 0, points move left at rate\n1/Z(t) and down at rate 1. (A point with one coordinate equal to infinity will\nremain that way while the other coordinate moves.) Point masses vanish when\nhitting one of the axes: a point mass reaching the vertical axis corresponds to a job\n\n\f6\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\ncompleting service, while a point mass hitting the horizontal axis represents a job\nabandoning the queue. See Figure 1.\n2\nLet M1 denote the space of finite non-negative Borel measures on R+ , endowed\nw\nwith the topology of weak convergence: \u03b6n \u2212\u2192 \u03b6 in M1 if and only if hf, \u03b6n i \u2192 hf, \u03b6i\n2\n2\nfor all continuous functions f : R+ \u2192 R (recall that R+ is compact for the induced\ntopology). Let D([0, \u221e), M1 ) denote the space of c\u00e0dl\u00e0g paths in M1 , endowed\nwith the Skorohod J1 -topology. Then, for t \u2265 0, Z(t) is a random element of M1\nfor each t \u2265 0, and Z(*) is a random element of D([0, \u221e), M1 ).\nIt is clear that, given stochastic primitives (E(*), {Bi , Di }\u221e\ni=1 ) and the initial\ncondition Z(0), the equation (2.1) uniquely determines the processes S(*), Z(*),\nZ(*), and the residual service times and lead times. It is also easily seen that the\nstate descriptor Z(*) satisfies the following equation: for each Borel set A \u2208 B, and\nall t \u2265 0,\nE(t)\n\n(2.3)\n\nZ(t)(A) = Z(0) (A + (S(t), t)) +\n\nX\n\n1+\nA (Bi (t), Di (t)) ,\n\ni=1\n\n1+\nA (w)\n\n+\nwhere A + w = {a + w : a \u2208 A} and\n= h1A , \u03b4w\ni. Note that the quantity\nZ(0) (A + (S(t), t)) corresponds to a shift by the quantity (S(t), t) of the initial\npoints: indeed, if (x, y) \u2208 R2+ and (s, t) \u2208 R2+ , for A \u2208 B,\n\n\u03b4(x,y) (A + (s, t)) = \u03b4(x\u2212s,y\u2212t) (A).\nThis equation plays a crucial r\u00f4le in determining fluid limits for the model.\nr\n\n2.2. A Fluid Scaling. A sequence of renormalized stochastic processes (Z (t))\nassociated to the solution of the evolution equation (2.3) is introduced. The limits\nr\nof (Z (t)) will give the fluid limits of this queue.\nLet R \u2282 [0, \u221e) be a sequence increasing to infinity. Suppose that for each r \u2208 R,\nthere is a stochastic model as defined in Section 2.1. That is, for each r \u2208 R, there\nr\nr\nare stochastic primitives (E r (*), {Bir , Dir }\u221e\ni=1 ) with associated data \u03bb and \u03b8 , and\nr\nr\nr\nr\nan initial condition Z (0) which give stochastic processes Z (*), S (*), Z (*), and\nresidual service times and lead times {Bir (*), Dir (*)} and {Bi0r (*), Di0r (*)}. Each\nmodel is defined on a probability space (\u03a9r , F r , Pr ) with expectation operator\nEr (*).\nA fluid scaling is applied to each model in the sequence. To obtain non-trivial\nscaling limits, initial lead times {Dir } will be assumed to be of order r. For each\nr \u2208 R, let \u03b8\u0306r \u2208 M1 be the probability measure defined by\n\u03b8\u0306r (F \u00d7 G) = \u03b8r (F \u00d7 rG),\nfor all Borelian subsets F, G \u2208 B with the notation rG = {r * g : g \u2208 G}. Note\nthat if {Bir , Dir } = {Bi , rDi } for some sequence {Bi , Di }, then \u03b8\u0306r is simply the\ndistribution of (B1 , D1 ).\nFor each r \u2208 R, the fluid scaled state descriptor is defined, for t \u2265 0, as the\nr\nrandom measure Z (t) \u2208 M such that\n1 r\nZ (rt)(F \u00d7 rG),\nr\nfor all Borelian subsets F, G \u2208 B. This definition scales lead times by a factor r\u22121\nas well. Fluid scaled versions of the remaining processes are defined as follows: for\nr\n\nZ (t)(F \u00d7 G) =\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n7\n\nall r \u2208 R, t \u2265 s \u2265 0, and i = 1, . . . , E r (rt), let\n1 r\nE (rt),\nr\nr\nS (t) = S r (rt),\n\n1 r\nZ (rt),\nr\nr\nr\nr\nS (s, t) = S (t) \u2212 S (s),\n1\nr\nDi (t) = Dir (rt).\nr\n\nr\n\nr\n\nE (t) =\n\nZ (t) =\n\nr\n\nB i (t) = Bir (rt),\n\nThe following asymptotic assumptions are needed. Let (\u03bb, \u03b8, \u03b60 ) be fluid model\ndata satisfying the assumptions of Section 2.3. Assume that as r \u2192 \u221e,\nr\n\n(2.4)\n\nE (*) \u2192 \u03bb(*),\n\n(2.5)\n\n\u03b8\u0306r \u2212\u2192 \u03b8,\n\n(2.6)\n\nZ (0) \u2212\u2192 \u03b60 ,\n\nw\n\nr\n\nw\n\nin distribution,\n\nin particular, Assumption (2.4) implies that \u03bbr \u2192 \u03bb holds.\n2.3. Fluid model. A deterministic fluid model satisfying dynamic equations analogous to (2.3) is introduced. It will be shown later that these equations can be\nobtained as limits of Equation (2.3) under an appropriate scaling procedure.\n2\nLet \u03c1 > 1, and \u03b60 \u2208 M1 be a measure on R+ such that the projections \u03b60 (* \u00d7 R+ )\nand \u03b60 (R+ \u00d7 *) are free of atoms in [0, \u221e) and z0 = \u03b60 (0, 0) is the total mass of \u03b60 .\nDefinition 2.1. A measure valued fluid model solution for the data (\u03bb, \u03b8, \u03b60 ) is a\ncontinuous function \u03b6(*) : [0, \u221e) \u2192 M1 such that\n(i) inf t>a z(t) > 0 for all a > 0,\n(ii) for all C \u2208 C and t \u2265 0,\n(2.7)\n\n\u03b6(t)(C) = \u03b60 (C + (S(0, t), t)) + \u03bb\n\nZ\n\nt\n\n\u03b8(C + (S(s, t), t \u2212 s)) ds,\n\n0\n\nRv\nwhere S(u, v) = u 1/z(s) ds for all v \u2265 u \u2265 0 and z(*) is the total mass\nfunction is z(*) = h1, \u03b6(*)i. The function z(*) is simply called a fluid model\nsolution for (\u03bb, \u03b8, \u03b60 ).\nNote that S(0, t) may be equal to +\u221e if \u03b60 \u2261 0, i.e. z(0) = 0. Both right hand\nside terms in (2.7) are still well defined in this case, and the first term equals zero.\nThe class of corner sets is defined as\n\b\nC = {[x, \u221e) \u00d7 [y, \u221e) : x, y \u2208 R+ } \u222a [x, \u221e] \u00d7 [y, \u221e] : x, y \u2208 R+ .\nThe sets from the class C will be used to describe the evolution of fluid model\nsolutions. Since each C = [x, \u221e] \u00d7 [y, \u221e] \u2208 C is characterized by the coordinates\ndef.\n\n(x, y) of its corner, it is convenient to use the notation \u03bc(x, y) = \u03bc([x, \u221e] \u00d7 [y, \u221e])\nfor any \u03bc \u2208 M1 . If z0 > 0, for this class of subsets Equation (2.7) can then be\nrewritten as follows: for each x, y \u2265 0 and t \u2265 0,\n\u0001\n(2.8) \u03b6(t)(x, y) = z0 P B 0 > x + S(0, t), D0 > y + t\nZ t\nP (B > x + S(s, t), D > y + t \u2212 s) ds,\n+\u03bb\n0\n\n\f8\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nSince z(t) = \u03b6(t)(0, 0), the fluid model solution z(*) satisfies the following equation:\nfor each t \u2265 0,\nZ t\n\u0001\n0\n0\n(2.9) z(t) = z0 P B > S(0, t); D > t + \u03bb\nP (B > S(s, t); D > t \u2212 s) ds.\n0\n\nIt will be proved that the fluid model defined above is the limit in distribution\nr\nof the rescaled processes {Z (*) : r \u2208 R} introduced in Section 2.1. The measure\nvalued fluid model solution \u03b6(*) corresponds to the measure valued state descriptor\nZ(*), and the fluid model solution z(*) is the limit of the queue length process Z(*).\nr\nThe main result concerning the convergence of {Z (*) : r \u2208 R} is the following\ntheorem.\nr\n\nTheorem 2.2. The sequence {Z (*) : r \u2208 R} is tight and each weak limit point\nis almost surely a measure valued fluid model solution \u03b6(*) for the data (\u03bb, \u03b8, \u03b60 ).\nr\nIf in addition (2.10) holds, then Z (*) converges in distribution, as r \u2192 \u221e, to the\nunique measure valued fluid model solution \u03b6(*).\nThis theorem is proved in Section 5 and 6.\n2.4. Some Properties of the fluid model. Despite the quite abstract setting of\nthis paper (measure valued processes), some concrete and explicit results concerning\nthe fluid model of the queue can be obtained. Let (\u03bb, \u03b8, \u03b60 ) satisfy the assumptions\nof Section 2.3.\nThe first result establishes the uniqueness of fluid model solutions under a Lipschitz condition on the initial condition \u03b60 .\nTheorem 2.3. Suppose there exists a finite constant L such that\n(2.10)\n\n\u03b60 (A \u00d7 [y, y \u2032 ]) \u2264 L|y \u2032 \u2212 y|\n\nfor all Borel sets A of R and all y \u2032 > y \u2265 0 . Then (2.8) and (2.9) have a unique\nsolution.\nThe second theorem analyzes the equilibrium of the fluid model, i.e. the behavior\nat infinity of the solution of Equation (2.9).\n\u0002\n\u0003\nTheorem 2.4. Suppose that \u03bbE B1{D=\u221e} < 1 and E [min{B, D}] < \u221e. Then\nany solution t \u2192 z(t) of (2.9) converges at infinity to the unique positive solution\nz\u221e of the fixed point equation\nz\u221e = \u03bbE [min{z\u221e B, D}] .\nMoreover, any solution (\u03b6(t)) of Equation (2.8) converges to the measure \u03b6\u221e \u2208 M1 ,\ndefined by\n\u0013\nZ \u221e \u0012\nt\nP B >x+\n(2.11) \u03b6\u221e (x, y) = \u03bb\n, D > y + t dt\nz\u221e\n0\n\u0002\n\u0003\n= E min{z\u221e (B \u2212 x)+ , (D \u2212 y)+ } ,\n\nfor x, y \u2265 0.\n\nThese theorems are proved in Section 3. The simple fixed point equation stated in\nthis theorem is used to analyze the qualitative behavior of the queue, see Section 4.\nNote that the expression of the distribution of points \u03b6\u221e describing the asymptotic\nbehavior of this queue has a simple expression in terms of the solution z\u221e of the\nfixed point equation.\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n9\n\n3. Some Properties of the Fluid Model\nIn this section some basic properties of fluid model solutions are derived. In\nwhat follows, let z(*) be an arbitrary fluid model solution, i.e. such that\nZ t\n\u0001\n0\n0\n(2.9) z(t) = z0 P B > S(0, t); D > t + \u03bb\nP (B > S(s, t); D > t \u2212 s) ds.\n0\n\nIf z0 > 0, define\n\ne = inf{s : S(0, s) \u2265 t},\nS(t)\n\ne is well defined for\nsince z(t) \u2264 \u03bbt + z0 , S(0, t) \u2192 \u221e as t \u2192 \u221e, implying that S(t)\ne\nall t. In addition, S(t) < \u221e for all t if z0 > 0, which follows from property (i) and\ncontinuity of the fluid model solution z(*).\ne\nDefine ze(t) = z(S(t)),\nthen (e\nz (t)) satisfies the equation\n\u0010\n\u0011\ne\n(3.1) ze(t) = z0 P B 0 \u2265 t; D0 \u2265 S(t)\nZ t\n\u0010\n\u0011\ne \u2212 S(u)\ne\n+\u03bb\nze(u)P B \u2265 t \u2212 u; D \u2265 S(t)\ndu.\n0\n\nWe next introduce the concept of a shiftedR fluid model solution: For t0 > 0 define\nv\nz(t0 , t) = z(t0 + t), and define S(t0 , u, v) = u 1/z(t0 , r)dr.\nProperty 3.1. If z(*) is a solution of (2.9), then z(t0 , *) = z(t0 + *) satisfies\nZ t\nP (B \u2265 S(t0 , s, t); D \u2265 t \u2212 s) ds, t \u2265 0.\nz(t0 , t) = \u03b6(t0 )(S(t0 , 0, t), t) + \u03bb\n0\n\nProof. Note first that by definition, and since S(t0 , 0, t) = S(t0 , t0 + t),\n\n\u0001\n\u03b6(t0 )(S(t0 , 0, t), t) = z0 P B 0 \u2265 S(t0 , 0, t) + S(0, t0 ), D0 \u2265 t0 + t\nZ t0\nP (B \u2265 S(t0 \u2212 s, t0 ; D \u2265 s + t) + S(t0 , 0, t)) ds\n+\u03bb\n0\n\u0001\n= z0 P B 0 \u2265 S(0, t0 + t); D0 \u2265 t0 + t\nZ t0\nP (B \u2265 S(t0 \u2212 s, t0 + t); D \u2265 s + t) ds.\n+\u03bb\n0\n\u0001\n= z0 P B 0 \u2265 S(0, t0 + t); D0 \u2265 t0 + t\nZ t0\nP (B \u2265 S(s, t0 + t); D \u2265 t0 + t \u2212 s) ds.\n+\u03bb\n0\n\nWe apply this expression as follows:\nz(t0 , t) = z(t0 + t)\n\n\u0001\n= z0 P B 0 \u2265 S(0, t0 + t); D0 \u2265 t0 + t\nZ t0 +t\n+\u03bb\nP (B \u2265 S(s, t0 + t); D \u2265 t0 + t \u2212 s) ds\n0\n\n= \u03b6(t0 )(S(t0 , 0, t), t) + \u03bb\n\nZ\n\nt0 +t\n\nP (B \u2265 S(s, t0 + t); D \u2265 t0 + t \u2212 s) ds.\nt0\n\n\f10\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nThe change of variables y = s \u2212 t0 and the identity S(t0 + y, t0 + t) = S(t0 , y, t)\ngive the result.\n\u0003\nThe next proposition shows that continuity of fluid model solutions is a consequence of properties (i) and (ii).\nLemma 3.2. Let the distribution of (B 0 , D0 ) be free of atoms. Then any solution\nz(t), t \u2265 0 to (2.9) satisfying inf t>a z(t) > 0 for all a > 0 is continuous.\n\u0001\nProof. The function t \u2192 S(0, t) is continuous and so is t \u2192 P B 0 > S(0, t); D0 > t\nsince the distribution of (B 0 , D0 ) has no atom. The first term of the right hand\nside of Equation (2.9) is a continuous function of t. Concerning the second term\nof Equation (2.9), by monotonicity the integrand t \u2192 P (B > S(s, t); D > t \u2212 s) is\ncontinuous almost everywhere on R+ , hence its integral is a continuous function of\nt by Lebesgue's Theorem. The lemma is proved.\n\u0003\n3.1. A Maximal Solution. An important monotonicity property of fluid model\nsolutions is proved in this section.\n\u0002\n\u0003\nProposition 3.3. If \u03bbE B1{D=\u221e} < 1 and E [min{B, D}] < \u221e, then any fluid\nmodel solution is bounded.\nProof. Note first that, since E [min{B, D}] < \u221e, also E [min{B, aD}] < \u221e for\nevery a \u2208 [0, \u221e). Define kzkt = sup0\u2264u\u2264t z(u). Note that kzkt \u2264 z0 + \u03bbt < \u221e. Fix\nt and let u \u2208 [0, t]. Since S(u, s) \u2265 (u \u2212 s)/kzkt , it holds that\nZ u\nz(u) \u2264 z0 + \u03bb\nP (D \u2265 u \u2212 s; kzktB \u2265 u \u2212 s) ds \u2264 z0 + \u03bbE [min{D, kzktB}]\n0\n\nwhich is finite since E [min{D, B}] < \u221e. By taking the supremum over u \u2208 [0, t]\nand by dividing both sides by kzkt one obtains the relation\n1 \u2264 z0 /kzkt + \u03bbE [min{D/kzkt, B}] ,\nIf kzkt \u2192 \u221e then, by monotone convergence, one gets the inequality\n\u0002\n\u0003\n1 \u2264 \u03bbE B1{D=\u221e} ,\n\u0002\n\u0003\nwhich contradicts the assumption \u03bbE B1{D=\u221e} < 1. We conclude that kzkt\nconverges to some finite constant M which implies the assertion.\n\u0003\nProposition 3.4 (Maximal Fluid Solution). For z0 > 0, there exists a fluid model\nsolution z \u2217 (*) starting form z0 which is maximal, i.e. for any fluid model solution\nz(*) such that z(0) = z0 , the relation z(t) \u2264 z \u2217 (t) holds for all t \u2265 0.\nn\n0\nProof. To define z \u2217 (*)\nR vwe first define a sequence of functions z (*), n \u2265 0, by z (t) =\nz0 + \u03bbt, S n (u, v) = u (1/z n(r))dr and\nZ t\n\u0001\nz n+1 (t) = z0 P B 0 \u2265 S n (0, t); D0 \u2265 t + \u03bb\nP (B \u2265 S n (t \u2212 s, t); D \u2265 s) ds.\n0\n\nn+1\n\nn\n\nWe show that z\n(t) \u2264 z (t) by induction. The inequality z 1 (t) \u2264 z 0 (t) is trivial.\nSuppose now that z n (t) \u2264 z n\u22121 (t). Then S n (u, v) \u2265 S n\u22121 (u, v), and, using the\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n11\n\nfact that tail probabilities are non-increasing,\nZ t\n\u0001\nn+1\n0\nn\n0\nz\n(t) = z0 P B \u2265 S (0, t); D \u2265 t + \u03bb\nP (D \u2265 s; B \u2265 S n (t \u2212 s, t)) ds\n0\nZ t\n\u0001\n\u0001\n0\nn\u22121\n0\n\u2264 z0 P B \u2265 S\n(0, t); D \u2265 t + \u03bb\nP B \u2265 S n\u22121 (t \u2212 s, t); D \u2265 s ds,\n0\n\nwhich equals z n (t).\nSince z n (t) is decreasing in n and non-negative for all n there exists a function\n\u2217\nz (t) such that z \u2217 (t) = limn\u2192\u221e z n (t). By the definition of z n (t), we see that z \u2217 (t)\nsatisfies (2.9).\nFurthermore, we have z(t) \u2264 z \u2217 (t) for any given fluid model solution z(*). This is\ntrue because z(t) \u2264 z 0 (t), and using an inductive argument as above, z(t) \u2264 z n (t)\nfor every n. Since we know that at least one fluid model solution exists, it follows\nthat inf t>a z \u2217 (t) > 0 for every a > 0. By Lemma 3.2, it follows that z \u2217 (t) > 0 is\ncontinuous. We conclude that z \u2217 (*) is indeed a fluid model solution.\n\u0003\n3.2. Convergence of fluid model solutions. In this subsection we show the\nconvergence of fluid model solutions to a non-trivial constant z\u221e as t \u2192 \u221e.\n\u0002\n\u0003\nProposition 3.5. If \u03bbE B1{D=\u221e} <1, E [min{B, D}] <\u221e and \u03c1>1, the equation\n\n(3.2)\n\nz\u221e = \u03bbE [min{z\u221e B, D}] ,\n\nhas a unique solution in (0, \u221e).\nProof. The function f : a \u2192 \u0002\u03bbE [min{B, aD}] is non-decreasing\nand \u0003concave on\n\u0003\n\u0002\n[0, +\u221e), note that f (a)\u0002 = \u03bbE min{B,\naD}1\n+\n\u03bbE\nB1\n{D<+\u221e}\n{D=+\u221e} for a > 0,\n\u0003\ntherefore f (0+) = \u03bbE B1{D=+\u221e} <1 and f (a) converges to \u03bbE [B] >1 as a goes\nto infinity. By continuity of f , there exists a0 , 0<a0 < + \u221e such that f (a) = 1. The\nconcavity and the monotonicity imply that such a a0 is unique, otherwise f should\nbe constant equal to 1 after a0 , but this is impossible since f converges to \u03bbE [B] >1\nat infinity. The quantity 1/a0 is then the unique solution of Equation (3.2).\n\u0003\nWe are now ready to present the main result of this subsection, concerning the\nasymptotic behavior of any fluid model solution (z(t)) as t goes to infinity.\nTheorem 3.6. If z(*) is a fluid model solution, under the conditions\n\u0002\n\u0003\n\u03bbE B1{D=\u221e} < 1, E [min{B, D}] < \u221e and \u03c1 > 1,\n\nthen z(t)\u2192z\u221e as t\u2192 + \u221e, where z\u221e the unique positive solution of the fixed point\nequation (3.2).\n\nProof. It suffices to show z\u0304 = lim supt\u2192\u221e z \u2217 (t) \u2264 z\u221e and z = lim inf t\u2192\u221e z \u2217 (t) \u2265\nz\u221e . We start with the former. We know that z\u0304 < \u221e from Proposition 3.3. For any\n\u03b5 > 0 there exists a t\u03b5 such that z(t) \u2264 z\u0304 + \u03b5. We see that, for t > t\u03b5 ,\n\u0001\nz(t) \u2264 z0 P B 0 \u2265 S(0, t); D0 \u2265 t\nZ t\u2212t\u03b5\nZ t\u03b5\nP (min{D, (z\u0304 + \u03b5)B} > s) ds.\nP (B \u2265 S(s, t); D \u2265 t \u2212 s) ds + \u03bb\n+\u03bb\n0\n\n0\n\nTaking the lim sup on both sides, and noting that S(s, t) \u2192 \u221e for any s \u2265 0, we\nobtain that\nz\u0304 \u2264 E [min{D, (z\u0304 + \u03b5)B}] .\n\n\f12\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nThe result is valid for every \u03b5 > 0. By letting \u03b5 \u2193 0, we obtain that z\u0304 \u2264 z\u221e . The\nlower bound follows by a similar argument after first noting that z > 0 since z(*) is\na fluid model solution.\n\u0003\n3.3. Uniqueness of fluid model solutions under non-zero conditions. The\nuniqueness of fluid model solutions is, in general, difficult to determine. If one looks\nat the time-changed version (3.1), and take \u03bb = 0, one gets an ODE. Uniqueness\nof solutions to such ODE's can usually only be established by reducing it to some\nspecial case or to assume some kind of Lipschitz condition. If D = \u221e, then (3.1)\nreduces to a renewal equation for which uniqueness is known to hold. Unfortunately,\nthis reduction is not possible in general, which lead us to use a Lipschitz condition\non the distribution function of (B 0 , D0 ). It is not necessary to assume regularity\nconditions on the distribution of (B, D). We shall give a direct proof of uniqueness;\nfor related results in the functional analysis literature, we refer to Chapter 2 of Hale\n& Verduyn Lunel [15].\n\u0001\nTheorem 3.7. Suppose z0 > 0 and F0 (x, y) = P B 0 \u2265 x; D0 \u2265 y is Lipschitz\ncontinuous in Y , i.e. there is a constant L such that for any x, y, y \u2032 ,\n|F0 (x, y) \u2212 F0 (x, y \u2032 )| \u2264 L|y \u2212 y \u2032 |.\n\nThen (2.9) has a unique solution.\ne\ne\nDefining \u03b6(t)(u,\nv) = \u03b6(S(t))(u,\nv), it can easily be shown that\n\u0010\n\u0011\ne\ne\n(3.3) \u03b6(t)(u,\nv) = z0 P B 0 \u2265 u + t; D0 \u2265 v + S(t)\nZ t\n\u0010\n\u0011\ne \u2212 S(s)\ne\n+\u03bb\nze(s)P B \u2265 u + (t \u2212 s); D \u2265 v + S(t)\nds.\n0\n\ne\nIt is clear that for any u, v, \u03b6(t)(u,\nv), t \u2265 0, is completely determined by ze(t), t \u2265 0\nand the initial measure. Thus, uniqueness of z(t) on an interval A carries over to\nuniqueness of \u03b6(t)(u, v) on A.\nThe idea of the proof is simple: we take a suitable constant a > 0 and prove first\nthat uniqueness holds for ze(t) for [0, a]. As discussed above, uniqueness carries over\ne\nto \u03b6(t)(u,\nv) for t \u2208 [0, a]. Using this and the shifted fluid model equation given by\nProperty 5.1, we prove uniqueness for ze(t) on the interval [a, 2a], and so forth. This\ne\niterative procedure works if the measure \u03b6(t)(u,\nv) is Lipschitz for any 0 < t < T .\nThis is the content of the following lemma.\nLemma 3.8. For any x, y, y \u2032 and for any t we have\ne\ne\n|\u03b6(t)(x,\ny) \u2212 \u03b6(t)(x,\ny \u2032 )| \u2264 (z0 L + \u03bb)|y \u2212 y \u2032 |.\n\nProof. We may take y, y \u2032 such that y \u2264 y \u2032 . From (3.3) we obtain\ne\ne\n|\u03b6(t)(x,\ny) \u2212 \u03b6(t)(x,\ny \u2032 )| \u2264 z0 L|y \u2032 \u2212 y|\nZ t\n\u0011\n\u0010\ne \u2212 S(s)\ne + y \u2264 D \u2264 S(t)\ne \u2212 S(s)\ne + y \u2032 ds.\n+\u03bb\nz(s)P S(t)\n0\n\ne\nNoting that ze(s)ds = dS(s)\nwe can rewrite this into\nZ S(t)\ne\n\u2032\n(3.4)\nz0 L|y \u2212 y| + \u03bb\nP (r + y \u2264 D \u2264 r + y \u2032 ) ds\n0\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\nNoting that, for any \u03b4 > 0\n\u03bb\n\nZ\n\n13\n\n\u221e\n\nP (y \u2264 D < y + \u03b4) dy \u2264 \u03b4,\n0\n\nwe see that (3.4) can be upper bounded by (z0 L + \u03bb)|y \u2212 y \u2032 |.\n\n\u0003\n\nProof of Theorem 3.7. By the one-to-one correspondence between solutions of (2.9)\nand (3.1), it suffices to show that (3.1) has a unique solution. Define a = 1/(2(z0 L+\n4\u03bb)). We first show that (3.1) has a unique solution on the interval [0, a]. For that,\nsuppose that there exist two different solutions ze(t), 0 \u2264 t \u2264 a and h(t), 0 \u2264 t \u2264 a.\nSet \u03b5 = sup0\u2264t\u2264a |e\nz (t) \u2212 h(t)|.\nNote that for any 0 \u2264 s < t \u2264 a,\ne \u2212 S(s))|\ne\n|H(t) \u2212 H(s) \u2212 (S(t)\n\u2264 \u03b5a.\n\nUsing (3.1) for both z and h, together with the Lipschitz assumption, we obtain,\nafter some simple estimates,\n\u0010\n\u0011\n\u0001\ne\n\u2212 P B 0 \u2265 t; D0 \u2265 H(t)\n|e\nz (t) \u2212 h(t)| \u2264 z0 P B 0 \u2265 t; D0 \u2265 S(t)\nZ t\n\u0010\n\u0011\ne\ne\n|e\nz (s)P B \u2265 t\u2212s; D \u2265 S(t)\u2212\nS(s)\n\u2212h(s)P (B \u2265 t\u2212s; D \u2265 H(t)\u2212H(s)) |ds.\n+\u03bb\n0\n\nThe first term is bounded by z0 La\u03b5. The second term is bounded by\nZ t\n|e\nz (s) \u2212 h(s)| ds +\n\u03bb\n0\nZ t\n\u0010\n\u0011\ne \u2212 S(s)\ne\nz(s) P B \u2265 t \u2212 s; D \u2265 S(t)\n\u03bb\n\u2212P (B \u2265 t \u2212 s; D \u2265 H(t) \u2212 H(s)) ds.\n0\n\nCall these terms IIa and IIb. We have IIa \u2264 \u03bb\u03b5a. To bound IIb, we use the\nbound\n\u0010\n\u0011\ne \u2212 S(s)\ne\nP B \u2265 t \u2212 s; D \u2265 S(t)\n\u2212 P (B \u2265 t \u2212 s; D \u2265 H(t) \u2212 H(s))\n\u0010\n\u0011\ne \u2212 S(s)\ne \u2212 \u03b5a < D \u2264 S(t)\ne \u2212 S(s)\ne + \u03b5a\n\u2264 P S(t)\ne\nto obtain (after a change of variable r = S(s))\nZ S(t)\nP (r \u2212 \u03b5a < D \u2264 r + \u03b5a) ds \u2264 \u03bb2\u03b5a.\nIIb \u2264 \u03bb\n0\n\nPutting everything together, we see that for t \u2208 [0, a],\n\n|e\nz (t) \u2212 h(t)| \u2264 z0 La\u03b5 + 3\u03bb\u03b5a \u2264 \u03b5/2,\nwhich implies that \u03b5 = 0, i.e. that ze(t) and h(t) coincide on [0, a]. Hence Equation (3.1) has a unique solution in the interval [0, a].\nSuppose now that (3.1) has a unique solution on [0, ka] for some k \u2265 1, and\nconsider the equation\ne\n(3.5) ze(ka, t) = \u03b6(ka)(t, S(ka,\nt))\nZ t\n\u0010\n\u0011\ne\ne\nze(ka, s)P B \u2265 t \u2212 s; D \u2265 S(ka,\nt) \u2212 S(ka,\ns) ds.\n+\u03bb\n0\n\n\f14\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nWe now show that this equation has a unique solution on [0, a], implying that there\nexist a unique solution of (3.1) on the interval [0, (k + 1)a]. Suppose ze(ka, t) and\nh(t) both satisfy (3.5), and set \u03b5 = supt\u2208[0,a] |z(ka, t) \u2212 h(t)|. As before, we have\ne\ne\n|(S(ka,\nt) \u2212 S(ka,\ns) \u2212 (H(t) \u2212 H(s))| < (t \u2212 s)\u03b5 < a\u03b5.\n\nUsing this, we get as before (using now the Lemma for the first term) that\n|e\nz (ka, t) \u2212 h(t)| \u2264 (z0 L + \u03bb)a\u03b5 + 3\u03bba\u03b5 \u2264 \u03b5/2,\n\nwhich implies that \u03b5 = 0, and that uniqueness of solutions of (3.1) holds on the\ninterval [0, (k + 1)a]. Iterating this argument completes uniqueness for all t.\n\u0003\n3.4. Uniqueness starting from zero. The result in this subsection can be seen\nas an extension of a result of [28], who considered the case PS queue without\nimpatience, i.e. with D \u2261 +\u221e.\nTheorem 3.9. Let \u03b5 > 0. Suppose that (B, D) and a non-increasing function\nF\u03b5 (x, y), with 0 \u2264 F\u03b5 (x, y) \u2264 \u03bb\u03b5 are such that\nZ t\nz\u03b5 (t) = F\u03b5 (S\u03b5 (0, t), t) + \u03bb\nP (B \u2265 S\u03b5 (t \u2212 s, t); D \u2265 t \u2212 s) ds\n0\n\nhas a unique solution z\u03b5 (t) satisfying inf t>a z\u03b5 (t) > 0 for a > 0. Then z\u03b5 (t) \u2192 z0\u2217 (t)\nas \u03b5 \u2193 0.\n\nProof. As in the construction of the maximal fluid solution, z\u03b5 (*) can be defined as\nthe pointwise limit limn\u2192\u221e z\u03b5n (*) with z\u03b5n (*) recursively defined by z\u03b50 = \u03b5 + \u03bbt and\nZ t\nn+1\nn\nz\u03b5 (t) = F\u03b5 (S\u03b5 (0, t), t) + \u03bb\nP (D \u2265 s; B \u2265 S\u03b5n (t \u2212 s, t)) ds.\n0\n\nFrom this construction it can be easily shown that z\u03b5n (t) is decreasing in n, and\nthat z\u03b5n (t) \u2265 z0n (t). Since also z\u03b5\u2217 (t) \u2264 z\u03b5n (t), we see that\nlim sup z\u03b5 (t) \u2264 lim sup z\u03b5n (t) = z0n (t).\n\u03b5\u21930\n\n\u03b5\u21930\n\nSince this holds for any n, and\n\nz0n (t)\n\n\u2192 z0\u2217 (t), we can let n \u2192 \u221e to obtain\n\nlim sup z\u03b5 (t) \u2264 z0\u2217 (t).\n\u03b5\u21930\n\nTo prove the other bound, we observe by induction and the properties of F\u03b5 that\nz0n (t) \u2264 z\u03b5n (t) for every n \u2265 0. Consequently,\nz0\u2217 (t) = lim z0n (t) \u2264 lim sup z\u03b5n (t) = z\u03b5 (t).\nn\u2192\u221e\n\nn\u2192\u221e\n\nWe conclude that z\u03b5 (t) \u2265 z0 (t) for every \u03b5 > 0, which implies the lower limit and\nthe convergence z\u03b5 (t) \u2192 z(t).\n\u0003\nUniqueness of fluid model solutions starting from 0 is now a simple corollary.\nCorollary 3.10. Suppose that z0 = 0. Then (3.1) has a unique solution.\nProof. Let z(*) be a fluid model solution. Define z\u03b5 (t) = z(t + \u03b5). Given z(s), 0 \u2264\ns \u2264 \u03b5, z\u03b5 (*) satisfies the equation\nZ t\nz\u03b5 (t) = F\u03b5 (S\u03b5 (0, t), t) + \u03bb\nP (D \u2265 s; B \u2265 S\u03b5 (t \u2212 s, t)) ds.\n0\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\nHere (with obvious notation)\nZ \u03b5 \u0012\nZ\nF\u03b5 (x, y) =\nP D \u2265 s + y; B \u2265 x +\n0\n\n\u03b5\n\n\u03b5\u2212s\n\n15\n\n\u0013\n1\ndu ds.\nz(u)\n\nWe see that F\u03b5 is globally Lipschitz in the second coordinate (with Lipschitz constant 1). Consequently, the above equation has a unique fluid model solution\nin terms of F\u03b5 so that z\u03b5 (*) is uniquely determined by z(t), 0 \u2264 t \u2264 \u03b5. Since\nF\u03b5 (x, y) \u2264 \u03bb\u03b5, we see from the previous theorem that z\u03b5 (t) \u2192 z0\u2217 (t). But also\nz\u03b5 (t) = z(t + \u03b5) \u2192 z(t), since z(t) is continuous. We conclude that z(t) = z0\u2217 (t),\nwhich implies uniqueness.\n\u0003\n2\n\n3.5. Analysis of the measure-valued fluid model. For any Borel set F of R+ ,\nthe measure valued function \u03b6(*) satisfies the equation\nZ t\n(3.6)\n\u03b6(t)(F ) = \u03b60 (F + (S(0, t), t)) + \u03bb\n\u03b8(F + (S(s, t), t \u2212 s))ds.\n0\n\nThe properties, which are analogues of properties of z(*), are gathered in the following theorem:\nTheorem 3.11. Let \u03b6(*) be a solution of (3.6).\n(i) Suppose \u03c1 > 1, E [min{B, D}] < \u221e and \u03bbE[B1{D=\u221e} ] < 1. As t \u2192 \u221e,\n\u03b6(t) converges to the limiting measure \u03b6\u221e defined by\nZ \u221e\n\u03b6\u221e ([x, \u221e] \u00d7 [y, \u221e]) = \u03bb\nP (B \u2212 x \u2265 s/z\u221e , D \u2212 y \u2265 s) ds,\n0\n\nwhere z\u221e is the unique solution of the fixed point equation (3.2).\n(ii) If Condition (2.10) of Theorem 2.3 holds, then Equation (3.6) has a unique\nsolution.\n\nProof. We know that z(t) \u2192 z\u221e as t \u2192 \u221e. Consequently, S(t \u2212 t0 , t) \u2192 t0 /z\u221e for\nevery t0 > 0. Write for any Borel set F ,\nZ t0\n\u03b8(F + (S(t \u2212 s, t), s))ds\n\u03b6(t)(F ) = \u03b6(0)(F + (S(0, t), t)) + \u03bb\n0\nZ t\n\u03b8(F + (S(t \u2212 s, t), s))ds.\n+\u03bb\nt0\n\nNumber the three terms on the right hand side as I, II, III. By shifting time if\nnecessary, we may assume that z(0) > 0. The first term converges to 0. Since\nz(0) > 0, there exists an \u03b7 > 0 such that z(t) \u2265 \u03b7 for all t \u2265 0. This implies that\n+\nS(t \u2212 s, t) \u2264 s/\u03b7. Consequently, since F \u2286 R2 ,\nZ t\nP(B \u2265 s/\u03b7; D \u2265 s)ds.\nIII \u2264 \u03bb\nt0\n\nFrom this bound, it follows that III \u2192 0 as t0 \u2192 \u221e. Since \u03b8 only has countably\nmany discontinuities, and S(t \u2212 s, t) \u2192 s/z on [0, t0 ] we have that\nZ t0\n\u03b8(F + (s/z, s))ds.\nII \u2192 \u03bb\n0\n\nTaking t \u2192 \u221e and then t0 \u2192 \u221e yield the first statement of the theorem.\n\n\f16\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n+\n\nTo prove the second statement, note that (3.6) has a unique solution for F = R2 ,\nwhich uniquely determines S(s, t) for all s, t with s \u2264 t. Since \u03b6 is completely\ndetermined by \u03b60 , and S(s, t), uniqueness follows.\n\u0003\n4. Applications\nIn this section we analyze a number of quantitative properties of the fluid model\nequation (2.9). In particular, we investigate the fixed point equation\n(4.1)\n\nz\u221e = \u03bbE [min{z\u221e B, D}] .\n\nWe treat a number of examples which allow for explicit computations, and also\nobtain a number of stochastic ordering results. In addition, we investigate the\ntime-dependent behavior of z(t) for exponentially distributed lead times.\nWe first give a heuristic interpretation of Equation (4.1): Let Z r denote the\nsteady-state number of customers in the system. Furthermore, let V r (B) be the\nsojourn time of a customer if the customer never reneges. Then the actual sojourn\ntime is given by min{V r (B), Dr }, and from Little's law we get\n(4.2)\n\nE [Z r ] = \u03bbE [min{V r (B), Dr }] .\n\nDivide both sides of (4.2) by r. Since we observe the system in steady state at\ntime 0, the number of customers hardly changes and by the snapshot principle\nwe conclude that V r = Z r B + o(r). Furthermore, we have Dr = Dr. Noting that\nZ r /r \u2192 z then gives (4.1) after dividing both sides of (4.2) by r and letting r \u2192 \u221e.\nApart from the mean queue length z, we are also interested in the long term\nfraction of customers that leave the system successfully. Denote this fraction by\nPs . It is clear that\nPs = P (D > z\u221e B) .\nThe following remarkable property, which simply follows from the fixed-point\nequation (4.1), shows that the performance of the system does not depend on the\naverage of D.\nProperty 4.1. Consider two systems numbered by 1 and 2 such that (B2 , D2 ) \u2261\n(B1 , aD1 ) for some a > 0, and such that \u03bb1 = \u03bb2 . Then (with obvious notation)\nwe have\nz2,\u221e = az1,\u221e , Ps,2 = Ps,1 .\nWe now proceed by analyzing a number of special cases. In Section 4.1, we\nassume a strong form of dependence. Section 4.2 assumes that B and D are independent. We give a remarkably simple expression for z(t) in the case that D has\nan exponential distribution. Finally, Section 4.3 considers an example which can\nbe used as a flow level model for the integration of elastic and streaming traffic.\n4.1. Completely dependent lead times. Consider first the case where D = \u0398B,\nwith \u0398 > 0 (independent of B) reflecting the average service rate expected by a\ncustomer. In this case, the performance measures can be determined from the\nequations (recall that \u03c1 = \u03b1E [B] > 1)\nz\u221e = \u03c1E [min{\u0398, z\u221e }] ,\nSome specific examples:\n\nPs = P (\u0398 > z\u221e ) .\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n17\n\n- \u0398 single-valued. If we assume that \u0398 = \u03b8, then z\u221e = \u03c1 min{\u03b8, z\u221e }, which\nimplies that z\u221e = \u03c1\u03b8 since \u03c1 > 1. From this, it follows that all customers\nleave the system impatiently: Ps = P (\u03b8 > \u03c1\u03b8) = 0. Observe that when\na customer leaves the system, a fraction 1/\u03c1 of his service time has been\nprocessed.\n- \u0398 two-valued. From the previous example, it is clear that the system can\nonly get some work done if some customers are more patient than others.\nIn this example we assume that \u0398 equals \u03b81 with probability p and \u03b82 with\nprobability 1 \u2212 p. Take \u03b82 > \u03b81 . Equation (4.1) now simplifies to\nz\u221e = \u03c1p min{z\u221e , \u03b81 } + \u03c1(1 \u2212 p) min{z\u221e , \u03b82 }.\nFrom this equation and the properties \u03b82 > \u03b81 , \u03c1 > 1 it follows that z\u221e >\n\u03b81 . Furthermore, z\u221e > \u03b82 holds if and only if the equation\nz\u221e = \u03c1p\u03b81 + \u03c1(1 \u2212 p)z\u221e\nhas a non-negative solution, which is the case if and only if \u03c1(1 \u2212 p) < 1\n(i.e. when the most patient customers cannot saturate the system alone).\nIn this case we have\n\u03c1p\u03b81\n< \u03b82 .\nz\u221e =\n1 \u2212 \u03c1(1 \u2212 p)\nIf the last inequality is not valid or if \u03c1(1 \u2212 p) \u2265 1 we must have z\u221e \u2265 \u03b82\nwhich implies\nz\u221e = \u03c1p\u03b81 + \u03c1(1 \u2212 p)\u03b82 .\nFrom the above we can conclude that Ps = 0 iff (1 \u2212 \u03c1(1 \u2212 p))\u03b82 < \u03c1p\u03b81. If\nthe reverse inequality holds then all customers of type 2 are being served\nsuccessfully, i.e. Ps = (1 \u2212 p).\n- \u0398 exponentially distributed. Assume w.l.o.g. that the mean of \u0398 equals 1.\nIn this case z\u221e can be determined from the equation z\u221e = \u03c1(1 \u2212 e\u2212z\u221e )\nand Ps = e\u2212z\u221e = 1 \u2212 z\u221e /\u03c1.\nSince Ps does not depend on the mean of \u0398, and since the worst-case property of\nthe case of constant \u0398, it seems natural to conjecture that the system performance\nis positively related to the variability of \u0398. Thus it seems worthwhile to look for\ncvx\n\nordering relations for Ps if \u03981 \u2265 \u03982 . If E [\u03981 ] = E [\u03982 ], this is equivalent to\nE [min{x, \u03981 }] \u2264 E [min{x, \u03982 }] for all x \u2265 0.\ncvx\n\nThus, if \u03981 \u2265 \u03982 , it follows that z2,\u221e \u2265 z1,\u221e i.e. less variability in reneging behavior implies a lower service rate. To prove that also P (\u03981 > z1,\u221e ) \u2265\nP (\u03982 > z2,\u221e ) seems hard without imposing further assumptions.\n4.2. Independent lead times. In this case we can write (4.1) as\nZ \u221e\nP (B \u2265 u) P (D \u2265 z\u221e u) du = 1.\n\u03bb\n0\n\nwhich, in case E [B] < \u221e, is equivalent to P (D \u2265 z\u221e B \u2217 ) = 1/\u03c1, with B \u2217 a random\nvariable with density P (B \u2265 x) /E [B].\nRecall that Ps = P (D \u2265 z\u221e B). Consequently, if B is exponentially distributed,\nwe have the insensitivity (w.r.t. the distribution of D) result Ps = 1/\u03c1. The inequality Ps \u2264 1/\u03c1 holds if B \u2217 is stochastically dominated by B, and Ps \u2265 1/\u03c1 vice\nversa. Since B \u2217 being stochastically dominated by B is related to a low variability\n\n\f18\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nof B, we see again that more variability (this time in the service times) leads to a\nbetter system performance (i.e. higher Ps ).\nExponential reneging\nIf we assume that D has an exponential distribution (and B a general distribution),\nwe see that z\u221e is the solution of\n\u03c1\u03b2 \u2217 (z\u221e \u03bd)) = 1,\n\u0003\nwith \u03b2 \u2217 (s) = E e\u2212sB .\nIn addition, we have the following remarkable expression for the complete fluid\nlimit z(t), t \u2265 0, if z0 = 0:\n(4.3)\n\n\u0002\n\n\u2217\n\nProposition 4.2. Suppose P (D \u2265 t) = e\u2212\u03bdt , that B is independent of D and that\nz0 = 0. Then the unique solution of (2.9) is given by\nz(t) = z\u221e (1 \u2212 e\u2212\u03bdt ),\n\n(4.4)\n\nwith z the solution of Equation (4.3).\nProof. Recall that Equation (2.9) has a unique solution. We show that (4.4) is\nindeed the solution of (2.9) by verification. We thus compute the right hand side\nof (2.9) writing z(u) = z\u221e (1 \u2212 e\u2212\u03bdu ).\nObserve that\nZ t\n1\ndu = log(e\u03bdt \u2212 1) \u2212 log(e\u03bds \u2212 1).\nz\u221e\nz(u)\ns\nConsequently,\n\u0013\n\u0012\nZ t\nZ t\n(1/z(u))du ds\nP (D \u2265 t \u2212 s)P B \u2265\n\u03bb\n0\n\ns\n\nZ\n\u0001\n\u03bb \u2212\u03bdt t\n= e\nP z\u221e B \u2265 log(e\u03bdt \u2212 1) \u2212 log(e\u03bds \u2212 1) de\u03bds\n\u03bd\nZ0\n\u0001\n\u03bb \u2212\u03bdt \u221e\ne\u2212v P z\u221e \u03bdB \u2265 log(e\u03bdt \u2212 1) + z\u221e dv\n= e\n\u03bd\n\u03bdt\n\u2212 log(e \u22121)\nZ \u221e\n\u03bb \u2212\u03bdt \u03bdt\n= e (e \u2212 1)\nP (z\u221e \u03bdB \u2265 v) e\u2212v dv\n\u03bd\n0\n= z\u221e (1 \u2212 e\u2212\u03bdt )\u03c1\u03b2 \u2217 (z\u221e \u03bd) = z\u221e (1 \u2212 e\u2212\u03bdt ).\n\nWhich shows that z\u221e (1 \u2212 e\u2212\u03bdt ) satisfies (2.9).\n\u0003\n4.3. TCP-friendly traffic. Assume that there exist independent random variables B1 and D1 with finite means such that\n(B, D) = (B1 , \u221e)\n= (\u221e, D1 )\n\nwith probability p,\nwith probability 1 \u2212 p.\n\nWhen we view PS as a way of modeling TCP, this example models the integration\nof elastic (TCP) traffic and TCP friendly UDP traffic; see Key et al. [19] for a related\nmodel. The latter type of traffic is using the system for a certain amount of time,\nregardless of the level of congestion.\nThe fixed point equation (4.1) for q specializes to\nz\u221e = \u03bbpE [z\u221e B1 ] + \u03bb(1 \u2212 p)E [D1 ] ,\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n19\n\nConsequently, if the stability condition \u03bbpE [B1 ] is satisfied, we see that\nz\u221e =\n\n\u03bb(1 \u2212 p)E [D1 ]\n.\n1 \u2212 \u03bbpE [B1 ]\n\n5. Tightness\nIn this section we prove the first part of Theorem 2.2, that is, we show that the\nr\nsequence of processes {Z (*), r \u2208 R} is tight in D([0, \u221e), M1 ). The main results in\nthis section implying this property are the compact containment Lemma 5.2, and\nan oscillation inequality in Lemma 5.6. To prove these results, a number of further\nlemmas are developed. Section 5.1 derives a Glivenko-Cantelli theorem for the\nstochastic primitives. Section 5.2 introduces a fluid scaled version of the dynamic\nr\nequation for Z (*). The compact containment property is derived in Section 5.3.\nSection 5.4 serves as a preparation for the oscillation bound. In particular, it\nr\nis shown that Z (t) charges arbitrarily small mass to thin L-shaped sets. The\noscillation bound is then shown in Section 5.5.\nThroughout this section, it is assumed that the assumptions of Section 2.2 hold.\n5.1. A Glivenko-Cantelli theorem. An important preliminary result is the following functional Glivenko-Cantelli theorem for the stochastic primitives. It will\nbe convenient to consider them together as a single, measure valued arrival process.\nFor r \u2208 R and t \u2265 s \u2265 0, define the fluid scaled measure valued arrival process by\nr\n\nrE (t)\n1 X\n\u03b4(Bir ,Dir r\u22121 ) ,\nL (t) =\nr i=1\nr\n\nand define the fluid scaled increment\nr\n\nr\n\nr\n\nL (s, t) = L (t) \u2212 L (s).\n\n(5.1)\nr\n\nNote that L (*) is a random element of D([0, \u221e), M1 ) and, for each t \u2265 s \u2265 0,\nr\nL (s, t) is a random element of M1 .\nTo state and prove the result, we first introduce some notions from empirical pro2\ncess theory. Our primary reference is [32]. A collection C of subsets of R+ shatters\n2\n\nan n-point subset {x1 , . . . , xn } \u2282 R+ if the collection {C \u2229 {x1 , . . . , xn } : C \u2208 C}\nhas cardinality 2n . In this case, say that C picks out all subsets of {x1 , . . . , xn }.\nThe Vapnik-\u010cervonenkis index (VC-index) of C is\nVC = min{n : C shatters no n-point subset},\nwhere the minimum of the empty set equals infinity. The collection C is a Vapnik\u010cervonenkis class (VC-class) if it has finite VC-index.\nVC-classes satisfy a useful entropy bound. Let Q denote the set of Borel proba2\nbility measures on R+ and, for Q \u2208 Q, let kf kQ = h|f |, Qi denote the L1 (Q)-norm\n2\n\nof a Borel measurable function f : R+ \u2192 R. For \u03b5 > 0, the L1 (Q) \u03b5-ball around\nf is the set of Borel functions {g : kf \u2212 gkQ < \u03b5}. For a family of functions V ,\nthe (\u03b5, L1 (Q))-covering number N (\u03b5, V , L1 (Q)) is the smallest number of L1 (Q)\n\u03b5-balls needed to cover V . If C is a VC-class, then for all \u03b5 > 0, the family\nV = {1C : C \u2208 C} satisfies\n(5.2)\n\nsup log N (\u03b5, V , L1 (Q)) < \u221e;\n\nQ\u2208Q\n\n\f20\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nsee Theorem 2.6.4 in [32].\nRecall the collection of corner sets C defined in Section 2.3:\n\b\nC = {[x, \u221e) \u00d7 [y, \u221e) : x, y \u2208 R+ } \u222a [x, \u221e] \u00d7 [y, \u221e] : x, y \u2208 R+ .\n2\n\nNote that for any 3-point subset {x1 , x2 , x3 } \u2282 R+ , it is impossible for C to pick\nout all three 2-point subsets of {x1 , x2 , x3 }. Since C shatters no 3-point subset, it\nhas VC-index bounded above by 3. Thus, C is a VC-class and V = {1C : C \u2208 C}\nsatisfies (5.2).\n2\nDefine an envelope function for V as follows. Let \u03c0 : R+ \u2192 R+ be the map\n\u03c0(x, y) = max{x, y}. Since \u03c0 is continuous, (2.5) and the Skorohod representation\ntheorem imply the existence of R+ -valued random variables X r \u223c \u03b8\u0306r \u25e6 \u03c0 \u22121 and\nX \u223c \u03b8 \u25e6 \u03c0 \u22121 such that X r \u2192 X almost surely. Thus, there exists an R+ -valued\nrandom variable Y such that\nY = sup X r ,\n\n(5.3)\n\nalmost surely.\n\nr\u2208R\n\nLet \u03bc be the law of Y on R+ . Since L2 (\u03bc) contains continuous unbounded functions,\nthere exists a continuous, unbounded function \u03c8 : R+ \u2192 R+ that is increasing on\n[0, \u221e), satisfies \u03c8 \u2265 1, and such that h\u03c8 2 , \u03bci < \u221e. This implies that\nh(\u03c8 \u25e6 \u03c0)2 , \u03b8i = E[\u03c8(X)2 ] \u2264 E[\u03c8(Y )2 ] < \u221e.\n\n(5.4)\n\nLet F = \u03c8 \u25e6 \u03c0, and note that 1C \u2264 F for all C \u2208 C. That is, F is an envelope\nfunction for V . Finally, define V = V \u222a {F }.\nLemma 5.1. Let T > 0. Then as r \u2192 \u221e,\n(5.5)\n\nsup\n\nsup\n\nPr\n\nr\n\nhf, L (s, t)i \u2212 \u03bbr (t \u2212 s)hf, \u03b8\u0306r i \u2212\u2192 0.\n\nf \u2208V 0\u2264s\u2264t\u2264T\n\nProof. Let \u03b5 > 0. By (5.1), it suffices to show that\nr\n\nlim sup P\nr\u2192\u221e\n\nr\n\nr\n\nr\n\nsup sup hf, L (t)i \u2212 \u03bb thf, \u03b8\u0306 i > \u03b5\nf \u2208V t\u2208[0,T ]\n\n!\n\n\u2264 \u03b5.\n\nNote that the above event is measurable for each r because it can be rewritten\nusing the suprema over rational t, and f = 1C with C having rational or infinite\nr\ncorner coordinates x and y. Since hf, L (t)i and \u03bbr thf, \u03b8\u0306r i are nondecreasing in t\nfor each fixed f \u2208 V , it suffices to show that for each fixed t \u2208 [0, T ],\n!\nlim sup Pr\nr\u2192\u221e\n\nr\n\nsup hf, L (t)i \u2212 \u03bbr thf, \u03b8\u0306r i > \u03b5\n\n\u2264 \u03b5.\n\nf \u2208V\n\nSince\nr\n\nr\n\nr\n\nr\n\n\u0010\n\nr\n\nr\n\n\u0011\n\nr\n\nhf, L (t)i \u2212 \u03bb thf, \u03b8\u0306 i = hf, \u03b8\u0306 i E (t) \u2212 \u03bb t + E (t)\n\nr\n\nhf, L (t)i\nr\n\nE (t)\n\nr\n\n!\n\n\u2212 hf, \u03b8\u0306 i\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n21\n\n(with the convention that division by zero equals zero), it suffices to show the two\nbounds\n!\n\u0011\n\u0010 r\n\u03b5\n\u03b5\nr\nr\nr\n\u2264 ,\nsup hf, \u03b8\u0306 i E (t) \u2212 \u03bb t >\nlim sup P\n2\n2\nr\u2192\u221e\nf \u2208V\n!\n!\nr\nL\n(t)i\n\u03b5\nhf,\n\u03b5\nr\n\u2212 hf, \u03b8\u0306r i >\nlim sup Pr sup E (t)\n\u2264 .\n(5.6)\nr\n2\n2\nr\u2192\u221e\nE (t)\nf \u2208V\nThe first equation follows from assumption (2.4) and by observing that\nsup sup hf, \u03b8\u0306r i \u2264 sup hF, \u03b8\u0306r i = sup E[\u03c8(X r )] \u2264 E[\u03c8(Y )] < \u221e,\n\n(5.7)\n\nr\u2208R\n\nr\u2208R f \u2208V\n\nr\u2208R\n\nwhich follows from (5.3) and (5.4). To show (5.6), it suffices to verify three assumptions of Theorem 2.8.1 in [32]. Observe that for each n \u2208 N and (e1 , . . . , en ) \u2208 Rn ,\nthe function\nn\nX\n(x1 , . . . , xn ) \u2192 sup\nei f (xi )\nf \u2208V i=1\n\n2\n(R+ , B, \u03b8\u0306r )n ,\n\nis measurable on the completion of\nfor each r \u2208 R. Thus, V is a\nr\n\u03b8\u0306 -measurable class for each r \u2208 R; see Definition 2.3.3 in [32]. Moreover, V is\nuniformly bounded above by the envelope function F , and\nlim sup hF 1{F >M} , \u03b8\u0306r i = 0,\n\nM\u2192\u221e r\u2208R\n\nby Markov's inequality, (5.3), and (5.4). Lastly, V satisfies the finite entropy bound\n(5.2) because N (\u03b5, V , L1 (Q)) \u2264 N (\u03b5, V , L1 (Q)) + 1 and C is a VC-class. The\nprevious three observations imply that the assumptions of Theorem 2.8.1 in [32]\nare satisfied. Consequently, V is Glivenko-Cantelli, uniformly in r. That is, for\nevery \u03b4 > 0, there exists an n\u03b4 such that n \u2265 n\u03b4 implies\n!\nm\n1 X\nr\nr \u22121\nr\nr\nf (Bi , Di r ) \u2212 hf, \u03b8\u0306 i > \u03b4 \u2264 \u03b4.\nsup sup\n(5.8)\nsup P\nm\u2265n f \u2208V m i=1\nr\u2208R\nChoose \u03b4 = min{\u03b5/2, \u03b5/(4\u03bbT )}. The left side of (5.6) is bounded above by\n\u0010\n\n\u0011\n\nr\n\nr\n\nlim sup Pr E (t) > 2\u03bbT + lim sup Pr\nr\u2192\u221e\n\nsup\n\nr\u2192\u221e\n\nhf, L (t)i\n\nf \u2208V\n\nr\n\nE (t)\n\n\u03b5\n\u2212 hf, \u03b8\u0306r i >\n4\u03bbT\n\n!\n\n.\n\nThe first term equals zero by (2.4). For the second term, rewrite\nr\n\nr\n\nhf, L (t)i\nr\n\nE (t)\n\nE (rt)\nX\n1\n= r\nf (Bir , Dir r\u22121 ),\nE (rt) i=1\n\nand bound each probability in the second term by\nm\n\nr\n\nr\n\nr\n\n(5.9) P (E (rt) < n\u03b4 ) + P\n\n1 X\n\u03b5\nsup sup\nf (Bir , Dir r\u22121 ) \u2212 hf, \u03b8\u0306r i >\nm\n4\u03bbT\nm\u2265n\u03b4 f \u2208V\ni=1\n\n!\n\n.\n\nBy (2.4), the first term in (5.9) converges to zero as r \u2192 \u221e. By (5.8), the second\nterm is bounded above by \u03b4 \u2264 \u03b5/2, uniformly in r \u2208 R. This implies (5.6).\n\u0003\n\n\f22\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\n5.2. Fluid scaled dynamic equation. Using (2.3), it is easy to see that the\nfluid scaled state descriptor of the rth model satisfies the following equation almost\nsurely: for each Borel set A \u2208 B, and all t, h \u2265 0,\n\u0010\n\u0011\nr\nr\nr\n(5.10) Z (t + h)(A) = Z (t) A + (S (t, t + h), h)\nr\n\nrE (t+h)\n\n+\n\nX\nr\n\ni=rE (t)+1\n\n\u0011\n\u0010 r\nr\nB\nD\n(t\n+\nh)\n.\n1+\n(t\n+\nh),\ni\ni\nA\n\nSubsequent proofs use estimates obtained from this equation. Two estimates\nresult from bounding the summands in (5.10) by 1 and optionally bounding the\nfirst term on the right side by its total mass; for each A \u2208 B and t, h \u2265 0,\n\u0010\n\u0011\nr\nr\nr\nr\n2\nZ (t + h)(A) \u2264 Z (t) A + (S (t, t + h), h) + L (t, t + h)(R+ )\n\u0010 2\u0011\n(5.11)\nr\nr\n2\n\u2264 Z (t) R+ + L (t, t + h)(R+ ).\n\nTwo more estimates follow from (5.10) by simply ignoring any arrivals; for each\nA \u2208 B and t, h \u2265 0,\n\u0010\n\u0011\n\u0010 2\u0011\nr\nr\nr\nr\nZ (t) A + (S (t, t + h), h) \u2264 Z (t + h)(A) \u2264 Z (t + h) R+ .\n(5.12)\n\n5.3. Compact containment. This section establishes the compact containment\nproperty needed to prove tightness.\n\nLemma 5.2. Let T > 0 and \u03b7 > 0. There exists a compact set K \u2282 M1 such that\n\u0010 r\n\u0011\n(5.13)\nlim inf Pr Z (t) \u2208 K for all t \u2208 [0, T ] \u2265 1 \u2212 \u03b7.\nr\u2192\u221e\n\n2\n\nProof. A set K \u2282 M1 is relatively compact if sup\u03be\u2208K \u03be(R+ ) < \u221e, and if there\nS\n2\n2\nexists a sequence of nested compact sets Kn \u2282 R+ such that n\u2208N Kn = R+ and\nlim sup \u03be(Knc ) = 0,\n\nn\u2192\u221e \u03be\u2208K\n\nwhere Knc denotes the complement of Kn ; see [17], Theorem A 7.5. Consider the\n2\nnested sequence of compact sets in R+ given by\nKn = ([0, n] \u00d7 [0, n]) \u222a ([0, n] \u00d7 {\u221e}) \u222a ({\u221e} \u00d7 [0, n]) \u222a ({\u221e} \u00d7 {\u221e}),\nr\n\nn \u2208 N.\n\nr\n\nw\n\nBy (2.6), Z (0) \u2212\u2192 \u03b60 in distribution, and so the sequence {Z (0)} is tight.\nThus, there is a compact set K0 \u2282 M1 , such that\n\u03b7\nr\n(5.14)\nlim inf Pr (Z (0) \u2208 K0 ) \u2265 1 \u2212 .\nr\u2192\u221e\n2\n2\n\nLet M0 = sup\u03be\u2208K0 \u03be(R+ ), and let an = sup\u03be\u2208K0 \u03be(Knc ) for each n \u2208 N. Since K0\n2\n\nis compact, M0 < \u221e and there exists a sequence of nested compact sets Jn \u2282 R+\nS\n2\nsuch that n\u2208N Jn = R+ and limn\u2192\u221e sup\u03be\u2208K0 \u03be(Jnc ) = 0. Since Jn \u2282 Kk(n) for\neach n \u2208 N and sufficiently large k(n) \u2208 N, it follows that an \u2192 0 as n \u2192 \u221e.\nRecall the definition from Section 5.1 of the envelope function\nF = \u03c8 \u25e6\u0011\u03c0 for the\n\u0010\nr\nfamily V . By (2.4) and (5.7), the constant M = supr\u2208R \u03bb T hF, \u03b8\u0306r i + 1 is finite.\nLet K be the closure of the set\nn\no\n2\n\u03be \u2208 M1 : \u03be(R+ ) \u2264 M0 + M and \u03be(Knc ) \u2264 an + \u03c8(n)\u22121 M for all n \u2208 N .\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n23\n\nSince an + \u03c8(n)\u22121 M \u2192 0 as n \u2192 \u221e, the set K is compact in M1 .\nFor each r \u2208 R, denote the event in (5.14) by \u03a9r0 and define the event\no\nn\nr\n\u03a9r1 = hF, L (T )i \u2264 \u03bbr T hF, \u03b8\u0306r i + 1 .\n\nBy (5.14) and Lemma 5.1, lim inf r\u2192\u221e Pr (\u03a9r0 \u2229 \u03a9r1 ) \u2265 1 \u2212 \u03b7. Fix \u03c9 \u2208 \u03a9r0 \u2229 \u03a9r1 and\nt \u2208 [0, T ], and assume for the remainder of the proof that all random objects are\nr\nevaluated at this \u03c9. Then it suffices to show that Z (t) \u2208 K.\nBy (5.11),\n2\n2\n2\nr\nr\nr\nZ (t)(R+ ) \u2264 Z (0)(R+ ) + L (t)(R+ ).\n2\n\nr\n\nr\n\nr\n\nr\n\nSince L (t)(R+ ) = h1, L (t)i \u2264 h1, L (T )i \u2264 hF, L (T )i, the definitions of \u03a9r0 , \u03a9r1 ,\nand M imply that\nr\n\n2\n\nZ (t)(R+ ) \u2264 M0 + M.\n\n(5.15)\nFix n \u2208 N. By (5.10),\n\nr\n\nZ\n\nr\n\n(t)(Knc )\n\n\u0010 r\n\u0010\n\u0011 rE\n\u0011\nX(t)\nr\nr\n1+\n= Z (0) Knc + (S (0, t), t) +\nB\n(t),\nD\n(t)\n.\nc\ni\ni\nKn\nr\n\ni=1\n\nThe shape of the set Knc implies that\n\n\u0011\n\u0010 r\nr\nB i (t), D i (t) \u2264 1Knc (Bir , Dir r\u22121 ),\nKnc + (S(0, t), t) \u2282 Knc and 1+\nc\nKn\nr\n\nfor i = 1, . . . , rE (t). Thus,\nr\n\nr\n\nr\n\nZ (t)(Knc ) \u2264 Z (0) (Knc ) + h1Knc , L (t)i.\nBy definition of \u03c8, F , and by Markov's inequality, 1Knc \u2264 \u03c8(n)\u22121 F . So\nr\n\nr\n\nr\n\nZ (t)(Knc ) \u2264 Z (0) (Knc ) + \u03c8(n)\u22121 hF, L (t)i.\nr\n\nr\n\nSince hF, L (t)i \u2264 hF, L (T )i, the definitions of \u03a9r0 , \u03a9r1 , and M imply that\n(5.16)\n\nr\n\nZ (t)(Knc ) \u2264 an + \u03c8(n)\u22121 M.\nr\n\nEquations (5.15) and (5.16) imply that Z (t) \u2208 K.\n\n\u0003\n\n5.4. Asymptotic regularity. The second and main step necessary to prove tightr\nness is to bound the probability that the process Z (*) oscillates. Oscillations may\nresult from sudden arrivals or departures of a large amount of mass. Sudden arrivals are controlled by the regularity of the arrival process. To show that sudden\nr\ndepartures are unlikely as well, we show that Z (*) assigns arbitrarily small mass\nto the boundaries of the sets C \u2208 C. This is phrased in terms of \u03ba-enlargements of\nthe boundaries of these sets (forming a collection of L-shaped sets). For C \u2208 C and\n\u03ba > 0, let \u2202C denote the boundary of C and let\n\u001b\n\u001a\n2\n\u03ba\n\u2202C\n= w \u2208 R+ : inf kw \u2212 zk < \u03ba\nz\u2208\u2202C\n\nbe the \u03ba-enlargement in\n\n2\nR+\n\nof its boundary, where the infimum over the empty set\n2\n\n\u03ba\nequals \u221e. (Note that \u2202C , and therefore also \u2202C\n, is empty for the corner sets R+\n\u03ba\n+\nand {\u221e} \u00d7 {\u221e}. Note also that \u2202C = ((x \u2212 \u03ba) , x + \u03ba) \u00d7 {\u221e} for a corner set of\nthe form [x, \u221e] \u00d7 {\u221e} with x \u2208 [0, \u221e).) The following lemma establishes the result\nr\nfor the initial condition Z (0).\n\n\f24\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nLemma 5.3. For all \u03b5, \u03b7 > 0 there exists a \u03ba > 0 such that\n\u0012\n\u0013\nr\n\u03ba\nr\n(5.17)\nlim inf P sup Z (0)(\u2202C ) \u2264 \u03b5 \u2265 1 \u2212 \u03b7.\nr\u2192\u221e\n\nProof. Fix \u03b5, \u03b7 > 0 and let\nFor each C \u2208 C and \u03ba > 0,\n\nC\u2208C\n\nr\nZ 1 (0)(*)\n\nr\n\nr\n\nr\n\n= Z (0)(* \u00d7 R+ ) and Z 2 (0)(*) = Z (0)(R+ \u00d7 *).\n\n\u03ba\n\u2202C\n\u2282 ([x, x + 2\u03ba] \u00d7 R+ ) \u222a (R+ \u00d7 [y, y + 2\u03ba]),\n\nfor some (x, y) \u2208 R2+ = [0, \u221e) \u00d7 [0, \u221e). Thus, it suffices to show that, for i = 1, 2,\nthere exists a \u03ba > 0 such that\n!\n\u03b7\nr\nsup Z i (0)([x, x + 2\u03ba]) \u2264 \u03b5 \u2265 1 \u2212 .\n(5.18)\nlim inf Pr\nr\u2192\u221e\n2\nx\u2208[0,\u221e)\nWe prove the statement for i = 1; the proof is identical for i = 2.\nr\nThe projection (x, y) 7\u2192 x is continuous, so (2.6) implies that Z 1 (0) converges\nin distribution to \u03b60 (* \u00d7 R+ ) as r \u2192 \u221e. Since \u03b60 (* \u00d7 R+ ) is free of atoms in [0, \u221e),\nthere exists a \u03ba > 0 such that\nsup \u03b60 ([x, x + 4\u03ba] \u00d7 R+ ) \u2264 \u03b5.\n\n(5.19)\n\nx\u2208[0,\u221e)\n\n(If (5.19) fails, it is easy to construct an atom of \u03b60 (* \u00d7 R+ ).) Moreover, there exists\na constant M such that\n\u03b60 ([M, \u221e) \u00d7 R+ ) \u2264 \u03b5.\n\n(5.20)\n\nLet N = \u2308M/\u03ba\u2309 + 1, where \u2308x\u2309 denotes the smallest integer n \u2265 x. For n =\n1, . . . , N \u2212 1, define the set In = [n\u03ba, (n + 4)\u03ba] and define IN = [M, \u221e). Note that,\nfor every x \u2208 [0, \u221e) there is an n \u2264 N such that [x, x + 2\u03ba] \u2282 In . To prove (5.18),\nit therefore suffices to show that\n\u0013\n\u0012\n\u03b7\nr\n(5.21)\nlim inf Pr max Z 1 (0)(In ) \u2264 \u03b5 \u2265 1 \u2212 .\nr\u2192\u221e\nn\u2264N\n2\nLet M1 (R+ ) denote the space of finite \bnonnegative Borel measures on R+ , endowed with the weak topology. Let A = \u03be \u2208 M1 (R+ ) : maxn\u2264N \u03be(In ) < \u03b5 , and\nw\nsuppose that a sequence {\u03bek } \u2282 M1 (R+ ) satisfies \u03bek \u2212\u2192 \u03be for some \u03be \u2208 A. Since\nthe sets In are closed, the Portmanteau theorem (adapted to finite measures) implies that\nlim sup \u03bek (In ) \u2264 \u03be(In ) < \u03b5, for all n \u2264 N .\nk\u2192\u221e\n\nHence, \u03bek \u2208 A for sufficiently large k, which implies that A is open in M1 (R+ ).\nThus, a second application of the Portmanteau theorem yields\nr\n\nlim inf Pr (Z 1 (0) \u2208 A) \u2265 P(\u03b60 (* \u00d7 R+ ) \u2208 A) = 1,\nr\u2192\u221e\n\nwhich implies (5.21).\n\n\u0003\nr\n\nThe regularity result is now shown for the entire state descriptor Z (*).\nLemma 5.4. Let T > 0 and \u03b5, \u03b7 > 0. There exists a \u03ba > 0 such that\n!\n\n(5.22)\n\nlim inf Pr\nr\u2192\u221e\n\nr\n\n\u03ba\n)\u2264\u03b5\nsup sup Z (t)(\u2202C\n\nC\u2208C t\u2208[0,T ]\n\n\u2265 1 \u2212 \u03b7.\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n25\n\nProof. By Lemmas 5.1, 5.2, and 5.3, there exists a compact K \u2282 M1 and a \u03ba0 > 0,\nsuch that for all \u03b4 > 0, the events\n\u001b\n\u001a\n\u03b5\nr\n\u03ba0\n,\n\u03a9r1 = sup Z (0)(\u2202C\n)\u2264\n2\nC\u2208C\n\u001a\n\u001b\nr\n\u03a9r2 = sup sup\nL (s, t)(C) \u2212 \u03bbr (t \u2212 s)\u03b8\u0306r (C) \u2264 \u03b4 ,\nC\u2208C 0\u2264s\u2264t\u2264T\n\no\nr\n\u03a9r3 = Z (t) \u2208 K for all t \u2208 [0, T ] ,\nn\n\n\u03a9r0 = \u03a9r1 \u2229 \u03a9r2 \u2229 \u03a9r3 ,\n\nsatisfy\nlim inf Pr (\u03a9r0 ) \u2265 1 \u2212 \u03b7.\n\n(5.23)\n\nr\u2192\u221e\n\nRecall the compact sets Kn defined in the proof of Lemma 5.2. Since K is compact,\nthere exists a finite M \u2265 1 and an integer R < \u221e such that\n2\n\nsup \u03be(R+ ) \u2264 M,\n\n(5.24)\n\n\u03be\u2208K\n\nc\nsup \u03be (KR\n)\u2264\n\n(5.25)\n\n\u03be\u2208K\n\n\u03b5\n.\n2\n\nLet \u03bb\u2217 = supr\u2208R \u03bbr , which is finite by (2.4). Fix\nh = \u03b5(8\u03bb\u2217 )\u22121 ,\n\n\u03ba = min{\u03ba0 , h(2M )\u22121 } and \u03b4 = \u03b5 min{(8\u2308RM h\u22121\u2309)\u22121 , 2\u22121 }.\n\nFor r \u2208 R, let \u03a9r\u2217 denote the event in (5.22). By (5.23), it suffices to show that\n\u03a9r0 \u2282 \u03a9r\u2217 . Let \u03c9 \u2208 \u03a9r0 be arbitrary; for the remainder of the proof, all random\nobjects are evaluated at this \u03c9.\nr\n\u03ba\nConsider any r \u2208 R, t \u2208 [0, T ] and C \u2208 C. We must show that Z (t)(\u2202C\n) \u2264 \u03b5.\nDefine the random time\nr\n\n\u03c41 = sup{s \u2264 t : h1, Z (s)i = 0},\nif the supremum exists, and define \u03c41 = 0 otherwise. Let \u03c4 = max{\u03c41 , t \u2212 RM }.\nWe first show that\n\u0010\n\u0011 \u03b5\nr\nr\n\u03ba\nZ (\u03c4 ) \u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 ) \u2264 .\n(5.26)\n2\nIf \u03c4 = 0, this follows from the definition of \u03a9r1 because \u03ba \u2264 \u03ba0 , because\nr\n\n\u03ba\n\u03ba\nr\n,\n\u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 ) \u2282 \u2202C+(S\n(\u03c4,t),t\u2212\u03c4 )\n\nand because C is closed under positive translation. Suppose \u03c4 = \u03c41 > 0. Then there\nr\nis a sequence {\u03c4n }, with \u03c4n \u2191 \u03c4 , such that h1, Z (\u03c4n )i = 0 for all n. In this case,\n(5.11) and the definition of \u03a9r2 imply that, for all n,\n\u0010\n\u0011\n\u0010 +\u0011\n\u0010 +\u0011\nr\nr\nr\nr\n\u03ba\nZ (\u03c4 ) \u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 ) \u2264 Z (\u03c4n ) R2 + L (\u03c4n , \u03c4 ) R2 \u2264 \u03bbr (\u03c4 \u2212 \u03c4n ) + \u03b4.\nLetting \u03c4n \u2191 \u03c4 yields\n\n\u0010\n\u0011\n\u03b5\nr\nr\n\u03ba\nZ (\u03c4 ) \u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 ) \u2264 \u03b4 \u2264 .\n2\n\n\f26\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\nr\n\nSuppose that \u03c4 = t \u2212 RM . Since h1, Z (s)i > 0 for all s \u2208 (\u03c4, t], the definition of\n\u03a9r3 and (5.24) imply that\nZ t\nr\nr\nh1, Z (s)i\u22121 ds \u2265 R.\nS (\u03c4, t) =\nt\u2212RM\n\nThus, by the definition of \u03a9r3 and (5.25),\n\u0010\n\u0011\n\u03b5\nr\nr\nr\n\u03ba\nc\nZ (\u03c4 ) \u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 ) \u2264 Z (\u03c4 ) (KR\n)\u2264 ,\n2\nwhich proves (5.26).\nBy (5.10),\n\u0010\n\u0011\nr\nr\nr\n\u03ba\n\u03ba\n(5.27) Z (t) (\u2202C\n) = Z (\u03c4 ) \u2202C\n+ (S (\u03c4, t), t \u2212 \u03c4 )\nr\n\n1\n+\nr\n\nrE (t)\n\nX\nr\n\ni=rE (\u03c4 )+1\n\n\u0010 r\n\u0011\nr\n1+\nB\n(t),\nD\n(t)\n.\n\u03ba\ni\ni\n\u2202\nC\n\nLet I denote the second right hand term in (5.27). By (5.26), it remains to show\nthat I \u2264 \u03b5/2. Let N = \u2308(t \u2212 \u03c4 )h\u22121 \u2309 and, for each n = 0, . . . , N \u2212 1, let tn = \u03c4 + nh\n\u03ba\nand tn = min{tn+1 , t}. Then, using the inequality 1+\n\u2202 \u03ba (*, *) \u2264 1\u2202C (*, *),\nC\n\nI\u2264\n\n(5.28)\n\nN\n\u22121\nX\nn=0\n\nr\n\n1\nr\n\nn\n\nrE (t )\n\nX\nr\n\ni=rE (tn )+1\n\n\u0011\n\u0010 r\nr\n1\u2202C\u03ba B i (t), Di (t) .\n\nConsider n \u2208 {0, . . . , N \u2212 1} and i such that Uir r\u22121 \u2208 (tn , tn ]. Observe that\nr\n\nr\n\nr\n\nS (tn , t) \u2264 S (Uir r\u22121 , t) \u2264 S (tn , t).\n\n(5.29)\nBy definition,\nr\n\nr\n\n1\u2202C\u03ba (B i (t), D i (t)) = 1\u2202 \u03ba +(S r (U r r\u22121 ,t),t\u2212U r r\u22121 ) (Bir , Dir r\u22121 ).\n\n(5.30)\n\ni\n\nC\n\ni\n\nSo, letting\n\u0010 r\n\u0011\n+\nCn\u2212 = C + S (tn , t) \u2212 \u03ba, t \u2212 tn \u2212 \u03ba \u2229 R2 ,\n\u0011\n\u0010 r\n+\nCn+ = C + S (tn , t) + \u03ba, t \u2212 tn + \u03ba \u2229 R2 ,\nCn = Cn\u2212 \\ Cn+ ,\n\nit follows from (5.29) and (5.30) that\nr\n\nr\n\n1\u2202C\u03ba (B i (t), Di (t)) \u2264 1Cn (Bir , Dir r\u22121 ).\n\n(5.31)\n\nConclude from (5.28) and (5.31) that\nI\u2264\n\nN\n\u22121\nX\nn=0\n\nr\n\n1\nr\n\nrE (tn )\n\nX\n\n1Cn (Bir , Dir r\u22121 )\n\nr\n\ni=rE (tn )+1\n\n=\n\nN\n\u22121 \u0010\nX\nn=0\n\n\u0011\nr\nr\nL (tn , tn )(Cn\u2212 ) \u2212 L (tn , tn )(Cn+ ) .\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n27\n\nFor all n < N , Cn\u2212 , Cn+ \u2208 C and tn \u2212 tn \u2264 h. So the definition of \u03a9r2 implies that\nI\u2264\n\nN\n\u22121 \u0010\nX\nn=0\n\n\u0011\n\u03bbr h\u03b8\u0306r (Cn ) + 2\u03b4 .\n\nBy definition of N , and since t \u2212 \u03c4 \u2264 RM ,\nI \u2264 \u03bb\u2217 h\n\nN\n\u22121\nX\n\n\u03b8\u0306r (Cn ) + \u2308RM h\u22121 \u23092\u03b4.\n\nn=0\n\nThis implies, by choice of \u03b4, that\n\n\u2217\n\nI \u2264\u03bb h\n\n(5.32)\nIf n \u2208 {0, . . . , N \u2212 3}, then\n\nN\n\u22121\nX\n\n\u03b5\n\u03b8\u0306r (Cn ) + .\n4\nn=0\n\nr\n\nS (tn+1 , tn+2 ) \u2265 hM \u22121 \u2265 2\u03ba,\nr\n\nbecause 0 < h1, Z (s)i \u2264 M for all s \u2208 (\u03c4, t] and because h \u2265 \u03ba2M by definition.\nThus, for all n \u2208 {0, . . . , N \u2212 3},\nr\n\nr\n\nr\n\nr\n\nS (tn , t) \u2212 \u03ba = S (tn+1 , tn+2 ) + S (tn+2 , t) \u2212 \u03ba \u2265 S (tn+2 , t) + \u03ba.\n+\nHence, Cn\u2212 \u2282 Cn+2\nfor all n \u2208 {0, . . . , N \u2212 3}, and consequently, Cn \u2229 Cn+2 = \u2205.\nr\nThus, since \u03b8\u0306 is a probability measure,\n\u230a(N \u22122)/2\u230b\n\n\u230a(N \u22121)/2\u230b\n\nX\n\n\u03b8\u0306r (C2n ) and\n\nX\n\n\u03b8\u0306r (C2n+1 )\n\nn=0\n\nn=0\n\nare both bounded above by one. Conclude from (5.32) that\n\u03b5\nI \u2264 2\u03bb\u2217 h + ,\n4\nwhich implies, by choice of h, that I \u2264 \u03b5/2.\n\n\u0003\n\n5.5. Oscillation bound. This section establishes the second main ingredient for\nproving tightness of the state descriptors. As a metric on M1 , we use the Prohorov\nmetric (adapted to finite measures). For \u03bc, \u03bd \u2208 M1 , define\n\u001a\n\u001b\n\u03b5\n\u03b5\nd [\u03bc, \u03bd] = inf \u03b5>0 : \u03bc(A)\u2264\u03bd(A ) + \u03b5 and \u03bd(A)\u2264\u03bc(A ) + \u03b5 for all closed A \u2208 B .\n2\n\nRecall that A\u03b5 = {w \u2208 R+ : inf z\u2208A kz \u2212 wk < \u03b5} and that B denotes the Borel\n2\n\nsubsets of R+ .\nDefinition 5.5. For each \u03b6(*) \u2208 D([0, \u221e), M1 ) and each T > \u03b4 > 0, define the\nmodulus of continuity on [0, T ] by\nwT (\u03b6(*), \u03b4) =\n\nsup\n\nsup d [\u03b6(t + h), \u03b6(t)] .\n\nt\u2208[0,T \u2212\u03b4] h\u2208[0,\u03b4]\n\nLemma 5.6. For all T > 0 and \u03b5, \u03b7 \u2208 (0, 1), there exists \u03b4 \u2208 (0, T ) such that\n\u0010 r\n\u0010\n\u0011\n\u0011\n(5.33)\nlim inf Pr wT Z (*), \u03b4 \u2264 \u03b5 \u2265 1 \u2212 \u03b7.\nr\u2192\u221e\n\n\f28\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nProof. As before, let \u03bb\u2217 = supr\u2208R \u03bbr . For each \u03ba > 0, define\nL\u03ba = ([0, \u03ba] \u00d7 R+ ) \u222a (R+ \u00d7 [0, \u03ba]).\nBy Lemmas 5.1 and 5.4, there exists \u03ba \u2208 (0, 1) such that for all \u03b4 \u2208 (0, T ), the\nevents\n)\n(\n\u03b5\nr\nr\n,\n\u03a91 =\nsup Z (t)(L\u03ba ) \u2264\n4\nt\u2208[0,T ]\n(\n)\n\u03a9r2 =\n\n2\n\nr\n\nsup\n\nt\u2208[0,T \u2212\u03b4]\n\nL (t, t + \u03b4)(R+ ) \u2264 2\u03bb\u2217 \u03b4\n\n,\n\n\u03a9r0 = \u03a9r1 \u2229 \u03a9r2 ,\nsatisfy\nlim inf Pr (\u03a9r0 ) \u2265 1 \u2212 \u03b7.\n\n(5.34)\n\nr\u2192\u221e\n\nFix \u03b4 = \u03ba\u03b52 (8 max{\u03bb\u2217 , 1})\u22121 and let \u03a9r\u2217 be the event in (5.33). By (5.34), it suffices\nto show that \u03a9r0 \u2282 \u03a9r\u2217 for each r. Fix r \u2208 R and \u03c9 \u2208 \u03a9r0 ; for the remainder of the\nproof all random objects are evaluated at this \u03c9. Fix t \u2208 [0, T \u2212 \u03b4], h \u2208 [0, \u03b4] and\nlet A \u2208 B be closed. It suffices to show the two inequalities,\nr\n\nr\n\nZ (t)(A) \u2264 Z (t + h)(A\u03b5 ) + \u03b5,\n\n(5.35)\nr\n\nr\n\nZ (t + h)(A) \u2264 Z (t)(A\u03b5 ) + \u03b5.\n\n(5.36)\n\nTo show (5.35), use the definition of \u03a9r1 to write\nr\n\nr\n\nr\n\nZ (t)(A) \u2264 Z (t)(L\u03ba ) + Z (t) (A \u2229 Lc\u03ba )\n(5.37)\n\u03b5\nr\n\u2264 + Z (t) (A \u2229 Lc\u03ba ) .\n4\nr\nr\nLet I = {s \u2208 [t, t + h] : h1, Z (s)i < \u03b5/4}. Suppose I = \u2205. Then h1, Z (s)i \u2265 \u03b5/4\nfor all s \u2208 [t, t + h], which implies that\nZ t+\u03b4\n4\u03b4\nr\nr\n(5.38)\n(S (t, t + h), h) \u2264\nh1, Z (s)i\u22121 ds + \u03b4 \u2264\n+ \u03b4 < min{\u03b5, \u03ba}.\n\u03b5\nt\nr\n\nConsequently, (x, y) \u2208 A \u2229 Lc\u03ba implies (x, y) \u2212 (S (t, t + h), h) \u2208 A\u03b5 , and so\nr\n\nA \u2229 Lc\u03ba \u2282 A\u03b5 + (S (t, t + h), h).\n\n(5.39)\nDeduce from (5.37) that\nr\n\nZ (t)(A) \u2264\nApply (5.12) to get\n\n\u0010\n\u0011\n\u03b5\nr\nr\n+ Z (t) A\u03b5 + (S (t, t + h), h) .\n4\n\n\u03b5\nr\n+ Z (t + h) (A\u03b5 ) .\n4\nr\nSuppose I 6= \u2205 and let \u03c4 = inf I. Then h1, Z (\u03c4 )i \u2264 \u03b5/4 by right continuity. Since\nr\nh1, Z (s)i \u2265 \u03b5/4 for all s \u2208 [t, \u03c4 ),\nZ \u03c4\n4\u03b4\nr\nr\n(5.41)\n(S (t, \u03c4 ), \u03c4 \u2212 t) \u2264\nh1, Z (s)i\u22121 ds + \u03b4 \u2264\n+ \u03b4 < \u03ba.\n\u03b5\nt\nBy (5.37) and (5.41),\n\u0010 2\n\u0011\n\u03b5\n\u03b5\nr\nr\nr\nr\nZ (t)(A) \u2264 + Z (t)(Lc\u03ba ) \u2264 + Z (t) R+ + (S (t, \u03c4 ), \u03c4 \u2212 t) .\n4\n4\n(5.40)\n\nr\n\nZ (t)(A) \u2264\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n29\n\nApply (5.12) to get\n\n\u0010 2\u0011 \u03b5\n\u03b5\nr\n+ Z (\u03c4 ) R+ \u2264 .\n4\n2\nSo (5.35) follows because either (5.40) or (5.42) holds.\nTo show (5.36), use (5.11) and the definitions of \u03a9r2 and \u03b4 to obtain\n\u0010\n\u0011\nr\nr\nr\nr\n2\nZ (t + h)(A) \u2264 Z (t) A + (S (t, t + h), h) + L (t, t + h)(R+ )\n\u0010\n\u0011 \u03b5\n(5.43)\nr\nr\n\u2264 Z (t) A + (S (t, t + h), h) + .\n4\nr\nIf I = \u2205, then (5.38) implies that A + (S (t, t + h), h) \u2282 A\u03b5 . So (5.43) yields\n\u03b5\nr\nr\nZ (t + h)(A) \u2264 Z (t) (A\u03b5 ) + .\n4\nIf I 6= \u2205, then by (5.11), the definition of \u03a9r2 and the choice of \u03b4,\n\u03b5\n\u03b5\n2\n2\nr\nr\nr\nZ (t + h)(A) \u2264 Z (\u03c4 )(R+ ) + L (\u03c4, t + h)(R+ ) \u2264 + 2\u03bb\u2217 \u03b4 \u2264 .\n4\n2\nIn both cases, (5.36) holds. Conclude from (5.35) and (5.36) that\ni\nh r\nr\nd Z (t), Z (t + h) \u2264 \u03b5.\nr\n\nZ (t)(A) \u2264\n\n(5.42)\n\nSince t \u2208 [0, T \u2212 \u03b4] and h \u2208 [0, \u03b4] were arbitrary,\n\u0011\n\u0010 r\nwT Z (*), \u03b4 \u2264 \u03b5,\nwhich implies that \u03c9 \u2208 \u03a9r\u2217 .\n\n\u0003\n\n6. Limiting Fluid Equations\nThis section contains the proof of Theorem 2.2. Tightness of the sequence\nr\nr\n{Z (*)} follows immediately from Lemmas 5.2 and 5.6. Since {Z (*)} is tight,\nthere exists a subsequence {q} \u2282 R and a process Z(*) in D ([0, \u221e), M) such that\nq\nZ (*) \u21d2 Z(*) as q \u2192 \u221e. We must show that Z(*) is almost surely a measure valued\nfluid model solution for the data (\u03bb, \u03b8, \u03b60 ). This is accomplished by Lemmas 6.1\nand 6.2, and Theorem 6.3 below. Finally, if (2.10) holds, then a measure valued\nfluid model solution for (\u03bb, \u03b8, \u03b60 ) is unique by Theorem 2.3. In this case, the law of\nr\nthe limit point Z(*) is unique and so Z (*) \u21d2 Z(*) as r \u2192 \u221e.\nZ(*) = h1, Z(*)i be the total mass process for Z(*), and let S(u, v) =\nR v Let\n1\nds for all v \u2265 u \u2265 0. To show that Z(*) is almost surely a measure valued\nu Z(s)\nfluid model solution, note first that Z(*) is almost surely continuous by Lemma\n5.6. Note also that, by (2.6), Z(0) = \u03b60 almost surely. It remains to show that\nproperties (i) and (ii) of Definition 2.1 are satisfied almost surely by Z(*). The next\nresult establishes (i).\nLemma 6.1. Almost surely, for all a > 0,\n(6.1)\n\ninf Z(t) > 0.\n\nt>a\n\nProof. Take t > 0. Pick a constant a < t small enough such that the marginal\ndistribution of D is continuous at a, take m < \u0002\u221e such that the\u0003 marginal distribution\nof B is continuous at m, and such that \u03bbE B1{D>a,B<m} > 1. By dominated\nconvergence,\n\u0002\n\u0003\n\u0002\n\u0003\nlim \u03bbr E B1r 1{D1r r\u22121 >a;B1r \u2264m} = \u03bbE B1{D>a;B\u2264m} .\nr\u2192\u221e\n\n\f30\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nCompare the original system with an ordinary PS queues having arrival rate \u03bbra,m =\nr\n\u03bbr P (Dr > ra; B r < m) and service times Bi,a,m\n, which are distributed as Bir |\nr\nr\nDi > ra; Bi \u2264 m. Suppose that this PS queue is empty at time r(t \u2212 a), and let\n\u0179 r (t) be the queue length in this PS queue at time ra.\nObserve that the number of arrivals in the modified PS queue between time\nr(t \u2212 a) and time rt is less than or equal to the number of arrivals in that interval\nin the original PS queue with impatience. Furthermore, if one of the jobs that\narrived in the original PS queue after time r(t \u2212 a) departs before time rt, then this\nmust also be the case in the modified PS queue, since that PS queue had a service\nrate which was at least as large as in the original PS queue. These considerations\nimply that Z r (rt) \u2265 \u0179 r (rt). Since the modified queue is still overloaded, and no\ncustomer departed because of impatience, and the modified arrival process is still\na renewal process, the evolution of the modified system between time r(t \u2212 a) and\nrt has the same law as that of an overloaded GI/GI/1 PS queue starting at 0, in\nthe time interval [0, ra].\nSince the service times in our modified system are bounded, the means converge.\nThe assumptions in [28] are therefore valid, and it follows that there exists a constant ka > 0 such that limr\u2192\u221e \u0179 r (rt)/r = ka almost surely. Consequently, we have\nr\n\u0003\nlim inf r\u2192\u221e Z (t) \u2265 ma almost surely, which implies the assertion.\nBefore establishing property (ii) of Definition 2.1, the following result is needed.\nLemma 6.2. Almost surely, for all C \u2208 C and t \u2265 0,\nZ(t)(\u2202C ) = 0.\n\n(6.2)\n\nProof. Let T > 0. It suffices toPshow the statement for all t \u2208 [0, T ]. Let {\u03b7n } \u2282\n\u221e\n(0, 1) be a sequence such that n=1 \u03b7n < \u221e. By Lemma 5.4, there exists a null\nsequence of positive reals {\u03ban } such that, for each fixed n,\n!\n1\nq\n\u03ban\nq\n\u2265 1 \u2212 \u03b7n .\nsup sup Z (t)(\u2202C ) \u2264\n(6.3)\nlim inf P\nq\u2192\u221e\nn\nt\u2208[0,T ] C\u2208C\n\u03ban\nFor each n \u2208 N, let Mn = {\u03be \u2208 M : supC\u2208C \u03be(\u2202C\n) \u2264 1/n}. If a sequence\n\u03ban\n{\u03bei } \u2282 Mn converges weakly to \u03be, then for each open set \u2202C\n, the Portmanteau\ntheorem yields\n1\n\u03ban\n\u03ban\n\u03be(\u2202C\n) \u2264 lim sup \u03bei (\u2202A\n)\u2264 .\nn\ni\u2192\u221e\nThus, \u03be \u2208 Mn and Mn is closed. By definition of the Skorohod J1 -topology, the\nset DTn = {\u03b6(*) \u2208 D ([0, \u221e), M) : \u03b6(t) \u2208 Mn for all t \u2208 [0, T ]} is also closed. Apply\nthe Portmanteau theorem and (6.3) to obtain\n\u0011\n\u0010 q\n\u0001\nP Z(*) \u2208 DTn \u2265 lim inf Pq Z (*) \u2208 DTn \u2265 1 \u2212 \u03b7n .\nq\u2192\u221e\n\nBy the Borel-Cantelli lemma,\nP\n\n\u221e \\\n\u221e\n[\n\b\n\nk=1 n=k\n\nZ(*) \u2208\n\nDTn\n\n!\n\n= 1.\n\nThus, there exists a finite random variable N such that, almost surely,\n1\n\u03ban\n(6.4)\nsup sup Z(t)(\u2202C\n) \u2264 , for all n > N .\nn\nt\u2208[0,T ] C\u2208C\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n31\n\n\u03ban\nSince \u2202C \u2282 \u2202C\nfor all C \u2208 C and n \u2208 N, conclude that almost surely,\n\nsup sup Z(t)(\u2202C ) = 0.\n\nt\u2208[0,T ] C\u2208C\n\n\u0003\nWe nowR establish property (ii). Recall that Z(t) = h1, Z(t)i for all t \u2265 0, and\nv\nS(u, v) = u 1/Z(s) ds for all v \u2265 u \u2265 0.\n\nTheorem 6.3. Almost surely, the process Z(*) satisfies\nZ t\n(6.5)\nZ(t) (A) = Z(0) (A + (S(0, t), t)) + \u03bb\n\u03b8 (A + (S(s, t), t \u2212 s)) ds,\n0\n\nfor all t \u2265 0 and A \u2208 B.\n\nProof. Let T > 0. It suffices to show that almost surely, (6.5) holds for all t \u2208 [0, T ]\nand all A \u2208 B. For each r \u2208 R, define the random variable\nXTr = sup\n\n(6.6)\n\nsup\n\nr\n\nL (s, t)(C) \u2212 \u03bbr (t \u2212 s)\u03b8\u0306r (C) .\n\nC\u2208C 0\u2264s\u2264t\u2264T\n\nXTq\n\nPq\n\nBy Lemma 5.1,\n\u2212\u2192 0 as q \u2192 \u221e. Since the limit is deterministic, this converq\ngence is joint with the convergence Z (*) \u21d2 Z(*). Using the Skorohod represenq\ntation theorem, assume without loss of generality that {Z (*), XTq } and Z(*) are\ndefined on a common probability space such that\nq\n\n(Z (*), XTq ) \u2192 (Z(*), 0),\n\n(6.7)\n\nalmost surely.\n\nThe conclusions of Lemmas 6.1 and 6.2 hold almost surely as well. Assume for\nthe remainder of the proof that all random objects are evaluated on the event of\nprobability one such that Z(*) is continuous, and such that (6.1), (6.2) and (6.7)\nhold.\nFix t \u2208 [0, T ] and C \u2208 C. An extension to all Borel sets A \u2208 B will be made at\nthe end. For each q, (5.10) yields\nq\n\n\u0010 q\n\u0011 1 qE\n\u0011\nX(t)\nq\n1+\nZ (t)(C) = Z (0) C + (S (0, t), t) +\nC B i (t), D i (t) .\nq i=1\nq\n\n(6.8)\n\n\u0010\n\nq\n\nq\n\nWe will obtain (6.5) from (6.8) by letting q \u2192 \u221e. The convergence in the first\ncomponent of (6.7) is in the Skorohod J1 -topology on D([0, \u221e), M1 ). However,\nsince Z(*) is continuous,\nq\n\nw\n\nZ (s) \u2212\u2192 Z(s),\n\n(6.9)\nq\n\nfor all s \u2208 [0, t].\n\nq\n\nSince Z (*) = h1, Z (*)i and Z(*) = h1, Z(*)i, this implies that\n(6.10)\n\nlim\n\nq\u2192\u221e\n\nq\n\nZ (*) \u2212 Z(*)\n\nt\n\n= 0.\n\nFor all t \u2265 v \u2265 u > 0, (6.1) implies that inf s\u2208[u,v] Z(s) > 0, and so the bounded\nconvergence theorem yields\nZ v\n1\nq\nlim S (u, v) = lim\nds\nq\nq\u2192\u221e\nq\u2192\u221e u Z (s)\nZ v\n1\n(6.11)\nds\n=\nZ(s)\nu\n= S(u, v).\n\n\f32\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nIf Z(0) 6= 0, then (6.11) holds for u = 0 as well, because then inf s\u2208[0,v] Z(s) > 0. If\nq\nZ(0) = 0, then S(0, v) = \u221e and S (0, v) \u2192 \u221e as q \u2192 \u221e.\nSuppose that Z(0) 6= 0 and let \u03b5 > 0. By (6.11), there exists a q\u03b5 \u2208 R such that\nq\nS (0, t) \u2208 ((S(0, t) \u2212 \u03b5)+ , S(0, t) + \u03b5) for q > q\u03b5 . Deduce from the shape of the set\nC, (6.9), and (6.2) that\n\u0010\n\u0011\n\u0001\nq\nq\nlim sup Z (0) C + (S (0, t), t) \u2264 Z(0) C + ((S(0, t) \u2212 \u03b5)+ , t) ,\nq\u2192\u221e\n\u0010\n\u0011\n\u0001\nq\nq\nlim inf Z (0) C + (S (0, t), t) \u2265 Z(0) C + (S(0, t) + \u03b5, t)) .\nq\u2192\u221e\n\nBy (6.2), letting \u03b5 \u2192 0 yields\n\u0010\n\u0011\n\u0001\nq\nq\n(6.12)\nlim Z (0) C + (S (0, t), t) = Z(0) C + (S(0, t), t) .\nq\u2192\u221e\n\nIf Z(0) = 0, then (6.12) holds trivially because the left side is bounded above by\nq\nq\nlimq\u2192\u221e h1, Z (0)i = 0 by (6.10). Combining with (6.9) and (6.2) for Z (t), implies\nthat, as q \u2192 \u221e,\n\u0010\n\u0011\nq\nq\nq\nZ (t)(C) \u2212 Z (0) C + (S (0, t), t) \u2192 Z(t)(C) \u2212 Z(0) (C + (S(0, t), t)) .\nLet I q denote the second right hand term in (6.8). Let \u03b4 > 0 and let \u03b7 \u2208 (0, t).\nq\nSince S (s, t) is decreasing in s and S(*, t) is continuous on [\u03b7, t], (6.11) implies that\nq\nS (*, t) \u2192 S(*, t) uniformly on [\u03b7, t]. That is, there exists q\u03b4 \u2208 R such that\nq\n\nsup S (s, t) \u2212 S(s, t) \u2264 \u03b4,\n\n(6.13)\n\nfor all q > q\u03b4 .\n\ns\u2208[\u03b7,t]\n\nLet D\u03b8 (C) = {C \u2208 C : \u03b8(\u2202C ) 6= 0}. Note that D\u03b8 (C) is countable because \u03b8(* \u00d7 R+ )\nand \u03b8(R+ \u00d7 *) are probability measures. Since Z(u) > 0 for all u \u2208 [\u03b7, t], the\nfunction S(s, t) is strictly decreasing in s on [\u03b7, t]. Thus,\nD\u03b8 (S) = {s \u2208 [\u03b7, t] : C + (S(s, t) \u00b1 2\u03b4, t \u2212 s) \u2208 D\u03b8 (C)}\nN\nN\nis also countable. For each integer N > 1, let \u03b7 = tN\n0 < t1 < * * * < tN = t be\nN\na partition of [\u03b7, t] such that tj \u2208\n/ D\u03b8 (S) for all j = 1, . . . , N \u2212 1, and such that\nN\nmaxj\u2264N \u22121 (tN\n\u2212\nt\n)\n\u2192\n0\nas\nN\n\u2192\n\u221e. Then\nj+1\nj\nq\n\nqE (\u03b7)\n\u22121\n\u0011 NX\n1\n1 X +\u0010 q\nq\nq\n1 B i (t), Di (t) +\nI =\nq i=1 C\nq\nj=0\n\nq\n\nqE (tN\nj+1 )\n\nX\nq\n\ni=qE (tN\nj )+1\n\n\u0010 q\n\u0011\nq\n1+\nC B i (t), D i (t) .\nq\n\n2\n\nNote that the first right hand term is bounded above by L (0, \u03b7)(R+ ). Suppose\nq \u22121\nthat tN\n\u2264 tN\nj \u2264 Ui q\nj+1 , for some q > q\u03b4 , some j \u2264 N \u2212 1, and some i \u2208\nq\nq\n{qE (\u03b7) + 1, . . . , qE (t)}. Then by (6.13),\n(6.14)\n\nq\n\nq \u22121\n, t) \u2264 S(tN\nS(tN\nj , t) + \u03b4.\nj+1 , t) \u2212 \u03b4 \u2264 S (Ui q\n\nBy definition,\n\u0010 q\n\u0011 \u0010\n\u0011\nq\nq\nB i (t), Di (t) = Biq \u2212 S (Uiq q \u22121 , t), Diq q \u22121 \u2212 (t \u2212 Uiq q \u22121 ) .\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n33\n\nSo for q > q\u03b4 , (6.14) and the inequalities 1C (* \u2212 \u03b4, *) \u2264 1+\nC (*, *) \u2264 1C (* + \u03b4, *) yield\n\u0011\n\u0010 q\n\u0001\nq\nq\nq \u22121\nN\n\u2212 (t \u2212 tN\n1+\nj ) ;\nC B i (t), D i (t) \u2265 1C Bi \u2212 (S(tj , t) + 2\u03b4), Di q\n\u0010 q\n\u0011\n\u0001\nq\nq \u22121\n1+\n\u2212 (t \u2212 tN\nB\n(t),\nD\n(t)\n\u2264 1C Biq \u2212 (S(tN\nj+1 , t) \u2212 2\u03b4), Di q\nj+1 ) .\ni\ni\nC\nThis yields, for q > q\u03b4 ,\nIq \u2265\n\nN\n\u22121\nX\nj=0\n\nq\n\nqE (tN\nj+1 )\n\nX\n\n1\nq\n\n\u0001\nq \u22121\n1C Biq \u2212 (S(tN\n\u2212 (t \u2212 tN\nj , t) + 2\u03b4), Di q\nj ) ;\n\nq\n\ni=qE (tN\nj )+1\n\nq\n\n2\n\nI q \u2264 L (0, \u03b7)(R+ )\n+\n\nN\n\u22121\nX\nj=0\n\nq\n\nqE (tN\nj+1 )\n\nX\n\n1\nq\n\nq\n\ni=qE (tN\nj )+1\n\n\u0001\nq \u22121\n1C Biq \u2212 (S(tN\n\u2212 (t \u2212 tN\nj+1 , t) \u2212 2\u03b4), Di q\nj+1 ) .\n\nRewrite as\nq\n\nI \u2265\n\nN\n\u22121\nX\n\nq\n\nN\nN\nN\nL (tN\nj , tj+1 ) C + S(tj , t) + 2\u03b4, t \u2212 tj\n\nj=0\n\n(6.15)\n\nq\n\n2\n\nI q \u2264 L (0, \u03b7)(R+ ) +\n\nN\n\u22121\nX\n\n\u0001\u0001\n\n;\n\nq\n\nN\nN\nN\nL (tN\nj , tj+1 ) C + S(tj+1 , t) \u2212 2\u03b4, t \u2212 tj+1\n\nj=0\n\nBy (6.6) and (6.15), q > q\u03b4 implies that\nIq \u2265\n\nN\n\u22121 \u0010\nX\n\nN\nN\nq\nC + S(tN\n\u03bbq (tN\nj , t) + 2\u03b4, t \u2212 tj\nj+1 \u2212 tj )\u03b8\u0306\n\nj=0\n\nI q \u2264 \u03bbq \u03b7 + XTq +\n\nN\n\u22121 \u0010\nX\n\n\u0001\u0001\n\n\u0011\n\u2212 XTq ;\n\nN\nN\nq\nC + S(tN\n\u03bbq (tN\nj+1 , t) \u2212 2\u03b4, t \u2212 tj+1\nj+1 \u2212 tj )\u03b8\u0306\n\nj=0\n\nBy (6.7), and since tN\nj 6\u2208 D\u03b8 (S) for all j = 1, . . . , N \u2212 1,\nlim inf I q \u2265 \u03bb\nq\u2192\u221e\n\nN\n\u22121\nX\n\nN\nN\nN\n(tN\nj+1 \u2212 tj )\u03b8 C + S(tj , t) + 2\u03b4, t \u2212 tj\n\nj=0\n\n(6.16)\nq\n\nlim sup I \u2264 \u03bb\u03b7 + \u03bb\nq\u2192\u221e\n\nN\n\u22121\nX\n\n\u0001\u0001\n\n\u0001\u0001\n\n.\n\n\u0011\n+ XTq .\n\n;\n\nN\nN\nN\n(tN\nj+1 \u2212 tj )\u03b8 C + S(tj+1 , t) \u2212 2\u03b4, t \u2212 tj+1\n\nj=0\n\n\u0001\u0001\n\n\u0001\u0001\n\n.\n\nFor s \u2208 [\u03b7, t] such that s \u2208\n/ D\u03b8 (S) the bounded convergence theorem implies that\nlim\n\nN \u2192+\u221e\n\n(6.17)\nlim\n\nN \u2192+\u221e\n\nN\n\u22121\nX\n\nN\nN\n1[tN\n(s)\u03b8 C + S(tN\nj , t) + 2\u03b4, t \u2212 tj\nj ,tj+1 )\n\nN\n\u22121\nX\n\nN\nN\n1[tN\n(s)\u03b8 C + S(tN\nj+1 , t) \u2212 2\u03b4, t \u2212 tj+1\nj ,tj+1 )\n\nj=0\n\n= \u03b8 (C + (S(s, t) + 2\u03b4, t \u2212 s)) ;\n\nj=0\n\n= \u03b8 (C + (S(s, t) \u2212 2\u03b4, t \u2212 s)) .\n\n\u0001\u0001\n\u0001\u0001\n\n\f34\n\nH.C. GROMOLL, PH. ROBERT, AND B. ZWART\n\nThus, the convergence in (6.17) holds for almost every s \u2208 [\u03b7, t). Let N \u2192 \u221e in\n(6.16) and conclude from (6.17) and the bounded convergence theorem that\nZ t\nlim inf I q \u2265 \u03bb\n\u03b8 (C + (S(s, t) + 2\u03b4, t \u2212 s)) ds;\nq\u2192\u221e\n\n(6.18)\n\n\u03b7\n\nq\n\nlim sup I \u2264 \u03bb\u03b7 + \u03bb\nq\u2192\u221e\n\nZ\n\nt\n\n\u03b8 (C + (S(s, t) \u2212 2\u03b4, t \u2212 s)) ds.\n\n\u03b7\n\nLet \u03b4 \u2192 0 in (6.18). Since D\u03b8 (C) is countable, both integrands in (6.18) converge\nalmost everywhere on [\u03b7, t] to \u03b8 (C + (S(s, t), t \u2212 s)). Thus,\nZ t\nq\nlim inf I \u2265 \u03bb\n\u03b8 (C + (S(s, t), t \u2212 s)) ds;\nq\u2192\u221e\n\n\u03b7\n\nlim sup I q \u2264 \u03bb\u03b7 + \u03bb\nq\u2192\u221e\n\nZ\n\nt\n\n\u03b8 (C + (S(s, t), t \u2212 s)) ds.\n\n\u03b7\n\nLet \u03b7 \u2192 0 to conclude that\nlim I q = \u03bb\n\nq\u2192\u221e\n\nZ\n\nt\n\n\u03b8 (C + (S(s, t), t \u2212 s)) ds.\n0\n\nThis proves (6.5) for all t \u2208 [0, T ] and C \u2208 C. To extend to all A \u2208 B, let C \u2032 be\n2\nthe set of A \u2208 B for which (6.5) holds. Observe that C \u2032 is a \u03bb-system: R+ \u2208 C \u2032\n2\n\nbecause R+ \u2208 C; if {An } \u2282 C \u2032 satisfies An \u2191 A, then A \u2208 C \u2032 ; if A1 \u2282 A2 are\nelements of C \u2032 , then A2 \\ A1 \u2208 C \u2032 . Observe also that C is a \u03c0-system: if C1 , C2 \u2208 C,\nthen C1 \u2229 C2 \u2208 C. Since C \u2282 C \u2032 and the \u03c3-algebra generated by C is equal to B, it\nfollows that C \u2032 = B by the Dynkin \u03c0\u03bb-theorem (see for example [2]).\n\u0003\nReferences\n[1] D. Barrer, Queueing with impatient customers and ordered service, Operations Research 5\n(1957), 650\u2013656.\n[2] Patrick Billingsley, Probability and measure, 2 ed., John Wiley & Sons, Inc. New York, 1986.\n[3] Thomas Bonald and Laurent Massouli\u00e9, Impact of fairness on Internet performance, Proceedings of ACM Sigmetrics 2001, 2001, pp. 82\u201391.\n[4] Thomas Bonald and James Roberts, Congestion at flow level and the impact of user behaviour, Computer Networks 42 (2003), 521\u2013536.\n[5] N. Boots and Tijms H., A multi-server queueuing system with impatient customers, Management Science 45 (1999), 444\u2013448.\n[6] M. Bramson, Stability of networks for max-min fair routing, Presentation at the 13th INFORMS Applied Probability Conference, Ottawa, 2005.\n[7] E. Coffman, A. Puhalskii, M. Reiman, and P. Wright, Processor shared buffers with reneging,\nPerformance Evaluation 19 (1994), 25\u201346.\n[8] Gustavo de Veciana, Takis Konstantopoulos, and Tae-Jin Lee, Stability and performance\nanalysis of networks supporting elastic services, IEEE/ACM Trans. Netw. 9 (2001), no. 1,\n2\u201314.\n[9] Bogdan Doytchinov, John Lehoczky, and Steven Shreve, Real-time queues in heavy traffic\nwith earliest-deadline-first queue discipline, Annals of Applied Probability 11 (2001), no. 2,\n332\u2013378.\n[10] N. Gans, G. Koole, and A. Mandelbaum, Telephone call centers: Tutorial, review, and\nresearch prospects, Manufacturing & Service Operations Management 5 (2002), 79\u2013141.\n[11] Christian Gromoll, Philippe Robert, Bert Zwart, and Richard Bakker, The impact of reneging\nin processor sharing queues, ACM-Sigmetrics (Saint Malo), ACM/IFIP WG 7.3, June 2006.\n[12] H. C. Gromoll and L. Kruk, Heavy traffic analysis of a real-time processor sharing queue, to\nappear, 2006.\n\n\fPROCESSOR SHARING QUEUES WITH IMPATIENCE\n\n35\n\n[13] H. C. Gromoll and R. J. Williams, Fluid approximation for an Internet congestion control\nmodel with fair bandwidth sharing and general document size distributions, Preprint, 2006.\n[14] Fabrice Guillemin, Philippe Robert, and Bert Zwart, Tail asymptotics for processor-sharing\nqueues, Advances in Applied Probability 36 (2004), 525\u2013543.\n[15] J. Hale and S. Verduyn Lunel, An introduction to functional differential equations, Springer\nVerlag, New York, 1993.\n[16] Alain Jean-Marie and Philippe Robert, On the transient behavior of some single server\nqueues, Queueing Systems, Theory and Applications 17 (1994), 129\u2013136.\n[17] Olav Kallenberg, Random Measures, Academic Press, New York, 1986.\n[18] F. P. Kelly and R. J. Williams, Fluid model for a network operating under a fair bandwidth\nsharing policy, Annals of Applied Probability 14 (2004), 1055\u20131083.\n[19] P. Key, L. Massouli\u00e9, A. Bain, and F. Kelly, Fair internet traffic integration: Network flow\nmodels and analysis, Annals of Telecommunications 59 (2004), 1338\u20131352.\n[20] L. Kruk, J. Lehoczky, and S. Shreve, Second order approximation for the customer time\nin queue distribution under the FIFO service discipline, Annales UMCS Informatica AI 1\n(2003), 37\u201348.\n, Accuracy of state space collapse for earliest-deadline-first queues, Preprint, 2004.\n[21]\n[22] L. Kruk, J. Lehoczky, S. Shreve, and S. Yeung, Multiple-input heavy-traffic real-time queues,\nAnnals of Applied Probability 13 (2003), no. 1, 54\u201399.\n, Earliest-deadline-first service in heavy-traffic acyclic networks, Annals of Applied\n[23]\nProbability 14 (2004), no. 3, 1306\u20131352.\n[24] A. Lakshmikantha, C. L. Beck, and R. Srikant, Connection level stability analysis of the\ninternet using the sum of squares (SoS) techniques, Conference on Information Sciences and\nSystems, Princeton, 2004.\n[25] Laurent Massouli\u00e9, Structural properties of proportional fairness: stability and insensitivity,\nPreprint, 2005.\n[26] Laurent Massouli\u00e9 and James Roberts, Bandwidth sharing: Objectives and algorithms, INFOCOM '99. Eighteenth Annual Joint Conference of the IEEE Computer and Communications\nSocieties, 1999, pp. 1395\u20131403.\n[27] J. Mo and J. Walrand, Fair end-to-end window-based congestion control, IEEE/ACM Transactions on Networking 8 (2000), no. 5, 556\u2013567.\n[28] A. L. Puha, A. L. Stolyar, and R. J. Williams, The fluid limit of an overloaded processor\nsharing queue, Preprint, 2004.\n[29] James Roberts and Laurent Massouli\u00e9, Bandwidth sharing and admission control for elastic\ntraffic, Telecommunication Systems 15 (2000), 185\u2013201.\n[30] Robert E. Stanford, Reneging phenomena in single channel queues, Mathematics of Operations Research 4 (1979), 162\u2013178.\n[31]\n, On queues with impatience, Advances in Applied Probability 22 (1990), no. 3, 768\u2013\n769.\n[32] Aad van der Vaart and Jon A. Wellner, Weak convergence and empirical processes, SpringerVerlag, New York, 1996.\n[33] A. Ward and P. Glynn, A diffusion approximation for a markovian queue with reneging,\nQueueing Systems 43 (2003), 103\u2013128.\n[34] Shu-Ngai Yeung and John P. Lehoczky, Real-time queueing networks in heavy traffic with\nEDF and FIFO queue discipline, Preprint, 2004.\n(Christian Gromoll) Department of Mathematics, Stanford University 450 Serra Mall,\nStanford, CA 94305-2125, USA\nE-mail address: gromoll@math.stanford.edu\n(Ph. Robert) INRIA-Rocquencourt, RAP project, Domaine de Voluceau, BP 105, 78153\nLe Chesnay, France\nE-mail address: Philippe.Robert@inria.fr\nURL: http://www-rocq.inria.fr/ \u0303robert\n(Bert Zwart) Eindhoven University of Technology, Department of Mathematics and\nComputer Science, HG 9.35, P.O. Box 513, 5600 MB Eindhoven, the Netherlands\nE-mail address: zwart@win.tue.nl\n\n\f"}