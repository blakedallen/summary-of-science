{"id": "http://arxiv.org/abs/1011.3183v4", "guidislink": true, "updated": "2011-07-26T20:59:01Z", "updated_parsed": [2011, 7, 26, 20, 59, 1, 1, 207, 0], "published": "2010-11-14T04:09:08Z", "published_parsed": [2010, 11, 14, 4, 9, 8, 6, 318, 0], "title": "Level Sets of the Takagi Function: Generic Level Sets", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1011.0664%2C1011.1790%2C1011.0410%2C1011.5462%2C1011.2211%2C1011.4932%2C1011.1810%2C1011.0806%2C1011.5797%2C1011.1419%2C1011.0549%2C1011.3244%2C1011.0610%2C1011.0338%2C1011.3132%2C1011.3183%2C1011.3748%2C1011.0234%2C1011.6224%2C1011.5321%2C1011.3885%2C1011.0054%2C1011.3447%2C1011.6534%2C1011.3578%2C1011.4937%2C1011.3291%2C1011.4112%2C1011.0183%2C1011.3657%2C1011.1763%2C1011.5257%2C1011.3048%2C1011.4187%2C1011.0676%2C1011.6173%2C1011.6508%2C1011.5489%2C1011.5674%2C1011.1902%2C1011.2556%2C1011.1823%2C1011.4261%2C1011.2081%2C1011.1185%2C1011.5795%2C1011.0555%2C1011.5369%2C1011.0590%2C1011.5707%2C1011.5455%2C1011.5689%2C1011.3654%2C1011.0466%2C1011.3803%2C1011.1065%2C1011.4642%2C1011.2191%2C1011.1917%2C1011.1471%2C1011.3151%2C1011.6553%2C1011.5931%2C1011.3214%2C1011.1181%2C1011.3767%2C1011.4869%2C1011.3527%2C1011.0744%2C1011.4072%2C1011.4179%2C1011.5697%2C1011.3932%2C1011.2063%2C1011.5059%2C1011.5630%2C1011.1103%2C1011.5546%2C1011.5460%2C1011.3185%2C1011.0764%2C1011.3844%2C1011.6667%2C1011.5305%2C1011.5980%2C1011.5229%2C1011.1198%2C1011.1309%2C1011.4146%2C1011.5570%2C1011.5154%2C1011.5105%2C1011.1445%2C1011.0703%2C1011.4961%2C1011.4003%2C1011.1002%2C1011.0402%2C1011.1786%2C1011.5205%2C1011.2028&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Level Sets of the Takagi Function: Generic Level Sets"}, "summary": "The Takagi function {\\tau} : [0, 1] \\rightarrow [0, 1] is a continuous\nnon-differentiable function constructed by Takagi in 1903. This paper studies\nthe level sets L(y) = {x : {\\tau}(x) = y} of the Takagi function {\\tau}(x). It\nshows that for a full Lebesgue measure set of ordinates y, these level sets are\nfinite sets, but whose expected number of points is infinite. Complementing\nthis, it shows that the set of ordinates y whose level set has positive\nHausdorff dimension is itself a set of full Hausdorff dimension 1 (but Lebesgue\nmeasure zero). Finally it shows that the level sets have a nontrivial Hausdorff\ndimension spectrum. The results are obtained using a notion of \"local level\nset\" introduced in a previous paper, along with a singular measure\nparameterizing such sets.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1011.0664%2C1011.1790%2C1011.0410%2C1011.5462%2C1011.2211%2C1011.4932%2C1011.1810%2C1011.0806%2C1011.5797%2C1011.1419%2C1011.0549%2C1011.3244%2C1011.0610%2C1011.0338%2C1011.3132%2C1011.3183%2C1011.3748%2C1011.0234%2C1011.6224%2C1011.5321%2C1011.3885%2C1011.0054%2C1011.3447%2C1011.6534%2C1011.3578%2C1011.4937%2C1011.3291%2C1011.4112%2C1011.0183%2C1011.3657%2C1011.1763%2C1011.5257%2C1011.3048%2C1011.4187%2C1011.0676%2C1011.6173%2C1011.6508%2C1011.5489%2C1011.5674%2C1011.1902%2C1011.2556%2C1011.1823%2C1011.4261%2C1011.2081%2C1011.1185%2C1011.5795%2C1011.0555%2C1011.5369%2C1011.0590%2C1011.5707%2C1011.5455%2C1011.5689%2C1011.3654%2C1011.0466%2C1011.3803%2C1011.1065%2C1011.4642%2C1011.2191%2C1011.1917%2C1011.1471%2C1011.3151%2C1011.6553%2C1011.5931%2C1011.3214%2C1011.1181%2C1011.3767%2C1011.4869%2C1011.3527%2C1011.0744%2C1011.4072%2C1011.4179%2C1011.5697%2C1011.3932%2C1011.2063%2C1011.5059%2C1011.5630%2C1011.1103%2C1011.5546%2C1011.5460%2C1011.3185%2C1011.0764%2C1011.3844%2C1011.6667%2C1011.5305%2C1011.5980%2C1011.5229%2C1011.1198%2C1011.1309%2C1011.4146%2C1011.5570%2C1011.5154%2C1011.5105%2C1011.1445%2C1011.0703%2C1011.4961%2C1011.4003%2C1011.1002%2C1011.0402%2C1011.1786%2C1011.5205%2C1011.2028&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "The Takagi function {\\tau} : [0, 1] \\rightarrow [0, 1] is a continuous\nnon-differentiable function constructed by Takagi in 1903. This paper studies\nthe level sets L(y) = {x : {\\tau}(x) = y} of the Takagi function {\\tau}(x). It\nshows that for a full Lebesgue measure set of ordinates y, these level sets are\nfinite sets, but whose expected number of points is infinite. Complementing\nthis, it shows that the set of ordinates y whose level set has positive\nHausdorff dimension is itself a set of full Hausdorff dimension 1 (but Lebesgue\nmeasure zero). Finally it shows that the level sets have a nontrivial Hausdorff\ndimension spectrum. The results are obtained using a notion of \"local level\nset\" introduced in a previous paper, along with a singular measure\nparameterizing such sets."}, "authors": ["Jeffrey C. Lagarias", "Zachary Maddock"], "author_detail": {"name": "Zachary Maddock"}, "author": "Zachary Maddock", "links": [{"title": "doi", "href": "http://dx.doi.org/10.1512/iumj.2011.60.4554", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/1011.3183v4", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1011.3183v4", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "Comments welcome. 23 pages, 2 figures. Latest version is an extensive\n  rewrite of earlier versions", "arxiv_primary_category": {"term": "math.CA", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.CA", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "26A45, 26A27, 26A30, 28A25", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1011.3183v4", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1011.3183v4", "journal_reference": "Indiana Univ. Math. J. 60 (2011), 1857--1884", "doi": "10.1512/iumj.2011.60.4554", "fulltext": "Level Sets of the Takagi Function: Generic Level Sets\n\narXiv:1011.3183v4 [math.CA] 26 Jul 2011\n\nJeffrey C. Lagarias 1\nDept. of Mathematics\nUniversity of Michigan\nAnn Arbor, MI 48109-1043\nZachary Maddock 2\nDept. of Mathematics\nColumbia University\nNew York, NY 10027\n\n(July 26, 2011)\n\nABSTRACT\nThe Takagi function \u03c4 : [0, 1] \u2192 [0, 1] is a continuous non-differentiable function constructed by\nTakagi in 1903. This paper studies the level sets L(y) = {x : \u03c4 (x) = y} of the Takagi function \u03c4 (x).\nIt shows that for a full Lebesgue measure set of ordinates y, these level sets are finite sets, but whose\nexpected number of points is infinite. Complementing this, it shows that the set of ordinates y whose\nlevel set has positive Hausdorff dimension is itself a set of full Hausdorff dimension 1 (but Lebesgue\nmeasure zero). Finally it shows that the level sets have a nontrivial Hausdorff dimension spectrum.\nThe results are obtained using a notion of \"local level set\" introduced in a previous paper, along with a\nsingular measure parameterizing such sets.\n\n1. Introduction\nThe Takagi function \u03c4 (x) is a function defined on the unit interval x \u2208 [0, 1] which was introduced by\nTakagi [23] in 1903 as an example of a continuous nondifferentiable function. It can be defined by\n\u03c4 (x) :=\n\n\u221e\nX\n\u001c 2n x \u001d\nn=0\n\n2n\n\n(1.1)\n\nwhere \u001c x \u001d is the distance from x to the nearest integer. It has appeared in a wide variety of contexts\nin probability theory, number theory and analysis, including Bernoulli convolutions [14, p. 195], the\ndistribution of binary digit sums ( ([22], [24], [8]), and as fractals and functions satisfying self-similar\nanalogues of the Laplace equation ([25]).\nThis paper considers certain properties of the graph of the Takagi function\nG(\u03c4 ) := {(x, \u03c4 (x)) : 0 \u2264 x \u2264 1},\n1\n2\n\nThis author's work was supported by NSF Grants DMS-0500555 and DMS-0801029.\nThis author's work was supported by the NSF through a Graduate Research Fellowship.\n\n\f0.8\n\n0.8\n\n0.6\n\n0.6\ny = 0.5\n\n0.4\n\n0.4\n\n0.2\n\n0.2\n\nx = 0.3\n0.2\n\n0.4\n\n0.6\n\n0.8\n\n1.0\n\n0.2\n\n0.4\n\n0.6\n\n0.8\n\n1.0\n\nFigure 1: Ordinate level set L(y) at y = 0.5 and abscissa level set L(\u03c4 (x)) at x = 0.3.\nwhich is pictured in Figure 1. It is well known that the values of the Takagi function satisfy 0 \u2264\n\u03c4 (x) \u2264 23 . It is also known that this graph has Hausdorff dimension 1 in R2 , see Mauldin and Williams\n[21, Theorem 7]). They add the remark that they do not know whether the 1-dimensional Hausdorff\nmeasure of this graph is finite or infinite ([21, p. 800]). Here we study the structure of the level sets of\nthis graph. We make the following definition, which contains a special convention concerning dyadic\nrationals which simplifies theorem statements.\nDefinition 1.1. For 0 \u2264 y \u2264\n\n2\n3\n\nthe (global) level set L(y) at level y is\nL(y) := {x : \u03c4 (x) = y, 0 \u2264 x \u2264 1}.\n\nWe make the convention that x specifies a particular binary expansion; so each dyadic rational value\nx = 2mn in a level set will appear twice, labeled by each of its two possible binary expansions.\nLevel sets have a complicated and interesting structure, depending on the value of y. It is known\nthat there are different levels y where the level set L(y) is finite, countably infinite, or uncountably\ninfinite, respectively. Concerning the size of level sets, measured by Hausdorff dimension, in 1984\nBaba [6] showed that the level set L( 32 ) has Hausdorff dimension 21 , so is uncountable. The second\nauthor showed ([20]) that the Hausdorff dimension of any level set is at most 0.699 and conjectured\nBaba's example achieves the largest possible dimension. Finally, relevant to our results here, in 2008\nBuczolich [7] proved that, in the sense of Lebesgue measure, almost all level sets L(y) are finite sets.\nThe object of this paper is to study properties of \"generic\" level sets of the Takagi function. The\nordinate (y-axis) notion of genericity (in the Lebesgue measure sense) is to draw an ordinate y at\nrandom using Lebesgue measure in [0, 32 ], and ask for properties of such level sets that hold for a full\nLebesgue measure of such sets L(y). The abscissa (x-axis) notion of genericity is to draw a number x at\nrandom in [0, 1] with respect to Lebesgue measure, and then to ask for properties of level sets L(\u03c4 (x))\nthat hold for a full Lebesgue measure set of x. These two sampling methods of drawing level sets are\npictured in Figure 1 above. We focus on ordinate notions of genericity, but also treat abscissa notions in\norder to obtain our results: we observe that these two notions of genericity give quite different answers\nconcerning the structure of level sets.\nA weaker notion of \"generic set\" is ask for properties of level sets that are generic in the Hausdorff\ndimension sense, which means to hold for a set of (full) Hausdorff dimension 1, in the appropriate\nvariable. We consider this notion in both the abscissa sense and the ordinate sense.\n2\n\n\f1.1. Generic level sets: Results\nOur results are obtained using methods from our paper [19], which introduced the notion of \"local\nlevel set\" of the Takagi function. We summarize relevant results in Sect. 2 and 3. Local level sets\nare sets Lloc\nx determined locally by combinatorial operations on the binary expansion of a real number\nx; they are closed sets and each level set is partitioned into a disjoint union of local level sets. The\nstructure of local level sets Lloc\nx is completely analyzable: they are either finite sets or Cantor sets.\nInformation of the Hausdorff dimension of such sets can be deduced from properties of the binary\nexpansion of x. In [19] we introduced a certain subset \u03a9L \u2282 [0, 1], called the deficient digit set, made\nup of the left endpoints of all local level sets; this set parameterizes all local level sets. We showed\nthat \u03a9L is a closed set of Lebesgue measure zero. We also introduced a new singular function \u03bcS , the\nTakagi singular function, whose points of increase are supported on \u03a9L . This function was used to\nshow that on almost all levels y there are finitely many local level sets; however there is also a dense\nset of levels in [0, 32 ] which have infinitely many local level sets. In Theorem 3.2 below we introduce\nsingular measure, the Takagi singular measure, associated to the Takagi singular function, which plays\nan important role in this paper.\nOur first result concerns the cardinality of \"generic\" ordinate level sets in the Lebesgue measure\nsense.\nTheorem 1.2. (Ordinate generic level sets) (1) For a full Lebesgue measure set of ordinate points\ny \u2208 [0, 23 ] the level set L(y) is a finite set.\n(2) For a random level set L(y) with level y drawn uniformly from y \u2208 [0, 32 ], the expected number\nof elements in L(y) is infinite.\nWe prove Theorem 1.2 in Sect. 4 and Sect. 5. This result is proved using explicit calculations of\nthe Takagi singular measure of various subsets of \u03a9L given in the fine decomposition of the deficient\ndigit set \u03a9L made in Sect. 4 below. These calculations make use of self-similarity properties of the\nTakagi singular measure.\nPart (1) of this result was first proved in 2008 by Buczolich [7]. He proves the almost everywhere\nfiniteness of level sets by a S\nmethod that directly studies the graph of the Takagi function. His proof\nshows the graph G(\u03c4 ) = GI GR (nonconstructively) partitions into an irregular 1-set GR and a regular\n1-set GR , and that the irregular set GI has y-projection of Lebesgue measure 0 and x-projection of full\nmeasure 1. Here an irregular 1-set or purely unrectifiable 1-set is a set in R2 of Hausdorff dimension\n1 that intersects every continuously differentiable curve in a set of H1 -measure zero. By Besicovich's\ntheorem such a set has 1-dimensional projections of measure 0 in almost all directions, see Falconer\n[10, Theorem 6.1.3]. A regular 1-set is a set that can be covered by countably many rectifiable curves.\nIn comparison our proof of Theorem 1.2 uses the Takagi singular measure, whose support lies in \u03a9L .\nThe part of the graph G(\u03c4 ) that lies above \u03a9L is covered by a single rectifiable curve, the flattened\nTakagi function described in [19, Sect. 5] (which is of bounded variation [19, Theorem 5.4]), so it\nshould belong to the regular part GR of Buczolich's partition.\nWe contrast Theorem 1.2 with what is known about \"generic\" abscissa level sets in the Lebesgue\nmeasure sense. In [19, Theorem 1.4] we showed that a \"generic\" local level set Lloc\nx obtained by drawing x with the uniform distribution on [0, 1] (Lebesgue measure) is with probability one an uncountable\nset of Hausdorff dimension 0. An immediate consequence is: For a full Lebesgue measure set of abscissa points x \u2208 [0, 1] the level set L(\u03c4 (x)) is uncountable. Here we advance the following conjecture\nfor abscissa level sets, concerning their Hausdorff dimension.\nConjecture 1.3. (Abscissa generic level sets) A full Lebesgue measure set of abscissa points x \u2208 [0, 1]\nhave level sets L(\u03c4 (x)) that are uncountable and have Hausdorff dimension 0.\n3\n\n\fWe also prove generic results in the weaker Hausdorff dimension sense. Let dimH (\u0393) denote the\nHausdorff dimension of a set \u0393. Our next two results show that the set of level sets that are large in\nthe sense of having positive Hausdorff dimension are themselves generic in the Hausdorff dimension\nsense. We prove results in both the abscissa generic case and the ordinate generic case.\nTheorem 1.4. (Positive Hausdorff dimension abscissa level sets) Let \u0393abs\nH be set of abscissas x \u2208 [0, 1]\nsuch that the level set L(\u03c4 (x)) has positive Hausdorff dimension, i.e.\n\u0393abs\nH := {x \u2208 [0, 1] : dimH (L(\u03c4 (x))) > 0}.\nThen \u0393abs\nH has full Hausdorff dimension, i.e.\ndimH (\u0393abs\nH ) = 1.\n\n(1.2)\n\nWe do not obtain information about the Lebesgue measure of \u0393abs\nH . Conjecture 1.3 above is just the\nassertion that \u0393abs\nhas\nLebesgue\nmeasure\n0.\nH\nTheorem 1.4 is proved in Section 6. It is an immediate corollary of an analogous result for local\nlevel sets (Theorem 6.1), which proves Hausdorff dimension 1 even when one restricts to x \u2208 \u03a9L .\nL\nWe define a family of Cantor sets \u039b2r , contained in \u0393abs\nH \u2229 \u03a9 , where r \u2265 3 is an integer parameter,\nand show that dimH (\u039b2r ) \u2192 1 as r \u2192 \u221e. Theorem 6.1 also shows: The deficient digit set \u03a9L has\nHausdorff dimension 1.\n2\nTheorem 1.5. (Positive Hausdorff dimension ordinate level sets) Let \u0393ord\nH be set of ordinates y \u2208 [0, 3 ]\nsuch that the Takagi function level set L(y) has positive Hausdorff dimension, i.e.\n\n\u0393ord\nH := {y : dimH (L(y)) > 0}.\nThen \u0393ord\nH has full Hausdorff dimension, i.e.\ndimH (\u0393ord\nH ) = 1.\n\n(1.3)\n\nHere we know that the set \u0393ord\nH has Lebesgue measure 0, a result that follows from Theorem 1.2.\nTheorem 1.5 is proved in Sect. 7. We show that the Takagi function \u03c4 (x) restricted to each Cantor\nset \u039b2r in Sect. 6 is strictly increasing and is a bi-Lipschitz map. The result follows since bi-Lipschitz\nmaps preserve Hausdorff dimension.\n\n1.2. Dimension Spectrum of Takagi Level Sets\nOur results establish that level sets of the Takagi function exhibit a nontrivial dimension spectrum. We\ndefine the dimension spectrum function for Takagi level sets to be the function\nf\u03c4 (\u03b1) := dimH {y : dimH (L(y)) \u2265 \u03b1}.\n\n(1.4)\n\nBy definition this function is a nonincreasing function of \u03b1. The second author conjectured [20], and\nde Amo et al. [5] proved, that there are no level sets having Hausdorff dimension exceeding 12 , which\ngives\n1\nf\u03c4 (\u03b1) = 0 for \u03b1 > .\n(1.5)\n2\n4\n\n\fWe trivially have f\u03c4 (0) = 1 and Theorem 1.5 of this paper establishes that lim\u03b1\u21920+ f\u03c4 (\u03b1) = 1, by\nshowing that for all sufficiently large integers r,\nf\u03c4 (\n\n1\n2 log r\n)\u22651\u2212\n.\n2r\n2r\n\n(1.6)\n\nBy monotonicity of this function we have f\u03c4 (\u03b1) > 0 holding on some interval [0, \u03b10 ) of positive length.\nIt seems reasonable to expect that f\u03c4 (\u03b1) > 0 for 0 \u2264 \u03b1 < 12 . Finally, we note that the assertion that\nf\u03c4 (\u03b1) < 1 holds for each \u03b1 > 0 would imply the truth of Conjecture 1.3.\nOne can also study analogous questions for local level sets. We define the local level set dimension\nspectrum function by\n\u0010\n\u0011\nf\u03c4\u2217 (\u03b1) := dimH {x \u2208 \u03a9L : dimH (Lloc\n)\n\u2265\n\u03b1}\n.\n(1.7)\nx\nThis function is not directly comparable with f\u03c4 (\u03b1) because it samples abscissa points rather than\nordinate points. The nonexistence of level sets of Hausdorff dimension exceeding 21 yields\n1\nf\u03c4\u2217 (\u03b1) = 0 for \u03b1 > .\n2\n\n(1.8)\n\nTheorem 6.1 of this paper establishes that f\u03c4\u2217 (0) = lim\u03b1\u21920+ f\u03c4\u2217 (\u03b1) = 1, by showing that, for all large\nenough integers r,\n2 log r\n1\n.\n(1.9)\nf\u03c4\u2217 ( ) > 1 \u2212\n2r\nr\nAgain it follows that f\u03c4\u2217 (x) > 0 on some interval [0, \u03b11 ) of positive length.\nThe notion of multifractal formalism (or thermodynamic formalism) has been introduced in connection with the H\u00f6lder spectrum of points of a nonsmooth function having given H\u00f6lder exponent;\nsee Jaffard [15], [16] for discussion and many references. It is predicted (under suitable hypotheses)\nthat the H\u00f6lder spectrum dimension f (\u03b1) of a given function is a real-analytic function of \u03b1 over a\ncertain range, and also exhibits a convexity property over this range. The multifractal formalism further relates local properties of the function (local H\u00f6lder exponents) to global smoothness properties\nof the function, invoving a Legendre transform of the function f (\u03b1). Our dimension functions above\nencode rather different properties of the Takagi function\u2013size of its level sets\u2013 but in a certain sense still\nsample local properties of this function. Therefore it seems reasonable to ask whether the associated\ndimension functions f\u03c4 (\u03b1) and f\u03c4\u2217 (\u03b1) might have similar analytic and convexity properties.\n\n1.3. Discussion\nThere has been much prior study of the non-differentiable structure of the Takagi function and related\nfunctions according to various measures. See the papers of Allaart and Kawamura ([3], [4]), and\nreferences therein. We also mention the survey paper of the first author [18]. Level sets study only one\nparticular aspect of the nondifferentiability of this function.\nAn interesting feature of the Takagi function is that the cardinality of \"generic\" abscissa and\n\"generic\" ordinate level sets in the Lebesgue measure sense differ drastically. This difference can\noccur because sampling a point x on the abscissa favors picking level sets which are \"large.\" It is a\nmanifestation of the non-differentiable nature of the Takagi function. This difference indicates that the\nTakagi function must (in some sense) have \"infinite slope\" over part of its domain. In particular \u03c4 (x)\nis not a function of bounded variation.\nWe raise as open problems the determination of the dimension functions f\u03c4 (\u03b1) and f\u03c4\u2217 (\u03b1) for\n0 \u2264 \u03b1 \u2264 1 and of deciding whether properties predicted by the thermodynamic formalism hold. It\n5\n\n\fmight conceivably be true that f\u03c4 (\u03b1) = f\u03c4\u2217 (\u03b1) holds for 0 \u2264 \u03b1 \u2264 1; the above discussion shows it\nholds for \u03b1 \u2265 21 .\nSome further improvements of the results on level sets appear in Allaart [1], [2]. In particular [2]\nobtains results on the detailed distribution of level sets having a given finite number of elements.\nAcknowledgments. The first author thanks D. E. Knuth for raising interesting questions about the\nTakagi function (see [17, Problem 82, p. 103].) We thank Pieter Allaart for allowing use to include\nhis substantially simplified proof of Theorem 7.1, and for bringing the work of of Buczolich [7] to our\nattention. We thank the reviewer for helpful comments.\n\n2. Preliminaries: Properties of the Takagi Function\n2.1. Functional Equations\nWe first recall two functional equations satisfied by the Takagi function [19, Lemma 2.2].\nLemma 2.1. (Takagi functional equations) The Takagi function satisfies two functional equations,\nvalid for 0 \u2264 x \u2264 1, the reflection equation\n\u03c4 (x) = \u03c4 (1 \u2212 x),\n\n(2.1)\n\nx\n2\u03c4 ( ) = \u03c4 (x) + x.\n2\n\n(2.2)\n\nand the dyadic self-similarity equation\n\nWe next formulate a local self -similarity property of the graph of the Takagi function. To describe\nit we require some functions determined by the binary expansion of x.\nDefinition 2.2. Let x denote a binary expansion\nx :=\n\n\u221e\nX\nbj\n= 0.b1 b2 b3 ...,\n2j\n\n(2.3)\n\nj=1\n\nwith each bj \u2208 {0, 1}. For each j \u2265 1 we define the following integer-valued functions.\n(1) The digit sum function Nj1 (x) is\nNj1 (x) := b1 + b2 + * * * + bj .\n\n(2.4)\n\nNj0 (x) := j \u2212 Nj1 (x).\n\n(2.5)\n\nWe also set\nThese functions count the number of 1's (resp. 0's) in the first j binary digits of x.\n(2) The deficient digit function Dj (x) is given by\nDj (x) := Nj0 (x) \u2212 Nj1 (x) = j \u2212 2Nj1 (x) = j \u2212 2(b1 + b2 + * * * + bj ).\n\n(2.6)\n\nThe function Dj (x) counts the excess of binary digits bk = 0 over those with bk = 1 in the first j\ndigits, i.e. it is positive if there are more 0's than 1's. (Note that dyadic rationals have two different\nbinary expansions, and the functions Nj0 (x), Nj1 (x), Dj (x) depend on the choice of expansion.)\n6\n\n\fThe local self-similarity property of the Takagi function graph is as follows ([19, Lemma 2.5(2)]).\nLemma 2.3. (Takagi self-similarity)\nLet x0 = 0.b1 b2 . . . bn 0\u221e = 2kn be a dyadic rational, and parameterize the interval [ 2kn , k+1\n2n ] as\nx = x0 + 2wn for 0 \u2264 w \u2264 1. Then there holds\n\u03c4 (x) = \u03c4 (x0 ) +\n\n1\n(\u03c4 (w) + Dn (x0 ) w) .\n2n\n\n(2.7)\n\nThat is, on the dyadic interval [ 2kn , k+1\n2n ] the graph of the function \u03c4 (x) is a miniature version of its\nfull graph, vertically shifted by \u03c4 (x0 ), shrunk by a factor 21n , and tilted by an additive linear factor\n1\n2n Dn (x0 )w.\nIn particular, for the case of balanced dyadic rationals, which are ones with Dn (x0 ) = 0 (necessarily n = 2m is even), (2.7) simplifies to\n\u03c4 (x) = \u03c4 (x0 ) +\n\n\u03c4 (w)\n,\n2n\n\n(2.8)\n\nwhich comprises only a vertical shift and shrinking of the Takagi function.\n\n2.2. Local level sets\nThe notion of local level set Lloc\nx is attached to the binary expansion of an abscissa point x \u2208 [0, 1].\nWe show that certain combinatorial flipping operations applied to the binary expansion of x yield new\npoints x0 in the same level set. The totality of points reachable from x by these combinatorial operations\nwill comprise the local level set Lloc\nx associated to x.\nLet a binary expansion of x \u2208 [0, 1] be given:\nx :=\n\n\u221e\nX\nbj\n= 0.b1 b2 b3 ...,\n2j\n\neach bj \u2208 {0, 1}.\n\n(2.9)\n\nj=1\n\nThe flip operation (or complementing operation) on a single binary digit b is\nb\u0304 := 1 \u2212 b.\n\n(2.10)\n\nWe associate to any binary expansion x the sequence of digit positions j at which tie-values of the\ndeficient digit function Dj (x) = 0 occur, which we call balance points; note that all such j are even.\nThe balance-set Z(x) associated to x is denoted\nZ(x) := {ck : Dck (x) = 0}.\n\n(2.11)\n\nwhere we define c0 = c0 (x) = 0 and set c0 (x) < c1 (x) < c2 (x) < .... This sequence of tie-values may\nbe finite or infinite. If it is finite, ending in cn (x), we make the convention to adjoin a final \"balance\npoint\" cn+1 (x) = +\u221e. We call a \"block\" an indexed set of digits between two consecutive balance\npoints,\nBk (x) := {bj : ck (x) < j \u2264 ck+1 (x)},\n(2.12)\nwhich includes the second balance point but not the first. We define an equivalence relation on\nblocks, written Bk (x) \u223c Bk0 (x0 ) to mean the block endpoints agree (ck (x) = ck0 (x0 ) and ck+1 (x) =\n\n7\n\n\fck0 +1 (x0 )) and either Bk (x) = Bk0 (x0 ) or Bk (x) = B\u0304k0 (x0 ), where the bar operation flips all the digits\nin the block, i.e.\nbj 7\u2192 b\u0304j := 1 \u2212 bj ,\nck < j \u2264 ck+1 .\n(2.13)\nFinally, we define the equivalence relation x \u223c x0 on two binary expansions to mean that they have\nidentical balance-sets Z(x) \u2261 Z(x0 ), and furthermore every block Bk (x) \u223c Bk (x0 ) for k \u2265 0. Note\nthat x \u223c 1 \u2212 x; this corresponds to a flipping operation being applied to every binary digit. In [19] we\nshowed that the equivalence relation x \u223c x0 implies that \u03c4 (x) = \u03c4 (x0 ), so that x and x0 are in the same\nlevel set of the Takagi function.\nDefinition 2.4. The local level set Lloc\nx associated to x is the set of equivalent points,\n0\n0\nLloc\nx := {x : x \u223c x}.\n\n(2.14)\n\nWe use again the convention that x and x0 denote binary expansions, so that dyadic rationals require\nspecial treatment.\nWe recall some basic properties of local level sets ([19, Theorem 3.1, Corollary 3.2]).\n1. Local level sets Lloc\nx are closed sets. Two local level sets either coincide or are disjoint.\nloc\n2. Each local level set Lloc\nx is contained in a level set: Lx \u2286 L(\u03c4 (x)). That is, if x1 \u223c x2 then\n\u03c4 (x1 ) = \u03c4 (x2 ).\n\n3. Each level set L(y) partitions into local level sets\n[\nLloc\nL(y) =\nx\n\n(2.15)\n\nx\u2208\u03a9L\n\u03c4 (x)=y\n\nHere \u03a9L denotes the collection of leftmost endpoints of all local level sets.\n4. A local level set Lloc\nx is a finite set if the balance-set Z(x) is finite; otherwise it is an uncountable\nperfect set (Cantor set).\n\n2.3. Deficient digit set \u03a9L\nIn [19] we studied the set of leftmost endpoints \u03a9L of local level sets.\nDefinition 2.5. The deficient digit set \u03a9L consists of all x such that\n\u03a9L := {x =\n\n\u221e\nX\nbj\n: Dj (x) \u2265 0 for all j \u2265 1}.\n2j\nj=1\n\nThe deficient digit set is a Cantor-type set obtained by removing a certain countable collection of\nopen intervals from the unit interval, which we describe using the following definitions.\n0\n\nDefinition 2.6. (1) The breakpoint set B consists of B\u2205 0 = 0 together with the collection of all baln\nanced dyadic rationals in \u03a9L . These are all B 0 = 22m\nthat have binary expansions of the form\nB 0 = 0.b1 b2 ...b2m\u22121 b2m 0\u221e for some m \u2265 1,\n8\n\n\fthat satisfy the condition\nDj (B 0 ) \u2265 0 for 1 \u2264 j \u2264 2m \u2212 1, and D2m (B 0 ) = 0,\n\n(2.16)\n\nThis condition implies b2m = 1.\n(2) The small breakpoint set B is the subset of the breakpoint set B 0 consisting of B\u2205 = 0 plus all\ndyadic rationals in B 0 that satisfy the extra condition that the last two binary digits b2m\u22121 = b2m = 1.\nIn [19] we used the small breakpoint set B to label the intervals removed from [0, 1] to create the\ndeficient digit set \u03a9L .\nDefinition 2.7. For each dyadic rational B = 0.b1 b2 ...bl 01k , k \u2265 2 in the small breakpoint set B\n(B 6= B\u2205 ) associate the open interval IB := (x(B)\u2212 , x(B)+ ) having endpoints\nx(B)\u2212 := 0.b1 b2 ...bl 01k (01)\u221e\nx(B)+ := 0.b1 b2 ...bl 10k (00)\u221e ,\nnecessarily with k \u2265 2. We also set IB\u2205 = ( 31 , 1).\nThe following result gives properties of the deficient digit set \u03a9L ( [19, Theorem 4.6].)\nTheorem 2.8. (Properties of Deficient Digit Set)\n(1) The deficient digit set \u03a9L comprises the set of leftmost endpoints of all local level sets. It satisfies\nL\n\u03a9 \u2282 [0, 13 ].\n(2) The deficient digit sum set \u03a9L is a closed, perfect set (Cantor set). It is given by\n[\n\u03a9L = [0, 1)\\\nIB .\n(2.17)\nB\u2208B\n\nwhere the omitted open intervals IB , for B in the small breakpoint set, have right endpoint a dyadic\nrational and left endpoint a rational number with denominator 3 * 2k for some k \u2265 1.\n(3) The deficient digit set \u03a9L has Lebesgue measure zero.\nIn [19, Lemma 4.5] it is shown that the value of the endpoints of the removed intervals satisfies\n1\n,\n2k+l * 3\nso that linear interpolation of a function across the a removed interval always has slope \u22121.\n\u2212\n\u2212\n+\nx+\nB \u2212 xB = \u03c4 (x(B) ) \u2212 \u03c4 (x(B) ) =\n\n(2.18)\n\n2.4. Takagi function on deficient digit set\nIn [19, Theorem 4.8] we proved that the Takagi function is nondecreasing on the set 12 \u03a9L . Note that\n1 L\n1\n\u03a9 := { x : x \u2208 \u03a9L } = {x \u2208 [0, 1] : Dj (x) > 0 for all j \u2265 1},\n2\n2\nwhich shows that 12 \u03a9L \u2282 \u03a9L .\nTheorem 2.9. (1) The Takagi function is nondecreasing on the set 21 \u03a9L .\n(2) The Takagi function is strictly increasing on 21 \u03a9L away from a countable set of points, which\nare a subset of those rationals having binary expansions ending in 0\u221e or (01)\u221e . For each level y the\nequation y = \u03c4 (x) has at most two solutions with x \u2208 12 \u03a9L . Thus if x1 < x2 < x3 all belong to 12 \u03a9L\nthen \u03c4 (x3 ) > \u03c4 (x1 ).\nThis result will be used in establishing the bi-Lipschitz property appearing in Theorem 7.1.\n9\n\n\f3. Takagi Singular Measure\nA main ingredient used in this paper will be a singular measure, which is the weak derivative of the\nTakagi singular function constructed in [19]. We summarize the basic facts on the Takagi singular\nfunction, taken from [19, Theorems 1.5 ]. It is pictured in Figure 2 below.\nTheorem 3.1. (Takagi singular function) The function \u03c4 S (x) defined by \u03c4 S (x) = \u03c4 (x) + x for x \u2208 \u03a9L\nis a nondecreasing function on \u03a9L . Define its extension to all x \u2208 [0, 1] by\n\u03c4 S (x) := sup{\u03c4 S (x1 ) : x1 \u2264 x with x1 \u2208 \u03a9L }.\nThen the function \u03c4 S (x) is a monotone singular function. That is, it is a nondecreasing continuous\nfunction having \u03c4 S (0) = 0, \u03c4 S (1) = 1, which has derivative zero at (Lebesgue) almost all points of\n[0, 1]. The closure of the set of points of increase of \u03c4 S (x) is the deficient digit set \u03a9L .\n1.0\n\n0.8\n\n0.6\n\n0.4\n\n0.2\n\n0.2\n\n0.4\n\n0.6\n\n0.8\n\n1.0\n\nFigure 2: Graph of the singular Takagi function.\nThe weak derivative of the Takagi singular function is a Radon measure \u03bcS that we call the Takagi\nsingular measure, and it has the following properties.\nS\nTheorem 3.2. (Takagi singular measure) The Takagi\nR x singular function \u03c4 (x) is the definite integral of\nS\na nonnegative Radon measure \u03bcS , i.e. \u03c4 (x) = 0 d\u03bcS . The measure \u03bcS has support equal to the\ndeficient digit set \u03a9L , so that\nZ\nZ\n1\n\nd\u03bcS =\n0\n\nd\u03bcS = 1.\n\n(3.19)\n\n\u03a9L\n\nThus it is singular continuous with respect to Lebesgue measure. For every Borel set K in [0, 1],\n\u03bcS (K) = meas(\u03c4 S (K)),\n\n(3.20)\n\nwhere meas(*) denotes Lebesgue measure.\nProof. By Theorem 3.1, the function \u03c4 S (x) is monotone and bounded, hence of bounded (pointwise) variation. It follows that its distributional derivative is a finite Radon measure, call it \u03bcS . It is\nnecessarily nonnegative since \u03c4 S (x) is nondecreasing (cf. [9, Theorem 1, Sect. 5.1]).\nThe support of a measure \u03bc on the real line is the closure of the set of points of increase of \u03bc, which\nis \u03a9L by Theorem 3.1. Since meas(\u03a9L ) = 0 it is a singular measure, and it is singular continuous\n10\n\n\fRx\nbecause the integral \u03c4 S (x) := 0 d\u03bcS is a continuous function of x. Finally, since [0, 1] is compact,\nany Radon measure (inner regular measure) on [0, 1] is also outer regular ([13, Theorem E, Sect. 52]).\nOuter regularity means that for any Borel set K, \u03bcS (K) = inf K\u2282U {\u03bcS (U ) : U an open set}. We\nknow that the Takagi singular measure of an open interval U = (0, t) is\nZ t\nd\u03bcS (x) = \u03c4 S (t) \u2212 \u03c4 S (0) = \u03c4 S (t) = meas((\u03c4 S (0), \u03c4 S (t))) = meas(\u03c4 S (U )).\n\u03bcS (U ) :=\n0\n\nwhere meas denotes Lebesgue measure. Outer regularity of both \u03bcS and of Lebesgue measure now\nimplies that the equality holds on every Borel set K, proving (3.20). 2\n\n4. Structure of Takagi Singular Measure\nWe now compute values of the Takagi singular measure on various subsets of \u03a9L In \u00a74.1 we define a\nfine partition of \u03a9L and in the remaining subsections we compute the singular measures of all sets in\nthis partition.\n\n4.1. Fine partition of deficient digit set\nWe partition the set \u03a9L of left endpoints of local level sets into finer pieces, as follows:\n[\n\u03a9L = \u03a9L\n\u03a9L\n\u221e\nf in\n\n(4.1)\n\nin which\nL\n\u03a9L\n\u221e := {x \u2208 \u03a9 : Dj (x) = 0 for infinitely many j \u2265 1}.\n\nand\n\n\u03a9L\nf in\n\n(4.2)\n\nis its complement,\nL\n\u03a9L\nf in := {x \u2208 \u03a9 : Dj (x) \u2265 1 for all sufficiently large j}.\n\n(4.3)\n\nThe latter set can be further partitioned into subsets labelled by elements B 0 in the breakpoint set B 0\nk\nconsisting of all dyadic rationals B 0 = 0.b1 b2 ..b2m = 22m\nsuch that all Dj (B 0 ) \u2265 0 and D2m (B 0 ) = 0.\n0\n0\nTo each B \u2208 B we associate the set\nx0\n1\n\u03a9L (B 0 ) := {x = B 0 + 2m : x0 \u2208 \u03a9L }.\n(4.4)\n2\n2\nIn particular for m = 0 we have one set B 0 = B0 = 0 with \u03a9L (B0 ) = 21 \u03a9L .\nLemma 4.1. (Fine Partition of Deficient Digit Set) The set \u03a9L\nf in has a partition\n[\n\u03a9L\n\u03a9L (B 0 ),\nf in =\n\n(4.5)\n\nB 0 \u2208B0\n0\n\nwith union over the breakpoint set B . Each set \u03a9L (B 0 ) is a closed set.\nProof. Elements x \u2208 \u03a9L (B 0 ) have Dj (x) \u2265 0 for all j \u2265 1, D2m (x) = D2m (B 0 ) = 0, and\n0\nDj (x) > 0 for j \u2265 2m + 1. In particular \u03a9L (B 0 ) \u2282 \u03a9L\nf in . The sets are disjoint for different B\nbecause the value 2m is uniquely determined for each element of the set \u03a9L (B 0 ), and this determines\nthe initial digits B 0 uniquely. Finally we see that each element x \u2208 \u03a9L\nf in has associated to it a unique\nmaximal value 2m of j such that Dj (x) = 0, (j is necessarily even) and this assigns it to a particular\n\u03a9L (B 0 ). 2\n\n11\n\n\f4.2. Singular measure mass calculations\nThe Takagi singular measure d\u03bcS is not translation-invariant. However in Theorem 4.2 below we are\nable to use its self-similarity properties to compute the \u03bcS -measure of certain sets inside \u03a9L , namely\nL\n0\nL\n0\nthe sets \u03a9L\n\u221e and the sets \u03a9 (B ) in the fine partition of \u03a9 in Lemma 4.1, where B runs over the set\nL\nof balanced dyadic rationals that belong to \u03a9 .\nk\nTheorem 4.2. For each balanced dyadic rational B 0 = 0.b1 b2 ...b2m = 22m\nin the deficient digit set\nL\nL\n0\n\u03a9 the fine partition set \u03a9 (B ) is a closed set, and its Takagi singular measure is\nZ\n1\nd\u03bcS = 2m+1 .\n\u03bcS (\u03a9L (B 0 )) :=\n(4.6)\n2\nL\n0\n\u03a9 (B )\n\nProof. We already know that \u03bcS (\u03a9L ) = 1 via Theorem 3.2.\nClaim 1. The Takagi singular measure mass of 12 \u03a9L is given by\n1\n1\n1\n\u03bcS (\u03a9L (B0 )) := \u03bcS ( \u03a9L ) = \u03bcS (\u03a9L ) = .\n2\n2\n2\n\n(4.7)\n\nTo prove the claim, we use the self-similarity relation in Lemma 2.1(1),\n1\n2\u03c4 ( x) = x + \u03c4 (x),\n2\n\nfor 0 \u2264 x \u2264 1.\n\nIt x \u2208 \u03a9L then \u03c4 (x) = \u03c4 L (x) so that we obtain\n1\n2\u03c4 ( x) = x + \u03c4 (x) = \u03c4 S (x).\n2\n\n(4.8)\n\nThus if x1 < x2 with both xi \u2208 \u03a9L , then\nZ\n\n1\nx\n2 2\n1\nx\n2 1\n\n1\n1\n\u03bcS = \u03c4 S ( x 2 ) \u2212 \u03c4 S ( x 1 )\n2\n2\n\u0013 \u0012\n\u0013\n\u0012\n1\n1\n1\n1\n=\n\u03c4 ( x2 ) + x2 \u2212 \u03c4 ( x1 ) + x1\n2\n2\n2\n2\n\u0001\n1 S\n1\n=\n\u03c4 (x2 ) \u2212 \u03c4 S (x1 ) + (x2 \u2212 x1 )\n2Z\n2\n1 x2\n1\n=\n\u03bcS + (x2 \u2212 x1 ) .\n2 x1\n2\n\n(4.9)\n\nWe may rewrite this as\nZ\n\n1\nx\n2 2\n1\nx\n2 1\n\n1\n\u03bcS \u2212\n2\n\nZ\n\nx2\n\n\u03bcS \u2264\nx1\n\n1\nmeas([x1 , x2 ])\n2\n\nwhere the last term denotes the Lebesgue measure of the interval [x1 , x2 ].\nNow by (2.17) for each m \u2265 1 we obtain a covering of \u03a9L using\n[\n\u03a9L \u2282 P2m := [0, 1) r\nIB .\nB\u2208B\n|B|\u22642m\n\n12\n\n(4.10)\n\n(4.11)\n\n\fin which we remove only a finite number of the \"flattened\" open intervals IB corresponding to those\nB \u2208 B (the small breakpoint set) having dyadic length at most 2m. The set P2m is a closed set\n0\n0\ncomprised of a finite number of intervals, [xj , xj ], say, having both endpoints xj , xj \u2208 \u03a9L . Adding up\nthe relations (4.10) over these intervals yields\nZ\n1\nP\n2 2m\n\n\u03bcS \u2212\n\n1\n2\n\nZ\n\u03bcS \u2264\nP2m\n\n1\nmeas(P2m ),\n2\n\n(4.12)\n\nin which meas(P2m ) denotes the Lebesgue measure of the set P2m . Next we note that the P2m form a\nnested family P2 \u2283 P4 \u2283 P6 \u2283 * * * of closed sets, with\n\u221e\n\\\n\n\u03a9L =\n\nP2m .\n\nm=1\n\nSince these sets are Borel measurable and \u03bcS is outer regular we have\nZ\nZ\nlim\n\u03bcS =\n\u03bcS ,\nm\u2192\u221e P\n2m\n\n\u03a9L\n\nZ\n\nZ\n\u03bcS =\n\nlim\n\nm\u2192\u221e\n\n1\nP\n2 2m\n\n1 L\n\u03a9\n2\n\n\u03bcS ,\n\ncf. Evans and Gariepy [9, Theorem 1, p. 2]. Now Theorem 2.8 (2), (3) together establish that\nmeas(P2m ) \u2192 0 as m \u2192 \u221e.\nThus letting m \u2192 \u221e in (4.12) yields\nZ\n\n1\n\u03bcS =\n1 L\n2\n\u03a9\n2\n\nwhich with\n\nR\n\n\u03a9L\n\nZ\n\u03bcS ,\n\u03a9L\n\n\u03bcS = 1 proves Claim 1.\n\nClaim 2. Let B 0 =\n\nk\n22m\n\n0\n\n\u2208 B and suppose that xi = B 0 +\nZ\n\nx0i\n22m\n\n0\n\nfor i = 1, 2, with both xi \u2208 \u03a9L . Then\n\n0\n\nx2\n\n\u03bcS =\nx1\n\nx2\n\nZ\n\n1\n22m\n\n0\n\n!\n0\n\n0\n\n\u03bcS + (x2 \u2212 x1 ) .\n\n(4.13)\n\nx1\n\nSince B 0 is a balanced dyadic rational, we may deduce (4.13) using the formula of Lemma 2.3, in\nanalogous fashion to (4.9). This proves Claim 2.\nNow we complete the proof. Claim 2 yields the formula\n22m\n\nZ\n\n0\n\nx2\n\nZ\n\u03bcS \u2212\n\nx1\n\nx2\n\n0\nx1\n\n0\n\n0\n\n\u03bcS \u2264 meas([x1 , x2 ]).\n\nFor any B 0 \u2208 B 0 we have\n\u03a9L (B 0 ) := {x : x = B 0 +\n13\n\nx0\n1\n0\nwith x \u2208 \u03a9L }.\n2m\n2\n2\n\n(4.14)\n\n\fNow we may cover the set 21 \u03a9L with 21 P2n . We apply the approximation bound (4.14) summed up over\nall the intervals in P2n , to obtain\nZ\nZ\n1\n2m\n\u03bcS \u2212\n\u03bcS \u2264 meas(P2n ).\n2\n1\n1\n2\nB 0 + 2m\n( 1 P2n )\nP2n\n2\n\n2\n\n2\n\nLetting n \u2192 \u221e we deduce, using meas(P2n ) \u2192 0, that\nZ\nZ\n2m\n2\n\u03bcS =\nB0+\n\nThis yields, since \u03a9L (B 0 ) := B 0 +\n\n1\n( 1 \u03a9L )\n22m 2\n\n1\n( 1 \u03a9L ),\n22m 2\n\n2\n\nthat\n\nZ\n\u03a9L (B 0 )\n\nas asserted.\n\n1\n\u03bcS = .\n1 L\n2\n\u03a9\n\n\u03bcS =\n\n1\n22m+1\n\n,\n\n2.\n\n4.3. Singular measure mass of \u03a9L\u221e\nThe calculations of the last section yield the following result.\nTheorem 4.3. (Takagi singular measure: fine partition) Let \u03bcS denote the Takagi singular measure.\nL\nThe sets \u03a9L\nf in and \u03a9\u221e are Borel sets, hence measurable. We have\n\u03bcS (\u03a9L\nf in ) = 1,\n\n(4.15)\n\nwhich shows that\n\u03bcS (\u03a9L\n\u221e ) = 0.\nConsequently the image of this set under the Takagi singular function\n\n(4.16)\n\u03c4S\n\nsatisfies\n\nmeas(\u03c4 S (\u03a9L\n\u221e )) = 0,\n\n(4.17)\n\nwhere meas denotes Lebesgue measure.\nProof. Each set \u03a9L (B 0 ) is closed, hence their disjoint union \u03a9L\nf in is a Borel set, hence is \u03bcS L\nL\nL\nL\nmeasurable. The set \u03a9 is closed, hence \u03a9\u221e = \u03a9 r \u03a9f in is also a Borel set, hence is \u03bcS -measurable,\nand\nL\nL\n\u03bcS (\u03a9L\n\u221e ) = \u03bcS (\u03a9 ) \u2212 \u03bcS (\u03a9f in ).\nL\n(In fact one can easily show that the closure of \u03a9L\nf in is \u03a9 .)\nSince \u03bcS (\u03a9L ) = 1 the theorem will follow on showing \u03bcS (\u03a9L\nf in ) = 1. We have\nX\n\u03bcS (\u03a9L (B)),\n\u03bcS (\u03a9L\nf in ) =\nB\u2208B0\n0\n\n1\n, where B = 0.b1 * * * b2m =\nwhere B is the breakpoint set. Theorem 4.2 now gives \u03bcS (\u03a9L (B)) = 22m+1\nk\n, with k odd. Recall from [19, Lemma 4.2] that the number of balanced dyadic rationals in \u03a9L hav22m\n\u0001\nk\n1 2m\ning the form 22m\nfor an odd k is the m-th Catalan number Cm = m\nm . Here for m = 0 we have\nC0 = 1 corresponding to the element B0 = 0.\n\n14\n\n\fThe Catalan numbers are well known to have the generating function\n\u221a\n\u221e\nX\n1 \u2212 1 \u2212 4z 2\n2m\n.\nCm z =\n2z 2\n\n(4.18)\n\nj=0\n\nIn consequence, taking z = 12 , we obtain\n\u03bcS (\u03a9L\nf in )\n\n=\n\nP\u221e\n\nCm\nj=0 22m\n\n\u221e\nX\n\nCm\n\nm=0\n\n= 2. Therefore we obtain, using Theorem 4.2, that\n\n1\n22m+1\n\n1\n=\n2\n\n\u221e\nX\nCm\n22m\n\n!\n= 1,\n\nm=0\n\nwhich proves (4.15). Now (4.16) follows, and (4.17) follows from Theorem 3.2 on taking K = \u03a9L\n\u221e in\n(3.20). 2\n\n5. Cardinality of Global Level Sets\nIn this section we prove Theorem 1.2, which states that for a full measure set of ordinates y the level\nset L(y) is a finite set, and that the expected number of elements in this set, with respect to Lebesgue\nmeasure on 0 \u2264 y \u2264 23 , is infinite.\nWe use the following result [19, Theorem 5.8] giving the expected number of local level sets in a\nuniformly chosen level y in [0, 32 ].\nTheorem 5.1. (Expected number of local level sets) For a full Lebesgue measure set of ordinate points\ny \u2208 [0, 23 ] the number N loc (y) of local level sets at level y is finite. Furthermore\nZ\n\n2\n3\n\nN loc (y)dy = 1.\n\n(5.1)\n\n0\n\nThat is, the expected number of local level sets on a randomly drawn ordinate level y is 23 .\nTheorem 5.1 was proved using the coarea formula for functions of bounded variation applied to the\nflattened Takagi function \u03c4 L .\nProof of Theorem 1.2. (1) Let \u0393ord\n\u221e be the set of infinite levels, i.e.\n\u0393ord\n\u221e := {y : L(y) is an infinite set}.\n\n(5.2)\n\nTo show a full measure set of ordinates have finite level sets, we show the contrapositive, that \u0393ord\n\u221e has\nLebesgue measure 0. We have\n[\nL\n\u0393ord\n\u039bloc\n\u221e \u2282 \u03c4 (\u03a9\u221e )\n\u221e,\nL\nin which \u03c4 (\u03a9L\n\u221e ) := {y = \u03c4 (x) : x \u2208 \u03a9\u221e } detects all levels that contain at least one infinite local\nlevel set, and\n\n\u039bloc\n\u221e := {y : L(y) contains infinitely many different local level sets}.\n\n(5.3)\n\nNow [19, Theorem 7.2 (1)] shows that \u039bloc\n\u221e has Lebesgue measure 0. Thus it suffices to prove that\n\u03c4 (\u03a9L\n)\nhas\nLebesgue\nmeasure\n0.\n\u221e\n15\n\n\fRecall that \u03c4 S (x) = \u03c4 (x) + x, for x \u2208 \u03a9L . Now consider \u03c4 S (x) restricted to x \u2208 \u03a9L (B) for a\n0\nk\nparticular B \u2208 B , the breakpoint set. We write B = 0.b1 b2 * * * b2m = 22m\nwhere k is necessarily odd.\nL\nThen x \u2208 \u03a9 (B) if and only if\n1 0\n2x\n,\n22m\n\nx=B+\n\n1\n1\nwith x0 \u2208 \u03a9L .\n2\n2\n\nLemma 2.3 then gives\n\u03c4 (x) = \u03c4 (B) +\n\n1\n22m\n\n1\n\u03c4 ( x0 ), with x0 \u2208 \u03a9L .\n2\n\nWe recall from Lemma 2.1 that 2\u03c4 ( 12 (x)) = \u03c4 (x) + x if x \u2208 \u03a9L , whence\n22m+1 (\u03c4 (x) \u2212 \u03c4 (B)) = \u03c4 (x0 ) + x0 = \u03c4 S (x0 ), for x0 \u2208 \u03a9L .\n\n(5.4)\n\nNow the linear map\ny 7\u2192 y 0 := 22m+1 (y \u2212 \u03c4 (B))\n1\nsends the interval [\u03c4 (B), \u03c4 (B)+ 22m+1\n] onto [0, 1] and it follows from the above that it sends \u03c4 (\u03a9L (B)) \u2282\n1\n[\u03c4 (B), \u03c4 (B) + 22m+1 ] onto the range \u03c4 S (\u03a9L ) = [0, 1]. We see from the linearity of this map that\n1\n\u03c4 (\u03a9L (B)) = [\u03c4 (B), \u03c4 (B) + 22m+1\n],\n\n\u0001\nmeas \u03c4 (\u03a9L (B)) =\n\n1\n22m+1\n\n.\n\nAdding up these contributions, the summation in Theorem 4.3 gives that the total Lebesgue measure in\ny \u2208 [0, 23 ] covered by images of these sets (counting overlaps with multiplicity) is\nX\n\nmeas(\u03c4 (\u03a9L (B))) =\n\nB\u2208B0\n\nX\n\n\u03bcS (\u03a9L (B)) = 1.\n\nB\u2208B0\n\n(The images have some overlap, allowing their total measure to exceed the length of the interval\n[0, 32 ].) Viewing these points x \u2208 \u03a9L (B) as labelling left endpoints of local level sets, this says that\na lower bound of the total number of local level set endpoints Lebesgue-integrated over 0 \u2264 y \u2264 23 ,\ncounted\nwith multiplicity,\nis 1. Here we did not count any local level set endpoints in \u03c4 (\u03a9L\n\u221e ) :=\n\u0011\n\u0010\nL\nL\nL\nL\nL\n\u03c4 \u03a9 r \u03a9f in , coming from the image of \u03a9\u221e , since each \u03a9 (B) is disjoint from \u03a9\u221e . Theorem 5.1\nnow gives\nZ 2\n3\nN loc (y)dy = 1,\n0\n\nwhere N loc (y) counts the number of all local level set endpoints. We have already accounted for the\nloc\nL\nfull\n\u0010 mass of this\n\u0011 integral above, and any omitted contribution to N (y) coming from \u03c4 (\u03a9\u221e ) :=\n\u03c4 \u03a9L r \u03a9L\nf in necessarily contributes an additional nonnegative amount. Thus we may conclude that\nmeas(\u03c4 (\u03a9L\n\u221e )) = 0.\nas asserted.\n(2) We aim to show that the expected size of a global level set is infinite, i.e. to show that\nZ\n\n2\n3\n\n|L(y)|dy = +\u221e,\n\n0\n\n16\n\n\fwhere |L(y)| counts the number of elements in L(y). By the discussion above we have\nZ\n\n2\n3\n\nZ\n\n1\n\n|L(y)|dy =\n\n|L(\u03c4 (x))|\u03bcS (x) \u2265\n\n0\n\n0\n\nX\nB\u2208B0\n\n1\n22m+1\n\n2r(B) ,\n\n(5.5)\n\nin which\nr(B) := |{1 \u2264 j < \u221e : Nj (B) = 0}|.\nHere each r(B) is finite and bounded above by m if B = 0.b1 b2 * * * b2m . We rewrite this as\nZ\n0\n\n2\n3\n\n\u221e\nX\nLm\n|L(y)|dy =\n,\n2m+1\n2\n\n(5.6)\n\nm=0\n\nin which\nLm :=\n\nX\n\n2r(B) .\n\nB\u2208B0 ,|B|=2m\n\nNow we observe that Lm , the total number of binary sequences of length 2m having N2m (B) = 0, has\na combinatorial interpretation as counting the number the two-dimensional lattice paths of length 2m\nstarting at the origin (0, 0), taking steps either (1, 1) or (1, \u22121), and ending at (2m, 0). Indeed these\npaths groups into collections of paths of size 2r under the \"flipping\" (reflection) operation, with each\ngroup containing exactly one path in B 0 . (See the discussion and proof in Feller [12, Theorem 4, p. 90]\nand also [19, Lemma 4.2].) It follows that\n\u0012\n\u0013\n2m\n1\nLm =\n\u223c\u221a\n22m .\nm\n\u03c0m\nThus the terms in the series on the right side of (5.6) decay like \u03a9( \u221a1m ), so the series (5.6) diverges,\ngiving the result. 2.\n\n6. Level Sets of Positive Hausdorff Dimension: Abscissa View\nWe study level sets having positive Hausdorff dimension. In the paper [19, Sect. 3.3]) we classified\nthose local level sets containing a rational number x that are of positive Hausdorff dimension: this gives\nsome explicitly determinable rational ordinates y having this property. Here we show that the set \u0393L\nH of\nabscissa points in \u03a9L that give local level sets having positive Hausdorff dimension has full Hausdorff\ndimension 1.\nL\nTheorem 6.1. (Local level sets of positive Hausdorff dimension) Let \u039bL\nH denote the set of x \u2208 \u03a9\nloc\nsuch that the Hausdorff dimension of Lx is positive, i.e.\nL\nloc\n\u039bL\nH := {x \u2208 \u03a9 : dimH (Lx ) > 0}.\n\n(6.1)\n\nThis set has full Hausdorff dimension, i.e.\ndimH (\u039bL\nH ) = 1.\nIn particular, the deficient digit set \u03a9L has Hausdorff dimension 1.\n\n17\n\n(6.2)\n\n\fProof. It clearly suffices to prove the first assertion. For integer r \u2265 1 let \u03932r consist of all abscissas\nx \u2208 [0, 1] that satisfy:\n(i) Dj (x) > 0 for j 6\u2261 0 (mod 2r).\n(ii) D2kr (x) = 0 for k = 1, 2, 3, ...\nThese conditions are equivalent to requiring \u03932r \u2282 \u03a9L , and that all x \u2208 \u03932r have the same balance-set\nZ(x) := {k : Dk (x) = 0} = 2rN.\nClaim 1. All members x \u2208 \u03932r have local level sets of positive Hausdorff dimension, satisfying\ndimH (Lloc\nx )\u2265\n\nlog 2\n1\n= .\n2r\nlog(2 )\n2r\n\nClaim 1 will follow from the spacing of the balance points being an arithmetic progression. This\nmakes each local level set Lloc\nx a Cantor-like set, which has a standard tree construction covered by\n1\nk\n\u22122rk\n2 intervals of length 2\n, so that dimH (Lloc\nx ) = 2r . Note that the particular subintervals are chosen differently at each step, so that this is generally not a self-similar construction, but the Hausdorff\ndimension lower bound proof for the Cantor set given in Falconer [11, Sect. 2.3] remains valid here,\nestablishing Claim 1.\nClaim 1 shows that \u03932r \u2282 \u039bL\nH , so that\n\u221e\n[\n\n\u03932r \u2282 \u039bL\nH.\n\nr=1\n\nTo complete the proof it suffices to show the sets \u03932r each have positive Hausdorff dimension, which\napproaches 1 as r \u2192 \u221e.\nClaim 2. For all large enough r, the set \u03932r has Hausdorff dimension greater than 1 \u2212\n\n2 log r\nr .\n\nClaim 2 follows by observing that \u03932r is itself a self-similar Cantor set in which each block of 2r\nsymbols is drawn from the set\nX2r := {x =\n\nm\n= 0.b1 b2 ...b2r : Dj (x) > 0 for 1 \u2264 j < 2r, D2r (x) = 0},\n22r\n\nwhose Hausdorff dimension is computable by the method of Falconer [11, Sect. 2.3]. It is well known\nthat\n\u0012 \u0013\n1\n2r\n|X2r | = Cr =\n,\nr+1 r\nis a Catalan number. Thus we obtain\ndimH (\u03932r ) =\nHowever it is well known that Cr =\nenough r there holds\n\n22r\n3\n\n\u03c0r 2\n\nlog Cr\nlog Cr\n=\n.\nlog 22r\n2r log 2\n\n(1 + o(1)) , as the integer r \u2192 \u221e. We conclude that for large\n\ndimH (\u03932r ) > 1 \u2212\n\n2 log r\n.\nr\n\nClaim 2 now follows, and the theorem is proved.\nNote that Claims 1 and 2 together imply that the local level set dimension spectrum function f\u03c4\u2217 (\u03b1)\nr\n1\ndefined in Section 1.2 satisfies, f\u03c4\u2217 ( 2r\n) > 1 \u2212 2 log\nfor all sufficiently large integers r. 2.\nr\n18\n\n\fabs\nabs\nL\nProof of Theorem 1.4. We have \u039bL\nH \u2282 \u0393H . Theorem 6.1 then gives dimH (\u0393H ) \u2265 dimH (\u039bH ) =\nabs\n1. yielding dimH (\u0393H ) = 1. 2.\n\n7. Level Sets of Positive Hausdorff Dimension: Ordinate View\nOur object is to prove Theorem 1.5, which asserts that the set of ordinate levels y having dimH (L(y)) >\n0 has Hausdorff dimension 1. We use the result on abscissas proved in the last section (Theorem 6.1),\ntogether with a property showing that the Takagi function restricted to certain small domains in [0, 1] is\nquite well behaved, i.e. it is bi-Lipschitz map. This allows the transfer of Hausdorff dimension lower\nbounds from the abscissa case treated in Sect. 6.\n\n7.1. Bi-Lipschitz property of Takagi function on \u03932r\nThe following proof of the bi-Lipschitz property incorporates a substantial simplification of the authors'\noriginal argument, due to P. Allaart.\nTheorem 7.1. Let Z(x) = {j : Dj (x) = 0} be the balance-set of x \u2208 [0, 1]. For r \u2265 1 the Takagi\nfunction \u03c4 (x) restricted to the (compact) domain\n\u03932r := {x \u2208 \u03a9L : Z(x) = 2rN},\nis strictly increasing and is a bi-Lipschitz map.\nProof. We will show that if x1 < x2 are both in \u03932r then we have the bi-Lipschitz estimates\n22r (x2 \u2212 x1 ) \u2265 \u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2265\n\n1\n(x2 \u2212 x1 ).\n22r\n\n(7.1)\n\nThe lower bound shows that the Takagi function restricted to \u03932r is strictly increasing.\nTo prove (7.1), we first reduce to the case that x1 and x2 have binary expansions that disagree\nsomewhere in the first 2r digits. If they disagree first between the 2kr + 1 and 2(k + 1)r digits, then\ni\nwe can write xi = x0 + 2w2kr\nwith 0 \u2264 wi \u2264 1, where x0 = 0.b1 b2 * * * b2kr is the initial block of 2kr\ndigits where they agree, and w1 < w2 . Note that w1 , w2 \u2208 \u039b2r by the self-similar definition of \u039b2r ,\nand w1 , w2 disagree somewhere in their first 2r digits. Now\nx2 \u2212 x1 =\n\n1\n(w2 \u2212 w1 )\n22kr\n\nand, since D2kr (x1 ) = D2kr (x2 ) = 0, Lemma 2.3 gives\n\u03c4 (x2 ) \u2212 \u03c4 (x1 ) =\n\n1\n(\u03c4 (w2 ) \u2212 \u03c4 (w1 )) .\n22kr\n\nThus it suffices to prove (7.1) for w1 and w2 .\nBy definition all x = 0.b1 b2 ... \u2208 \u039b2r have Dm (x) > 0 for all m 6= 2kr, while D2kr (x) = 0 for\nall k \u2265 1. This forces b2kr+1 = b2kr+2 = 0 and b2(k+1)r\u22121 = b2(k+1)r\u22122 = 1, for all k \u2265 0. We now\n0 0\nsuppose x1 = 0.b1 b2 ... and x2 = 0.b1 b2 ... disagree somewhere in their first 2r digits, say at the n-th\ndigit, where 3 \u2264 n \u2264 2r \u2212 2. Now define the dyadic rationals\nx\u03031 := 0.b1 b2 ...b2r\u22122 1 0\u221e =\n19\n\nk1\n,\n22r\u22121\n\n\f0\n\n0\n\n0\n\nx\u03032 := 0.b1 b2 ...b2r\u22122 1 0\u221e =\n\nk2\n,\n2r\u22121\n2\n\nwhich truncate the xi at their (2r \u2212 1)-st digits, and the dyadic rationals\nx\u03041 := 0.b1 b2 ...b2r\u22122 11 0\u221e =\n\n2k1 + 1\n,\n22r\n\n2k2 + 1\n,\n22r\nwhich truncate the xi at their 2r-th digits. We note that D2r\u22121 (x\u0303i ) = 1 and D2r (x\u0304i ) = 0 for i = 1, 2.\nWe can now write\nxi [2r]\nxi = x\u0304i + 2r , for i = 1, 2,\n2\nin which x1 [2r] = 0.b2r+1 b2r+2 * * * and similarly for x2 [2r]. Since each xi [2r] = 0.00... and each\nx\u0304i = 0.00... we deduce |x2 [2r] \u2212 x1 [2r]| \u2264 41 , and\n0\n\n0\n\n0\n\nx\u03042 := 0.b1 b2 ...b2r\u22122 11 0\u221e =\n\n1 1\n1\n\u2265 x2 \u2212 x1 \u2265 (x\u03042 \u2212 x \u03041 ) \u2212 * 2r .\n4\n4 2\nNow x\u03042 \u2212 x\u03041 \u2265\n\n1\n22r\u22121\n\nso we obtain\n1\n7\n1\n\u2265 x2 \u2212 x1 \u2265 * 2r\u22121 .\n4\n8 2\n\n(7.2)\n\nNext we estimate the difference between \u03c4 (x2 ) and \u03c4 (x1 ). For the lower bound, we will relate it to\nthe difference between \u03c4 (x\u03042 ) and \u03c4 (x\u03041 ). Using Lemma 2.3 and D2r (x\u0304i ) = 0 for i = 1, 2, we obtain\n\u03c4 (xi ) = \u03c4 (x\u0304i ) +\n\n\u03c4 (xi [2r])\n, for i = 1, 2.\n22r\n\nThis yields, using 0 \u2264 \u03c4 (xi [2r]) \u2264 23 ,\n\u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2265 (\u03c4 (x\u03042 ) \u2212 \u03c4 (x\u03041 )) \u2212\n\n2 1\n*\n.\n3 22r\n\nTo estimate the right side, we will relate these quantities to \u03c4 (x\u0303i ). Using x\u0304i = x\u0303i +\nusing Lemma 2.3 gives\n1\n\u03c4 (x\u0304i ) = \u03c4 (x\u0303i ) + 2r\u22121 , for i = 1, 2.\n2\nThus (7.3) becomes\n2 1\n\u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2265 (\u03c4 (x\u03032 ) \u2212 \u03c4 (x\u03031 )) \u2212 * 2r .\n3 2\n\n(7.3)\n1\n,\n22r\n\na calculation\n\n(7.4)\n\nNow comes the key observation. Both x\u03031 , x\u03032 \u2208 21 \u03a9L , since Dm (x\u0303i ) \u2265 1 for 1 \u2264 i \u2264 2r \u2212 1. By\n0\nhypothesis x1 and x2 disagree at the n-th digit, with n \u2264 2r \u2212 2, at which bn = 0, bn = 1, and we\ndefine the intermediate dyadic rational\n0\n\n0\n\n0\n\nx0 := 0.b1 b2 * * * bn 0\u221e =\n\nk0\n.\n2n\n\nWe have x0 \u2208 12 \u03a9L because its binary expansion is a prefix of that of x2 . Furthermore x0 < x2 because\nx0 and x2 disagree at the (2r \u2212 1)-st digit. Thus x1 < x0 < x2 and we may now apply Theorem 2.9(2)\n\n20\n\n\fto conclude the strict inequality \u03c4 (x\u03031 ) < \u03c4 (x\u03032 ). But \u03c4 (x\u0303i ) (i = 1, 2) are both dyadic rationals with\ndenominator at most 22r\u22121 , so we deduce that\n1\n.\n22r\u22121\nSubstituting this inequality into (7.4) yields the lower bound\n\u03c4 (x\u03032 ) \u2212 \u03c4 (x\u03031 ) \u2265\n\n\u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2265\n\n4 1\n.\n*\n3 22r\n\n(7.5)\n\nThis proves the function \u03c4 (x) is strictly increasing on \u03932r , and also gives the desired bi-Lipschitz\nestimate.\nCombining (7.5) with the trivial upper bound estimate \u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2264 32 , and with (7.2) yields\n22r\u22121 (x2 \u2212 x1 ) \u2265 \u03c4 (x2 ) \u2212 \u03c4 (x1 ) \u2265\nThis implies (7.1).\n\n1\n(x2 \u2212 x1 ).\n22r\u22122\n\n2\n\nRemark. The Takagi function \u03c4 (x) is not a Lipschitz map on its full domain [0, 1], nor is it a Lipschitz\nfunction even when restricted to the domain \u03a9L . This is because it has arbitrarily steep slopes on \u03a9L ,\nas is implicit in the singular function property.\n\n7.2. Hausdorff dimension of \u0393ord\nH\nTo conclude the paper we prove Theorem 1.5.\nProof of Theorem 1.5. Let\n2\nwith dimH L(y) > 0}.\n3\nIt is well known that bi-Lipschitz maps preserve Hausdorff dimension. By Theorem 7.1 the bi-Lipschitz\nproperty holds for the Takagi function \u03c4 restricted to the compact domain \u03932r . The range of this map\nis\n\u0393\u03032r := {y : y = \u03c4 (x), x \u2208 \u03932r },\n\u0393ord\nH := {y : 0 \u2264 y \u2264\n\nwhich therefore satisfies\n\n2 log r\n.\n2r\nfor large enough r, as shown in Claim 2 of the proof of Theorem 6.1.\nNext, Claim 1 of that proof shows that every level y \u2208 \u03932r has\ndimH (\u0393\u03032r ) = dimH (\u03932r ) \u2265 1 \u2212\n\n1\n.\n2r\nCombining these inequalities shows that the Takagi dimension spectrum function satisfies\ndimH (L(y)) \u2265 dimH (Lloc\nx )\u2265\n\nf\u03c4 (\n\n1\n2 log r\n)\u22651\u2212\n2r\n2r\n\nfor all sufficiently large r. Thus we have \u0393\u03032r \u2282 \u0393ord\nH . and\ndimH (\u0393ord\nH )\u22651\u2212\n\n2 log r\n.\nr\n\nLetting r \u2192 \u221e gives dimH (\u0393ord\nH ) \u2265 1, establishing the result. 2\n21\n\n\fReferences\n[1] P. C. Allaart, How large are the level sets of the Takagi function? eprint: arXiv:1102.1616\nv1, v1, 8 Feb 2011.\n[2] P. C. Allaart, The finite cardinalites of the level sets of the Takagi function, eprint:\narXiv:1107.0712, v1, 4 Jul 2011.\n[3] P. C. Allaart and K. Kawamura, Extreme values of some continuous nowhere differentiable functions, Math. Proc. Camb. Phil. Soc. 140 (2006), No. 2, 269\u2013295.\n[4] P. C. Allaart and K. Kawamura, The improper infinite derivatives of Takagi's nowheredifferentiable function, J. Math. Anal. Appl. 372 (2010), 656\u2013665.\n[5] E. de Amo, I. Bhouri, M. D\u00edaz Carrillo, and J. Fern\u00e1ndex-S\u00e1nchez, Hausdorff dimension of Takagi's function level sets, Nonlinear Analysis 74 (2011), No. 15, 5081\u20135087.\n[6] Y. Baba, On maxima of Takagi-van der Waerden functions, Proceedings of the American Mathematical Society, 91 (1984), no. 3, 373-376.\n[7] Z. Buczolich, Irregular 1-sets on the graphs of continuous functions, Acta Math. Hungar. 121\n(2008), 371\u2013393.\n[8] H. Delange, Sur la fonction sommatoire de la fonction \"somme des chiffres\", Enseign. Math. 21\n(1975), 31\u201347.\n[9] L. C. Evans and R. G. Gariepy, Measure Theory and Fine Properties of Functions, CRC Press:\nBoca Raton 1992.\n[10] K. Falconer, The Geometry of Fractal Sets, Cambridge University Press: Cambridge 1985.\n[11] K. Falconer, Fractal Geometry: Mathematical Foundations and Applications, Second Edition,\nJohn Wiley & Sons: New York 2003.\n[12] W. Feller, An Introduction to Probability Theory and its Applications, Vol I. Third Edition, John\nWiley & Sons, New York 1968.\n[13] P. R. Halmos, Measure Theory, Van Nostrand: Princeton NJ 1950.\n[14] M. Hata and M. Yamaguti, The Takagi function and its generalization, Japan J. Appl. Math. 1\n(1984), 183\u2013199.\n[15] S. Jaffard, Multifractal formalism for functions part I: results valid for all functions, SIAM J.\nMath. Anal. 28 (1997), No. 4, 944-970.\n[16] S. Jaffard, Multifractal formalism for functions part II: Self-similar functions, SIAM J. Math.\nAnal. 28 (1997), No. 4, 971-998.\n[17] D. E. Knuth, The Art of Computer Programming, Vol. 4, Fascicle 3. Generating all Combinations\nand Partitions, Addison-Wesley: Upper Saddle River, NJ 2005.\n[18] J. C. Lagarias, The Takagi function and its properties, paper in preparation.\n[19] J. C. Lagarias and Z. Maddock, Level sets of the Takagi function: Local level sets, preprint.\n22\n\n\f[20] Z. Maddock, Level sets of the Takagi function: Hausdorff dimension, Monatshefte f\u00fcr Math. 160\n(2010), 167\u2013186.\n[21] R. D. Mauldin and S. C. Williams, On the Hausdorff dimension of some graphs, Trans. Amer.\nMath. Soc. 298, No. 2 (1986), 793\u2013803.\n[22] L. Mirsky, A theorem on representation of integers in the scale of r, Scripta Math. 15 (1949),\n11-12.\n[23] T. Takagi, A simple example of the continuous function without derivative, Proceedings of the\nPhysico-Mathematical Society of Japan, ser II, Vol 1. 1903, pp 176-177. [Also: Collected Papers\nof Teiji Takagi (S. Iyanaga, Ed), Springer Verlag, New York 1990].\n[24] J. R. Trollope, An explicit expression for binary digital sums, Math. Mag. 41 (1968), 21\u201325.\n[25] M. Yamaguti, M. Hata and J. Kigami, Mathematics of Fractals, Translations of Mathematical\nMonographs, No. 167, American Mathematical Society: Providence, RI 1997. (Translation from\nJapanese of 1993 original.)\nJeffrey C. Lagarias\nDept. of Mathematics\nThe University of Michigan\nAnn Arbor, MI 48109-1043\nemail: lagarias@umich.edu\nZachary Maddock\nDept. of Mathematics\nColumbia University\nNew York, NY 10027\nemail: maddockz@math.columbia.edu\n\n23\n\n\f"}