{"id": "http://arxiv.org/abs/math/0307064v1", "guidislink": true, "updated": "2003-07-04T16:02:58Z", "updated_parsed": [2003, 7, 4, 16, 2, 58, 4, 185, 0], "published": "2003-07-04T16:02:58Z", "published_parsed": [2003, 7, 4, 16, 2, 58, 4, 185, 0], "title": "The Number of Hierarchical Orderings", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0307021%2Cmath%2F0307204%2Cmath%2F0307305%2Cmath%2F0307062%2Cmath%2F0307126%2Cmath%2F0307141%2Cmath%2F0307125%2Cmath%2F0307290%2Cmath%2F0307299%2Cmath%2F0307034%2Cmath%2F0307250%2Cmath%2F0307035%2Cmath%2F0307096%2Cmath%2F0307131%2Cmath%2F0307283%2Cmath%2F0307119%2Cmath%2F0307120%2Cmath%2F0307391%2Cmath%2F0307028%2Cmath%2F0307186%2Cmath%2F0307044%2Cmath%2F0307087%2Cmath%2F0307037%2Cmath%2F0307128%2Cmath%2F0307195%2Cmath%2F0307211%2Cmath%2F0307364%2Cmath%2F0307237%2Cmath%2F0307076%2Cmath%2F0307293%2Cmath%2F0307108%2Cmath%2F0307270%2Cmath%2F0307205%2Cmath%2F0307001%2Cmath%2F0307324%2Cmath%2F0307300%2Cmath%2F0307307%2Cmath%2F0307389%2Cmath%2F0307054%2Cmath%2F0307218%2Cmath%2F0307222%2Cmath%2F0307135%2Cmath%2F0307082%2Cmath%2F0307064%2Cmath%2F0307174%2Cmath%2F0307352%2Cmath%2F0307333%2Cmath%2F0307221%2Cmath%2F0307057%2Cmath%2F0307155%2Cmath%2F0307220%2Cmath%2F0307242%2Cmath%2F0307264%2Cmath%2F0307014%2Cmath%2F0307369%2Cmath%2F0307052%2Cmath%2F0307112%2Cmath%2F0307041%2Cmath%2F0307336%2Cmath%2F0307345%2Cmath%2F0307353%2Cmath%2F0307145%2Cmath%2F0307282%2Cmath%2F0307169%2Cmath%2F0307003%2Cmath%2F0307196%2Cmath%2F0307060%2Cmath%2F0307374%2Cmath%2F0502362%2Cmath%2F0502370%2Cmath%2F0502392%2Cmath%2F0502551%2Cmath%2F0502341%2Cmath%2F0502321%2Cmath%2F0502499%2Cmath%2F0502456%2Cmath%2F0502035%2Cmath%2F0502501%2Cmath%2F0502012%2Cmath%2F0502457%2Cmath%2F0502220%2Cmath%2F0502165%2Cmath%2F0502468%2Cmath%2F0502152%2Cmath%2F0502078%2Cmath%2F0502293%2Cmath%2F0502263%2Cmath%2F0502442%2Cmath%2F0502292%2Cmath%2F0502534%2Cmath%2F0502011%2Cmath%2F0502450%2Cmath%2F0502550%2Cmath%2F0502453%2Cmath%2F0502046%2Cmath%2F0502253%2Cmath%2F0502087%2Cmath%2F0502073%2Cmath%2F0502479%2Cmath%2F0502510%2Cmath%2F0502390&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "The Number of Hierarchical Orderings"}, "summary": "An ordered set-partition (or preferential arrangement) of n labeled elements\nrepresents a single ``hierarchy''; these are enumerated by the ordered Bell\nnumbers. In this note we determine the number of ``hierarchical orderings'' or\n``societies'', where the n elements are first partitioned into m <= n subsets\nand a hierarchy is specified for each subset. We also consider the unlabeled\ncase, where the ordered Bell numbers are replaced by the composition numbers.\nIf there is only a single hierarchy, we show that the average rank of an\nelement is asymptotic to n/(4 log 2) in the labeled case and to n/4 in the\nunlabeled case.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0307021%2Cmath%2F0307204%2Cmath%2F0307305%2Cmath%2F0307062%2Cmath%2F0307126%2Cmath%2F0307141%2Cmath%2F0307125%2Cmath%2F0307290%2Cmath%2F0307299%2Cmath%2F0307034%2Cmath%2F0307250%2Cmath%2F0307035%2Cmath%2F0307096%2Cmath%2F0307131%2Cmath%2F0307283%2Cmath%2F0307119%2Cmath%2F0307120%2Cmath%2F0307391%2Cmath%2F0307028%2Cmath%2F0307186%2Cmath%2F0307044%2Cmath%2F0307087%2Cmath%2F0307037%2Cmath%2F0307128%2Cmath%2F0307195%2Cmath%2F0307211%2Cmath%2F0307364%2Cmath%2F0307237%2Cmath%2F0307076%2Cmath%2F0307293%2Cmath%2F0307108%2Cmath%2F0307270%2Cmath%2F0307205%2Cmath%2F0307001%2Cmath%2F0307324%2Cmath%2F0307300%2Cmath%2F0307307%2Cmath%2F0307389%2Cmath%2F0307054%2Cmath%2F0307218%2Cmath%2F0307222%2Cmath%2F0307135%2Cmath%2F0307082%2Cmath%2F0307064%2Cmath%2F0307174%2Cmath%2F0307352%2Cmath%2F0307333%2Cmath%2F0307221%2Cmath%2F0307057%2Cmath%2F0307155%2Cmath%2F0307220%2Cmath%2F0307242%2Cmath%2F0307264%2Cmath%2F0307014%2Cmath%2F0307369%2Cmath%2F0307052%2Cmath%2F0307112%2Cmath%2F0307041%2Cmath%2F0307336%2Cmath%2F0307345%2Cmath%2F0307353%2Cmath%2F0307145%2Cmath%2F0307282%2Cmath%2F0307169%2Cmath%2F0307003%2Cmath%2F0307196%2Cmath%2F0307060%2Cmath%2F0307374%2Cmath%2F0502362%2Cmath%2F0502370%2Cmath%2F0502392%2Cmath%2F0502551%2Cmath%2F0502341%2Cmath%2F0502321%2Cmath%2F0502499%2Cmath%2F0502456%2Cmath%2F0502035%2Cmath%2F0502501%2Cmath%2F0502012%2Cmath%2F0502457%2Cmath%2F0502220%2Cmath%2F0502165%2Cmath%2F0502468%2Cmath%2F0502152%2Cmath%2F0502078%2Cmath%2F0502293%2Cmath%2F0502263%2Cmath%2F0502442%2Cmath%2F0502292%2Cmath%2F0502534%2Cmath%2F0502011%2Cmath%2F0502450%2Cmath%2F0502550%2Cmath%2F0502453%2Cmath%2F0502046%2Cmath%2F0502253%2Cmath%2F0502087%2Cmath%2F0502073%2Cmath%2F0502479%2Cmath%2F0502510%2Cmath%2F0502390&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "An ordered set-partition (or preferential arrangement) of n labeled elements\nrepresents a single ``hierarchy''; these are enumerated by the ordered Bell\nnumbers. In this note we determine the number of ``hierarchical orderings'' or\n``societies'', where the n elements are first partitioned into m <= n subsets\nand a hierarchy is specified for each subset. We also consider the unlabeled\ncase, where the ordered Bell numbers are replaced by the composition numbers.\nIf there is only a single hierarchy, we show that the average rank of an\nelement is asymptotic to n/(4 log 2) in the labeled case and to n/4 in the\nunlabeled case."}, "authors": ["N. J. A. Sloane", "Thomas Wieder"], "author_detail": {"name": "Thomas Wieder"}, "author": "Thomas Wieder", "arxiv_comment": "7 pages", "links": [{"href": "http://arxiv.org/abs/math/0307064v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0307064v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.CO", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.CO", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "cs.IT", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.IT", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "06A07", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0307064v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0307064v1", "journal_reference": "Order, 21 (2004), 83-89", "doi": null, "fulltext": "The Number of Hierarchical Orderings\n\narXiv:math/0307064v1 [math.CO] 4 Jul 2003\n\nN. J. A. Sloane\nAT&T Shannon Labs\nFlorham Park, NJ 07932\u20130971, USA\n(njas@research.att.com, http://www.research.att.com/\u223cnjas)\nThomas Wieder\nDarmstadt University of Technology\nInstitute for Materials Science\nD\u201364287 Darmstadt, Germany\n(thomas.wieder@epost.de, http://homepages.tu-darmstadt.de/\u223cwieder)\n\nAbstract\nAn ordered set-partition (or preferential arrangement) of n labeled elements represents\na single \"hierarchy\"; these are enumerated by the ordered Bell numbers. In this note we\ndetermine the number of \"hierarchical orderings\" or \"societies\", where the n elements are first\npartitioned into m \u2264 n subsets and a hierarchy is specified for each subset. We also consider\nthe unlabeled case, where the ordered Bell numbers are replaced by the composition numbers.\nIf there is only a single hierarchy, we show that the average rank of an element is asymptotic\nto n/(4 log 2) in the labeled case and to n/4 in the unlabeled case.\nKeywords: ordered set-partition, preferential arrangement, hierarchical ordering, society\nAMS 2000 Classification: Primary 06A07\n\n1\n\nIntroduction\n\nSuppose we are given a set S of n labeled elements (or \"individuals\"). The number of ordered\nset-partitions (or \"hierarchies\") on S is given by the ordered Bell number Bn (see sequence\nA670 in [10] for properties and references). A hierarchical ordering or society on S is specified\nby first distributing the elements into m \u2264 n unlabeled and nonempty subsets, and forming\nan ordered set-partition in each subset. In Section 2 we will determine the number of different\nstructures of this type. Section 3 discusses the analogous question in the unlabeled case, when\nthe elements are indistinguishable.\nThe original motivation for this work was to try to describe the structure of a \"typical\"\nsociety. Of course Sections 2 and 3 just enumerate them. However, in Section 4 we consider\nthe distribution of ranks in a random selection of a single hierarchy, in both the labeled and\nunlabeled cases.\nStructures of the kind considered here were discussed in a classic combinatorics paper by\nMotzkin [6]. In his terminology, the labeled structures in Section 2 would be called \"sets of\nlists of sets\", and the unlabeled structures in Section 3 \"sets of lists of numbers\".\u2217\n\u2217\n\nThe Maple package combstruct [5] makes it easy to generate such structures. For example, the labeled\n\n\f2\n\nThe labeled case\n\nLet Hn denote the number of possibleP\nhierarchical orderings or societies, with exponential\ngenerating function (or e.g.f.) H(x) = n\u22650 Hn xn /n!. An explicit formula for H(x) follows\nfrom a standard application of the exponential formula in combinatorics.\nTheorem 1\nH(x) = exp(B(x) \u2212 1) ,\n\n(1)\n\nwhere B(x) = 1/(2 \u2212 ex ) is the e.g.f. for the ordered Bell numbers.\nProof. This is immediate from (for example) [11, Cor. 3.4.1], or [2, Chap. 1.4, p. 46].\nThe first few values Hn for n = 0, 1, 2, . . . are 1, 1, 4, 23, 173, 1602, 17575, 222497, 3188806,\n50988405, . . . (this is now sequence A75729 in [10]). Table I illustrates the case n = 3.\nSeveral properties can be deduced from Theorem 1.\n(i) By logarithmic differentiation of (1) (cf. [11, Chap. 1, p. 22]) we obtain a recurrence\nHn =\n\n\u0013\nn \u0012\nX\nn\u22121\nk=1\n\nk\u22121\n\nBk Hn\u2212k .\n\n(ii) Expanding the right-hand side of (1) leads to an explicit formula:\nQ\nm\nX\nn! nj=1 Bj j\nQ\nHn =\nn\nmj ,\nj=1 mj ! (j!)\n\n(2)\n\n(3)\n\n(m1 ,m2 ,...,mn )\n\nP\nwhere the sum is over all (m1 , m2 , . . . , mn ) such that nj=1 jmj = n; that is, mj is the number\nof subsets of S containing j elements, for j = 1, . . . , n.\nWhen n = 6, for example,\n6!\n6!\n6!\n6!\n6!\n4 31 +\n2 2\n3\n3\n1\nH6 = 6!(1!)\n6 1 + 4!1!(1!)4 (2!)1 1\n2!2!(1!)2 (2!)2 1 3 + 3!(2!)3 3 + 3!1!(1!)3 (3!)1 1 13 +\n6!\n11 31\n1!1!1!(1!)1 (2!)1 (3!)1\n6!\n46831 = 17575.\n1!(6!)1\n\n6!\n6!\n6!\n6!\n2\n2\n1\n1\n1\n1\n1\n131 + 2!1!(3!)\n2 13 + 2!1!(1!)2 (4!)1 1 75 + 1!1!(2!)1 (4!)1 3 75 + 1!1!(1!)1 (5!)1 1 541 +\n\n(iii) The e.g.f. satisfies the differential equation\nH \u2032 (x)\n\n(2 \u2212 exp(x))2\n= H(x) .\nexp(x)\n\n(iv) Asymptotic behavior. The e.g.f. has an essential singularity at x = log 2. The\nasymptotics are sufficiently complicated that we sought computer assistance. Salvy's Maple\npackage gdev [5], [9] is specifically designed for this purpose. The result, after simplification,\nis that\n\u221a\nn! e 2n/ log 2\nas n \u2192 \u221e ,\n(4)\nHn \u223c\nC 1/4 n3/4 (log 2)n\nstructures in Section 2 are defined by the specification\n[H, {H = Set(Sequence(Set(Z, card >= 1), card >= 1))}, labeled].\n[10] now contains the sequences enumerating all such Motzkin-type structures in which the specification involves\nup to three occurrences of Set and Sequence.\n\n2\n\n\fTable I: For n = 3 elements there are 23 hierarchical orderings into at most three different\nsubsets. The subsets are separated by bars, and the hierarchy within a subset is indicated by\nthe vertical arrangement.\n\n123\n\n1\n23\n\n3\n12\n\n2\n31\n\n31\n2\n\n23\n1\n\n12\n3\n\n1\n2\n3\n\n3\n1\n2\n\n2\n3\n1\n\n3\n2\n1\n\n2\n1\n3\n\n1\n3\n2\n\n12\n\n1\n2\n\n3\n2\n\n3\n\n31\n\n3\n\n3\n1\n\n1\n\n1\n3\n\n2\n\n1 2 3\n\n3\n\n23\n\n1\n\n2\n\n2\n3\n\n1\n\n2\n\n2\n1\n\n3\n\n\fwhere\n\n1\n) log 2 = 1038.97 . . . .\nlog 2\n\nC = 32 \u03c0 2 exp(3 \u2212\nThis implies that\n\nlog Hn \u223c n log n \u2212 n(1 + log log 2) +\nFor comparison, Bn satisfies\n\nr\n\n2n\n+ O(log n) .\nlog 2\n\nn!\n,\n2 (log 2)n+1\n\nBn \u223c\n\n(5)\n\nlog Bn \u223c n log n \u2212 n(1 + log log 2) + O(log n) .\nis\n\nBy iterating Theorem 1 we can also count hierarchies of hierarchical orderings. The e.g.f.\n\u0013\n\u0013\n\u0012\n\u0012\n1\n\u22121 \u22121 ,\n(6)\nexp exp\n2 \u2212 exp(x)\n\nand the first few terms are 1, 1, 6, 52, 588, 8174, 134537, 2554647, 54909468, 1316675221, . . . (sequence A75756 in [10]).\n\n3\n\nThe unlabeled case\n\nIf the initial n elements are unlabeled, ordered set-partitions are called \"compositions\" of n,\nand their number is 2n\u22121 [8, p. 124]. To obtain a hierarchical ordering we partition the\nelements into m \u2264 n unlabeled and nonempty subsets, and form a composition of each subset.\nLet Un denote theP\nnumber of such hierarchical orderings, with ordinary generating function\n(or o.g.f.) U (x) = n\u22650 Un xn .\nTheorem 2\nU (x) =\n\n1\n.\n(1 \u2212 xj )2j\u22121\nj\u22651\nY\n\n(7)\n\nProof. This is the unlabeled analogue of Theorem 1. If an , n \u2265 1, is the number of n-element\nobjects with a certain property, then bn , the number of disjoint unions of such objects with a\ntotal of n elements, where the order of the components is unimportant, is given by\n1+\n\n\u221e\nX\n\nbn x\n\nn\n\n=\n\nn=1\n\n\u221e\nY\n\n(1 \u2212 xj )\u2212aj\n\nj=1\n\n(see for example [3, p. 91]).\nThe first few values Un are 1, 1, 3, 7, 18, 42, 104, 244, 585, 1373, . . . (sequence A34691 in [10]).\nWhen n = 3, for example, the H3 = 23 hierarchical orderings in Table I reduce to U3 = 7 when\nthe labels are removed.\n\n4\n\n\fProperties. (i) Logarithmic differentiation of (7) leads to a recurrence:\nUn =\n\nn\nX\n1X\n\u03b1k Un\u2212k , where \u03b1k =\nd2d\u22121 .\nn\nk=1\n\n(8)\n\nd|k\n\n(ii) It is not so straightforward to find the asymptotic behavior in this case. This is to be\nexpected, since the generating function for the number of partitions of n has a similar form to\n(7). Also, (7) does not belong to the family of generalized partition functions considered by\nMeinardus and discussed in [1, Chap. 7]. However, the saddle point method applies.\n\nTheorem 3\n\u221a\n\nUn\nProof.\n\n2n e 2n\n\u223c \u221a\nas n \u2192 \u221e .\n2\u03c0 23/4 e1/4 n3/4\n\n(9)\n\nWe have\nlog U (x)\n\n=\n\n\u221e X\n\u221e\nX\n2n\u22121 xmn\nm\nn=1 m=1\n\n=\n\n\u221e\nX\n\nxN\n\nN =1\n\nX d 2d\u22121\nd|N\n\nN\n\n,\n\nthe interchange of summations being justified since all terms are positive, so\nlog U (x) =\n\n\u221e\nX\nk=1\n\nxk\n.\n1 \u2212 2xk\n\n(10)\n\nThis has poles at 2\u22121 , 2\u22121/2 , 2\u22121/3 , . . . , and the radius of convergence is 1/2. The pole at\nx = 1/2 dominates, and we apply the saddle-point method as in [7, \u00a712]. The saddle point is\nat x = rn , the solution to\nU \u2032 (rn )\nrn\n= n,\nU (rn )\nwhich is\nrn =\n\n1 \u221a\n1\n1\n8n + 1 +\n\u2212\n+ O(n\u22123/2 ) .\n2 8n\n8n\n\nThen [7, Eq. (12.9)] leads to (9).\n\n4\n\nThe structure of a random hierarchy\n\nIn this section we consider the case of a single (labeled or unlabeled) hierarchy. The elements\nat the bottom of the hierarchy will be said to have rank 1, those at the next level rank 2, and\nso on. The maximal rank in a hierarchy is its height.\nSuppose there are n labeled elements. Let X be a hierarchy chosen at\brandom from the Bn\npossibilities, and let x \u2208 X be a randomly chosen element. There are h! nh ways that X can\n5\n\n\fhave height h, where\n44]), and indeed\n\n\bn\nh\n\nis a Stirling number of the second kind (cf. [4, Chap. 7, Problem\nBn =\n\nn\nX\n\nh!\n\nh=0\n\nnno\nh\n\n.\n\nGiven that X has height h, x \u2208 X is equally likely to have any rank from 1 to r. It follows\nthat the probability that a randomly chosen x has rank r is\n\bn\nn\nn\nnno\nX\n1 i! i\n1 X\n.\n(11)\n(i \u2212 1)!\nPn,r =\n=\ni Bn\nBn\ni\ni=r\n\nThe average rank is\nan =\n\nn\nX\n\ni=r\n\nrPn,r =\n\nr=1\n\nn\nnno\n1 X\n.\n(i + 1)!\n2Bn\ni\n\n(12)\n\ni=1\n\nThe numbers an Bn , n = 0, 1, . . ., have e.g.f.\nn\n\u221e\nX\n1 (ex \u2212 1)(ex \u2212 3)\nxn X (i + 1)! n n o\n= \u2212\n,\ni\nn!\n2\n2\n(ex \u2212 2)2\n\nn=0\n\ni=1\n\nafter some simplification, using standard properties of Stirling numbers (cf. [4, Table 351]).\nThis implies\nn\nas n \u2192 \u221e .\n(13)\nan Bn \u223c n!\n8(log 2)n+2\nCombining this with (5) we find that the average rank is asymptotic to\nn\n= 0.36067 . . . n as n \u2192 \u221e .\n4 log 2\n\n(14)\n\nIn the unlabeled case, if one of the 2n\u22121 compositions of n is chosen at random, X (say),\nand x \u2208 X is picked at random, one can show that the probability that x has rank r is\nn \u0010 \u0011\nX\n1\nn\n,\nn\u22121\nn2\ni\n\n(15)\n\ni=r\n\nand the average rank is (n + 3)/4. Ranks are higher in the labeled case.\nAcknowledgements We thank Jeffrey Lagarias and Andrew Odlyzko for helpful discussions.\nT.W. thanks the Mathematics Department of the University Kassel for providing access to their\ncomputer pool.\n\nReferences\n[1] G. E. Andrews, The Theory of Partitions, Addison-Wesley, Reading, MA, 1976.\n[2] F. Bergson, G. Labelle, P. Leroux, Combinatorical Species and Tree-like Structures, Encyclopedia of Mathematics and its Applications, Vol. 67, Cambridge University Press,\nCambridge, 1998.\n6\n\n\f[3] P. J. Cameron, Some sequences of integers, Discrete Math., 75 (1989), 89\u2013102.\n[4] R. L. Graham, D. E. Knuth and O. Patashnik, Concrete Mathematics, Addison-Wesley,\nReading, MA, 1994, 2nd edition.\n[5] INRIA Algorithms Project, Algolib: The Algorithms Project's Library, published electronically at pauillac.inria.fr/algo/libraries/, 2003.\n[6] T. S. Motzkin, Sorting numbers for cylinders and other classification numbers, pp. 167\u2013\n176 of T. S. Motzkin, ed., Combinatorics, Proc. Symp. Pure Math. 19, Amer. Math. Soc.,\nProvidence, RI, 1971.\n[7] A. M. Odlyzko, Asymptotic enumeration methods, pp. 1063\u20131229 of R. L. Graham, M.\nGro\u00f6tschel and L. Lov\u00e1sz, eds., Handbook of Combinatorics, Elsevier, Amsterdam and\nMIT Press, Cambridge, MA, 1995, Vol. 2.\n[8] J. Riordan, An Introduction to Combinatorial Analysis, Wiley, NY, 1958.\n[9] B. Salvy, Examples of automatic asymptotic expansions, Report 114, Institut National\nde Recherche en Informatique et en Automatique, 1989.\n[10] N. J. A. Sloane, The On-Line Encyclopedia of Integer Sequences, published electronically\nat www.research.att.com/\u223cnjas/sequences/, 2003.\n[11] H. S. Wilf, Generatingfunctionology, Academic Press, San Diego, 1994, 2nd edition.\n\n7\n\n\f"}