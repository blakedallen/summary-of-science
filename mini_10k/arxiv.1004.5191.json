{"id": "http://arxiv.org/abs/1004.5191v4", "guidislink": true, "updated": "2013-02-13T14:07:50Z", "updated_parsed": [2013, 2, 13, 14, 7, 50, 2, 44, 0], "published": "2010-04-29T06:33:05Z", "published_parsed": [2010, 4, 29, 6, 33, 5, 3, 119, 0], "title": "An Exact Connection between two Solvable SDEs and a Nonlinear Utility\n  Stochastic PDE", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1004.5400%2C1004.0773%2C1004.0997%2C1004.5206%2C1004.2569%2C1004.2803%2C1004.5095%2C1004.1185%2C1004.2208%2C1004.5297%2C1004.0053%2C1004.4029%2C1004.4324%2C1004.3049%2C1004.2063%2C1004.0780%2C1004.2549%2C1004.2338%2C1004.5179%2C1004.1382%2C1004.2125%2C1004.2725%2C1004.5170%2C1004.5191%2C1004.3972%2C1004.2876%2C1004.4476%2C1004.1455%2C1004.1838%2C1004.4098%2C1004.5327%2C1004.0300%2C1004.1741%2C1004.5287%2C1004.1483%2C1004.5271%2C1004.0381%2C1004.5555%2C1004.0888%2C1004.1255%2C1004.5317%2C1004.2570%2C1004.5101%2C1004.0062%2C1004.2106%2C1004.0810%2C1004.0070%2C1004.3107%2C1004.1690%2C1004.2365%2C1004.2623%2C1004.2600%2C1004.2908%2C1004.0788%2C1004.3927%2C1004.4930%2C1004.1558%2C1004.5144%2C1004.0037%2C1004.2051%2C1004.4053%2C1004.4992%2C1004.0858%2C1004.4115%2C1004.1993%2C1004.0392%2C1004.2520%2C1004.0382%2C1004.4778%2C1004.5472%2C1004.0004%2C1004.4087%2C1004.3962%2C1004.4814%2C1004.0113%2C1004.2726%2C1004.1539%2C1004.5174%2C1004.0152%2C1004.2859%2C1004.1107%2C1004.1896%2C1004.3833%2C1004.2897%2C1004.4034%2C1004.4338%2C1004.1978%2C1004.2144%2C1004.1737%2C1004.1923%2C1004.4416%2C1004.3965%2C1004.0980%2C1004.0534%2C1004.2685%2C1004.2079%2C1004.1313%2C1004.5589%2C1004.4507%2C1004.4912%2C1004.4811&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "An Exact Connection between two Solvable SDEs and a Nonlinear Utility\n  Stochastic PDE"}, "summary": "Motivated by the work of Musiela and Zariphopoulou \\cite{zar-03}, we study\nthe It\\^o random fields which are utility functions $U(t,x)$ for any\n$(\\omega,t)$. The main tool is the marginal utility $U_x(t,x)$ and its inverse\nexpressed as the opposite of the derivative of the Fenchel conjuguate\n$\\tU(t,y)$. Under regularity assumptions, we associate a $SDE(\\mu, \\sigma)$ and\nits adjoint SPDE$(\\mu, \\sigma)$ in divergence form whose $U_x(t,x)$ and its\ninverse $-\\tU_y(t,y)$ are monotonic solutions. More generally, special\nattention is paid to rigorous justification of the dynamics of inverse flow of\nSDE. So that, we are able to extend to the solution of similar SPDEs the\ndecomposition based on the solutions of two SDEs and their inverses. The second\npart is concerned with forward utilities, consistent with a given incomplete\nfinancial market, that can be observed but given exogenously to the investor.\nAs in \\cite{zar-03}, market dynamics are considered in an equilibrium state, so\nthat the investor becomes indifferent to any action she can take in such a\nmarket. After having made explicit the constraints induced on the local\ncharacteristics of consistent utility and its conjugate, we focus on the\nmarginal utility SPDE by showing that it belongs to the previous family of\nSPDEs. The associated two SDE's are related to the optimal wealth and the\noptimal state price density, given a pathwise explicit representation of the\nmarginal utility. This new approach addresses several issues with a new\nperspective: dynamic programming principle, risk tolerance properties, inverse\nproblems. Some examples and applications are given in the last section.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1004.5400%2C1004.0773%2C1004.0997%2C1004.5206%2C1004.2569%2C1004.2803%2C1004.5095%2C1004.1185%2C1004.2208%2C1004.5297%2C1004.0053%2C1004.4029%2C1004.4324%2C1004.3049%2C1004.2063%2C1004.0780%2C1004.2549%2C1004.2338%2C1004.5179%2C1004.1382%2C1004.2125%2C1004.2725%2C1004.5170%2C1004.5191%2C1004.3972%2C1004.2876%2C1004.4476%2C1004.1455%2C1004.1838%2C1004.4098%2C1004.5327%2C1004.0300%2C1004.1741%2C1004.5287%2C1004.1483%2C1004.5271%2C1004.0381%2C1004.5555%2C1004.0888%2C1004.1255%2C1004.5317%2C1004.2570%2C1004.5101%2C1004.0062%2C1004.2106%2C1004.0810%2C1004.0070%2C1004.3107%2C1004.1690%2C1004.2365%2C1004.2623%2C1004.2600%2C1004.2908%2C1004.0788%2C1004.3927%2C1004.4930%2C1004.1558%2C1004.5144%2C1004.0037%2C1004.2051%2C1004.4053%2C1004.4992%2C1004.0858%2C1004.4115%2C1004.1993%2C1004.0392%2C1004.2520%2C1004.0382%2C1004.4778%2C1004.5472%2C1004.0004%2C1004.4087%2C1004.3962%2C1004.4814%2C1004.0113%2C1004.2726%2C1004.1539%2C1004.5174%2C1004.0152%2C1004.2859%2C1004.1107%2C1004.1896%2C1004.3833%2C1004.2897%2C1004.4034%2C1004.4338%2C1004.1978%2C1004.2144%2C1004.1737%2C1004.1923%2C1004.4416%2C1004.3965%2C1004.0980%2C1004.0534%2C1004.2685%2C1004.2079%2C1004.1313%2C1004.5589%2C1004.4507%2C1004.4912%2C1004.4811&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Motivated by the work of Musiela and Zariphopoulou \\cite{zar-03}, we study\nthe It\\^o random fields which are utility functions $U(t,x)$ for any\n$(\\omega,t)$. The main tool is the marginal utility $U_x(t,x)$ and its inverse\nexpressed as the opposite of the derivative of the Fenchel conjuguate\n$\\tU(t,y)$. Under regularity assumptions, we associate a $SDE(\\mu, \\sigma)$ and\nits adjoint SPDE$(\\mu, \\sigma)$ in divergence form whose $U_x(t,x)$ and its\ninverse $-\\tU_y(t,y)$ are monotonic solutions. More generally, special\nattention is paid to rigorous justification of the dynamics of inverse flow of\nSDE. So that, we are able to extend to the solution of similar SPDEs the\ndecomposition based on the solutions of two SDEs and their inverses. The second\npart is concerned with forward utilities, consistent with a given incomplete\nfinancial market, that can be observed but given exogenously to the investor.\nAs in \\cite{zar-03}, market dynamics are considered in an equilibrium state, so\nthat the investor becomes indifferent to any action she can take in such a\nmarket. After having made explicit the constraints induced on the local\ncharacteristics of consistent utility and its conjugate, we focus on the\nmarginal utility SPDE by showing that it belongs to the previous family of\nSPDEs. The associated two SDE's are related to the optimal wealth and the\noptimal state price density, given a pathwise explicit representation of the\nmarginal utility. This new approach addresses several issues with a new\nperspective: dynamic programming principle, risk tolerance properties, inverse\nproblems. Some examples and applications are given in the last section."}, "authors": ["Nicole El Karoui", "Mohamed Mrad"], "author_detail": {"name": "Mohamed Mrad"}, "author": "Mohamed Mrad", "links": [{"href": "http://arxiv.org/abs/1004.5191v4", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1004.5191v4", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1004.5191v4", "affiliation": "CMAP", "arxiv_url": "http://arxiv.org/abs/1004.5191v4", "arxiv_comment": null, "journal_reference": null, "doi": null, "fulltext": "An Exact Connection between two Solvable SDEs and a Nonlinear\nUtility Stochastic PDE\n\narXiv:1004.5191v4 [math.PR] 13 Feb 2013\n\nEl Karoui Nicole,\n\n\u2021\n\n\u2217\u2020\n\nMrad Mohamed\n\n\u00a7\n\nNovember 30, 2012\n\nAbstract\nMotivated by the work of Musiela and Zariphopoulou [24], we study the It\u00f4 random fields\nwhich are utility functions U (t, x) for any (\u03c9, t). The main tool is the marginal utility Ux (t, x) and\ne (t, y). Under\nits inverse expressed as the opposite of the derivative of the Fenchel conjuguate U\nregularity assumptions, we associate a SDE(\u03bc, \u03c3) and its adjoint SPDE(\u03bc, \u03c3) in divergence form\ney (t, y) are monotonic solutions. More generally, special attention\nwhose Ux (t, x) and its inverse \u2212U\nis paid to rigorous justification of the dynamics of inverse flow of SDE. So that, we are able to\nextend to the solution of similar SPDEs the decomposition based on the solutions of two SDEs\nand their inverses.\nThe second part is concerned with forward utilities, consistent with a given incomplete financial\nmarket, that can be observed but given exogenously to the investor. As in [24], market dynamics are considered in an equilibrium state, so that the investor becomes indifferent to any action\nshe can take in such a market. After having made explicit the constraints induced on the local\ncharacteristics of consistent utility and its conjugate, we focus on the marginal utility SPDE by\nshowing that it belongs to the previous family of SPDEs. The associated two SDE's are related\nto the optimal wealth and the optimal state price density, given a pathwise explicit representation of the marginal utility. This new approach addresses several issues with a new perspective:\ndynamic programming principle, risk tolerance properties, inverse problems. Some examples and\napplications are given in the last section\n\nIntroduction\nThe concept of forward dynamic utility has been introduced by M. Musiela and T. Zariphopoulou\n(2003-2008 [24, 25, 27, 29]), to model possible changes over the time of individual preferences\n\u2217\n\nWith the financial support of the \"Chaire Risque Financier of the Fondation du Risque\", the \" Chaire D\u00e9riv\u00e9s du\n\nfutur\" of the \"F\u00e9d\u00e9ration des banques Fran\u00e7aises\".\n\u2020\nKeywords: Forward utility, performance criteria, horizon-unbiased utility, consistent utility, progressive utility,\nportfolio optimization, optimal portfolio, duality, minimal martingale measure, stochastic flows, stochastic partial differential equations.\n\u2021\n\u00a7\n\nLPMA, UMR CNRS 6632, Universit\u00e9 Pierre et Marie Curie, CMAP, UMR CNRS 7641, \u00c9cole Polytechnique\nCMAP, UMR CNRS 7641, \u00c9cole Polytechnique, LAGA, UMR CNRS 7539, Universit\u00e9 Paris 13\n\n1\n\n\fof an agent. The economic agent will adjust its preferences in uncertain universe based on the\ninformation that is revealed over time and represented by a filtration F = (Ft )t\u22650 , defined on\nthe probability space (\u03a9, P, A). In contrast to the classical literature, there is no pre-specified\ntrading horizon at the end of which the utility datum is assigned. Rather, the agent starts with\ntoday's specification of its utility, U (0, x) = u(x), and then builds the process U (t, x) for t > 0 in\nrelation to the information given by (Ft )t\u22650 . This, together with the choice of an initial utility,\ndistinguishes forward dynamic utility from recursive utility first introduced by Duffie and Epstein,\n[4], (see also [7]) for which the aggregator can be specified exogenously and the value function is\nrecovered backward in time. Dynamic utility may be also defined in relation with a exogenous\ninvestment universe X , described as an incomplete market whose the parameters are known by\nthe investor. Following [24], market dynamics are considered in an equilibrium state, so that the\ninvestor becomes indifferent to any action she can take in such a market. She is forced to embed\ninto his dynamic utility, structure information describing the equilibrium market dynamics. Such\nX - consistent utilities will be studied in the second part of the paper.\nSuch concept has also been studied by Berrier, Tehranchi and Rogers (2009) [1] and Zitkovic\n[41]. Further works related to this problem are Choulli, Stricker and Jia (2007) [36], Henderson\nand Hobson (2007) [11].\nWe start by introducing the general notion of progressive utility and its Fenchel transform.\nHowever, we restrict our study to positive progressive utility which is a collection of It\u00f4's semimartingales with respect to a d-dimensional Brownian motion W , depending on a spatial parameter\nx \u2208 R+ , also called the wealth. As usual, they are specified through their local (drift, volatility)\ncharacteristics (\u03b2, \u03b3) and their initial condition, a deterministic concave function u, by\ndU (t, x) = \u03b2(t, x)dt + \u03b3(t, x).dWt ,\n\nU (0, x) = u(x).\n\n(0.1)\n\nApart regularity issues, the first question to be solved is to give conditions on the local characteristics (\u03b2, \u03b3), insuring the properties of monotonicity and concavity of the progressive utility U\ndefined by the forward equation (1.1). The problem is equivalent to show that the progressive\nmarginal utility Ux is strictly decreasing and strictly positive, with range (0, \u221e). At this stage,\ne of U whose the opposite of\nit is convenient to introduce the Fenchel conjugate random field U\ne y is the inverse flow of Ux . Following Kunita [19], we introduce sufficient condithe derivative U\ntions implying that Ux is also an It\u00f4 progressive random field, with local characteristics (\u03b2x , \u03b3x ).\n(Theorem 2.2. All regularity issues are presented in details in Section 2.)\nThen we show that the random field Ux is a monotonic with respect to its initial condition,\nstrong solution of a one dimensional stochastic differential equation. The random coefficients of\ney . We give in\nthe SDE(\u03bc, \u03c3) are expressed in terms of the local characteristics \u03b2x and \u03b3x , and \u2212U\nparticular, under some Lipschitz assumptions on SDE's coefficients, a clear answer to the existence,\nmonotonicity, regularity and concavity of random fields defined from (0.1) satisfying the Inada's\nconditions, which until now remained an open question.\ne and its derivative U\ney\nAdditional regularity are need to show that the conjugate random field U\nare also families of It\u00f4's semimartingales, and to identify its local characteristics. The It\u00f4-Ventzel\nformula enables us to carry out computations in a stochastically modulated dynamic framework.\ney (t, y), It\u00f4-Ventzel's formula provides us\nApplied to the random field U and the semimartingale U\n\n2\n\n\fe , and the characterization of U\ney (t, y) as monotonic\ntwo complementary results: the dynamics of U\nsolution of the SPDE generated by the adjoint elliptic operator in divergence form associated with\nthe SDE(\u03bc, \u03c3) satisfied by Ux . A first connection between SDE and SPDE is then established.\nSection 2 is more technical. Based on the reference book of Kunita [19], we provide additional\nresults in both regularity of random fields, and behavior of SDE with local Lipschitz property. The\naim is to provide conditions under which the inverse of a monotonic solution of SDE(\u03bc, \u03c3) (for\ney (t, y)) is an It\u00f4 semimartingale, solution of the second-order SPDE(\u03bc, \u03c3)\ninstance the process \u2212U\n(Theorem 2.5). Conversely, a regular monotonic solution of SPDE(\u03bc, \u03c3) is identified with the\ninverse of the monotonic solution of SDE(\u03bc, \u03c3). The link between SDE and second order SPDE is\nextended to more complex SPDE in the main result of this section, Theorem 2.7.\nIn the second part of the paper, we turn to consistent stochastic utilities, where the preferences\nare no more defined in isolation with a financial market. The dynamics of the market can be\nobserved but are exogenously given to the investor, modulo estimation of the relevant parameters\nby the equilibrium considerations or other procedures. Following [24], market dynamics are considered in an equilibrium state, so that the investor becomes indifferent to any action she can take\nin such a market. But, once characterized, the criterion may be used to solve classical optimization\nproblems as optimal allocation, indifference pricing [33].\nWorking with positive wealth processes X \u03ba in an incomplete market, we define a consistent stochastic utility as a progressive non-negative stochastic utility U (t, x), for which U (t, Xt\u03ba ) is a supermartingale, and a (local) martingale for a certain portfolio called optimal wealth, or optimal\nbenchmark. Section 3 is dedicated to set-up the financial market, and to identify the constraints\ninduced on the local characteristics (\u03b2, \u03b3) of U by the consistency property, using once again the\nIt\u00f4-Ventzel formula. As in the classical Hamilton-Jacobi-Bellman framework, we proceed by verification to establish the dynamics of consistent utilities. Assuming a sufficient constraint on the\ndrift \u03b2 of HJB type, we get the utility SPDE that we investigate in this paper. In particular, we\nstudy the role of the utility risk premium defined by \u03b7 U (t, x) = \u03b3x (t, x)/Ux (t, x). Simultaneously,\nwe go into details on the duality questions and give a characterization of the nonlinear SPDE\ne of U , and its optimal coefficients.\nsatisfied by the progressive convex conjugate U\nOur most original contribution is provided in Section 4, using a characterization of X -consistent\ndynamic utility from its marginal utility. Based on ideas developed in Section 2, we show that,\nunder regularity assumptions on the random field U, Ux is solution of a SPDE(2.9) associated\nwith the optimal coefficients for the wealth and state price density processes. Then, a first result\nshows that under natural assumptions yielding to the existence of strong optimal solution of the\nconjugate problem Yt\u2217 (y), the only locally Lipschitz SDE(\u03bc\u2217 , \u03c3 \u2217 ) has a monotonic non-explosive\nsolution Xt\u2217 (x). A simple application of Theorem 2.7 yields to the closed form of the marginal\nutility as Ux (t, x) = Yt\u2217 (ux ((Xt\u2217 )\u22121 (x))).\nThen, we consider the converse problem of recovering a dynamic utility coherent with a given\noptimal portfolio. In the classical case, this problem is known in the financial literature as the\n\"inverse\" Merton problem; it has been considered by many authors in particular by H.He and\nC.Huang (1992), [10]. Since the class of dynamic utilities is larger than the class of Markovian\nutilities considered in [10], our problem is easier to solve. Given a monotonic admissible portfolio X, for any regular state price density process Yt (y) and any initial condition ux such that\nV (t, x) = Yt\u2217 (ux ((Xt )\u22121 (x))) is integrable near to 0, is the marginal utility of some consistent dy-\n\n3\n\n\fnamic utility. So, we are able to generate all the consistent utilities with a given optimal portfolio.\nIn Section 4, Theorem 4.1, we establish the most original contribution of this paper. Indeed,\nfrom Theorem 2.7, focusing on the dynamics of the marginal utility Ux , we can read directly and\n\u0001\nwithout difficulties that the process Ux t, Xt\u2217 (x) is equal to the optimal dual state price density\nprocess Y \u2217 (t, ux (x)) with u is the initial utility function. From this dual identity, the idea is very\n\u0001\nsimple and natural: Suppose that the optimal portfolio denoted by Xt\u2217 (x) t is strictly increasing\n\u0001\nwith respect to the initial capital, and denote by X (t, x) t the adapted inverse process, defined by\n\u0001\n\u0001\nXt\u2217 X (t, x) = x then, we can find Ux (t, x) from Ux (t, x) = Yt\u2217 ux (X (t, x)) . Finally we get U by\nintegration. So, we are able to generate all the consistent utilities with a given optimal portfolio.\nWe recover easily the martingale property of the risk tolerance established in [10], in a complete\nmarket. Finally, in Section 5, we close the paper by some openness to other topics and works;\nwe show the stability of the notion of consistent utility by change of numeraire and then, without\nloss of generality, we can consider the martingale market where the portfolios are simple local\nmartingales and the stochastic PDE's are easier to deal with. We also apply our method to the\nspecific example of decreasing consistent utilities (see [1] and [28]) where the volatility vector \u03b3 is\ngiven equal to zero, given a new interpretation of the optimal wealth as solution of sup-convolution\nproblems in random power utilities.\nTo the best of our knowledge, the characterization of strictly concave increasing random fields,\nsatisfying Inada's conditions, from SDEs have neither studied in details nor established in the\nliterature. Moreover, the fully nonlinear utility stochastic PDE's established in this paper and\nsatisfied by forward utilities and their dual have not been established in a general way. Furthermore, there is no general consistent utilities construction proposed in the literature, expect the\ncase of power or exponential type, or decreasing utilities. Another main contribution of this paper\nis a connection between two solvable SDEs and the utility SPDE early established. In particular,\ngiven a volatility vector \u03b3 such that \u03b3x (t, x) = \u2212xUxx \u03ba\u2217t (x) \u2212 Ux (t, x)\u03b7tR + Ux (t, x)\u03bdt\u2217 (Ux (t, x))\n(where \u03b7 R is the market risk prime), we show the existence and uniqueness of a solution to the\nfully nonlinear second order SPDE from that of a pair of SDE's. In any case this, represents an\ninteresting result in the theory of stochastic partial differential equations.\nThe paper is organized as follows, in the next section we give the definition of the It\u00f4 progressive dynamic utilities and focus on the characterization of these concave It\u00f4's random fields\nby establishing a link with SDEs. A special attention is paid to the dynamics of the Fenchel\nconjuguate utility random field. In the following section, we give sufficient conditions ensuring\nconcavity, monotonicity, differentiability both for random fields or for solution of SDE. The dynamics of the inverse of regular solution of SDE(\u03bc, \u03c3) is the first step in the links of SDE and\nSPDE. More complex situations are then studied.\nNext, we introduce the consistent utilities, the market model and the framework of the paper.\nIn Section 3, we provide, simultaneously, the dynamics of consistent utilities and their convex\nconjugate. We establish a closed form for the optimal policies. Thereafter, in Section 4, we\nestablish a fully characterization of the marginal utility. We end by reverse engineering problem\nand some openness to other topics.\n\n4\n\n\f1\n\nProgressive Utility\n\nIn a dynamic and stochastic environment, the classical notion of utility is not flexible enough to help\nus to make good choices in the long run. M.Musiela and T.Zariphopoulou were the first to suggest\nto use instead of the classical criterion the concept of progressive dynamic utility, consistent with\nrespect to a given investment universe in a sense specified in Section 3. The concept of progressive\nutility gives an adaptative way to include new information on environment evolution available to\neconomic agents. Recently, Fritelli [8] introduced very closed notion called stochastic dynamic\nutility, in view of study certainty equivalent. Since these utility functions are stochastic, time\ndependent and moving forward, we consider them as a family of (It\u00f4) semimartingales depending\non a parameter, the wealth of the agent in the economic context.\n\n1.1\n\nDefinition and Properties of Progressive Dynamic Utility\n\nAll stochastic processes are defined on a standard filtered probability space (\u03a9, F, P), where the\nfiltration F = (Ft )t\u22650 is assumed to be right continuous and complete. We first recall some notions\nrelative to stochastic processes depending of a parameter.\n\nGenerality on progressive random fields Stochastic processes in consideration are depending on a parameter, often called spatial parameter. For us, because of economic motivation,\nthis parameter is the wealth of an investor, taking non negative values in R\u2217+ = {x > 0}. Sometimes, we will use the vocabulary of random field theory, and refer to such processes as progressive\nrandom fields. As all random fields considered in the sequel are progressive, we will often omit the\nmention \" progressive\".\n(i) A progressive random field X = {X(t, x); t \u2265 0, x > 0} is a random variable measurable with\nrespect to F\u221e \u2297 B(R+ ) \u2297 B(R\u2217+ ), which is a collection of progressive processes t 7\u2192 X(t, x).\n(ii) A random field X is said to satisfy a property P with respect to x, if there exists N \u2208 F\u221e\nwith P(N ) = 0, such that for any \u03c9 \u2208 N c , and any t \u2265 0, x 7\u2192 X(t, x)(\u03c9) satisfies the property P.\nFor example, X is said to be concave, (resp. increasing) if there exists N \u2208 F\u221e with P(N ) = 0,\nsuch that for any \u03c9 \u2208 N c , and any t \u2265 0 x 7\u2192 X(t, x)(\u03c9) is concave (resp. increasing).\n(iii) A random field X is said to be continuous if there exists N \u2208 F\u221e with P(N ) = 0, such that for\nany \u03c9 \u2208 N c , and any t \u2265 0 x 7\u2192 X(t, x)(\u03c9) is continuous. In general, the existence of continuous\nmodification is based of the Kolmogorov's criterion, that we recall in Section 2.\nA random field X is said to be differentiable if there exists N \u2208 F\u221e with P(N ) = 0, such that for\nany \u03c9 \u2208 N c , and any t \u2265 0 x 7\u2192 X(t, x)(\u03c9) is differentiable ; the derivative denoted Xx (t, x)(\u03c9)\ngenerates the so-called derivative random field Xx . When Xx has a continuous version, X is said\nto be C 1 -regular.\n(iv) A d-dimensional random field X is said to be Lk - locally bounded if for any compact K \u2282]0, \u221e[,\nRT\nthere exists N \u2208 F\u221e with P(N ) = 0, such that for any \u03c9 \u2208 N c , 0 supx\u2208K kX(t, x)kk (\u03c9)dt < \u221e\nfor any T > 0.\nm\nIn the sequel, we are concerned with differentiable random fields said to be Kloc\n-regular (K for\nKunita) in the following sense.\n\n5\n\n\fm\n\nm\nDefinition 1.1. A d-dimensional random field X is said to be Kloc\n(resp. Kloc )-regular if X is\nm\nk\n1\na C -regular random field such that X/x, \u2202x X, k \u2264 m are L (resp. L2 )-locally bounded. Such\nm\nm\nrandom fields are also called of class Kloc\n(resp. Kloc ).\n\nAt this stage, we content ourselves with this definition to carry out calculations in this section;\nmore details are given in the next section.\n\nProgressive utility and its Fenchel conjugate We start with the definition of a progressive utility as progressive random field with concavity property.\nDefinition 1.2 (Progressive Utility). A progressive utility is a continuous progressive random\nfield on R\u2217+ , U = {U (t, x); t \u2265 0, x > 0} such that,\n(i) Utility property: U is strictly concave, strictly increasing, and non negative.\n(ii) Regularity property: U is a C 2 -random field, with continuous first and second derivatives random fields Ux and Uxx .\n(iii) Inada conditions: U goes to 0 when x goes to 0 and the derivative Ux goes to \u221e when\nx goes to 0, and to 0 when x goes to \u221e.\nGiven its importance in convex analysis, we introduce together with any progressive utility\ne (also called conjugate progressive utility (CPU)), that is the Fenchel\nU, its convex conjugate U\nLegendre transform of the convex random field \u2212U(, \u2212.).\n\nDefinition 1.3 (Progressive conjugate utility). The convex conjugate of the progressive utility U\ne defined on R\u2217+ by U\ne = {U\ne (t, y); t \u2265 0, y > 0}, where U\ne (t, y) def\nis the progressive random field U\n=\n\u0001\nmaxx>0,x\u2208Q+ U (t, x) \u2212 x y .\ne is twice continuously differentiable, strictly convex, strictly\n(i) Under Inada condition, U\ne (., 0+ ) = U (+\u221e), U\ne (., +\u221e) = U (0+ ), a.s.\ndecreasing, with U\ne y,\n(ii) The marginal utility Ux is the inverse of the opposite of the marginal conjugate utility U\n\u22121\n+\ne\ne\ne\nthat is Ux (t, .) (y) = \u2212Uy (t, y), with Inada conditions Uy (., 0 ) = \u2212\u221e, Uy (., +\u221e) = 0\n\u0001\ne (t, y) + x y .\n(iii) The bi-dual relation holds true U (t, x) = inf y>0,y\u2208Q+ U\n\u0001\n\u0001\ne (t, y) = U t, \u2212U\ne (t, y) + U\ney (t, y) y, and U (t, x) = U\ne t, Ux (t, x) + x Ux (t, x).\nMoreover U\n\n1.2\n\nIt\u00f4 Progressive Utility and SDE\n\nIn this paper, we focus on continuous progressive utilities U which are a collection of It\u00f4 semimartingales: for any x, U (., x) is a continuous It\u00f4 semimartingale, driven by a n-dimensional\nBrownian motion W = (W 1 , .., W n ) defined on the probability space (\u03a9, F, P). In general, the \u03c3field F0 is assumed to be trivial and F0 - random variables are a.s. constant. We refer to the book\nof H.Kunita [19] and to the next section for all technical results concerning the theory of semimartingale random fields.The assumption of finite dimensional Brownian motion greatly simplifies\nthe theory.\nAs usual, an It\u00f4 random field F defined on R+ is specified through its decomposition F =\nF0 + BF + MF into two random fields, where BF is a finite variation random field B F (t, x) =\nRt F\nRt F\nF\nF\nF\nF\n0 \u03c6 (s, x)ds and M is a martingale random field M (t, x) = 0 \u03c8 (s, x)dWs , where (\u03c6 , \u03c8 ) =\n{(\u03c6F (t, x), \u03c8 F (t, x)); t \u2265 0, x > 0} are the local characteristics of F assumed to be progressive random fields, with values in R and Rn respectively. \u03c6F is called the drift characteristic, and \u03c8 F the\n\n6\n\n\fdiffusion characteristic. For simplicity, we often omit the index F . By convention, an It\u00f4 random\nm\nm\nfield F is said to be a Kloc\n-semimartingale, whenever BF is of class Kloc\n, and MF is of class\nm\nKloc . The reference to Km recall that F is a random field.\nLet us consider an It\u00f4 progressive utility U with initial condition u(x) = U (0, x), and local\ncharacteristics (\u03b2, \u03b3), so that\ndU (t, x) = \u03b2(t, x)dt + \u03b3(t, x).dWt ,\n\nU (0, x) = u(x)\n\n(1.1)\n\nApart regularity issues, the first question before going further is the following:\nHow to express by conditions on the local characteristics (\u03b2, \u03b3) random fields, the properties of\nmonotonicity and concavity of the progressive utility U defined by (1.1)?\nThe problem is equivalent to show that the progressive marginal utility Ux is strictly decreasing\nand strictly positive, with range (0, \u221e). Following Kunita [19], this can be done by assuming that,\n2\n(i) U is of class Kloc\n, which implies in particular (Theorem 2.2 below) that Ux is also an It\u00f4\nprogressive random field, with local characteristics (\u03b2x , \u03b3x ).\n(ii) The random field Ux is a strong solution of a one dimensional stochastic differential equation\n(SDE), with random coefficient, monotonic with respect to its initial condition.\nWe summarize these ideas in the following theorem.\nTheorem 1.1. Let U be an It\u00f4 random field with dynamics\nd U (t, x) = \u03b2(t, x)dt + \u03b3(t, x).dWt ,\n\nU (0, x) = u(x)\n\n(1.2)\n\ne and marginal\n(i) Necessary condition Let U be a progressive utility with conjugate utility U,\n2\ne\nutilities Ux (t, .) and \u2212Uy (t, .). If U is a Kloc -semimartingale, the random field Z. (z) = Ux (., \u2212\u0169y (z))\nis a strictly increasing (in z) solution of the SDE(\u03bc, \u03c3),\n\uf8f1\n\uf8f4\n= \u03bc(t, Zt )dt + \u03c3(t, Zt ) dWt ,\nZ0 = z\n\uf8f2 dZt\n\u0001\ney (t, z) ,\n(1.3)\n\u03bc(t, z) = \u03b2x t, \u2212U\n\u03bc(t, 0) = 0\n\uf8f4\n\u0001\n\uf8f3\ne\n\u03c3(t, 0) = 0\n\u03c3(t, z) := \u03b3x t, \u2212Uy (t, z) ,\n\n(ii) Characterization as primitive of SDE Let consider a SDE(\u03bc\u0302, \u03c3\u0302), dZt = \u03bc\u0302(t, Zt )dt +\n\u03c3\u0302(t, Zt ) dWt , Z0 = z and assume the existence of a strong solution Z. (z), increasing and differentiable in z with range (0, \u221e). Then, for any utility function u such that Z. (ux (x)) is integrable in a\nRx\nneighborhood of x = 0, the primitive U = {U (t, x) = 0 Zt (ux (z))dz, t \u2265 0, x > 0} is a progressive\nutility.\n\n2\nProof. By assumption, from Theorem 2.2 below, U is a Kloc\n-semimartingale implies that Ux is an\nIt\u00f4 semimartingale with local characteristics (\u03b2x , \u03b3x ), i.e., dUx (t, x) = \u03b2x (t, x)dt + \u03b3x (t, x).dWt .\nSince x 7\u2192 U (t, x) is strictly concave and increasing, the marginal utility Ux (t, .) is strictly positive\nand decreasing from \u221e to 0. Consequently x 7\u2192 Ux (t, x) has an inverse which is the opposite\n\u0001\ney (t, .) and \u03c3(t, .) :=\ney (t, .). By denoting \u03bc(t, .) := \u03b2x t, \u2212U\nof the marginal conjugate utility \u2212U\n\u0001\ney (t, .) , it follows that Ux satisfies the following SDE, with initial condition Ux (0, x) =\n\u03b3x t, \u2212U\nux (x)\n\u0001\n\u0001\ndUx (t, x) = \u03bc t, Ux (t, x) dt + \u03c3 t, Ux (t, x) .dWt\n\n7\n\n\fThe change of initial condition from ux (x) into z yields to the definition of the process Zt (z) =\nUx (t, \u2212\u0169y (z)). The converse implication is obvious.\nIt remains to give sufficient conditions on the random coefficients (\u03bc, \u03c3) ensuring the existence\nof a strong, monotonic solution of SDE (1.3). We briefly recall some classical results on SDEs,\nuseful for our study; more details and additional results are provided in Section 2. An easy to\nread presentation of SDEs with stochastic coefficients is given in Protter [32]; for more exhaustive\nstudy, see Kunita [19].\nTheorem 1.2. Let us consider the one-dimensional stochastic differential equation, SDE(\u03bc, \u03c3)\ndZt = \u03bc(t, Zt )dt + \u03c3(t, Zt )dWt ,\n\n(1.4)\n\nWe assume that the R-valued drift coefficient \u03bc = {\u03bc(t, x); t \u2265 0, x \u2265 0} and the Rd - valued\ndiffusion coefficent \u03c3 = {\u03c3(t, x); t \u2265 0, x \u2265 0} are Lipschitz random fields, with random Lipschitz\nRT\nRT\nbounds Ct and Kt , such that a.s 0 Ct dt < +\u221e and 0 Kt2 dt < +\u221e for any T . In other words,\nfor any \u03c9 outside of a negligible set N , for any t, x, y,\n(\n|\u03bc(t, x, \u03c9) \u2212 \u03bc(t, y, \u03c9)| \u2264 Ct (\u03c9)|x \u2212 y|,\n\u03bc(t, 0) \u2261 0,\n(1.5)\nk\u03c3(t, x, \u03c9) \u2212 \u03c3(t, y, \u03c9)k \u2264 Kt (\u03c9)|x \u2212 y|,\n\u03c3(t, 0) \u2261 0.\n(i) Then, for any z \u2208 R+ there exists a unique strong solution Zz , also called global solution, of\nthe SDE(\u03bc, \u03c3) (1.4) (Z0z = z). Moreover, almost surely, the family of maps z 7\u2192 Ztz (\u03c9), t \u2265 0 is\ncontinuous and strictly increasing.\n(ii) The range of the map z 7\u2192 Z(., z) is ]0, +\u221e[ and Z(., z) is integrable near to 0 and to \u221e.\nMore precisely,\na) When z goes to \u221e, almost surely, for any \u03b5 \u2208 (0, 1), uniformly on [0, T ] ,\nlim\n\nz\u2192+\u221e\n\n\u0010\n\nsup\n0\u2264t\u2264T\n\nZ(t, z) \u0011\n= 0 and\nz 1+\u03b5\n\nlim\n\nz\u2192+\u221e\n\n\u0010\n\nsup\n0\u2264t\u2264T\n\nZ(t, z) \u0011\n= +\u221e, for any T\nz\u03b5\n\n(1.6)\n\nb) When z goes to 0, for any \u03b5 \u2208 (0, 1),\nlim\n\nz\u21920\n\n\u0010\n\nsup\n0\u2264t\u2264T\n\n\u0010\nZ(t, z) \u0011\nZ(t, z) \u0011\nsup\n=\n0\nand\nlim\n= +\u221e, for all T\nz\u21920 0\u2264t\u2264T z 1+\u03b5\nz\u03b5\n\n(1.7)\n\nComment: (i) A constant Lipschitz bound C corresponds to the classical framework of Lipschitz\nSDE, and the assertion (i) is well-known.\n(ii) The asymptotic behavior (ii) a) (near to infinity) is less known except in the domain of\nstochastic flows, where several works and improvements are dealing with this behavior near of\ninfinity, but unlike Kunita [19] and Salah-Eldin & al [23], Imkeller & al [13] and Zongxia [21]\nconsider only the case of SDEs with deterministic coefficients .\n(iii) The notion of \"global solution\" expresses that the solution (Ztz ) exists for all t \u2265 0. Under\nweaker assumptions, the solution may be defined only up to a finite lifetime \u03b6(z). More details\nwill be given in the next section.\nSufficient conditions on local characteristics of an It\u00f4 random field to be a progressive utility may\nbe exhibited.\n\n8\n\n\fCorollary 1.3. Assume the framework of Theorem 1.1.\nRT\nRT\n(i) If there exist random Lipschitz bounds Ct and Kt with 0 Ct dt < +\u221e and 0 Kt2 dt < +\u221e for\nany T , such that a.s, for any x, x\u2032 > 0\n(\n|\u03b2x (t, x) \u2212 \u03b2x (t, x\u2032 )| \u2264 Ct |Ux (t, x) \u2212 Ux (t, x\u2032 )|, limx\u2192\u221e \u03b2x (t, x) \u2261 0,\n(1.8)\n|\u03b3x (t, x) \u2212 \u03b3x (t, x\u2032 )k \u2264 Kt |Ux (t, x) \u2212 Ux (t, x\u2032 )|, limx\u2192\u221e \u03b3x (t, x) \u2261 0.\nthen U is a progressive utility.\n(ii) Moreover if (\u03b2, \u03b3) are C 2 -regular random fields, Condition (1.8) is equivalent to\n(\n\n|\u03b2x (t, x) \u2264 Ct |Ux (t, x)|,\n|\u03b2xx (t, x)| \u2264 Ct1 |Uxx (t, x)|,\n\nk\u03b3x (t, x)k \u2264 Kt |Ux (t, x)|\nk\u03b3xx (t, x)k \u2264 Kt1 |Uxx (t, x)|\n\n(1.9)\n\nThen \u03bc(t, x) and \u03c3(t, x) have linear growth with random bounds Ct and Kt respectively, and \u03bcx\nand \u03c3x are spatially bounded by Ct1 and Kt1\nProof. The condition (1.8) is equivalent to the Lipschitz condition in Theorem 1.2 applied to the\ncoefficients \u03bc and \u03c3 in Equation (1.3).\nRemark: In the following, we call stochastic flow any continuous and strictly monotonic solution Z\ndef\nof SDEs. Contrary to the classical theory, herein we are interested only in the process Zt = Zs=0,t\n\u22121\nstarting at time 0, and its inverse (Zt )\u22121 (y) = Zs=0,t\n(y) := Zt,s=0 , both considered in the forward\npoint of view. We don't use the general flow associated with the SDE, defined as the family Zs,t (z),\nsolution of the equation starting from z at time s, and the flow stability, that is for r < s < t,\nZs,t (Zr,s (z)) = Zr,t (z), except in the paragraph concerning a pathwise dynamic programming\nprinciple (p.32).\nFrom Theorem 1.1, a large part of our study returns to study strictly monotonic one dimensional\ne y ) plays also a major role in the\nrandom fields and their inverses. The inverse flow of Ux , (\u2212U\ne of a progressive utility U.\nstudy of the conjugate U\n\n1.3\n\nDynamics of Convex Conjugate Progressive Utility\n\ne of a progressive utility U is based on the well-known identity\nThe study of the convex conjugate U\ne (t, y) = U (t, \u2212U\ney (t, y)) + y U\ney (t, y), and request to know the dynamics of the\n(Definition 1.3) U\n2\ney (t, y). For this, an extension of the classical\nC -random field U (t, x) along the random process \u2212U\nIt\u00f4's formula, known as It\u00f4-Ventzel's formula is needed. We refer to Ventzel [37] and Kunita [19]\n(Theorem 3.3.1) for different variants of this formula and theirs proofs.\n2\n-It\u00f4 semimartingale F with local\nTheorem 1.4 (It\u00f4-Ventzel's Formula Weak). Consider a Kloc\ncharacteristics (\u03c6, \u03c8). For any continuous It\u00f4 semimartingale X, F (., X. ) is a continuous It\u00f4\nsemimartingale,\nZ t\nZ t\nF (t, Xt ) = F (0, X0 ) +\n\u03c6(s, Xs )ds +\n\u03c8(s, Xs ).dWs\n(1.10)\n0\n0\nZ t\nZ\nZ t\n1 t\n+\nFx (s, Xs )dXs +\nFxx (s, Xs )hdXs i +\nhdFx (s, x), dXs i|x=Xs\n2 0\n0\n0\n\n9\n\n\fComment The first line of the right hand side of the equation corresponds to the dynamics of the\nprocess (F (t, x))t\u22650 taken on (Xt )t\u22650 , when in the second line, the first two terms come from the\nclassical It\u00f4's formula. The last term represents the quadratic covariation between dFx (t, x) and\ndXt , at x = Xt , which can be written as \u03c8x (t, Xt ).\u03c3tX dt when the diffusion coefficient of X is the\nvector \u03c3tX .\nIt\u00f4-Ventzel's formula and monotonic change of variable will help us to establish the relationship\nbetween local characteristics of U and U.\ne its progressive convex conjugate utility assumed\nTheorem 1.5. Let U a progressive utility and U\n2\nto be Kloc\n-It\u00f4 semimartingales with local characteristics (\u03b2, \u03b3) and (\u03b2\u0303, \u03b3\u0303).\ne is driven by the non linear second order SPDE,\n(i) The dynamics of U\n\u0001\ne (t, y) = \u03b3(t, \u2212U\ney (t, y)).dWt + \u03b2(t, \u2212U\ney (t, y))dt + 1 U\ney (t, y) k2 dt\neyy (t, y)k\u03b3x t, \u2212U\ndU\n(1.11)\n2\ne y are given by,\n(ii) The local characteristics of the random field U\n\uf8f1\ne\ne\n\uf8f4\n\uf8f2 \u03b3\u0303y (t, y) = \u2212\u03b3x (t, \u2212Uy (t, y))Uyy (t, y)\n2\n(1.12)\ney (t, y))U\neyy (t, y) + 1 \u2202y ( k\u03b3\u0303y (t, y)k )\n\uf8f4\n\uf8f3 \u03b2\u0303y (t, y) = \u2212\u03b2x (t, \u2212U\ne\n2\nUyy (t, y)\n\nb \u03c3,\u03bc (f )(t, y) =\n(iii) Let (\u03bc, \u03c3) be the random coefficients of the SDE associated with Ux and L\n1\n2\n2 \u2202y (k\u03c3(t, y)k \u2202y f (t, y))\u2212\u03bc(t, y)\u2202y f (t, y) the adjoint elliptic operator in divergence form associated\ne y is a monotonic solution of the Stochastic\nwith (\u03bc, \u03c3). Then the marginal conjugate utility U\nPartial Differential Equation with initial condition \u0169y (y),\ney (t, y) = \u2212\u2202y (U\ney )(t, y)\u03c3(t, y).dWt + L\nb \u03c3,\u03bc\ne\ndU\nt,y (Uy )dt\n\n(1.13)\n\ne requires the existence of a\nObserve that the derivability of the local characteristics (\u03b2\u0303, \u03b3\u0303) of U\nthird derivative for U.\ne are K2 -semimartingales\" implies, from Kunita [19]\nProof. At first, the assumption \"U and U\nloc\n1\n1\ney\nTheorem 2.2 below, that (\u03b2, \u03b3) and (\u03b2\u0303, \u03b3\u0303) belong to the class \u2208 Kloc\n\u00d7 K\u0303loc\n. Moreover Ux and U\nare It\u00f4 semimartingales with local characteristics (\u03b2x , \u03b3x ) and (\u03b2\u0303, \u03b3\u0303).\nLet now apply the It\u00f4-Ventzel formula to the regular random field F (t, x) = U (t, x) \u2212 y x and to\ney (t, y). The following identities related to the change of variable will\nthe semimartingale Xt = \u2212U\ne\ne (t, y), Uxx (t, \u2212U\ney (t, y)) = \u22121/U\neyy (t, y).\nbe useful, F (t, \u2212Uy (t, y)) = U\n\ney (t, y)) = Ux (\u2212U\ney (t, y)) \u2212 y \u2261 0, so that the term in dX disappears.\n(i) a) Observe that Fx (t, \u2212U\ne is \u03b3\u0303(t, y) = \u03b3(t, \u2212U\ney (t, y)),\nTherefore, by It\u00f4-Ventzel's formula, the volatility random field \u03b3\u0303 of U\ney (t, y))U\neyy (t, y) is by assumption the volatility characteristic\nand its derivative \u03b3\u0303y (t, y) = \u2212\u03b3x (t, \u2212U\ne y . Hence the covariation term is driven by hdFx (t, x), \u2212dU\ney (t, y)i = \u2212h\u03b3x (t, x).\u03b3\u0303y (t, y)idt.\nof U\n(i) b) The It\u00f4-Ventzel formula is then reduced to,\ne (t, y) \u2212\ndU\n\ney (t, y))dt \u2212 \u03b3(t, \u2212U\ney (t, y)).dWt\n\u03b2(t, \u2212U\n\u0001\n1\ney (t, y) hdU\ney (t, y)i \u2212 h\u03b3x (t, \u2212U\ney (t, y)).\u03b3\u0303y (t, y)idt\n= Uxx t, \u2212U\n2\n1\ney (t, y))k\u03b3\u0303y (t, y)k2 dt \u2212 Uxx (t, \u2212U\ney (t, y))k\u03b3\u0303y (t, y)k2 dt\n= Uxx (t, \u2212U\n2\n\u0001\n1\neyy (t, y)k\u03b3x t, \u2212U\ney (t, y) k2\ney (t, y))k\u03b3\u0303y (t, y)k2 dt = 1 U\n= \u2212 Uxx (t, \u2212U\n2\n2\n\n10\n\n\fe y is obtained (by assumption and Theorem 2.2) by differentiating term\n(ii) The dynamics of U\n\u0001\ney (t, y) and \u03bc(t, y) =\nby term in the previous equation. The use of coefficients \u03c3(t, y) = \u03b3x t, \u2212U\n\u0001\ney (t, y) of the SDE associated with Ux allows us to express U\ne y as the solution of a SPDE\n\u03b2x t, \u2212U\n\u03c3,\u03bc\n1\nb\ndriven by the adjoint second order operator in y, Lt,y = \u2202y (k\u03c3(t, y)k2 \u2202y ) \u2212 \u03bc(t, y)\u2202y .\n2\n\ney (t, y) =\ndU\n\n=\n\nThe proof is achieved.\n\neyy (t, y)[\u03bc(t, y)dt + \u03c3(t, y).dWt ] + \u2202y ( 1 U\neyy (t, y)k\u03c3(t, y)k2 )dt\n\u2212U\n2\ney (t, y)\u03c3(t, y).dWt + L\nb \u03c3,\u03bc (U\ney )(t, y)dt\n\u2212\u2202y U\n\nRemark Obviously, we are interested in the properties of the SDE(\u03bc\u0303, \u03c3\u0303) associated with the\ne y when (\u03b2, \u03b3) are C 2 -regular random fields. Given that \u03c3\u0303(t, \u2212z) =\nmonotonic random field U\n\u0010\n\u0011\n2\u0001\n\u03b3x (t, z)\nand \u03bc\u0303(t, \u2212z) = Uxx1(t,z) \u03b2x (t, z) \u2212 12 \u2202x k\u03b3Uxxx(t,z)k\n, it is clear that these coefficients are\n(t,z)\nUxx (t, z)\nnot globally Lipschitz and the previous results (Theorem 1.2) cannot be applied directly. So, we\nreport the study of this SDE in Section 2, Theorem 2.5, after introducing some additional tools.\n\n2\n\nRegular Random Fields and Stochastic Differential Equa-\n\ntions\nThere are several difficulties in the definition of semimartingales F (t, x) depending on a parameter,\nas explained in the books of Kunita [19] and Carmona & Nualart. [2], and their local characteristics\n(\u03c6F , \u03c8 F ) (in short (\u03c6, \u03c8) if there is no possible confusion).\n(i) The first one is relative to the existence of continuous version of the random field F; according\nto Kunita [19] (Theorem 3.1.2 p.75), this property is true when the local characteristics (\u03c6, \u03c8) are\nlocally \u03b4-H\u00f6lder for some \u03b4 > 0 by Kolmogorov's criterion.\n(ii) The second one is relative to differential properties: even if the random field F and its local\ncharacteristics (\u03c6, \u03c8) are differentiable, it is not enough (as is shown in H. Kunita [19]), to get that\nthe local characteristics of the derivative random field Fx are (\u03c6x , \u03c8x ).\n(iii) Based on the study of Section 1, we also need under which assumptions on the coefficients of\na SDE, the solution is a regular monotonic random field with respect to its initial condition.\nWe start with a more precise definition of regular random field spaces than in Section 1 by\nintroducing H\u00f6lder properties. The motivation is find in the Kolmogorov's continuity criterion\n([19]Theorem 1.4.1).\nTheorem 2.1. Let X(x), x \u2208 D a random field with values in a Banach space B, where D is a\nPd\ndomain in Rd . Assume that there exist positive constants \u03b3, C and \u03b1i , i = 1...d with i=1 \u03b1\u22121\n< 1,\ni\nsatisfying,\nd\nX\n\u0001\n\u03b3\nfor any x, y \u2208 D\n(2.1)\nkxi \u2212 yi k\u03b1i ,\nE[kX(x) \u2212 X(y)k ] \u2264 C\ni=1\n\ne\n(i) Then X(x) has a continuous modification X(x).\n(ii) Let 0 < \u03b2i \u2264 A\u03b1i , i = 1...d arbitrary positive numbers where A = (\u03b10 \u2212 d)/\u03b3\u03b10 ), and\nPd\n\u03b10\u22121 d = i=1 \u03b1i\u22121 . Then, for any hypercube H there exists a positive random variable K(\u03c9) with\n\u0001\nPd\n\u03b2i\nfor any x, y \u2208 H, a.s..\nE[K \u03b3 ] < \u221e such that kX(x) \u2212 X(y)k(\u03c9) \u2264 K(\u03c9)\ni=1 kxi \u2212 yi k\n\n11\n\n\fRecently, new criteria based on different norms, or chaining methods have been developed to\nweaken the criterion. A interesting survey may be find in Scheutzow [35].\n\n2.1\n\nRegular Random Fields Spaces\n\nWe introduce a family of Sobolev type random semi-norms to control locally or globally the growth\nof the random field and its derivatives.\n\nNorms definition Let \u03c6 be a continuous Rk -valued progressive random field and let m be a\nnon-negative integer, and \u03b4 a number in (0, 1] . We need to control the asymptotic behavior in 0\nand \u221e of \u03c6, and the regularity of its H\u00f6lder derivatives when there exist. More precisely, let \u03c6 be\nin the class C m,\u03b4 (]0, +\u221e[), i.e. (m, \u03b4)-times continuously differentiable in x for any t, a.s.\n(i) For any subset K \u2282]0, +\u221e[, we define the family of random (H\u00f6lder) K-semi-norms\n\uf8f1\n\uf8f4\n\uf8f2\n\uf8f4\n\uf8f3\n\nk\u03c6km:K (t, \u03c9) = supx\u2208K\n\nk\u03c6(t,x,\u03c9)k\nx\n\n+\n\nP\n\nk\u03c6km,\u03b4:K (t, \u03c9) = k\u03c6km:K (t, \u03c9) + sup\n\n1\u2264j\u2264m\n\nx,y\u2208K\n\nsupx\u2208K k\u2202xj \u03c6(t, x, \u03c9)k\n\nk\u2202xm \u03c6(t, x, \u03c9) \u2212 \u2202xm \u03c6(t, y, \u03c9)k\n.\n|x \u2212 y|\u03b4\n\n(2.2)\n\nThe case (m = 0, \u03b4 = 1) corresponds to the local version of the Lipschitz case used in Section 1.\nWhen K is all the domain ]0, +\u221e[, we simply write k.km (t, \u03c9), or k.km,\u03b4 (t, \u03c9).\n(ii) The first term of these random semi-norms differs slightly from the definition of Kunita seminorms (Equations (1) and (2) p.72) because instead of dividing by 1 + |x| we divide by x on the\nfirst terms. This does not change Kunita's results, but allows us to obtain reasonable behavior in\nthe neighborhood of x = 0 (Equation (1.7), Theorem 1.2) in addition to the traditional results in\nthe neighborhood of x = \u221e.\n\nDifferent spaces of regular random fields The previous semi-norms are related to the\nspatial parameter. As in Definition 1.1, we add the temporal dimension in assuming these seminorms (or the square of the semi-norm) to be integrable in time with respect to the Lebesgue\nmeasure on [0, T ] for all T . Then, as in Lebesgue's Theorem, we can differentiate, pass to the\nlimit, commute limit and integral for the random fields. Calligraphic notation recalls that these\nsemi-norms are random.\nm,\u03b4\nm,\u03b4\n(i) Kloc\n(resp. Kloc ) denotes the set of all C m,\u03b4 -random fields such that for any compact\nRT\nRT\nK \u2282]0, +\u221e[, and any T , 0 k\u03c6km,\u03b4:K (t, \u03c9) < \u221e, (resp. 0 k\u03c8k2m,\u03b4:K (t, \u03c9)dt < \u221e ).\n(ii) When these different norms are well-defined on the whole space ]0, +\u221e[, the derivatives (up\nto a certain order) are bounded in the spatial parameter, with integrable (resp.square integrable)\nm\nm,\u03b4\nin time random bound. In this case, we use the notations Kbm , Kb or Kbm,\u03b4 , Kb .\n\n2.2\n\nDifferentiability of It\u00f4 random fields\n\nWe shall discuss the regularity of a It\u00f4 semimartingale random field\nZ t\nZ t\nF(t, x) = F(0, x) +\n\u03c6(s, x)ds +\n\u03c8(s, x).dWs\n0\n\n0\n\nin connection with the regularity of its local characteristics (\u03c6, \u03c8). As in Section 1, by convention,\nm,\u03b4\nan It\u00f4 random field F is said to be a Kloc\n-semimartingale, whenever F (0, x) is of class C m,\u03b4 ,\n\n12\n\n\fRt\nRt\nm,\u03b4\nm,\u03b4\nB F (t, x) = 0 \u03c6(s, x)ds is of class Kloc\n, and M F (t, x) = 0 \u03c8(s, x).dWs is of class Kloc . The\nreference to Km,\u03b4 recall that F is a random field. 1 As in Kunita [19], we are concerned both by\nthe regularity of F from the regularity of its local characteristics (\u03c6, \u03c8) (Theorem 3.1.2 ) and by\nthe regularity of (\u03c6, \u03c8) from that of F(t, x) (Theorem 3.1.3). To be concise, we also give a sufficient\nconditions ([19] Theorem 3.3.3) under which we can differentiate term by term the dynamics of an\nIt\u00f4 random field. This property is used in order to apply It\u00f4-Ventzel's formula.\nTheorem 2.2 (Differential Rules). Let F be an It\u00f4 semimartingale random field with local charRt\nRt\nacteristics (\u03c6, \u03c8), F (t, x) = F (0, x) + 0 \u03c6(s, x)ds + 0 \u03c8(s, x).dWs\n\nm,\u03b4\n(i) If F is a Kloc\n-semimartingale for some m \u2265 0, \u03b4 \u2208 (0, 1], its local characteristics (\u03c6, \u03c8) are\nm,\u03b5\nm,\u03b5\nof class Kloc \u00d7 Kloc for any \u03b5 < \u03b4.\nm,\u03b4\n\nm,\u03b4\nm,\u03b5\n(ii) Conversely, if the local characteristics (\u03c6, \u03c8) are of class Kloc\n\u00d7 Kloc , then F is a Kloc\nsemimartingale for any \u03b5 < \u03b4.\n(iii) In any cases, for m \u2265 1, \u03b4 \u2208 (0, 1], the derivative random field Fx is an It\u00f4 random field with\nlocal characteristics (\u03c6x , \u03c8x ).\n1,\u03b4\n(iv) Moreover, if F is a Kloc\n\u2229 C 2 -semimartingale, for any It\u00f4 process X, F (., X. ) is a continuous\nIt\u00f4 semimartingale satisfying the It\u00f4-Ventzel formula (1.10).\n\nAs previously mentioned, we also need results on the existence and the regularity of one dimensional random fields which are also solutions of stochastic differential equations (SDE). The\nspatial parameter in this case corresponds to the initial condition. Such random fields are also\ncalled stochastic flows and are the main subject (in the multidimensional case) of the Kunita's\nbook [19].\nThe question is now to make assumptions on the coefficients in place of local characteristics. An\nexample was given in Section 1, Theorem 1.2, where the global Lipschitz regularity of coefficients\nis used in proving the existence of monotonic solution. Next proposition, ([19] Theorem 4.6.5),\nfrequently used in the sequel, extends these results to differentiability properties.\nProposition 2.3. Let \u03bc be a real valued process and \u03c3 be a d-dimensional process of the the class\nm,\u03b4\nKbm,\u03b4 and Kb for some m \u2265 1, \u03b4 \u2208 (0, 1]. Consider the following SDE(\u03bc, \u03c3),\ndXt = \u03bc(t, Xt )dt + \u03c3(t, Xt ).dWt ,\n\nX0 = x\n\n(2.3)\n\n0,1 \u0001\non the existence and\nThen, in addition to the results of Theorem 1.2 (\u03bc, \u03c3) \u2208 Kb0,1 \u00d7 Kb\nuniqueness of global monotonic solution, we have:\nm,\u03b5\n(i) The unique solution X = (Xtx , x > 0) is a Kloc\nsemimartingale for any \u03b5 < \u03b4. The inverse\n\u22121\nm\nX of X is also of class C .\n\n(ii) X is strictly increasing in x, and its derivative Xx is solution of a linear equation, with\n1\n\nNote, in the case of general semimartingales F studied by Kunita, the notion of local characteristics makes reference\n\nto the triplet (\u03c6(t, x), a(t, x, y), At ) for x, y > 0, where the joint quadratic variation of F (t, x), F (t, y) satisfy the relation\nRt\n< F (t, x), F (t, y) >= 0 a(s, x, y)dAs with the process A is F\u2212adapted increasing and continuous. Here, as there is a\nfinite number of Brownian motions, At = t and a(t, x, y) := \u03c8(t, x).\u03c8(t, y) where, as before, the \".\" denote the inner\nscalar product. From this, all assumptions on the matrix \"a\" (in Kunita) are adapted to the present framework and\nreplaced by our equivalent hypothesis on the diffusion characteristic vector \u03c8.\n\n13\n\n\fspatially bounded stochastic parameters (\u03bcx (t, Xtx ), \u03c3x (t, Xtx )) given by\n\u0002\n\u0003\ndXx (t, x) = Xx (t, x) \u03bcx (t, Xtx )dt + \u03c3x (t, Xtx ).dWt , Xx (0, x) = 1\n\n(2.4)\n\n1/Xx is solution of the same kind of linear equation\n\n\u0003\n\u0002\ndZt = Zt (\u2212\u03bcx (t, Xtx ) + ||\u03c3x (t, Xtx )||2 )dt \u2212 \u03c3x (t, Xtx ).dWt\n\n(2.5)\n\nm\u22121,\u03b5\nThen, Xx and 1/Xx are Kloc\n-semimartingales.\n(iii) The local characteristics of X, \u03bbX (t, x) = \u03bc(t, Xtx ) and \u03b8X (t, x) = \u03c3(t, Xtx ) have only local\nm,\u03b5\nm,\u03b5\nproperties and belong to Kloc\n\u00d7 Kloc for any \u03b5 < \u03b4.\n\nRemark . This technical result shows clearly the interest of using H\u00f6lder property: the solution\nis fractionally less regular than the coefficients (going from \u03b4 in \u03b5 < \u03b4). Otherwise, if we are only\ninterested with processes of class Km (m integer) without worrying about the H\u00f6lder's dimension,\nm,\u03b5\nthen we will lose a hole order in the regularity: instead of solution of class Kloc\n, we will only\nm\u22121\nobtain solution of class Kloc .\nIn the last proposition, we have made global regularity assumptions on the coefficients (\u03bc, \u03c3)\nin order to prove that the SDE (2.3) has a regular, non-exploding (global), strictly monotonic\nm,\u03b5\nsolution X. Observe that the solution itself as random field is only in Kloc\nin general. In Section\n1, Paragraph 1.3, we have shown that even if the progressive marginal utility satisfies a SDE(\u03bc, \u03c3)\ney of Ux , assumed to be an It\u00f4\nwith global regularity, the SDE(\u03bc\u0303, \u03c3\u0303) satisfied by the inverse \u2212U\nprocess, has only local regularity. So, we are also concerned with SDE whose the coefficients are of\n0,1\nm,\u03b4\nm,\u03b4\n0,1\n\u00d7Kloc , m \u2265 1, \u03b4 \u2208]0, 1]. Then, the SDE can not have global solution and\nclass Kloc\n\u00d7Kloc or Kloc\nexplosion can occur at finite time \u03b6(x). Nevertheless, several properties are maintained as shown\nin [19] Theorems 4.7.1 and 4.7.2.\nTheorem 2.4 (Local assumptions). Let us consider a SDE with only locally Lipschitz coefficients\n0,1 \u0001\n0,1\n(\u03bc, \u03c3) \u2208 Kloc\n\u00d7 Kloc .\n(i) For any initial condition x, the SDE has a unique maximal solution (Xtx ) up to an explosion\ntime \u03b6(x), that is on [0, \u03b6(x)),\ndXtx = 1{t<\u03b6(x)} \u03bc(t, Xtx )dt + 1{t<\u03b6(x)} \u03c3(t, Xtx )dWt ,\n\na.s.\n\n(2.6)\n\n(ii) For given t, as function of x, Xtx is defined on its domain Dt = {x : \u03b6(x) > t}, with finite\nvalues on its range Rt (\u03c9) = {Xtx (\u03c9); x \u2208 Dt (\u03c9)}. Furthermore, x 7\u2192 Xtx : Dt \u2192 Rt is a continuous\nstrictly monotonic random field with continuous inverse Xt\u22121 : Rt \u2192 Dt .\n(iii) (Xtx ) is a global solution (Theorem 1.2) if and only if the explosion time \u03b6(x) is equal to \u221e\nfor all x \u2208 R+ = [0, \u221e) a.s., (or equivalently if for any time t, the domain Dt is the whole space\nR+ a.s.). Hence the range Rt is also the whole space R+ for any t.\nm,\u03b4\nm,\u03b4\n(iv) Moreover, if (\u03bc, \u03c3) \u2208 Kloc\n\u00d7 Kloc (m \u2265 1, \u03b4 \u2208 (0, 1]) Xt (.) is of class C m,\u03b5 , \u03b5 < \u03b4 on Dt .\n(v) If (Xtx ) is a global solution, then all assertions of Proposition 2.3 hold true.\nWe recall the proof of Kunita to present the truncation method which is the base of many proofs\nwhen only local properties hold true.\n\n14\n\n\fProof. (i) Following Kunita, we shall apply the method of truncation on R+ . For each positive\ninteger N , take a C \u221e -function \u03c8 N (x), x \u2208 R+ such that \u03c8 N (x) = 1 if x \u2264 N , 0 \u2264 \u03c8 N (x) \u2264 1\nif N \u2264 x \u2264 N + 1 and \u03c8 N (x) = 0 if x > N . Define \u03bcN (t, x) = \u03bc(t, x)\u03c8 N (x) and \u03c3 N (t, x) =\nm,\u03b4\n\u03c3(t, x)\u03c8 N (x) which belong to Lm,\u03b4\nand Kb . Therefore, the SDE(\u03bcN , \u03c3 N ) has a unique solution\nb\nX N of class Km,\u01eb (\u01eb < \u03b4) satisfying assertions of Proposition 2.3. Let us introduce the family\nof stopping times for each x, \u03b6N (x) := inf{t : X N (t, x) \u2265 N }. By uniqueness, for M < N the\nsolutions X.M (x) and X.N (x) coincide on [0, \u03b6M (x)). Then, the family \u03b6N (x) is increasing with\nlimit \u03b6(x) := limN \u2192\u221e \u03b6N (x). We can define Xt (x), t < \u03b6(x) by Xt (x) = XtN (x) if t < \u03b6N (x). It\nis a maximal solution of SDE(\u03bc, \u03c3) starting at x at t = 0.\n(ii) We shall prove that the above X. (x) is a continuous strictly increasing flow. Take any sample\n\u03c9 such that XtN (\u03c9, .) defines a continuous map strictly increasing in x for any N . Probability of\nthe set of all such samples is 1. We first note that each \u03b6N (\u03c9, x) is lower semicontinuous in x i.e.\nDtN (\u03c9) = {x : \u03b6N (\u03c9, x) > t} is open for any t > 0, since on this set XsN (\u03c9, x) < N for all s \u2264 t.\nHence, the same inequality holds for any x\u2032 in the neighborhood of x. Now since \u03b6(\u03c9, x) is the upper\nlimit of \u03b6N (\u03c9, x) it is also lower semicontinuous. Set Dt (\u03c9) = \u222aN DtN (\u03c9). Since X(t, x) = X N (t, x)\nholds on DtN (\u03c9), the map X(t, x) : Dt (\u03c9) \u2192 R+ is continuous strictly increasing with continuous\ninverse.\n(iii)The differentiability properties are showed similarly by truncation techniques, using derivability\nof processes X N .\nComment Recently, several papers address the question: under which minimal assumptions on\nthe SDE's coefficients, the solution is non-explosive? For example, when the coefficients \u03bc and\n\u03c3 are a deterministic functions independent of the time, the property holds true under global\nlog-Lipschitz type conditions as it is showed in Zongxia [20] and Fang [12]. But these new results\nand many others can not be applied directly to our study because the coefficients of SDE's we are\nconcerned are structurally stochastic.\nLocal regularity on SDEs coefficients appears as a kind of minimal assumption to ensure the\nregularity of a global solution if there exists. Because of its importance in the sequel, we give a\nname to this class of SDE's.\nDefinition 2.1. A SDE(\u03bc, \u03c3) is said to be of class S m,\u03b4 if\nm,\u03b4\nm,\u03b4\na) the coefficients (\u03bc, \u03c3) are in the spaces (Kloc\n, Kloc ))\nb) the maximal solution X is non explosive.\nBy Theorem 2.4, the unique solution X is strictly monotonic with range [0, \u221e) and of class\nm,\u03b5\nKloc\n, \u03b5 < \u03b4.\nm\n\nClassical examples of S m,\u03b4 SDEs are given by SDE(\u03bc, \u03c3) when (\u03bc, \u03c3) are in the spaces (Kbm , Kb ),\n0\nm,\u03b4\nm,\u03b4\n, Kloc ). Moreover, in these last two cases, the asymptotic behavior of\nor even in (Kb0 , Kb ) \u2229 (Kloc\nthe solution is given by Theorem 1.2, Equation (1.6) and Equation (1.7).\n\n2.3\n\nSolvable SPDEs via SDEs\n\nIn the utility framework, under\ne\nthe strong assumptions of Theorem 1.5, we have shown that Uy , the inverse flow of (\u2212Ux (t, x)),\nis solution of a SPDE and a SDE(\u03bc\u0303, \u03c3\u0303) simultaneously. We want to relax the a priori assumption\n\nDynamics of inverse flow of regular SDE solution\n\n15\n\n\fey is an It\u00f4 random field. So, we proceed differently, by starting from the\nthat the inverse flow U\nmaximal solution of the local SDE (\u03bc\u0303, \u03c3\u0303) with explosion time \u03b6(x), and by verifying that up to\n\u03b6(x) this process is the inverse flow of the solution of the SDE(\u03bc, \u03c3). By an easy argument base\non the uniqueness of non-explosive solution of the SDE(\u03bc, \u03c3), we deduce \u03b6(x) = \u221e, a.s.. Some\nregularity on the SDE(\u03bc, \u03c3) is required to conduct calculation and conclude.\nTheorem 2.5 (Inverse flow SDE). Let (Xtx ) be the monotonic solution of a SDE(\u03bc, \u03c3) of class\nS m,\u03b4 , m \u2265 3, \u03b4 \u2208]0, 1], so that as random field (Xtx ) and its local characteristics (\u03bb(t, x) = \u03bc(t, Xtx ))\nm,\u03b5\nm,\u03b5\nand (\u03b8(t, x) = \u03c3(t, Xtx )) are of class Kloc\nand Lm,\u03b5\nloc \u00d7 K loc for any 0 < \u03b5 < 1.\nWe are concerned with the SDE(\u03bc\u0303, \u03c3\u0303)\nd\u03bet = \u2212\nwhere \u03c3\u0303(t, z) = \u2212\n\nh\ni\n\u0001\n1\n1\nk\u03b8k2 \u0001\n\u03bb(t, \u03bet ) \u2212 \u2202x\n(t, \u03bet ) dt + \u03b8(t, \u03bet ).dWt , \u03be0 = z,\nXx (t, \u03bet )\n2\nXx\n\n(2.7)\n\n\u00101\n\u0011\n\u03b8(t, z)\nk\u03b8k2 \u0001\n1\nand \u03bc\u0303(t, z) =\n\u2202x\n(t, z) \u2212 \u03bb(t, z) .\nXx (t, z)\nXx (t, z) 2\nXx\n\n(i) The SDE(\u03bc\u0303, \u03c3\u0303) is of class S m\u22122,\u03b5 (0 < \u03b5 < \u03b4) and its unique monotonic solution \u03be z is the\ninverse flow X \u22121 of X.\nm\u22122,\u03b5\n(ii) Consequently, the inverse X \u22121 of X is a semimartingale and belongs to the class Kloc\n\u2229C m .\nProof. The proof is in several steps, by first proving the local regularity of the coefficients (\u03bc\u0303, \u03c3\u0303),\nand then the existence of a monotonic solution \u03be z up to a explosion time \u03b6(z). The main step is\nthen to prove that \u03b6(z) = \u221e a.s. by showing that locally \u03be z is the inverse X \u22121 .\nm,\u03b5\n\nm,\u03b5\nm,\u03b5\nm\u22121,\u03b5\n(i) Since X \u2208 Kloc\nand (\u03bb, \u03b8) \u2208 Kloc\n\u00d7 Kloc , by Proposition 2.3 1/Xx \u2208 Kloc\nand so\n2\nm\u22121,\u03b5\nm\u22122,\u03b5\nk\u03b8k\nm\u22121,\u03b5\nand \u2202x ( Xx ) \u2208 Kloc . Consequently the coefficients (\u03bc\u0303, \u03c3\u0303) are\n(\u03bb/Xx , \u03b8/Xx ) \u2208 Kloc\n\u00d7 Kloc\nm\u22121,\u03b5\n\nm\u22122,\u03b5\nof class Kloc\n\u00d7 Kloc\n\n.\n\n(ii) Since the coefficients (\u03bc\u0303, \u03c3\u0303) satisfy the assumptions of Theorem 2.4, the SDE(\u03bc\u0303, \u03c3\u0303) has a\nunique maximal solution \u03be z , up to an explosion time \u03b6(z).\na) We claim that the solution \u03betz is the inverse flow X \u22121 (t, z) for t \u2208 [0, \u03b6(z)) of the SDE(\u03bc, \u03c3)\nm,\u01eb\nmonotonic solution Xtx := X(t, x). Since by assumption X is of class Kloc\nand its local characterm,\u03b5\nm,\u03b5\nistics (\u03bb, \u03b8) are of class (\u03bb, \u03b8) \u2208 Kloc \u00d7 Kloc (m \u2265 3, \u01eb \u2208]0, \u03b4[), we can apply It\u00f4-Ventzel's formula\nto X(t, \u03betz ) up to the time \u03b6(z). Then, on [0, \u03b6(z)), by using the short notation \u03be in place of \u03be z ,\ndX(t, \u03bet ) =\n+\n+\n=\n=\n\nh\n\n\u2212\u03b8(t, \u03bet ) i\n.dWt\nXx (t, \u03bet )\n\u0010\nh\n\u0010\n\u0011\u0011i\n1\n1\nk\u03b8k2 \u0001\n\u03bb(t, \u03bet ) \u2212 \u2202x\n\u03bb(t, \u03bet ) + Xx (t, \u03bet ) \u2212\n(t, \u03bet )\ndt\nXx (t, \u03bet )\n2\nXx\ni\nh1\n\u2212\u03b8 \u0001\nk\u03b8k2 \u0001\n(t,\n\u03be\n)\n+\n\u03b8\n(t,\n\u03be\n).\nXxx (t, \u03bet )\n(t,\n\u03be\n)\ndt\nt\nx\nt\nt\n2\nXx2\nXx\ni\nh1\n\u0001\n\u0001\n\u0002 \u0003\n1\n1\nk\u03b8k2 \u0001\n1 1\n\u2202x k\u03b8k2 (t, \u03bet )) \u2212 \u2202x (\n)k\u03b8k2 (t, \u03bet ) dt\n0 .dWt + \u2202x\n(t, \u03bet ) \u2212\n2\nXx\n2 Xx\n2\nXx\n0\n\u03b8(t, \u03bet ) + Xx (t, \u03bet )\n\nb) Then the continuous (in time) process X(t, \u03betz ) is constant a.s. on [0, \u03b6(z)). At time t = \u03b6(z) <\n\u221e, \u03betz = \u221e and X(t, \u221e) = \u221e. On the other hand, by continuity, X(t, \u03betz ) = z if t = \u03b6(z) < \u221e.\nTo avoid contradiction, necessarily \u03b6(z) = \u221e, a.s..\n\n16\n\n\fAs in Theorem 1.5, we can also characterize the inverse process in terms of monotonic solution of\nnon-linear stochastic partial differential equation (SPDE). This point of view is well-suited to the\nstudy of consistent dynamic utilities developed in the next sections.\n\nSolvable SPDEs via SDEs Now we show how to solve some non-linear SPDEs via SDEs. A\nfirst link is obtained by the transformation of the SDE (2.7) into a SPDE. Recall that conditions\nm,\u03b4\nof type S m,\u03b4 are related to the coefficients of the SDE, when conditions of type Kloc\nare related\nto the local characteristics of the solution.\nTheorem 2.6 (SPDE point of view). Let us consider a SDE (\u03bc, \u03c3) of class S m,\u03b4 with m \u2265\n1\n2\nb \u03c3,\u03bc\n2, \u03b4 \u2208 (0, 1], and its adjoint operator L\nt,z = 2 \u2202z (k\u03c3(t, z)k \u2202z ) \u2212 \u03bc(t, z)\u2202z . Denote by X its unique\nsolution.\nm\u22122,\u03b4\n(i) For m \u2265 3, the inverse flow X \u22121 = \u03be X of X is a strictly monotonic solution of class Kloc\n\u2229C m\nb \u03c3,\u03bc , \u2212\u03c3\u2202z ), with initial condition \u03be0 (z) = z,\nof SPDE(L\nb \u03c3,\u03bc\nd\u03be(t, z) = \u2212\u03bez (t, z)\u03c3(t, z).dWt + L\nt,z (\u03be)dt\n\n(2.8)\n\n1,\u03b4\nb \u03c3,\u03bc , \u2212\u03c3\u2202z ) (2.8). Then,\n(ii) Conversely, (m \u2265 2), let \u03be be a Kloc\n\u2229 C 2 -regular solution of SPDE(L\n\u03be(t, X(t, x)) \u2261 x and \u03be is the strictly monotonic inverse flow X \u22121 := \u03be X of X. Moreover, uniqueb \u03c3,\u03bc , \u2212\u03c3\u2202z ) in the class of K1,\u03b4 \u2229 C 2 -regular solutions.\nness holds true for the SPDE(L\nloc\n\nComment When the coefficients (\u03bc, \u03c3) of the SDE are non random, in a multi-dimensional case,\nb \u03c3,\u03bc , \u2212\u03c3\u2202z ) is known as the stochastic transport equation in Zhang [40] or in Constantin\nthe SPDE(L\nand Iyer [3].\nProof. (i) According to notations of Theorem 2.5, since \u03be X is the inverse of X, we have:\n\u0010\n\u0001\u0011\n1\n\u03bb(t, \u03be X (t, z)) = \u03bc t, X t, \u03be X (t, z) = \u03bc(t, z),\n\u03bezX (t, z) =\n,\nXx (t, \u03be X (t, z))\n\u0011\n\u0010\n\u0001\n\u03c3 t, X t, \u03be X (t, z)\n= \u2212\u03bezX (t, z)\u03c3(t, z)\n\u03b8(t, \u03be X (t, x)) = \u2212\nXx (t, \u03be X (t, z))\n\nb \u03c3,\u03bc (\u03be X )(t, z). So \u03be X is solution of the SPDE (2.8).\nwhich easily leads to \u03bc\u0303(t, \u03be X (t, z)) = L\nt,z\n(ii) Let now turn to the converse implication by starting from a given monotonic solution \u03be of\n1,\u03b4\nb \u03c3,\u03bc (\u03be)dt.\nclass Kloc\n\u2229 C 2 of the SPDE: d\u03be(t, z) = \u2212\u03bez (t, z)\u03c3(t, z).dWt + L\nt,z\na) From Theorem 2.2, \u03be is regular enough to use It\u00f4-Ventzel's formula with the solution X(t, x) =\nXtx of the SDE(\u03bc, \u03c3) to compute the dynamics of H(t, x) = \u03be(t, X(t, x)). In the next equation, we\ndo not recall the parameter x.\ndHt\n\n=\n+\n=\n=\n\n\u0001\n\u2212 \u03bez (t, Xt )\u03c3(t, Xt ) \u2212 \u03bez (t, Xt )\u03c3(t, Xt ) .dWt\n\u0010\n\u0011\nb \u03c3,\u03bc (\u03be) + 1 \u03bezz k\u03c3k2 + \u03bc \u03bez + \u2202z (\u2212\u03bez \u03c3).\u03c3 (t, Xt )dt\nL\n2\n\u0010\n\u0011\n1\n1\n\u03bezz k\u03c3k2 + \u03bez (\u2202z k\u03c3k2 ) \u2212 \u2202z (\u03bez )k\u03c3k2 \u2212 \u03bez (\u2202z k\u03c3k2 ) (t, Xt )dt\n2\n2\n0\n\nThe random field H(t, x) = \u03be(t, X(t, x)) is constant in time and equal to its initial condition x.\nThis finishes the proof that X is the inverse flow of \u03be.\n\n17\n\n\fb) Since SDE(\u03bc, \u03c3) is of S m,\u03b4 , there is only one solution X. Then any \"regular\" solution \u03be of the\nSPDE is the inverse of X and then is unique.\nNext result, useful for applications, is a slight extension of the previous one. It establishes a connection between a more general second order SPDE and two SDEs. As discussed in the following,\nthis connection is in the core of the study of consistent dynamic utilities. It is based on the observation that if \u03be is the inverse of SDE(\u03bcX , \u03c3 X ) monotonic solution X and if \u03c6 \u2208 C 2 a regular\nmonotonic function, the process X(., \u03c6(x)) satisfies the same SDE(\u03bcX , \u03c3 X ), and so its inverse\n\u03c6\u22121 (\u03be. (z)) satisfies the same SPDE than \u03be. The extension, given in the following result describes\nthe dynamics of compound processes Y (t, \u03be(t, z)) and \u03be(t, X(t, x) for regular It\u00f4 semimartingales\nY and X and show how to solve the associated SPDEs.\n1,\u03b4\nTheorem 2.7. Let X be a solution of SDE(\u03bcX , \u03c3 X ) and \u03be a Kloc\n\u2229 C 2 -regular solution (\u03b4 > 0) of\nX\nX\n\u03c3\n,\u03bc\n1\nX\n2\nX\nX\nX\nb , \u2212\u03c3 \u2202z ), where L\nb =L\nb\n= \u2202z (k\u03c3 (t, z)k \u2202z ) \u2212 \u03bcX (t, z)\u2202z .\nthe SPDE(L\nt,z\n1,\u03b4\nKloc\n\nt,z\n\n2\n\n(i) Let Y be a solution of class\n\u2229 C of SDE(\u03bcY , \u03c3 Y ) with initial condition \u03c6 \u2208 C 2 . Then the\nrandom field Y (t, \u03be(t, z)) = G(t, z) evolves as,\ndG(t, z) =\n\u2212\n\n2\n\n\u03c3 Y (t, G(t, z)).dWt + \u03bcY (t, G(t, z))dt\n\u0002\nb X (G)(t, z))dt\n\u2202z G(t, z)\u03c3 X (t, z) dWt + \u03c3yY (t, G(t, z))dt] + L\nt,z\n\n(2.9)\n\n(ii) Let X be a solution of SDE(\u03bc, \u03c3) with initial condition \u03c8(x). Denote by \u2206\u03bc(t, z) := \u03bcX (t, z)\u2212\n\u03bc(t, X t ) and \u2206\u03c3(t, z) := \u03c3 X (t, z) \u2212 \u03c3(t, X t ). Then the random field \u03be(t, X t ) evolves as\n\u0002\n\u0001\n\u0003\nb \u2206 (\u03be)(t, X t ).\nd\u03be(t, X t ) = \u2212\u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) .(dWt \u2212 \u03c3 x (t, X t )dt) + L\n\n(2.10)\n\n1,\u03b4\n(iii) Solvable SPDE: Let G be a solution of class Kloc\n\u2229 C 2 -regular of the SPDE (2.9); then the\nprocess G(t, X t (x)) with initial condition G(0, \u03c8(x)) evolves as\n\ndG(t, X t ) =\n\u2212\n\n\u03c3 Y (t, G(t, X t )).dWt + \u03bcY (t, G(t, X t ))dt\n(2.11)\n\u0002\n\u0003\nX\nY\n\u2206\nb (G)(t, X t )dt\nGz (t, X t ) \u03c3 \u2212 \u03c3)(t, X t ). dWt + (\u03c3y (G) \u2212 \u03c3 x )(t, X t )dt + L\n\n(iv) In particular, G(t, Xt (\u03c6(y)) is a solution of the SDE(\u03bcY , \u03c3 Y ) with initial condition \u03c6(y). If\nuniqueness holds true for this equation, then G(t, z) = Yt (t, \u03be(t, z)) and uniqueness also holds true\nfor the SPDE (2.9).\n\nNote the different nature of assumptions (which may be equivalent) in the assertions of this theorem. In (i), we assume that the coefficients are regular enough such that Y satisfies the It\u00f4-Ventzel\nassumptions and such that the inverse \u03be of X is an It\u00f4 semimartingale, while in (ii) we only suppose the existence of X (without regularity), but in return we assume the existence of a smooth\nsolution G of the SPDE (2.9).\nOtherwise, remark that the first line in (2.9), associated with Y , is purely the SDE part of the\ndynamics of G while the second corresponds to the partial differential part. This writing suggests\na simple method for solving such equations. Indeed, when considering any SPDE, if we are able\nto rewrite it in the form (2.9), then we can hope solve it (if regularity of the identified coefficients\nholds) by associating two SDEs, and then by composing with the solution associated with the\npartial differential part (X in our result); this is the aim of assertions ((iii), (iv)).\n\n18\n\n\fProof. (i) The proof is based on the It\u00f4-Ventzel formula, applied to Y as random field, and \u03be(t, z)\nas semimartingale; that leads to\n\u0001\n= \u03bcY (t, G(t, z))dt + \u03c3 Y (t, G(t, z)) \u2212 Yy (t, \u03be(t, z))\u03bez (t, z)\u03c3 X (t, z) .dWt\n1\nb Z (\u03be)dt\n+\nYyy (t, \u03be(t, z))k \u2212 \u03bez (t, z)\u03c3 X (t, z)k2 + Xx (t, \u03be(t, y))L\nt,z\n2\n+ < dYy (t, y), d\u03be(t, z) > |y=\u03be(t,z)\n\u0001\n= \u03bcY (t, \u03be(t, z))dt + \u03c3 Y (., G) \u2212 Yy (., \u03be)\u03bez \u03c3 X (t, z).dWt\n\u00021\n\u0003\nb X (\u03be) \u2212 Gz \u03c3yY (., G).\u03c3 X (t, z)dt\n+\nYyy (., \u03be)k\u03bez \u03c3 X k2 + Yy (., G)L\n2\n\u0001\u0001\nNow using identity \u2202z Yy t, \u03be(t, z) = Yyy (t, \u03be(t, z))\u03bez (t, z) and Gz (t, z) = Yy (t, \u03be(t, z))\u03bez (t, z), it\nfollows, at first, that\ndG(t, z)\n\nYyy (., \u03be)k \u2212 \u03bez \u03c3 X k2 + Yy (., \u03be)\u2202z k\u03c3 X k2 \u03bez\n\n\u0001\n\n=\n=\n\n\u0001\u0001\n\u0001\n\u0001\n\u2202z Yy (., \u03be) \u03bez k\u03c3 X k2 + Yy (., \u03be)\u2202z k\u03c3 X k2 \u03bez\n\u0001\n\u0001\n\u2202z Yy (., \u03be)\u03bez k\u03c3 X k2 = \u2202z k\u03c3 X k2 Gz\n\nSecond, by injecting this identity in the dynamics of G, we obtain\n\n\u0001\n\u03c3tY (G(t, z)) \u2212 Gz (t, z)\u03c3tX (z) .dWt\n\u0010\n\u0001\u0011\nb X (G) + \u03bcY (G(t, z)) \u2212 \u2202z \u03c3 Y (t, G(t, z)).\u03c3 X (t, z) dt\n+\nL\nt,z\nt\n\ndG(t, z) =\n\nIn a simpler formulation, that is equivalent to,\ndG(t, z) =\n\u2212\n\n\u03c3 Y (t, G(t, z)).dWt + \u03bcY (t, G(t, z))dt\n\u0002\nb X (G)(t, z)dt\n\u2202z G(t, z)\u03c3 X (t, z) dWt + \u03c3yY (t, G(t, z)] + L\n\nIn the particular case, where Y (t, x) = F (x), \u03bcY \u2261 0 and \u03c3 Y \u2261 0 and the result is obvious.\n(ii) Again, It\u00f4-Ventzel calculus yields to\nh1\ni\n\u0001\nd\u03be(t, X t ) =\n\u2202y ||\u03c3 X (t, y)||2 \u03be(t, y) (t, X t ) \u2212 \u03bcX (t, X t )\u03bez (t, X t ) dt\n2\nh\n1\n+ \u03bez (t, X t )\u03c3(t, X t )dWt + \u03bez (t, X t )\u03bcX (t, X t ) + \u03bezz (t, X t )||\u03c3(t, X t )||2\n2\ni\n\u0001\nX\nX\n\u2212 \u03beyy (t, X t )\u03c3 (t, X t ) + \u03bey (t, X t )\u03c3z (t, X t ) .\u03c3(t, X t ) dt\n\u2212\n\n\u03bez (t, X t )\u03c3 X (t, X t )dWt\n\nand by arranging the terms properly we get\n\u0010\n\u0011\n\u0001\nd\u03be(t, X t ) = \u2212\u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) dWt \u2212 \u03bez (t, X t ) \u03bcX (t, X t ) \u2212 \u03bc(t, X t ) dt\n\u0010\n\u0011\n1\n\u03bezz (t, X t ) ||\u03c3(t, X t )||2 + ||\u03c3 X (t, X t )||2 \u2212 2\u03c3 X (t, X t ).\u03c3(t, X t ) dt\n+\n2\n\u0010\n\u0011\n+ \u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) .\u03c3zX (t, X t )dt\n\u0010\n\u0011\n\u0001\n= \u2212\u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) dWt \u2212 \u03bez (t, X t ) \u03bcX (t, X t ) \u2212 \u03bc(t, X t ) dt\n+\n\n1\n\u03bezz (t, X t )||\u03c3(t, X t ) \u2212 \u03c3 X (t, X t )||2 dt\n2\n\u0010\n\u0011\n\n+ \u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) .\u03c3xX (t, X t )dt\n\n19\n\n\fSubsequently, by introducing new coefficients \u2206\u03bc and \u2206\u03c3 as follows:\n\u2206\u03bc(t, y) := \u03bcX (t, y) \u2212 \u03bc(t, X t ) et \u2206\u03c3(t, y) := \u03c3 X (t, y) \u2212 \u03c3(t, X t )\n\u0001\nthe last line becomes \u2202y ||\u2206\u03c3(t, y)||2 \u03bez (t, X t ) which yields to the desired formula:\n\u0010\n\u0011\nb \u2206 (\u03be)(t, X t )dt\nd\u03be(t, X t ) = \u2212\u03bez (t, X t ) \u03c3 X (t, X t ) \u2212 \u03c3(t, X t ) dWt + L\n=\n\nb \u2206 (\u03be)(t, X t )dt\n\u2212\u03bez (t, X t )\u03c3\u0302(t, X t )dWt + L\n\n(iii) The properties of the random field G(t, X t ) are obtained once again from It\u00f4-Ventzel's formula,\nin a very similar way than for \u03be(t, X t ), since the second line of Equation (2.9) has the same form\nthan the SPDE of \u03be except that the Brownian dW is replaced by dW. + \u03c3xY (G)dt. So we obtain\nEquation (2.11).\n\nBack to Progressive Utilities Let now come back to progressive utilities U. The results\nof this section will be of great use in the rest of this work, especially when we focus on dynamic\noptimal portfolios. We give sufficient conditions on progressive dynamic utilities so that assumpey of Ux is a semimartingale.\ntions of Theorem 1.1 are satisfied, in particular that the inverse \u2212U\nThese assumptions are made on the coefficients of the intrinsic SDE(\u03bc, \u03c3) and not on the local\ncharacteristics (\u03b2, \u03b3), since essential results are obtained from SDEs properties.\nTheorem 2.8. Consider SDE(\u03bc, \u03c3) of class S 1,\u03b4 , \u03b4 \u2208 (0, 1] and let Z be its unique monotonic\n1,\u03b5\nsolution of class Kloc\nfor any 0 < \u03b5 < \u03b4 . For any deterministic utility function u s.t. ux is\nRx\nintegrable near to x = 0, define U (t, x) = 0 Zt (ux (z))dz. Then\nRx\n(i) U (t, x) is an It\u00f4 semimartingale with local characteristics \u03b2(t, x) = 0 \u03bc(t, Zt (ux (z))dz and\nRx\n\u03b3(t, x) = 0 \u03c3(t, Zt (ux (z))dz.\n\n2,\u03b5\n(ii) U is a progressive utility with derivative Ux (t, x) = Zt (ux (x)). Moreover, U is a Kloc\n2,\u03b5\n2,\u03b5\nsemimartingale for any 0 < \u03b5 < \u03b4, with local characteristics (\u03b2, \u03b3) are of class Kloc \u00d7 Kloc for\nany \u03b5 < \u03b4.\n\n(iii) If the SDE(\u03bc, \u03c3) is of class S m,\u03b4 , (m \u2265 3, \u03b4 \u2208 (0, 1]), then, the progressive convex conjugate\ne of U is a Km\u22121,\u03b5 -semimartingale.\nutility U\nloc\ney = \u2212(Ux )\u22121 is a Km\u22122,\u03b5 -semimartingale, solution of the SDE(\u03c3\u0303, \u03bc\u0303) in S m,\u03b5 for\n\u2212 Its derivative U\nloc\nany 0 < \u03b5 < \u03b4, where\n\u03c3\u0303(t, \u2212z) =\n\n\u03b3x (t, z)\n,\nUxx (t, z)\n\n\u03bc\u0303(t, \u2212z) =\n\n\u0010\n1\nk\u03b3x (t, z)k2 \u0001\u0011\n1\n\u03b2x (t, z) \u2212 \u2202x\nUxx (t, z)\n2\nUxx (t, z)\n\n(2.12)\n\ne and U\ney are,\n\u2212 Assumptions of Theorem 1.5 are satisfied and the dynamics of U\ne (t, y) =\ndU\n\ney (t, y) =\ndU\n\n\u0001\neyy (t, y)k\u03c3t (y) k2 dt\ney (t, y)).dWt + \u03b2(t, \u2212U\ney (t, y))dt + 1 U\n\u03b3(t, \u2212U\n2\n\u00101\n\u0011\n\u0001\n2\neyy (t, y)\u03c3(t, y).dWt +\ney ) (t, y) \u2212 \u03bc(t, y)\u2202y (U\ney )(t, y)) dt\n\u2212U\n\u2202y k\u03c3k \u2202y (U\n2\n\nConcluding remarks on these two sections Having introduced the progressive utilities and\ntheir convex conjugate in Section 1, we have studied in detail conditions ensuring concavity and\nInada conditions, by using that Ux is a monotonic solution of a \"regular\" SDE. But the main\n\n20\n\n\fresult given in Section 2 concerns the inverse flow \u03be of the monotonic solution X of a SDE, and the\nsufficient conditions on the coefficients ensuring the semimartingale property of the inverse flow \u03be.\nThe introduction of the adjoint SPDE satisfied by \u03be and the result of Theorem 2.7 are a powerful\ntool for that follows. We turn now to the study of additional condition called consistency property\nthat we introduce in the next section.\n\n3\n3.1\n\nConsistent Dynamic Utilities\nDefinition of Consistent Dynamic Utilities\n\nThe notion of progressive utility is very general and should be specified so as to represent more\nrealistically the dynamic evolution of the individual preferences of an investor in a given financial\nmarket. The utility input provides a differential constraint on the risk attitude of the investor in\nx (x,t)\nterms of preference for higher or lower wealth, through the local risk tolerance \u03c4 U (x, t) = \u2212 UUxx\n(x,t) ,\nand, that we call, utility market risk premium \u03b7 U (t, x) = U\u03b3xx(t,x)\n(x,t) , revealing the interplay between\nthe investment universe and the risk attitude.\nThe market input is described by a vector space X of portfolios incorporating feasibility\nand trading constraints and high liquidity. Several interpretations of the subclass of admissible\nportfolios can be done. The first one, proposed by Musiela and Zariphopoulou is that this class\ndescribes all investment universe. The second one is as follows: the market inputs may be viewed as\na calibration universe, and the class X as a test-class of processes. The existence of an admissible\nportfolio giving the maximal satisfaction to the investor, which will be preserved at all times in the\nfuture, explains the martingale property in the definition below. On the other hand if the strategy\nin X fails to be optimal then it is better not to make investment. The optimal portfolio may\nbe viewed as a benchmark for the investor using the utility U . Once his consistent progressive\nutility is defined, an investor can then turn to a portfolio optimization problem in a larger financial\nmarket or to calculate indifference prices. Following [25, 29], a X -consistent dynamic utility is\ndefined as follows.\nDefinition 3.1 (X -consistent dynamic utility). A X -consistent dynamic utility U = {U (t, x); t \u2265\n0, x > 0} is a progressive utility with the following additional properties:\nConsistency with the test-class: For any admissible wealth process X \u2208 X ,\nE(U (t, Xt )/Fs ) \u2264 U (s, Xs ), \u2200s \u2264 t a.s.\nExistence of optimal wealth: For any initial wealth x > 0, there exists an optimal wealth\nprocess X \u2217 \u2208 X such that X0\u2217 = x, and for all s \u2264 t,\nU (s, Xs\u2217 ) = E(U (t, Xt\u2217 )/Fs ) \u2200s \u2264 t a.s.\nIn short for any admissible wealth X \u2208 X , U (., X. ) is a positive supermartingale and a martingale\nfor the optimal-benchmark wealth X \u2217 .\nRemark 3.1. (i) The martingale property can be weakened by the following localization procedure, if there exists a sequence of increasing stopping times Tn (X0 ) \u0580 \u221e on the random interval\n\n21\n\n\f[0, Tn (X0 )], U (., X.\u2217 ) is a martingale.\n(ii) Note that the initial condition U (0, .) = u(.) is part of the definition, in particular u is a\ndeterministic utility function which is fixed a priori independently of the given financial market\nand in particular of X .\n(iii) So a X -consistent dynamic utility is a constant in time deterministic function only when the\ntest-portfolios are local martingales. In this case, the optimal strategy is to do nothing.\n(iv) Our definition differs slightly from the original ([25]) since we do not require that the wealth\nprocesses X are discounted. This variation offers more options and allows us to study the invariance of the class of dynamic utilities by change of numeraire. In any case, there is no fixed\nhorizon.\n\n3.2\n\nThe investment universe\n\nWe consider a incomplete It\u00f4 market, equipped with a n-standard Brownian motion, W with\nBrownian coordinates (W1 , W2 , ..., Wn )T (n \u2265 d) and characterized by a short rate (rt ) and a\nn-dimensional risk premium vector (\u03b7). All these processes are defined on the filtered probability\nspace (\u03a9, Ft\u22650 , P) satisfying usual assumptions, with minimal integrability assumptions. Since\nwe only need to know the class of admissible portfolios, we immediately give the mathematical\ndefinition of this class, based on the self-financing equation without arbitrage. The market incompleteness is modeled as in Lehoczky, Karatzas, Shreve & Xu [16]. The notations are the same\nthan in Karatzas and Shreve [17] where the interested reader may be find all complementary\ninformation.\nDefinition 3.2 (Test portfolios). (i) A positive It\u00f4 semimartingale X \u03ba is called a portfolio, or\nadmissible wealth process if\n\u0002\n\u0003\ndXt\u03ba = Xt\u03ba rt dt + \u03bat .(dWt + \u03b7t dt) , \u03bat \u2208 Rt .\n\n(3.1)\n\nRT\nwhere \u03ba is a n-dimensional vector, progressive such that 0 k\u03bat k2 dt < \u221e, a.s., measuring the\nvolatility vector of the wealth X \u03ba .\n(ii) The family of admissible wealth processes, also called test portfolios is defined by some restrictions on the volatility vector \u03ba; we assume there exists progressive family of vector spaces (Rt )\nsuch that for any t, \u03bat \u2208 Rt .\n(iii) The family of test portfolios is denoted by X . It may be easy to verify that X is convex.\nThe following short notations will be used extensively. Let R be a vector subspace of Rn . For any\nx \u2208 Rn , xR is the orthogonal projection of the vector x onto R and x\u22a5 is the orthogonal projection\nonto R\u22a5 .\nThe existence of a risk premium \u03b7 is a possible formulation of the absence of arbitrage opportunity.\nSince from (3.1), the impact of the risk premium on the wealth dynamics only appears through\nthe term \u03bat .\u03b7t for \u03bat \u2208 Rt , there is a \"minimal\" risk premium (\u03b7tR ), the projection of \u03b7t on the\nspace Rt (\u03bat .\u03b7t = \u03bat .\u03b7tR ), to which we refer in the sequel. Moreover, the existence of \u03b7 R is not\nenough to insure the existence of equivalent martingale measure, since in general we do not know if\nRt\nRt\nR\nthe exponential local martingale L\u03b7t = exp( 0 \u2212\u03b7sR .dWs \u2212 12 0 |\u03b7sR |2 ds) is a uniformly integrable\nmartingale, density of an equivalent martingale measure. Nevertheless, we are interested into the\n\n22\n\n\fclass of the so-called state price density processes Y \u03bd (taking into account the discount factor)\nwho will play the same role for the dynamic conjugate utility, than the wealth processes X \u03ba for\nthe dynamic utility U .\nDefinition 3.3 (State price density process). (i) A It\u00f4 semimartingale Y \u03bd is called a state price\ndensity process if for any wealth process X \u03ba , \u03ba \u2208 R, Y \u03bd X \u03ba is a local martingale. It follows that\nY \u03bd satisfies,\ndYt\u03bd = Yt\u03bd [\u2212rt dt + (\u03bdt \u2212 \u03b7tR ).dWt ], \u03bdt \u2208 R\u22a5\nY0\u03bd = y\n(3.2)\nt ,\n(ii) Denote Y the convex family of all state density processes Y \u03bd where \u03bd \u2208 R\u22a5 and observe that\nRt\nRt\n\u0001\nY \u03bd is the product of Y 0 (\u03bd = 0) by the density martingale L\u03bdt = exp 0 \u03bds .dWs \u2212 1/2 0 |\u03bds |2 ds .\n\n3.3\n\nConsistent Dynamic Utility and Portfolio Optimization\n\nX -consistent dynamic utility and HJB constraint In Paragraph 1.2, more precisely\nin Theorem 1.1, we have characterized progressive utilities in terms of their local characteristics\n(\u03b2, \u03b3) as well as in terms of the parameters (\u03bc, \u03c3) of the intrinsic SDE (1.3) satisfied by Ux . In this\nsection, we are concerned with the constraint induced on the drift characteristic \u03b2 of the dynamic\nutility by the consistency property. The consistency property plays the same role that the dynamic\nprogramming principle in the classical theory of backward expected utility maximization, (see for\nexample H. Pham [30]). Thanks to It\u00f4-Ventzel's formula (Theorem 1.4), constraints on the local\ncharacteristics (\u03b2, \u03b3) of U lead to non standard Hamilton-Jacobi-Bellman Stochastic PDE. As in\nthe classical case, the main parameters of the SPDE are the risk tolerance process and the utility\nmarket risk premium.\nDefinition 3.4 (Utility risk tolerance and risk premium). In this financial framework, the utility\nx (t,x)\nrisk tolerance random field is defined by \u03c4 U (t, x) = \u2212 UUxx\n(t,x) and the utility risk premium random\nfield by \u03b7 U (t, x) =\n\n\u03b3x (t,x)\nUx (t,x)\n\nwith its two components \u03b7 U,R \u2208 R, \u03b7 U,\u22a5 \u2208 R\u22a5 .\n\nObserve that Condition (1.8) in Corollary 1.3 states that \u03b7 U is bounded in x with random bound.\nThe supermartingale property of U (., X \u03ba ) implies that the drift of these processes must be negative\nfor all \u03ba \u2208 R, and equal to 0 for some \u03ba\u2217 . We proceed by verification as in the classical case.\n2,\u03b4\nTheorem 3.1 (Utility-SPDE). Let U be a progressive utility which is a Kloc\n-semimartingale\n(\u03b4 \u2208 (0, 1]) with local characteristics (\u03b2, \u03b3). Assume the drift constraint to be of HJB type,\n\nn\n1\nUx (t, x)\u03b7tR + \u03b3x (t, x) \u0001o\n.\n\u03b2(t, x) = \u2212Ux (t, x)rt x \u2212 Uxx (t, x) inf kx\u03bak2 + 2x\u03ba.\n\u03ba\u2208R\n2\nUxx (t, x)\n\n(i) The minimum of the quadratic form (3.3) is achieved at the optimal policy \u03ba\u2217 given by\n(\nx\u03ba\u2217t (x)\n= \u2212 Uxx1(t,x) (Ux (t, x)\u03b7tR + \u03b3xR (t, x))\nand \u03b2(t, x)\n\n= \u2212Ux (t, x)xrt + 12 Uxx (t, x)kx\u03ba\u2217 (t, x)k2\n\n(3.3)\n\n(3.4)\n\n(ii) For any \u03ba \u2208 R, the process U (., X.\u03ba ) is a supermartingale, and a local martingale for any\n\u0001\nsolution (if there exists) X \u2217 of the SDE dXt\u2217 = Xt\u2217 rt dt+\u03ba\u2217 (t, Xt\u2217 ).(dWt +\u03b7t\u03c3 dt) . Under additional\nintegrability assumptions, the X -consistency property is satisfied.\n\n23\n\n\fRemark 3.2. In the classical backward framework, similar SPDE is investigated by Mania and\nTevzadze[22] using BSDE tools, and by Englezios and Karatzas [14]. (See also Remark 4.2)\nProof. By It\u00f4-Ventzel's formula (Theorem 1.4), for any admissible portfolio X \u03ba ,\n\u0010\n\u0011\ndU (t, Xt\u03ba ) =\nUx (t, Xt\u03ba )Xt\u03ba \u03bat + \u03b3(t, Xt\u03ba ) .dWt\n\u0010\n\u0011\n1\n+\n\u03b2(t, Xt\u03ba ) + Ux (t, Xt\u03ba )rt Xt\u03ba + Uxx (t, Xt\u03ba )Q(t, Xt\u03ba , \u03bat ) dt,\n2\nR\nU\n(t,\nx)\u03b7\n+\n\u03b3\n(t,\nx) \u0001\nx\nx\nt\nwhere Q(t, x, \u03ba) := kx\u03bak2 + 2x\u03ba.\n.\nUxx (t, x)\n\nSince \u03ba \u2208 R, Q(t, x, \u03ba) is only depending on \u03b3xR (t, x), the orthogonal projection of \u03b3x (t, x) on\nRt . The minimum Q\u2217 (t, x) = inf \u03ba\u2208R Q(t, x, \u03ba) of the quadratic form Q(t, x, \u03ba) is achieved at the\noptimal policy \u03ba\u2217 given by\n(\n\u0001\nx\u03ba\u2217t (x) = \u2212 Uxx1(t,x) Ux (t, x)\u03b7tR + \u03b3xR (t, x)\n(3.5)\n1\nR\nR\n2\n\u2217\n2\nQ\u2217 (t, x) = \u2212 Uxx (t,x)\n2 kUx (t, x)\u03b7t + \u03b3x (t, x))k = \u2212kx\u03bat (x)k .\nThen the drift of the semimartingale U (t, Xt\u03ba ) satisfies\n\n\u2264\n=\n\n1\n\u03b2(t, Xt\u03ba ) + Ux (t, Xt\u03ba )rt Xt\u03ba + Uxx (t, Xt\u03ba )Q(t, Xt\u03ba , \u03bat )\n2\n1\n\u03b2(t, Xt\u03ba ) + Ux (t, Xt\u03ba )rt Xt\u03ba + Uxx (t, Xt\u03ba )Q\u2217 (t, Xt\u03ba , \u03bat )\n2\n1\n\u03b2(t, Xt\u03ba ) + Ux (t, Xt\u03ba )rt Xt\u03ba \u2212 Uxx (t, Xt\u03ba )kXt\u03ba \u03ba\u2217t (Xt\u03ba )k2\n2\n\nThe proof is complete.\nThe characteristics of the conjugate progrese\nsive utility U can be computed directly from Theorem 1.5. Given that \u03b2 is associated with an\noptimization program, we show that the dual drift \u03b2\u0303 is also constrained by a HJB type relation\ne is consistent with a family of state price\nin the new variables. So, the convex conjugate utility U\ndensity processes (Definition 3.3). As observed in Theorem 2.8 (ii), the study of the conjugate\ne requires stronger assumptions than the study of U .\nutility U\n\nConjugate of consistent dynamic utility\n\nTheorem 3.2. Let U a progressive utility with characteristics (\u03b2, \u03b3) satisfying Assumptions of\ne and its marginal conjugate utility\nTheorem 2.8. Then its progressive convex conjugate utility U\ne y are It\u00f4 random fields with local characteristics (\u03b2\u0303, \u03b3\u0303) and (\u03b2\u0303y , \u03b3\u0303y ) respectively. Assume the\nU\ndrift constraint of U to be of HJB type (3.3).\ne are given by:\n(i) The local characteristics of the convex conjugate U\n\uf8f1\ney (t, y)), \u03b3\u0303y (t, y) := \u2212\u03b3x (t, \u2212U\ney (t, y)).U\neyy (y)\n\uf8f4\n\uf8f2 \u03b3\u0303(t, y) := \u03b3(t, \u2212U\n\u0001\n(3.6)\n1\neyy (t, y)\u03b7tR k2\ney (t, y)rt +\n\uf8f4\nk\u03b3\u0303y (t, y)k2 \u2212 k\u03b3\u0303yR (t, y) + y U\n\uf8f3 \u03b2\u0303(t, y) = y U\ne\n2Uyy (t, y)\n\n(ii) The non linear drift \u03b2\u0303(t, y) is associated with the following optimization program:\n\u0001\n\u0001\ney (t, y)rt \u2212 1 y 2 U\neyy (t, y) inf {k\u03bdt \u2212 \u03b7tR k2 + 2 \u03bdt \u2212 \u03b7tR . \u03b3\u0303y (t, y) }\n\u03b2\u0303(t, y) = y U\n\u22a5\neyy (t, y)\n2\n\u03bdt \u2208R\nyU\n\n24\n\n(3.7)\n\n\f(iii) The minimum of this quadratic form is achieved at the optimal policy\ny\u03bdt\u2217 (y) =\n\n\u0001\n\u2212\u03b3\u0303y\u22a5 (t, y)\ney (t, y) = y\u03b7 U,\u22a5 (t, \u2212U\ney (t, y)).\n= \u03b3x\u22a5 t, \u2212U\neyy (t, y)\nU\n\n(iv) Rewritten in terms of optimal strategy, \u03b2\u0303(t, y) becomes\ni\nh\ney (t, y)rt \u2212 1 U\neyy (t, y) ky\u03bdt\u2217 (y) \u2212 y\u03b7tR k2 \u2212 2(y\u03bdt\u2217 (y) \u2212 y\u03b7tR ). \u03b3\u0303y (t, y) .\n\u03b2\u0303(t, y) = y U\neyy (t, y)\n2\nU\n\n(3.8)\n\ne (t, Yt\u03bd ) is a submartingale,\n(v)For any admissible state price density process Y \u03bd \u2208 Y with \u03bd \u2208 R\u22a5 , U\nand a local martingale for any solution Y \u2217 (if there exists) of the equation dYt\u2217 = Yt\u2217 [\u2212rt dt +\n(\u03bd \u2217 (t, Yt\u2217 ) \u2212 \u03b7tR ).dWt ].\nProof. (i) By Theorem 1.5, the local characteristics (\u03b2\u0303, \u03b3\u0303) of the conjugate random field\ne (t, y)) and \u03b2\u0303(t, y) = \u03b2 1 (t, \u2212U\ne (t, y)) where \u03b2 1 (t, x) = \u03b2(t, x)\nare given by \u03b3\u0303(t, y) = \u03b3(t, \u2212U\n1\n2\n2Uxx (t,x) k\u03b3x (t, x)k . Combining this identity with the HJB-constraint \u03b2(t, x) = \u2212Ux (t, x)xrt\n1\n\u2217\n2\n2 Uxx (t, x)kx\u03ba (t, x)k yields to\n\u0011\n\u0010\n1\nk\u03b3x (t, x)k2 \u2212 kUx (t, x)\u03b7tR + \u03b3xR (t, x)k2 .\n\u03b2 1 (t, x) = \u2212xUx (t, x)rt \u2212\n2Uxx (t, x)\n\ne\nU\n\u2212\n+\n\n(ii) & (iii) Since the norm of the projection on Rt is the distance to the orthogonal vector space\nR\u22a5\nt ,\n\u03b3 R (t, x)\nk x\n+ \u03b7tR k2 := k\u03b7 U,R (t, x) + \u03b7tR k2 = inf k\u03bd \u2212 (\u03b7 U,R + \u03b7tR )k2 .\nUx (t, x)\n\u03bd\u2208R\u22a5\nt\n\nUsing the relation |x|2 \u2212 |y|2 = |x \u2212 y|2 + 2(x \u2212 y).y, we get:\nk\u03b7 U,R (t, x) + \u03b7tR k2 \u2212 k\u03b7 U (t, x)k2\n\n=\n\ninf {k\u03bd \u2212 \u03b7tR k2 + 2(\u03bd \u2212 \u03b7tR ).\u03b7 U (t, x)}\n\n\u03bd\u2208R\u22a5\nU,\u22a5\n\n= k\u03b7\n\n(t, x) \u2212 \u03b7tR k2 + 2(\u03b7 U,\u22a5 (t, x) \u2212 \u03b7tR ).\u03b7 U (t, x).\n\nBy coming back to \u03b2 1 , we can make the minimization program to be explicit,\n\u03b2 1 (t, x) + xUx (t, x)rt\n\n=\n=\n\n\u0001\nUx2 (t, x)\ninf {k\u03bd \u2212 \u03b7tR k2 + 2(\u03bd \u2212 \u03b7tR ).\u03b7 U (t, x)}\n\u22a5\nUxx t, x) \u03bd\u2208R\n\u0001\nUx2 (t, x)\nk\u03b7 U,\u22a5 (t, x) \u2212 \u03b7tR k2 + 2(\u03b7 U,\u22a5 (t, x) \u2212 \u03b7tR ).\u03b7 U (t, x) .\nUxx t, x)\n\nThe minimum in the quadratic form is achieved at \u03b7 U,\u22a5 (t, x), corresponding the optimal strategy\ney (t, y)). From this and the identities,\n\u03bdt\u2217 (y) = \u03b7 U,\u22a5 (t, \u2212U\ney (t, y))\nUx2 (t, \u2212U\n1 e\n= \u2212 y2U\nyy (t, y),\ney (t, y))\n2\n2Uxx (t, \u2212U\n\ney (t, y)) = \u2212 \u03b3\u0303y (t, y)\n\u03b7 U (t, \u2212U\neyy (t, y)\nyU\n\nwe get the desired formula for \u03b2\u0303 both in (3.6) and in (3.8), i.e.\n\u03b2\u0303(t, y)\n\ney (t, y)rt +\n= yU\n\n1\n\neyy (t, y)\u03b7tR k2\nk\u03b3\u0303y (t, y)k2 \u2212 k\u03b3\u0303yR (t, y) + y U\n\n\u0001\n\neyy (t, y)\n2U\ni\nh\neyy (t, y) ky\u03bdt\u2217 (y) \u2212 y\u03b7tR k2 \u2212 2(y\u03bdt\u2217 (y) \u2212 y\u03b7tR ). \u03b3\u0303y (t, y) .\ney (t, y)rt \u2212 1 U\n= yU\neyy (t, y)\n2\nU\n\n(iv) is a simple rewriting of the HJB constraint on \u03b2\u0303.\n(v) The supermartingale property is proved in very similar manner than for dynamic utility, (proof\nof Proposition 3.2 (ii) and (iii)).\n\n25\n\n\f4\n\nMarginal Utility SPDE and Optimal SDEs\n\nAs seen in Section 1 and 2, our utility characterization is based on the marginal utility. So, we\nfocus now on the dynamics of the random field Ux . As established in Theorem 3.1, the drift\ncharacteristic of X -consistent utility is constraint by a HJB type condition (3.3)\n\u03b2(t, x) = \u2212Ux (t, x)xrt + 12 Uxx (t, x)kx\u03ba\u2217t (x)k2 .\nThe diffusion characteristic \u03b3x is explained by the optimal policies of the primal and dual problems,\nTheorem 3.1 and Theorem 3.2:\n\u03b3x (t, x) = \u2212Uxx (t, x)x\u03ba\u2217t (x) \u2212 Ux \u03b7tR + Ux (t, x)\u03bdt\u2217 (Ux (t, x))\nThe characteristic \u03b3x (t, x) may be rewritten in a more convenient form, using the diffusion coefficient of the optimal policy \u03c3t\u2217 (x) := x\u03ba\u2217t (x), and the diffusion coefficient of the optimal state price\ney (t, y)) as,\ndensity \u03c3\u0303t\u2217 (y) = \u2212y\u03b7tR + \u03b3x\u22a5 (t, \u2212U\n\u03b3x (t, x) = \u2212\u2202x (Ux )(t, x)\u03c3t\u2217 (x) \u2212 Ux (t, x)\u03b7tR + \u03c3\u0303t\u2217 (Ux (t, x))\n\nIt is easy to recognize the diffusion coefficient of the SPDE (2.9) in Theorem 2.7 associated with\nthe SDEs with diffusion parameters \u03c3t\u2217 (x) and \u03c3\u0303t\u2217 (y). Moreover, by taking the x-derivative in the\ndrift constraint \u03b2(t, x) = \u2212Ux (t, x)xrt + 12 Uxx (t, x)kx\u03ba\u2217t (x)k2 = \u2212Ux (t, x)xrt + 21 Uxx (t, x)k\u03c3t\u2217 (x)k2 ,\nit appears naturally a divergence term associated with the optimal policy \u03c3t\u2217 (x) = x\u03ba\u2217t (x) in the\ndrift characteristic of Ux which suggests to use the main theorem (Theorem 2.7) applied to the\noptimal SDEs.\n\n4.1\n\nMain result : solving marginal utility SPDE via optimal SDEs\n\nTo be closer to the notation of Theorem 2.7, we recall all the coefficients of SDEs associated with\nthe optimal policies X \u2217 and Y \u2217 if they exist:\n\uf8f1\n\u2217\n\u2217\nR\n\u2217\n\u2217\n\uf8f4\n\uf8f2 \u03bct (x) := rt x + x\u03bat (x).\u03b7t , \u03c3t (x) := x\u03bat (x)\ney (t, y))\n(4.1)\n\u03bc\u0303\u2217t (y) := \u2212rt y,\n\u03c3\u0303t\u2217 (y) = \u2212\u03b7tR y + \u03b3x\u22a5 (t, \u2212U\n\uf8f4\n\uf8f3 b\u2217\n1\n\u2217\n2\n\u2217\nLt,x\n:= 2 \u2202x (k\u03c3t (x)k \u2202x ) \u2212 \u03bct (x)\u2202x\n\nWe start with the identification of the SPDE satisfied by the marginal utility of a consistent\ndynamic utility imposing only regularity condition on the utility random field and its local characteristics. We will then give additional conditions that guarantee the existence of solution to SDEs\nwith coefficients (\u03bc\u2217 , \u03c3 \u2217 ) and (\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ).\n\n2,\u03b4\nProposition 4.1. Let U be a Kloc\n\u2229 C 3 -regular (\u03b4 > 0) progressive utility U , whose the local\ncharacteristics (\u03b2, \u03b3) satisfy the HJB constraints,\n(\n\u03b3x (t, x) := \u2212Uxx (t, x)\u03c3t\u2217 (x) + \u03b7tR Ux (t, x) + \u03c3\u0303t\u2217 (Ux (t, x))\n(4.2)\n\u03b2(t, x) := \u2212Ux (t, x)x rt + 12 Uxx (t, x)k\u03c3t\u2217 (x)k2\n\nThe marginal utility Ux is a decreasing solution of the SPDE (2.9) with coefficients (\u03bc\u2217 , \u03c3 \u2217 ) and\n(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 )\ndUx (t, x)\n\n=\n\n\u03c3\u0303t\u2217 (Ux (t, x)).dWt + \u03bc\u0303\u2217t (Ux (t, x))dt\n\n\u2212\n\nb \u2217t,x (Ux )dt\n\u2202x Ux (t, x)\u03c3t\u2217 (x). dWt + \u03c3\u0303y\u2217 (t, Ux (t, x))dt) + L\n\n26\n\n(4.3)\n\n\f2,\u03b4\n1,\u03b4\nProof. At first, as U is assumed to be Kloc\n\u2229 C (3) -regular, Ux is of class Kloc\nand its local\n1\n\u2217\n\u2217\ncharacteristics (\u03b2x , \u03b3x ) are of class C in x; then, the vectors \u03c3t (x) = x\u03bat (x) = \u2212(\u03b3xR (t, x) +\ney (t, y)) are also of class C 1 , necessary condi\u03b7tR Ux (t, x))/Uxx (t, x) and \u03c3\u0303t\u2217 (y) = \u2212\u03b7tR y + \u03b3x\u22a5 (t, \u2212U\n\u2217\nb\ntion to define L . By derivation of the local characteristics, it is clear that \u03b2x contains a second\norder term in divergence form associated with x\u03ba\u2217t (x) = \u03c3t\u2217 (x), which leads us to introduce the\nb \u2217t,x associated with (\u03bc\u2217 , \u03c3 \u2217 ). It remains to make some slight transformations on\nadjoint operator L\nthe drift characteristic. Observe that\n\u0001\n\u03b2x (t, x) = \u2212\u2202x (Ux (t, x)xrt ) + \u2202x 12 Uxx (t, x)k\u03c3t\u2217 (x)k2\nb \u2217 (Ux ) \u2212 rt Ux (t, x) + \u2202x Ux (t, x)\u03c3 \u2217 (x).\u03b7 R\n(4.4)\n=L\nt,x\nt\nt\n\u2217\n\u2217\n\u2217\nR\nb\n= Lt,x (Ux ) + \u03bc\u0303t (Ux ) + \u2202x Ux (t, x)\u03c3t (x).\u03b7t\n\nLet us give another interpretation of \u03c3t\u2217 (x).\u03b7tR . Since \u03c3\u0303 \u2217 (t, y) + \u03b7tR y belongs to the vector space\n\u2217\nR\n\u22a5\nR\u22a5\nt the spatial derivative \u03c3\u0303y (t, y) + \u03b7t is also in Rt , yielding to the relation on the scalar products\n\u2212\u03c3t\u2217 (x).\u03b7tR = \u03c3t\u2217 (x).\u03c3\u0303y\u2217 (t, y). Then, Identity (4.3) holds true.\n\nComment (i) There is a fairly subtle relation between the SDE(\u03bcU , \u03c3 U ) introduced in Theo\u0001\ney (t, z) and \u03c3 U (t, z) =\nrem 1.1 to characterize the marginal utility Ux where \u03bcU (t, z) = \u03b2x t, \u2212U\n\u0001\ney (t, z) , and the coefficients of the two optimal SDEs, in particular in terms of diffusion\n\u03b3xU t, \u2212U\ncoefficients. The HJB constraint \u03b3xU (t, x) = \u2212Uxx (t, x)\u03c3t\u2217 (x) + \u03b7tR Ux (t, x)) + \u03c3\u0303t\u2217 (Ux (t, x)) becomes\n\u03c3 U (t, z) =\n\ney (t, z))\n\u03c3t\u2217 (\u2212U\n+ \u03b7tR z + \u03c3\u0303t\u2217 (z)\neyy (t, z)\nU\n\nIn particular, since \u03c3\u0303t\u2217 (z) = \u03c3 U,\u22a5 (t, z), any regularity property on \u03c3 U are immediately transferred by linear projection on \u03c3\u0303t\u2217 (\u2212z). But, only some local regularity on \u03c3t\u2217 (t, z) may be deduced\nfrom global regularity of \u03c3 U . Nevertheless, we can justify the existence of a global optimal wealth\nsolution in a similar way than for the inverse process.\n(ii) Observe also that we obtained a way to generated X -consistent utility only from their local\ncharacteristics and the SPDE 4.3, since we do not use a priori the concavity assumption in the\nfollowing theorem.\n2,\u03b4\nTheorem 4.2 (Main theorem). Let U be a Kloc\n\u2229 C 3 -semimartingale progressive utility U ,\nwhose the local characteristics (\u03b2, \u03b3) satisfy the HJB constraints (4.2); then, the derivative Ux (t, x)\nis solution of the SPDE (4.3).\nAssume, in addition, the existence of two positive adapted stochastic bounds (K 1 , K 2 ) such that\n\u22a5\n(t, x)k \u2264 Kt2 |Uxx (t, x)|, a.s., (K 1 , K 2 ) \u2208 L2 (dt)\nk\u03b3x\u22a5 (t, x)k \u2264 Kt1 |Ux (t, x)|, k\u03b3xx\n\n(4.5)\n\nExistence of optimal processes: (i) The conjuguate SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) is uniformly Lipschitz and\nhas a unique strong solution Yt\u2217 (y), which is strictly positive, and strictly monotonic, with range\n[0, \u221e).\n(ii) The SDE(\u03bc\u2217 , \u03c3 \u2217 ) has only local Lipschitz property, and admits a maximal monotonic solution\nX \u2217 defined a priori only up to a stopping times \u03b6 \u2217 (x). But, the explosion time \u03b6 \u2217 (x) = \u221e a.s.\nsince the processes Ux (., X.\u2217 (x)) is distinguishable from the solution Y.\u2217 (ux (x)).\nConsistency and marginal utility characterization: The random field U is a X -consistent\n\n27\n\n\futility, with optimal wealth X \u2217 . Furthermore, the derivative random field Ux (t, x), solution of the\nSPDE (4.3) is given by Ux (t, x) = Yt\u2217 (ux ((Xt\u2217 )\u22121 (x))). So Ux (t, x) is a strictly decreasing and\npositive process with range [\u221e, 0].\nRemark 4.1. In this framework, we do not need that the inverse process X (t, x) is a semimartingale. Nevertheless, if \u03b3x\u22a5 \u2261 0, then Yt\u2217 (y) = yYt0 and as Ux (t, x) is a semimartingale, ux (X (t, x))\nis also semimartingale, consequently X (., x) is a semimartingale since U (t, x) and u are assumed\nto be of class C 3 .\nProof. (i) The assumption (4.5) implies as above observed that the coefficients (\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) are uniformly Lipschitz in space, and then the SDE has an unique monotonic strong solution Yt\u2217 (y). Since\n\u2217\nby assumption k\u03b3x (t, x)k \u2264 Kt1 |Ux (t, x)|, then k\u03b1\u0303\u2217 (t, y)k = k\u03c3\u0303 (t,y)k\n\u2264 Kt1 . As K 1 \u2208 L2 (dt), Y \u2217\ny\nwhich is also solution of the SDE dYt\u2217 = Yt\u2217 [rt dt + \u03b1\u0303\u2217 (t, Yt\u2217 ).dWt is strictly positive.\n2,\u03b4\n(ii) Under the same assumption in addition to the property of U of class Kloc\n, the coefficients\n\u0001\n0,1\n0,1\n\u2217\n\u2217\n(\u03bc , \u03c3 ) are only in Kloc \u00d7 Kloc , and then by Theorem 2.4, there exists a monotonic maximal\nsolution Xt\u2217 (x) up to explosion time \u03b6 \u2217 (x).\n(iii) a) We show together the property( Ux (t, Xt\u2217 (x)) = Yt\u2217 (ux )) )and the fact that \u03b6 \u2217 (x) = \u221e.\nWe are applying, up to \u03b6 \u2217 (x), Theorem 2.7 iv) to Ux (t, x), solution of the SDPE (4.3), and to the\nprocess Xt\u2217 .Then, it follows that Ux (t, Xt\u2217 (x)) is solution of SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) up to \u03b6 \u2217 (x) with initial\ncondition ux . In other words, Ux (t, Xt\u2217 (x)) = Yt\u2217 (ux (x))); t < \u03b6 \u2217 (x).\nb) When t 7\u2192 \u03b6 \u2217 (x) on \u03b6 \u2217 (x) < \u221e, Ux (t, Xt\u2217 (x)) 7\u2192 0, and Yt\u2217 (ux (x))) 7\u2192 Y\u03b6\u2217\u2217 (x) , then Y\u03b6\u2217\u2217 (x) (ux (x))) =\n0, but since Yt\u2217 (y) is a strictly positive process, a contradiction occurs if P(\u03b6 \u2217 (x) < \u221e) > 0.\n(iv) The property of U are deduced of the identity Ux (t, Xt\u2217 (x)) = Yt\u2217 (ux (x))) and from Theorem\n2.8.\nRemark 4.2. In [14] the authors have also shown that the solution of the backward SPDE can\nbe represented through the composition of two invertible processes. The main difference with the\napproach proposed here is that their processes are given as conditional expectation of monotonic\nfunctions as we describe them in path-wise form as SDE solutions.\nComment: Obviously the main result, Theorem 4.2, gives us only sufficient conditions to generate\nX -consistent utility from their characteristics. In fact, the assumptions gives us the existence\nof a monotonic strictly positive strong solution Y \u2217 of SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ), and by local regularity, the\nexistence of a monotonic solution X \u2217 of SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) up to explosion time \u03b6 x . Obviously, we\ncan interchange the roles of Y \u2217 and X \u2217 . Indeed, in line with Section 2, given the existence of a\nsolution of the SPDE (4.3), by assertion (iii) of Theorem 2.7, the existence of a solution X.\u2217 (x)\nstarting from x to the SDE(\u03bc\u2217 , \u03c3 \u2217 ) implies that Ux (t, Xt\u2217 (x)) is solution of the SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) and so\nis a state price density process Ybt\u2217 (ux (x)), starting from ux (x). Moreover, existence of a solution\nto SDE(\u03bc\u2217 , \u03c3 \u2217 ) is equivalent to existence of a solution to SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ). Otherwise, if we give\nourselves X \u2217 monotone solution of SDE(\u03bc\u2217 , \u03c3 \u2217 ) with a semimartingale inverse X and Y \u2217 a K2\nregular solution to SDE(\u03bc\u0303\u2217 , \u03c3\u0303 \u2217 ) then, from assertion (i) of Theorem 2.7, the compound process\n\u0001\u0001\nYbt\u2217 ux X (t, x) is an obvious solution of SPDE (4.3).\n\n28\n\n\f4.2\n\nReverse Engineering Problem\n\nWe consider the converse point of view of the marginal utility characterization given by Theorem\n4.1. More precisely, by taking as input an initial condition U (0, .) = u(.) and some monotonic\nsolution of SDE(\u03bc, \u03c3) and SDE(\u03bc\u0303, \u03c3\u0303), we propose an explicit way to recover all consistent utility U\ngenerating this wealth as optimal process. In the classical expected utility framework, this reverse\nengineering problem has been considered by He and Huang [10] (1992) in a complete market.\nSince the class of dynamic utilities is larger than the class of Markovian utilities considered in [10],\nour problem is easier to solve. In particular, we establish that the only assumption we need is\nthe monotonicity of the wealth process with respect to the initial wealth, plus some integrability\nconditions.\nIn the following theorem, we try to introduce minimum assumptions used in the different problems.\nEither we assume the strong assumption that the SDE(\u03bc, \u03c3) is regular enough to have a unique\nmonotonic strong solution X whose the inverse X is a semimartingale or we make the existence of\nb \u03bc,\u03c3\nX in addition to the existence of a solution X to the SPDE(L\nt,x , \u2212\u03c3\u2202x ).\n\nTheorem 4.3. Let \u03ba \u2208 R be a volatility vector and \u03c3t (x) = x\u03bat (x), \u03bct (x) := rt x + \u03c3t (x).\u03b7tR\nb \u03bc,\u03c3\nthe coefficients of the SDE defining an admissible wealth process. As previously, let L\nt,x :=\n1\n2\n2 \u2202x (k\u03c3t (x)k \u2202x ) \u2212 \u03bct (x)\u2202x be its adjoint operator.\nSimilarly, let \u03bd \u2208 R\u22a5 be an orthogonal volatility vector, and \u03bc\u0303(t, y) := \u2212yrt , \u03c3\u0303(t, y) = y(\u03bdt (y) \u2212\n\u0001\n\u03b7tR ) the coefficients of the SDE defining an admissible state price density process.\nAssumptions a) Strong assumptions Assume the SDE(\u03bc, \u03c3) in the class S 3,\u03b4 (\u03b4 \u2208 (0, 1]), so\nthat SDE(\u03bc, \u03c3) has a unique monotonic solution X, whose the inverse X is solution of the SPDE\nb t,x (X )dt.\ndX (t, x) = \u2212Xx (t, x)\u03c3t (x).dWt + L\n\n(4.6)\n\nb) or Weak assumptions Assume only the SDE(\u03bc, \u03c3) in the class S 1,\u03b4 (\u03b4 \u2208 (0, 1]), and the\nb t,x , \u2212\u03c3\u2202x )\nexistence of a solution X of the SPDE(L\nc) Assume the SDE (\u03bc\u0303, \u03c3\u0303) in the class S 2,\u03b4 with monotonic solution Y .\n\nmain Result (i) For any initial utility function u, the stochastic random field V defined by\n\u0001\u0001\nV (t, x) = Yt ux X (t, x) , if it is integrable near to zero, is the derivative of a consistent stochastic utility U, solution of the SPDE (4.3) with optimal wealth process X = X \u22121 , solution of the\nSDE(\u03bc, \u03c3).\ne of U is U\ne y := \u2212V\u22121 with U\ney (t, y) = Xt \u2212\n(ii) The derivative of the convex conjugate U\n\u0001\u0001\n\u0169y Y(t, y) where Y denote the inverse flow of Y. Moreover, if the SDE(\u03bc\u0303, \u03c3\u0303) belongs to S 3,\u03b4 ,\ney (t, y)) and (U\ne (t, y)) are It\u00f4's semimartingales.\nthe processes (U\n\nProof. Calculations are easy consequence of Theorem 2.7 (ii), applied to the processes X solution\nof the SPDE (4.6), and Y in place of X with initial condition ux .\n(i) With the notations of Theorem 4.7, we have\ndV (t, x)\n\n= \u03c3\u0303t (V (t, x)).dWt + \u03bc\u0303t (V (t, x))dt\n\u0002\nb t,x (V )dt\n\u2212 \u2202x V (t, x)\u03c3t (x) dWt + \u03c3\u0303t (V (t, x))/V (t, x)dt + L\n\nRecall that \u03c3\u0303t (y) = y(\u03bdt (y) \u2212 \u03b7tR ), so that \u03c3\u0303t (y).\u03c3t (x) = \u2212y\u03b7tR .\u03c3t (x). So, the process V satisfies\n\n29\n\n\fthe SPDE (4.3). As in the proof of Theorem 4.1, the drift \u03b2 V may be transformed into\n\u03b2 V (t, x)\n\n\u0001\n1\nVx (t, x)k\u03c3t (x)k2 \u2212 \u03bct (x)Vx (t, x)\n2\n\u0001\n1\nR\n= \u2212[rt V (t, x) + Vx (t, x)(\u2212xrt + \u03b7t .\u03c3t (x) \u2212 \u03b7tR .\u03c3t (x)) + \u2202x Vx (t, x)k\u03c3t (x)k2 ]\n2\n\u0001\n1\n2\n= \u2212\u2202x (V (t, x)x rt ) + \u2202x Vx (t, x)k\u03c3(t, x)k\n2\n\n= \u03bc\u0303t (V (t, x)) \u2212 \u03b7tR .\u03c3t (x)Vx (t, x)) + \u2202x\n\nSimilarly, the diffusion characteristic of V , \u03b3 V is given by\n\u03b3 V (t, x)\n\n=\n\n\u03c3\u0303t (V (t, x)) \u2212 Vx (t, x)\u03c3t (x)\n\n=\n\nV (t, x)\u03bdt (V (t, x)) \u2212 \u03b7tR .V (t, x) \u2212 Vx (t, x)\u03c3t (t, x)\n\n(ii) We recognize that V has the same local characteristics that marginal of consistent utility\n(Theorem 4.1 ). Taking\nthe primitive\nof V , (if that makes sense) we define a random field U (t, x) =\n\u0001\u0011\nRx\nRx \u0010\ndz\nwhich is a progressive utility satisfying the HJB constraint,\nX\n(t,\nz)\nV\n(t,\nz)dz\n=\nY\nt,\nu\nx\n0\n0\n\u03b2 U (t, x) = \u2212Ux (t, x)xrt + 12 Uxx (t, x)k\u03c3t (t, x)k2 and the diffusion constraint \u03b3xU (t, x) = \u03b3 V (t, x) =\nUx (t, x)\u03bdt (Ux (t, x)) \u2212 \u03b7tR .Ux (t, x) \u2212 Uxx (t, x)x\u03ba(t, x). So, U is a consistent dynamic utility.\n\nCorollary 4.4. With the same notations as in Theorem 4.7, assume in addition global Lipschitz\n3,\u03b4\n2,\u03b4\nregularity on (\u03bc, \u03c3), that is \u03c3 \u2208 K\u0303b0,1 \u2229 K\u0303loc\n, \u03bd \u2208 K\u0303b0,1 \u2229 K\u0303loc\nfor \u03b4 \u2208 (0, 1]. Let us also consider a\nutility function u satisfying Inada's conditions, such that ux \u223c x\u2212\u03b6 (\u03b6 < 1) in the neighborhood of\nz = 0.\n\u0001\u0001\nThe composite random field Yt ux X (t, x) is integrable near to zero and it is the derivative of a\nconsistent stochastic utility U .\n3,\u03b4\n2,\u03b4\nProof. Since \u03c3t (x) = x\u03bat (x) \u2208 K\u0303b0,1 \u2229 K\u0303loc\n, \u03bdt (y) \u2208 K\u0303b0,1 \u2229 K\u0303loc\nfor \u03b4 \u2208 (0, 1] one can easily shows\n2,\u03b4 \u0001\n2,\u03b4 \u0001\n0,1\n3,\u03b4 \u0001\n0,1\n3,\u03b4 \u0001\n.\n\u00d7 K\u0303b0,1 \u2229 K\u0303loc\nthat the pair (\u03bc, \u03c3) belong to Kb \u2229Kloc \u00d7 K\u0303b \u2229 K\u0303loc and (\u03bc\u0303, \u03c3\u0303) to Kb0,1 \u2229Kloc\nThen, all assumptions of Theorem 4.7 are satisfied. Moreover, from Theorem 1.2, the unique strong\nmonotonic solutions X and Y satisfy the following asymptotic behavior (equation (1.7))\n\u0010\n\u0010\nZ(t, z) \u0011\nZ(t, z) \u0011\nsup\nlim\nsup\n=\n0\nand\nlim\n= +\u221e, for all T\nz\u21920 0\u2264t\u2264T\nz\u21920 0\u2264t\u2264T z 1+\u03b5\nz\u03b5\n\nConsequently, one can easily shows that, for any utility function u satisfying Inada's conditions\n\u0001\u0001\ns.t. ux (x) < x\u2212\u03b6 for some \u03b6 < 1, the composite random field Yt ux X (t, x) is also integrable\nnear to zero. Indeed, it suffices to write that for any \u03b1, \u03b2, \u03b3 > 0 we have\n\u0001\u0001\n\u0001\nlim x\u03b1 Yt ux X (t, x)\n= lim (Xt (x))\u03b1 Yt ux (x) = lim (Xt (\u2212\u0169y (y)))\u03b1 Yt (y)\nx\u21920\n\ny\u2192+\u221e\n\nx\u21920\n\nYt (y)\nXt (\u2212\u0169y (y)) \u03b1\n) (\u2212\u0169y (y)y \u03b3 )\u03b1\u03b2 \u03b1\u03b2\u03b3\n=\nlim (\ny\u2192+\u221e (\u2212\u0169y (y))\u03b2\ny\n1\n\n\u2032\n\nAs ux (x) \u223c x\u2212\u03b6 , we have limx\u21920 x\u03b3 ux (x) = limy\u2192+\u221e \u2212y \u03b3 \u2032 \u0169y (y) = 0 for any \u03b6 < \u03b3 \u2032 < 1. Taking\n\u03b3 = \u03b31\u2032 > 1, \u03b5 > 0 and \u03b2 = 1 + \u03b5 we deduce, from the asymptotic behavior of X \u2217 and Y \u2217 and\nInada's conditions, that\n\u0001\u0001\nXt (\u2212\u0169y (y)) \u03b1\nYt (y)\n1\nlim x\u03b1 Yt ux X (t, x) = lim (\n) (\u2212\u0169y (y)y \u03b3 )\u03b1\u03b2 \u03b1\u03b2\u03b3 = 0, \u2200\u03b1 \u2208 (0,\n) \u2282 (0, 1),\ny\u2192+\u221e (\u2212\u0169y (y))\u03b2\nx\u21920\ny\n\u03b2\u03b3\n\u0001\u0001\nwhich shows the integrability near to zero of Yt ux X (t, x) .\n\n30\n\n\fRisk tolerance dynamics With the utility characterization given in Theorem 4.7 the study\nof the risk tolerance coefficient, taken along the optimal wealth, is greatly simplified. In particular,\nthe martingale property established in He and Huang in [10] in a complete market, Y \u2217 = yY 0 is\neasy to understand. A similar study has been performed by Zariphopoulou & Zhou [39] in the\nspecial case of dynamic utility deduced by change of numeraire (see next section) and stochastic\nenvironment from a deterministic time depending utility function.\nProposition 4.5. Assume the optimal state density process to be the minimal one Y \u2217 (., y) = yY.0 ,\nor equivalently the orthogonal risk premium to be 0. Let U be a consistent dynamic utility with\noptimal regular wealth X \u2217 with derivative Xx\u2217 .\nx (t,x)\n(i) The path of the risk tolerance coefficient \u03c4 U (t, x) = \u2212 UUxx\n(t,x) at benchmark optimal wealth is\ngiven by \u03c4 U (t, Xt\u2217 (x)) := \u03c4 \u2217 (t, x) = \u03c4 u (x)Xx\u2217 (t, x).\n(ii) \u03c4 U (t, Xt\u2217 (x)) = \u03c4 \u2217 (t, x) is an admissible portfolio with initial wealth \u03c4 u (x) and admissible\nallocation \u03badt = \u03ba\u2217t (Xt\u2217 ) + Xt\u2217 \u03ba\u2217x (t, Xt\u2217 ). In particular, Yt0 \u03c4 \u2217 (t, x) is a local martingale.\n(iii) As in [39], the pair (X \u2217 , \u03c4 \u2217 ) is solution of two dimensional SDE with random coefficients.\n\u0001\u0001\nProof. (i) We start with the representation of the marginal utility as Ux (t, x) = Yt0 ux X (t, x) ,\n\u0001\n\u0001\n\u0001\nand of its derivative Uxx (t, x) = Yt0 uxx X (t, x) \u2202x X (t, x) = Yt0 uxx X (t, x) /Xx\u2217 (t, X (t, x)). By\ntaking the ratio of these two quantities, we have that\n\u03c4 U (t, x) = \u03c4 u (X (t, x))Xx\u2217 (t, X (t, x))\n\nor equivalently\n\n\u03c4 U (t, Xt\u2217 (x)) = \u03c4 u (x)Xx\u2217 (t, x)\n\n(ii) This last characterization is interesting since from Equation (2.4)\n\u0003\n\u0002\ndXx\u2217 (t, x) = Xx\u2217 (t, x) rt dt + \u03c3x\u2217 (t, Xt\u2217 ).(dWt + \u03b7tR dt)\n\n(4.7)\n\nAs in the proof of Theorem 4.1, assertion i), since R is a vector space, Xx\u2217 (t, x) is still an admissible\nportfolio with allocation policy \u03badt = \u03c3x\u2217 (t, Xt\u2217 ) = \u03ba\u2217t (Xt\u2217 ) + Xt\u2217 \u03ba\u2217x (t, Xt\u2217 ).\n(iii) The pairs of processes (X \u2217 (t, x), Xx\u2217 (t, x)), and (X \u2217 (t, x), \u03c4 \u2217 (t, x)) are solutions of the same\n2-dimensional SDE.\nAll results of the proposition can be extended to the general case, where Yt\u2217 (y) is no more a linear\nfunction of y, but the interpretation of the results is more difficult.\n2,\u03b4\nProposition 4.6. Let U be a Kloc\n\u2229 C 3 -consistent dynamic utility (\u03b4 > 0), then\n(i) The risk tolerance coefficient \u03c4 U is given by\n\n\u03c4 U (t, x) =\n\n\u0010\nYt\u2217 (ux (X )Xx\u2217 (t, X ) \u0011\nYt\u2217 (ux (X ))Xx\u2217 (t, X )\nu\n(t, x).\n=\n\u03c4\n(X\n)\nuxx (X )Yx\u2217 (t, ux (X ))\nux (X )Yy\u2217 (t, ux (X ))\nY \u2217 (u (x))\n\n(4.8)\n\nx\nand, along the optimal wealth, \u03c4 U (t, Xt\u2217 (x)) = Y \u2217 (t,ut x (x))u\nXx\u2217 (t, x).\nxx (x)\ny\n(ii) The derivative of the optimal wealth is an admissible portfolio associated with the allocation\n\u03badt = \u03ba\u2217t (Xt\u2217 ) + Xt\u2217 \u03ba\u2217x (t, Xt\u2217 ) and initial wealth 1.\n(iii) The process Yy\u2217 (t, y)\u03c4 U (t, Xt\u2217 (x)) is a local martingale.\n\nThe proof of this proposition is obvious.\n\n31\n\n\fPathwise dynamic programming principle In this paragraph we are interested in using\nthe previous marginal utility characterization from a backward point of view. Unlike the standard\ncase, we obtain a pathwise dynamic programming principle.\n\u0001\nFor this, observe that the identity Ux (t, x) = Yt\u2217 ux (X (t, x)) leads to the following identity based\n\u0001\non the inverse flow Y of Y \u2217 , ux (x) = Yt (Ux (t, Xt\u2217 (x)) . This explains how to recover the marginal\nutility at time 0 from the stochastic terminal one at a time t. This point of view is interesting,\nbecause in this case the initial condition ux is simply the derivative of the value function of\na classical optimization problem. To go further into this idea, properties of stochastic flows,\npreviously not used (as explained above), will be essential.\nFlow property.\n(i) Let (Zt (x)) be a strictly monotonic random field with respect to x with range [0, \u221e) whose\nthe inverse random field is denoted by Zt (z). We extend the random field Z to intermediate dates\n(0 \u2264 s \u2264 t) by defining Zt (s, x) = Zt (Zs (x)). The following classical notation Zt (s, x) := Zs,t (x) is\nuseful to express the semi-group property, that is for s \u2264 t \u2264 u, Zt,t (x) = x and Zt,u \u25e6 Zs,t = Zs,u .\nNote that Zt (x) = Z0,t (x).\nSimilarly, we can extended the random field Z to intermediate dates by taking the inverse of\n(Zt (s, x)) such that Zt (s, z) = Zs (Zt (z)) := Zs,t (z). Then Zt (s, z) = Zs,t (z) is a backward flow\nachieving the amount z at date s. Then, the semi-group property holds true with the inverse order\nof the dates, that is for s \u2264 t \u2264 u, Zs,t \u25e6 Zt,u = Zs \u25e6 Zt \u25e6 Zt \u25e6 Zu = Zs,u .\n(ii) When the flow Zt (x) is the monotonic solution of some SDE(\u03bc, \u03c3) starting from x at time\n0, a classical result states that Zs,t (x) is a solution defined on [s, \u221e) of the same SDE(\u03bc, \u03c3) starting\nfrom x at time s. When the SDE(\u03bc, \u03c3) is regular enough so that Zt (z) is the monotonic solution\nof the SPDE(\u03bc, \u03c3), then Zs,t (z) is solution on [s, \u221e) of the same SPDE with initial condition z at\ntime s. Given that Zs,t (z) = Zs (Zt (z)), this result may be viewed as a consequence of Theorem\n2.7 (i), applied to the regular function G(y) = Zs (y) considered as deterministic after the time s.\nBut, it is more natural to consider Zs,t (z) as a process in s and so to introduce, time reversal and\nbackward integration as in Kunita [19] Section 4.5, or Carmona & Nualart [2]. We do not develop\nthis point of view here.\nLet us come back to consistent utility framework.\nProposition 4.7. We adopt the same framework as in Theorem with the monotonic solutions X\nand Y of two SDE(\u03bc, \u03c3) and SDE(\u03bc\u0303, \u03c3\u0303). As usual the inverse processes are denoted by X and Y.\n\u0001\nThe marginal utility is defined as Ux (t, x) = Yt ux (Xt (x)) .\n\u0001\n(i) For any t, the pathwise identity holds true, ux (x) = Yt Ux (t, Xt (x)) . This property is close\nto the following one, also true on the classical backward point of view,\n\u0001\n\u0001\n(4.9)\nux (x) = Yt Ux (t, Xt (x)) , ux (x) = E Ux (t, X(t, x))Xx (t, x)\n\ny\nx\nz\nu\n(ii) More generally, using the stochastic flows Xs,t\n, Ys,t\n, Xs,t\n, Ys,t\n, we have the pathwise dynamic\nprinciple\n\u0001\n\u0001\n(4.10)\nUx (t, x) = Ys,t Ux (s, Xs,t (x)) , Ux (s, x) = Ys,t Ux (t, Xs,t (x)) ,\n\nProof. The both identities are easily deduced from the identity\n\nux (Xt (x)) = Yt (Ux (t, x)) = ux (Xs (Xt,s (x)) = Ys (Ux (s, Xt,s (x))).\n\n32\n\n\fComment The link between HJB SPDE and the inverse flows of some SDEs has received little\nattention in the literature to our knowledge, may be essentially because people are more interested\nby the Markovian case.\n\n5\n\nOpenness to other topics and works\n\nWe close the paper by some openness to other topics and works; we show the stability of the\nnotion of consistent utility by change of numeraire and then, without loss of generality, we can\nconsider the martingale market where the portfolios are simple local martingales and the stochastic\nPDE's are easier to deal with. We also apply our method to the specific example of decreasing\nconsistent utilities (see [1] and [28]) where the volatility vector \u03b3 is given equal to zero, given a\nnew interpretation of the optimal wealth as solution of inf-convolution problems in random power\nutilities.\n\n5.1\n\nChange of numeraire\n\nNotations about the investment universe are the same as in Section 3. A numeraire is a monetary\nreference used as payment instrument. When transactions take place in a given country, the domestic currency is used as numeraire, but in an international setting, a common numeraire is used\nin general for all the transactions. Because an investor is often faced with investing in different\nmarkets, we are concerned in this paragraph, by the impact of the change of numeraire on its\nprogressive utility random field.\nIt is well-known (see Geman, El Karoui, and Rochet [9]) that the self-financing property is invariant by change of numeraire. So, if N is an It\u00f4 positive continuous semimartingale, solution\nof linear equation with coefficients (\u03bcN x, \u03b4 N x), it is well-known (see also Platen and Heath, or\nKaratzas and Kardaras, [9, 31, 15]) that using N as new numeraire transforms an It\u00f4 market with\nrisk premium \u03b7 R and short rate rt into an investment universe, where the admissible portfolios\nb \u03ba\u0302 = X \u03ba /N and the state price density processes are the processes Yb \u03bd = N.Y \u03bd .\nare the processes X\nThe parameters of this new market are \u03b7\u0302 = \u03b7 R \u2212 \u03b4 N , for the risk premium and r\u0302 = r \u2212 \u03bcN + \u03b4 N .\u03b7 R\nfor the short rate.\n(i) By the previous results, any X -consistent dynamic utility U defines a X N -consistent dynamic\ne N is given by\nutility U N by the transformation U N (t, x\u0302) = U (t, x\u0302Nt ). Then the conjugate U\ne N (\u0177) = U\ne (t, \u0177/Nt ).\nU\n(ii) The class X N of the admissible portfolios is characterized by the processes \u03ba\u0302 = \u03ba \u2212 \u03b4 N . The\nb t = Rt \u2212\u03b4 N . Nevertheless if \u03b4 N \u2208 Rt ,\nvector spaces (Rt ; t \u2265 0) are transformed into affine spaces R\nt\nt\nb t in the new market are the same than the constraint spaces\nfor any time t, the constraint spaces R\nRt in the initial market.\n(iii) The associated optimal portfolio is X N,\u2217 = X \u2217 /N and the optimal state price density process\nis Y N,\u2217 = Y \u2217 /N .\n(iv) The diffusion characteristic \u03b3 N (t, x\u0302) is obtained from It\u00f4-Ventzel's formula, \u03b3 N (t, x\u0302) = \u03b3(t, x\u0302.Nt )+\nx\u0302Ux\u0302N (t, x\u0302)\u03b4tN . The new drift \u03b2 N (t, x\u0302) is more complicated to described, and the explicit form is\n\n33\n\n\fnot of great interest in the general case.\n(v) In the usual case, the market numeraire (Y 0 )\u22121 = M (also called numeraire portfolio, or\ngrowth optimal portfolio as in Platen and Heath [31]) is chosen as numeraire Y 0 . Since M is an\nadmissible portfolio with volatility \u03b7 R , the market parameters \u03b7\u0302 and r\u0302 are identically zero, and\nany admissible portfolio and any admissible state price density is a local martingale (under the\nhistorical probability).\nThe optimal policies are simply given by\nx\u0302\u03ba\u0302\u2217t (x\u0302)\n\n\u03b3 M,R (t, x\u0302)\n= x\u0302 M\n,\nUx\u0302x\u0302 (t, x\u0302)\n\n\u0177 \u03bd\u0302t\u2217 (\u0177)\n\n\u03b3\u0303\u0177M,\u22a5 (t, \u0177)\n=\ne M (t, \u0177)\nU\n\u0177 \u0177\n\ne M (t, \u0177) are given by,\nwhile, the drift characteristics of the utility U M (t, x\u0302) and U\n\n1 M\n1\n\u03b2 M (t, x\u0302) = \u2212 Ux\u0302x\u0302\n(t, x\u0302)kx\u0302\u03bat\u2217,M (x\u0302)k2 , \u03b2\u0303 M (t, \u0177) = \u2212 \u0168\u0177M\u0177 (t, \u0177)k\u0177\u03bdt\u2217,N (\u0177)k2 ,\n2\n2\n\ne M is a submartingale. Moreover, if \u03b3 M \u2208 R the\nConsequently, U M is a supermartingale and U\nx\u0302\ne M is a local martingale and the optimal dual process is constant, Y M,\u2217 \u2261 1.\nconjugate utility U\nBy symmetry, if \u03b3x\u0302M \u2208 R\u22a5 , U M (., x\u0302) is a local martingale for any x\u0302, and the optimal wealth\nXtM,\u2217 (x\u0302) \u2261 x\u0302.\n\n5.2\n\nDecreasing Consistent Utilities\n\nIn this section, all prices of the investment universe are assumed to be discounted, corresponding\nto the case where r \u2261 0. An interesting class of consistent utilities is the class of decreasing\nconsistent utilities, which was studied and fully characterized in the literature by Musiela & al.\n[28] and Berrier & al. [1]. This utilities have a volatility characteristic \u03b3 identically zero. It is an\nexample where the dual SPDE is easier to study than the primal one, since by taking \u03b3 = 0, it\ne are solutions of the following SPDEs\nfollows from Theorem 3.2 (3.6), that U and U\ndU (t, x) =\n\n1 Ux (t, x)2 R 2\n||\u03b7 || dt,\n2 Uxx (t, x) t\n\ne (t, y) = \u2212 1 y 2 U\neyy (t, y)||\u03b7 R ||2 dt.\ndU\nt\n2\n\n(5.1)\n\ne (t, y) are decreasing functions.\nwhich implies by convexity, that t 7\u2192 U (t, .), U\n\nExample of power utilities (i) It is easy to verify that the power dual utility functions\ne \u03b8 (t, y) = 1 (1 \u2212 C\u0303t\u03b8 y 1\u2212\u03b8 ), (\u03b8 > 0), where as usual the parameter \u03b8 is the risk tolerance\nU\n1\u2212\u03b8\ncoefficient, are 5.1, if and only if C\u0303t\u03b8 (\u03c9) is solution of the ordinary equation dC\u0303t\u03b8 (\u03c9) = \u2212C\u0303t\u03b8 (\u03c9)\u03b8(1\u2212\n\u03b8)||\u03b7t\u03c3 (\u03c9)||2 dt. In other words,\nZ t\ne \u03b8 (t, y) = 1 (1 \u2212 C\u0303 \u03b8 y 1\u2212\u03b8 ), C\u0303 \u03b8 = exp(\u2212\u01eb\u0303(\u03b8)A\u03b7 ), with A\u03b7 =\n||\u03b7sR ||2 ds, \u01eb\u0303(\u03b8) = (1 \u2212 \u03b8)\u03b8 > 0.\nU\nt\nt\nt\nt\n1\u2212\u03b8\n0\n1\u2212\u03b8\n\ne \u03b8 (t, yYt0 ) \u2212 1 = \u2212 y (Yt0 )1\u2212\u03b8 C\u0303t\u03b8 is a martingale, since yYt0 is the optimal state price\nThen, U\n1\u2212\u03b8\n1\u2212\u03b8\ndensity.\ney\u03b8 (t, y) = \u2212C\u0303t\u03b8 y \u2212\u03b8\n(ii) Let us observe that at any time t > 0 the marginal conjugate utility U\nis no longer a monotonic function of the risk tolerance coefficient \u03b8 since the function \u03b8 7\u2192\n\u01eb\u0303(\u03b8)A\u03b7t + \u03b8 ln(y) is no monotonic.\n\n34\n\n\f(iii) The marginal power utility Ux\u03b8 (t, x) is given by Ux\u03b8 (t, x) = (C\u0303t\u03b8 )1/\u03b8 x\u22121/\u03b8 . Since (Yt0 )1\u2212\u03b8 C\u0303t\u03b8\nis a local martingale, the process Xt\u2217,\u03b8 (x) = xC\u0303t\u03b8 (Yt0 )\u2212\u03b8 is an admissible portfolio, and it is\n\u03b8\neasy to see that it is the optimal one. Using the notation X t = Xt\u2217,\u03b8 (1) = C\u0303t\u03b8 (Yt0 )\u2212\u03b8 , we have\n\u03b8\nXt\u2217,\u03b8 (x) = xX t .\n(iv) As in the deterministic case, the optimal strategy \u03ba\u2217,\u03b8 (t, x) is collinear to the risk premium\n\u03b7tR with factor \u03b8, \u03ba\u2217,\u03b8 (t, x) = \u03b8\u03b7tR . Then, we recover the characterization of the marginal utility\ne \u03b8 (t, yY 0 ) = \u2212C\u0303 \u03b8 y \u2212\u03b8 (Y 0 )\u2212\u03b8 = \u0169\u03b8 X \u03b8 .\nat the optimal state price density yYt0 as U\ny\nt\nt\nt\ny t\n\nCharacterization of decreasing conjugate utilities (i) The set of positive solutions Ue\n\nto the dual linear PDE 5.1 is a convex cone, stable by positive linear combination. From this, it\nis natural to consider the integral of conjugate power utilities, with respect to some positive Borel\nmeasure m, including the initial condition. The avoid the problem related to the constants, we\nR\nformulate the problem on the marginal conjugate utilities and assume that R\u2217 y \u2212\u03b8 dm(\u03b8) < \u221e,\n+\nto define the new conjugate marginal utility\nZ\nZ\n\u03b8\n\u03b8\nm\nm\ne\ne\ny \u2212\u03b8 dm(\u03b8)\n(5.2)\nUy (t, y)C\u0303t dm(\u03b8), \u0169y (y) = \u2212\nUy (t, y) =\nR\u2217\n+\n\nR\u2217\n+\n\nSuch assumption on the initial condition \u0169y (y) (then denoted \u0169m\ny (y)) is equivalent to say that\nm z\n\u0169y (e ) is a completely monotonic function. All conjugate utility functions \u0169(y) do not verify this\ncondition, but if it the case and if m is compactly supported, it is easy to check that any primie m (t, y) verifies the random PDE (5.1), since the property is true for the power conjuguate\ntive U\ney\u03b8 (t, y) using Dirac measure at \u03b8 as shown in page 34. In other words, U\ne m (t, y)(\u03c9)\nfunctions U\nis a space-time harmonic function of a geometrical Brownian motion with variance At (\u03c9). By a\ngeneralization of Widder's Theorem [38], Musiela & al. [28] and Berrier & al. [1] showed that\nthere is no other solution to the random PDE (5.1).\n\nSup-convolution interpretation (i) There is an interesting interpretation of these stochastic utilities: one can imagine an investor starting with power utility, with some ambiguity on its\nrisk tolerance coefficient. At time 0, she starts with a mixture of marginal conjugate power utilities,\nweighted by some measure m. At time t, the marginal conjugate consistent utility is still a mixture\nof power conjugate utilities with respect to the measure mt (d\u03b8) := C\u0303t\u03b8 dm(\u03b8), with decreasing in\ntime random density C\u0303t\u03b8 . The stochastic measure mt (d\u03b8) is the unique measure which ensure that\ne m constructed in equation (5.2) is the derivative of the conjugate of a consistent\nthe process U\ny\nutility.\ne m (t, yY 0 ) along\n(ii) Optimal wealth The characterization of the marginal conjugate utility U\nt\ny\neym (t, yYt0 ) = Xt\u2217,m (\u2212\u0169m\nthe optimal density process yYt0 as U\ny (y)) is useful to characterize the\noptimal wealth Xt\u2217,m (x), since the same property is true for the standard power utility functions,\nZ\nZ\nZ\n\u03b8\n\u2217,\u03b8\n\u2217,m\n\u03b8\nm\n\u03b8\n0\ne\nXt (\u2212\u0169y (y))dmt (\u03b8) =\nXt (\u2212\u0169y (y)) =\nUy (t, yYt )dmt (\u03b8) =\nX t y \u2212\u03b8 dmt (\u03b8),\nR\u2217\n+\n\nR\u2217\n+\n\nR\u2217\n+\n\nTo give a decomposition directly in terms of x, we start with a family of well-chosen initial wealths\nR\nm\nx\u03b8,m (x))dm(\u03b8) = \u2212\u0169m\nx\u03b8,m satisfying x\u03b8,m (x) = \u2212\u0169\u03b8y (um\ny (ux (x)) = x. So, the\nx (x)) so that R\u2217\n+\nm\noptimal wealth process Xt\u2217,m issued from x = \u2212\u0169m\ny (ux (x)) is given by the closed formula\nZ \u221e\nZ \u221e\nZ \u221e\n\u03b8\n\u2217,\u03b8 \u03b8\n\u2217,m\n\u03b8\nx (x)X t mt (d\u03b8), with\nXt (x (x))mt (d\u03b8) =\nXt (x) =\nx\u03b8 (x)m(d\u03b8) = x. (5.3)\n0\n\n0\n\n0\n\n35\n\n\fXt\u2217,m (x) is strictly increasing and regular with respect to its initial condition x, since any function\netm (y), U m (t, x) is a consistent utility with\nx\u03b8,m (x) is monotonic and regular. The conjuguate of U\n\u2217,m\noptimal wealth Xt (x).\n(iii) The risk tolerance coefficient We are concerned with the risk tolerance coefficient\nU m (x)\n\u03c4Um (t, x) = \u2212 xm\nof the utility function U m (t, x), given that for power utility \u03c4 \u03b8 (t, x) = \u03b8x.\nUxx (x)\nAccording to assertion (i) of Proposition 4.5 stating that \u03c4Um (t, Xt\u2217,m (x)) = \u03c4um (x)Xx\u2217,m (t, x), we\nsee that\nZ \u221e\n\u2217,m\nm\nm\n\u2217,m\n\u03c4U (t, Xt (x)) = \u03c4u (x)Xx (t, x) =\n\u03c4um (x)x\u03b8x (x)Xx\u2217,\u03b8 (t, x\u03b8 (x))mt (d\u03b8)\n0\n\n\u03b8\nm\nOn the other hand, by the fact that x\u03b8x (x) = \u2212um\nxx (x)\u0169yy (ux (x)), we easily get the equality\n\u03c4 \u03b8 (x\u03b8 (x)) = x\u03b8x (x)\u03c4 U (x), and so and hence,\nZ \u221e\n\u03c4Um (t, Xt\u2217,m (x)) =\n\u03c4 \u03b8 (t, Xt\u2217,\u03b8 (x\u03b8 (x)))mt (d\u03b8)\n(5.4)\n0\n\nWe still have some mixture properties along the optimal processes.\n(iv) Sup-convolution interpretation Classical result in convex analysis shows the link\nbetween mixture of conjuguate utility functions and inf-convolution problem, in the following form:\nassume that the derivative of some conjuguate utility function \u0169m\ny (y) may be represented as the\n\u03b8\nintegral of some family of marginal conjuguate utility functions \u0169y (y), with respect to some positive\nR\u221e \u03b8\nm\nBorel measure m, \u0169m\nis the\ny (y) = 0 \u0169y (y)m(d\u03b8), where the integral is finite for any y. Then, \u0169\nconvex conjuguate of the sup-convolution problem associated with\nZ \u221e\nnZ \u221e\no\nm\n\u03b8\nu (x) = sup\nu (x\u03b8 )m(d\u03b8) (x\u03b8 ) such that\nx\u03b8 m(d\u03b8) = x\n(5.5)\n0\n\nThe optimal solution (x\u2217\u03b8 ) that achieves\nexplicitly as x\u03b8,m (x) = \u0169\u03b8y (\u2212um\nx (x)).\n\n0\n\nthe maximum in the optimization problem 5.5 is given\n\nCome back to our problem of decreasing consistent utility random field. The strategy associated\nwith the initial condition x\u03b8,m (x) may be interpreted as the deterministic optimal allocations of the\ninitial wealth with respect to the parameter \u03b8, in a Pareto optimal equilibrium where a continuum\nof agents with different risk aversion are in competition. The same interpretation holds true at\ntime t, with the family of wealth Xt\u2217,\u03b8 (x\u03b8 (x)) and the random measure mt (d\u03b8).\nMoreover, the decreasing consistent utility random field is given at any time t as,\nZ \u221e\nnZ \u221e\no\nm\n\u03b8\nU (t, x) = sup\nU (t, X\u03b8 (t, x))mt (d\u03b8) (X\u03b8 (t, x)) such that\nX\u03b8 (t, x)mt (d\u03b8) = x (5.6)\n0\n\n0\n\n(v)The role of the initial utility function In the study of decreasing utilities, we introduced\nR\ny \u2212\u03b8 dm(\u03b8). The Borel measure m is\nan assumption on the initial condition, that is \u0169m\ny (y) = \u2212 R\u2217\n+\ndetermining in the definition of the optimal wealth. This may seem at odds with the rest of the\npaper. This is not the case and even this is a nice example to illustrate our results.\nIndeed, starting from the optimal portfolio X \u2217,m defining in Equation (5.3), it is easy to construct a new consistent utility (more easily its Fenchel conjuguate \u1e7c (t, y)) having (X \u2217,m , yY 0 ) as\noptimal processes, starting from an initial concave function v with Fenchel conjuguate \u1e7d. Thanks\n\n36\n\n\fto the dual characterization Veym (t, yYt0 ) = Xt\u2217,m (\u2212\u1e7dy (y)) of the marginal conjuguate utility, the\neym yields to the following relation Veym (t, yYt0 ) = Xt\u2217,m (\u2212\u1e7dy (y)) =\nsame identity applied to U\n\u0001\ne m t, um (\u2212\u1e7dy (y))Y 0 . It remains to make the change of variable y 7\u2192 y/Y 0 , to obtain the\nU\nt\nx\nt\ny\nmarginal dual conjuguate\n\u0001\ne m t, um (\u2212\u1e7dy (y/Y 0 ))Y 0 .\nVeym (t, y) = Xt\u2217,m (\u2212\u1e7dy (y/Yt0 )) = U\nx\nt\nt\ny\n\nObviously, by this transformation we lose the decreasing property in time of Veym (t, y) since\n0\n0\num\nx (\u2212\u1e7dy (y/Yt ))Yt is no more a decreasing process. The same kind of construction may be made\nwhen the optimal dual process yYt0 is replaced by a monotonic one.\nNote, similar ideas are developed in [5] to build richer classes of utilities.\n\nConclusion In this new approach, the solution of the utility SPDE have a pathwise representation, unlike to the characteristics method where the solutions are represented as a conditional\nexpectation. There are several advantages of this connection between SPDEs and SDEs due to the\nmany results of the SDE theory. To the best of our knowledge, there are no or few results that\nassert the monotonicity or the convexity of such solutions. Also, there may be other advantages\nin numerical methods and simulations of the SDE than of SPDE.\nOtherwise, this paper investigates consistent stochastic utilities from the SPDE point of view.\nThis leads therefore to make strong regularity assumptions: the market is a Brownian market\nand securities are modeled as continuous semimartingales. Utilities are at least of class K2 in the\nsense of Kunita in order to apply It\u00f4-Ventzel's formula and to deduce the SPDEs. Moreover, the\nmethod of stochastic utilities construction is based on the dynamics of stochastic flows and their\ninverses, and therefore additional regularity assumptions on X \u2217 and Y \u2217 are required. However,\none can take a direct approach still based on monotonicity assumptions on optimal processes for\nthe primal and dual problem, and on compound flows formula ; it is showed in [6], that these\nassumptions can be considerably weakened. Indeed, considering any financial market in which\nthe securities are modeled as bounded semimartingales, the stochastic utilities are of class K1 and\nwealth process are required to lie in a convex class X \u2282 X+ , the monotonicity assumption of X \u2217\nand Y \u2217 is sufficient to show the validity of the construction proposed in this work, using analysis\nmethods and optimality conditions.\n\nReferences\n[1] F. Berrier, C. Rogers, and M. Tehranchi. A characterization of forward utility functions.\nPreprint, 2009.\n[2] R.A. Carmona and D. Nualart. Nonlinear stochastic integrators, equations and flows, volume 6\nof Stochastics Monographs. Gordon and Breach Science Publishers, New York, 1990.\n[3] P. Constantin and G. Iyer. Stochastic lagrangian transport and generalized relative entropies.\nCommun.Math.Sci, 4:767\u2013777, 2006.\n[4] D. Duffie and L. Epstein. Stochastic differential utility. Econometrica, 60(2):353\u2013394, 1992.\nWith an appendix by the authors and C. Skiadas.\n\n37\n\n\f[5] N. El Karoui and M. Mrad. Mixture of consistent stochastic utilities, and a priori randomness.\nPreprint., 2010.\n[6] N. El Karoui and M. Mrad. Stochastic utilities with a given optimal portfolio : approach by\nstochastic flows. Preprint., 2010.\n[7] N. El Karoui, S. Peng, and M.C. Quenez. A dynamic maximum principle for the optimization\nof recursive utilities under constraints. Ann. Appl. Probab., 11(3):664\u2013693, 2001.\n[8] M. Frittelli and M. Maggis. Conditional certainty equivalent. International Journal of Theoretical and Applied Finance (IJTAF), 14(01):41\u201359, 2011.\n[9] H. Geman, N. El Karoui, and J.C. Rochet. Change of numeraire, change of probability\nmeasure and option pricing. Journal of Applied Probability, 32:443\u2013458, 1995.\n[10] H. He and C. Huang. Consumption-portfolio policies: An inverse optimal problem. Journal\nof Economic Theory, 62(2):257 \u2013 293, 1994.\n[11] V. Henderson and D. Hobson. Horizon-unbiased utility functions. Stochastic Process. Appl.,\n117(11):1621\u20131641, 2007.\n[12] P. Imkeller, S. Fang, and T. Zhang. Global flows for stochastic differential equations without\nglobal Lipschitz conditions. Ann. Probab., 35(1):180\u2013205, 2007.\n[13] P. Imkeller and M.K. Scheutzow. On the spatial asymptotic behavior of stochastic flows in\nEuclidean space. Ann. Probab., 27:109\u2013129, 1999.\n[14] I. Karatzas and N. Englezos. Utility maximization with habit formation: Dynamic programming and stochastic pdes. SIAM J. Control Optim., 48(2):481\u2013520, 2009.\n[15] I. Karatzas and C. Kardaras. The num\u00e9raire portfolio in semimartingale financial models.\nFinance Stoch., 11(4):447\u2013493, 2007.\n[16] I. Karatzas, J.P. Lehoczky, S.E. Shreve, and G.L. Xu. Martingale and duality methods for\nutility maximization in an incomplete market. SIAM J. Control Optim., 29(3):702\u2013730, 1991.\n[17] I. Karatzas and S.E. Shreve. Methods of Mathematical Finance. Springer, September 2001.\n[18] D. Kramkov and W. Schachermayer. The asymptotic elasticity of utility functions and optimal\ninvestment in incomplete markets. Annals of Applied Probability, 9:904\u2013950, 1999.\n[19] H. Kunita. Stochastic flows and stochastic differential equations, volume 24 of Cambridge\nStudies in Advanced Mathematics. Cambridge University Press, 1997.\n[20] Z. Liang. Stochastic differential equations driven by spatial parameters semimartingale with\nnon-lipschitz local characteristic. Potential Analysis, 26:307\u2013322, 2007.\n[21] Z. Liang. Spatial asymptotic behavior of homeomorphic global flows for non-Lipschitz SDEs.\nBull. Sci. Math., 132:146\u2013163, 2008.\n\n38\n\n\f[22] M. Mania and R. Tevzadze. Backward stochastic PDEs related to the utility maximization\nproblem. Georgian Mathematical Journal, 17:705\u2013740, 2010.\n[23] S.E.A. Mohammed and M.K. Scheutzow. Spatial estimates for stochastic flows in Euclidean\nspace. Ann. Probab., 26:56\u201377, 1998.\n[24] M. Musiela and T. Zariphopoulou. Backward and forward utilities and the associated pricing\nsystems: The case study of the binomial model. pages 3\u201344. Princeton University Press,\n2005-2009.\n[25] M. Musiela and T. Zariphopoulou. Investment and valuation under backward and forward\ndynamic exponential utilities in a stochastic factor model. In Advances in mathematical\nfinance, pages 303\u2013334. Birkh\u00e4user Boston, 2007.\n[26] M. Musiela and T. Zariphopoulou. Optimal asset allocation under forward exponential performance criteria. volume 4, pages 285\u2013300. Institute of Mathematical Statistics, 2008.\n[27] M. Musiela and T. Zariphopoulou. Portfolio choice under dynamic investment performance\ncriteria. Quantitative Finance, 9(2):161\u2013170, 2009.\n[28] M. Musiela and T. Zariphopoulou. Portfolio choice under space-time monotone performance\ncriteria. SIAM J. Financial Math., 1:326\u2013365, 2010.\n[29] M. Musiela and T. Zariphopoulou. Stochastic partial differential equations in portfolio choice.\nIn Contemporary Quantitative Finance, pages 195\u20133216, 2010.\n[30] H. Pham. Optimisation et contr\u00f4le stochastique appliqu\u00e9s \u00e0 la finance, volume 61 of Math\u00e9matiques & Applications (Berlin). Springer, Berlin, 2007.\n[31] E. Platen and D. Heath. A benchmark approach to quantitative finance. Springer Finance.\nSpringer-Verlag, Berlin, 2006.\n[32] P. Protter. Stochastic integration and differential equations, volume 21 of Stochastic Modelling\nand Applied Probability. Springer-Verlag, Berlin, 2005.\n[33] R. Rouge and N.El Karoui. Pricing via utility maximization and entropy. Math. Finance,\n10(2):259\u2013276, 2000. INFORMS Applied Probability Conference (Ulm, 1999).\n[34] W. Schachermayer. Optimal investment in incomplete financial markets. In Mathematical\nFinance: Bachelier Congress 2000, pages 427\u2013462. Springer, 2001.\n[35] M.K. Scheutzow. Chaining techniques and their application to stochastic flows. In London Mathematical Society Lecture Note Series (No. 353), pages 35\u201364. Cambridge University\nPress, 2009.\n[36] C. Stricker, T. Choulli, and J. Li. Minimal Hellinger martingale measures of order q. Finance\nStoch., 11(3):399\u2013427, 2007.\n\n39\n\n\f[37] A.D. Ventzel. On equations of the theory of conditional Markov. Theory of Probability and\nits Applications, 10:357\u2013361, 1965.\n[38] D. Widder. The heat equation. Academic Press Inc., U.S., 1976.\n[39] T. Zariphopoulou and T. Zhou. Investment performance measurement under asymptotically linear local risk tolerance. In Handbook of numerical analysis. Vol XV, pages 227\u2013253.\nElsevier/North-Holland, 2009.\n[40] X. Zhang. Stochastic flows of sdes with irregular coefficients and stochastic transport equations. Bulletin des Sciences Math\u00c3 c matiques, 134(4):340 \u2013 378, 2010.\n[41] G. Zitkovic. A dual characterization of self-generation and log-affine forward performances.\nPreprint, 2008.\n\n40\n\n\f"}