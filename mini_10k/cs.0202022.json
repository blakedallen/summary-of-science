{"id": "http://arxiv.org/abs/cs/0202022v1", "guidislink": true, "updated": "2002-02-18T12:43:18Z", "updated_parsed": [2002, 2, 18, 12, 43, 18, 0, 49, 0], "published": "2002-02-18T12:43:18Z", "published_parsed": [2002, 2, 18, 12, 43, 18, 0, 49, 0], "title": "What does a conditional knowledge base entail?", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=cs%2F0601050%2Ccs%2F0601066%2Ccs%2F0601047%2Ccs%2F0601029%2Ccs%2F0601054%2Ccs%2F0601104%2Ccs%2F0601053%2Ccs%2F0601041%2Ccs%2F0601028%2Ccs%2F0601114%2Ccs%2F0601037%2Ccs%2F0601007%2Ccs%2F0601064%2Ccs%2F0601019%2Ccs%2F0601081%2Ccs%2F0601014%2Ccs%2F0601086%2Ccs%2F0601071%2Ccs%2F0601057%2Ccs%2F0601070%2Ccs%2F0601134%2Ccs%2F0601109%2Ccs%2F0601107%2Ccs%2F0601077%2Ccs%2F0601090%2Ccs%2F0601048%2Ccs%2F0601098%2Ccs%2F0601106%2Ccs%2F0601043%2Ccs%2F0601022%2Ccs%2F0601016%2Ccs%2F0601055%2Ccs%2F0601030%2Ccs%2F0601115%2Ccs%2F0601017%2Ccs%2F0601046%2Ccs%2F0601005%2Ccs%2F0601008%2Ccs%2F0601065%2Ccs%2F0601102%2Ccs%2F0601117%2Ccs%2F0601033%2Ccs%2F0601036%2Ccs%2F0601052%2Ccs%2F0601035%2Ccs%2F0601078%2Ccs%2F0601089%2Ccs%2F0601063%2Ccs%2F0601108%2Ccs%2F0601013%2Ccs%2F0601135%2Ccs%2F0601127%2Ccs%2F0601001%2Ccs%2F0601080%2Ccs%2F0601111%2Ccs%2F0601009%2Ccs%2F0601124%2Ccs%2F0601125%2Ccs%2F0601042%2Ccs%2F0601097%2Ccs%2F0601073%2Ccs%2F0601034%2Ccs%2F0601039%2Ccs%2F0601061%2Ccs%2F0601032%2Ccs%2F0601006%2Ccs%2F0601113%2Ccs%2F0601002%2Ccs%2F0601059%2Ccs%2F0601024%2Ccs%2F0601100%2Ccs%2F0601094%2Ccs%2F0601133%2Ccs%2F0601027%2Ccs%2F0601083%2Ccs%2F0601031%2Ccs%2F0601091%2Ccs%2F0601056%2Ccs%2F0601126%2Ccs%2F0601110%2Ccs%2F0601049%2Ccs%2F0601131%2Ccs%2F0601120%2Ccs%2F0601068%2Ccs%2F0601038%2Ccs%2F0601105%2Ccs%2F0601062%2Ccs%2F0601122%2Ccs%2F0601121%2Ccs%2F0601082%2Ccs%2F0601118%2Ccs%2F0601123%2Ccs%2F0202031%2Ccs%2F0202022%2Ccs%2F0202017%2Ccs%2F0202023%2Ccs%2F0202010%2Ccs%2F0202003%2Ccs%2F0202020%2Ccs%2F0202011%2Ccs%2F0202025&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "What does a conditional knowledge base entail?"}, "summary": "This paper presents a logical approach to nonmonotonic reasoning based on the\nnotion of a nonmonotonic consequence relation. A conditional knowledge base,\nconsisting of a set of conditional assertions of the type \"if ... then ...\",\nrepresents the explicit defeasible knowledge an agent has about the way the\nworld generally behaves. We look for a plausible definition of the set of all\nconditional assertions entailed by a conditional knowledge base. In a previous\npaper, S. Kraus and the authors defined and studied \"preferential\" consequence\nrelations. They noticed that not all preferential relations could be considered\nas reasonable inference procedures. This paper studies a more restricted class\nof consequence relations, \"rational\" relations. It is argued that any\nreasonable nonmonotonic inference procedure should define a rational relation.\nIt is shown that the rational relations are exactly those that may be\nrepresented by a \"ranked\" preferential model, or by a (non-standard)\nprobabilistic model. The rational closure of a conditional knowledge base is\ndefined and shown to provide an attractive answer to the question of the title.\nGlobal properties of this closure operation are proved: it is a cumulative\noperation. It is also computationally tractable. This paper assumes the\nunderlying language is propositional.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=cs%2F0601050%2Ccs%2F0601066%2Ccs%2F0601047%2Ccs%2F0601029%2Ccs%2F0601054%2Ccs%2F0601104%2Ccs%2F0601053%2Ccs%2F0601041%2Ccs%2F0601028%2Ccs%2F0601114%2Ccs%2F0601037%2Ccs%2F0601007%2Ccs%2F0601064%2Ccs%2F0601019%2Ccs%2F0601081%2Ccs%2F0601014%2Ccs%2F0601086%2Ccs%2F0601071%2Ccs%2F0601057%2Ccs%2F0601070%2Ccs%2F0601134%2Ccs%2F0601109%2Ccs%2F0601107%2Ccs%2F0601077%2Ccs%2F0601090%2Ccs%2F0601048%2Ccs%2F0601098%2Ccs%2F0601106%2Ccs%2F0601043%2Ccs%2F0601022%2Ccs%2F0601016%2Ccs%2F0601055%2Ccs%2F0601030%2Ccs%2F0601115%2Ccs%2F0601017%2Ccs%2F0601046%2Ccs%2F0601005%2Ccs%2F0601008%2Ccs%2F0601065%2Ccs%2F0601102%2Ccs%2F0601117%2Ccs%2F0601033%2Ccs%2F0601036%2Ccs%2F0601052%2Ccs%2F0601035%2Ccs%2F0601078%2Ccs%2F0601089%2Ccs%2F0601063%2Ccs%2F0601108%2Ccs%2F0601013%2Ccs%2F0601135%2Ccs%2F0601127%2Ccs%2F0601001%2Ccs%2F0601080%2Ccs%2F0601111%2Ccs%2F0601009%2Ccs%2F0601124%2Ccs%2F0601125%2Ccs%2F0601042%2Ccs%2F0601097%2Ccs%2F0601073%2Ccs%2F0601034%2Ccs%2F0601039%2Ccs%2F0601061%2Ccs%2F0601032%2Ccs%2F0601006%2Ccs%2F0601113%2Ccs%2F0601002%2Ccs%2F0601059%2Ccs%2F0601024%2Ccs%2F0601100%2Ccs%2F0601094%2Ccs%2F0601133%2Ccs%2F0601027%2Ccs%2F0601083%2Ccs%2F0601031%2Ccs%2F0601091%2Ccs%2F0601056%2Ccs%2F0601126%2Ccs%2F0601110%2Ccs%2F0601049%2Ccs%2F0601131%2Ccs%2F0601120%2Ccs%2F0601068%2Ccs%2F0601038%2Ccs%2F0601105%2Ccs%2F0601062%2Ccs%2F0601122%2Ccs%2F0601121%2Ccs%2F0601082%2Ccs%2F0601118%2Ccs%2F0601123%2Ccs%2F0202031%2Ccs%2F0202022%2Ccs%2F0202017%2Ccs%2F0202023%2Ccs%2F0202010%2Ccs%2F0202003%2Ccs%2F0202020%2Ccs%2F0202011%2Ccs%2F0202025&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "This paper presents a logical approach to nonmonotonic reasoning based on the\nnotion of a nonmonotonic consequence relation. A conditional knowledge base,\nconsisting of a set of conditional assertions of the type \"if ... then ...\",\nrepresents the explicit defeasible knowledge an agent has about the way the\nworld generally behaves. We look for a plausible definition of the set of all\nconditional assertions entailed by a conditional knowledge base. In a previous\npaper, S. Kraus and the authors defined and studied \"preferential\" consequence\nrelations. They noticed that not all preferential relations could be considered\nas reasonable inference procedures. This paper studies a more restricted class\nof consequence relations, \"rational\" relations. It is argued that any\nreasonable nonmonotonic inference procedure should define a rational relation.\nIt is shown that the rational relations are exactly those that may be\nrepresented by a \"ranked\" preferential model, or by a (non-standard)\nprobabilistic model. The rational closure of a conditional knowledge base is\ndefined and shown to provide an attractive answer to the question of the title.\nGlobal properties of this closure operation are proved: it is a cumulative\noperation. It is also computationally tractable. This paper assumes the\nunderlying language is propositional."}, "authors": ["Daniel Lehmann", "Menachem Magidor"], "author_detail": {"name": "Menachem Magidor"}, "author": "Menachem Magidor", "arxiv_comment": "Preliminary version presented at KR'89. Minor corrections of the\n  Journal Version", "links": [{"href": "http://arxiv.org/abs/cs/0202022v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/cs/0202022v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "cs.AI", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "cs.AI", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "I.2.3", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/cs/0202022v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/cs/0202022v1", "journal_reference": "Journal of Artificial Intelligence, Vol. 55 no.1 (May 1992) pp.\n  1-60. Erratum in Vol. 68 (1994) p. 411", "doi": null, "fulltext": "arXiv:cs/0202022v1 [cs.AI] 18 Feb 2002\n\nWhat does a conditional knowledge base entail?\nDaniel Lehmann\u2020\n\n\u2217\n\nMenachem Magidor\u2021\n\nAbstract\nThis paper presents a logical approach to nonmonotonic reasoning\nbased on the notion of a nonmonotonic consequence relation. A conditional knowledge base, consisting of a set of conditional assertions of the\ntype if . . . then . . . , represents the explicit defeasible knowledge an agent\nhas about the way the world generally behaves. We look for a plausible\ndefinition of the set of all conditional assertions entailed by a conditional\nknowledge base. In a previous paper [17], S. Kraus and the authors defined and studied preferential consequence relations. They noticed that\nnot all preferential relations could be considered as reasonable inference\nprocedures. This paper studies a more restricted class of consequence\nrelations, rational relations. It is argued that any reasonable nonmonotonic inference procedure should define a rational relation. It is shown\nthat the rational relations are exactly those that may be represented by\na ranked preferential model, or by a (non-standard) probabilistic model.\nThe rational closure of a conditional knowledge base is defined and shown\nto provide an attractive answer to the question of the title. Global properties of this closure operation are proved: it is a cumulative operation.\nIt is also computationally tractable. This paper assumes the underlying\nlanguage is propositional.\n\n1\n1.1\n\nIntroduction\nBackground\n\nInference is the process of achieving explicit information that was only implicit\nin the agent's knowledge. Human beings are astoundingly good at infering\nuseful and very often reliable information from knowledge that seems mostly\nirrelevant, sometimes erroneous and even self-contradictory. They are even better at correcting inferences they learn to be in contradiction with reality. It is\n\u2217 This work was partially supported by grant 351/89 from the Basic Research Foundation,\nIsrael Academy of Sciences and Humanities and by the Jean and Helene Alfassa fund for\nresearch in Artificial Intelligence. Its final version was prepared while the first author was\nvisiting the Laboratoire d'Informatique Th\u00e9orique et de Programmation, Univ. Paris 6\n\u2020 Department of Computer Science, Hebrew University, Jerusalem 91904 (Israel)\n\u2021 Department of Mathematics, Hebrew University, Jerusalem 91904 (Israel)\n\n1\n\n\falready a decade now that Artificial Intelligence has realized that the analysis\nof models of such inferences was a major task.\nMany nonmonotonic systems have been proposed as formal models of this\nkind of inferences. The best known are probably: circumscription [22], the\nmodal systems of [23] and [24], default logic [29] and negation as failure [5]. An\nup-to-date survey of the field of nonmonotonic reasoning may be found in [30].\nThough each of these systems is interesting per se, it is not clear that any one of\nthem really captures the whole generality of nonmonotonic reasoning. Recently\n(see in particular the panel discussion of [36]) a number of researchers expressed\ntheir disappointment at existing systems and suggested that no purely logical\nanalysis could be satisfactory.\nThis work tries to contradict this pessimistic outlook. It takes a purely\nlogical approach, grounded in A. Tarski's framework of consequence relations\n[35] and studies the very general notion of a sensible conclusion. It seems that\nthis is a common ground that can be widely accepted: all reasonable inference\nsystems draw only sensible conclusions. On the other hand, as will be shown, the\nnotion of a sensible conclusion has a non-trivial mathematical theory and many\ninteresting properties are shared by all ways of drawing sensible conclusions.\nThe reader is referred to [17] for a full description of background, motivation\nand the relationship of the present approach with previous work in Conditional\nLogic. We only wish to add here that, even though the present work will be\ncompared explicitly only with previous work of E. Adams, some of the intuitions\ndeveloped here are related with intuitions exposed already in the first works on\nConditional Logic, such as [28] or [4]. The interested reader may find many\nrelevant articles in [15] and should in particular look at [14]. The main difference\nbetween our approach and Conditional Logic is that we take the view that the\ntruth of a conditional assertion is necessary, i.e., does not depend on the state of\nthe world. For us, worlds give truth values to propositions but not to assertions,\npreferential models give truth values to assertions, but not to propositions. The\nmodels we propose are therefore much simpler than those previously proposed\nin Conditional Logic and it is doubtful whether they can shed light on the very\ncomplex questions of interest to the Conditional Logic community.\nNotations and terminology conform with those of [17], but the present paper\nis essentially self-contained. Preliminary versions of part of the material contained in this paper appeared in [19, 18]. In [17] it was suggested that items of\ndefault, i.e., defeasible information should be represented as conditional assertions, i.e., pairs of formulas. For example, the information that birds normally\nfly will be represented by the conditional assertion b \u223c f , where b and f are\npropositional variables representing being a bird and flying respectively. A set\n(finite or infinite) of conditional assertions is called a conditional knowledge base\n(knowledge base, in short) and represents the defeasible knowledge an agent may\nhave. The fundamental question studied in this paper is the following: given\na knowledge base K, what are the conditional assertions that should be considered as entailed, i.e., logically implied, by K? We consider that an assertion\n2\n\n\f\u03b1 \u223c \u03b2 should be entailed by K if, on the basis of the defeasible information\ncontained in K and knowing that the proposition \u03b1 is true, it would be sensible\nto conclude (defeasibly) that \u03b2 is true.\nThe question asked in the title and detailed just above has no simple answer\nand has probably no unique answer good for everyone in every situation. It\nmay well be the case that, in different situations or for different domains of\nknowledge, the pragmatically right answers to the question of the title differ.\nThis feeling has been recently expressed in [9]. The first part of this paper\ndefines the notion of a rational set of assertions and defends the thesis that\nany reasonable answer to the question of the title must consist of such a set of\nassertions.\nThesis 1 The set of assertions entailed by any set of assertions is rational.\nThe second part of the paper describes a specific construction, rational closure,\nand shows that the rational closure of a set of assertions is rational. This\nconstruction is then studied and its value as an answer to the question of the\ntitle assessed. We think that, in many situations, this is an acceptable answer,\nbut do not claim that it provides an answer suitable to any situation. We\nhave just argued that such an answer probably does not exist. One of the\nmain interests of the rational closure construction is that it provides a proof of\nthe existence of some uniform, well-behaved and elegant way of answering the\nquestion. In doing so, we develop criteria by which to judge possible answers.\nWe shall in particular consider properties of the mapping from K to the set\nof all the assertions it entails and prove that our construction of the rational\nclosure satisfies them. This effort and these results have to be compared with\nthe essential absence, for the moment, of similar results about the systems of\nnonmonotonic reasoning mentioned above.\n\n1.2\n\nPlan of this paper\n\nWe survey here the main parts of this paper. The introductions to the different\nsections contain a detailed description. Section 2 is devoted to preferential\nconsequence relations. This family of relations was defined and studied in [17].\nThe first part of this section mainly recalls definitions and results of [17], its last\npart presents deep new technical results on preferential entailment that will be\nused in the sequel, but it may be skipped on a first reading. Section 3 presents\nthe restricted family of relations that is of interest to us: rational relations.\nThis family was first defined, but not studied, in [17, Section 5.4]. The main\nresult of this section is a representation theorem characterizing rational relations\nin terms of ranked models. Section 4 shows that entailment with respect to\nranked models is exactly entailment with respect to preferential models and\nprovides an alternative proof of E. Adams' [1] characterization of preferential\nentailment in terms of his probabilistic semantics. Appendix B describes a\nfamily of models based on non-standard (in the sense of A. Robinson) probability\n3\n\n\fmodels and shows that these models provide another exact representation for\nrational consequence relations. This provides us with a strong justification for\nconsidering rational relations. Section 5 draws on all previous sections and is\nthe heart of this paper. It proposes an answer to the question of the title.\nThe notion of rational closure is first defined abstractly and global properties\nproved. It is then showed that finite knowledge bases have a rational closure and\na model-theoretic construction is provided. An efficient algorithm is proposed\nfor computing the rational closure of a finite knowledge base. We then discuss\nsome examples, remark that rational closure does not provide for inheritance of\ngeneric properties to exceptional classes, and finally propose a second thesis.\n\n2\n2.1\n\nPreferential relations and models\nIntroduction\n\nThe first part of this section, i.e., Sections 2.2\u20132.3, recalls definitions and results\nof [17] and provides an example (new) of a preferential relation that cannot\nbe defined by a well-founded model. Then, in Section 2.4, the definition and\nsome properties of preferential entailment are recalled from [17] and some new\nremarks included. Preferential entailment is a fundamental notion that is used\nthroughout the paper. The last three sections are essentially independent of\neach other. They present an in-depth study of preferential entailment. In a first\nreading, they should probably be read only cursorily. The results of Section 2.5\nexpand on part of [18] and are used in Section 4.2. Section 2.6 presents a new\ntechnique to study preferential entailment (i.e., ranking). It is fundamental\nfrom Section 5.6 and onwards. Section 2.7 shows that preferential entailment\nis in the class co-NP, and hence is an co-NP-complete problem. A preliminary\nversion of this last result appeared in [18].\n\n2.2\n\nPreferential relations\n\nOur first step must be to define a language in which to express the basic propositions. In this paper Propositional Calculus is chosen. Let L be the set of well\nformed propositional formulas (thereafter formulas) over a set of propositional\nvariables. If the set of propositional variables chosen is finite, we shall say that\nL is logically finite. The classical propositional connectives will be denoted by\n\u00ac, \u2228, \u2227, \u2192 and \u2194. The connective \u2192 therefore denotes material implication.\nSmall Greek letters will be used to denote formulas.\nA world is an assignment of truth values to the propositional variables. The\nset U is the set of all worlds. The satisfaction of a formula by a world is defined\nas usual. The notions of satisfaction of a set of formulas, validity of a formula\nand satisfiability of a set of formulas are defined as usual. We shall write |= \u03b1\nif \u03b1 is valid, i.e., iff \u2200u \u2208 U, u |= \u03b1.\n\n4\n\n\fIf \u03b1 and \u03b2 are formulas then the pair \u03b1 \u223c \u03b2 (read \"from \u03b1 sensibly conclude \u03b2\") is called a conditional assertion. A conditional assertion is a syntactic\nobject to which the reader may attach any meaning he wants, but the meaning\nwe attach to such an assertion, and against which the reader should check the\nlogical systems to be presented in the upcoming sections, is the following: if \u03b1\nrepresents the information I have about the true state of the world, I will jump\nto the conclusion that \u03b2 is true. A conditional knowledge base is any set of\nconditional assertions. Typically it is a finite set, but need not be so. Conditional knowledge bases seem to provide a terse and versatile way of specifying\ndefeasible information. They correspond to the explicit information an agent\nmay have.\nCertain well-behaved sets of conditional assertions will be deemed worthy of\nbeing called consequence relations. We shall use the notation usual for binary\nrelations to describe consequence relations. So, if \u223c is a consequence relation,\n\u03b1 \u223c \u03b2 indicates that the pair h\u03b1, \u03b2i is in the consequence relation \u223c and \u03b1 6\u223c \u03b2\nindicates it is not in the relation. Consequence relations correspond to the\nimplicit information an intelligent agent may have. Consequence relations are\ntypically infinite sets.\nCertain especially interesting properties of sets of conditional assertions (i.e.,\nbinary relations on L) will be described and discussed now. They are presented\nin the form of inference rules. Consequence relations are expected to satisfy\nthose properties.\n|= \u03b1 \u2194 \u03b2 , \u03b1 \u223c \u03b3\n\u03b2\u223c \u03b3\n\n(Left Logical Equivalence)\n\n(1)\n\n|= \u03b1 \u2192 \u03b2 , \u03b3 \u223c \u03b1\n\u03b3\u223c \u03b2\n\n(Right Weakening)\n\n(2)\n\n\u03b1\u223c \u03b1\n\n(Reflexivity)\n\n(3)\n\n\u03b1\u223c \u03b2 , \u03b1\u223c \u03b3\n\u03b1\u223c \u03b2 \u2227\u03b3\n\n(And)\n\n(4)\n\n\u03b1\u223c \u03b3 , \u03b2\u223c \u03b3\n\u03b1\u2228\u03b2\u223c \u03b3\n\n(Or)\n\n(5)\n\n\u03b1\u223c \u03b2 , \u03b1\u223c \u03b3\n\u03b1\u2227\u03b2\u223c \u03b3\n\n(Cautious Monotonicity)\n\n(6)\n\nDefinition 1 A set of conditional assertions that satisfies all six properties\nabove is called a preferential consequence relation.\nA more leisurely introduction with motivation may be found in [17] where\na larger family of consequence relations, that of cumulative relations, was also\n5\n\n\fstudied. This family is closely related to the cumulative inference operations\nstudied by D. Makinson in [21]. The attentive reader of [17] may have noticed\nthat, there, we reserved ourselves an additional degree of freedom, that we have\ndenied ourselves here. There, we allowed U to be a subset of the set of all\nworlds and considered the |= symbol appearing in Left Logical Equivalence\nand in Right Weakening to be interpreted relatively to this subset. This was\nfelt necessary to deal with hard constraints. In this work, we shall suppose\nthat a hard constraint \u03b1 is interpreted as the soft constraint, i.e., the assertion,\n\u00ac\u03b1 \u223c false, which was recognized as equivalent to considering U to be the set\nof all worlds satisfying \u03b1 in [17, page 174]. The second proposal there, i.e., to\nconsider \u03b1 to be part of the facts, would not be consistent with our treatment\nof rational closure.\nFor the reader's ease of mind we shall mention two important derived rules.\nBoth S and Cut are satisfied by any preferential relation.\n\u03b1\u2227\u03b2\u223c \u03b3\n\u03b1\u223c \u03b2 \u2192 \u03b3\n\u03b1\u2227\u03b2\u223c \u03b3 , \u03b1\u223c \u03b2\n\u03b1\u223c \u03b3\n\n(S)\n\n(7)\n\n(Cut)\n\n(8)\n\nThe rule of Cut is presented here in a form that is not the most usual one. Notice,\nin particular, that we require the left-hand side of the second assumption to be\npart of the left-hand side of the first assumption. This version of Cut is close\nto the original form proposed by G. Gentzen. The following form, more usually\nused now, is not acceptable since it implies monotonicity.\n\u03b1 \u2227 \u03b2 \u223c \u03b3 , \u03b1\u2032 \u223c \u03b2\n\u03b1 \u2227 \u03b1\u2032 \u223c \u03b3\n\n2.3\n\n(9)\n\nPreferential models and representation theorem\n\nThe following definitions are also taken from [17] and justified there. We shall\ndefine a class of models that we call preferential since they represent a slight\nvariation on those proposed in [33]. The differences are nevertheless technically\nimportant.\nPreferential models give a model-theoretic account of the way one performs\nnonmonotonic inferences. The main idea is that the agent has, in his mind, a\npartial ordering on possible states of the world. State s is less than state t, if, in\nthe agent's mind, s is preferred to or more natural than t. The agent is willing\nto conclude \u03b2 from \u03b1, if all most natural states that satisfy \u03b1 also satisfy \u03b2.\nSome technical definitions are needed. Let U be a set and \u227a a strict partial\norder on U , i.e., a binary relation that is antireflexive and transitive.\nDefinition 2 Let V \u2286 U . We shall say that t \u2208 V is minimal in V iff there is\nno s \u2208 V , such that s \u227a t. We shall say that t \u2208 V is a minimum of V iff for\nevery s \u2208 V, s 6= t, we have t \u227a s.\n6\n\n\fDefinition 3 Let V \u2286 U . We shall say that V is smooth iff \u2200t \u2208 V , either \u2203s\nminimal in V , such that s \u227a t or t is itself minimal in V .\nWe may now define the family of models we are interested in.\nDefinition 4 A preferential model W is a triple hS, l, \u227ai where S is a set,\nthe elements of which will be called states, l : S 7\u2192 U assigns a world to each\nstate and \u227a is a strict partial order on S satisfying the following smoothness\ndef\ncondition: \u2200\u03b1 \u2208 L, the set of states \u03b1\nb = {s | s \u2208 S, s \u2261 \u03b1} is smooth, where \u2261\nis defined as s \u2261 \u03b1 (read s satisfies \u03b1) iff l(s) |= \u03b1. The model W will be said to\nbe finite iff S is finite. It will be said to be well-founded iff hS, \u227ai is well-founded,\ni.e., iff there is no infinite descending chain of states.\nThe smoothness condition is only a technical condition. It is satisfied in\nany well-founded preferential model, and, in particular, in any finite model.\nWhen the language L is logically finite, we could have limited ourselves to finite\nmodels and forgotten the smoothness condition. Nevertheless, Lemma 1 will\nshow that, in the general case, for the representation result of Theorem 1 to\nhold we could not have required preferential models to be well-founded. The\nrequirement that the relation \u227a be a strict partial order has been introduced\nonly because such models are nicer and the smoothness condition is easier to\ncheck on those models, but the soundness result is true for the larger family\nof models, where \u227a is just any binary relation (Definitions 2 and 3 also make\nsense for any binary relation \u227a). In such a case, obviously, the smoothness\ncondition cannot be dropped even for finite models. The completeness result\nholds, obviously, also for the larger family, but is less interesting.\nWe shall now describe the consequence relation defined by a model.\nDefinition 5 Suppose a model W = hS, l, \u227ai and \u03b1, \u03b2 \u2208 L are given. The consequence relation defined by W will be denoted by \u223cW and is defined by:\nb, s \u2261 \u03b2.\n\u03b1 \u223cW \u03b2 iff for any s minimal in \u03b1\n\nIf \u03b1 \u223cW \u03b2 we shall say that the model W satisfies the conditional assertion\n\u03b1 \u223c \u03b2, or that W is a model of \u03b1 \u223c \u03b2.\nThe following theorem characterizes preferential consequence relations.\n\nTheorem 1 (Kraus, Lehmann and Magidor) A binary relation \u223c on L\nis a preferential consequence relation iff it is the consequence relation defined\nby some preferential model. If the language L is logically finite, then every\npreferential consequence relation is defined by some finite preferential model.\nThe next result shows we could not have restricted ourselves to well-founded\nmodels.\nLemma 1 There is a preferential relation that is defined by no well-founded\npreferential model.\n\n7\n\n\fProof : Let L be the propositional calculus on the variables pi , i \u2208 \u03c9 (\u03c9 is the set\ndef\n\nof natural numbers). We shall consider the model W = hV, l, \u227ai where V is the\nset {si | i \u2208 \u03c9 \u222a {\u221e}}, si \u227a sj iff i > j (i.e., there is an infinite descending chain\nof states with a bottom element) and l(si )(pj ) is true iff j \u2265 i, for i \u2208 \u03c9 \u222a {\u221e}\nand j \u2208 \u03c9. The smoothness property is satisfied since the only subsets of V\nthat do not have a minimum are infinite sets A that do not contain s\u221e and any\n\u03b1 \u2208 L that is satisfied in all states of such a set A is also satisfied in s\u221e . The\nmodel W defines a preferential relation \u223cW such that \u2200i \u2208 \u03c9 , pi \u223cW pi+1 and\npi+1 \u223cW \u00acpi , but p0 6\u223cW false. But clearly, any preferential model defining\nsuch a relation must contain an infinite descending chain of states.\nWe do not know of any direct characterization of those relations that may be\ndefined by well-founded preferential models. But Lemma 3 will show that many\nrelations may be defined by well-founded preferential models. It is clear, though,\nthat the canonical preferential model provided by the proof of Theorem 1 is\nrarely well-founded. Consider, for example, the preferential closure of the empty\nknowledge base on a logically infinite language L. It may be defined by some\nwell-founded preferential model (the order \u227a is empty). But its canonical model\nis not well-founded (consider states whose second components are larger and\nlarger disjunctions). We may only make the following obvious remark: if the\nunderlying language L is logically finite, then all canonical models are wellfounded.\n\n2.4\n\nPreferential entailment\n\nNow that we have a proof-theoretic definition of a class of relations, a class of\nmodels and a representation theorem relating them, it is natural to put down\nthe following definition. It will serve us as a first approximate answer to the\nquestion of the title.\nDefinition 6 The assertion A is preferentially entailed by K iff it is satisfied\nby all preferential models of K. The set of all conditional assertions that are\npreferentially entailed by K will be denoted by Kp . The preferential consequence\nrelation Kp is called the preferential closure of K.\nIn [17] it was noted that the characterization of preferential consequence relations obtained in Theorem 1 enables us to prove the following.\nTheorem 2 Let K be a set of conditional assertions, and A a conditional assertion. The following conditions are equivalent:\n1. A is preferentially entailed by K, i.e., A \u2208 Kp\n2. A has a proof from K in the system P consisting of the Rules 1 to 6.\nThe following compactness result follows.\n8\n\n\fCorollary 1 (compactness) K preferentially entails A iff a finite subset of\nK does.\nThe following also follows from Theorem 2.\nCorollary 2 The set Kp , considered as a consequence relation, is a preferential\nconsequence relation, therefore there is a preferential model that satisfies exactly\nthe assertions of Kp . If K is itself a preferential consequence relation then\nK = Kp . The set Kp grows monotonically with K.\nWe see that the operation K 7\u2192 Kp is a compact monotonic consequence operation in the sense of Tarski [35]. We have a particular interest in finite knowledge\nbases. It is therefore useful to put down the following definition.\nDefinition 7 A preferential consequence relation is finitely generated iff it is\nthe preferential closure of a finite knowledge base.\nLemma 3 will show that finitely generated relations have interesting properties.\nIn [17], it was shown that any preferential relation defines a strict ordering on\nformulas by: \u03b1 < \u03b2 iff \u03b1\u2228\u03b2 \u223c \u03b1 and \u03b1\u2228\u03b2 6\u223c \u03b2.\nDefinition 8 A preferential relation is well-founded iff the strict ordering relation < it defines is well-founded.\nThe following is easy to show.\nLemma 2 A preferential relation is well-founded iff the canonical model built\nin the proof of Theorem 1 is well-founded.\nWe noticed, at the end of Section 2.3, that not all preferential relations that\nmay be defined by well-founded preferential models are well-founded.\nLemma 3 Any finitely generated preferential relation is defined by some wellfounded preferential model.\nProof : Let K be any finite set of assertions. Let Li , i \u2208 \u03c9 be an infinite sequence of larger and larger logically finite sublanguages of L such that every Li\ncontains all the formulas appearing in the assertions of K and such that L is\nthe union of the Li 's. By Theorem 1, for each i there is a finite preferential\nmodel Wi\u2032 that defines the preferential closure of K over Li . Let Wi be the\nfinite preferential model (over L) obtained by extending the labeling function\nof Wi\u2032 to the variables of L \u2212 Li in some arbitrary way. Clearly Wi is a preferential model of K. Let W be the structure obtained by putting all the Wi 's one\nalongside the other (the partial ordering \u227a on W never relates states belonging\nto Wi 's with different i's). The structure W is well-founded, therefore satisfies\nthe smoothness condition and is a preferential model. Any assertion that is\npreferentially entailed by K (over L) is satisfied by every Wi , and is therefore\n9\n\n\fsatisfied by W . For any assertion A that is not preferentially entailed by K one\nmay find a language Li large enough to include the formulas of A. Over Li , the\nassertion A is not preferentially entailed by K, by Theorem 2, since a proof in\nthe small language is a proof in the larger one. Therefore Wi\u2032 does not satisfy\nA. We conclude that Wi does not satisfy A and that W does not satisfy A.\n\n2.5\n\nSome properties of preferential entailment\n\nThe following result, Theorem 3, is new. It is important for several reasons.\nIt uses the semantic representation of Theorem 1 and a direct proof using only\nproof-theoretic arguments seems difficult. It will be used in Section 4.2. Its\nCorollary 3 should provide a starting point for the application to preferential\nentailment of methods based on or related to resolution. First a definition.\nDefinition 9 If a formula \u03b1 is such that \u03b1 6\u223c false, we shall say that \u03b1 is\nconsistent (for the consequence relation \u223c ). A formula is consistent for a\nmodel iff it is consistent for the consequence relation defined by the model, or\nequivalently iff there is a state in the model that satisfies \u03b1.\nWe shall now define a basic operation on preferential models. Suppose M is a\npreferential model hV, l, \u227ai. For s, t \u2208 V we shall write s \u0016 t iff s \u227a t or s = t.\nLet \u03b1 be a formula and u \u2208 V be a minimal element of \u03b1\nb. Let \u227au\u03b1 be the strict\npartial order obtained from \u227a by making u a minimum of \u03b1\nb, i.e., s \u227au\u03b1 t iff s \u227a t\nor s \u0016 u and there exists a state w \u2208 \u03b1\nb such that w \u0016 t. The following lemma\ndescribes the properties of the construction described above.\ndef\n\nLemma 4 The structure M\u03b1u = hV, l, \u227au\u03b1 i is a preferential model. The consequence relation defined by M\u03b1u extends the consequence relation defined by M .\nIn this model u is a minimum of \u03b1\nb. Both models have the same set of consistent\nformulas.\nProof : It is easy to see that \u227au\u03b1 is irreflexive and transitive. It is also easy to\nsee that, under \u227au\u03b1 , u is a minimum of \u03b1\nb. We want to show now that, for any\nb Since \u03b2b is smooth under \u227a,\n\u03b2 \u2208 L, the set \u03b2b is smooth, under \u227au\u03b1 . Let s \u2208 \u03b2.\nb\nthere is a state t, minimal under \u227a in \u03b2 such that t \u0016 s. If t is still minimal\nin \u03b2b under \u227au\u03b1 , then we are done. If not, there is some state v \u2208 \u03b2b such that\nv \u0016 u and v \u227au\u03b1 s. Since \u03b2b is smooth under \u227a, there is a state w, minimal in\n\u03b2b under \u227a such that w \u227a v. Since w \u227a u, w must be minimal in \u03b2b also under\n\u227au\u03b1 . But w \u227au\u03b1 s. We have shown that \u03b2b is smooth under \u227au\u03b1 . To see that\nthe consequence relation defined by M\u03b1u extends the one defined by M , just\nnotice that, since \u227au\u03b1 extends \u227a, all minimal elements under the former are also\nminimal under the latter. Lastly, since M and M\u03b1u have exactly the same set\nof worlds and the same labeling function, they define exactly the same set of\nconsistent formulas.\n10\n\n\fTheorem 3 Let K be a knowledge base and \u03b1 \u223c \u03b2 an assertion that is not preferentially entailed by K. The formulas that are inconsistent for the preferential\nclosure of K \u222a {\u03b1 \u223c \u00ac\u03b2} are those that are inconsistent for the preferential\nclosure of K.\nProof : Suppose that \u03b1 \u223c \u03b2 is not preferentially entailed by K. Then, let\nW = hS, l, \u227ai be the preferential model the existence of which is guaranteed by\nTheorem 1 and that defines Kp . The model W does not satisfy \u03b1 \u223c \u03b2. There is\ntherefore a minimal element s \u2208 S of \u03b1\nb that does not satisfy \u03b2. Consider now\n\u2032 def\ns\nthe model W = W\u03b1 . By Lemma 4 this is a preferential model that satisfies\nall the assertions satisfied by W , therefore it satisfies all the assertions of K.\nSince s is the only minimal element of \u03b1\nb, it satisfies K \u222a {\u03b1 \u223c \u00ac\u03b2}. Suppose \u03b3\nis inconsistent for (K \u222a {\u03b1 \u223c \u00ac\u03b2})p . Then it must be inconsistent for W \u2032 . By\nLemma 4 it is inconsistent for W , therefore inconsistent for Kp .\nCorollary 3 Let K be a conditional knowledge base and \u03b1 \u223c \u03b2 a conditional\nassertion. The assertion \u03b1 \u223c \u03b2 is preferentially entailed by K iff the assertion\n\u03b1 \u223c false is preferentially entailed by K \u222a {\u03b1 \u223c \u00ac\u03b2}.\nProof : The only if part follows immediately from the soundness of the And\nrule. The if part, follows immediately from Theorem 3.\n\n2.6\n\nThe rank of a formula\n\nIn this section, we introduce a powerful tool for studying preferential entailment.\nGiven a knowledge base, we shall attach an ordinal, its rank, to every formula.\nWe shall prove an important result concerning those ranks, and, in particular,\nshow that a knowledge base K and its preferential closure Kp define the same\nranks.\nDefinition 10 Let K be a conditional knowledge base (i.e., a set of conditional\nassertions) and \u03b1 a formula. The formula \u03b1 is said to be exceptional for K\niff K preferentially entails the assertion true \u223c \u00ac\u03b1. The conditional assertion\ndef\nA = \u03b1 \u223c \u03b2 is said to be exceptional for K iff its antecedent \u03b1 is exceptional for\nK.\nThe set of all assertions of K that are exceptional for K will be denoted by\nE(K). Notice that E(K) \u2286 K. If all assertions of K are exceptional for K,\ni.e., if K is equal to E(K), we shall say that K is completely exceptional. The\nempty knowledge base is completely exceptional. Notice that, in the definition\nabove, K may be replaced by its preferential closure Kp .\nGiven a conditional knowledge base K (not necessarily finite), we shall now\ndefine by ordinal induction an infinite non-increasing sequence of subsets of K.\nLet C0 be equal to K. For any successor ordinal \u03c4 + 1, C\u03c4 +1 will be E(C\u03c4 ) and\n11\n\n\ffor any limit ordinal \u03c4 , C\u03c4 is the intersection of all C\u03c1 for \u03c1 < \u03c4 . It is clear\nthat, after some point on, all C's are equal and completely exceptional (they\nmay be empty, but need not be so). We shall say that a formula \u03b1 has rank\n\u03c4 (for K) iff \u03c4 is the least ordinal for which \u03b1 is not exceptional for C\u03c4 . A\nformula that is exceptional for all C\u03c4 's is said to have no rank. Notice that\nsuch a formula is exceptional for a totally exceptional knowledge base. The\nfollowing is a fundamental lemma on preferential entailment. It says that, as\nfar as preferential entailment is concerned, non-exceptional assertions cannot\nhelp deriving exceptional assertions. The notion of rank defined above proves\nto be a powerful tool for studying preferential entailment.\nLemma 5 Let \u03c4 be an ordinal. Let K be a conditional knowledge base and A\na conditional assertion whose antecedent has rank larger or equal to \u03c4 (or has\nno rank). Then A is preferentially entailed by C0 iff it is preferentially entailed\nby C\u03c4 .\nProof : The if part follows from the fact that C\u03c4 is a subset of C0 . The only\nif part is proved by induction on the length of the proof of A from C0 . If\nthe proof has length one, i.e., A is obtained by Reflexivity or is an assertion\nof C0 , then the result is obvious. If the last step of the proof is obtained\nby Right Weakening or And, the result follows from a trivial use of the\ninduction hypothesis. If the last step of the proof is obtained by Left Logical\nEquivalence, the result follows from the induction hypothesis and the fact\nthat, if \u03b1 and \u03b1\u2032 are logically equivalent then \u03b1 and \u03b1\u2032 have the same rank. If\nthe last step is a use of Or, and A is of the form \u03b1 \u2228 \u03b2 \u223c \u03b3 then just remark\nthat the rank of the disjunction \u03b1 \u2228 \u03b2 is the smaller of the ranks of \u03b1 and \u03b2.\nBoth \u03b1 and \u03b2 have therefore a rank larger or equal to \u03c4 and one concludes by the\ninduction hypothesis. If the last step is a use of Cautious Monotonicity, and\nA is of the form \u03b1 \u2227 \u03b2 \u223c \u03b3, where \u03b1 \u223c \u03b2 and \u03b1 \u223c \u03b3 are preferentially entailed\n(with short proofs) by C0 , let \u03c3 be the rank of \u03b1. By the induction hypothesis\nC\u03c3 preferentially entails \u03b1 \u223c \u03b2. Since \u03b1 is not exceptional for C\u03c3 , we conclude\nthat \u03b1 \u2227 \u03b2 is not exceptional for C\u03c3 , and therefore has rank \u03c3. But \u03b1 \u2227 \u03b2 has\nrank larger or equal to \u03c4 . Therefore \u03c4 \u2264 \u03c3. The formula \u03b1 has rank larger or\nequal to \u03c4 and we may apply the induction hypothesis to conclude that both\n\u03b1 \u223c \u03b2 and \u03b1 \u223c \u03b3 are preferentially entailed by C\u03c1 .\nLemma 6 Let K and K\u2032 be knowledge bases such that K \u2286 K\u2032 \u2286 Kp . For any\nformula, the rank it is given by K\u2032 is equal to the rank it is given by K.\nProof : Using Lemma 5, one shows by ordinal induction that C\u03c4 \u2286 C\u03c4\u2032 \u2286 (C\u03c4 )p .\nThe following definition will be useful in Section 5.6.\nDefinition 11 A knowledge base K is said to be admissible iff all formulas that\nhave no rank for K are inconsistent for K.\n12\n\n\fWe shall immediately show that many knowledge bases are admissible.\nLemma 7 If the preferential closure of K is defined by some well-founded preferential model, then K is admissible. In particular, any finite knowledge base is\nadmissible.\nProof : We have noticed, in Lemma 6 that ranks are stable under the the\nreplacement of a knowledge base by its preferential closure. Let P be the preferential closure of K. Suppose P is defined by some well-founded preferential\nmodel W . Suppose \u03b1 has no rank. We must show that no state of W satisfies \u03b1.\nAs noticed above, there is an ordinal \u03c4 such that C\u03c4 is completely exceptional\nand \u03b1 is exceptional for C\u03c4 . We shall show that no state of W satisfies a formula\nthat is exceptional for C\u03c4 . Indeed, if there were such a state, there would be\nsuch a minimal state, s, since W is well-founded. But W is a model of C\u03c4 and\nno state below s satisfy any antecedent of C\u03c4 , since C\u03c4 is totally exceptional.\nTherefore the preferential model consisting of s alone is a model of C\u03c4 . But, in\na model of C\u03c4 , no minimal state satisfy a formula that is exceptional for C\u03c4 . A\ncontradiction. It follows now from Lemma 3 that any finite knowledge base is\nadmissible.\n\n2.7\n\nComputing preferential entailment\n\nThis section is devoted to the study of the computational complexity of preferential entailment. It is not needed in the sequel. We shall explain in Section 3.5\nwhy preferential entailment is not the right notion of entailment to answer the\nquestion of the title, nevertheless preferential entailment is a central concept and\nit is therefore worthwhile studying its computational complexity. The results\nhere are quite encouraging: the problem is in co-NP, i.e., in the same polynomial\nclass as the problem of deciding whether a propositional formula is valid.\nLemma 8 Let K be a finite conditional knowledge base and \u03b1 \u223c \u03b2 a conditional\nassertion that is not preferentially entailed by K. There is a finite totally (i.e.,\nlinearly) ordered preferential model of K no state of which satisfies \u03b1 except the\ntop state. This top state satisfies \u03b1 and does not satisfy \u03b2.\nProof : Let L\u2032 \u2286 L be a logically finite language, large enough to contain \u03b1,\n\u03b2 and all the assertions of K. Let us now consider L\u2032 to be our language of\nreference. Clearly, \u03b1 \u223c \u03b2 is not preferentially entailed by K, since a proof over\nthe smaller language is a proof over the larger language. By Theorem 1, there is\na finite preferential model W (over L\u2032 ) of K that does not satisfy \u03b1 \u223c \u03b2. In W ,\nthere is therefore a state s, minimal in \u03b1\nb, that satisfies \u03b1 but does not satisfy\n\u03b2. Consider the submodel W \u2032 obtained by deleting all states of W that are not\nbelow or equal to s. It is clearly a finite preferential model of K, with a top\nstate that satisfies \u03b1 but not \u03b2. Let V be obtained by imposing on the states\nof W \u2032 any total ordering that respects the partial ordering of W \u2032 . Since there\n13\n\n\fare only finitely many states in V , the smoothness condition is verified and V\nis a preferential model (on L\u2032 ). It is a model of K but not of A. Now we may\nextend the labeling function of V to the propositional variables of L that are\nnot in L\u2032 any way we want, to get the model requested. Notice that the model\nobtained satisfies the smoothness condition because it is finite.\nTheorem 4 There is a non-deterministic algorithm that, given a finite set K\nof conditional assertions and a conditional assertion A, checks that A is not\npreferentially entailed by K. The running time of this algorithm is polynomial\nin the size of K (sum of the sizes of its elements) and A.\nN\n\nProof : Let K be {\u03b3i \u223c \u03b4i }i=1 . Let I \u2286 {1, . . . , N } be a set of indices. We\ndef V\ndef W\nshall define: \u03c6I = i\u2208I \u03b3i and \u03c8I = i\u2208I (\u03b3i \u2192 \u03b4i ). A sequence is a sequence\nof pairs (Ii , fi ) for i = 0, . . . , n, where Ii \u2286 I and fi is a world. Let \u03b1 and \u03b2 be\nin L.\nDefinition 12 A sequence (Ii , fi ), i = 0, . . . , n, is a witness for \u03b1 \u223c \u03b2 (we\nmean a witness that \u03b1 \u223c \u03b2 is not preferentially entailed by K ) iff\n1. fk |= \u03c8Ik , \u2200k = 0, . . . , n\n2. fk |= \u03c6Ik , \u2200k = 0, . . . , n \u2212 1\nT\n3. Ik+1 = Ik {j | fk 6|= \u03b3j }, \u2200k = 0, . . . , n \u2212 1\n4. I0 = {1, . . . , N }\n5. fk 6|= \u03b1, \u2200k = 0, . . . , n \u2212 1\n6. fn |= \u03b1 \u2227 \u00ac\u03b2.\nWe must check that: witnesses are short and a conditional assertion has a\nwitness iff it is not preferentially entailed by K. For the first point, just remark\nthat, for k = 0, . . . , n \u2212 1 the inclusion Ik \u2283 Ik+1 is strict because of items 3\nand 2. The length of the sequence is therefore bounded by the number of\nassertions in K. But, each pair has a short description. For the second point,\nsuppose first there is a witness for \u03b1 \u223c \u03b2. Then the ranked model W consisting\nof worlds f0 , . . . , fn where fk \u227a fk+1 for k = 0, . . . , n \u2212 1 satisfies K but not\n\u03b1 \u223c \u03b2. That it does not satisfy \u03b1 \u223c \u03b2 is clear from items 5 and 6. Let us\ncheck that W satisfies \u03b3i \u223c \u03b4i . If none of the fk 's, k = 0, . . . , n satisfies \u03b3i then\nW satisfies \u03b3i \u223c \u03b7 for any \u03b7 in L. Suppose therefore that j is the smallest k for\nwhich fj |= \u03b3i . We must show that fj |= \u03b4i . But, by items 4 and 3 i \u2208 Ij and\nby item 1, fi |= \u03b4i .\nSuppose now that \u03b1 \u223c \u03b2 is not preferentially entailed by some given finite\nK. By Lemma 8, there is a finite linearly ordered model W of K, no state of\nwhich satisfies \u03b1, except the top state that is labeled by a world m that satisfies\n14\n\n\fdef\n\n\u03b1 \u2227 \u00ac\u03b2. Let I0 = {1, . . . , N }. It is easy to see that (remark 1): if V is any\npreferential model of K, for any set I \u2286 I0 , V satisfies \u03c6I \u223c \u03c8I . Let us now\nd\nconsider first the set \u03b1 \u2228\n\u03c6I0 . It cannot be empty, therefore it has a unique\nminimal state. Let f0 be the label of this state. We must consider two cases.\nFirst suppose that f0 |= \u03b1. Then f0 is minimal in \u03b1\nb and therefore must be m.\nIn such a case (I0 , m) is a witness. The only thing to check is that item 1 is\n\u03c6I0 = \u2205 and m\nsatisfied. Indeed either m |= \u03c6I0 and we conclude by remark 1 or d\nsatisfies none of the \u03b3i 's. Let us deal now with the case f0 6|= \u03b1. We shall build\na sequence beginning by (I0 , m). Since m does not satisfy \u03b1, it must satisfy \u03c6I0 ,\nwhich takes\nT care of item 2. Remark 1 takes care of item 1. Let us now define\nI1 = I0 {j | f0 6|= \u03b3j }. I1 is strictly smaller than I0 . We may now consider the\nd\nset \u03b1 \u2228\n\u03c6I1 . It is not empty and therefore has a unique minimal element and\nwe may, in this way, go on and build a proof for \u03b1 \u223c \u03b2.\nSince it is clear that preferential non-entailment is at least as hard as satisfiability (consider assertions with antecedent true), we conclude that it is an\nNP-complete problem, i.e., that preferential entailment is co-NP-complete. A\nremark of J. Dix that will be explained at the end of Section 5.8 shows that preferential entailment is reducible to the computation of rational closure and that\nthis reduction, when applied to Horn formulas, requires only the consideration\nof Horn formulas. It follows that, if we restrict ourselves to Horn assertions,\ncomputing preferential entailment has only polynomial complexity.\n\n3\n3.1\n\nRationality\nIntroduction\n\nIn this section we explain why not all preferential relations represent reasonable\nnonmonotonic inference procedures. We present some additional principles of\nnonmonotonic reasoning and discuss them. Those principles are structurally\ndifferent from the rules of preferential reasoning, since they are not of the type:\ndeduce some assertion from some other assertions. Sections 3.2 and 3.3 present\nweak principles. Some results are proven concerning those principles. Deeper\nresults on those principles, found after a first version of this paper had been circulated, appear in [11]. Our central principle is presented in Section 3.4. Those\nprinciples were first described in [17] but the technical results presented here are\nnew. In 3.5, the value of preferential entailment as an answer to the question of\nthe title is discussed. Our conclusion is that it is not a satisfactory answer, since\nit does not provide us with a rational relation. Then, in Section 3.6, a restricted\nfamily of preferential models, the family of ranked models, is presented and a\nrepresentation theorem is proved. The result is central to this paper but the\nproof of the representation theorem may be skipped on a first reading. The\nrepresentation theorem appeared in [19]. The family of ranked models is closely\nrelated to, but different from, a family studied in [7] and Section 3.7 explains\n15\n\n\fthe differences.\n\n3.2\n\nNegation Rationality\n\nIn [17, Section 5.4], it was argued that not all preferential consequence relations\nrepresented reasonable inference operations. Three rationality properties were\ndiscussed there, and it was argued that all three were desirable. Those properties\ndo not lend themselves to be presented as Horn rules (deduce the presence of an\nassertion in a relation from the presence of other assertions) but have the form:\ndeduce the absence of an assertion from the absence of other assertions. All of\nthem are implied by Monotonicity. The reader may find the discussion of [17]\nuseful. Here technical results will be described. The first property considered\nis the following.\n\u03b1 \u2227 \u03b3 6\u223c \u03b2 , \u03b1 \u2227 \u00ac\u03b3 6\u223c \u03b2\n\u03b1 6\u223c \u03b2\n\n(Negation Rationality)\n\n(10)\n\nLemma 9 There is a preferential relation that does not satisfy Negation Rationality.\nProof : Take a preferential model containing four states: si , i = 0, . . . 3, with\ns0 \u227a s1 and s2 \u227a s3 . Let the even states be the only states satisfying q and s0\nand s3 be the only states satisfying p. One easily verifies that the consequence\nrelation defined by this model is such that true \u223c q, but p 6\u223c q and \u00acp 6\u223c q.\nNo semantic characterization of relations satisfying Negation Rationality\nis known. It has been shown in [17] that the consequence relation defined by\nCircumscription does not always satisfy Negation Rationality.\n\n3.3\n\nDisjunctive Rationality\n\nThe next property is the following.\n\u03b1 6\u223c \u03b3 , \u03b2 6\u223c \u03b3\n\u03b1 \u2228 \u03b2 6\u223c \u03b3\n\n(Disjunctive Rationality)\n\n(11)\n\nWe may prove the following.\nLemma 10 Any preferential relation that satisfies Disjunctive Rationality\nsatisfies Negation Rationality.\nProof : Suppose \u03b1 \u2227 \u03b3 6\u223c \u03b2 and \u03b1 \u2227 \u00ac\u03b3 6\u223c \u03b2. By Disjunctive Rationality,\nwe conclude that \u03b1 \u2227 \u03b3 \u2228 \u03b1 \u2227 \u00ac\u03b3 6\u223c \u03b2. We conclude by Left Logical Equivalence.\nLemma 11 There is a preferential relation that satisfies Negation Rationality but does not satisfy Disjunctive Rationality.\n\n16\n\n\fProof : Let us consider the following preferential model W . The model W has\nfour states: a0 , a1 , b0 , b1 . The ordering is: a0 \u227a a1 and b0 \u227a b1 . The language\nhas three propositional variables: p, q and r. The two states a1 and b1 (the top\nstates) are labeled with the same world that satisfies only p and q. State a0\nis labeled with the world that satisfies only p and r and the state b0 with the\nworld that satisfies only q and r. The preferential relation defined by W does\nnot satisfy Disjunctive Rationality but satisfies Weak Rationality. For the\nfirst claim, notice that: p \u2228 q \u223cW r but p 6\u223cW r and q 6\u223cW r. For the second\nclaim, suppose \u03b1 \u223cW \u03b3, but \u03b1 \u2227 \u03b2 6\u223cW \u03b3. Then it must be the case that there\nis a minimal state of \u03b1\nb that does not satisfy \u03b2 and, above it, a state that is\nminimal in \u03b1d\n\u2227 \u03b2. This last state must be labeled by a world that is the label\nof no minimal state of \u03b1\nb. Therefore, \u03b1\nb must contain all four states of W , and\n\u03b1d\n\u2227 \u03b2 must contain either the two top states alone or the two top states and\none of the bottom states. In each case it is easy to see that \u03b1 \u2227 \u00ac\u03b2 \u223cW \u03b3 since\nthe minimal states of \u03b1 d\n\u2227 \u00ac\u03b2 are all also minimal in \u03b1\nb.\nNo semantic characterization of relations satisfying Disjunctive Rationality was known at the time this paper was elaborated. M. Freund [10] has now\nprovided a very elegant such characterization together with an alternative proof\nof our Theorem 5; the canonical model he builds is essentially the same as ours.\n\n3.4\n\nRational Monotonicity\n\nThe last property is the following.\n\u03b1 \u2227 \u03b2 6\u223c \u03b3 , \u03b1 6\u223c \u00ac\u03b2\n\u03b1 6\u223c \u03b3\n\n(Rational Monotonicity)\n\n(12)\n\nThis rule is similar to the thesis CV of conditional logic (see [25]). The reader\nis referred to [17, Section 5.4] for a discussion of our claim that reasonable consequence relations should satisfy Rational Monotonicity. Some researchers\nin Conditional Logic (J. Pollock in particular) have objected to CV as a valid\nthesis for (mainly subjunctive) conditionals. Echoes of this debate may be found\nin [12, end of Section 4.4]. The objections to CV that hold in the conditional\nlogic framework do not hold for us, though their consideration is recommended\nto the reader. The most attractive feature of Rational Monotonicity is probably that it says that an agent should not have to retract any previous defeasible\nconclusion when learning about a new fact the negation of which was not previously derivable. In [32], K. Satoh aptly decided to call nonmonotonic reasoning\nthat validates Rational Monotonicity lazy. The rule of Rational Monotonicity should be distinguished from the following rule, which is satisfied by\nany preferential relation.\n\u03b1 \u2227 \u03b2 \u223c \u00ac\u03b3 , \u03b1 6\u223c \u00ac\u03b2\n\u03b1 6\u223c \u03b3\n\n(13)\n\n17\n\n\fDefinition 13 A rational consequence relation is a preferential relation that\nsatisfies Rational Monotonicity.\nTwo different representation theorems will be proved about rational relations,\nin Sections 3.6 and in Appendix B. The last one seems to provide evidence that\nreasonable inference procedures validate Rational Monotonicity and that all\nrational relations represent reasonable inference procedures.\nLemma 12 A rational relation satisfies Disjunctive Rationality.\nProof : Suppose \u03b1 6\u223c \u03b3 and \u03b2 6\u223c \u03b3. By Left Logical Equivalence we have\n(\u03b1 \u2228 \u03b2) \u2227 \u03b1 6\u223c \u03b3. If we have \u03b1 \u2228 \u03b2 6\u223c \u00ac\u03b1, then we could conclude by Rational\nMonotonicity that \u03b1 \u2228 \u03b2 6\u223c \u03b3. Suppose then that \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1. If we had\n\u03b1 \u2228 \u03b2 \u223c \u03b3, we would conclude by preferential reasoning that \u03b2 6\u223c \u03b3.\nLemma 13 (David Makinson) There is a preferential relation satisfying Disjunctive Rationality that is not rational.\nProof : We shall build a preferential model that defines a consequence relation\nsatisfying Disjunctive Rationality but not Rational Monotonicity. Let L\nbe the propositional calculus on the three variables: p0 , p1 , p2 . Let U contain\nall propositional worlds on those variables. Let S contain three elements: si for\ni = 0, 1, 2 and l(si ) satisfy only pi . The partial order \u227a is such that s1 \u227a s2\nand no other pair satisfies the relation. This defines a preferential model W .\nFirst we shall show that the consequence relation defined by W does not satisfy\nRational Monotonicity. Indeed, we have both p0 \u2228 p1 \u2228 p2 \u223cW \u00acp2 and\np0 \u2228 p1 \u2228 p2 6\u223cW p1 . Nevertheless, we also have \u00acp1 \u2227 (p0 \u2228 p1 \u2228 p2 ) 6\u223cW \u00acp2 .\nLet us show now that any preferential model that does not satisfy Disjunctive\nRationality must have at least 4 states. Suppose \u03b1 \u2228 \u03b2 \u223c \u03b3, but \u03b1 6\u223c \u03b3 and\n\u03b2 6\u223c \u03b3. The last two assumptions imply the existence of states a and b, minimal\nin \u03b1\nb and \u03b2b respectively and that do not satisfy \u03b3, and therefore are not minimal\nin \u03b1d\n\u2228 \u03b2. Those states are different, since any state minimal in both \u03b1\nb and \u03b2b\nwould be minimal in \u03b1d\n\u2228 \u03b2. By the smoothness condition there must be a state\na\u2032 minimal in \u03b1d\n\u2228 \u03b2 and such that a\u2032 \u227a a. Clearly a\u2032 satisfies \u03b3 and does not\nsatisfy \u03b1 (since a is minimal in \u03b1\nb) but satisfies \u03b2. Similarly there must be a\nstate b\u2032 minimal in \u03b1d\n\u2228 \u03b2 and such that b\u2032 \u227a b and b\u2032 satisfies \u03b3 and does not\nsatisfy \u03b2, but satisfies \u03b1. It is left to show that all four states are different. We\nhave already noticed that a 6= b. The states a\u2032 and b\u2032 satisfy \u03b3 and are therefore\ndifferent from a and b. But b\u2032 satisfies \u03b1 and a\u2032 does not and therefore a\u2032 6= b\u2032 .\n\n3.5\n\nDiscussion of Preferential Entailment\n\nWe may now assess preferential entailment as a possible answer to the question\nof the title. Corollary 2 explains why the notion of preferential entailment\n18\n\n\fcannot be the one we are looking for: the relation Kp can be any preferential\nrelation and is not in general rational. For typical K's, Kp fails to satisfy a\nlarge number of instances of Rational Monotonicity and is therefore highly\nunsuitable. One particularly annoying instance of this is the following. Suppose\na conditional knowledge base K contains one single assertion p \u223c q where p\nand q are different propositional variables. Let r be a propositional variable,\ndifferent from p and q. We intuitively expect the assertion p \u2227 r \u223c q to follow\nfrom K. The rationale for that has been discussed extensively in the literature\nand boils down to this: since we have no information whatsoever about the\ninfluence of r on objects satisfying p it is sensible to assume that it has no\ninfluence and that there are normal p-objects that satisfy r. The normal p \u2227 robjects are therefore normal p-objects and have all the properties enjoyed by\nnormal p-objects. Nevertheless it is easy to check that p \u2227 r \u223c q is not in Kp .\nThe problem lies, at least in part, with the fact that Kp is not rational, since any\nrational relation containing p \u223c q , must contain p \u2227 r \u223c q unless it contains\np \u223c \u00acr.\nIn conclusion, it seems that the set of conditional assertions entailed by\nK should be larger and more monotonic than the set Kp . It should also be\nrational. This question will be brought up again in Section 5 and a solution will\nbe proposed.\n\n3.6\n\nRanked models and a representation theorem for rational relations\n\nIn this section a family of preferential models will be defined and it will be\nshown that the relations defined by models of this family are exactly the rational\nrelations.\nLemma 14 If \u227a is a partial order on a set V , the following conditions are\nequivalent.\n1. for any x, y, z \u2208 V if x 6\u227a y, y 6\u227a x and z \u227a x, then z \u227a y\n2. for any x, y, z \u2208 V if x \u227a y, then, either z \u227a y or x \u227a z\n3. for any x, y, z \u2208 V if x 6\u227a y and y 6\u227a z, then x 6\u227a z\n4. there is a totally ordered set \u03a9 (the strict order on \u03a9 will be denoted by\n<) and a function r : V 7\u2192 \u03a9 (the ranking function) such that s \u227a t iff\nr(s) < r(t).\nThe proof is simple and will not be given. A partial order satisfying any of the\nconditions of Lemma 14 will be called modular (this terminology is proposed\nin [12] as an extension of the notion of modular lattice of [13]).\nDefinition 14 A ranked model W is a preferential model hV, l, \u227ai for which the\nstrict partial order \u227a is modular.\n19\n\n\fThose models are called ranked since the effect of function r of property 4 of\nLemma 14 is to rank the states: a state of smaller rank being more normal than\na state of higher rank. We shall always suppose that a ranked model W comes\nequipped with a totally ordered set \u03a9 and a ranking function r. Notice that\nwe still require W to satisfy the smoothness condition. It is easy to see that\nfor any subset T of V and any t \u2208 T , t is minimal in T iff r(t) is the minimum\nof the set r(T ). It follows that all minimal elements of T have the same image\nby r. The smoothness condition is then equivalent to the following: for any\nformula \u03b1 \u2208 L, if \u03b1\nb is not empty, the set r(b\n\u03b1) has a minimum. The smoothness\ncondition is always verified if \u03a9 is a well-ordered set. The reader may check that\nthe preferential model W defined in the proof of Lemma 1 is ranked (it is even\ntotally ordered). It follows that there are rational relations that are defined by\nno well-founded ranked model. The following is a soundness result.\nLemma 15 If W is a ranked model, the consequence relation \u223cW it defines is\nrational.\nProof : It is enough to show that \u223cW satisfies Rational Monotonicity.\nFor this, the smoothness condition is not needed; it is needed, though, for\nthe soundness of Cautious Monotonicity. Suppose W is a ranked model.\nWe shall use the notations of Definition 14. Suppose also that \u03b1 \u223cW \u03b3 and\n\u03b1 6\u223cW \u00ac\u03b2. From this last assumption we conclude that there is a minimal\nelement of \u03b1\nb that satisfies \u03b2. Let t \u2208 V be such a state. Let s \u2208 V be a minimal\nelement of \u03b1d\n\u2227 \u03b2. Since t \u2208 \u03b1d\n\u2227 \u03b2, t 6\u227a s and r(s) \u2264 r(t). But this implies that s\nis minimal in \u03b1\nb: any state u such that u \u227a s satisfies r(u) < r(s) and therefore\nr(u) < r(t) and u \u227a t. Since \u03b1 \u223cW \u03b3, s \u2261 \u03b3.\nWe shall show now that the converse of Lemma 15 holds. We shall first\nmention four derived rules of preferential logic. In fact the first three of these\nrules are even valid in cumulative logic (see [17, Section 3]). Their proof (either\nproof-theoretic or model-theoretic) is straightforward and is omitted.\nLemma 16 The following rules are derived rules of preferential logic:\n\u03b1 \u223c false\n\u03b1 \u2227 \u03b2 \u223c false\n\n(14)\n\n\u03b1 \u2228 \u03b2 \u223c \u00ac\u03b2\n\u03b1 \u223c \u00ac\u03b2\n\n(15)\n\n\u03b1 \u2228 \u03b2 \u2228 \u03b3 \u223c \u00ac\u03b1 \u2227 \u00ac\u03b2\n\u03b2 \u2228 \u03b3 \u223c \u00ac\u03b2\n\n(16)\n\n\u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1\n\u03b1 \u2228 \u03b2 \u2228 \u03b3 \u223c \u00ac\u03b1\n\n(17)\n\nWe shall now derive a property of rational relations.\n20\n\n\fLemma 17 If \u223c is a rational relation, then the following rule is valid:\n\u03b1 \u2228 \u03b3 \u223c \u00ac\u03b1 , \u03b2 \u2228 \u03b3 6\u223c \u00ac\u03b2\n\u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1\n\n(18)\n\nProof : From the first hypothesis, by Rule 17 one deduces \u03b1 \u2228 \u03b2 \u2228 \u03b3 \u223c \u00ac\u03b1.\nFrom the second hypothesis, by Rule 16 one deduces \u03b1 \u2228 \u03b2 \u2228 \u03b3 6\u223c \u00ac(\u03b1 \u2228 \u03b2). If\none applies now Rational Monotonicity, one gets the desired conclusion.\nFor the completeness result, we proceed in the style of L. Henkin. Completeness proofs in this style have been used in conditional logics since [34]. Since a\nnumber of technical lemmas are needed, we have relegated them to Appendix A\nand state here the characterization theorem.\nTheorem 5 A binary relation \u223c on L is a rational consequence relation iff it\nis the consequence relation defined by some ranked model. If the language L is\nlogically finite, then every rational consequence relation is defined by some finite\nranked model.\nProof : The if part is Lemma 15. For the only if part, let \u223c be a consequence\nrelation satisfying the rules of R. The relation \u223c defines a structure W as described in Appendix A. By Lemmas 41 and 36, W is a ranked model. We claim\nthat, for any \u03b1, \u03b2 \u2208 L, \u03b1 \u223c \u03b2 iff \u03b1 \u223cW \u03b2. Suppose first \u03b1 \u223c \u03b2. By Lemma 42,\nif < m, \u03b2 > is minimal in \u03b1\nb, then m is normal for \u03b1. We conclude that m |= \u03b2\nand < m, \u03b2 > \u2261 \u03b2. Therefore \u03b1 \u223cW \u03b2. Suppose now that \u03b1 \u223cW \u03b2. Let m be\na normal world for \u03b1. By Corollary 7, the pair < m, \u03b1 > is minimal in \u03b1\nb and\ntherefore m |= \u03b2. All normal worlds for \u03b1 therefore satisfy \u03b2 and Lemma 8 of\n[17] implies that \u03b1 \u223c \u03b2. For the last sentence of the theorem, notice that, if\nthe language L is logically finite, the model W is finite.\nAs we remarked just prior to Lemma 15, the theorem would not hold had\nwe required models to be well-founded.\n\n3.7\n\nComparison with Delgrande's work\n\nThe system of proof-rules and the models presented above may be compared\nwith the results of J. Delgrande in [7, 8]. The general thrust is very similar\nbut differences are worth noticing. A first difference is in the language used.\nDelgrande's language differs from this paper's in three respects: his work is\nspecifically tailored to first-order predicate calculus, whereas this work deals\nwith propositional calculus; he allows negation and disjunction of conditional\nassertions, which are not allowed in this paper; he allows nesting of conditional\noperators in the language, though his completeness result is formulated only\nfor unnested formulas. Therefore Delgrande's central completeness result in\n[7], only shows that any proposition in which there is no nesting of conditional\noperators (let us call those propositions flat) that is valid has a proof from the\naxioms and rules of his system. But this proof may use propositions that are\n21\n\n\fnot flat. The completeness results reported here show that valid assertions have\nproofs that contain only flat assertions.\nA second difference is that Delgrande's logical system is different from ours:\nDelgrande's logic N does not contain Cautious Monotonicity. Our class of\nranked models is more restricted than his class of models: our models are required to obey the smoothness condition and Delgrande's are not. One may\nalso notice that our logic enjoys the finite model property, but Delgrande's does\nnot. This difference between our two logical systems may sound insignificant\nwhen one remarks that many instances of the rule of Cautious Monotonicity may be derived from Rational Monotonicity, and are therefore valid\nin Delgrande's system N. What we mean is that if \u03b1 \u223c \u03b2 and \u03b1 \u223c \u03b3 then,\nif \u03b1 6\u223c \u00ac\u03b2 one may conclude \u03b1 \u2227 \u03b2 \u223c \u03b3 by Rational Monotonicity rather\nthan by Cautious Monotonicity. But if \u03b1 \u223c \u00ac\u03b2, and therefore \u03b1 \u223c false\none cannot conclude. The Rule 14 is sound in preferential logic but not in\nDelgrande's logic. A proof will soon be given. We want to remark here that\nRule (14) is very natural, since the meaning of \u03b1 \u223c false is that if \u03b1 is true\nthan anything may be true. It therefore means that it is absolutely unthinkable\nthat \u03b1 be true. In such a case we would expect \u03b1 \u2227 \u03b2 to be also absolutely\nunthinkable.\nLet us show now that Rule (14) is not valid for Delgrande's structures. Consider the following structure. Let the set V consists of one infinite descending\nchain: \u227a is a total ordering. Suppose now that the top element of V is the only\nd is V and\nstate that satisfies the propositional variable p. In this structure true\nhas no minimal element, therefore true \u223c false. But pb consists only of the top\nelement and has a minimal point and therefore p 6\u223c false. We have shown that\nthe Rule 14 is not valid for Delgrande's structures. This example also shows\nthat Delgrande's logic does not posses the finite model property.\nA third difference is that his definition of the set of conditional assertions\nentailed by a conditional knowledge base is different from the one presented\nhere, at least at first sight.\n\n4\n4.1\n\nRanked entailment\nIntroduction\n\nAfter having defined the family of relations and the family of models we are\ninterested in, we proceed to study the notion of entailment provided by those\nmodels. Our main result is presented in 4.2. It is negative, in the sense that this\nentailment is equivalent to preferential entailment. A preliminary version of this\nresult may be found in [19]. The collapsing of the two notions of entailment,\nas opposed to the two different classes of relations represented, sheds a new\nlight on the results of [1]. Section 4.3 describes the probabilistic semantics\ngiven to preferential entailment by E. Adams in [1] and shows how the result of\n\n22\n\n\fSection 4.2 provides an alternative proof for Adams' results. The results of this\nsection were contained in [19].\n\n4.2\n\nRanked entailment is preferential entailment\n\nIn the discussion of Section 3.5, we expressed the wish that the set of assertions\nentailed by a conditional knowledge base K be rational and larger than Kp .\nA natural candidate would be the set of all assertions that are satisfied in all\nranked models that satisfy the assertions of K. This is an intersection of rational\nrelations. This proposal fails in a spectacular way. Problems with this proposal\nhave been noted in [8, Section 4]. It is also easy to see that the intersection of\nrational relations may fail to be rational. Theorem 6 shows this failure to be\ntotal.\nLemma 18 Let E be any preferential relation. There exists a rational extension\nof E for which a formula is inconsistent only if it is inconsistent for E.\nProof : Let us choose some enumeration of triples of formulas \u03b1, \u03b2 and \u03b3 in\nwhich every triple appears an unbounded number of times. Let K0 be equal\nto E. At every step i we define Ki+1 in the following way. Let \u03b1, \u03b2 and \u03b3\nbe the triple enumerated at step i. Unless Ki contains the pair \u03b1 \u223c \u03b3 but\ncontains neither \u03b1 \u2227 \u03b2 \u223c \u03b3 nor \u03b1 \u223c \u00ac\u03b2, we shall take Ki+1 to be equal to Ki .\nIf Ki satisfies the condition above, we shall take Ki+1 to be the preferential\nclosure of Ki \u222a {\u03b1 \u223c \u03b2}. Notice that, by Cautious Monotonicity, \u03b1 \u2227 \u03b2 \u223c \u03b3\nwill enter Ki+1 . It is clear that the Ki 's provide an increasing sequence of\npreferential extensions of E. Let K\u221e be the union of all the Ki 's. Clearly K\u221e\nis a preferential extension of E. By construction, and since we took care of\nremoving all counter-examples to the rule of Rational Monotonicity, K\u221e is\na rational consequence relation. We claim that a formula \u03b1 is inconsistent for\nK\u221e (i.e., \u03b1 \u223c false is in K\u221e ) only if it is inconsistent already for E. Indeed, if\n\u03b1 is inconsistent for K\u221e it must be inconsistent for some Ki , but Theorem 3\nshows that, by construction, all Ki 's have the same inconsistent formulas.\nTheorem 6 If the assertion A is satisfied by all ranked models that satisfy all\nthe assertions of K, then it is satisfied by all preferential such models.\ndef\n\nProof : Let A = \u03b4 \u223c \u03b5 be as in the hypotheses. Let E be the rational extension of the preferential closure of K \u222a {\u03b4 \u223c \u00ac\u03b5}, whose existence is asserted by\nLemma 18. The assertion \u03b4 \u223c \u03b5 is in E since it is in any rational relation that\nextends K, by Theorem 5. Since \u03b4 \u223c \u00ac\u03b5 is obviously in E, we conclude that\n\u03b4 is inconsistent for E and therefore inconsistent for the preferential closure of\nK \u222a {\u03b4 \u223c \u00ac\u03b5}. By Corollary 3, A is preferentially entailed by K.\n\n23\n\n\f4.3\n\nComparison with Adams' probabilistic entailment\n\nIn this section we shall show that ranked models are closely related to Adams'\nprobabilistic entailment described in [1]. Theorem 6, then, provides an alternative proof of Adams' axiomatic characterization of probabilistic entailment.\nThere are some technical differences between Adams' framework and ours since\nAdams insists on allowing formulas as conditional assertions: for him the formula \u03b1 is a synonym for true \u223c \u03b1. We also insist on studying infinite knowledge bases whenever possible, where Adams restricts himself to finite knowledge\nbases.\nA probability assignment for the language L is a probability measure on\nL yielded by some probability measure given on U. E. Adams proposed the\nfollowing definitions.\nDefinition 15 (Adams) A probability assignment p for the language L is said\nto be proper for a conditional assertion \u03b1 \u223c \u03b2 iff p(\u03b1) > 0. It is proper for a\nset of conditional assertions iff it is proper for each element. If p is proper for\ndef\nA = \u03b1 \u223c \u03b2, we shall use p(A) to denote the conditional probability p(\u03b2 | \u03b1).\nDefinition 16 (Adams) Let K be a set of conditional assertions. We shall\nsay that K is probabilistically consistent if and only if for any real number\n\u01eb > 0 there exists a probability assignment p for L that is proper for K and such\nthat, for all A in K, one has p(A) \u2265 1 \u2212 \u01eb.\nDefinition 17 Let K be a set of conditional assertions and A a conditional\nassertion. We shall say that K probabilistically entails A iff for all \u01eb > 0 there\nexists \u03b4 > 0 such that for all probability assignments p for L which are proper\nfor K and A, if p(B) \u2265 1 \u2212 \u03b4 for all B in K, then p(A) \u2265 1 \u2212 \u01eb.\nIn [1], Adams studies extensively the relations between the two notions of probabilistic consistency and probabilistic entailment, at least for finite sets of conditional assertions. Here we shall only show the fundamental relation that exists\nbetween Adams' notions and ours. First, we shall make three easy remarks.\nThe first one concerns only probabilistic notions and was claimed by Adams for\nfinite knowledge bases but is true in general.\nLemma 19 A set K of conditional assertions is probabilistically inconsistent\niff it probabilistically entails any conditional assertion.\nOur second remark provides a first link between probabilistic notions and the\nnotions introduced in this paper. It is essentially the soundness part of Adams'\nsoundness and completeness result (see beginning of proof of 4.2 at page 62\nof [1]). This is the easy direction.\nLemma 20 Any conditional assertion preferentially entailed by K is probabilistically entailed by K.\n24\n\n\fOur third remark is the following.\nLemma 21 If the conditional assertion \u03b1 \u223c \u03b2 is in K and \u03b1 \u223c false is preferentially entailed by K then K is probabilistically inconsistent.\nProof : Under the assumptions of the lemma, Lemma 20 shows that \u03b1 \u223c false\nis probabilistically entailed by K. But for any probability assignment p that\nis proper for \u03b1 \u223c \u03b2, p(\u03b1 \u223c false) is defined and equal to 0. Since K probabilistically entails \u03b1 \u223c false we conclude that there is an \u01eb > 0 such that no\nprobability assignment that is proper for K and \u03b1 \u223c \u03b2 gives probabilities larger\nthan 1 \u2212 \u01eb to all assertions of K. Since any probability assignment that is proper\nfor K is also proper for \u03b1 \u223c \u03b2 the conclusion is proved.\nWe shall now prove the converse of Lemma 20 in the case K is finite and\nprobabilistically consistent. The basic remark is the following. Suppose W is a\nfinite (i.e., the set S of states is finite) ranked model. Let \u01eb > 0 be some real\nnumber. We shall describe a probability measure p\u01eb on S. The first principle\nthat will be used in defining p\u01eb is that all states of the same rank will have equal\nprobabilities. The second principle is that the weight of the set of all states of\nrank n, wn will be such that wwn+1\n= \u01eb. The intuitive meaning of this choice\nn\n(since \u01eb will approach zero) is that normal states are more probable than exceptional states. There is clearly exactly one probability measure satisfying both\nprinciples above, for any given finite ranked model. The probability measure p\u01eb ,\ndefined on states, yields a probability measure on formulas. It is clear that a formula \u03b1 has probability zero under p\u01eb iff \u03b1 is inconsistent in W , i.e., \u03b1 \u223cW false.\nSuppose \u03b1 is consistent. Let us consider the conditional probability of \u03b2 given\n\u03b1, which is well defined. If \u03b1 \u223cW \u03b2 then this conditional probability is larger\nthan 1 \u2212 \u01eb \u2212 \u01eb2 \u2212 \u01eb3 \u2212 . . . and therefore approaches one when \u01eb approaches zero.\nOn the other hand, if \u03b1 6\u223cW \u03b2, then this conditional probability cannot exceed\n1\n1\u2212 m\nwhere m is the number of states at the rank which is minimal for \u03b1. It\nis therefore bounded away from 1 when \u01eb approaches 0.\nLemma 22 Let a finite probabilistically consistent knowledge base K be given\ndef\nand suppose A = \u03b1 \u223c \u03b2 is not preferentially entailed by K. Then, K does not\nprobabilistically entail A.\nProof : Let K and A be as described in the lemma. Let L\u2032 be some logically\nfinite sublanguage of L that contains \u03b1, \u03b2 and all propositions appearing in K.\nRelative to L\u2032 , the hypotheses of the lemma are still true. By Lemmas 18 and\nTheorem 3, there is a rational relation E that contains K and \u03b1 \u223c \u00ac\u03b2 and for\nwhich a formula is inconsistent only if it is inconsistent for Kp . By Theorem 5,\nthere is a finite ranked model, W that satisfies \u03b1 \u223c \u00ac\u03b2 and all assertions of\nK but whose inconsistent formulas are exactly those of Kp . Since \u03b1 is not\ninconsistent for Kp , the model W does not satisfy \u03b1 \u223c \u03b2. Let W \u2032 be the model\nobtained by extending the labeling function of W to the full language L in an\n\n25\n\n\farbitrary way. We shall now apply the construction of p\u01eb described above on\nthe model W \u2032 .\nUsing the model W \u2032 and a sequence of \u01eb's approaching zero, we define a\nsequence of probability measures p\u01eb . Let us show that all assignments p\u01eb are\nproper for K and A. If \u03b3 \u2208 L\u2032 , the assignment p\u01eb gives zero probability to \u03b3\niff \u03b3 is inconsistent in W , i.e., inconsistent for Kp . But K is probabilistically\nconsistent and, by Lemma 21, p\u01eb is proper for K. Since W \u2032 does not satisfy A,\nits antecedent cannot be inconsistent in W \u2032 and p\u01eb is proper for A too. When\n\u01eb approaches zero, the conditional probabilities corresponding to each assertion\nof K approach 1 and the conditional probability corresponding to A is bounded\naway from 1.\nThat the result cannot be extended to infinite sets of conditional assertions\nfollows from Adams' remark that his notion of probabilistic consistency does\nnot enjoy the compactness property and from Corollary 1. Adams' example [1,\npages 51\u201352] is closely related to the construction of Lemma 1. The results of\nAdams presented in this section have been interpreted, in particular by [26], to\nmean that probabilistic semantics validate preferential reasoning. We certainly\nagree. But the results that will be presented now show, in our opinion, that\nprobabilistic semantics support the claim that inference procedures should not\nonly be preferential but also rational. Indeed we show, in Appendix B, that some\nvery natural probabilistic models always define rational relations and that, when\nthe language L is countable, all rational relations may be defined by such models.\nThose models are non-standard probability spaces, in the sense of A. Robinson.\nSince no use of those models will be made in the paper, their treatment has\nbeen relegated to an appendix.\n\n5\n5.1\n\nThe rational closure of a conditional knowledge base\nIntroduction\n\nSo far, we have argued for Thesis 1 and gathered much knowledge about rational\nrelations, showing in particular that there is no obvious way to define a notion of\nclosure satisfying Thesis 1. In this section we shall show that there is a natural\nnotion of closure (called rational closure) that satisfies Thesis 1. We shall study\nit and prove that it possesses many very elegant mathematical properties. We\nshall, then, evaluate the value of rational closure as an answer to the question\nof the title. In conclusion, we shall propose Thesis 2, that claims that any\nsatisfactory answer is a superset of rational closure. In other terms we think that\nany reasonable system should endorse any assertion contained in the rational\nclosure, but it may also endorse some additional assertions. At present, we do\nnot know of any natural construction satisfying Thesis 1 other than rational\n\n26\n\n\fclosure.\nA first possible answer is rejected in 5.2. This result appeared in [18]. The\nremainder of the paper describes rational closure. In 5.3 a partial ordering\nbetween rational relations is defined, which captures the notion of a relation\nbeing preferable to (i.e., smaller, less adventurous, more reasonable than) another one. The rational closure of a knowledge base is then defined in 5.4 as the\nrational extension of a knowledge base that is preferable in the ordering defined\nin Section 5.3 to all other rational extensions. Not every knowledge base has\na rational closure, but in Section 5.6 it will be shown that any admissible (see\nDefinition 11) knowledge base has a rational closure. By Lemma 7, then, any\nfinite knowledge base has a rational closure. We claim that the rational closure\nof a knowledge base, when it exists, provides a reasonable answer to the question\nof the title. Global properties of the operation of rational closure are described\nin 5.5. These results, concerning the global behavior of a nonmonotonic inference operation, are the first of their kind. In 5.6 an algorithmic construction\nof the rational closure of an admissible knowledge base is described. This algorithmic description essentially replaces and improves upon the proof-theoretic\ndescription of [18]. A corrected and generalized model-theoretic construction,\nfirst described in [18] is proposed in 5.7. Section 5.8 presents an algorithm to\ncompute the rational closure of a finite knowledge base and discusses complexity\nissues. Section 5.9 discusses the appeal of rational closure and provides some\nexamples. Section 6 concludes by considering topics for further research. In [27]\nJ. Pearl proposes his own version of the rational closure construction that had\nbeen described in [18].\n\n5.2\n\nPerfect extensions\n\nAll that has been done so far does not allow us to give a satisfactory answer to\nthe question of the title. Let K be a set of conditional assertions. We would like\nto define a consequence relation K, the rational closure of K, that contains all\nthe conditional assertions that we intuitively expect to follow from K. At this\npoint the reader should be convinced that K should be a rational consequence\nrelation that extends K. Any such relation obviously also extends Kp . It seems\nthat we would also like this rational extension of K to be as small as possible.\nUnfortunately Theorem 6 shows that the intersection of all rational extensions\nof K is exactly Kp and therefore not in general rational and highly unsuitable\nas shown in Section 3.5. There is obviously a maximal such extension: the full\nconsequence relation, (i.e., \u03b1 \u223c \u03b2 for all \u03b1, \u03b2 in L) but this is certainly not the\none we are looking for. Can we find out a number of properties that we would\nlike K to possess, in order to, at least, narrow the field of possibilities? We shall\nlook both for local properties of K with respect to K and for global properties\nof the mapping K 7\u2192 K. The sequel will present a proposal for the definition of\nK and proofs that it enjoys both local and global (in particular a strong form\nof cumulativity) properties.\n27\n\n\fIf Kp happens to be rational, then we probably have no reason to look further\nand should take K to be equal to Kp . If Kp is not rational, then there is an\nassertion \u03b1 \u223c \u03b2 in Kp , and a formula \u03b3 such that neither \u03b1 \u2227 \u03b3 \u223c \u03b2 nor \u03b1 \u223c \u00ac\u03b3\nare in Kp . It seems that the right thing to do, in most such cases, is to introduce\n\u03b1 \u2227 \u03b3 \u223c \u03b2 in K. One may try to require that any assertion in K \u2212 Kp be of\nthe form \u03b1 \u2227 \u03b3 \u223c \u03b2 where \u03b1 \u223c \u03b2 is in Kp , i.e., that any assertion in K \u2212 Kp\nhave support in Kp . It will be shown that this may well be impossible. Let us\nencapsulate this idea in definitions.\nDefinition 18 An assertion \u03b1 \u223c \u03b2 is said to be supported by (or in) Kp iff\nthere is a formula \u03b3 such that \u03b1 |= \u03b3 and \u03b3 \u223c \u03b2 is in Kp .\nDefinition 19 A rational extension K\u2032 of K is called perfect iff every assertion\nof K\u2032 is supported by Kp .\nWe may present the following disappointing result.\nLemma 23 There is a finite conditional knowledge base that has no rational\nperfect extension.\nProof : Let L be the set of all propositional formulas built out of the set of four\npropositional variables: {a, b, c, d}. Let W be the preferential model with three\nstates: {s, t, u}, in which s \u227a t (and this is the only pair in the relation \u227a) and s\nsatisfies only a, t satisfies only b and u satisfies only c and d. Let K be the set of\nall conditional assertions satisfied in W . We claim that K has no rational perfect\nextension. Notice, first, that W satisfies a \u2228 b \u223c \u00acb. This assertion is therefore\nin K. Any ranked model satisfying a \u2228 b \u223c \u00acb must satisfy at least one of the\nfollowing two assertions: a \u2228 c \u223c \u00acc or b \u2228 c \u223c \u00acb. Any rational extension of\nK must therefore contain one of the two assertions above. But a \u2228 c \u223c \u00acc has\nclearly no support in Kp and therefore any perfect rational extension of K must\ncontain: b \u2228 c \u223c \u00acb. But W satisfies c \u223c d and any ranked model satisfying\nboth b \u2228 c \u223c \u00acb and c \u223c d must also satisfy b \u2228 c \u223c d. Any perfect rational\nextension of K must therefore contain this last formula but it clearly lacks\nsupport in Kp . We conclude that K has no perfect rational extension.\nIt is therefore reasonable to look for less than perfect extensions. Let us first\nexamine perfection concerning two special kinds of formulas. The following is\neasily proved.\nLemma 24 An assertion of the form \u03b1 \u223c false is supported by Kp iff it is in\nKp . An assertion of the form true \u223c \u03b1 is supported by Kp iff it is in Kp .\nWe shall propose a construction of K such that K does not contain any formula\nof the form \u03b1 \u223c false or of the form true \u223c \u03b1 that is not in Kp .\n\n28\n\n\f5.3\n\nOrdering rational relations\n\nIn this section we shall define a strict partial ordering between rational relations.\nThis ordering captures the notion of a relation being preferable to, i.e., less adventurous than another one. An intuitive explanation will be given immediately\nafter the definition. For the rest of this section we shall write \u03b1 < \u03b2 for ( or in)\nK to mean the assertion \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b2 is in K. We shall write \u03b1 \u2264 \u03b2 for ( or in)\nK when it is not the case that \u03b2<\u03b1 in K.\nDefinition 20 Let K0 and K1 be two rational consequence relations. We shall\nsay that K0 is preferable to K1 and write K0 \u227a K1 iff:\n1. there exists an assertion \u03b1 \u223c \u03b2 in K1 \u2212 K0 such that for all \u03b3 such that\n\u03b3 < \u03b1 for K0 , and for all \u03b4 such that \u03b3 \u223c \u03b4 is in K0 , we also have \u03b3 \u223c \u03b4\nin K1 , and\n2. for any \u03b3, \u03b4 if \u03b3 \u223c \u03b4 is in K0 \u2212 K1 there is an assertion \u03c1 \u223c \u03b7 in K1 \u2212 K0\nsuch that \u03c1 < \u03b3 for K1 .\nThe intuitive explanation behind Definition 20 is the following. Suppose two\nagents, who agree on a common knowledge base, are discussing the respective\nmerits of two rational relations K0 and K1 . A typical attack would be: your\nrelation contains an assertion, \u03b1 \u223c \u03b2, that mine does not contain (and therefore\ncontains unsupported assertions). A possible defense against such an attack\ncould be: yes, but your relation contains an assertion \u03b3 \u223c \u03b4 that mine does not,\nand you yourself think that \u03b3 refers to a situation that is more usual than the\none refered to by \u03b1. Such a defense must be accepted as valid. Definition 20\nexactly says that the proponent of K0 has an attack that the proponent of K1\ncannot defend against (this is part 1) but that he (i.e., the proponent of K0 )\nmay find a defense against any attack from the proponent of K1 (this is part 2\nof the definition).\nLemma 25 The relation \u227a between rational consequence relations is irreflexive\nand transitive.\nProof : Irreflexivity follows immediately from Condition 1. For transitivity, let\nus suppose that K0 \u227a K1 , with \u03b1 \u223c \u03b2 the witness promised by Condition 1 and\nthat K1 \u227a K2 with \u03b3 \u223c \u03b4 as a witness. Our first step will be to show that there\nexists an assertion \u03b5 \u223c \u03b6 in K2 \u2212 K0 such that \u03b5 \u2264 \u03b1 in K0 and \u03b5 \u2264 \u03b3 in K1 .\nWe shall have to consider many different cases.\n1. Suppose \u03b3 < \u03b1 in K2 .\n(a) If \u03b3 < \u03b1 is not in K0 , then \u03b3 < \u03b1 is a suitable \u03b5 \u223c \u03b6.\n(b) If \u03b3 < \u03b1 is in K0 , then \u03b3 \u223c \u03b4 is a suitable \u03b5 \u223c \u03b6, since if it were in\nK0 it would be in K1 .\n29\n\n\f2. Suppose therefore that \u03b3 < \u03b1 is not in K2 , i.e., for K2 , \u03b1 \u2264 \u03b3.\n(a) If \u03b3 < \u03b1 is in K1 , then it is in K1 \u2212 K2 and there is an assertion\n\u03be \u223c \u03b7 in K2 \u2212 K1 such that \u03be < \u03b3 \u2228 \u03b1 in K2 .\ni. If \u03be < \u03b3 \u2228 \u03b1 is not in K0 , then it is a suitable \u03b5 \u223c \u03b6.\nii. If \u03be < \u03b3 \u2228 \u03b1 is in K0 , then \u03be < \u03b1 in K0 and we have both that\n\u03be < \u03b3 \u2228 \u03b1 in K1 and that \u03be \u223c \u03b7 cannot be in K0 , otherwise it\nwould be in K1 . We conclude that \u03be \u223c \u03b7 is a suitable \u03b5 \u223c \u03b6.\n(b) Suppose therefore that \u03b3 < \u03b1 is not in K1 , i.e., for K1 , like for K2 ,\n\u03b1 \u2264 \u03b3.\ni. If \u03b1 \u223c \u03b2 is in K2 , then it is a suitable \u03b5 \u223c \u03b6.\nii. If \u03b1 \u223c \u03b2 is not in K2 , then it is in K1 \u2212 K2 and there is a \u03be \u223c \u03b7\nin K2 \u2212 K1 such that \u03be < \u03b1 in K2 .\nA. If \u03be < \u03b1 is not in K0 , then it is a suitable \u03b5 \u223c \u03b6 since, in K1 ,\n\u03be \u2228 \u03b1 \u2264 \u03b1 \u2264 \u03b3.\nB. If \u03be < \u03b1 is in K0 then \u03be \u223c \u03b7 is a suitable \u03b5 \u223c \u03b6 since \u03be \u223c \u03b7\ncannot be in K0 , otherwise it would be in K1 .\nWe have now proved the existence of an assertion \u03b5 \u223c \u03b6 with the desired\nproperties. Let us proceed to the proof that K0 \u227a K2 . For property 1, we claim\nthat \u03b5 \u223c \u03b6 provides a suitable witness. It is indeed in K2 \u2212 K0 by construction.\nSuppose now that \u03be < \u03b5 in K0 . Then \u03be < \u03b1 in K0 and therefore \u03be < \u03b5 in K1 .\nTherefore \u03be < \u03b3 in K1 . If \u03be \u223c \u03b7 is in K0 , then it must be in K1 since \u03be < \u03b1\nin K0 and also in K2 since \u03be < \u03b3 in K1 . This concludes the verification of\nCondition 1.\nFor Condition 2, suppose that \u03c6 \u223c \u03b8 is in K0 \u2212 K2 . We have to find a \u03be \u223c \u03b7\nin K2 \u2212K0 such that \u03be < \u03c6 in K2 . We shall consider a number of different cases.\n1. If \u03b5 < \u03c6 in K2 , then \u03b5 \u223c \u03b6 is a suitable \u03be \u223c \u03b7.\n2. Suppose then that \u03b5 < \u03c6 is not in K2 , i.e., \u03c6 \u2264 \u03b5 for K2 .\n(a) Suppose, first that \u03b5 < \u03c6 is in K1 , therefore in K1 \u2212 K2 . There is\nthen an assertion \u03c1 \u223c \u03c4 in K2 \u2212 K1 such that \u03c1 < \u03b5 \u2228 \u03c6 in K2 .\ni. If \u03c1 < \u03b5 \u2228 \u03c6 is in K0 , then \u03c1 < \u03b1 in K0 and we conclude that\n\u03c1 \u223c \u03c4 is not in K0 , otherwise it would be in K1 . We conclude\nthat \u03c1 \u223c \u03c4 is a suitable \u03be \u223c \u03b7.\nii. If \u03c1 < \u03b5 \u2228 \u03c6 is not in K0 , then it is a suitable \u03be \u223c \u03b7.\n(b) Suppose, then, that \u03b5 < \u03c6 is not in K1 , i.e., for K1 , \u03c6 \u2264 \u03b5.\ni. If \u03b5 < \u03c6 is in K0 , then it is in K0 \u2212 K1 . Therefore there is an\nassertion \u03c1 \u223c \u03c4 in K1 \u2212 K0 such that \u03c1 < \u03b5 \u2228 \u03c6 in K1 . But then\n\u03c1 < \u03b3 in K1 and we conclude that \u03c1 \u223c \u03c4 is in K2 and that \u03c1 < \u03c6\nin K2 . The assertion \u03c1 \u223c \u03c4 is a suitable \u03be \u223c \u03b7.\n30\n\n\fii. Suppose, then that, on the contrary, \u03b5 < \u03c6 is not in K0 , i.e.,\n\u03c6 \u2264 \u03b5 in K0 , as in K1 and K2 .\nA. Suppose first that \u03c6 \u223c \u03b8 is in K1 , therefore in K1 \u2212 K2 .\nThen, there is an assertion \u03c1 \u223c \u03c4 in K2 \u2212 K1 , such that\n\u03c1 < \u03c6 in K2 . There are two cases. If \u03c1 < \u03c6 is in K0 , then\n\u03c1 < \u03b5 in K0 , and \u03c1 \u223c \u03c4 is not in K0 , otherwise it would be in\nK1 , since \u03c1 < \u03b5 \u2264 \u03b1 in K0 . The assertion \u03c1 \u223c \u03c4 is a suitable\n\u03be \u223c \u03b7. If, on the other hand \u03c1 < \u03c6 is not in K0 , then it is\nin K2 \u2212 K0 , and it is a suitable \u03be \u223c \u03b7.\nB. Suppose now that \u03c6 \u223c \u03b8 is not in K1 , therefore in K0 \u2212 K1 .\nThere is an assertion \u03c1 \u223c \u03c4 in K1 \u2212 K0 , such that \u03c1 < \u03c6 in\nK1 . But \u03c1 < \u03c6 \u2264 \u03b5 \u2264 \u03b3 in K1 and since \u03c1 \u223c \u03c4 is in K1 it\nmust be in K2 . Also, since \u03c1 < \u03c6 is in K1 , it must be in K2 .\nWe see that \u03c1 \u223c \u03c4 is a suitable \u03be \u223c \u03b7.\n\n5.4\n\nDefinition of rational closure\n\nWe may now define the rational closure of a knowledge base.\nDefinition 21 Let K be an arbitrary knowledge base. If there is a rational\nextension K of K that is preferable to all other rational extensions of K, then\nK will be called the rational closure of K.\nNotice first that the rational closure of a knowledge base is unique, if it exists,\nsince preference is a partial ordering. Notice then that there are knowledge bases\nthat do not have a rational closure. Example 1 will show this. In Section 5.6\nwe shall show that admissible knowledge bases, including all finite knowledge\nbases, have a rational closure.\nExample 1 Let L be the propositional calculus built upon the variables pn\nwhere n is an arbitrary integer (i.e., positive or negative). Let N be the knowledge base that contains all assertions of the form pn \u223c pn+2 and of the form\npn \u223c \u00acpn\u22122 for all integers n. We shall show that N has no rational closure.\nWe shall first prove a lemma about invariance of the operation of rational\nclosure under renaming of the proposional variables. This lemma is of independent interest.\nDefinition 22\n1. A renaming of the propositional calculus L is a bijection\nof the propositional variables.\n2. Let f be a renaming of L. The formula obtained from \u03b1 by substituting\nf (p) for the propositional variable p will be denoted by f (\u03b1).\n31\n\n\f3. Let f be as above and \u03b1 \u223c \u03b2 a conditional assertion. The assertion f (\u03b1) \u223c\nf (\u03b2) will be denoted by f (\u03b1 \u223c \u03b2).\n4. Let f be as above and K a consequence relation. The relation f (K) will\nbe defined by f (K) = {f (\u03b1 \u223c \u03b2) | \u03b1 \u223c \u03b2 \u2208 K}.\nLemma 26 (Invariance under renaming) Let f be a renaming of L.\n1. Let K0 and K1 be rational consequence relations. Then K0 \u227a K1 iff\nf (K0 ) \u227a f (K1 ).\n2. Let K be a consequence relation and K its rational closure ,then f (K) is\nthe rational closure of f (K)\n3. Let K be a consequence relation which is invariant under f , namely f (K) =\nK,then its rational closure (if it exists) is invariant under f .\nProof : The proof is immediate from the definitions, noting that f is also a\nbijection of the set of all consequence relations.\nLemma 27 The knowledge base N defined above has no rational closure.\nProof : We shall reason by contradiction. Suppose R is the rational closure of\nN . From Lemma 30 in the sequel (the proof of which does not depend on the\npresent lemma), we know that there is no assertion of the form \u03b1 \u223c false in\nR that is not in N p . Using a construction very similar to the one used in the\nproof of Lemma 1, one may build, for any integer n, a preferential model of N ,\ncontaining a top state that satisfies pn . Therefore, for any n, pn is consistent\nfor R.\nRemember that a < b is the assertion a \u2228 b \u223c \u00acb. We shall write a < b to\nmean that a \u2228 b \u223c \u00acb is in R. If follows from results of Section 3.6 that, on\nformulas that are consistent for R, the relation < is a strict modular ordering.\nNotice, also, that, for any n, the assertion pn+2 < pn belongs to N p , since both\npn \u223c pn+2 and pn+2 \u223c \u00acpn are in N p . Therefore pn+2 < pn . There are, in R,\ntwo infinite (in both directions) chains (for <), one containing the variables of\nodd index, the other one containing those of even index. Since < is modular,\nwe may consider only four cases:\n1. For every even n and odd k, pn > pk . Let f be the renaming of L given by\nf (m) = m + 1. Clearly f (N ) = N . Hence, by Lemma 26 we must have\nf (R) = R. But this last statement implies pn > pk for even n and odd k,\nand therefore implies that all pn 's are inconsistent for R. A contradiction.\n2. For every even n and odd k, pn < pk . The argument is exactly as in case 1,\nsystematically interchanging 'odd' and 'even'.\n32\n\n\f3. There is an odd k ,and there are even m and n such that pn < pk < pm . In\nthis case, define a renaming f by f (l) = l for odd l and f (l) = l + m\u2212 n for\neven l. The contradiction is as above by noting that f transforms pn < pk\ninto pm < pk .\n4. None of the above is true. In such a case one may see that there must\nexist an even m ,and odd i and j such that pi < pm < pj . The argument\nis exactly as in case 3, systematically interchanging 'odd' and 'even'.\n\n5.5\n\nGlobal properties of the operation of rational closure\n\nFirst, we show that rational closure possesses a loop property analogous to the\nproperty discussed in [17, Section 4]. This is a powerful property that one is\nhappy to have.\nLemma 28 (Loop property) Let Ki for i = 0, . . . , n \u2212 1 be knowledge bases\nsuch that, for any i, Ki+1 \u2286 Ki , where addition is understood modulo n. Then\nfor any i, j, one has Ki = Kj .\nProof : Let K \u0016 K \u2032 mean that either K \u227a K \u2032 or K = K \u2032 . Since Ki is a rational\nextension of Ki+1 , we have Ki+1 \u0016 Ki , for all i's (modulo n). We conclude that\nthe rational closures of all the Ki 's are equal.\nThe following property of reciprocity is the special case n = 2.\nCorollary 4 If X \u2286 Y and Y \u2286 X, then X = Y .\nThe following property of cumulativity is equivalent to reciprocity in the presence\nof inclusion (i.e., K \u2286 K).\nCorollary 5 If X \u2286 Y \u2286 X then X = Y .\nThe meaning of Corollary 5 is that one may add to a knowledge base anything\nthat is in its rational closure without changing this closure. We may now show\nthat, in two different respects, rational closure is close to being perfect.\nLemma 29 The consequence relation K, if it exists, contains an assertion of\nthe form true \u223c \u03b1 only if this assertion is in Kp .\nProof : Suppose an assertion of the form above is in K. We shall show that it\nmust be in any rational extension of K and will conclude by Theorem 6. Suppose\nK \u2032 is a rational extension of K and true \u223c \u03b1 is in K \u2212 K \u2032 . Since K\u227a K \u2032 , we\nknow there is an assertion \u03b3 \u223c \u03b4 in K \u2032 \u2212 K such that \u03b3 < true in K \u2032 . But this\nmeans true \u223c false is in K \u2032 , and contradicts the fact that true \u223c \u03b1 is not in\nK \u2032.\nLemma 30 The consequence relation K, if it exists, contains an assertion of\nthe form \u03b1 \u223c false only if this assertion is in Kp .\n\n33\n\n\fProof : Let V and T be preferential models defining the relations K and Kp\nrespectively. Such models exist by Theorem 1. Let U be the model obtained\nby putting T on top of V , i.e., every state of V is less than every state of\nT . One easily sees that U satisfies the smoothness property and is therefore a\npreferential model. It defines a preferential relation S. An assertion of the form\n\u03b1 \u223c false is in S only if it is in Kp , since T is a submodel of U . If \u03b1 is not\ninconsistent in K then for any \u03b2, \u03b1 \u223c \u03b2 is in S iff it is in K. By Lemma 18,\nthere is a rational extension R of S with the same set of inconsistent formulas. If\none looks at the construction described in the proof of this lemma, one sees that\nit will add to S only assertions with antecedent inconsistent in K. Therefore,\nif \u03b1 is not inconsistent in K, for any \u03b2, \u03b1 \u223c \u03b2 is in R iff it is in K. Now, R\nis a rational extension of K. If R is equal to K, we are through. Suppose not.\nThen we have K \u227a R. Suppose now that \u03b1 \u223c false is in K \u2212 R. There must be\nan assertion \u03b3 \u223c \u03b4 in R \u2212 K such that \u03b3 < \u03b1 in R. But \u03b3 \u223c \u03b4 in R \u2212 K implies\nthat \u03b3 \u223c false is in K and \u03b3 \u223c \u03b4 is in K. A contradiction.\n\n5.6\n\nAdmissible knowledge bases and their rational closure\n\nIn this section, we show that an admissible (see Definition 11) knowledge base\nhas a rational closure and that this rational closure may be defined in terms of\nthe ranks of the formulas, as defined in Section 2.6. This provides a useful and\nelegant characterization of the rational closure of an admissible knowledge base.\nTheorem 7 Let K be an admissible conditional knowledge base. The rational\nclosure K of K exists and is the set S of all assertions \u03b1 \u223c \u03b2 such that either\n1. the rank of \u03b1 is strictly less than the rank of \u03b1 \u2227 \u00ac\u03b2 (this includes the case\n\u03b1 has a rank and \u03b1 \u2227 \u00ac\u03b2 has none), or\n2. \u03b1 has no rank (In this case \u03b1 \u2227 \u00ac\u03b2 has no rank either).\nProof : Suppose indeed that every formula consistent with Kp has a rank. We\nhave many things to check. First let us prove that S contains K. If \u03b1 \u223c \u03b2 is\nin K and \u03b1 has rank \u03c4 , then C\u03c4 contains \u03b1 \u223c \u03b2 and entails true \u223c \u03b1 \u2192 \u03b2.\nTherefore \u03b1 \u2227 \u00ac\u03b2 is exceptional for C\u03c4 , and has rank strictly larger than \u03c4 .\nWe should now check that S is rational. For Left Logical Equivalence,\nRight Weakening and Reflexivity the proof is easy. For Cautious Monotonicity, notice that if \u03b1 \u223c \u03b2 is in S, then \u03b1 and \u03b1 \u2227 \u03b2 have the same rank. For\nAnd and Or, notice that the rank of a disjunction is the smaller of the ranks\nof its components. For Rational Monotonicity, notice that if \u03b1 \u223c \u00ac\u03b2 is not\nin S, then \u03b1 and \u03b1 \u2227 \u03b2 have the same rank.\nWe must now check that if R is a rational extension of K that is different\nfrom S then S \u227a R. Let R be such an extension. We shall first show that S\nand R must agree on all assertions whose antecedents have no rank (the notion\nof rank is always defined by reference to K). Indeed, by construction, any such\n34\n\n\fassertion is in S, and it is preferentially entailed by K since K is admissible. It\nis therefore in R. We conclude that S and R must differ for some assertion that\nhas rank. Let \u03c4 be the smallest rank at which S and R differ, i.e., the smallest\nrank of an \u03b1 such that there is a \u03b2 such that \u03b1 \u223c \u03b2 \u2208 (S \u2212 R) \u222a (R \u2212 S). We\nhave two cases to consider, either there is a formula \u03b1 of rank greater or equal\nto \u03c4 such that, for all formulas \u03b2 of rank greater or equal to \u03c4 , \u03b1 \u2264 \u03b2 in R, or\nthere is no such formula.\nSuppose there is such an \u03b1. Our first claim is that, for any \u03b2 of rank greater\nthan \u03c4 , the assertion \u03b1 < \u03b2 is in R. Consider indeed a ranked model W that\ndefines R. Let W \u2032\u2032 be the supermodel obtained from W by adding to W , at each\nlevel l a state labeled with world w for all worlds w that label a state of rank\nless than l in W . It is clear that W \u2032\u2032 is ranked and defines the same relation\nas W , and, in W \u2032\u2032 , every label that appears at some level l also appears at all\ngreater levels. Let W \u2032 be the submodel of W \u2032\u2032 that contains all those states of\nlevel (rank in W \u2032\u2032 ) greater or equal to the minimal level l at which some state\nsatisfies \u03b1. It clearly satisfies the smoothness property (for this we needed to\ngo through the construction of W \u2032\u2032 ). Since a formula is satisfied in W \u2032\u2032 at some\nlevel less than l iff it is of rank less than \u03c4 , no antecedent of an assertion of\nC\u03c4 is satisfied at any level less than l. But W \u2032\u2032 is a model of K and therefore\nW \u2032 is a model of C\u03c4 . But C\u03c4 preferentially entails true \u223c \u00ac\u03b2. The model\nW \u2032 therefore satisfies true \u223c \u00ac\u03b2 but not true \u223c \u00ac\u03b1. It therefore also satisfies\n\u03b1 < \u03b2. But the antecedent of this last assertion has rank greater or equal to \u03c4 ,\nand therefore no state of W \u2032\u2032 that is not in W \u2032 satisfies it. Therefore \u03b1 < \u03b2 is\nsatisfied by W \u2032\u2032 and is an element of R. satisfies Our second claim is that there\nis an assertion \u03b3 \u223c \u03b4 in R \u2212 S, such that \u03b3 is of rank \u03c4 and \u03b3 \u2264 \u03b1 in R. We\nconsider two cases.\n1. There is an assertion \u03be \u223c \u03b7 in S \u2212 R with \u03be of rank \u03c4 . Then \u03be \u2227 \u00ac\u03b7 has\nrank greater than \u03c4 , and by our first claim, \u03b1 < \u03be \u2227 \u00ac\u03b7 is in R. But \u03be \u223c \u03b7\nis not in R, and therefore we must have \u03b1 < \u03be for R. This last assertion is\nnot in S since both \u03b1 and \u03be have rank \u03c4 . The assertion \u03b1 < \u03be is a suitable\n\u03b3 \u223c \u03b4.\n2. There is an assertion \u03be \u223c \u03b7 in R \u2212 S with \u03be of rank \u03c4 . If \u03be \u2264 \u03b1 in R, then\n\u03be \u223c \u03b7 is a suitable \u03b3 \u223c \u03b4. Suppose, then, that \u03b1 < \u03be in R. Since \u03be has\nthe same rank as \u03b1, \u03b1 < \u03be is in R \u2212 S and a suitable \u03b3 \u223c \u03b4.\nWe may now conclude that S \u227a R. The assertion \u03b3 \u223c \u03b4 fulfills the requirements of Condition 1 of Definition 20, since \u03b3 has rank \u03c4 . For Condition 2,\nsuppose \u03be \u223c \u03b7 is in S \u2212 R, then \u03be must be of rank greater or equal to \u03c4 and\n\u03be \u2227 \u00ac\u03b7 is of rank greater than \u03c4 . By our first remark we conclude that \u03b1 < \u03be \u2227 \u00ac\u03b7\nfor R. It is a matter of elementary properties of rational relations to check that\nif \u03b1 < \u03be \u2227 \u00ac\u03b7 is in R, but \u03be \u223c \u03b7 is not, then \u03b1 < \u03be for R. Since \u03b3 \u2264 \u03b1 in R, we\nconclude that \u03b3 < \u03be for R.\n\n35\n\n\fSuppose now that there is no such \u03b1. Take any formula \u03b3 of rank \u03c4 . There\nis a formula \u03b4 of rank greater or equal to \u03c4 such that \u03b4 < \u03b3 for R. But this\nassertion is then in R \u2212 S. It satisfies Condition 1 of Definition 20, since its\nantecedent has rank \u03c4 . Suppose now \u03c6 \u223c \u03b8 is in S \u2212 R. Then \u03c6 is of rank at\nleast \u03c4 . If it is of rank \u03c4 , there is a formula \u03c0 of rank at least \u03c4 such that \u03c0 < \u03c6\nis in R, but not in S and this provides the witness requested by Condition 2. If\nit is of rank greater than \u03c4 , then the assertion \u03b4 < \u03b3 defined just above will do.\n\n5.7\n\nA model-theoretic description of rational closure\n\nWe shall describe here a model-theoretic construction that transforms a preferential model W into a ranked model W \u2032 by letting all states of W sink as\nlow as they can respecting the order of W , i.e., ranks the states of W by their\nheight in W . We shall show that, under certain conditions, the model W \u2032 defines the rational closure of the relation defined by W . This construction is\nclearly interesting only when the model W is well-founded. We know that, in\nthis case, the relation defined by W indeed possesses a rational closure (Theorem 7 and Lemma 7). It would have been pleasant to be able to prove the\nvalidity of such a construction on an arbitrary well-founded preferential model.\nUnfortunately we are not able to show this in general, but need to suppose, in\naddition, that the preferential relation defined by W is well-founded (see Definition 8). This is quite a severe restriction, since we have seen at the end of\nSection 2.3 that finitely-generated relations on arbitrary languages L are not\nalways well-founded. When the language L is logically finite, we know all preferential relations are well-founded. Given a well-founded preferential relation,\nthe construction may be applied to any of its well-founded models.\nLet P be a well-founded preferential relation and W = hS, l, \u227ai any wellfounded preferential model that defines P . We shall define, for any ordinal \u03c4 ,\ntwo sets of states: U\u03c4 and V\u03c4 . Those sets satisfy, for any \u03c4 , U\u03c4 \u2286 V\u03c4 \u2286 U\u03c4 +1 .\nThe set U\u03c4 contains, in addition to the elements of previous V 's, the states that\nare minimal among those states not previously added. The set V\u03c4 contains, in\naddition to the states of U\u03c4 , all states that satisfy only formulas already satisfied\nby states previously considered.\n[\ndef\nU\u03c4 =\nV\u03c1\n\u03c1<\u03c4\n\n\u222a {s \u2208 S | \u2200t \u2208 S such that t \u227a s, there is a \u03c1 < \u03c4 such that t \u2208 V\u03c1 } (19)\ndef\n\nV\u03c4 = {s \u2208 S | \u2200\u03b1 \u2208 L such that s \u2261 \u03b1, \u2203t \u2208 U\u03c4 such that t \u2261 \u03b1}\n\n(20)\n\nSince the model W is well-founded, every state s \u2208 S is in some V\u03c4 . Let the\nheight of a state s \u2208 S (in W ) be the least ordinal \u03c4 for which s \u2208 V\u03c4 . We shall\n36\n\n\fnow show that there is a close relationship between the rank of a formula \u03b1\nin P (see definition following Definition 10) and the height in W of the states\nthat satisfy \u03b1. For any ordinal \u03c4 , we shall denote by W\u03c4 the substructure of\nW consisting of all states of height larger or equal to \u03c4 . Notice that, since W\nis well-founded,\nW\u03c4 is a preferential model. Notice also that all elements of\nS\nU\u03c4 \u2212 \u03c1<\u03c4 V\u03c1 are minimal elements of W\u03c4 .\nLemma 31 Let \u03c4 be an ordinal. Let \u03b1 be a formula of rank at least \u03c4 and \u03b2 be\nany formula.\n1. No state of height less than \u03c4 satisfies \u03b1.\n2. The model W\u03c4 satisfies \u03b1 \u223c \u03b2 iff \u03b1 \u223c \u03b2 is preferentially entailed by C\u03c4 .\nIn particular, if \u03b1 has no rank, no state in S satisfies \u03b1.\nProof : It proceeds by simultaneous ordinal induction on \u03c4 . Suppose both\nclaims have been proved for all ordinals \u03c1 < \u03c4 . Let us prove our first claim. Since\n\u03b1 has rank at least \u03c4 , for any \u03c1, \u03c1 < \u03c4 , C\u03c1 preferentially entails true \u223c \u00ac\u03b1. By\nthe induction\nhypothesis (item 2), W\u03c1 satisfies true \u223c \u00ac\u03b1. Therefore no state\nS\nof U\u03c1 \u2212 \u03c3<\u03c1 V\u03c3 satisfies \u03b1. If there\nS were a state s of height \u03c1 < \u03c4 satisfying\n\u03b1, there would be a state t of U\u03c1 \u2212 \u03c3<\u03c1 V\u03c3 satisfying \u03b1. We conclude that no\nstate of height less than \u03c4 satisfies \u03b1.\nFor the second claim, by Lemma 5, \u03b1 \u223c \u03b2 is preferentially entailed by C0\n(i.e., in P , i.e., satisfied by W ) iff it is preferentially entailed by C\u03c4 . By the first\nclaim, \u03b1 \u223c \u03b2 is satisfied by W iff it is satisfied by W\u03c4 .\nLemma 32 A formula \u03b1 has rank \u03c4 in P iff there is a state s \u2208 S of height \u03c4\nthat satisfies \u03b1 and there is no such state of height less than \u03c4 .\nProof : We shall prove the only if part. The if part is then obvious. First,\nremark that if \u223c is a preferential relation that contains the assertion \u03b1\u2228\u03b2 \u223c \u00ac\u03b1\n, then it contains the assertion true \u223c \u00ac\u03b1. This is easily shown by preferential\nreasoning. Suppose now that \u03b1 has rank \u03c4 . Lemma 31 shows that no state of\nheight less than \u03c4 satisfies \u03b1. We must show that there is a state of height \u03c4\nsatisfying \u03b1. Let \u03b2 be any formula of rank larger or equal to \u03c4 that is minimal\nwith respect to < among those formulas. There is such a formula since the set is\nnot empty (\u03b1 is there) and < is well-founded. Since \u03b1 is not exceptional for C\u03c4 ,\nthe assertion true \u223c \u00ac\u03b1 is not preferentially entailed by C\u03c4 and therefore the\nassertion \u03b1\u2228\u03b2 \u223c \u00ac\u03b1 is not preferentially entailed by C\u03c4 . But \u03b1\u2228\u03b2 has rank \u03c4\nand, by Lemma 31, W\u03c4 does not satisfy \u03b1\u2228\u03b2 \u223c \u00ac\u03b1. There is, therefore, in W\u03c4 a\nstate s satisfying \u03b1 such that no state t in W\u03c4 , t \u227a s, satisfies \u03b2. We shall show\nthat s is minimal in W\u03c4 and has therefore height \u03c4 . Suppose s is not minimal in\nW\u03c4 . There would be a state t minimal in W\u03c4 such that t \u227a s. This state t has\nheight \u03c4 and, by construction, it satisfies some formula \u03b2 \u2032 that is not satisfied\n37\n\n\fat any smaller height. By Lemma 31, \u03b2 \u2032 has rank larger or equal to \u03c4 , and the\nformula \u03b2 \u2228 \u03b2 \u2032 has rank larger or equal to \u03c4 . Since \u03b2 \u2228 \u03b2 \u2032 \u2264 \u03b2, the minimality\nof \u03b2 implies that \u03b2 \u2264 \u03b2 \u2228 \u03b2 \u2032 . In other terms, \u03b2 \u2228 \u03b2 \u2032 \u223c \u03b2. But the state t, in W ,\nsatisfies \u03b2 \u2032 and is minimal among states satisfying \u03b2 \u2228 \u03b2 \u2032 . Therefore t satisfies\n\u03b2. A contradiction.\nLemma 32 shows that, given a well-founded preferential relation (resp. a\nfinite knowledge base), and a well-founded preferential model W for it (resp. for\nits preferential closure), one may build a ranked model for its rational closure\nby ranking the states of W by their depth.\n\n5.8\n\nComputing rational closure\n\nWe shall now provide an algorithm for deciding whether an assertion is in the\nrational closure of a finite knowledge base. The notation E(C) has been defined\nfollowing Definition 10. Lemma 7 and Theorem 7 show that, given a finite\nknowledge base K and an assertion \u03b1 \u223c \u03b2 the following algorithm is adequate.\nC = K;\nwhile \u03b1 is exceptional for C and E(C) 6= C, C := E(C);\nif \u03b1 \u2227 \u00ac\u03b2 is exceptional for C then answer yes else answer no.\nThe only thing left for us to implement is checking whether a formula is\nexceptional for a given finite knowledge base. The next lemma shows this is\neasily done.\nDefinition 23 Let A be the conditional assertion \u03b1 \u223c \u03b2. The material counterpart of A, denoted by \u00c3, is the formula \u03b1 \u2192 \u03b2, where \u2192, as usual, denotes\nmaterial implication. If K is a set of assertions, its material counterpart K\u0303 is\nthe set of material counterparts of K.\nLemma 33 Let K be a conditional knowledge base and \u03b1 a formula. Then\nK\u0303 |= \u03b1 iff K preferentially entails true \u223c \u03b1.\nProof : The if part follows from the fact that any world satisfying K\u0303 and\nnot \u03b1 provides a one state preferential model satisfying K and not satisfying\ntrue \u223c \u03b1. For the only if part suppose K\u0303 |= \u03b1. By compactness, there is a\nfinite subset of K\u0303 that entails \u03b1. By rules S, And and Right Weakening we\nconclude that K preferentially entails true \u223c \u03b1.\nCorollary 6 Let K be a conditional knowledge base and \u03b1 a formula. The\nformula \u03b1 is exceptional for K iff K\u0303 |= \u00ac\u03b1.\n\n38\n\n\fWe see that, if K contains n assertions, in the previous algorithm, we may go\nover the while loop at most O(n) times. Each time we shall have to consider\nat most n + 1 formulas and decide whether they are exceptional or not. The\nwhole algorithm needs at most O(n2 ) such decisions. In the most general case\nall such decisions are instances of the satisfiability problem for propositional\ncalculus, therefore solvable in non-deterministic polynomial time (in the size\nof the knowledge base K times the size of the formulas involved). Therefore,\neven in the most general case, the problem is not much more complex than the\nsatisfiability problem for propositional calculus. These results may be improved\nif we restrict ourselves to assertions of a restricted type. For example, if the\nassertions of K are of the Horn type (we mean their material counterpart is a\nHorn formula), and the assertion \u03b1 \u223c \u03b2 is of the same type, then, since each decision may be taken in polynomial deterministic time, the whole algorithm runs\nin deterministic polynomial time. The complexity discussion above is mainly\nof theoretical interest. The important practical question is: given a fixed large\nknowledge base, what information, of reasonable size, should be precomputed\nto allow efficient answers to queries of the type: is an A in the rational closure?\nThe pre-computation of the different Cn sub-bases would already reduce the\nexponent of n in the complexity of the algorithm by one.\nJ. Dix noticed that the algorithm just presented for computing the rational\nclosure of a finite knowledge base may be used to compute the preferential\nclosure of such a knowledge base, since, by Corollary 3 and Lemmas 7 and 30,\nthe assertion \u03b1 \u223c \u03b2 is in Kp iff the assertion \u03b1 \u223c false is in the rational closure\nof the knowledge base K \u222a {\u03b1 \u223c \u00ac\u03b2}.\n\n5.9\n\nA discussion of rational closure\n\nWe have so far shown that rational closure provides a mathematically elegant\nand effective answer to the question of the title that satisfies Thesis 1. It is now\ntime to evaluate whether it provides an answer that matches our intuitions.\nWe shall first present two now classical knowledge bases, describe their rational\nclosure and examine whether they fit our intuitions. Then, we shall discuss the\nway rational closure treats inheritance of generic properties to abnormal individuals. Finally, we shall try to address the question of whether our formalism\nis suitable to describe domain knowledge.\nExample 2 (Nixon diamond) Let our knowledge base consist of the following two assertions.\n1. republican \u223c \u00acpacifist\n2. quaker \u223c pacifist\nIt is easy to see that none of the assertions of the base is exceptional, but that the\nformula republican\u2227quaker is exceptional. From this we deduce that neither the\n\n39\n\n\fassertion republican\u2227quaker \u223c pacifist nor the assertion republican\u2227quaker \u223c \u00acpacifist\nis in the rational closure. This seems the intuitively correct decision in the\npresence of contradictory information. In fact, if we know somebody to be\nboth a Quaker and a Republican, we (i.e., rational closure) shall draw about\nhim only conclusions that are logically implied by our information. Rational\nclosure endorses worker \u2227 republican \u223c \u00acpacifist, meaning that, since we have\nno information on the pacifism of workers, we shall assume that Republican\nworkers behave as Republicans in this respect. We (i.e., rational closure) also\nendorse pacifist \u223c \u00acrepublican, meaning we are ready to use contraposition in\nmany circumstances. We do not have \u00acpacifist \u223c republican, though, and quite\nrightly, since Republicans may well be a small minority among non-pacifists.\nWe have true \u223c \u00ac (republican \u2227 quaker), meaning we think being both a Republican and a Quaker is exceptional. We endorse republican \u223c \u00acquaker and\nquaker \u223c \u00acrepublican, that are also intuitively correct conclusions. If we add\nto our knowledge base the fact that rich people are typically Republicans, we\nshall deduce that rich people are typically not pacifists, meaning we endorse a\nrestricted form of transitivity. We shall also deduce that Quakers are typically\nnot rich, which is perhaps more debatable. We shall not conclude anything\nabout the pacifism of rich Quakers though, since rich Quakers are exceptional.\nWe shall not conclude anything either concerning rich Quakers that are not\nRepublicans, which is more debatable. If we want to conclude that rich nonRepublican Quakers are pacifists, we should add this assertion explicitly to the\nknowledge base. The addition will not interfere with previously discussed assertions.\nExample 3 (Penguin triangle) Let our knowledge base consist of the following three assertions.\n1. penguin \u223c bird\n2. penguin \u223c \u00acfly\n3. bird \u223c fly\nThe first two assertions are exceptional, the last one is not. It follows that we\n(i.e., rational closure) endorse the following assertions: fly \u223c \u00acpenguin (a case of\ncontraposition), \u00acfly \u223c \u00acbird (another case of contraposition), \u00acfly \u223c \u00acpenguin\n(penguins are exceptional, even among non-flying objects), bird \u223c \u00acpenguin\n(penguins are exceptional birds), \u00acbird \u223c \u00acpenguin (penguins are exceptional\nalso among non-birds), bird\u2227penguin \u223c \u00acfly (this is an intuitively correct preemption: we prefer specific information to non-specific information), penguin\u2227black \u223c \u00acfly\n(black penguins don't fly either, since they are normal penguins), bird\u2227green \u223c fly\n(green birds are normal birds).\nThe following assertions are not endorsed: bird \u2227 \u00acfly \u223c penguin (there\ncould be non-flying birds other than penguins), bird \u2227 \u00acfly \u223c \u00acpenguin (seems\nintuitively clear), penguin \u223c fly (obviously).\n40\n\n\fA more general reflexion suggests the following. Theorem 7 shows that, in\nthe rational closure, no information about normal cases may be relevant to\nabnormal cases. It is a very intriguing question whether human beings obey\nthis rule of reasoning or not. A specific example has been discussed by J. Pearl\nin a personal communication. It probably goes back to A. Baker. Suppose we\nknow that most Swedes are blond and tall. If we are going to meet Jon, whom\nwe know to be short and to come from Sweden, should we necessarily expect\nhim to be fair? The answer endorsed by rational closure is not necessarily, since\nshort Swedes are exceptional and we have no specific information about such\ncases. We do not know how people generally handle this and, even if we knew,\nit is not clear that AI systems should react in exactly the same way: people\nare, after all, notoriously bad with statistical information. The answer to the\nquestion how should people behave in this case, if they were smart and had all\nthe relevant information, depends on the sociobiology of the Swedish population\nand is not relevant either. There is very solid ground, though, to claim that, in\nthe framework described here, in which a knowledge base contains only positive\nconditional assertions, the only sensible way to handle this problem is not to\nexpect anything about the color of Jon's hair. The reason is that, if we ever find\nout that most short Swedes are blond (or dark, for that matter) it will be easy\nenough to add this information to our knowledge base. On the contrary, had we\nchosen to infer that Jon is expected to be blond, and had we found out that half\nof the short Swedes only are fair, we would not have been able to correct our\nknowledge base to remove the unwanted inference: adding the fact that most\nshort Swedes are not blond being obviously incorrect.\nSince, by looking at a number of examples, we have gathered some experience on the behavior of rational closure, we would like to propose the following\nstrengthening of Thesis 1.\nThesis 2 The set of assertions entailed by any set of assertions K is a rational\nsuperset of K.\nThesis 2 means that a reasonable system should endorse any assertion contained\nin the rational closure, but it may also endorse some additional assertions, as\nlong as it defines a rational relation. The search for natural constructions satisfying Thesis 2, but providing more inheritance than rational closure is open.\nThe main question that has not been addressed yet is whether conditional\nknowledge bases are suitable to describe domain knowledge. Undoubtedly much\nwork still has to be done before we may answer this question satisfactorily. We\nshall only try to express here why we think the answer may well be positive.\nRepresenting common sense knowledge is far from trivial in any one of the existing formalisms, such as Circumscription or Default Logic. Indeed to represent\nany substantive piece of common sense knowledge in one of those formalisms,\none needs to be an expert at the mechanics of the formalism used, and they differ\ngreatly from one formalism to the next. Deciding on the different abnormality\npredicates in Circumscription and the relations between them, or working out\n41\n\n\fthe default rules in Default Logic so as to ensure the correct precedence of defaults needs the hand of an expert. In the formalism proposed here, conditional\nknowledge bases, the treatment is much simpler since abnormality predicates do\nnot appear explicitely and the default information is described in a much poorer\nlanguage than Default Logic. We rely on the general algorithm for computing\nrational closure (or some other algorithm that will be found suitable) to deal\nin a mechanical, uniform and tractable manner with the interactions between\ndifferent pieces of default information. The fact that our language of assertions\nis much poorer than other formalisms seems to us to be a great asset.\nNevertheless, it is probable that the size of useful conditional knowledge\nbases will be very large. Indeed, in our approach, adding new assertions to the\nknowledge base may solve almost any problem. Two main topics for further\nresearch may then be delineated. The first one is to find practical ways to avoid\nhaving to look at the whole knowledge base before answering any query. The\nset of assertions constituting a knowledge base will have to be structured (offline, once and for all) in such a way that irrelevant assertions do not have to\nbe looked at. The second one is to find lucid and compact descriptions of large\nconditional knowledge bases. This will involve looking seriously into the question: where does the conditional knowledge come from? Different answers may\nbe appropriate in different domains: it may well be that conditional knowledge\nis derived from causal knowledge in ways that are different from those in which\nit is derived from conventions of speech or statistical information.\n\n6\n\nConclusion\n\nWe have presented a mathematically tractable framework for nonmonotonic reasoning that can be proved to possess many pragmatically attractive features. Its\ncomputational complexity compares favorably with that of most well-established\nsystems. In many cases the intuitively correct answer is obtained. In others,\nthe answer given and the way it was obtained provide an interesting point of\nview on the knowledge base. Much more practical experience is needed before\none may assess the pragmatic value of the approach. The task of extending the\nresults presented here to first-order languages is not an easy one. First steps\ntowards this goal are described in [20].\n\n7\n\nAcknowledgements\n\nDavid Makinson suggested importing the thesis CV of conditional logic into the\nstudy of nonmonotonic consequence relations, i.e., suggested to consider what\nis called here rational relations. He conjectured that the corresponding family\nof models was that of ranked models. He was also instrumental in stressing the\nimportance of studying global properties of nonmonotonic inference operations.\n\n42\n\n\fDiscussions with the following people helped us to disprove hasty conjectures,\nputting this work in perspective, and improve the presentation of this paper:\nJohan van Benthem, Michael Freund, Haim Gaifman, Hector Geffner, Matthew\nGinsberg, David Israel, Sarit Kraus, John McCarthy and Judea Pearl. Karl\nSchlechta's suggestions and J\u00fcrgen Dix's remarks on a previous draft have been\nvery useful. Finally, this paper has been fortunate to receive attention and care\nof a rare quality from two anonymous referees. We want to thank them.\n\nReferences\n[1] Ernest W. Adams. The Logic of Conditionals. D. Reidel, Dordrecht, 1975.\n[2] Peter Cheeseman. In defense of an inquiry into computer understanding.\nComputational Intelligence, 4(1):129\u2013142, February 1988.\n[3] Peter Cheeseman. An inquiry into computer understanding. Computational\nIntelligence, 4(1):58\u201366, February 1988.\n[4] R. Chisholm. The contrary-to-fact conditional. Mind, 55:289\u2013307, 1946.\nreprinted in Readings in Philosophical Analysis, edited by H. Feigl and W.\nSellars, Appleton-Century-Crofts, New York, 1949, pp. 482\u2013497.\n[5] Keith L. Clark. Negation as failure. In H. Gallaire and J. Minker, editors,\nLogics and Data Bases, pages 293\u2013322. Plenum Press, 1978.\n[6] N. J. Cutland. Non standard measure theory and its applications. Bulletin\nof the London Mathematical Society, pages 529\u2013589, 1983.\n[7] James P. Delgrande. A first-order logic for prototypical properties. Artificial Intelligence, 33:105\u2013130, 1987.\n[8] James P. Delgrande. An approach to default reasoning based on a firstorder conditional logic: Revised report. Artificial Intelligence, 36:63\u201390,\nAugust 1988.\n[9] Jon Doyle and Michael P. Wellman. Impediments to universal preferencebased default theories. Artificial Intelligence, 49(1\u20133):97\u2013128, May 1991.\n[10] Michael Freund. A semantic characterization of disjunctive relations. In\nPhilippe Jorrand and J. Kelemen, editors, Proceedings of FAIR'91, Lecture\nNotes in Artificial Intelligence Vol. 535, pages 72\u201383, Smolenice, Czechoslovakia, September 1991. Springer Verlag.\n[11] Michael Freund, Daniel Lehmann, and Paul Morris. Rationality, transitivity and contraposition. Artificial Intelligence, 1991? in print.\n\n43\n\n\f[12] Matthew L. Ginsberg. Counterfactuals. Artificial Intelligence, 30:35\u201379,\n1986.\n[13] George Gr\u00e4tzer. Lattice Theory. W. H. Freeman, San Francisco, 1971.\n[14] William L. Harper. A sketch of some recent developments in the theory of\nconditionals. In William L. Harper, Robert Stalnaker, and Glenn Pearce,\neditors, Ifs: Conditionals, Belief, Decision, Chance and Time, volume 15 of\nThe University of Western Ontario Series in Philosophy of Science, chapter\nIntroduction, pages 3\u201338. D. Reidel, Dordrecht, Boston, London, 1981.\n[15] William L. Harper, Robert Stalnaker, and Glenn Pearce, editors. Ifs: Conditionals, Belief, Decision, Chance and Time, volume 15 of The University\nof Western Ontario Series in Philosophy of Science. D. Reidel, Dordrecht,\nBoston, London, 1981.\n[16] H. J. Keisler. Foundations of Infinitesimal Calculus.\nber&Schmidt Inc., Boston, 1976.\n\nPrindle, We-\n\n[17] Sarit Kraus, Daniel Lehmann, and Menachem Magidor. Nonmonotonic\nreasoning, preferential models and cumulative logics. Artificial Intelligence,\n44(1\u20132):167\u2013207, July 1990.\n[18] Daniel Lehmann. What does a conditional knowledge base entail? In Ron\nBrachman and Hector Levesque, editors, Proceedings of the First International Conference on Principles of Knowledge Representation and Reasoning, Toronto, Canada, May 1989. Morgan Kaufmann.\n[19] Daniel Lehmann and Menachem Magidor. Rational logics and their models: a study in cumulative logic. Technical Report TR 88-16, Leibniz Center for Computer Science, Dept. of Computer Science, Hebrew University,\nJerusalem, November 1988.\n[20] Daniel Lehmann and Menachem Magidor. Preferential logics: the predicate\ncalculus case. In Proceedings of the Third Conference on Theoretical Aspects\nof Reasoning About Knowledge, pages 57\u201372, Monterey, California, March\n1990. Morgan Kaufmann.\n[21] David Makinson. General theory of cumulative inference. In M. Reinfrank,\nJ. de Kleer, M. L. Ginsberg, and E. Sandewall, editors, Proceedings of the\nSecond International Workshop on Non-Monotonic Reasoning, pages 1\u201318,\nGrassau, Germany, June 1988. Springer Verlag. Volume 346, Lecture Notes\nin Artificial Intelligence.\n[22] John McCarthy. Circumscription, a form of non monotonic reasoning. Artificial Intelligence, 13:27\u201339, 1980.\n\n44\n\n\f[23] Drew McDermott and Jon Doyle. Non-monotonic logic I. Artificial Intelligence, 25:41\u201372, 1980.\n[24] Robert C. Moore. Semantical considerations on nonmonotonic logic. Artificial Intelligence, 25:75\u201394, 1985.\n[25] Donald Nute. Conditional logic. In Dov M. Gabbay and Franz Guenthner,\neditors, Handbook of Philosophical Logic, chapter Chapter II.8, pages 387\u2013\n439. D. Reidel, Dordrecht, 1984.\n[26] Judea Pearl. Probabilistic Reasoning in Intelligent Systems: Networks of\nPlausible Inference. Morgan Kaufmann, P.O. Box 50490, Palo Alto, CA\n94303, 1988.\n[27] Judea Pearl. System Z: a natural ordering of defaults with tractable applications to nonmonotonic reasoning. In Proceedings of the Third Conference on Theoretical Aspects of Reasoning About Knowledge, pages 121\u2013135,\nMonterey, California, March 1990. Morgan Kaufmann.\n[28] Frank Plumpton Ramsey. General propositions and causality (1925). In\nD. H. Mellor, editor, Foundations: Essays in Philosophy, Logic, Mathematics and Economics, pages 237\u2013257. Routledge and K. Paul, London,\n1978.\n[29] Raymond Reiter. A logic for default reasoning. Artificial Intelligence,\n13:81\u2013132, 1980.\n[30] Raymond Reiter. Nonmonotonic Reasoning, volume 2 of Annual Reviews\nin Computer Science, pages 147\u2013186. Annual Reviews Inc., 1987.\n[31] Abraham Robinson. Non-standard Analysis. North-Holland, Amsterdam,\n1966.\n[32] Ken Satoh. A probabilistic interpretation for lazy nonmonotonic reasoning.\nTechnical report, Institute for New Generation Computer Technology, 1-428 Mita, Minato-ku, Tokyo 108, Japan, December 1989.\n[33] Yoav Shoham. A semantical approach to nonmonotonic logics. In Proc.\nLogics in Computer Science, pages 275\u2013279, Ithaca, N.Y., 1987.\n[34] Robert C. Stalnaker and Richmond H. Thomason. A semantic analysis of\nconditional logic. Theoria, 36:23\u201342, 1970.\n[35] Alfred Tarski. Logic, Semantics, Metamathematics. Papers from 1923\u2013\n1938. Clarendon Press, Oxford, 1956.\n[36] Moshe Y. Vardi, editor. Proceedings of the Second Conference on Theoretical Aspects of Reasoning About Knowledge, Monterey, California, March\n1988. Morgan Kaufmann.\n45\n\n\fA\n\nLemmas needed to prove Theorem 5\n\nLet us suppose that some rational consequence relation \u223c is given. The notion\nof a consistent formula has been presented in Definition 9. Let S denote the set\nof all consistent formulas. Let us now recall Definition 10 of [17].\nDefinition 24 The world m \u2208 U is a normal world for \u03b1 iff \u2200\u03b2 \u2208 L such that\n\u03b1 \u223c \u03b2, m |= \u03b2.\nThe following is an easy corollary of Lemma 8 of [17].\nLemma 34 A formula is consistent iff there is a normal world for it.\nWe shall now define a pre-order relation on the set S.\nDefinition 25 Where \u03b1, \u03b2 \u2208 S, we shall say that \u03b1 is not more exceptional\nthan \u03b2 and write \u03b1R\u03b2 iff \u03b1 \u2228 \u03b2 6\u223c \u00ac\u03b1.\nLemma 35 The relation R is transitive.\nProof : Straightforward from Lemma 17. The fact that the relation R was\nrestricted to the set S is not used here and R would have been transitive also\non the whole language L.\nLemma 36 Let \u03b1, \u03b2 \u2208 S. Either \u03b1R\u03b2 or \u03b2R\u03b1 (or both). In particular R is\nreflexive.\nProof : The proof proceeds by contradiction. Suppose we have \u03b1 6R\u03b2 and \u03b2 6R\u03b1.\nThen we have \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1 and \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b2. By And and Reflexivity we\nhave \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1 \u2227 \u00ac\u03b2 \u2227 (\u03b1 \u2228 \u03b2), and therefore \u03b1 \u2228 \u03b2 \u223c false and, by Rule 14,\n(\u03b1 \u2228 \u03b2) \u2227 \u03b2 \u223c false. Therefore \u03b2 \u223c false, contradicting \u03b2 \u2208 S. The fact that\nR was restricted to S is crucial here.\nThe following will be useful in the sequel.\nLemma 37 If \u03b1R\u03b2, any normal world for \u03b1 that satisfies \u03b2 is normal for \u03b2.\n\n46\n\n\fProof : Suppose \u03b1R\u03b2, m is normal for \u03b1 and satisfies \u03b2. Let \u03b3 be such\nthat \u03b2 \u223c \u03b3. We must show that m |= \u03b3. Since m is normal for \u03b1 and satisfies \u03b2, it is enough to show that \u03b1 \u223c \u03b2 \u2192 \u03b3. But, \u03b2 \u223c \u03b3 implies, by Left\nLogical Equivalence, (\u03b1 \u2228 \u03b2) \u2227 \u03b2 \u223c \u03b3. By the rule S of [17], one then obtains \u03b1 \u2228 \u03b2 \u223c \u03b2 \u2192 \u03b3. But, by definition of R, \u03b1 \u2228 \u03b2 6\u223c \u00ac\u03b1 and, by Rational\nMonotonicity one deduces (\u03b1 \u2228 \u03b2) \u2227 \u03b1 \u223c \u03b2 \u2192 \u03b3.\nDefinition 26 Let \u03b1, \u03b2 \u2208 S. We shall say that \u03b1 is as exceptional as \u03b2 and\nwrite \u03b1 \u223c \u03b2 iff \u03b1R\u03b2 and \u03b2R\u03b1.\nSince R is reflexive and transitive, the relation \u223c is an equivalence relation. The\nequivalence class of a formula \u03b1 will be denoted by \u03b1 and E will denote the set\nof equivalence classes of formulas of S under \u223c. We shall write \u03b1 \u2264 \u03b2 iff \u03b1R\u03b2\nand we shall write \u03b1 < \u03b2 iff \u03b1 \u2264 \u03b2 and \u03b1 6\u223c \u03b2. This notation should cause no\nconfusion with a similar notation used with a different meaning, in the context\nof preferential relations, in [17] and in Section 2.4. By Lemmas 35 and 36, the\nrelation < is a strict total order on the set E.\nLemma 38 Let \u03b1, \u03b2 be consistent formulas. If \u03b2 < \u03b1 then \u03b2 \u223c \u00ac\u03b1.\nProof : The assumption implies that \u03b1 6R\u03b2, i.e., \u03b1 \u2228 \u03b2 \u223c \u00ac\u03b1. Rule (15) implies\nthe conclusion.\nLemma 39 Let \u03b1, \u03b2 be consistent formulas. If there is a normal world for \u03b1\nthat satisfies \u03b2, then \u03b2 \u2264 \u03b1.\nProof : If there is a normal world for \u03b1 that satisfies \u03b2, then we conclude by\nLemma 38 that \u03b1 6\u223c \u00ac\u03b2.\nLet W be the ranked model hV, l, \u227ai, where V \u2286 U \u00d7 S is the set of all pairs\n< m, \u03b1 > such that m is a normal world for \u03b1, l(< m, \u03b1 >) is defined to be m\nand \u227a is defined as < m, \u03b1 >\u227a< n, \u03b2 > iff \u03b1 < \u03b2. To show that W is a ranked\nmodel, we must prove that it satisfies the smoothness condition.\nLemma 40 In W , the state < m, \u03b1 > is minimal in \u03b2b iff m |= \u03b2 and \u03b2 = \u03b1\nProof : First notice that < m, \u03b1 >\u2208 \u03b2b iff m |= \u03b2. For the only if part, suppose\nb The world m is normal for \u03b1 and satisfies \u03b2. By\nthat < m, \u03b1 > is minimal in \u03b2.\nLemma 39 we conclude that \u03b2 \u2264 \u03b1. But, since \u03b2 is consistent, by Lemma 34\nthere is a normal world n for \u03b2. The pair < n, \u03b2 > is an element of V that\nb < n, \u03b2 >6\u227a< m, \u03b1 >, i.e.,\nsatisfies \u03b2 and, by the minimality of < m, \u03b1 > in \u03b2,\n\u03b2 6< \u03b1, i.e., \u03b1 \u2264 \u03b2. We conclude \u03b2 = \u03b1. For the if part, suppose that m is a\nnormal world for \u03b1 that satisfies \u03b2 and that \u03b2 = \u03b1. If n is normal for \u03b3 and\n< n, \u03b3 >\u227a< m, \u03b1 > then \u03b3 < \u03b1 and therefore \u03b3 < \u03b2. By Lemma 38 \u03b3 \u223c \u00ac\u03b2\nand n, which is normal for \u03b3, cannot satisfy \u03b2. The state < m, \u03b1 > is then\nb\nminimal in \u03b2.\nThe following is an immediate corollary of Lemma 40.\n47\n\n\fCorollary 7 If m is a normal world for \u03b1 the pair < m, \u03b1 > is a state of V\nand is minimal in \u03b1\nb.\n\nProof : Suppose m is normal for \u03b1. First, since there is a normal world for \u03b1,\n\u03b1 \u2208 S and the pair < m, \u03b1 > is in V . Since m is normal for \u03b1 it satisfies \u03b1.\nWe may now prove that the model W satisfies the smoothness property and\ndefines the consequence relation \u223c .\nLemma 41 Let \u03b1 be a consistent formula. The set \u03b1\nb \u2286 V is smooth.\n\nProof : Suppose < m, \u03b2 >\u2208 \u03b1\nb. Then, m is a normal world for \u03b2 that satisfies \u03b1\nand, by Lemma 39, \u03b1 \u2264 \u03b2. If \u03b1 = \u03b2, then, by Lemma 40, < m, \u03b2 > is minimal\nin \u03b1\nb. Otherwise, \u03b1 < \u03b2. In this case, let n be any world normal for \u03b1 (there\nis such a world since \u03b1 is consistent). The pair < n, \u03b1 > is minimal in \u03b1\nb by\nLemma 40 and < n, \u03b1 >\u227a< m, \u03b2 >.\nb then m is normal for \u03b2.\nLemma 42 If < m, \u03b1 > is minimal in \u03b2,\nb By Lemma 40 \u03b1 = \u03b2. Therefore\nProof : Suppose < m, \u03b1 > is minimal in \u03b2.\n\u03b1R\u03b2. But m is normal for \u03b1 and satisfies \u03b2, and Lemma 37 implies that m is\nnormal for \u03b2.\n\nB\nB.1\n\nNon-standard probabilistic semantics\nIntroduction\n\nWe shall describe now, in Definition 33 another family of probabilistic models, they provide much more direct semantics for nonmonotonic reasoning than\nAdams', at the price of using the language of non-standard (in the sense of\nA. Robinson) probability theory. The purpose of this section is to provide additional evidence in support of Thesis 1. We shall show that rational relations\nare exactly those that may be defined by non-standard probabilistic models. In\nother terms, if, given a probability distribution, we decide to accept the assertion \u03b1 \u223c \u03b2 iff the conditional probability of \u03b2 given \u03b1 is very close to one, then\nthe consequence relation we define is rational. On the other hand, any rational\nrelation may be defined, in such a way, by some probability distribution. The\nresults presented in the appendix are not used in the body of the paper. A different representation theorem for rational relations, also based on Theorem 5,\nin terms of one-parameter families of standard probabilistic models has been\nproved recently by K. Satoh [32]. Results relating the semantics of conditionals and non-Archimedean probabilities seem to have been obtained by R. Giles\naround 1980.\nThere is a school of thought in Artificial Intelligence, represented in particular by [3, 2], that denies the validity of the logical approach to modeling\n48\n\n\fcommon-sense reasoning. The alternative suggested is the Bayesian probabilistic approach. Namely, the only way in which we should make sensible inferences\nfrom our knowledge \u03b1 is by estimating the conditional probability of the required\nconclusion \u03b2 given our knowledge \u03b1, and then adopting \u03b2 if we are satisfied that\nthis conditional probability is close enough to 1. We believe that this approach\nmay run into considerable practical difficulties, the choice being between keeping an explicit data base of these many conditional probabilities or estimating\nthem from a small sample. The chief source of difficulty here is that knowing\nthe probability of \u03b1 and \u03b2 tells you very little about the probability of their\nintersection.\nBut we shall not argue the matter in detail here. The main purpose of this\nsection is to show that rational knowledge bases may be considered to come\nfrom such a probabilistic model, if we let the cut-off point of how close the\nconditional probability of \u03b2 given \u03b1 has to be before we are ready to adopt \u03b2\nas a sensible consequence of \u03b1, approach 1 as a limit. Namely, \u03b2 is a sensible\nconsequence of \u03b1, iff the conditional probability is infinitesimally close to 1. In\norder to have an interesting theory, there must be probabilities that are not\nstandard real numbers, but belong to a richer system of numbers, containing\nsome infinitesimally small numbers.\nWe shall show that this approach allows one to keep a probabilistic intuition\nwhile thinking about common-sense reasoning, namely think about \u03b1 \u223c \u03b2 as\nmeaning that the conditional probability of \u03b2 given \u03b1 is large, and still defines a\nwell-behaved consequence relation that is not necessarily monotonic. Note that\nif one considers a standard probabilistic model and accepts \u03b1 \u223c \u03b2 as satisfied\nby the model iff the conditional probability P r(\u03b1/\u03b2) > 1 \u2212 \u01eb, for some choice\nof a positive \u01eb one obtains a consequence relation that is not well-behaved. For\ninstance, one may have \u03b1 \u223c \u03b2 and \u03b1 \u223c \u03b3 satisfied by the model, while \u03b1 \u223c \u03b2 \u2227\u03b3\nis not satisfied. If, on the other one hand, one chooses \u01eb to be 0, one obtains a\nwell-behaved consequence relation, but this relation is always monotonic, and\nthe entailment defined is classical entailment (read \u223c as material implication).\nJ. McCarthy told us he suggested considering non-standard probabilistic models\nlong ago, but, as far as we know, this suggestion has not been systematically\npursued.\nThe structure of this section is as follows: first we shall, briefly, survey the\nbasic notions of non-standard analysis. We shall also introduce non-standard\nprobability spaces. Then we shall introduce non-standard probabilistic models\nfor non-monotonic reasoning, define the consequence relation given by such a\nmodel and prove that any consequence relation given by a non-standard probability model is rational. Lastly we shall show that the axioms are complete for\nthis interpretation, i.e., any rational consequence relation can be represented\nas the consequence relation given by some non-standard probability model, at\nleast in the case the language L is countable. If L is not countable, an easy\ncounter-example shows the result does not hold, but we shall not elaborate in\nthis paper.\n49\n\n\fB.2\n\nNon-Standard Analysis\n\nNon-standard analysis was invented by Abraham Robinson in order to give a\nrigorous development of analysis in which limiting processes are replaced by\nbehaviour at the infinitesimally small, e.g., the derivative becomes a quotient\nof the change in the function divided by the change in the argument, when the\nargument is infinitesimally increased. In this section we shall give a very brief\nintroduction to the basic ideas. The reader interested in a full treatment can\nconsult A. Robinson's [31] or Keisler's [16] books on the topic. More advanced\ntopics related to non-standard probability theory are surveyed in [6].\nThe basic idea of non-standard analysis is to extend the real numbers to a\nlarger ordered field while preserving many of the basic properties of the reals.\nTherefore, we consider a structure of the form\nR\u2217 = hR\u2217 , +\u2217 , \u00d7\u2217 , <\u2217 , 0, 1i\nsuch that R\u2217 is an elementary extension of the standard real numbers, namely\nR \u2282 R\u2217 , the operations and the order relation of R\u2217 extend those of R and for\nevery first order formula \u03a6\nR\u2217 |= \u03a6(x1 , . . . , xn ) iff R |= \u03a6(x1 , . . . , xn )\nfor x1 , . . . , xn \u2208 R. Since we would like to consider not only properties of the\nreal numbers, but real valued functions, functions from real valued functions\ninto reals, and so on, we shall consider a richer structure: the superstructure of\nthe real numbers.\nS\u221e\nDefinition 27 The superstructure of the set X is V\u221e (X) = n=0 Vn where Vn\nare defined by induction:\n\u2022 V0 = X\n\u2022 Vn+1 = P(Vn ) \u222a Vn where P(Y ) is the power set of Y.\nNote that the superstructure of X contains all the relations on X, all n-valued\nfunctions from X into X, etc. In a non-standard model of the real numbers\nwe would like to have a non-standard counterpart to any standard member of\nthe superstructure of the real numbers. Note that the set theoretical relation\n\u2208 makes sense in the superstructure of X. Recall that a formula of the first\norder language having only \u2208 as a non logical constant is called bounded if is\nconstructed by the usual connectives and bounded quantifiers, namely (\u2200x \u2208 y)\nand (\u2203x \u2208 y) meaning respectively: \u2200x if x \u2208 y then . . . and \u2203x x \u2208 y \u2227 . . ..\nDefinition 28 A non-standard model of analysis is an ordered field R\u2217 that is a\nproper extension of the ordered field of the reals, together with a map \u2217 from the\nsuperstructure of R into the superstructure of R\u2217 , such that for every bounded\nformula \u03a6(x1 . . . xn ):\nV\u221e (R) |= \u03a6(a1 . . . an ) iff V\u221e (R\u2217 ) |= \u03a6(a\u22171 . . . a\u2217n ) (Leibniz Principle)\n50\n\n\fand such that for x \u2208 R x\u2217 = x (we assume that\noperations of R into those of R\u2217 ).\n\n\u2217\n\ntransforms the standard\n\nThe Leibniz principle guarantees that the non-standard counterpart of any standard notion (namely its \u2217 ) preserves many of the properties of the standard\nobject. In particular it is an object of the same kind: for example if A is a set\nof functions from R to R, then A\u2217 is a set of functions from R\u2217 into R\u2217 . As\nanother example consider the absolute value as a function from R to R. In R\nit has the property\n(\u2200x \u2208 R)(| x |\u2265 0 \u2227 (| x |= 0 \u2194 x = 0))\nThen by the Leibniz principle\n(\u2200x \u2208 R\u2217 ) (| x |\u2217 \u2265\u2217 0 \u2227 (| x |\u2217 = 0 \u2194 x = 0))\nIn fact since the \u2217 versions of the standard arithmetic operations and relations\n(like \u2264, \u2265, >, <) are so similar to the standard ones (they extend them) we shall\nsimplify the notation by dropping the \u2217 , letting the context determine whether\nwe mean the standard operation on R, or its extension to R\u2217 . The next theorem\nshows that this is not a formal game:\nTheorem 8 (Robinson) There exists a non-standard model for analysis.\nThe proof is an application of the compactness theorem. The extension of\nR, R\u2217 , is not unique but nothing in the following arguments depends on the\nparticular choice of the non-standard extension of R. So fix one such extension\nR\u2217 .\nDefinition 29\n1. x \u2208 R\u2217 , x 6= 0, is called finite if | x |< y for some y \u2208 R,\nor, equivalently, if | x |< n for some natural number n.\n2. x \u2208 R\u2217 is called infinitesimal if for all \u01eb in R, \u01eb > 0, | x |< \u01eb. Following\nour definition 0 is infinitesimal.\n3. x \u2208 V\u221e (R\u2217 ) is called internal if x \u2208 y \u2217 for some y \u2208 V\u221e (R). The set of\n\u2217\ninternal objects is denoted by V\u221e\n.\n4. x \u2208 V\u221e (R\u2217 ) is standard if x = y \u2217 for some y \u2208 V\u221e (R).\nIt follows easily, from the fact that R\u2217 is a proper extension of R, that there\nare infinitesimal, as well as infinite, members of R\u2217 . In fact x is infinitesimal\niff 1/x is infinite. If N is the set of natural numbers, one can show that N is\na proper subset of N\u2217 and every member of N\u2217 \u2212 N is called a non-standard\nnatural number.\nLemma 43\n1. The sum, product and difference of two infinitesimals is infinitesimal.\n51\n\n\f2. The product of an infinitesimal and a finite member of R\u2217 is infinitesimal.\nTheorem 9 (Robinson's Overspill Principle) Let hAn | n \u2208 Ni be a sequence of members of Vk (R) forTsome k \u2208 N. Assume also that, for all n \u2208 N,\nAn 6= \u2205 and An+1 \u2286 An . Then n\u2208N A\u2217n is not empty.\nSketch of proof : Note that a sequence of elements of Vk (R) can be considered\nto be a function from N into Vk (R), and therefore it is a member of V\u221e (R).\nHence hAn | n \u2208 Ni\u2217 makes sense and it is a function from N\u2217 into Vk (R)\u2217 . Its\nvalue at h \u2208 N\u2217 will be denoted by (A)\u2217h . Note that (A)\u2217n = A\u2217n for n \u2208 N. Let\nh \u2208 N\u2217 \u2212 N. One can easily check, using the Leibniz\nprinciple, that (A)\u2217h is not\nT\n\u2217\n\u2217\nempty and that for n \u2208 N (A)h \u2286 An , hence n\u2208N A\u2217n is not empty.\nWe can now define the notion of non-standard probability space, which is\nlike a standard (finitely additive) probability space, except that the values of\nthe probability function are in R\u2217 .\nDefinition 30 An R\u2217 -probability space is a triple hX, F , P ri where X is a\nnon-empty set , F is a Boolean subalgebra of P(X), (namely X \u2208 F , \u2205 \u2208 F ,\nand F is closed under finite unions, intersections and differences) and P r is a\nfunction from F into R\u2217 such that\n1. P r(A) \u2265 0 for A \u2208 F .\n2. P r(X) = 1\n3. P r(A \u222a B) = P r(A) + P r(B) for A, B \u2208 F , A and B disjoint\nNote that many of the notions that are usually associated with probability\nspaces are immediately generalized to R\u2217 -probability space, like independence\nof 'events' (namely sets in F ) and conditional probability: if P r(A) 6= 0 then\nthe conditional probability of B given A, is\nP r(B | A) =\n\nP r(A \u2229 B)\n.\nP r(A)\n\nSee [6] for sophisticated applications of non-standard probability spaces. A\nuseful way of getting R\u2217 -probability spaces is by using hyperfinite sets, sets\nwhich are considered by R\u2217 to be finite.\n\u2217\nDefinition 31 An internal object A \u2208 V\u221e\nis called hyperfinite iff there exists\n\u2217\n\u2217\na function f \u2208 V\u221e and h \u2208 N such that f is a 1-1 mapping of h onto A. Note\nthat we follow the usual set theoretical convention by which a natural number\nis identified with all smaller natural numbers. Of course here we apply this\nconvention also to non-standard natural numbers.\n\n52\n\n\fBy applying the Leibniz principle we can show that if A is hyperfinite and B\nis an internal subset of A, then B is hyperfinite. Given an R\u2217 -valued function\nf which is internal, and A an hyperfinite subset ofPthe domainPof f, we can\n\u2217\n\u2217\nnaturally define the 'sum' of the values of f on A, x\u2208A f (x).\nis defined\n\u2217\nby taking the Pof the standard operation of taking the sum of a finite set of\n\u2217\nreal numbers.\nshares many of the properties of its standard counterpart,\nfor example\nP\u2217\nP\u2217\nP\u2217\nx\u2208A\u222aB f (x) =\nx\u2208A f (x) +\nx\u2208B f (x)\nfor A, B hyperfinite and disjoint. The next definition generalizes the notion of\na finite probability space.\n\u2217\nDefinition 32 (Hyperfinite Probability Space) Let A \u2208 V\u221e\nbe an hyper\u2217\nfinite set, let f be an internal R -valued function on A, which is not constantly\nzero and such that for x \u2208 A f (x) \u2265 0. Then the R\u2217 -probability space generated by A and f (denoted by P R\u2217 (A, f ) ) is hA, F , P ri where F is the collection\nof all internal subsets of A, and Pr is given by\nP\u2217\nf (x)\nP r(B) = P\u2217x\u2208B\nx\u2208A f (x)\n\nOne can verify that under the conditions of Definition 32, P R\u2217 (A, f ) is a R\u2217 probability space.\n\nB.3\n\nNon-standard Probabilistic Models and Their Consequence Relations\n\nAn R\u2217 probabilistic model is an R\u2217 -probability measure on some subset M of\nU. Of course, we assume that for every formula of our language, \u03b1, the set \u03b1\u0302 is\nmeasurable, namely it is in F . The probability measure induces a non-standard\nprobability assignment to the formulas of the language by P r(\u03b1) = P r(\u03b1\u0302). The\nR\u2217 probabilistic model M is said to be neat if for every formula, \u03b1, if P r(\u03b1) = 0\nthen \u03b1 is satisfied in no world of M.\nDefinition 33\n1. Let M be an R\u2217 probabilistic model. The conditional\nassertion \u03b1 \u223c \u03b2 is valid in M, M |= \u03b1 \u223c \u03b2, if either P r(\u03b1) = 0 or\nthe conditional probability of \u03b2 given \u03b1 is infinitesimally close to 1, i.e.,\n1 \u2212 P r(\u03b2 | \u03b1) is infinitesimal. Note that this is equivalent to saying that\nP r(\u03b1) = 0 or P r(\u00ac\u03b2 | \u03b1) is infinitesimal.\n2. The consequence relation defined by M is:\nK(M) = {\u03b1 \u223c \u03b2 | M |= \u03b1 \u223c \u03b2}\nTheorem 10 (Soundness for Non-standard Probabilistic Models) For every R\u2217 probabilistic model M, K(M) is a rational consequence relation.\n\n53\n\n\fProof : Left Logical Equivalence, Right Weakening, and Reflexivity are\nimmediate. And follows from:\nP r(\u00ac(\u03b2 \u2227 \u03b3) | \u03b1) = P r((\u00ac\u03b2 \u2228 \u00ac\u03b3) | \u03b1) \u2264 P r(\u00ac\u03b2 | \u03b1) + P r(\u00ac\u03b3 | \u03b1)\nand from the fact that the sum of two infinitesimals is infinitesimal. Or is\nproved by the following manipulation:\nP r(\u00ac\u03b3 | \u03b1 \u2228 \u03b2) =\nP r(\u00ac\u03b3 \u2227 \u03b1)\nP r(\u03b1 \u2228 \u03b2)\nP r(\u00ac\u03b3 \u2227 \u03b1)\nP r(\u03b1)\n\n+\n+\n\nP r(\u00ac\u03b3 \u2227 (\u03b1 \u2228 \u03b2))\n\u2264\nP r(\u03b1 \u2228 \u03b2)\nP r(\u00ac\u03b3 \u2227 \u03b2)\n\u2264\nP r(\u03b1 \u2228 \u03b2)\nP r(\u00ac\u03b3 \u2227 \u03b2)\n= P r(\u00ac\u03b3 | \u03b1) + P r(\u00ac\u03b3 | \u03b2)\nP r(\u03b2)\n\nand again using the fact that the sum of two infinitesimals is infinitesimal. We\nassumed above that P r(\u03b1) > 0 and P r(\u03b2) > 0. If this fails then the argument is\neasier. We shall prove Rational Monotonicity by contradiction, so we assume\nthat \u03b1 \u223c \u00ac\u03b2 is not in K(M), and that \u03b1 \u223c \u03b3 is in K(M). We shall prove that\n\u03b1 \u2227 \u03b2 \u223c \u03b3 is in K(M). We can assume that P r(\u03b1 \u2227 \u03b2) > 0 (hence P r(\u03b1) > 0)\notherwise the argument is trivial.\nP r(\u00ac\u03b3 | \u03b1 \u2227 \u03b2) =\nP r(\u00ac\u03b3 \u2227 \u03b1 \u2227 \u03b2)\nP r(\u03b1)\nP r(\u00ac\u03b3 \u2227 \u03b1)\nP r(\u03b1)\n\n/\n/\n\nP r(\u00ac\u03b3 | \u03b1) \u00d7\n\nP r(\u00ac\u03b3 \u2227 \u03b1 \u2227 \u03b2)\n=\nP r(\u03b1 \u2227 \u03b2)\nP r(\u03b1 \u2227 \u03b2)\n\u2264\nP r(\u03b1)\nP r(\u03b1 \u2227 \u03b2)\n=\nP r(\u03b1)\n1\nP r(\u03b2 | \u03b1)\n\n(21)\n\nSince \u03b1 \u223c \u00ac\u03b2 is not in K(M) , we get that P r(\u03b2 | \u03b1) is not infinitesimal, hence\n1\n1\nis finite. By Lemma 43 P r(\u00ac\u03b3 \u2227 \u03b1) \u00d7\nis infinitesimal. Hence\nP r(\u03b2 |\u03b1)\nP r(\u03b2 |\u03b1)\nby Equation 21, \u03b1 \u2227 \u03b2 \u223c \u03b3 is in K(M). Cautious Monotonicity now follows\neasily. Suppose \u03b1 \u223c \u03b3 and \u03b1 \u223c \u03b2 are both in K(M). If \u03b1 \u223c \u00ac\u03b2 is not in K(M),\nwe conclude by Rational Monotonicity. If \u03b1 \u223c \u00ac\u03b2 is in K(M), we must have\nP r(\u03b1) = 0, since P r(\u03b2 | \u03b1) and P r(\u00ac\u03b2 | \u03b1) cannot be both infinitesimally close\nto 1. Therefore P r(\u03b1 \u2227 \u03b2) = 0 and we conclude that \u03b1 \u2227 \u03b2 \u223c \u03b3 \u2208 K(M).\n\nB.4\n\nCompleteness for the Non-Standard Probabilistic Interpretation\n\nTheorem 11 Suppose the language L is countable (this assumption cannot be\ndispensed with) and P is a rational consequence relation on L. Let R\u2217 be any\n54\n\n\fnon-standard model of analysis, then there exists an R\u2217 -probabilistic neat model\nM such that K(M) = K.\nProof : Let W = hS, l, \u227ai, with ranking function r, be a countable (i.e., S is\ncountable) ranked model that defines the consequence relation P . The model\nbuilt in the proof of Theorem 5 shows that such models exist. If S is finite, or\neven if each level in W is finite and W is well-founded, one may simply use the\nconstruction described just before Lemma 22, with some arbitrary infinitesimal\n\u01eb. In case the model W is infinitely broad, i.e., has some level containing an\ninfinite number of states, then the construction has to be slightly more sophisticated, but the real difficulty appears when W is not well-founded, and we have\nalready remarked that there are rational relations that have no well-founded\nranked model. Following the proof of Lemma 22 we would like to assign a\n(non-standard) probability distribution to the states of the model in such a way\nthat the relative probabilty of a level to that of a lower level is infinitesimal,\nbut, for every formula which is satified at a given level, we would like to keep\nits relative weight within the level non infinitesimal. To each formula we shall\nassign a positive real number r such that, if the formula is satisfied at level l,\nits relative probability within this level should be at least r. In order that these\nrequirements not be contradictory, the sum of the r's so assigned should be at\nmost 1. Quite arbitrarily, we pick for the i-th formula r = 1/2i+1 . Now we have\nto show that we can find a probability assignment satisfying these requirements.\nWe shall define a set Bn of all probability assignments that are good up to rank\nn. An assignment which is good for every n will satisfy our requirements. So,\nwe would like to intersect the Bn 's. The overspill principle will tell us that this\nintersection is not empty.\nSince S is countable we may assume that S = N. Since every countable\nlinear ordering may be order embedded into the real numbers, we may assume\nwithout loss of generality that the ranking function, r, is into R. Since \u227a is a\npartial ordering of N, \u227a\u2217 is a partial ordering of N\u2217 which is ranked by the\nranking function r\u2217 mapping N\u2217 into R\u2217 .\nFor each formula \u03b1, let A\u03b1 = (\u03b1\u0302)\u2217 . Note that A\u03b1 is a subset of N\u2217 (but\nmust not be a subset of N). We can now associate a world, U h , with each\nh \u2208 N\u2217 , defined by U h |= p iff h \u2208 Ap . It is easily checked that, for standard h\n(i.e., h \u2208 N), one has U h = l(h) and that, for arbitrary h, U h |= \u03b1 iff h \u2208 A\u03b1 .\nOur idea now is to find an h in N\u2217 and an internal function f , from h into R\u2217\nsuch that, if we consider the probability distribution given by the hyperfinite\nprobability space P R\u2217 (h, f ) on the set of worlds {U k | k \u2208 N\u2217 , k < h}, we shall\nget a probabilistic model whose consequence relation is exactly P (recall that\nwe are identifying a member of N\u2217 with the set of smaller members of N\u2217 ).\nFix an enumeration h\u03b1n | n \u2208 Ni of all the formulas of our language. For i \u2208 N\nlet xi be the real number such that the ranking function f maps all the states\nminimal in \u03b1\u0302i to it.\n\n55\n\n\fWe are now going to define a sequence of sets of possible approximations to\nthe object we are looking for, namely the appropriate h \u2208 N\u2217 and the appropriate f . For n \u2208 N, let Bn be the set of all triples of the form (k, \u01eb, f ) that have\nthe following properties:\n1. k \u2265 n,\n2. \u01eb \u2208 R, \u01eb > 0, \u01eb \u2264 1/n,\n3. f is a function from N into R such that for any s \u2208 N, f (s) > 0,\n4. for any x, y \u2208 R such that x < y, if x and y are in the range of the ranking\nfunction r on k, then\nP\nm<k,r(m)=y f (m)\nP\n\u2264 \u01eb,\nm<k,r(m)=x f (m)\n5. for \u03b1i , i < k, if C = \u03b1\u0302i \u2229 {j | r(j) = xi } \u2229 {0, . . . , k \u2212 1} 6= \u2205, then\nP\n\nP\n\nm\u2208C,m<k\n\nf (m)\n\nm<k,r(m)=xi f (m)\n\n\u2265\n\n1\n2i+1\n\nIt easily follows from the definition of the sequence of sets hBn | n \u2208 Ni that\nBn+1 \u2286 Bn for n \u2208 N. One may also verify from item 4 that, if (k, \u01eb, f ) \u2208 Bn\nand if x is in the range of r on k, then:\nP\n\u221e\nX\n\u01eb\nm<k,r(m)>x f (m)\nP\n\u01ebi =\n\u2264\n(22)\n1\u2212\u01eb\nm<k,r(m)=x f (m)\ni=1\nLemma 44 For any n \u2208 N, Bn 6= \u2205.\nProof : The proof is essentially similar to the remarks preceding the proof of\nLemma 22 in Section 4.3. Let, indeed, Wn be the finite ranked model defined by\nh{0, . . . , n \u2212 1}, \u227a, li. We can easily arrange a probability assignment for it such\nthat the ratio of the probability of each rank and and each smaller rank will\nbe at most 1/n. Within the rank we have to satisfy item 5 in the definition of\nBn but we can easily arrange for i < n, that if \u03b1i has a non empty intersection\n1\nwith this rank, then its relativePprobability within this rank is at least 2i+1\n.\n1\nThis may be arranged because i\u2208N 2i+1 = 1. If we extend this probability\nassignment to any function from N into R, we see that (n, n1 , f ) \u2208 Bn .\nOnce we have Lemma 44 we can use Robinson's overspill principle (Theorem\n9) to show that \u2229n\u2208N Bn\u2217 is not empty. So let (h\u0303, \u03b5\u0303, f \u0303) be a member of Bn\u2217 for\nevery n \u2208 N. One can easily verify that h\u0303 is in N\u2217 and that it is a non-standard\nnatural number: indeed for every n \u2208 N, h\u0303 > n since (h\u0303, \u03b5\u0303, f \u0303) \u2208 Bn\u2217 . Similarly \u03b5\u0303\n56\n\n\fis a positive member of R\u2217 such that for every standard natural number n we\nhave \u03b5\u0303 \u2264 n1 , hence \u03b5\u0303 is a positive infinitesimal. Also f \u0303 is a function from N\u2217\ninto the positive members of R\u2217 , satisfying the appropriate transfer of items 5\nand 4 into the context of R\u2217 . In particular, Equation 22 carries over and we\nhave x = r\u2217 (m) for some m \u2208 N\u2217 , m < h\u0303:\nP\u2217\nf \u0303(m)\n\u03b5\u0303\nm<h\u0303,r \u2217 (m)>x\n\u2264\n(23)\nP\u2217\n \u0303\n1 \u2212 \u03b5\u0303\nf (m)\nm<h\u0303,r \u2217 (m)=x\nWe conclude therefore that the left-hand side of Equation 23 is infinitesimal.\nWe claim that the R\u2217 probabilistic model M whose collection of states is h\u0303, i.e.,\n{m | m \u2208 N\u2217 , m < h\u0303}, the world associated with m is U m , and the probability\nmeasure is given by the hyperfinite probability space P R\u2217 (h\u0303, f \u0303) is the model we\nare looking for. Since any f satisfying the requirements can be multiplied by\nany positive member of R\u2217 and still satisfies the requirements, we may assume\nwithout loss of generality that\nP\u2217\nf \u0303(m) = 1\nm\u2208N\u2217 ,m<h\u0303\nNote that M is a neat model since, if we have both m < h\u0303 and U m |= \u03b1, we\nmust also have P r(\u03b1) \u2265 f \u0303(m) > 0.\nClaim 1 K(M) = K\nProof : First note that \u03b1 \u223c false \u2208 K(M) iff \u03b1 \u223c false \u2208 K. If \u03b1 \u223c false \u2208 K,\nthen A\u03b1 = \u2205, hence {m | m \u2208 N\u2217 , U |= \u03b1} = \u2205. Therefore \u03b1 \u223c false \u2208 K(M).\nFor the other direction, if \u03b1 \u223c false 6\u2208 K, then, for some m \u2208 N, Um |= \u03b1. But\nm, being a standard natural number, is less than h\u0303, hence some state in M\nsatisfies \u03b1. By the neatness of M, \u03b1 \u223c false 6\u2208 K(M). By the previous remark,\nwe can now assume that \u03b1 \u223c false 6\u2208 K, hence \u03b1\u0302 6= \u2205. Let m \u2208 N be minimal\nin \u03b1\u0302 and let x = r(m). Let i \u2208 N be such that \u03b1 = \u03b1i\u22121 . In particular we have:\n(\u2200y \u2208 R)(y < x \u21d2 r\u22121 (y) \u2229 \u03b1\u0302) = \u2205.\nUsing the Leibniz principle we get:\n{m | m \u2208 N\u2217 , m < h\u0303, U m |= \u03b1} \u2286 {m | m \u2208 N\u2217 , r\u2217 (m) \u2265 x}.\nLet us define now\nP\u2217\nf \u0303(m)\n\u03b7=\nm\u2208h\u0303,r \u2217 (m)>x\nand\n\u03c1=\n\nP\u2217\n\nm\u2208h\u0303,r \u2217 (m)=x\n\nf \u0303(m).\n\n57\n\n\fFor every formula \u03b3 define:\nP\n\u03bb(\u03b3) = \u2217\nf \u0303(m)\nm\u2208h\u0303,r \u2217 (m)=x, U m |=\u03b3\nOf course one always has P r(\u03b3) \u2265 \u03bb(\u03b3). Note that by Equation 23, \u03b7/\u03c1 is\ninfinitesimal. Also by item 5 of the definition of the sequence hBn | n \u2208 Ni if\nA\u03b3 \u2229 {m | m \u2208 h\u0303, r\u2217 (m) = x} 6= \u2205 and if \u03b3 = \u03b1j\u22121 , j \u2208 N then\n\u03bb(\u03b3) \u2265 \u03c1 \u00d7\n\n1\n.\n2j\n\nNow, assume \u03b1 \u223c \u03b2 \u2208 K. Hence for every m \u2208 h\u0303, if U |= \u00ac\u03b2 \u2227 \u03b1, we must have\nr\u2217 (m) > x. Therefore P r(\u00ac\u03b2 \u2227 \u03b1) \u2264 \u03b7. Therefore:\nP r(\u00ac\u03b2 | \u03b1) =\n\n\u03b7\nP r(\u00ac\u03b2 \u2227 \u03b1)\n\u03b7\n\u2264\n= 2i \u00d7 .\n1\nP r(\u03b1)\n\u03c1\n\u03c1 \u00d7 2i\n\nTherefore P r(\u00ac\u03b2 | \u03b1) is infinitesimal and by definition \u03b1 \u223c \u03b2 \u2208 K(M). If \u03b1 \u223c \u03b2 6\u2208 K,\nthen some m \u2208 N, r\u2217 (m) = x satisfies U m |= \u00ac\u03b2 \u2227 \u03b1. But this m satisfies m \u2208 h\u0303,\nso it is in our model. Let j \u2208 N be such that \u00ac\u03b2 \u2227 \u03b1 = \u03b1j\u22121 . Since we clearly\nhave: P r(\u03b1) \u2264 \u03c1 + \u03b7, we also have:\nP r(\u00ac\u03b2 | \u03b1) =\n\n1\nP r(\u00ac\u03b2 \u2227 \u03b1)\n1\nj \u00d7 \u03c1\n\u2265 2\n\u2265 j+1\nP r(\u03b1)\n\u03c1+\u03b7\n2\n\nsince obviously \u03c1 \u2265 \u03b7. So P r(\u00ac\u03b2 | \u03b1) is not infinitesimal and \u03b1 \u223c \u03b2 6\u2208 K(M).\n(end of proof of Claim 1)\nWe have already noticed that M is a neat model. Claim 1 shows that it has\nthe desired property. (end of proof of Theorem 11)\n\n58\n\n\f"}