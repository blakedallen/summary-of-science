{"id": "http://arxiv.org/abs/math/0605694v2", "guidislink": true, "updated": "2008-12-31T04:47:34Z", "updated_parsed": [2008, 12, 31, 4, 47, 34, 2, 366, 0], "published": "2006-05-27T01:15:42Z", "published_parsed": [2006, 5, 27, 1, 15, 42, 5, 147, 0], "title": "Differentiable Stacks and Gerbes", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0605536%2Cmath%2F0605212%2Cmath%2F0605301%2Cmath%2F0605079%2Cmath%2F0605326%2Cmath%2F0605579%2Cmath%2F0605026%2Cmath%2F0605498%2Cmath%2F0605650%2Cmath%2F0605451%2Cmath%2F0605575%2Cmath%2F0605552%2Cmath%2F0605749%2Cmath%2F0605589%2Cmath%2F0605429%2Cmath%2F0605120%2Cmath%2F0605010%2Cmath%2F0605194%2Cmath%2F0605480%2Cmath%2F0605334%2Cmath%2F0605585%2Cmath%2F0605096%2Cmath%2F0605438%2Cmath%2F0605594%2Cmath%2F0605042%2Cmath%2F0605694%2Cmath%2F0605490%2Cmath%2F0605356%2Cmath%2F0605314%2Cmath%2F0605761%2Cmath%2F0605121%2Cmath%2F0605108%2Cmath%2F0605762%2Cmath%2F0605555%2Cmath%2F0605041%2Cmath%2F0605236%2Cmath%2F0605023%2Cmath%2F0605152%2Cmath%2F0605273%2Cmath%2F0605787%2Cmath%2F0605349%2Cmath%2F0605743%2Cmath%2F0605573%2Cmath%2F0605099%2Cmath%2F0605629%2Cmath%2F0605396%2Cmath%2F0605775%2Cmath%2F0605580%2Cmath%2F0605430%2Cmath%2F0605370%2Cmath%2F0605668%2Cmath%2F0605412%2Cmath%2F0605608%2Cmath%2F0605089%2Cmath%2F0605435%2Cmath%2F0605002%2Cmath%2F0605080%2Cmath%2F0605055%2Cmath%2F0605450%2Cmath%2F0605711%2Cmath%2F0605574%2Cmath%2F0605576%2Cmath%2F0605330%2Cmath%2F0605298%2Cmath%2F0605514%2Cmath%2F0605050%2Cmath%2F0605670%2Cmath%2F0605477%2Cmath%2F0605071%2Cmath%2F0605474%2Cmath%2F0605291%2Cmath%2F0605266%2Cmath%2F0605767%2Cmath%2F0605176%2Cmath%2F0605745%2Cmath%2F0605165%2Cmath%2F0605561%2Cmath%2F0605255%2Cmath%2F0605143%2Cmath%2F0605605%2Cmath%2F0605285%2Cmath%2F0605777%2Cmath%2F0605485%2Cmath%2F0605517%2Cmath%2F0605069%2Cmath%2F0605590%2Cmath%2F0605462%2Cmath%2F0605681%2Cmath%2F0605174%2Cmath%2F0605619%2Cmath%2F0605237%2Cmath%2F0605636%2Cmath%2F0605227%2Cmath%2F0605377%2Cmath%2F0605316%2Cmath%2F0605358%2Cmath%2F0605786%2Cmath%2F0605398%2Cmath%2F0605242%2Cmath%2F0605467%2Cmath%2F0605543&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Differentiable Stacks and Gerbes"}, "summary": "We introduce differentiable stacks and explain the relationship with Lie\ngroupoids. Then we study $S^1$-bundles and $S^1$-gerbes over differentiable\nstacks. In particular, we establish the relationship between $S^1$-gerbes and\ngroupoid $S^1$-central extensions. We define connections and curvings for\ngroupoid $S^1$-central extensions extending the corresponding notions of\nBrylinski, Hitchin and Murray for\n  $S^1$-gerbes over manifolds. We develop a Chern-Weil theory of characteristic\nclasses in this general setting by presenting a construction of Chern classes\nand Dixmier-Douady classes in terms of analogues of connections and curvatures.\nWe also describe a prequantization result for both $S^1$-bundles and\n$S^1$-gerbes extending the well-known result of Weil and Kostant. In\nparticular, we give an explicit construction of $S^1$-central extensions with\nprescribed curvature-like data.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0605536%2Cmath%2F0605212%2Cmath%2F0605301%2Cmath%2F0605079%2Cmath%2F0605326%2Cmath%2F0605579%2Cmath%2F0605026%2Cmath%2F0605498%2Cmath%2F0605650%2Cmath%2F0605451%2Cmath%2F0605575%2Cmath%2F0605552%2Cmath%2F0605749%2Cmath%2F0605589%2Cmath%2F0605429%2Cmath%2F0605120%2Cmath%2F0605010%2Cmath%2F0605194%2Cmath%2F0605480%2Cmath%2F0605334%2Cmath%2F0605585%2Cmath%2F0605096%2Cmath%2F0605438%2Cmath%2F0605594%2Cmath%2F0605042%2Cmath%2F0605694%2Cmath%2F0605490%2Cmath%2F0605356%2Cmath%2F0605314%2Cmath%2F0605761%2Cmath%2F0605121%2Cmath%2F0605108%2Cmath%2F0605762%2Cmath%2F0605555%2Cmath%2F0605041%2Cmath%2F0605236%2Cmath%2F0605023%2Cmath%2F0605152%2Cmath%2F0605273%2Cmath%2F0605787%2Cmath%2F0605349%2Cmath%2F0605743%2Cmath%2F0605573%2Cmath%2F0605099%2Cmath%2F0605629%2Cmath%2F0605396%2Cmath%2F0605775%2Cmath%2F0605580%2Cmath%2F0605430%2Cmath%2F0605370%2Cmath%2F0605668%2Cmath%2F0605412%2Cmath%2F0605608%2Cmath%2F0605089%2Cmath%2F0605435%2Cmath%2F0605002%2Cmath%2F0605080%2Cmath%2F0605055%2Cmath%2F0605450%2Cmath%2F0605711%2Cmath%2F0605574%2Cmath%2F0605576%2Cmath%2F0605330%2Cmath%2F0605298%2Cmath%2F0605514%2Cmath%2F0605050%2Cmath%2F0605670%2Cmath%2F0605477%2Cmath%2F0605071%2Cmath%2F0605474%2Cmath%2F0605291%2Cmath%2F0605266%2Cmath%2F0605767%2Cmath%2F0605176%2Cmath%2F0605745%2Cmath%2F0605165%2Cmath%2F0605561%2Cmath%2F0605255%2Cmath%2F0605143%2Cmath%2F0605605%2Cmath%2F0605285%2Cmath%2F0605777%2Cmath%2F0605485%2Cmath%2F0605517%2Cmath%2F0605069%2Cmath%2F0605590%2Cmath%2F0605462%2Cmath%2F0605681%2Cmath%2F0605174%2Cmath%2F0605619%2Cmath%2F0605237%2Cmath%2F0605636%2Cmath%2F0605227%2Cmath%2F0605377%2Cmath%2F0605316%2Cmath%2F0605358%2Cmath%2F0605786%2Cmath%2F0605398%2Cmath%2F0605242%2Cmath%2F0605467%2Cmath%2F0605543&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We introduce differentiable stacks and explain the relationship with Lie\ngroupoids. Then we study $S^1$-bundles and $S^1$-gerbes over differentiable\nstacks. In particular, we establish the relationship between $S^1$-gerbes and\ngroupoid $S^1$-central extensions. We define connections and curvings for\ngroupoid $S^1$-central extensions extending the corresponding notions of\nBrylinski, Hitchin and Murray for\n  $S^1$-gerbes over manifolds. We develop a Chern-Weil theory of characteristic\nclasses in this general setting by presenting a construction of Chern classes\nand Dixmier-Douady classes in terms of analogues of connections and curvatures.\nWe also describe a prequantization result for both $S^1$-bundles and\n$S^1$-gerbes extending the well-known result of Weil and Kostant. In\nparticular, we give an explicit construction of $S^1$-central extensions with\nprescribed curvature-like data."}, "authors": ["Kai Behrend", "Ping Xu"], "author_detail": {"name": "Ping Xu"}, "author": "Ping Xu", "arxiv_comment": "48 pages, minor revision, examples added, references added and\n  updated", "links": [{"href": "http://arxiv.org/abs/math/0605694v2", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0605694v2", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.DG", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.DG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math-ph", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.MP", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0605694v2", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0605694v2", "journal_reference": null, "doi": null, "fulltext": "arXiv:math/0605694v2 [math.DG] 31 Dec 2008\n\nDifferentiable Stacks and Gerbes\nKai Behrend\nUniversity of British Columbia\n1984 Mathematics Road\nVancouver, B.C., Canada V6T 1Z2\nbehrend@math.ubc.ca\nPing Xu\u2217\nDepartment of Mathematics\nPennsylvania State University\nUniversity Park, PA 16802\nping@math.psu.edu\n\nAbstract\nWe introduce differentiable stacks and explain the relationship with Lie groupoids. Then\nwe study S 1 -bundles and S 1 -gerbes over differentiable stacks. In particular, we establish the relationship between S 1 -gerbes and groupoid S 1 -central extensions. We define connections and\ncurvings for groupoid S 1 -central extensions extending the corresponding notions of Brylinski, Hitchin and Murray for S 1 -gerbes over manifolds. We develop a Chern-Weil theory of\ncharacteristic classes in this general setting by presenting a construction of Chern classes and\nDixmier-Douady classes in terms of analogues of connections and curvatures. We also describe\na prequantization result for both S 1 -bundles and S 1 -gerbes extending the well-known result\nof Weil and Kostant. In particular, we give an explicit construction of S 1 -central extensions\nwith prescribed curvature-like data.\n\nContents\n1 Introduction\n2 Differentiable Stacks\n2.1 Groupoid fibrations . . . . . . .\n2.2 Stacks . . . . . . . . . . . . . .\n2.3 Differentiable stacks . . . . . .\n2.4 Torsors for Lie groupoids . . .\n2.5 Morita equivalence . . . . . . .\n2.6 Dictionary . . . . . . . . . . . .\nThe 2-category of Lie groupoids\nThe Dictionary Lemmas . . . .\n2.7 Differentiable Spaces . . . . . .\n\u2217 Research\n\n2\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\npartially supported by NSF grants DMS03-06665 and DMS-0605725 & NSA grant 03G-142.\n\n1\n\n.\n.\n.\n.\n.\n.\n.\n.\n.\n\n4\n5\n7\n9\n11\n14\n15\n15\n15\n16\n\n\f3 Homology and cohomology\n3.1 Sheaves over stacks and their cohomology . . . . . . . . . . . . . . . . . . . . . . .\n3.2 Differential forms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n3.3 Groupoid cohomology . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n\n17\n18\n19\n20\n\n4 S 1 -bundles and S 1 -gerbes\n4.1 S 1 -bundles . . . . . . . . . . . . . . . . . .\n4.2 S 1 -gerbes and S 1 -central extensions . . . .\n4.3 Morita equivalence of S 1 -central extensions\n4.4 Dixmier-Douady classes . . . . . . . . . . .\n4.5 Prequantization . . . . . . . . . . . . . . . .\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n22\n22\n25\n27\n29\n32\n\n5 S 1 -central extensions with prescribed pseudo-curvature\n5.1 Geometry of S 1 -central extensions . . . . . . . . . . . . .\n5.2 Sufficient condition . . . . . . . . . . . . . . . . . . . . . .\n5.3 Properties of 3-cocycles . . . . . . . . . . . . . . . . . . .\n5.4 Lie algebroid central extensions . . . . . . . . . . . . . . .\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n.\n.\n.\n.\n\n34\n34\n36\n39\n42\n\n1\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\n.\n.\n.\n.\n.\n\nIntroduction\n\nGrothendieck introduced stacks to give geometric meaning to higher non-commutative cohomology\nclasses. This is also the context in which gerbes first appeared [19]. However most of the work on\nstacks so far remains algebraic, though there is increasing evidence that differentiable stacks will\nfind many useful applications. One example of the notion of stack is that of orbifolds. In algebraic\ngeometry, these correspond to Deligne-Mumford stacks [25]. In differential geometry, orbifolds or\nV -manifolds have been studied for many years using local charts. Recently, it has been realized\nthat viewing orbifolds as a very special kind of Lie groupoids, i.e. \u00e9tale proper groupoids, is quite\nuseful [35].\nThe notion of a groupoid is a generalization of the concepts of spaces and groups. A groupoid\nconsists of a space of objects (units) X0 , and a space of arrows X1 with source and target maps\ns, t : X1 \u2192 X0 . There is a multiplication defined only for composable pairs X2 = {(x, y) |\nt(x) = s(y), for x, y \u2208 X1 } \u2282 X1 \u00d7 X1 . There is also an inverse map. These structures satisfy\nthe usual axioms. Lie groupoids are groupoids where both X0 and X1 are manifolds, s and t are\nsurjective submersions, and all the structure maps are required to be smooth. A Lie groupoid\nX1 \u21c9 X0 is said to be proper if the map s \u00d7 t : X1 \u2192 X0 \u00d7 X0 is proper (in algebraic geometry,\nthis would be called separated or Hausdorff). In the theory of groupoids, spaces and groups are\ntreated on equal footing. Simplifying somewhat, one could say that a groupoid is a mixture of a\nspace and a group; it has space-like and group-like properties that interact in a delicate way. In\na certain sense, groupoids provide a uniform framework for many different geometric objects. For\ninstance, when a Lie group acts on a manifold properly, the corresponding equivariant cohomology\ntheories, including K-theory, can be treated using the transformation groupoid M \u22ca G \u21c9 M . Here\nthe structure maps are s(x, g) = x, t(x, g) = xg, (x, g)(y, h) = (x, gh).\nThere exists a dictionary between differentiable stacks and Lie groupoids. Roughly speaking,\ndifferentiable stacks are Lie groupoids up to Morita equivalence. Any Lie groupoid X1 \u21c9 X0\ndefines a differentiable stack X of X\u2022 -torsors. Two differentiable stacks X and X\u2032 are isomorphic if\nand only if the Lie groupoids X\u2022 and X\u2022\u2032 are Morita equivalent. In a certain sense, Lie groupoids\nare like \"local charts\" on a differentiable stack. Establishing such a dictionary consists of the first\npart of the paper. We note that this viewpoint of connecting stacks with groupoids is somehow\n\n2\n\n\ffolklore (see [15, 34, 39, 40]). However, we feel that it is useful to spell it out in detail in the\ndifferentiable geometry setting, which is of ultimate interest for our purpose.\nOur main goal of this paper is to develop the theory of S 1 -gerbes over differentiable stacks.\nMotivation comes from string theory in which \"gerbes with connections\" appear naturally [13, 16,\n23, 46].\nFor S 1 -gerbes over manifolds, there has been extensive work on this subject pioneered by\nBrylinski [5], Chatterjee [8], Hitchin [21], Murray [32] and many others. Also, there is interesting\nwork on equivariant S 1 -gerbes, e.g., by Brylinski [6], Meinrenken [29], Gawedzki-Neis [17], Stienon\n[41] and others, as well as on gerbes over orbifolds [27]. These endeavors make the foundations of\ngerbes over differentiable stacks a very important subject. An important step is to geometrically\nrealize a class H 2 (X, S 1 ) (or H 3 (X, Z) when X is Hausdorff). Such a geometrical realization is\ncrucial in applications to twisted K-theory [43, 44, 45].\nOur method is to use the dictionary mentioned above, under which we show that S 1 -gerbes are\nin one-to-one correspondence with Morita equivalence classes of groupoid S 1 -central extensions.\nThus it follows from a well-known theorem of Giraud [19] that there is a bijection between H 2 (X, S 1 )\nand Morita equivalence classes of Lie groupoid S 1 -central extensions. We note that there are several\nindependent investigations of similar topics; see [7, 36, 37, 42, 50].\nAn S 1 -central extension of a Lie groupoid X1 \u21c9 X0 is a Lie groupoid R1 \u21c9 X0 with a groupoid\nmorphism \u03c0 : R1 \u2192 X1 such that ker \u03c0 \u223c\n= X0 \u00d7 S 1 lies in the center of R1 . It is easy to see that\n1\n\u03c0 : R1 \u2192 X1 is then naturally an S -principal bundle. A standard example is an S 1 -central\nextension of a \u010cech groupoid: Let`N be a manifold\nand \u03b1 \u2208 H 3 (N, Z), and let {Ui } be a good\n`\ncovering of N . Then the groupoid ij Uij \u21c9 i Ui , where Uij = Ui \u2229 Uj , which is called the \u010cech\ngroupoid, is Morita equivalent to the manifold N . Then`the S 1 -gerbe corresponding\n` to the class \u03b1\n`\ncan be realized as an S 1 -central extension of groupoids ij Uij \u00d7 S 1 \u2192 ij Uij \u21c9 i Ui , where the\n`\nmultiplication on ij Uij \u00d7 S 1 is given by (xij , \u03bb1 )(xjk , \u03bb2 ) = (xik , \u03bb1 \u03bb2 cijk ), where xij , xjk , xik\nare the same point x in the three-intersection Uijk considered as elements in the two-intersections,\nand cijk : Uijk \u2192 S 1 is a 2-cocycle which represents the \u010cech class in H 2 (N, S 1 ) \u223c\n= H 3 (N, Z)\n1\ncorresponding to \u03b1. This is essentially the picture of an S -gerbe over a manifold described by\nHitchin [21].\nThe exponential sequence Z \u2192 \u03a90 \u2192 S 1 induces a boundary map H 2 (X\u2022 , S 1 ) \u2192 H 3 (X\u2022 , Z).\nThe image in H 3 (X\u2022 , Z) of the class in H 2 (X\u2022 , S 1 ) of a groupoid S 1 -central extension R\u2022 is called\nthe Dixmier-Douady class of R\u2022 . The Dixmier-Douady class behaves well with respect to the pullback and the tensor operations. A fundamental question is to develop a Chern-Weil characteristic\nclass theory to construct the Dixmier-Douady classes geometrically. For this purpose, we need\nthe de Rham double complex of a Lie groupoid. Let X1 \u21c9 X0 be a Lie groupoid. By Xp , we\ndenote the manifold of composable sequences of p arrows in the groupoid X1 \u21c9 X0 . We have p + 1\ncanonical maps, called face maps, Xp \u2192 Xp\u22121 giving rise to a diagram\n. . . X2\n\n////// X1\n\n//// X0 .\n\n(1)\n\nIn fact, X\u2022 is a simplicial manifold [14]. Thus for any abelian sheaf F (e.g., Z, R, or S 1 ), we have\nthe cohomology groups H k (X\u2022 , F ). Just like for manifolds, H k (X, R) is canonically isomorphic\nto the de Rham cohomology of X1 \u21c9 X0 , which is defined by the double complex \u03a9\u2022 (X\u2022 ), with\nboundary maps d : \u03a9k (Xp ) \u2192 \u03a9k+1 (Xp ), the usual exterior derivative of differentiable forms,\nand \u2202 : \u03a9k (Xp ) \u2192 \u03a9k (Xp+1 ), the alternating sum of the pull-back of face maps. We denote the\nk\ntotal differential\nby \u03b4 = (\u22121)p d + \u2202. The cohomology groups of the total complex HdR\n(X\u2022 ) =\n\u0001\nH k \u03a9\u2022 (X\u2022 ) are called the de Rham cohomology groups of X1 \u21c9 X0 . When X1 \u21c9 X0 is the \u010cech\ngroupoid associated to an open covering of a manifold N , this is isomorphic to the usual de Rham\ncohomology of the manifold N . On the other hand, when X1 \u21c9 X0 is a transformation groupoid\nk\nk\nG \u22ca M \u21c9 M , then HdR\n(X\u2022 ) is isomorphic to the equivariant cohomology HG\n(M ).\n3\n\n\fFollowing Murray [32] and Hitchin [21], for a given groupoid S 1 -central extension, one can\nalso define the notions of connections, curvings and 3-curvatures. A flat gerbe is one whose 3curvature vanishes. In this case, there exists a holonomy map as well. However, a substantial\ndifference between S 1 -gerbes over an arbitrary differential stack and S 1 -gerbes over a manifold is\nthat connections and curvings may not always exist. Therefore they may not be as useful as one\nexpects in calculating Dixmier-Douady classes. For this purpose, we need the notion of so called\npseudo-connections. Given an S 1 -central extension R1 \u2192 X1 \u21c9 X0 , a pseudo-connection consists\nof a pair (\u03b8, B), where \u03b8 \u2208 \u03a91 (R1 ) is a connection 1-form for the S 1 -principal bundle R1 \u2192 X1 , and\n3\n3\nB \u2208 \u03a92 (X0 ) is a 2-form. It is simple to check that \u03b4(\u03b8 + B) \u2208 ZdR\n(R\u2022 ) descends to ZdR\n(X\u2022 ), i.e.\n1\n2\n3\n\u2217\nthere exist unique \u03b7 \u2208 \u03a9 (X2 ), \u03c9 \u2208 \u03a9 (X1 ) and \u03a9 \u2208 \u03a9 (X0 ) such that \u03b4(\u03b8 + B) = \u03c0 (\u03b7 + \u03c9 + \u03a9).\nThen \u03b7 + \u03c9 + \u03a9 is called the pseudo-curvature of the pseudo-connection \u03b8 + B. It is simple to\n3\ncheck that the class [\u03b7 + \u03c9 + \u03a9] \u2208 HdR\n(X\u2022 ) is independent of the choice of the pseudo-connection\n\u03b8 + B. One of the main results of this paper is that [\u03b7 + \u03c9 + \u03a9] is indeed the Dixmier-Douady class,\nor more precisely, the image of the Dixmier-Douady class under the canonical homomorphism\n3\nH 3 (X, Z) \u2192 H 3 (X, R) \u223c\n(X\u2022 ). Recently, Ginot-Stienon found an alternative proof of this\n= HdR\nresult using 2-group bundles [18] (in fact they proved a more general result for central G-extensions).\nWe also describe a prequantization result, an analogue of the Kostant-Weil [24, 48] theorem for\n3\nS 1 -gerbes. That is, given any integral 3-cocycle \u03b7 + \u03c9 + \u03a9 \u2208 ZdR\n(X\u2022 ), we describe a sufficient\ncondition that guarantees the 3-cocycle as the pseudo-curvature of a groupoid S 1 -central extension\nR\u2022 with a pseudo-connection \u03b8 + B, and classify all such pairs (R\u2022 , \u03b8 + B).\nS 1 -central extensions of Lie groupoids also appear naturally in Poisson geometry. It was proved\nin [49] that a certain prequantization of a symplectic groupoid naturally becomes an S 1 -central\nextension of groupoids with a connection, which is indeed a contact groupoid. The proof utilizes Lie\nalgebroids as a tool. Lie algebroids are infinitesimal versions of Lie groupoids. It is thus natural to\nstudy Lie groupoid central extensions via Lie algebroid central extensions in a general framework.\nMore precisely, let X1 \u21c9 X0 be an s-connected Lie groupoid with Lie algebroid A, and let \u03b7 + \u03c9 \u2208\n3\n(X\u2022 ) be a de-Rham 3-cocycle, where \u03b7 \u2208 \u03a91 (X2 ) and \u03c9 \u2208 \u03a92 (X1 ). Then \u03c9 \u2212 d\u03b7 r \u2208 \u03a92 (X1t ) is a\nZdR\nright invariant t-fiberwise closed two-form on X1 , and therefore defines a Lie algebroid two-cocycle\ne = A \u2295 (X0 \u00d7 R) of A. Here \u03b7 r\nof A, which in turn defines a Lie algebroid central extension A\nr\nis a t-fiberwise one-form on X1 given by \u03b7 (\u03b4x ) = \u03b7(rx\u22121 \u2217 \u03b4x , 0x ), \u2200\u03b4x \u2208 Tx X1t , and rx\u22121 denotes\nthe right translation. A natural question is: under what condition does this Lie algebroid central\nextension give rise to a Lie groupoid central extensione? The last part of the paper is devoted to\ninvestigating this question. Our method is to adapt the method of characteristics developed by\nCoste-Dazord-Weinstein [9]. As a consequence, we obtain a geometrical characterization of the\n3\n(X\u2022 ) of a Lie groupoid X1 \u21c9 X0 .\nintegrality condition of a de Rham 3-cocycle \u03b7 + \u03c9 \u2208 ZdR\nThe results of this paper were announced in [3]. See also [4] for a construction of S 1 -gerbes\nover the quotient stack [G/G] (G is a compact simple Lie group and G acts on G by conjugations)\nas an example.\nAcknowledgments. We would like to thank several institutions for their hospitality while\nwork on this project was being done: RIMS and IHP (Behrend and Xu), University of British\nColumbia and Universit\u00e9 Pierre et Marie Curie (Xu). We also wish to thank many people for useful\ndiscussions and comments, including Camille Laurent-Gengoux, Jim Stasheff, Mathieu Stienon,\nJean-Louis Tu and Alan Weinstein.\n\n2\n\nDifferentiable Stacks\n\nOur goal in this section is to define the notion of differentiable stack and establish a dictionary\nbetween differentiable stacks and Lie groupoids. Roughly speaking, differentiable stacks are Lie\ngroupoids up to Morita equivalence.\n4\n\n\fOur differentiable manifolds will not be assumed to necessarily be Hausdorff. We use the words\nC \u221e and smooth interchangeably. The manifold consisting of one point is denoted by \u2217 or pt.\nLet us start by recalling some terminology. A C \u221e -map f : U \u2192 X of C \u221e manifolds is a\nsubmersion, if for all u \u2208 U the derivative f\u2217 : Tu U \u2192 Tf (u) X is surjective. The relative dimension\nof the submersion f is the (locally constant on U ) dimension of the kernel of f\u2217 . A submersive map\nof relative dimension 0 is called \u00e9tale. Thus f is \u00e9tale if and only if it is a local diffeomorphism.\nLet S be the category of all C \u221e -manifolds with C \u221e -maps as morphisms. Note that not all\nfiber products exist in S, but if at least one of the two morphisms U \u2192 X or V \u2192 X is submersive,\nthen the fiber product U \u00d7X V exists in S. In general, the fiber product U \u00d7X V exists if U \u2192 X\nand V \u2192 X satisfy the transversality condition.\nWe endow S with the Grothendieck topology given by the following notion of covering family.\nCall a family {Ui \u2192 X} of morphisms\n` in S with target X a covering family of X, if all maps\nUi \u2192 X are \u00e9tale and the total map i Ui \u2192 X is surjective.\nOne checks that the conditions for a Grothendieck topology (see Expos\u00e9 II in [1]) are satisfied.\n(Note that in the terminology of loc. cit. we have actually defined a pretopology. This pretopology\ngives rise to a Grothendieck topology, as explained in loc. cit..) We call this topology the \u00e9tale\ntopology on S.\nOne can also work with the topology of open covers. In this topology, all covering families\nare open covers {Ui \u2192 X}, in the usual topological sense. The notion of sheaf or stack over S\nobtained using this topology is the same as using the \u00e9tale topology.\nA site is just a category endowed with a Grothendieck topology. So if we refer to S as a site,\nwe emphasize that we think of S together with its \u00e9tale topology.\nA Lie groupoid is a groupoid in S, whose source and target maps are submersions.\n\n2.1\n\nGroupoid fibrations\n\nA category fibered in groupoids X \u2192 S is a category X, together with a functor \u03c0 : X \u2192 S, such\nthat the following two fibration axioms are satisfied:\n(i) for every arrow V \u2192 U in S, and every object x of X lying over U (i.e. \u03c0(x) = U ), there\nexists an arrow y \u2192 x in X lying over V \u2192 U ,\n(ii) for every commutative triangle W \u2192 V \u2192 U in S and arrows z \u2192 x lying over W \u2192 U\nand y \u2192 x lying over V \u2192 U , there exists a unique arrow z \u2192 y lying over W \u2192 V , such that the\ncomposition z \u2192 y \u2192 x equals z \u2192 x.\nThe object y over V , whose existence is asserted in (i), is unique up to a unique isomorphism\nby (ii). Any choice of such a y is called a pullback of x via V \u2192 U , notation y = x | V , or y = f \u2217 x,\nif the morphism V \u2192 U is called f . Often it is convenient to choose pullbacks for all x and all\nV \u2192 U (where U = \u03c0(x)).\nGiven a category fibered in groupoids X \u2192 S and an object U of S, the category of all objects\nof X lying over U and all morphisms of X lying over idU is called the fiber of X over U , notation\nXU , sometimes X(U ). Note that all fibers XU are (set-theoretic) groupoids. This follows from\nProperty (ii), above.\nWe call categories fibered in groupoids over S also simply groupoid fibrations. The groupoid\nfibrations over S (see [20]) form a 2-category. Fibered products exist. They satisfy a 2-categorical\nversion of the universal mapping property for fibered products (see [25]).\nThe notion of groupoid fibration is the mathematical formalization of the notion of moduli\nproblem. Let X \u2192 S be a groupoid fibration. If we consider X as a moduli problem, then we think\nof an object x \u2208 X lying over S \u2208 S as an X-family parametrized by S. The objects we wish to\nclassify are the objects of the category X(pt).\nStandard examples of categories fibered in groupoids over S are:\n\n5\n\n\fExample 2.1 Let G be a Lie group. Let X = BG be the category of pairs (S, P ), where S \u2208 S\nis a C \u221e -manifold and P is a principal G-bundle over S. A morphism from (S, P ) to (T, Q) is a\ncommutative diagram\n// Q\nP\n\u000f\u000f\n// T\n\n\u000f\u000f\nS\n\nwhere P \u2192 Q is G-equivariant. The functor \u03c0 : BG \u2192 S is defined by (S, P ) 7\u2192 S.\nExample 2.2 Every manifold X defines a groupoid fibration FX over S. The objects of FX are\npairs (U, f ), where U is a C \u221e -manifold and f : U \u2192 X is a smooth map. Morphisms in FX are\nthe commutative triangles\n// V\nU@\n@@\n@@\n@@\n\u000f\u000f\nX\nThe functor FX \u2192 S is the projection onto the first component. The groupoid fibration FX\nsatisfies\nFX (U ) = HomS (U, X) .\nBy abuse of notation, we identify FX with X in the sequel.\nExample 2.3 Let Mg be the following groupoid fibration: objects are fiber bundles X \u2192 S\nendowed with a smoothly varying fiberwise complex structure, such that all fibers are Riemann\nsurfaces of genus g. Morphisms are commutative diagrams\nX\n\n// Y\n\n\u000f\u000f\nS\n\n\u000f\u000f\n// T\n\nsuch that X \u2192 Y \u00d7T S is a conformal isomorphism. This groupoid fibration is the moduli stack of\nRiemann surfaces of genus g. An object X \u2192 S of Mg is a family of Riemann surfaces parametrized\nby S. The functor Mg \u2192 S maps X \u2192 S to S.\nExample 2.4 Any contravariant functor F : S \u2192 (sets) gives rise to a category fibered in\ngroupoids X \u2192 S defined as follows: objects of X are pairs (U, x), where U is a C \u221e -manifold\nand x \u2208 F (U ). A morphism (U, x) \u2192 (V, y) is a C \u221e map a : U \u2192 V such that F (a)(y) = x. The\nfunctor \u03c0 : X \u2192 S is defined by (U, x) 7\u2192 U .\nIn particular, a sheaf over S defines a groupoid fibration over S in a canonical way.\nDefinition 2.5 A groupoid fibration X over S is representable, if there exists a manifold X\nsuch that X \u223c\n= X (as groupoid fibrations over S).\nDefinition 2.6 A morphism of groupoid fibrations X \u2192 Y is called a representable submersion, if for every manifold U and every morphism U \u2192 Y the fibered product V = X \u00d7Y U is\nrepresentable and the induced morphism of manifolds V \u2192 U is a submersion.\nIf the relative dimension V \u2192 U is always equal to n \u2208 Z, then we call n the relative\ndimension of X \u2192 Y.\n\n6\n\n\fExample 2.7 For a Lie group G, the canonical morphism \u2217 \u2192 BG is a representable submersion.\nHere the functor assigns to any smooth manifold U the trivial G-bundle over U . We can think\nof \u2217 \u2192 BG as the universal G-bundle, because every G-bundle P \u2192 S gives rise to a 2-fibered\nproduct\n// S\nP\n\u000f\u000f\n// BG\n\n\u000f\u000f\n\u2217\n\nThe following lemma will be useful in the future.\nLemma 2.8 (Descent) Let F be a sheaf over S. Let X be a manifold and F \u2192 X a morphism.\nSuppose that {Ui \u2192 X} is a covering family of X and that for every i the sheaf Fi = Ui \u00d7X F is\nrepresentable. Then F is representable.\nProof. First note that we can choose a refinement of the covering {Ui \u2192 X} consisting of open\nsubsets of X. Replacing the covering by such a refinement, we reduce to the case of a cover\n{Ui \u2192 X} consisting of open subsets.\nLet, as usual, Uij = Ui \u00d7X Uj = Ui \u2229 Uj . Define Fij = Uij \u00d7X F . Then all Fij are representable.\nMoreover, all maps Fij \u2192 Fi and Fij \u2192 Fj are (isomorphic to) embeddings of open subsets. Thus\nwe can glue the manifolds Fi along the open submanifolds Fij to obtain a manifold representing\nF. \u0003\nDefinition 2.9 A morphism of groupoid fibrations X \u2192 Y is an epimorphism if for every\nU \u2192 Y, where U is a manifold, there exists a surjective submersion V \u2192 U and a 2-commutative\ndiagram\n// U\nV\n{\u0003 \u007f\u007f\u007f\u007f\n\u000f\u000f\n\u000f\u000f\n// Y\nX\nEquivalently, V may be replaced by an open cover of U , in this statement.\nRemark Let X be a category fibered in groupoids over S. Given a manifold U \u2208 S and an\nobject x \u2208 XU (we write x|U ), the choice of pullbacks of x for all maps V \u2192 U defines a morphism\nU \u2192 X. Conversely, given a morphism U \u2192 X, the image of idU is an object in the fiber XU . In\nthis way we identify morphisms U \u2192 X with objects in the fiber XU .\n\n2.2\n\nStacks\n\nRecall the definition of stack [25]:\nDefinition 2.10 Let X \u2192 S be a category fibered in groupoids. We call X a stack over S, if the\nfollowing three axioms are satisfied:\n(i) for any C \u221e -manifold X \u2208 S, any two objects x, y \u2208 X lying over X, and any two isomorphisms \u03c6, \u03c8 : x \u2192 y over X, such \u03c6 | Ui = \u03c8 | Ui , for all Ui in a covering family Ui \u2192 X, we have\nthat \u03c6 = \u03c8;\n(ii) for any C \u221e -manifold X \u2208 S, any two objects x, y \u2208 X lying over X, a covering family\nUi \u2192 X and, for every i, an isomorphism \u03c6i : x | Ui \u2192 y | Ui , such that \u03c6i | Uij = \u03c6j | Uij , for all\ni, j, there exists an isomorphism \u03c6 : x \u2192 y, such that \u03c6 | Ui = \u03c6i , for all i;\n\n7\n\n\f(iii) for every C \u221e -manifold X, every covering family {Ui } of X, every family {xi } of objects\nxi in the fiber XUi and every family of morphisms {\u03c6ij }, \u03c6ij : xi | Uij \u2192 xj | Uij , satisfying the\ncocycle condition \u03c6jk \u25e6 \u03c6ij = \u03c6ik (which is an equation in the fiber XUijk ), there exists an object\nx over X, together with isomorphisms \u03c6i : x | Ui \u2192 xi such that \u03c6ij \u25e6 \u03c6i = \u03c6j (over Uij ).\nNote that the isomorphism \u03c6, whose existence is asserted in (ii) is unique, by (i). Similarly, the\nobject x, whose existence is asserted in (iii), is unique up to a unique isomorphism, because of (i)\nand (ii). The object x is said to be obtained by gluing the objects xi according to the gluing data\n\u03c6ij .\nNote also that there are choices to be made for all the pullbacks mentioned in the definition of\nstacks, but no property depends on any of these choices.\nRemark To any covering family Ui of X, we can associate a groupoid fibration R, together with\na monomorphism R \u2282 X of groupoid fibrations, the covering sieve given by Ui . The stack axioms\nmay be reformulated in terms of covering sieves: thus, a groupoid fibration X is a stack if and only\nif for every covering sieve R \u2282 X, of every object X \u2208 S, the functor\nHomS (X, X) \u2212\u2192 HomS (R, X)\n\n(2)\n\nis an equivalence of groupoids. More precisely, X satisfies Stack Axiom (i) if and only if (2) is\nalways faithful, X satisfies Stack Axiom (ii) if and only if (2) is always full and X satisfies Stack\nAxiom (iii) if and only if (2) is always essentially surjective.\nThe following lemma is useful in practice.\nLemma 2.11 Let f : X \u2192 Y be a morphism of stacks over S. Suppose given a manifold U and\na morphism U \u2192 Y which is an epimorphism. If the fibered product V = X \u00d7Y U is representable\nand V \u2192 U is a submersion, then f is a representable submersion.\nIf V \u2192 U has relative dimension n, then so does f .\nProof. Let W \u2192 Y be an arbitrary morphism, where W is a manifold. First we have to show that\nthe fibered product F = X \u00d7Y W is representable. By the fact that U \u2192 Y is an epimorphism, we\ncan choose a covering family {Wi \u2192 W } of W and morphisms \u03c6i : Wi \u2192 U making the diagram\nWi\n\u000f\u000f\nW\n\n\u03c6i\n\n<D\n\u0001\u0001\u0001\u0001\n\n// U\n\u000f\u000f\n// Y\n\ncommute (which involves, of course, also a choice of a 2-arrow, for every i). By Lemma 2.8, it\nsuffices to prove that Fi = Wi \u00d7W F is representable, for all i. But Fi = Wi \u00d7U V , as can be seen\nfrom the cartesian cube\n// V\nFi B\n??\nBBB\n??\n!!\n\u001f\u001f\n// U\nWi\n\u000f\u000f\n\u000f\u000f\n// X\nF C\n??\nCC\n?\u001f\u001f \u000f\u000f\nC!! \u000f\u000f\n// Y\nW\nand so, indeed, Fi , and hence F is representable.\n8\n\n\fNow the fact that F \u2192 W is a submersion, follows from the fact that for every i the map\nFi \u2192 Wi is a submersion, because being a submersion is a local property. But Fi \u2192 Wi is a\nsubmersion as a pull back of the submersion V \u2192 U . \u0003\nExample 2.12 Let G be a Lie group and H a closed Lie subgroup. The induced morphism\nBH \u2192 BG is a representable submersion. To see this, let us apply Lemma 2.11. Note that\n\u2217 \u2192 BG is an epimorphism, because every G-bundle is locally trivial. Note also that we have a\ncartesian diagram\n// \u2217\nG/H\n\u000f\u000f\nBH\n\n\u000f\u000f\n// BG\n\nbecause the reductions of structure group from G to H of the trivial G-bundle over a manifold U\nare classified by the maps U \u2192 G/H. Since G/H is a manifold, G/H \u2192 \u2217 is a submersion, which\nfinishes the proof. The relative dimension of BH \u2192 BG is equal to dim G \u2212 dim H.\nTwo stacks X and Y over S are said to be isomorphic if they are equivalent as categories\nover S. This means that there exist morphisms f : X \u2192 Y and g : Y \u2192 X and 2-isomorphisms\n\u03b8 : f \u25e6 g \u21d2 idY and \u03b7 : g \u25e6 f \u21d2 idX .\nProposition 2.13 For stacks X and Y over S to be isomorphic, it suffices that there exists a\nmorphism f : X \u2192 Y satisfying the two conditions:\n(i) for any two objects x, x\u2032 of X, lying over the same object U of S, and any arrow \u03b7 : f (x) \u2192\nf (x\u2032 ) in YU , there exists a unique arrow x \u2192 x\u2032 mapping to \u03b7 under f (we say f is fully faithful\nor a monomorphism);\n(ii) for every object y of Y, lying over S \u2208 S, there exists a covering family {Ui } of S and\nobjects xi of X lying over Ui , such that f (xi ) \u223c\n= y | Ui , for all i (we say that f is an epimorphism).\nA morphism satisfying both these conditions is called an isomorphism of stacks.\n\n2.3\n\nDifferentiable stacks\n\nLet X be a groupoid fibration over S. Recall that we may think of x/S equivalently as a morphism\nof groupoid fibrations x : S \u2192 X.\nFor x/S and y/T , consider the fibered product\n// T\n\nIsom(x, y)\n@H\n\u000f\u000f\nS\n\nx\n\ny\n\n\u000f\u000f\n// X\n\nFor an X-family x, parametrized by S, we call Isom(x, x) \u21c9 S the symmetry groupoid of x. A\npriori, Isom(x, x) is just a groupoid fibration over S, but it may be hoped that it is (represented\nby) a Lie groupoid. Note that we have a cartesian diagram\n// S \u00d7 S\n\nIsom(x, x)\nBJ\n\u000f\u000f\nX\n\n\u2206\n\n9\n\n\u000f\u000f\n// X \u00d7 X\n\n\fThus, ultimately, properties of the diagonal \u2206 : X \u2192 X \u00d7 X, will assure that the symmetry\ngroupoids Isom(x, x) are manifolds, at least if S \u2192 X is sufficiently well-behaved.\nLemma 2.14 Let f : X \u2192 Y be a representable submersion of stacks over S. Then the following\nare equivalent:\n(i) f is an epimorphism;\n(ii) for every manifold U \u2192 Y the submersion V \u2192 U , where V is the fibered product V =\nX \u00d7Y U , is surjective;\n(iii) for some manifold U \u2192 Y, where U \u2192 Y is an epimorphism, the submersion V \u2192 U is\nsurjective.\nA representable submersion satisfying these conditions is called a surjective representable submersion.\nProof. This follows from the fact that a submersion between manifolds is an epimorphism of\nstacks if and only if it is surjective. We also use that to be an epimorphism is a local property. \u0003\nDefinition 2.15 A stack X over S is called differentiable or a C \u221e -stack, if there exists a\nmanifold X and a surjective representable submersion x : X \u2192 X. Such a manifold X, together\nwith the structure morphism X \u2192 X is called a presentation of X or an atlas for X, and such\na family x/X is called a versal family.\nAlternatively, one can describe a differentiable stack in a slightly weaker condition.\nProposition 2.16 A stack over S is a differentiable stack, if there exists an X-family x/X, such\nthat\n(i) the symmetry groupoid Isom(x, x) is representable, and the projections Isom(x, x) \u2192 X are\nsubmersions;\n(ii) the morphism x : X \u2192 X is an epimorphism. I.e., for every X-family y/S, there exists a\ncovering family Ui of S, and morphisms \u03c6i : Ui \u2192 X, such that y | Ui \u223c\n= \u03c6\u2217i x.\nProof. Given such an X-family x/X, it suffices to show that x : X \u2192 X is representable submersion. This follows from Lemma 2.11 since x : X \u2192 X is epimorphism, X \u00d7X X is representable\nand X \u00d7X X \u2192 X is a submersion.\nThe converse is obvious. \u0003\nThe 2-category of differentiable stacks is the full sub-2-category of the 2-category of groupoid\nfibrations over S consisting of differentiable stacks.\nGiven a differentiable stack X, a versal family x/X gives rise to a Lie groupoid Isom(x, x) \u21c9 X\nin a canonical way. The points of Isom(x, x) are by definition triples (y, \u03c6, y \u2032 ), where y and y \u2032 are\npoints of X and \u03c6 : x|y \u2192 x|y \u2032 is a morphism in the groupoid X\u2217 (the fiber of X over \u2217 \u2208 S). So\nit is clear how to define the composition:\n(y, \u03c6, y \u2032 ) \u25e6 (y \u2032 , \u03c8, y \u2032\u2032 ) = (y, \u03c8 \u25e6 \u03c6, y \u2032\u2032 ) .\n\n(3)\n\nTo see that this, indeed, defines the structure of a Lie groupoid on Isom(x, x) \u21c9 X, the quickest way is to note that for every manifold U , evaluating at U we get a (set-theoretic) groupoid\nIsom(x, x)(U ) \u21c9 X(U ), defined by the same formula (3) and compatible with all maps V \u2192 U .\nA morphism X \u2192 Y of differentiable stack is representable if one of the following equivalent\nconditions is satisfied:\n1. there is a presentation Y \u2192 Y such that X \u00d7Y Y is representable;\n\n10\n\n\f2. for any representable submersion Y \u2192 Y, X \u00d7Y Y is representable.\nFor instance, the diagonal map X \u2192 X \u00d7 X of a differentiable stack X is always representable.\nA representable morphism X \u2192 Y is called proper if there exists a presentation Y \u2192 Y such\nthat the base change X \u2192 Y is proper. If this is the case, X \u2192 Y is proper for all representable\nsubmersion Y \u2192 Y.\nExample 2.17 Let Xg be the following groupoid fibration: objects are fiber bundles X \u2192 S with\nfibers being isomorphic to a fixed connected surface Y of genus g. Morphisms are commutative\ndiagrams\n// Y\nX\n\u000f\u000f\nS\n\n\u000f\u000f\n// T\nY\n\nsuch that X \u2192 Y \u00d7T S is an isomorphism. Consider the constant family Y \u2192 \u2217. Then \u2217 \u2192 Xg is an\nY\n\nepimorphism, because every family of surfaces is locally trivial. But \u2217 \u2192 Xg is not a representable\nsubmersion since the symmetry groupoid of this family is the diffeomorphism group of Y , which\nis not a finite dimensional manifold. So Xg is not a differentiable stack.\n\n2.4\n\nTorsors for Lie groupoids\n\nNext, we show how to get a differentiable stack starting from a Lie groupoid. (This is, in fact, a\ngeneralization of passing from G to BG.)\nDefinition 2.18 Let \u0393 \u21c9 M be a Lie groupoid and S a manifold. A \u0393-torsor over S is a\nmanifold P , together with a surjective submersion \u03c0 : P \u2192 S and a (right) action of \u0393 on P , such\nthat for all p, p\u2032 \u2208 P , such that \u03c0(p) = \u03c0(p\u2032 ), there exists a unique \u03b3 \u2208 \u0393, such that p * \u03b3 is defined\nand p * \u03b3 = p\u2032 .\nWe call the map P \u2192 M of the \u0393-torsor P the anchor map and denote it by a : P \u2192 M . (In\nthe theory of symplectic groupoids the anchor map is also called the \"momentum map\" [30].) And\nthe surjective submersion \u03c0 : P \u2192 S is called the structure map.\nRemark Think of a \u0393-torsor as follows. View an element p \u2208 P as an arrow eminating at \u03c0(p)\nand terminating at a(p). Then view the action of \u0393 on P as composing arrows.\nDefinition 2.19 Let \u03c0 : P \u2192 S and \u03c1 : Q \u2192 T be \u0393-torsors. A morphism of \u0393-torsors from Q\nto P is given by a commutative diagram of differentiable maps\nQ\n\n\u03c6\n\n// P\n(4)\n\u000f\u000f\n// S\n\n\u000f\u000f\nT\nsuch that \u03c6 is \u0393-equivariant.\n\nNote that for a morphism of \u0393-torsors the diagram (4) is necessarily a pullback diagram.\nThe \u0393-torsors form a category with respect to this notion of morphism. In particular, we now\nknow what it means for two \u0393-torsors to be isomorphic.\n\n11\n\n\fExample 2.20 (trivial torsors) Let f : S \u2192 M be a smooth map. Given f , we can induce over\nS in a canonical way a \u0393-torsor, which we call the trivial \u0393-torsor given by f .\nSimply define P to be the fibered product P = S \u00d7f,M,s \u0393. The structure map \u03c0 : P \u2192 S is the\nfirst projection. The anchor map of the \u0393-action is the second projection followed by the target\nmap t. The action is then defined by\n(s, \u03b3) * \u03b4 = (s, \u03b3 * \u03b4) .\nOne checks that this is, indeed, a \u0393-torsor over S.\nOf course, we can take S = M and f the identity map of M . Then we get the universal trivial\n\u0393-torsor, whose base is M . The structure morphism and the anchor map of the universal \u0393-torsor\nare, respectively, t, s : \u0393 \u2192 M .\nLet \u03c0 : P \u2192 S be an arbitrary \u0393-torsor over the manifold S. One checks that every section\ns : S \u2192 P of \u03c0 can be used to construct an isomorphism between the \u0393-torsor P and the trivial\n\u0393-torsor over S given by a \u25e6 s, where a : P \u2192 M is the anchor map of P .\nSince every surjective submersion admits local sections, we see that every \u0393-torsor is locally\ntrivial.\nLet us denote the category of \u0393-torsors by B\u0393. There is a canonical functor B\u0393 \u2192 S given by\nmapping a torsor P \u2192 S to the underlying manifold S.\nThe following proposition provides us with plenty of examples of differentiable stacks. Theorem 2.22 below indeed shows that it provides us with all examples of differentiable stacks.\nProposition 2.21 For every Lie groupoid \u0393 \u21c9 M , the category of \u0393-torsors B\u0393 is a differentiable\nstack.\nProof. The fact that B\u0393 is fibered in groupoids over S follows from the fact that diagrams\nsuch as (4) are always cartesian. Note that given a \u0393-torsor P \u2192 S and a morphism of manifolds\nT \u2192 S, T \u00d7S P \u2192 T is naturally a \u0393-torsor over T .\nTo check the stack axioms, one has to prove that one can glue together \u0393-torsors and morphisms\nof \u0393-torsors. This is rather standard and will be omitted.\nFinally we need to prove that B\u0393 admits a presentation. For this, we take the universal trivial\ntorsor. We shall construct a morphism M \u2192 B\u0393. This means defining for every manifold S a map\nM (S) \u2192 B\u0393(S). This we do by assigning to any smooth map a : S \u2192 M (i.e. object of M (S)) the\ntrivial \u0393-torsor over S, which is an object of B\u0393(S). Alternatively, we can use the universal trivial\n\u0393-torsor, which gives rise to the morphism M \u2192 B\u0393 directly, via the correspondence between\nobjects of the fiber B\u0393(U ) and morphisms U \u2192 B\u0393(U ) (see the remark following Definition 2.9).\nNow that we have a morphism M \u2192 B\u0393 from a manifold M , it remains to prove that this\nmorphism is a surjective representable submersion. To prove that M \u2192 B\u0393 is an epimorphism,\nmeans proving that every \u0393-torsor is locally trivial. This we have done already. By Proposition\n2.16, it now suffices to prove that the fibered product\n// M\n\nX\n\u000f\u000f\nM\n\nE=\n\u0003\u0003\u0003\u0003\n\n\u000f\u000f\n// B\u0393\n\nis representable and that the maps X \u21c9 M are submersions.\nLet S be an arbitrary manifold. Then X(S) is the set of triples (a, \u03b3, b), where a, b : S \u2192 M\nare C \u221e maps and \u03b3 : Qa \u2192 Qb is a morphism of \u0393-torsors over S, where Qa and Qb are the trivial\n\u0393-torsors over S given by a and b, respectively. One checks that this set is canonically identified\nwith \u0393(S), the set of C \u221e -maps from S to \u0393.\n12\n\n\fThus we have that X \u223c\n= \u0393 as stacks over S, and so X is representable. To check that the two\nprojections X \u2192 M are submersions, note that they are identified with s, t : \u0393 \u2192 M , under this\nisomorphism. Since s and t are submersions, we are done. \u0003\nRemark (1) Note that in the course of the proof we have seen that we have a cartesian diagram\n\u0393\ns\n\n\u000f\u000f\nM\n\nt\n\nE=\n\u0003\u0003\u0003\u0003\n\n// M\n\u000f\u000f\n// B\u0393\n\nThus \u0393 \u21c9 M is (isomorphic to) the Lie groupoid arising from the atlas M \u2192 B\u0393.\n(2) From the above proof, we see that for a given a : S \u2192 M the corresponding trivial torsor\nover S corresponds to the composition of morphisms\na\n\n\u03c0\n\nS \u2212\u2192 M \u2212\u2192 B\u0393.\nTheorem 2.22 Let X be a differentiable stack and x/X a versal family for X. Then\nX\u223c\n= B Isom(x, x) ,\nas groupoid fibrations over S.\nProof. We shall prove that the functor f :\nX \u2212\u2192 B Isom(x, x)\ny 7\u2212\u2192 Isom(x, y) ,\n\n(5)\n\nprovides us with the required isomorphism of groupoid fibrations.\nSince x : X \u2192 X is a representable submersion, it follows that Isom(x, y) is representable. The\nfact that Isom(x, x) acts simply transitively on Isom(x, y) is clear. Thus, Isom(x, y) is, in fact, an\nIsom(x, x)-torsor.\nIt remains to prove that (5) is an equivalence of categories. Since both groupoid fibrations are\nstacks, we can use the local criterion: Proposition 2.13, i.e. to prove that f is a monomorphism\nand an epimorphism.\nFor the monomorphism property, let y, y \u2032 : S \u2192 X be two objects of X lying over S. Let Q and\n\u2032\nQ be the Isom(x, x)-torsors induced by y and y \u2032 over S. We need to show that any isomorphism\nof torsors \u03c6 : Q \u2192 Q\u2032 comes from a 2-isomorphism \u03b8 : y \u2192 y \u2032 . This follows from the fact that\nIsom(y, y \u2032 ) is a sheaf: choose a covering {Ui } of S trivializing the torsor Q. Then \u03c6 gives rise to\nisomorphisms \u03b8i : y | Ui \u2192 y \u2032 | Ui . One checks that the \u03b8i glue together, giving rise to \u03b8.\nFor the epimorphism property, suppose Q \u2192 S is an Isom(x, x)-torsor over S. Then there\nexists a cover {Ui } of S and sections si : Ui \u2192 Q, trivializing Q over {Ui }. The sections si induce\nx\nmorphisms xi : Ui \u2192 X (which are the compositions Ui \u2192 X \u2192 X) identifying Q | Ui with x\u2217i X.\nThus we see that every Isom(x, x)-torsor over S comes locally from objects of X, proving that f is\nan epimorphism. \u0003\nDefinition 2.23 For a differentiable stack X, if the diagonal X \u2192 X \u00d7 X is proper, we call X\nseparated or Hausdorff.\nFor a differentiable stack X, the diagonal X \u2192 X \u00d7 X is always representable. Indeed if\nX1 \u21c9 X0 is a Lie groupoid representing X, then XX\u00d7X(X0 \u00d7 X0 ) \u223c\n= X1 and the base change map\nis s \u00d7 t : X1 \u2192 X0 \u00d7 X0 . Hence X is separated if and only if X1 \u21c9 X0 is a proper groupoid.\nIn the definition of Metzler [34], all differentiable stacks are required to be separated. We\nbelieve that this is too restrictive. Many interesting differentiable stacks are not separated.\n13\n\n\f2.5\n\nMorita equivalence\n\nWe have now established procedures to go back and forth between Lie groupoids and differentiable\nstacks. Given a differentiable stack X, we choose a presentation X0 \u2192 X and form the associated\nLie groupoid X1 \u21c9 X0 by taking the fibered product. Conversely, starting with a Lie groupoid\n\u0393 \u21c9 M , we construct the differentiable stack B\u0393 of \u0393-torsors, which comes with a canonical\npresentation, giving back the groupoid \u0393 \u21c9 M we started with (up to isomorphism). It remains\nto see when exactly two different Lie groupoids give rise to isomorphic differentiable stacks, or\nput another way, what relationship there is between various Lie groupoids arising from various\npresentations of a differentiable stack.\nDefinition 2.24 Let X\u2022 and Y\u2022 be Lie groupoids. A morphism \u03c6\u2022 : X\u2022 \u2192 Y\u2022 is called a Morita\nmorphism, if\n(i) \u03c60 : X0 \u2192 Y0 is a surjective submersion;\n(ii) the diagram\n// X0 \u00d7 X0\nX1\n\u000f\u000f\nY1\n\n\u000f\u000f\n// Y0 \u00d7 Y0\n\nis cartesian.\nDefinition 2.25 Two Lie groupoids X\u2022 and Y\u2022 are called Morita equivalent, if there exists a\nthird Lie groupoid Z\u2022 and Morita morphisms Z\u2022 \u2192 X\u2022 and Z\u2022 \u2192 Y\u2022\nTheorem 2.26 Let X\u2022 and Y\u2022 be Lie groupoids. Let X and Y be the associated differentiable\nstacks, i.e., X is the stack of X\u2022 -torsors and Y the stack of Y\u2022 -torsors. Then the following are\nequivalent:\n(i) the differentiable stacks X and Y are isomorphic;\n(ii) the Lie groupoids X\u2022 and Y\u2022 are Morita equivalent;\n(iii) there exists a manifold Q together with two C \u221e maps f : Q \u2192 X0 and g : Q \u2192 Y0 and\n(commuting) actions of X1 and Y1 (the action of X1 comprising f and the action of Y1 comprising\ng), in such a way that Q is at the same time an X\u2022 -torsor over Y0 (via g) and a Y\u2022 -torsor over\nX0 (via f ). We call such a Q an X\u2022 -Y\u2022 -bitorsor.\nProof. Let us start by proving that (i) implies (iii). Choose an isomorphism identifying X with\nY. Then let Q be the fibered product Q = Y0 \u00d7X X0 . One checks that Q is a bitorsor.\nTo prove that (iii) implies (ii), choose a bitorsor Q. Let Q1 be the fibered product Q1 =\nY1 \u00d7Y0 Q \u00d7X0 X1 . There is a canonical way to define a Lie groupoid Q1 \u21c9 Q, together with Morita\nequivalences Q\u2022 \u2192 Y\u2022 and Q\u2022 \u2192 X\u2022 .\nOne also proves that (ii) implies (iii). This follows from the following two facts: (1) if \u03c6 :\nX\u2022 \u2192 Y\u2022 is a Morita morphism, then Q = X0 \u00d7Y0 ,s Y1 is naturally an X\u2022 -Y\u2022 -bitorsor; (2) if Q is a\nX\u2022 -Y\u2022 -bitorsor, and Q\u2032 is an Y\u2022 -Z\u2022 -bitorsor, then (Q \u00d7Y0 Q\u2032 )/Y1 is an X\u2022 -Z\u2022 -bitorsor.\nFinally, we need to prove that (iii) implies (i). Given an X\u2022 -torsor F over U , let E = X1 \\(Q\u00d7X0\nF ). Then E is a Y\u2022 -torsor over U , where the anchor map E \u2192 Y0 is a([q, f ]) = g(q) and the Y1 action is y * [q, f ] = [q * y \u22121 , f ]. Also it is clear that a morphism of X\u2022 -torsors F1 \u2192 F2 induces\na morphism of Y\u2022 -torsor E1 \u2192 E2 in a canonical way. Thus one obtains a functor, which can be\neasily seen to be an equivalence of categories. \u0003\nRemark Note that (iii) is the definition of Morita equivalence used in a lot of literature on\noperator algebras [22, 31].\n14\n\n\fDefinition 2.27 If X is a differentiable stack and there exists a Lie groupoid X\u2022 presenting X,\nsuch that X0 and X1 both have constant dimensions, then we call dim X = 2 dim X0 \u2212 dim X1 the\ndimension of X.\nWe see that, from Theorem 2.26, dim X is independent of the presentation of X, and therefore\nis well-defined.\nRemark Note that dim X can also be written as the base dimension minus the fibre dimension\nof the representing groupoid X1 \u21c9 X0 , which is also the orbit space dimension minus the isotropy\ngroup dimension. Also dim X can be negative. In particular, if G is a Lie group of dimension n,\nthe stack BG is of dimension \u2212n.\n\n2.6\n\nDictionary\n\nTheorem 2.26 is only the beginning of a dictionary between differentiable stacks and Lie groupoids.\nWe will now list a few propositions that give more precise information, in particular with respect\nto morphisms and 2-isomorphisms.\nAll these results are standard in stack theory. Proofs are elementary, but usually tedious, and\nwe omit them.\nThe 2-category of Lie groupoids\nRecall the notion of natural equivalence between groupoid morphisms:\nDefinition 2.28 Let \u03c6 : X\u2022 \u2192 Y\u2022 and \u03c8 : X\u2022 \u2192 Y\u2022 be two morphisms of Lie groupoids. A\nnatural equivalence from \u03c6 to \u03c8, notation \u03b8 : \u03c6 \u21d2 \u03c8, is a C \u221e map \u03b8 : X0 \u2192 Y1 such that for\nevery x \u2208 X1 we have\n\u0001\n\u0001\n\u03b8 s(x) \u2217 \u03c8(x) = \u03c6(x) \u2217 \u03b8 t(x) .\nFixing the Lie groupoids X\u2022 and Y\u2022 , the morphisms and natural equivalences form a category\nHom(X\u2022 , Y\u2022 ), which is a (set-theoretic) groupoid. With this notion of morphism groupoid, the Lie\ngroupoids form a 2-category.\nThe Dictionary Lemmas\nWe consider two Lie groupoids X\u2022 and Y\u2022 with associated differentiable stacks X and Y, respectively. The dictionary lemmas relate groupoid morphisms X\u2022 \u2192 Y\u2022 to stack morphisms X \u2192 Y.\nThe first Dictionary Lemma says that a morphism of Lie groupoids induces a morphism of\nassociated differentiable stacks, unique up to unique 2-isomorphism:\nLemma 2.29 (First Dictionary Lemma) Let \u03c6 : X\u2022 \u2192 Y\u2022 be a morphism of Lie groupoids.\nLet X and Y be differentiable stacks associated to X\u2022 and Y\u2022 , respectively. Then there exists a\nmorphism of stacks f : X \u2192 Y and a 2-isomorphism\nX0\n\n\u03c60\n\n<D\n\u0001\u0001\u0001\u0001\n\n// Y0\n\n\u03b7\n\n\u000f\u000f\nX\n\nf\n\n15\n\n(6)\n\u000f\u000f\n// Y\n\n\fsuch that the cube\nX1 E\nE\"\"\n\u0005\u0005\n\n\u03c61\n\nX0\n\n\u03c60\n\nX0 D\nDD \u0005\u0005\n\"\"\nX\n\nf\n\n// Y1\nBB\n\u03c60\n// Y0\n\u0006\u0006\n\u000e\u000e\n// Y0\n\u000e\nAAA \u000e\u000e\n\u0006\u0006\u000e\n// Y\n\n(7)\n\n2-commutes. If (f \u2032 , \u03b7 \u2032 ) is another pair satisfying these properties, then there is a unique 2isomorphism \u03b8 : f \u21d2 f \u2032 such that \u03b8 \u2217 \u03b7 \u2032 = \u03b7. \u0003\nThe second and third Dictionary Lemmas treat the converse:\nLemma 2.30 (Second Dictionary Lemma) Let f : X \u2192 Y be a morphism of stacks, \u03c60 :\nX0 \u2192 Y0 a morphism of manifolds and \u03b7 a 2-isomorphism as in (6). Then there exists a unique\nmorphism of Lie groupoids \u03c61 : X1 \u2192 Y1 covering \u03c60 and making the cube (7) 2-commutative. \u0003\nLemma 2.31 (Third Dictionary Lemma) Let f : X \u2192 Y be a morphism of stacks. Let \u03c6 :\nX\u2022 \u2192 Y\u2022 and \u03c8 : X\u2022 \u2192 Y\u2022 be two morphisms of Lie groupoids. Let \u03b7 and \u03b7 \u2032 be 2-isomorphisms,\nwhere (\u03c6, \u03b7) and (\u03c8, \u03b7 \u2032 ) both form 2-commutative cubes such as (6). Then there exists a unique\nnatural equivalence \u03b8 : \u03c6 \u21d2 \u03c8 such that the diagram\nggg33 Y1 BB\ng\u03b8gg\u03c8gg\ng\ng\ng\ng\n0\ng\n// Y0\nX00 SSS\n00 SSSSS \u0006\u0006\n\u000e\n))\n00 \u03c60\n\u000e\u000e\nY\n0\n\u000e\n00\nAAA \u000e\n\u0006\u0006\u000e\n\u0018\u0018\nf\n// Y\nX\n2-commutes. \u0003\n\n2.7\n\nDifferentiable Spaces\n\nDifferentiable spaces are generalizations of manifolds. The are differentiable stacks whose isotropy\ngroups are trivial. They occur when one tries to define the quotient of an equivalence relation\nwhich is \"of Lie type\" (i.e. is given by a Lie groupoid) but the usual quotient has bad properties\n(i.e. is not a manifold or not a principal bundle quotient). Differentiable spaces have slightly better\nproperties than manifolds. The main advantage is that Lemma 2.35 holds for them.\nDefinition 2.32 A sheaf over S, which, considered as a stack over S is differentiable, is called a\ndifferentiable space.\nThus a sheaf F is a differentiable space if there exists a manifold X and a surjective representable\nsubmersion X \u2192 F .\nExample 2.33 If a Lie group acts on a manifold freely, but not properly, we get a differentiable\nspace.\nProposition 2.34 The differentiable stack X defined by a Lie groupoid X\u2022 is (isomorphic to) a\ndifferentiable space if and only if X\u2022 is a Lie equivalence relation (i.e. X1 \u2192 X0 \u00d7 X0 is injective).\nIn particular, if X\u2022 and Y\u2022 are Morita equivalent Lie groupoids, then X\u2022 is an equivalence\nrelation if and only if Y\u2022 is.\n16\n\n\fThus we may think of differentiable spaces as Lie equivalence relations up to Morita equivalence.\nLemma 2.35 (Submersive descent for differentiable spaces) Let F be a sheaf over S. Let\nX be a manifold and F \u2192 X a morphism. Suppose that U \u2192 X is a surjective submersion of\nmanifolds and that the sheaf G = U \u00d7X F is a differentiable space. Then F is a differentiable\nspace. \u0003\nNote that there is no corresponding statement for manifolds. For manifolds we only have \u00e9tale\ndescent (Lemma 2.8).\nDefinition 2.36 Let X and Y be stacks over S. We call a morphism f : X \u2192 Y weakly\nrepresentable, if for every representable submersion U \u2192 Y, where U is a manifold, the fibered\nproduct V = X \u00d7Y U is isomorphic to a differentiable space.\nProposition 2.37 Let X and Y be differentiable stacks. The morphism f : X \u2192 Y is weakly\nrepresentable if there exists a presentation Y \u2192 Y such that X = X \u00d7Y Y is isomorphic to a\ndifferentiable space.\nProof. The proof is very similar to the proof of Lemma 2.11. We need to use submersive descent\nfor differentiable spaces. \u0003\nExample 2.38 Representable morphisms are weakly representable. In particular, the diagonal\nX \u2192 X \u00d7 X of a differentiable stack is weakly representable, and any C \u221e -map of manifolds is\nweakly representable.\nMoreover, any morphism from a differentiable space to a differentiable stack is weakly representable, and any morphism of differentiable stacks which is faithful is weakly representable.\nRemark We get a weaker notion of differentiable stack if we work with groupoids where X0 and\nX1 are differentiable spaces rather than manifolds. Equivalently, we can relax the condition that\nthe diagonal X \u2192 X \u00d7 X be representable to it being weakly representable. We could call these\nstacks weakly differentiable stacks.\nFor example, the quotient R/Q is a differentiable space but not a manifold. It is also a group.\nThe associated stack B(R/Q) is weakly differentiable but not differentiable.\nRemark It would be interesting to investigate the relationship between differentiable spaces and\nSouriau's diffeology structures [47].\n\n3\n\nHomology and cohomology\n\nHere our goal is to define the cohomology of a differentiable stack with values in a sheaf (or a\ncomplex of sheaves) of abelian groups. Of particular interest is the de Rham complex, which gives\nrise to de Rham cohomology.\nThen we pass to Lie groupoids and define the cohomology of a Lie groupoid with values in\na sheaf of abelian groups. This cohomology is Morita invariant. For any complex of sheaves of\nabelian groups, we also define a double complex and its associated cohomology groups. These\ncohomology groups are not necessarily Morita invariant, but they will be if all component sheaves\nof the complex are acyclic on manifolds. An example of this is the de Rham complex. Thus de\nRham cohomology of a groupoid is also Morita invariant.\n\n17\n\n\f3.1\n\nSheaves over stacks and their cohomology\n\nLet X be a differentiable stack. We endow the category X with a Grothendieck topology defined\nas follows: call a family {xi \u2192 x} of morphisms in X a covering family of the object x \u2208\n`X, if the\nimage family {Ui \u2192 U } in S is a covering family, i.e. is a family of \u00e9tale maps such that Ui \u2192 U\nis surjective. One checks that, indeed, the axioms of a topology are satisfied. Thus we may now\nspeak of sheaves over X: i.e. contravariant functors X \u2192 (sets) satisfying the sheaf axioms. We\nget the category (sheaves/X) of sheaves over X.\nRemark 3.1 Let F be a sheaf over the stack X. Consider F as a category fibered in groupoids\nF \u2192 X. Then, by composing with X \u2192 S, we may turn F into a category fibered in groupoids\nover S. One checks that F is then a stack over S and that F \u2192 X is a morphism of stacks.\nMoreover, F \u2192 X is faithful.\nConversely, if f : Y \u2192 X is a faithful morphism of stacks over S, we may associate a sheaf\nF over X defined by F (x) = {(y, \u03c6) | \u03c6 : x \u2192 f (y)}/ \u223c, where (y, \u03c6) \u223c (y \u2032 , \u03c6\u2032 ) if there exists\n\u03b7 : y \u2192 y \u2032 such that f (\u03b7) \u25e6 \u03c6 = \u03c6\u2032 . We call F the sheaf of sections of f : Y \u2192 X.\nThus we get an equivalence of categories between stacks which are faithful over X and sheaves\nover X.\nWe define the global section functor\n\u0393(X, * ) : (sheaves/X) \u2212\u2192 (sets)\nby \u0393(X, F ) = HomX (X, F ), the set of morphisms of sheaves over X from the trivial sheaf X (whose\nset of sections is always the one point set {\u2217}) to the sheaf F .\nRemark 3.2 If X is differentiable, X \u2192 X a presentation and X1 \u21c9 X the associated Lie\ngroupoid, then for any sheaf F on X we have a short exact sequence of sets\n\u0393(X, F )\n\n// F (X)\n\n//// F (X ) .\n1\n\nIn other words \u0393(X, F ) is the equalizer of the two restriction maps F (X) \u2192 F (X1 ). (Note that\nthere are two canonical morphisms X1 \u2192 X, so that F (X1 ) is ambiguous notation. But since both\nmorphisms X1 \u2192 X are canonically isomorphic, it is irrelevant which choice one makes for F (X1 ).)\nRestricting \u0393(X, * ) to the category of sheaves of abelian groups over X we get the functor\n\u0393(X, * ) : (abelian sheaves/X) \u2212\u2192 (abelian groups) .\nThis functor is left exact, and (abelian sheaves/X) has sufficiently many injectives, so we may\nderive this functor to get the functors\nH i (X, * ) : (abelian sheaves/X) \u2212\u2192 (abelian groups) .\nPassing to the derived category of complexes of abelian sheaves over X, we get the total derived\nfunctor\nR\u0393(X, * ) : D+ (X) \u2212\u2192 D+ (abelian groups) .\nFor a complex M \u2022 \u2208 D+ (X) of abelian sheaves on X, the homology groups of the complex\nR\u0393(X, M \u2022 ) are denoted by\n\u0001\nHi (X, M \u2022 ) = hi R\u0393(X, M \u2022 )\n\nand called the hypercohomology groups of X with values in M \u2022 .\nOf course, if M \u2022 \u2192 N \u2022 is a quasi-isomorphism of complexes of abelian sheaves over X, we get\ninduced isomorphisms Hi (X, M \u2022 ) \u2192 Hi (X, N \u2022 ) on hypercohomology.\n18\n\n\fDefinition 3.3 Let U be a manifold. A sheaf in the usual sense (defined only on open subsets of\nU ) is called a small sheaf on U . This is to distinguish such sheaves from sheaves over the stack\nover S obtained from U .\nLet X be a stack over S and F a sheaf over X. Let x be an object of X lying over the manifold\nU \u2208 S. The small sheaf on U , which maps the open subset V \u2282 U to F (x | V ) is called the\nsmall sheaf induced by F via x : U \u2192 X on U . Notation: Fx,U , or simply FU , if there is no\nrisk of confusion. Given a morphism \u03b8 : y \u2192 x in X lying over f : V \u2192 U in S, there is an\ninduced morphism of small sheaves over V called \u03b8\u2217 : f \u22121 Fx,U \u2212\u2192 Fy,V . This induced morphism\nis contravariantly functorial in \u03b8.\nLemma 3.4 If X is representable, represented by the manifold X, then for any big sheaf F over\nX, we have H i (X, F ) = H i (X, FX ), for all i.\nProof. This follows from the fact that for a manifold X = X the functor F 7\u2192 FX , which maps\na big sheaf to its associated small sheaf is exact. This property fails for stacks. \u0003\n\n3.2\n\nDifferential forms\n\nLet X be a differentiable stack. Define the sheaf \u03a9iX of differential forms of degree i on X as follows:\nfor an object x \u2208 X lying over U \u2208 S, we let \u03a9iX (x) = \u03a9i (U ) be the R-vector space of (R-valued)\ndifferentiable i-forms on U . For a morphism y \u2192 x in X lying over the C \u221e -map V \u2192 U , we\ndefine the restriction map \u03a9iX (x) \u2192 \u03a9iX (y) to be the pullback map \u03a9i (U ) \u2192 \u03a9i (V ). The sheaf\naxioms are easily verified. Note that the \u03a9iX are sheaves of R-vector spaces, i.e. they take values\nin (R-vector spaces) \u2282 (sets).\nThe sheaf \u03a90X is also called the structure sheaf of X, notation OX . It is isomorphic to the sheaf\nof sections of the projection X \u00d7 R \u2192 X.\nNote that none of the \u03a9iX , for i > 0, are isomorphic to sheaves of sections of any morphism of\ndifferentiable stacks Y \u2192 X.\nThe exterior derivative d : \u03a9i (U ) \u2192 \u03a9i+1 (U ), where U is any manifold, commutes with the\npullback of forms via any C \u221e -map V \u2192 U . Thus d induces a homomorphism of sheaves d : \u03a9iX \u2192\n2\n\u2022\n\u03a9i+1\nX , for all i \u2265 0. Clearly, d = 0, and so we have defined a complex \u03a9X of sheaves of R-vector\n\u2022\nspaces over X. We call \u03a9X the de Rham complex of X. Its hypercohomology is called the de Rham\ncohomology of X:\ni\nHDR\n(X) = Hi (X, \u03a9\u2022X ) .\nIf there is any danger of confusion (for example if X is a manifold), we refer to \u03a9\u2022X as the big de\nRham complex of X.\nLet RX denote the sheaf over X defined by\nRX (x) = {f : U \u2192 R | f is locally constant} ,\nfor any object x of X lying over U \u2208 S. The sheaf RX is in a natural way a subsheaf of the\ne denote the manifold with the same underlying set as R, but\nstructure sheaf \u03a90X . If we let R\nthe discrete differentiable structure, then we may identify RX with the sheaf of sections of the\ne \u2192 X.\nprojection X \u00d7 R\nThe usual Poincar\u00e9 Lemma proves that the big de Rham complex \u03a9\u2022X is a resolution of RX .\nThus we conclude that\ni\nHDR\n(X) = H i (X, RX ) ,\nfor all i.\n\n19\n\n\f3.3\n\nGroupoid cohomology\n\nLet X be a differentiable stack over S, and X \u2192 X an atlas for X. Define for all p \u2265 0\nXp = X \u00d7 X . . . \u00d7 X X .\n|\n{z\n}\np + 1 times\n\n(hence X0 = X). Since X \u2192 X is a representable submersion, all Xp are manifolds. Of course,\nX1 \u21c9 X0 is the Lie groupoid associated to the atlas X \u2192 X. Furthermore, we assume that\nX1 \u21c9 X0 is a Hausdorff and second countable Lie groupoid [28, 38].\nWe have p + 1 projection maps Xp \u2192 Xp\u22121 , giving rise to a diagram\n////\n////// X1\n...\n//// X0 .\n(8)\n//// X2\nIn fact more is true: X\u2022 is a simplicial manifold.\nEvery Xp has p + 1 canonical projections Xp \u2192 X. They are all canonically isomorphic to each\nother. Choose any one of them and call it \u03c0p : Xp \u2192 X. As usual, we identify \u03c0p with an object\nof X lying over Xp . Let F be a sheaf over X. We denote the set F (\u03c0p ) by F (Xp ). Let Fp denote\nthe small sheaf on Xp induced by F . Then we have F (Xp ) = \u0393(Xp , Fp ).\nDiagram (8) induces a diagram\n////\n\n////// F (X2 )\n\n//// F (X1 )\n\nF (X0 )\n\n////\n\n...\n\n(9)\n\nwhich can, in fact, be refined to a cosimplicial set.\nNow assume that F is a sheaf of abelian groups. Let \u2202 : F (Xp ) \u2192 F (Xp+1 ) be the alternating\nsum of the maps of Diagram (9). We obtain a complex of abelian groups\nF (X0 )\n\n\u2202\n\n\u2202\n\n// F (X1 )\n\n// F (X2 )\n\n\u2202\n\n// . . .\n\nThe homology groups of this complex are denoted by\n\u0001\n\u021e i (X\u2022 , F ) = hi F (X\u2022 )\nand called the \u010cech cohomology groups of F with respect to the covering X \u2192 X.\nNote that when F is the sheaf \u03a90 , \u021e i (X\u2022 , \u03a90 ) is also called groupoid cohomology with trivial\ncoefficients [28, 49].\nLemma 3.4 gives us the following lemma and proposition.\nLemma 3.5 There is an E1 spectral sequence\nH q (Xp , Fp ) =\u21d2 H p+q (X, F ) .\nProposition 3.6 Assume that for every p the induced small sheaf Fp is acyclic, i.e. satisfies\nH i (Xp , Fp ) = 0, for all i > 0. Then we have\n\u021e i (X\u2022 , F ) = H i (X, F ) .\nCorollary 3.7 We have, for all i, j \u2265 0,\n\u021e j (X\u2022 , \u03a9iX ) = H j (X, \u03a9i ) .\n\n20\n\n\fIn particular we see that the sheaf cohomology H j (X, \u03a90 ) is isomorphic to the groupoid cohomology.\nIn the sequel, when X\u2022 is a Lie groupoid, a sheaf over X\u2022 is defined to be a sheaf over the\nassociated stack X. Moreover, we define groupoid cohomology H i (X\u2022 , F ) to be equal to H i (X, F ).\nThis is in line with sheaf cohomology of simplicial manifolds.\nNow let M \u2022 be a complex of abelian sheaves over X, bounded below. Denote the differential\non M \u2022 by d. Let X \u2192 X be an atlas. For every i we get a \u010cech complex M i (X\u2022 ), with differential\n\u2202. Because d and \u2202 commute, we obtain, in fact, a double complex\n\u0001\n{M i (Xp )}i,p , d, \u2202 .\nOur convention will always be that \u2202 is the vertical differential, d the horizontal differential. The\nhomology groups of the associated total complex are denoted by\n\u0001\n\u021ei (X\u2022 , M \u2022 ) = hi tot M \u2022 (X\u2022 )\nand called the \u010cech hypercohomology groups of M \u2022 with respect to the covering X \u2192 X.\nProposition 3.8 Assume that for every i and every p the small sheaf Mpi induced by M i on Xp\nis acyclic. Then we have\n\u021ei (X\u2022 , M \u2022 ) = Hi (X, M \u2022 ) ,\nfor all i \u2265 0.\nCorollary 3.9 We have, for every atlas X \u2192 X,\n\u0001\ni\nHDR\n(X) = \u021ei (X\u2022 , \u03a9\u2022X ) = hi tot \u03a9\u2022 (X\u2022 ) .\n\ni\nIn the sequel, we also use HDR\n(X\u2022 ) to denote the above cohomology group. We also write\ni\nk\n\u03a9 (X\u2022 ) := \u2295i+j=k \u03a9 (Xj ), Z (X\u2022 ) and B k (X\u2022 ) to denote the spaces of k-cochains, k-cocycles and\nk-coboundaries of tot \u03a9\u2022 (X\u2022 ), respectively.\ni\nIn particular, if X is representable, represented by a manifold X, then HDR\n(X) coincides with\nthe i-th homology group of the usual de Rham complex of X. Thus our definition of de Rham\ncohomology gives the usual de Rham cohomology in the case of manifolds.\nk\n\nRemark The wedge product of differential forms turns \u03a9\u2022X into a sheaf of differential graded Ralgebras. From general principles it follows that R\u0393(X, \u03a9\u2022 ) is also a differential graded R-algebra.\nThus the hypercohomology H\u2217 (X, \u03a9\u2022 ) is a graded R-algebra.\nThis multiplicative structure can be described explicitly at the level of the double complex\n\u03a9\u2022 (X\u2022 ) associated to an atlas X \u2192 X of X.\nLet a \u2208 \u03a9k (Xp ) and b \u2208 \u03a9l (Xq ). Define a \u222a b \u2208 \u03a9k+l (Xp+q ) by\na \u222a b = (\u22121)kq p\u22171 a \u2227 p\u22172 b,\n\n(10)\n\nwhere p1 , p2 are the natural projections from Xp+q to Xp and Xq given by\n(x1 , * * * , xp , xp+1 , * * * , xp+q ) \u2192 (x1 , * * * , xp ) and (x1 , * * * , xp , xp+1 , * * * , xp+q ) \u2192 (xp+1 , * * * , xp+q )\nrespectively. One checks that for any a, b, c \u2208 \u03a9\u2022 (X\u2022 ) the following identities hold:\n(a \u222a b) \u222a c = a \u222a (b \u222a c)\n\n(11)\n\n\u03b4(a \u222a b) = \u03b4a \u222a b + (\u22121)|a| a \u222a \u03b4b,\n\n(12)\n\nwhere \u03b4 is the total differential of the double complex \u03a9\u2022 (X\u2022 ), and |a| denotes the total degree\nof a in the double complex \u03a9\u2022 (X\u2022 ). Thus (\u03a9\u2022 (X\u2022 ), \u222a, \u03b4) is a graded differential algebra. One can\nprove that the induced graded algebra structure on its cohomology groups coincides with the one\non H\u2217 (X, \u03a9\u2022 ).\n21\n\n\f4\n\nS 1 -bundles and S 1-gerbes\n\nIn this section we study connections on bundles and gerbes. We often restrict to the case of S 1 as\nstructure group.\n\n4.1\n\nS 1 -bundles\n\nIn this subsection, we study differential geometry, including characteristic classes, of S 1 -bundles\nover a differentiable stack in terms of Lie groupoids.\nLet X be a differentiable stack and X1 \u21c9 X0 a Lie groupoid presenting X. By an X\u2022 -space, we\nmean a manifold P0 \u2192 X0 with a left X\u2022 -action.\nDefinition 4.1 An S 1 -bundle over X is a 2-commutative diagram\nP \u00d7 S1\nproj.\n\n\u000f\u000f\nP\n\n\u03c3\n\n\u0007\u007f \u0006\u0006\u0006\u0006\n\u03c0\n\n// P\n\u03c0\n\n\u000f\u000f\n// X\n\nsuch that the pullback via U \u2192 X, for any submersion from a manifold U , defines an S 1 -bundle\nover U . (Note that this implies that P \u2192 X is a representable surjective submersion, and hence\nthat P | U is an S 1 -bundle for every U \u2192 X, submersive or not.)\nDefinition 4.2 Let X1 \u21c9 X0 be a Lie groupoid. A (right) S 1 -bundle over X1 \u21c9 X0 is a (right)\nS 1 -bundle P0 over X0 , together with a (left) action of X\u2022 on P0 , which respects the S 1 -action, i.e.\nwe have\n(\u03b3 * x) * t = \u03b3 * (x * t),\n(13)\nfor all t \u2208 S 1 and all compatible pairs (\u03b3, x) \u2208 \u0393 \u00d7t,X0 P0 .\nProposition 4.3 There is a canonical equivalence of categories\n(S 1 -bundles over X) \u2212\u2192 (S 1 -bundles over X1 \u21c9 X0 ) .\nProof. Let P \u2192 X be an S 1 -bundle. Denote the pullback of X0 via P \u2192 X by P0 . Thus P0 \u2192 X0\nis an S 1 -bundle by assumption. And P0 \u2192 P is a representable submersion. Let P1 \u21c9 P0 be the\nassociated groupoid. We get an induced morphism of groupoids P\u2022 \u2192 X\u2022 , which is cartesian, i.e.\nthe diagram\n// X1\nP1\n\u000f\u000f\n// X0\n\n\u000f\u000f\nP0\n\nis a pullback diagram of manifolds, where the vertical maps are source maps (or, equivalently,\ntarget maps). Therefore P1 \u2192 X1 is an S 1 -bundle and the vertical maps in the diagram above are\nS 1 -bundle maps. As a consequence, X1 acts on P0 and Eq. (13) is satisfied. The functor in the\nproposition is P 7\u2192 P0 .\nConversely, given an S 1 -bundle P0 over X1 \u21c9 X0 , let P1 = X1 \u00d7t,X0 P0 . Action and projection\nform a diagram P1 \u21c9 P0 , and it is easy to check that P1 \u21c9 P0 is naturally a groupoid (called the\ntransformation groupoid of the X1 -action). It is clear that P1 is an S 1 -bundle over X1 . Moreover,\n\n22\n\n\fthere is a natural morphism of groupoids \u03c0 from P1 \u21c9 P0 to X1 \u21c9 X0 , which respects the S 1 bundle structures P1 \u2192 X1 and P0 \u2192 X0 . Let P be the corresponding stack of P\u2022 -torsors. The\ngroupoid morphism P\u2022 \u2192 X\u2022 induces a morphism of stacks P \u2192 X, which is representable, as its\npullback to X0 equals P0 \u2192 X0 . It is also simple to see that for any morphism U \u2192 X, P | U is an\nS 1 -bundle. Therefore P is an S 1 -bundle over X. The backwards functor is given by P0 7\u2192 P. \u0003\nAs a consequence, S 1 -bundles over a given Lie groupoid X1 \u21c9 X0 are classified by H 1 (X\u2022 , S 1 ).\nThe exponential sequence Z \u2192 \u03a90 \u2192 S 1 induces a boundary map H 1 (X\u2022 , S 1 ) \u2192 H 2 (X\u2022 , Z); the\nimage of the class of an S 1 -bundle under this boundary map is called its Chern class.\nLet P0 \u2192 X0 be a principal S 1 -bundle over X1 \u21c9 X0 . Let \u03b8 \u2208 \u03a91 (P0 ) be a connection 1-form\non P0 . One checks that \u03b4\u03b8 \u2208 \u03a92DR (P\u2022 ) descends to \u03a92DR (X\u2022 ). In other words, there exist unique\n\u03c9 \u2208 \u03a91 (X1 ) and \u03a9 \u2208 \u03a92 (X0 ) such that \u03c0 \u2217 (\u03c9 + \u03a9) = \u03b4\u03b8.\n2\nProposition 4.4 The class [\u03c9 + \u03a9] \u2208 HDR\n(X\u2022 ) is independent of the choice of the connection\n2\n\u03b8 on P0 \u2192 X0 . Under the canonical homomorphism H 2 (X\u2022 , Z) \u2192 H 2 (X\u2022 , R) \u223c\n(X\u2022 ), the\n= HDR\nChern class of P maps to [\u03c9 + \u03a9].\n\nProof. The proof of independence of choice of connection is a direct calculation. See [26]. Thus\nwe concentrate on the second statement.\nLet X be the differentiable stack represented by X\u2022 and P the S 1 -bundle on X defined by P\u2022 .\nConsider on X the diagram of abelian sheaves\n0\n\n// Z\n\n// \u03a90\n\n0\n\n\u000f\u000f\n// R\n\n\u000f\u000f\n// \u03a90\n\nexp\n\n// S 1\n\n// 0\n\n// . . .\n(14)\n\nd log\nd\n\n\u000f\u000f\n// \u03a91\n\nd\n\n\u000f\u000f\n// \u03a92\n\n// . . .\n\nThe upper row is a resolution [\u03a90 \u2192 S 1 ] of Z, and the lower row is the de Rham resolution \u03a9\u2022 of\nR, and the whole diagram is a morphism of resolutions.\nIt follows that we have a commutative diagram\nH i (X, Z)\n\n\u223c\n\n// Hi (X, [\u03a90 \u2192 S 1 ])\n(15)\n\n\u000f\u000f\nH i (X, R)\n\n\u000f\u000f\n\n\u223c\n\n// H i (X)\nDR\n\nThis diagram gives us a way to calculate the image of the Chern class of P in de Rham cohomology.\nIn fact, consider now the \u010cech resolution (simplicial manifold) X\u2022 . For any complex of sheaves\nF \u2022 , we get an associated double complex of abelian groups F \u2022 (X\u2022 ) and canonical maps\n\u0001\nhi tot F \u2022 (X\u2022 ) \u2212\u2192 Hi (X, F \u2022 ) .\n(If all F q are acyclic on every Xp , then these are isomorphisms.)\nIf we assume that P0 admits a section \u03c3 over X0 , then \u03c1 = t\u2217 (\u03c3)\u2212 s\u2217 (\u03c3) \u2208 S 1 (X1 ) is a 2-cocycle\nin tot[\u03a90 \u2192 S 1 ](X\u2022 ) and the associated cohomology class [\u03c1] \u2208 H2 (X, [\u03a9 \u2192 S 1 ]) is the image of\nthe Chern class of P under the upper row of (15).\nThe morphism of complexes of sheaves (14) induces a morphism of double complexes of abelian\ngroups\n[\u03a90 \u2192 S 1 ](X\u2022 ) \u2212\u2192 \u03a9\u2022 (X \u2022 ) .\n\n23\n\n\fThe image of \u03c1 under this morphism is\n\u0001\nd log t\u2217 (\u03c3) \u2212 s\u2217 (\u03c3) \u2208 \u03a91 (X1 ) .\nNow, \u03c3 also induces a flat connection on the S 1 -bundle P0 \u2192 X0 (ignoring the groupoid action),\nhence a connection 1-form \u03b8 \u2208 \u03a91 (P0 ). We have \u03b4(\u03b8) = s\u2217 (\u03b8) \u2212 t\u2217 (\u03b8), and thus, all we need to\nprove is that\n\u0001\ns\u2217 (\u03b8) \u2212 t\u2217 (\u03b8) = \u03c0 \u2217 d log(t\u2217 \u03c3 \u2212 s\u2217 \u03c3) .\nThis can be easily checked.\nLet us now prove the general case, i.e. the case where P0 is not necessarily trivial over\n` X0 .\nChoose\nan\nopen\ncovering\n(U\n)\nof\nX\nsuch\nthat\neach\nU\nis\ncontractible.\nLet\nY\n=\nUi and\ni\n0\ni\n0\n`\nY1 = Ui \u00d7s X1 \u00d7t Uj . Then Y1 \u21c9 Y0 is a Lie groupoid Morita equivalent to X1 \u21c9 X0 . In fact,\nthe projection f : Y\u2022 \u2192 X\u2022 is a Morita morphism. Let Q\u2022 be the S 1 -bundle over Y\u2022 induced from\nP\u2022 . Since Q0 can be trivialized over Y0 , we choose [\u03c9 \u2032 + \u03a9\u2032 ] coming from a trivialization of Q0 , as\nabove (in which case \u03a9\u2032 = 0).\nChoose (\u03c9, \u03a9) for P\u2022 as in the statement of the proposition. By Morita invariance of de Rham\ncohomology of Lie groupoids, to prove that [\u03c9 + \u03a9] is the Chern class of P, it suffices to do this\n2\nfor f \u2217 [\u03c9 + \u03a9]. Thus we reduce to proving that f \u2217 [\u03c9 + \u03a9] = [\u03c9 \u2032 + \u03a9\u2032 ] \u2208 HDR\n(Y\u2022 ), which is just the\ninvariance under choice of connection. \u0003\n2\nNote that the class [\u03c9 + \u03a9] in the above proposition is an integer class in HDR\n(X\u2022 ), and \u03c9 + \u03a9\n2\nk\nan integer 2-cocycle in ZDR (X\u2022 ). In general a k-cocycle in ZDR (X\u2022 ) is said to be an integer kk\ncocycle if it defines an integer class in HDR\n(X\u2022 ), i.e. a class in the image of the homomorphism\nk\nk\nk\n\u223c\nH (X\u2022 , Z) \u2192 H (X\u2022 , R) = HDR (X\u2022 ).\n\nDefinition 4.5 A connection 1-form \u03b8 on P0 is called a pseudo-connection on P\u2022 . The de Rham\n2\ncocycle \u03c9 + \u03a9 \u2208 ZDR\n(X\u2022 ) such that \u03c0 \u2217 (\u03c9 + \u03a9) = \u03b4\u03b8 is called the pseudo-curvature of \u03b8.\nA pseudo-connection \u03b8 is a connection if \u2202\u03b8 = 0.\nA flat connection is a pseudo-connection \u03b8 whose pseudo-curvature vanishes.\nRemark Unlike in the manifold case, connections do not always exist. Thus connections are not\nnecessarily as useful to compute characteristic classes as in the manifold case. For instance, the\nuniversal S 1 -bundle \u2217 \u2192 BS 1 , which corresponds to S 1 \u2192 \u2217 considered as an S 1 -bundle over the\ngroupoid S 1 \u21c9 \u2217 (where the groupoid S 1 \u21c9 \u2217 acts on S 1 by left translation), does not admit any\nconnections. (Any connection on the universal bundle would necessarily be flat, and the existence\nof a flat connection on the universal bundle would imply that all connections on all bundles over\nall manifolds were flat.)\nA flat S 1 -bundle is an S 1 -bundle with a flat connection. It is simple to see that a flat S 1 -bundle\nover X\u2022 is equivalent to a R/Z-bundle over X\u2022 . Therefore, the equivalence classes of flat S 1 -bundles\nare classified by H 1 (X\u2022 , R/Z). The functor\n{flat S 1 -bundles over X\u2022 } \u2212\u2192 H 1 (X\u2022 , R/Z)\nis called the holonomy map. When X\u2022 is a manifold, this reduces to the usual holonomy map for\nflat bundles.\nWe are now ready to prove the following proposition, which generalizes the prequantization\ntheorem of Kostant and Weil [24, 48].\n\n24\n\n\f2\nProposition 4.6 Assume that \u021e 1 (X\u2022 , \u03a90 ) = 0. Let \u03c9 + \u03a9 \u2208 ZDR\n(X\u2022 ) be an integer 2-cocycle.\n1\nThen there exists an S -bundle P\u2022 over X1 \u21c9 X0 and a pseudo-connection \u03b8 whose pseudocurvature is \u03c9 + \u03a9.\nMoreover, the set of isomorphism classes of all such pairs (P\u2022 , \u03b8) is a simply transitive\nH 1 (X\u2022 , R/Z)-set. Here (P\u2022 , \u03b8) and (P\u2022\u2032 , \u03b8\u2032 ) are isomorphic if P1 and P1\u2032 are isomorphic as S 1 bundles over X1 \u21c9 X0 and under such an isomorphism \u03b8 is identified with \u03b8\u2032 .\n\nProof. Consider the exact sequence\n\u03c6\n\n\u2192 H 1 (X\u2022 , S 1 ) \u2192 H 2 (X\u2022 , Z) \u2192 H 2 (X\u2022 , \u03a90 ) \u2192\ninduced by the exponential sequence Z \u2192 \u03a90 \u2192 S 1 . The map H 2 (X\u2022 , Z) \u2192 H 2 (X\u2022 , \u03a90 ) factors\n2\nthrough H 2 (X\u2022 , R) \u223c\n(X\u2022 ), i.e. we have the following commutative diagram\n= HDR\n// H 2 (X\u2022 )\nH 2 (X\u2022 , Z)\nDR\nQQQ\nm\nm\nQQQ\nmm\nm\nQQQ\nm\nm\nQQQ\nmmm p\nQ((\nvvmmm\nH 2 (X\u2022 , \u03a90 ) \u223c\n= \u021e 2 (X\u2022 , \u03a90 )\nwhere p is the natural projection. It is clear that p([\u03c9 + \u03a9]) = 0. Thus there is an S 1 -bundle P\u2022\nover X1 \u21c9 X0 , whose Chern class equals [\u03c9 + \u03a9]. Let \u03b8\u2032 \u2208 \u03a91 (P0 ) be a pseudo-connection, and\n\u03b4\u03b8\u2032 = \u03c0 \u2217 (\u03c9 \u2032 + \u03a9\u2032 ). According to Proposition 4.4, \u03c9 + \u03a9 and \u03c9 \u2032 + \u03a9\u2032 are cohomologous. Hence,\n\u03c9 + \u03a9 \u2212 (\u03c9 \u2032 + \u03a9\u2032 ) = \u03b4(f + \u03b1) for some f \u2208 \u03a90 (X1 ) and \u03b1 \u2208 \u03a91 (X0 ). It thus follows that \u2202f = 0,\nwhich implies that f = \u2202g for g \u2208 \u03a90 (X0 ) since \u021e 1 (X\u2022 , \u03a90 ) = 0. Thus \u03b4f = \u03b4\u2202g = \u03b4dg. Let\n\u03b8 = \u03b8\u2032 + \u03c0 \u2217 (\u03b1 + dg) \u2208 \u03a91 (P0 ). It is clear that \u03b8 is the desired pseudo-connection.\nIf (P, \u03b8) and (P \u2032 , \u03b8\u2032 ) are two such S 1 -bundles, then (P \u2297P \u2032 , pr\u22171 \u03b8 +pr\u22172 \u03b8\u2032 ) is a flat bundle, whose\nisomorphism class is classified by H 1 (X\u2022 , R/Z). Here P \u2297 P \u2032 denotes the S 1 -bundle (P \u00d7X0 P \u2032 )/S 1 ,\nand pr1 : P \u2297 P \u2032 \u2192 P and pr2 : P \u2297 P \u2032 \u2192 P \u2032 are projections. This completes the proof. \u0003\nRemark The condition \u021e 1 (X\u2022 , \u03a90 ) = 0 always holds for a proper Lie groupoid X1 \u21c9 X0 according to Crainic [10]. In particular, when X1 \u21c9 X0 is a manifold M \u21c9 M (which is clearly a\n2\nproper Lie groupoid), an integer 2-cocycle in ZDR\n(X\u2022 ) corresponds to an integer closed two-form\non M . Thus Proposition 4.6 reduces to the usual prequantization theorem of Kostant and Weil\n[24, 48].\n\n4.2\n\nS 1 -gerbes and S 1 -central extensions\n\nLet us first recall the definition of gerbes. Let X be the differentiable stack associated to the Lie\ngroupoid X1 \u21c9 X0 . Thus X is the stack of X\u2022 -torsors.\nDefinition 4.7 An S-stack R, endowed with a morphism R \u2192 X is called a gerbe over X, if\nboth R \u2192 X and R \u2192 R \u00d7X R are epimorphisms.\nRemark Under the correspondence between S-stacks equipped with morphisms to X and Xstacks, the gerbes over X, according to our definition, correspond to gerbes over the site X in the\nusual sense, i.e. in the sense of Giraud [19], Chapter III.2.\nBS 1 \u00d7 X \u2192 X is an example of a gerbe over X. We will study gerbes that locally look like this\nexample.\nThe groupoid of automorphisms of BS 1 is equal to the transformation groupoid of S 1 on\nAut S 1 \u223c\n= Z2 . This action is by \"inner automorphisms\" and hence trivial, as S 1 is abelian. The\n25\n\n\fgroup of automorphism classes of BS 1 is therefore equal to Z2 . The sheaf of automorphism classes\nof BS 1 \u00d7 X over X, which takes U/X to the 2-isomorphism classes of diagrams\n\u223c //\nBS 1 \u00d7 UN\nBS 1 \u00d7 U\nNNN \u0003\u000e\u000e\u000e\u000e\nNNN\nNNN\nNN&& \u000f\u000f\nU\n\nis therefore equal to Z2 \u00d7 X \u2192 X. So if the gerbe R \u2192 X is locally isomorphic to BS 1 \u00d7 X, then\nthe sheaf of automorphism classes of R over X, which maps U/X to the 2-isomorphism classes of\ndiagrams\n\u223c //\nR|U\nR|U\nFF \u0006\u0006\u0006\nFF \u007f\u0007 \u0006\nFF\nFF\nF\"\" \u000f\u000f\nU\nis a 2-sheeted covering Band(R) \u2192 X, called the band of R.\nDefinition 4.8 An S 1 -gerbe over X is a gerbe R \u2192 X which is locally isomorphic to BS 1 \u00d7 X\nand is endowed with a trivialization of its band (the 2-sheeted covering Band(R) \u2192 X).\nThe following is a well-known theorem of Giraud [19].\nTheorem 4.9 (Giraud)\nIsomorphism classes of S 1 -gerbes over X are in one-to-one correspon\u0001\n2\n1\ndence with H X, S .\nNow we recall S 1 -central extensions of Lie groupoids [49].\nDefinition 4.10 Let X1 \u21c9 X0 be a Lie groupoid. An S 1 -central extension of X1 \u21c9 X0 consists\nof\n1. a Lie groupoid R1 \u21c9 X0 , together with a morphism of Lie groupoids (\u03c0, id) : [R1 \u21c9 X0 ] \u2192\n[X1 \u21c9 X0 ],\n2. a left S 1 -action on R1 , making \u03c0 : R1 \u2192 X1 a (left) principal S 1 -bundle.\nThese two structures are compatible in the sense that (s * x)(t * y) = st * (xy), for all s, t \u2208 S 1 and\n(x, y) \u2208 R1 \u00d7X0 R1 .\nThe proposition below gives an equivalent definition.\nProposition 4.11 Let X1 \u21c9 X0 be a Lie groupoid. A Lie groupoid R1 \u21c9 X0 is an S 1 -central\nextension of X1 \u21c9 X0 if and only if it is endowed with \u03c6 and \u03c0 forming an exact sequences of\ngroupoid morphisms\n\u03c6\n\u03c0\n1 \u2192 X0 \u00d7 S 1 \u2192 R1 \u2192 X1 \u2192 1\nover the identities on the unit spaces, and the image of \u03c6 lies in the center of R1 .\nProof. The proof is straightforward and is left to the reader. \u0003\nThe following result describes the precise connection between S 1 -gerbes and S 1 -central extensions.\n\n26\n\n\fProposition 4.12 Let X1 \u21c9 X0 be a Lie groupoid and X its corresponding differentiable stack of\nX\u2022 -torsors. There is a one-to-one correspondence between isomorphism classes of S 1 -central extensions of X1 \u21c9 X0 and isomorphism classes of S 1 -gerbes R over X endowed with a trivialization\nof the restriction of R to X0 .\nProof. Given an S 1 -central extension R1 \u21c9 X0 of X1 \u21c9 X0 , let R be the stack of R\u2022 -torsors and\nX the stack of X\u2022 -torsors. Then the groupoid morphism \u03c0 induces a morphism of stacks R \u2192 X,\nvia which we think of R as a stack over X.\n\u03c6\nThe groupoid morphism S 1 \u00d7 X0 \u2192 R1 induces the morphism of stacks BS 1 \u00d7 X0 \u2192 R.\nConsider the diagram\n// X0\nR1\n(1)\n\n\u000f\u000f\nX1\n\n\u000f\u000f\n// BS 1 \u00d7 X0\n(2)\n\n\u000f\u000f\nX0\n\n// X0\n(3)\n\n\u000f\u000f\n// R\n\n\u000f\u000f\n// X\n\nThe square (1) is cartesian, because R1 |X1 is an S 1 -torsor. The combination of squares (1) and\n(2) is cartesian by definition of R. Hence, by descent, (2) is cartesian. The combination of squares\n(2) and (3) is cartesian by definition of X, and so, again by descent, square (3) is cartesian. This\nproves that R restricted to X0 is isomorphic to BS 1 \u00d7 X0 , and in particular, R \u2192 X satisfies the\nfirst condition in the definition of S 1 -gerbe.\nThe band of R \u2192 X is an Out(S 1 )-torsor, trivialized by X0 , so the band is given by a map\nX1 \u2192 Out(S 1 ). It is given as follows: x 7\u2192 [Adxe], \u2200x \u2208 X1 , where x\ne \u2208 R1 is any point satisfying\n\u03c0(e\nx) = x and Adxey = x\neye\nx\u22121 . Here y \u2208 ker \u03c0x \u223c\n= S 1 . Then because ker \u03c0 is central in R1 , the map\nX1 \u2192 Out(S 1 ) is trivial, showing that the band of R is trivial.\nConversely, given such a gerbe R, by taking the section X0 \u2192 R | X0 , one obtains a commutative\ndiagram of stacks:\n// R\n(16)\nX0 B\nBB\nBB\nBB\nB \u000f\u000f\nX.\nSo X0 \u2192 R is a presentation. Let R1 = X0 \u00d7R X0 . Thus we have a Lie groupoid morphism\n(\u03c0, id) : [R1 \u21c9 X0 ] \u2192 [X1 \u21c9 X0 ]. Moreover the kernel of \u03c0 is isomorphic to X0 \u00d7 S 1 as a bundle\nof groups, by assumption. Since Band R is trivial, it follows that the conjugation action of R1 on\nker \u03c0 must be trivial. Therefore ker \u03c0 lies in the center of R1 . This concludes the proof. \u0003\n\n4.3\n\nMorita equivalence of S 1 -central extensions\n\nWe now introduce the definition of Morita equivalence of S 1 -central extensions.\nDefinition 4.13 We say that two S 1 -central extensions R1 \u2192 X1 \u21c9 X0 and R1\u2032 \u2192 X1\u2032 \u21c9 X0\u2032 are\nMorita equivalent if there exists an S 1 -equivariant R\u2022 -R\u2022\u2032 -bitorsor Z, by which we mean that Z is\nan R\u2022 -R\u2022\u2032 -bitorsor endowed with an S 1 -action such that\n(\u03bbr) * z * r\u2032 = r * (\u03bbz) * r\u2032 = r * z * (\u03bbr\u2032 )\nwhenever (\u03bb, r, r\u2032 , z) \u2208 S 1 \u00d7 R \u00d7 R\u2032 \u00d7 Z and the products make sense.\n\n27\n\n\fThe following result is immediate.\nLemma 4.14 Let R1 \u2192 X1 \u21c9 X0 and R1\u2032 \u2192 X1\u2032 \u21c9 X0\u2032 be Morita equivalent S 1 -central extensions,\nand Z an S 1 -equivariant R\u2022 -R\u2022\u2032 -bitorsor. Then the S 1 -action on Z must be free and Z/S 1 is a\nX\u2022 -X\u2022\u2032 -bitorsor. As a consequence, X\u2022 and X\u2022\u2032 are Morita equivalent.\nProposition 4.15 Let R1 \u2192 X1 \u21c9 X0 and R1\u2032 \u2192 X1\u2032 \u21c9 X0\u2032 be S 1 -central extensions of Lie\ngroupoids. Let R, R\u2032 , X, and X\u2032 be their associated stacks. Then the following are equivalent:\n(i) R\u2022 and R\u2022\u2032 are Morita equivalent S 1 -central extensions.\n(ii) there exists an S 1 -central extension R1\u2032\u2032 \u2192 X1\u2032\u2032 \u21c9 X0\u2032\u2032 and S 1 -equivariant Morita morphisms\n\u2032\u2032\nR\u2022 \u2192 R\u2022\u2032 and R\u2022\u2032\u2032 \u2192 R\u2022 .\n(iii) X \u223c\n= X\u2032 , over which R \u223c\n= R\u2032 as S 1 -gerbes.\nProof. To prove that (i) implies (ii), choose an S 1 -equivariant R\u2022 -R\u2022\u2032 -bitorsor Z. Take R1\u2032\u2032 =\nR1 \u00d7X0 Z \u00d7X0\u2032 R1\u2032 and X1\u2032\u2032 = X1 \u00d7X0 X \u00d7X0\u2032 X1\u2032 , where X = Z/S 1 . Then it is simple to see that\nR1\u2032\u2032 \u2192 X1\u2032\u2032 \u21c9 X is the desired S 1 -central extension.\nFor (ii) to imply (iii), assuming that R1\u2032\u2032 \u2192 X1\u2032\u2032 \u21c9 X0\u2032\u2032 is such an S 1 -central extension, using\nTheorem 2.26, one has the commutative diagram\n// R ,\n\nR\u2032\n\u000f\u000f\nX\u2032\n\n\u0004| \u0001\u0001\u0001\u0001\n\n\u000f\u000f\n// X\n\nwhere the horizontal maps are isomorphism of stacks. (iii) thus follows.\nFinally, we prove that (iii) implies (i). By identifying X with X\u2032 and R with R\u2032 , we may\nthink R1 \u2192 X1 \u21c9 X0 and R1\u2032 \u2192 X1\u2032 \u21c9 X0\u2032 as the S 1 -central extensions corresponding to the\npresentations X0 \u2192 R and X0\u2032 \u2192 R respectively. Take Z = X0 \u00d7R X0\u2032 . Then Z is an S 1 equivariant R\u2022 -R\u2022\u2032 -bitorsor. \u0003\nWe end this subsection by the following exact sequences:\nProposition 4.16 There is a natural exact sequence\n\u03c4\n\n\u03c4\n\n2\n1\nH 1 (X0 , S 1 ) \u2212\u2192\nH 1 (X\u2022 , S 1 ) \u2212\u2192\n\n\u03c4\n\n\u03c4\n\n4\n3\nH 2 (X0 , S 1 ) .\nH 2 (X\u2022 , S 1 ) \u2212\u2192\n{S 1 -central extensions of X1 \u21c9 X0 } \u2212\u2192\n\nProof. Let X be the stack of X\u2022 -torsors. Note that \u03c41 , * * * , \u03c44 can be geometrically described as\nfollows:\n1. \u03c41 is the map sending an S 1 -bundle L \u2192 X to its restriction to X0 , i.e. to L \u2192 X0 by\nforgetting the groupoid X1 \u21c9 X0 -action.\n2. \u03c42 sends an S 1 -bundle L \u2192 X0 to the S 1 -central extension (s\u2217 L \u00d7X1 t\u2217 L\u22121 )/S 1 \u2192 X1 \u21c9 X0 .\nIn stack language, \u03c42 maps the S 1 -bundle L to the stack of descent data (gluing data) for L\nover the groupoid X\u2022 .\n3. \u03c43 sends an S 1 -central extension to the class in H 2 (X\u2022 , S 1 ) of its corresponding gerbe.\n4. \u03c44 is the pull back map under the map X0 \u2192 X.\n\n28\n\n\fLet \u03c6 : L \u2192 X0 be an S 1 -bundle over X1 \u21c9 X0 . Define a map X1 \u00d7 S 1 \u2192 (s\u2217 L \u00d7X1 t\u2217 L\u0304)/S 1\nby (r, \u03bb) \u2192 [((rl)\u03bb\u22121 , l)], where l \u2208 L is any point satisfying \u03c6(l) = t(r). One checks that this is\nan isomorphism of S 1 -central extensions. Conversely, if \u03c6 : L \u2192 X0 is an S 1 -bundle over X0 such\nthat (s\u2217 L \u00d7X1 t\u2217 L\u0304)/S 1 is a trivial central extension, then (s\u2217 L \u00d7X1 t\u2217 L\u0304)/S 1 \u2192 X1 admits a section\n\u03c3 which is a groupoid homomorphism. Then the equation \u03c3(r) = [(r * l, l)], where l \u2208 L such that\n\u03c6(l) = t(r), defines a groupoid action of X1 \u21c9 X0 on L. This shows that the sequence is exact at\nH 1 (X0 , S 1 ).\nLet R be the S 1 -central extension (s\u2217 L \u00d7X1 t\u2217 L\u0304)/S 1 , where L \u2192 X0 is an S 1 -bundle. One\nchecks that the pullback groupoid R[L] \u21c9 L is a trivial extension of X1 [L] \u21c9 L, which means\nthat R defines the zero class in H 2 (X\u2022 , S 1 ). Conversely, if R is an S 1 -central extension defining\nthe zero class in H 2 (X\u2022 , S 1 ), then R is Morita equivariant to the trivial central extension X1 \u00d7\n\u03c1\nS 1 \u21c9 X0 via an S 1 -equivariant bimodule Y : then L = Y /X1 \u2192 X0 is an S 1 -bundle. One\n\u2217\n1\n\u2217\nchecks easily that R is isomorphic to (s L \u00d7X1 t L\u0304)/S . This shows that the sequence is exact at\n{S 1 -central extensions of X1 \u21c9 X0 }.\nFinally the exactness at H 2 (X\u2022 , S 1 ) follows from Theorem 4.9 and Proposition 4.12. \u0003\n\n4.4\n\nDixmier-Douady classes\n\nLet R be an S 1 -central extension of X1 \u21c9 X0 . Write the underlying Lie groupoid of R as R1 \u21c9 R0 .\nCall the structure morphism \u03c0 : R\u2022 \u2192 X\u2022 . Since R1 \u21c9 R0 defines an S 1 -gerbe over X, it\ndefines a class in H 2 (X\u2022 , S 1 ) according to Theorem 4.9. The exponential sequence gives rise to a\nhomomorphism H 2 (X\u2022 , S 1 ) \u2192 H 3 (X\u2022 , Z). The image of [R] \u2208 H 2 (X\u2022 , S 1 ) in H 3 (X\u2022 , Z) is called\nthe Dixmier-Douady class of R and denoted by DD(R). The Dixmier-Douady class behaves well\nwith respect to pullbacks and the tensor operation.\nLet f : Y\u2022 \u2192 X\u2022 be a Lie groupoid homomorphism. Then the pullback S 1 -bundle f \u2217 R1 \u2192 Y1\nis an S 1 -central extension over Y1 \u21c9 Y0 , called the pullback central extension.\nAssume that R\u2032 and R\u2032\u2032 are two S 1 -central extensions of X1 \u21c9 X0 . Let R1 = (R\u2032 \u00d7X1 R\u2032\u2032 )/S 1 ,\nwhere S 1 acts on R\u2032 \u00d7X1 R\u2032\u2032 by t * (r1 , r2 ) = (t * r1 , t\u22121 * r2 ), \u2200t \u2208 S 1 , (r1 , r2 ) \u2208 R\u2032 \u00d7X1 R\u2032\u2032 . It is\nclear that R1 with the natural projection to X1 is still an S 1 -principal bundle, where the S 1 -action\nis given by t * [(r1 , r2 )] = [(t * r1 , r2 )]. The groupoid structures on R\u2032 and R\u2032\u2032 induce a groupoid\nstructure on R1 in a natural way, which in fact makes R1 into a groupoid S 1 -central extension,\ncalled the tensor product of R\u2032 and R\u2032\u2032 and is denoted, by R\u2032 \u2297 R\u2032\u2032 .\nThe following proposition can be easily verified.\nProposition 4.17\n\n1. DD(f \u2217 R) = f \u2217 DD(R); and\n\n2. DD(R\u2032 \u2297 R\u2032\u2032 ) = DD(R\u2032 ) + DD(R\u2032\u2032 ).\nDefinition 4.18 Let \u03b8 \u2208 \u03a91 (R1 ) be a connection 1-form for the S 1 -principal bundle R1 \u2192 X1 ,\nand B \u2208 \u03a92 (R0 ) be any 2-form. Any such pair (\u03b8, B) is called a pseudo-connection for the central\nextension R.\n3\n3\nIt is simple to check that \u03b4(\u03b8 + B) \u2208 ZDR\n(R\u2022 ) descends to ZDR\n(X\u2022 ), i.e. there exist unique\n1\n2\n3\n\u03b7 \u2208 \u03a9 (X2 ), \u03c9 \u2208 \u03a9 (X1 ) and \u03a9 \u2208 \u03a9 (X0 ) such that\n\n\u03b4(\u03b8 + B) = \u03c0 \u2217 (\u03b7 + \u03c9 + \u03a9).\nThen \u03b7 + \u03c9 + \u03a9 is called the pseudo-curvature of the pseudo-connection \u03b8 + B.\nWe will now show that pseudo-connections can be used to calculate Dixmier-Douady classes.\n\n29\n\n\f3\nTheorem 4.19 The class [\u03b7 + \u03c9 + \u03a9] \u2208 HDR\n(X\u2022 ) is independent of the choice of the pseudo3\nconnection \u03b8 + B. Under the canonical homomorphism H 3 (X\u2022 , Z) \u2192 HDR\n(X\u2022 ), the DixmierDouady class of R maps to [\u03b7 + \u03c9 + \u03a9].\n3\nProof. One checks directly that the class [\u03b7 + \u03c9 + \u03a9] \u2208 HDR\n(X\u2022 ) is independent of the choice of\nthe pseudo-connection \u03b8 + B.\nWe prove the second part of the theorem. Let X be the stack given by X1 \u21c9 X0 and R \u2192 X\nthe S 1 -gerbe over X defined by R1 \u21c9 R0 .\nWe will construct a hypercovering in the site X. Note that R\u2022 is a simplicial object in X. The\nhypercovering we shall use is the 1-coskeleton of R\u2022 :\n\nY\u2022 = coskX R\u2022\nThis is a hypercovering because R1 \u2192 R0 \u00d7X R0 = X1 and R0 \u2192 X are surjective submersions.\n(For the theory of hypercoverings, see [1, 2, 12]. In the generality we need them, the necessary\nresults are proved in [1].)\nIntuitively, Y\u2022 is the set of all (1-skeleta of) simplices in R\u2022 , whose image in X\u2022 commutes.\nExplicitly, Yp is the fibered product\nYp\n\nY\n\n//\n\nR1\n\n0\u2264i<j\u2264p\n\n\u000f\u000f\nXp\n//\n\nY\n\n\u000f\u000f\nX1\n\n0\u2264i<j\u2264p\n\nHere the horizontal arrow at the bottom\nis the map which sends Xp to the edges of a commutative\n\u0001\np-simplex, i.e. the product of p+1\nmaps\nfij : Xp \u2192 X1 , 0 \u2264 i < j \u2264 p\n2\n(x1 , x2 , * * * , xp ) \u2192 xi+1 * * * xj .\nSince Y\u2022 is a hypercovering of X, we have a canonical homomorphism\nf : \u021e 2 (Y\u2022 , S 1 ) \u2212\u2192 H 2 (X, S 1 ).\n\n(17)\n\nSince \u03a9\u2022 consists of soft sheaves, we also have an isomorphism\n\u223c\n\u021e 2 (Y\u2022 , \u03a9\u2022 ) \u2212\u2192 H 2 (X, \u03a9\u2022 ).\n\n(18)\n\nWe will see that the class of R in H 2 (X, S 1 ) is in the image of the homomorphism (17).\nIn fact,\nY2 = {(\u03b1, \u03b2, \u03b3) \u2208 R1 \u00d7 R1 \u00d7 R1 | \u03c0(\u03b1)\u03c0(\u03b3) = \u03c0(\u03b2)} ,\nso we have a C \u221e -map\nc : Y2 \u2212\u2192 S 1\n(\u03b1, \u03b2, \u03b3) 7\u2212\u2192 (\u03b1\u03b3)\u03b2 \u22121 .\nRecall that a composition in R1 makes sense if and only if the composition of its image in X1\nmakes sense and that we have ker \u03c0 = S 1 . One checks that the coboundary of c vanishes, and so c\n30\n\n\fdefines a \u010cech cohomology class [c] \u2208 \u021e 2 (Y\u2022 , S 1 ). It is simple to see that f ([c]) is the cohomology\nclass of R.\nNow consider the diagram\nf\n\n\u021e 2 (Y\u2022 , S 1 )\n\u000f\u000f\n\u0001\n\u021e 3 Y\u2022 , [\u03a90 \u2192 S 1 ]\n\n// H 2 (X, S 1 )\nPPP\nPPP\u2202\nPPP\nPP\n\u000f\u000f\n\u0001 \u223c P(( 3\n3\n0\n1\n// H X, [\u03a9 \u2192 S ] oo\nH (X, Z)\n\nd log\n\n\u021e 3 (X\u2022 , \u03a9\u2022 )\n\n\u223c\n\u2217\n\n\u03c1\n\nd log\n\n\u000f\u000f\n\n\u000f\u000f\n\n\u223c\n\n// \u021e 3 (Y\u2022 , \u03a9\u2022 )\n\n// H 3 (X) oo\nDR\n\n\u223c\n\n\u000f\u000f\nH 3 (X, R)\n\nwhich commutes. The two vertical arrows in the first row are induced by the trivial map\nS 1 \u2212\u2192 [\u03a90 \u2192 S 1 ][1] ,\ni.e. the map\n0\n\n// S 1\n\n\u000f\u000f\n\u03a90\n\n\u000f\u000f\n// S 1\n\nConsidering this diagram, we see that we need to prove that\nd log([c]) = \u03c1\u2217 ([\u03b7 + \u03c9 + \u03a9]) \u2208 \u021e 3 (Y\u2022 , \u03a9\u2022 ) ,\nwhere we have denoted the canonical projection by \u03c1 : Y\u2022 \u2192 X\u2022 and its induced map on \u010cech\ncohomology by \u03c1\u2217\u0001. We have also committed the abuse of denoting [c] and its induced class in\n\u021e 3 Y\u2022 , [\u03a90 \u2192 S 1 ] by the same letter.\nFirst we may assume that B = 0 (thus \u03a9 = 0) for simplicity since the class [\u03b7 + \u03c9 + \u03a9] is\nindependent of the pseudo-connection. Thus we have\n\u2202\u03b8 = \u03c0 \u2217 \u03b7,\n\nd\u03b8 = \u2212\u03c0 \u2217 \u03c9.\n\nWe have the following commutative diagram:\np\n\n// R2\nY2 8\n88\n\u0006\n88\n\u0006\u0006\n88 \u0006\u0006\u0006\n\u001b\u001b \u0002\u0002\u0006\nX2\nwhere p : Y2 \u2192 R2 is the natural projection. We have\n\u03c1\u2217 \u03b7 = p\u2217 \u03c0 \u2217 \u03b7 = p\u2217 \u2202\u03b8 = \u03b1\u2217 \u03b8 \u2212 (\u03b1\u03b3)\u2217 \u03b8 + \u03b3 \u2217 \u03b8,\nwhere, by abuse of notation, we denote by \u03b1, \u03b3 and \u03b1\u03b3 the maps Y2 \u2192 Y1 sending (\u03b1, \u03b2, \u03b3) to\n\u03b1, \u03b3 and \u03b1\u03b3 \u2208 Y1 , respectively.\nSince \u03c1 = \u03c0 on Y1 , we have \u03c1\u2217 \u03c9 = \u03c0 \u2217 \u03c9 = \u2212d\u03b8 \u2208 \u03a92 (Y1 ), which is cohomologous to \u2212\u2202Y\u2022 \u03b8 in\n3\n\u021e (Y\u2022 , \u03a9\u2022 ). The latter is equal to \u2212(\u03b1\u2217 \u03b8 \u2212 \u03b2 \u2217 \u03b8 + \u03b3 \u2217 \u03b8) \u2208 \u03a91 (Y2 ). Thus it follows that\n\u03c1\u2217 ([\u03b7 + \u03c9]) = \u03b2 \u2217 [\u03b8 \u2212 (\u03b1\u03b3)\u2217 \u03b8].\n31\n\n\fNow it suffices to prove that\nd log([c]) = \u03b2 \u2217 \u03b8 \u2212 (\u03b1\u03b3)\u2217 \u03b8 \u2208 \u03a91 (Y2 ).\nLet \u03c8 : R2 \u00d7 S 1 \u2192 Y2 be the diffeomorphism given by (\u03b1, \u03b3, t) \u2192 (\u03b1, t(\u03b1\u03b3), \u03b3). Then \u03c8 \u2217 (d log([c]))\nis the Maurer-Cartan form dt on S 1 , while \u03b2 \u2217 \u03b8 \u2212 (\u03b1\u03b3)\u2217 \u03b8 is easily seen to be equal to dt as well.\nThis completes the proof. \u0003\n\n4.5\n\nPrequantization\n\nDefinition 4.20 Given an S 1 -central extension R1 \u2192 X1 \u21c9 X0 ,\n(i) a connection 1-form \u03b8 \u2208 \u03a91 (R1 ) for the S 1 -principal bundle R1 \u2192 X1 , such that \u2202\u03b8 = 0 is\na connection;\n(ii) Given \u03b8, a 2-form B \u2208 \u03a92 (X0 ), such that d\u03b8 = \u2202B is a curving;\n(iii) and given (\u03b8, B), the 3-form \u03a9 = dB \u2208 H 0 (X\u2022 , \u03a93 ) \u2282 \u03a93 (X0 ) is called the 3-curvature of\n(\u03b8, B);\n(iv) If \u03a9 = 0, then R1 \u2192 X1 \u21c9 X0 together with (\u03b8, B) is called a flat S 1 -central extension of\nX1 \u21c9 X0 . Note that the flat central extensions form an abelian group.\nIn other words, a flat S 1 -central extension of X1 \u21c9 X0 is an S 1 -central extension with a\npseudo-connection whose pseudo-curvature vanishes. The following proposition is immediate.\nProposition 4.21 Let R1 \u2192 X1 \u21c9 X0 be an S 1 -central extension. Then\n(i) H 2 (X\u2022 , \u03a91 ) contains the obstruction to the existence of a connection;\n(ii) if we assume the existence of a connection, H 1 (X\u2022 , \u03a92 ) contains the obstruction to the\nexistence of a curving.\nAccording to Theorem 4.19, we have the following\nProposition 4.22 If an S 1 -central extension R1 \u2192 X1 \u21c9 X0 admits a connection and a curving\n3\nwith 3-curvature \u03a9, then [\u03a9] \u2208 HDR\n(X\u2022 ) is the image of its Dixmier-Douady class under the\n3\n3\ncanonical homomorphism H (X\u2022 , Z) \u2192 HDR\n(X\u2022 ).\nRemark Given a manifold M , and a surjective submersion X0 \u2192 M , X1 (= X0 \u00d7M X0 ) \u21c9 X0\nis a Lie groupoid Morita equivalent to M . An S 1 -central extension R1 \u2192 X1 \u21c9 X0 defines a\nbundle gerbe over M in the terminology of Murray [32, 33]. Since \u03a91 and \u03a92 are soft sheaves over\nM , we have H 2 (X\u2022 , \u03a91 ) \u223c\n= H 2 (M, \u03a91 ) = 0 and H 1 (X\u2022 , \u03a92 ) \u223c\n= H 1 (M, \u03a92 ) = 0. As a consequence,\nconnections and curvings always exist for bundle gerbes. This result was due to Murray [32].\nMoreover, in this case, the 3-curvature \u03a9 \u2208 \u03a93 (X0 ) descends to a closed 3-form on M since\n\u2202\u03a9 = 0.\n`\n`\nIn particular, for an open cover {Ui } of M , one can take X0 = Ui . Then X1 \u223c\n= Uij . An\nS 1 -central extension R1 \u2192 X1 \u21c9 X0 corresponds in this case to a family of line bundles Lij \u2192 Uij\nsatisfying all the axioms of bundle gerbes as in [21]. This is the case of Chatterjee-Hitchin bundle\ngerbes [8, 21]\nProposition 4.23 Assume that H 2 (X0 , R) = 0. There is a natural exact sequence\nH 1 (X\u2022 , R/Z) \u2212\u2192 H 1 (X0 , R/Z) \u2212\u2192\n{flat S 1 -central extensions of X1 \u21c9 X0 } \u2212\u2192 H 2 (X\u2022 , R/Z) \u2212\u2192 H 2 (X0 , R/Z) .\nThe proof is similar to that of Proposition 4.16 via replacing S 1 by R/Z, and using the following\n32\n\n\fLemma 4.24 Let X1 \u21c9 X0 be a Lie groupoid. Assume that H 2 (X0 , R) = 0. Then there is a\ncanonical one-to-one correspondence between flat S 1 -central extensions of X1 \u21c9 X0 and R/Zcentral extensions of X1 \u21c9 X0 .\nProof. Let (R1 \u2192 X1 \u21c9 X0 , \u03b8, B) be a flat S 1 -central extension. Then, in particular, dB = 0.\nSince H 2 (X0 , R) = 0, we can write B = dA, where A \u2208 \u03a91 (X0 ). Set \u03b8\u2032 = \u03b8 + \u2202A \u2208 \u03a91 (R1 ).\nThen \u03b8\u2032 is again a connection 1-form for the principal S 1 -bundle R1 \u2192 X1 , which satisfies d\u03b8\u2032 = 0\nand \u2202\u03b8\u2032 = 0. The condition d\u03b8\u2032 = 0 implies that R1 \u2192 X1 is flat, and can therefore equivalently\nbe considered as an R/Z-bundle. Moreover, \u2202\u03b8\u2032 = 0 implies that under this new differentiable\nstructure, R1 \u2192 X1 is still a smooth groupoid homomorphism, and therefore an R/Z-central\nextension.\nConversely, given an R/Z-central extension R1 \u2192 X1 \u21c9 X0 , then R1 \u2192 X1 is a flat S 1 -bundle.\nLet \u03b8 \u2208 \u03a91 (R1 ) be a flat connection one-form, i.e. d\u03b8 = 0. Locally, if we write R1 \u223c\n= X1 \u00d7 R/Z,\nthen we may choose \u03b8 = dt where t is the coordinate on R/Z. Moreover locally the groupoid\nmultiplication on R1 is written as\n(x, t) * (y, s) = (x * y, t + s + \u03c9(x, y)), \u2200(x, y) \u2208 X2 , t, s \u2208 R/Z.\nIt is easy to see that \u03c9(x, y) must be locally constant. Therefore it follows that \u2202\u03b8 = 0. Hence\nR1 \u2192 X1 \u21c9 X0 is a flat S 1 -central extension. \u0003\nFollowing Hitchin [21], we call the map\n{flat S 1 -central extensions of X1 \u21c9 X0 } \u2212\u2192 H 2 (X\u2022 , R/Z)\nthe holonomy map.\nNext we give the following prequantization result, which can be considered as an analogue, in\nthe degree 3-context, of the well known theorem of Weil and Kostant [24, 48].\n3\nTheorem 4.25 Assume that \u021e 2 (X\u2022 , \u03a90 ) = 0. Given any 3-cocycle \u03b7 + \u03c9 + \u03a9 \u2208 ZDR\n(X\u2022 ) as\nabove, satisfying\n1. \u03b7 + \u03c9 + \u03a9 is an integer 3-cocycle, and\n2. \u03a9 is exact,\nthere exists a groupoid S 1 -central extension R1 \u21c9 X0 of the groupoid X1 \u21c9 X0 and a pseudoconnection \u03b8 + B such that its pseudo-curvature is \u03b7 + \u03c9 + \u03a9. The pairs (\u03b8, B) up to isomorphism\nform a simply transitive set under the group of flat S 1 -central extensions.\n\nProof. Consider the exact sequence\n\u03c6\n\n\u2192 H 2 (X\u2022 , S 1 ) \u2192 H 3 (X\u2022 , Z) \u2192 H 3 (X\u2022 , \u03a90 ) \u2192\ninduced by the exponential sequence Z \u2192 \u03a90 \u2192 S 1 . Since we have the following commutative\ndiagram\n// H 3 (X\u2022 )\nH 3 (X\u2022 , Z)\nDR\nQQQ\nm\nm\nQQQ\nm\nm\nm\nQQQ\nmm\nQQQ\nmmm p\nQ((\nvvmmm\nH 3 (X\u2022 , \u03a90 ) \u223c\n= \u021e 3 (X\u2022 , \u03a90 )\nwhere p is the natural projection, it is clear that [\u03b7 + \u03c9 + \u03a9] is in the image of \u03c6. Thus there is an\nS 1 -gerbe R \u2208 H 2 (X\u2022 , S 1 ) whose Dixmier-Douady class equals [\u03b7 + \u03c9 + \u03a9]. Note that the image\n\n33\n\n\fof R under the map H 2 (X\u2022 , S 1 ) \u2192 H 2 (X0 , S 1 ) is zero since \u03a9 is exact. This follows from the\ncommutative diagram\n// H 3 (X\u2022 , Z)\nH 2 (X\u2022 , S 1 )\n\u000f\u000f\nH 2 (X0 , S 1 )\n\n\u223c\n\n\u000f\u000f\n// H 3 (X0 , Z)\n\nFrom Proposition 4.16 it follows that R can be represented by an S 1 -central extension R1 \u21c9 R0\nover X1 \u21c9 X0 , whose Dixmier-Douady class is [\u03b7 + \u03c9 + \u03a9].\nLet \u03b8\u2032 + B \u2032 be any pseudo-connection on the S 1 -central extension R1 \u21c9 R0 and \u03b7 \u2032 + \u03c9 \u2032 + \u03a9\u2032\nits pseudo-curvature. Proposition 4.19 implies that \u03b7 + \u03c9 + \u03a9 and \u03b7 \u2032 + \u03c9 \u2032 + \u03a9\u2032 are cohomologous.\nTherefore\n(\u03b7 + \u03c9 + \u03a9) \u2212 (\u03b7 \u2032 + \u03c9 \u2032 + \u03a9\u2032 ) = \u03b4(f + \u03b1 + B \u2032\u2032 ),\nwhere f \u2208 \u03a90 (X2 ), \u03b1 \u2208 \u03a91 (X1 ), and B \u2208 \u03a92 (X0 ). It thus follows that \u2202f = 0, which implies that\nf = \u2202g for g \u2208 \u03a90 (X1 ) since \u021e 2 (X\u2022 , \u03a90 ) = 0. Thus \u03b4f = \u03b4\u2202g = \u03b4dg. Let \u03b8 = \u03b8\u2032 + \u03c0 \u2217 (\u03b1 + dg) \u2208\n\u03a91 (R1 ) and B = B \u2032 + B \u2032\u2032 . It is clear that \u03b8 + B is the desired pseudo-connection on R1 \u21c9 R0 .\nFinally note that if (R\u2032 , \u03b8\u2032 , B \u2032 ) and (R\u2032\u2032 , \u03b8\u2032\u2032 , B \u2032\u2032 ) are two such pairs, then (R\u2032 \u2297 (R\u2032\u2032 )\u22121 , \u03b8\u2032 \u2212 \u03b8\u2032\u2032 , B \u2032 \u2212\nB \u2032\u2032 ) is a flat gerbe. So such pairs, up to isomorphism, are indeed parametrized by the group of flat\nS 1 -central extensions. \u0003\nRemark Note again, that the condition \u021e 2 (X\u2022 , \u03a90 ) = 0 always holds for a proper Lie groupoid\nX1 \u21c9 X0 , according to Crainic [10]. So prequantization always works for a proper Lie groupoids.\n\n5\n5.1\n\nS 1 -central extensions with prescribed pseudo-curvature\nGeometry of S 1 -central extensions\n\nFirst we need a technical lemma concerning S 1 -principal bundles over a Lie groupoid (not necessary\na groupoid central extension).\n3\nLet X1 \u21c9 X0 be a Lie groupoid with a 3-cocycle \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ), where \u03b7 \u2208 \u03a91 (X2 ) and\n\u03c0\n2\n1\n\u03c9 \u2208 \u03a9 (X1 ), and R1 \u2212\u2192 X1 an S -principal bundle. Assume that \u03b8 \u2208 \u03a91 (R1 ) is a principal bundle\nconnection one-form with curvature \u2212\u03c9, i.e.\n\nd\u03b8 = \u2212\u03c0 \u2217 \u03c9.\nConsider the T 2 -action on R1 \u00d7 R1 \u00d7 R1 :\n(s, t) * (e\nx, ye, ze) = (s * x\ne, t * ye, (st) * ze), \u2200s, t \u2208 S 1 , x\ne, ye, ze \u2208 R1 .\n2\n\n(19)\n\n1\n\nThen p : (R1 \u00d7 R1 \u00d7 R1 )/T \u2212\u2192 X1 \u00d7 X1 \u00d7 X1 is an S -principal bundle. Consider the following\ndiagram of principal bundles\nT1\n\nT3\n\nT\n\n2\n\n\u000f\u000f\n// \u03c0 \u22121 (\u039b)\n\u03c0\n\n\u000f\u000f\n\u039b\n34\n\n\u03c4\n\n\u000f\u000f\n// \u03c0 \u22121 (\u039b)/T 2\np\n\n\u000f\u000f\n\u039b\n\n(20)\n\n\fwhere \u039b = {(x, y, z)|z = xy, \u2200(x, y) \u2208 X2 } \u2282 X1 \u00d7 X1 \u00d7 X1 is the graph of the groupoid\ne be the one-form on \u03c0 \u22121 (\u039b) \u2282 R1 \u00d7 R1 \u00d7 R1 defined by\nmultiplication of X1 \u21c9 X0 . Let \u0398\ne = \u0398 \u2212 \u03c0 \u2217 pr\u221712 \u03b7,\n\u0398\n\n(21)\n\ne = 0.\nd\u0398\n\n(22)\n\nwhere \u0398 = (\u03b8, \u03b8, \u2212\u03b8) and pr12 : \u039b \u2192 X2 is the projection to the first two components. Then\n\nBy \u03be we denote the Euler vector field on R1 generating the S 1 -action.\nLemma 5.1\n\n(i). (\u03be, \u03be, \u03be)\n\ne = 1;\n\u0398\n\ne \u2208 \u03a91 (\u03c0 \u22121 (\u039b)) is basic with respect to the T 2 -action as in Eq. (19), so it descends to a\n(ii). \u0398\nb on \u03c0 \u22121 (\u039b)/T 2 ;\none-form \u0398\n\np\nb defines a flat connection on the S 1 -principal bundle \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192\n(iii). \u0398\n\u039b.\n\ne \u2208 \u03a91 (\u03c0 \u22121 (\u039b)) is invariant under the natural\nProof. (i) is obvious. For (ii)-(iii), note that \u0398\n3\ne = \u03be2 \u0398\ne = 0,\nT -action induced from the one on R1 \u00d7 R1 \u00d7 R1 . It is also quite clear that \u03be1 \u0398\nwhere\n\u03be1 = (\u03be, 0, \u03be), and \u03be2 = (0, \u03be, \u03be)\n(23)\ne is basic with respect to\nare the generating vector fields of the T 2 -action as in Eq. (19). Hence \u0398\n\u22121\n2\nb\nthis action, and descends to a one-form \u0398 on \u03c0 (\u039b)/T , which is easily seen to be a flat connection\np\nfor the S 1 -bundle \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b. \u0003\nNow assume that R1 \u21c9 R0 is a Lie groupoid S 1 -central extension over X1 \u21c9 X0 . Then\nR1 \u2192 X1 is a principal S 1 -bundle. Assume, moreover, that \u03b8 \u2208 \u03a91 (R1 ) is a pseudo-connection of\n3\nthe extension whose corresponding pseudo-curvature equals \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ). That is,\n\u2202\u03b8 = \u03c0 \u2217 \u03b7,\n\nd\u03b8 = \u2212\u03c0 \u2217 \u03c9.\n\n(24)\n\nThe proposition below describes the relation between \u03b8 and the groupoid structure on R1 \u21c9 R0 .\nFirst, let us fix some notations as follows.\n\ne\n\u01eb : R0 \u2212\u2192 R1 , u \u2192 u\ne\ne\n\u01eb2 : R0 \u2212\u2192 R2 , u \u2192 (e\nu, u\ne)\n\n\u01eb2 : X0 \u2212\u2192 X2 , u \u2192 (u, u)\n\u03ba : X1 \u2212\u2192 X2 , x \u2212\u2192 (x, x\u22121 )\n\n(25)\n(26)\n(27)\n(28)\n\nLet \u03b70 be the one-form on X0 given by\n\u03b70 = \u01eb\u22172 \u03b7.\n\n(29)\n\nProposition 5.2 Let R1 \u21c9 R0 be a Lie groupoid S 1 -central extension over X1 \u21c9 X0 . Let\n3\n\u03b8 \u2208 \u03a91 (R1 ) be a pseudo-connection whose corresponding pseudo-curvature equals \u03b7 +\u03c9 \u2208 ZDR\n(X\u2022 ).\nThen\n35\n\n\f(i). e\n\u01eb\u2217 \u03b8 = \u03b70\n\n(ii). e\n\u03b9\u2217 \u03b8 + \u03b8 = se\u2217 \u03b70 + \u03c0 \u2217 \u03ba\u2217 \u03b7.\n\nIn particular, if \u03b8 is a connection, then\ne\n\u01eb\u2217 \u03b8 = 0,\n\ne\n\u03b9\u2217 \u03b8 = \u2212\u03b8.\n\nProof. (i) It is clear that e\n\u01eb\u22172 \u2202\u03b8 = e\n\u01eb\u2217 \u03b8. On the other hand, we have e\n\u01eb\u22172 \u03c0 \u2217 \u03b7 = (\u03c0 \u25e6 e\n\u01eb2 )\u2217 \u03b7 = \u01eb\u22172 \u03b7 = \u03b70 .\n\u2217\nThus we have e\n\u01eb \u03b8 = \u03b70 .\n\n(ii) Given any x\ne \u2208 R1 , \u2200\u03b4xe \u2208 TxeR1 , consider the tangent vector (\u03b4xe, e\n\u03b9\u2217 \u03b4xe) of R2 at the point\n(e\nx, x\ne\u22121 ). It is clear that m\ne \u2217 (\u03b4xe, e\n\u03b9\u2217 \u03b4xe) = e\n\u01eb\u2217 se\u2217 \u03b4xe. So\n(\u2202\u03b8)(\u03b4xe , e\n\u03b9\u2217 \u03b4xe) = \u03b4xe\n\n\u03b8 +e\n\u03b9\u2217 \u03b4xe\n\nOn the other hand, (\u03c0 \u2217 \u03b7)(\u03b4xe , e\n\u03b9\u2217 \u03b4xe) = \u03b4xe\n\n\u03b8\u2212e\n\u01eb\u2217 se\u2217 \u03b4xe\n\n\u03b8 = \u03b4xe\n\n(\u03b8 + e\n\u03b9\u2217 \u03b8 \u2212 se\u2217 \u03b70 ).\n\n\u03c0 \u2217 \u03ba\u2217 \u03b7. (ii) thus follows. \u0003\n\nRemark 5.3 In the case of an S 1 -gerbe over a manifold, the conditions that e\n\u01eb\u2217 \u03b8 = 0, e\n\u03b9\u2217 \u03b8 = \u2212\u03b8\nwere included in the definition of a connection [5, 21, 32]. From the above lemma, we see that they\nare easy consequences of the condition \u2202\u03b8 = 0.\nProposition 5.4 Let R1 \u21c9 R0 be a Lie groupoid S 1 -central extension over X1 \u21c9 X0 . Let\n3\n\u03b8 \u2208 \u03a91 (R1 ) be a pseudo-connection whose pseudo-curvature equals \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ). Then the\n1\n\u22121\n2\nflat S -bundle p : \u03c0 (\u039b)/T \u2212\u2192 \u039b as in diagram (20) is holonomy free.\ne \u2282 R1 \u00d7 R1 \u00d7 R1 , we denote the graph of the groupoid multiplication of R1 \u21c9 R0 . It\nProof. By \u039b\ne 2) = \u039b. Given any (e\ne if p[(e\nis clear that p(\u039b/T\nx1 , ye1 , ze1 ), (e\nx2 , ye2 , ze2 ) \u2208 \u039b,\nx1 , ye1 , ze1 )] = p[(e\nx2 , ye2 , ze2 )],\nthen \u03c0(e\nx1 , ye1 , ze1 ) = \u03c0(e\nx2 , ye2 , ze2 ). This implies that x\ne1 = s * x\ne2 and ye1 = t * ye2 . Hence ze1 = x\ne1 ye1 =\ne 2 is\n(s * x\ne2 )(t * ye2 ) = (st) * (e\nx2 ye2 ) = (st) * ze2 , and therefore [(e\nx1 , ye1 , ze1 )] = [(e\nx2 , ye2 , ze2 )]. Hence \u039b/T\nindeed a section of the S 1 -bundle p : \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b. From the equation \u2202\u03b8 = \u03c0 \u2217 \u03b7, it follows\ne vanishes on \u039b.\ne So \u039b/T\ne 2 is indeed a horizontal section. \u0003\nthat \u0398\n\n5.2\n\nSufficient condition\n\nIn this subsection, we investigate the inverse question to Proposition 5.4. Namely, given a Lie\n3\ngroupoid X1 \u21c9 X0 and a 3-cocycle \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ), if \u03c0 : R1 \u2192 X1 is an S 1 -bundle and\n1\n\u03b8 \u2208 \u03a9 (R1 ) is a connection 1-form of the bundle so that d\u03b8 = \u2212\u03c0 \u2217 \u03c9 and the corresponding S 1 -flat\nbundle p : \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b is holonomy free, does R1 always admit a structure of groupoid\nS 1 -central extension over X1 \u21c9 X0 so that \u03b8 is a pseudo-connection with \u03b7 + \u03c9 being its pseudocurvature? Throughout this subsection, we will keep this assumption and all the notations. Our\nmethod is a modification of the one used in [49], where a special case was investigated.\ne = \u03c4 \u22121 (\u039b1 ) \u2282\nLet \u039b1 be a horizontal section of the flat bundle p : \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b. Set \u039b\n2\ne = dim\u039b + 2 =\n\u03c0 (\u039b), which is clearly a T -invariant submanifold. It is also clear that dim\u039b\ne vanishes when being restricted to \u039b.\ne\ndimX2 + 2, and \u0398\n\u22121\n\nLemma 5.5\n\ne = \u039b; and\n(i). \u03c0(\u039b)\n\ne is a graph over R2\n(ii). \u039b\n\n36\n\n\fProof. (i) is obvious.\n(ii) Let pr\ne 12 : R1 \u00d7 R1 \u00d7 R1 \u2192 R1 \u00d7 R1 be the projection to its first two components. Clearly\ndef\ne\npr\ne 12 (\u039b) \u2286 R2 . Let (e\nx, ye) \u2208 R2 be any point, and write (x, y) = \u03c0(e\nx, ye). Then (x, y, xy) \u2208 \u039b.\ne such that \u03c0(e\nAssume that (e\nx1 , ye1 , ze1 ) \u2208 \u039b\nx1 , ye1 , ze1 ) = (x, y, xy). Then x\ne= s*x\ne1 and ye = t * ye1 for\ne is T 2 -invariant, it thus follows that (e\ne\nsome s, t \u2208 S 1 . Since \u039b\nx, ye, st * ze1 ) = (s, t) * (e\nx1 , ye1 , ze1 ) \u2208 \u039b.\ne\nThis shows that pr\ne 12 (\u039b) = R2 .\ne is indeed a graph over R2 , assume that (e\nTo show that \u039b\nx, ye, ze), (e\nx, ye, ze1 ) are two points in\ne\n\u039b. Then it is clear that \u03c0(e\nx, ye, ze) = \u03c0(e\nx, ye, ze1 ), i.e. p \u25e6 \u03c4 (e\nx, ye, ze) = p \u25e6 \u03c4 (e\nx, ye, ze1 ). Since \u03c4 (e\nx, ye, ze)\nand \u03c4 (e\nx, ye, ze1 ) \u2208 \u039b1 and \u039b1 is a section for p, it follows that \u03c4 (e\nx, ye, ze) = \u03c4 (e\nx, ye, ze1 ). Hence\n(e\nx, ye, ze) = (s, t) * (e\nx, ye, ze1 ) for some (s, t) \u2208 T 2 , which implies that s = t = 1 and ze = ze1 . \u0003\n\ne defines a smooth map m\nNow \u039b\ne \u2032 : R2 \u2212\u2192 R1 , (e\nx, ye) \u2192 x\ne \u2217 ye. By construction, the operation \u2217\nsatisfies the condition\n(s * x\ne) \u2217 (t * ye) = st * (e\nx \u2217 ye)\n(30)\nfor all s, t \u2208 S 1 and (e\nx, ye) \u2208 R2 .\n\nObviously, m\ne \u2032 commutes with the projection \u03c0. Therefore for any triple (e\nx, ye, ze) \u2208 R3 , both\nelements (e\nx \u2217 ye) \u2217 ze and x\ne \u2217 (e\ny \u2217 ze) \u2208 R1 have the same image under the projection \u03c0, so they must\ndiffer by a unique element in S 1 . Hence, we obtain a function g : R3 \u2192 S 1 . Note that Eq. (30)\nimplies that g descends to a function on X3 . Hence, symbolically, we may write\ng(x, y, z) =\n\n(e\nx \u2217 ye) \u2217 ze\n, \u2200(x, y, z) \u2208 X3 ,\nx\ne \u2217 (e\ny \u2217 ze)\n\nwhere (e\nx, ye, ze) \u2208 R3 is any point such that \u03c0(e\nx, ye, ze) = (x, y, z). We call g(x, y, z) the modular\nfunction of \u03b8.\nNote that g(x, y, z) is independent of the choice of the horizontal section \u039b1 of the flat bundle\np : \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b, and therefore depends solely on \u03b8.\ne defines a Lie groupoid structure\nProposition 5.6 If the modular function g(x, y, z) is equal to 1, \u039b\non R1 , which is an S 1 -central extension of X1 \u21c9 X0 with \u03b8 being a pseudo-connection and \u03b7 + \u03c9\nthe corresponding pseudo-curvature.\nProof. By assumption, we know that x\ne \u2217 ye is indeed associative.\n\nNow we need to show the existence of units. For this purpose, we show that there exists a unique\n\u03c0\nsection for the principal S 1 -bundle R1 \u2192 X1 over the unit space \u01eb(X0 ), namely \u01eb\u2032 : \u01eb(X0 ) \u2212\u2192 R1 ,\n\u2032\n\u01eb\ne for any u \u2208 X0 . Let (e\ne be any point such that\n\u01eb(u) \u2192 u\ne such that (e\nu, u\ne, u\ne) \u2208 \u039b\nu1 , u\ne2 , u\ne3 ) \u2208 \u039b\n\u03c0(e\nu1 , u\ne2 , u\ne3 ) = (u, u, u). Then u\ne2 = s * u\ne1 and u\ne3 = t * u\ne1 for some s, t \u2208 S 1 . Let u\ne = (st\u22121 ) * u\ne1 .\nThen\ne\n(e\nu, u\ne, u\ne) = (st\u22121 , t\u22121 ) * (e\nu1 , u\ne2 , u\ne3 ) \u2208 \u039b.\nAssume that (e\nv , ve, ve) is another point in\n(p \u25e6 \u03c4 )(e\nu, u\ne, u\ne) = (p \u25e6 \u03c4 )(e\nv , ve, ve), we deduce\n(e\nv , ve, ve) for some s, t \u2208 S 1 , which means\ns = t = 1 and hence u\ne = ve.\n\ne such that \u03c0(e\n\u039b\nv , ve, ve) = (u, u, u). From the equation\nthat \u03c4 (e\nu, u\ne, u\ne) = \u03c4 (e\nv, e\nv, e\nv ). Therefore (e\nu, u\ne, u\ne) = (s, t) *\nthat u\ne = s * ve, u\ne = t * ve, u\ne = st * ve. This implies that\n\nNext we prove that u\ne\u2217x\ne=x\ne and x\ne \u2217 ve = x\ne if se(e\nx) = u and e\nt(e\nx) = v. By construction, we have\nu\ne\u2217u\ne=u\ne. From the associativity assumption, we have\nu\ne \u2217 (e\nu \u2217 ye) = (e\nu\u2217u\ne) \u2217 ye = u\ne \u2217 ye, if se(e\ny ) = u.\n37\n\n\fe\nWe must prove that x\ne is of the form u\ne \u2217 ye. Let x = \u03c0(e\nx). Since (u, x, x) \u2208 \u039b, there exists (a, b, c) \u2208 \u039b\nsuch that \u03c0(a, b, c) = (u, x, x). Thus u\ne = s * a and x\ne = t * c for some s, t \u2208 S 1 . So\ne\n(e\nu, ts\u22121 * b, x\ne) = (s * a, ts\u22121 * b, t * c) = (s, ts\u22121 ) * (a, b, c) \u2208 \u039b.\n\nThus x\ne=u\ne \u2217 (ts\u22121 * b). In conclusion, we have u\ne\u2217x\ne=x\ne. Similarly, one proves that x\ne\u2217e\nv=x\ne.\n\nFinally, we need to show the existence of inverse. For any x\ne \u2208 R1 , let x = \u03c0(e\nx) and se(e\nx) = v.\ne such that \u03c0(e\nSince (x, x\u22121 , v) \u2208 \u039b, there exists (e\nx1 , ye1 , ze1 ) \u2208 \u039b\nx1 , ye1 , ze1 ) = (x, x\u22121 , v). One\nmay assume that x\ne1 = x\ne by using the T 2 -action. Since \u03c0e\nz1 = \u03c0e\nv , we have ve = t * ze1 . Thus\ne This shows that the right inverse of x\n(e\nx, t * ye1 , ve) = (1, t) * (e\nx, ye1 , ze1 ) \u2208 \u039b.\ne exists. Similarly, one\nshows that the left inverse exists as well. It is then standard that the left and right inverses must\ncoincide. This concludes the proof. \u0003\nIn general, the modular function is not necessarily equal to 1. Nevertheless, we have the\nfollowing characterization.\nProposition 5.7 The modular function g : X3 \u2192 S 1 defines an R/Z-valued groupoid 3-cocycle.\nI.e., dg = 0, \u2202g = 1.\nProof. Let (x(t), y(t), z(t)) be any smooth curve in X3 , and (e\nx(t), ye(t), ze(t)) a smooth curve in\nR3 such that \u03c0(e\nx(t), ye(t), ze(t)) = (x(t), y(t), z(t)). Write u\ne(t) = x\ne(t) \u2217 ye(t), ve(t) = ye(t) \u2217 ze(t), and\nf1 (t) = (e\nf2 (t) = x\nh\nx(t) \u2217 ye(t)) \u2217 ze(t), h\ne(t) \u2217 (e\ny (t) \u2217 ze(t)).\nf1 (t)) \u2208 \u039b,\ne we have\nSince (e\nx(t), ye(t), u\ne(t)), (e\nu(t), ze(t), h\nx(t)\n\u0117\n\nu(t)\n\u0117\n\n\u03b8 + y(t)\n\u0117\n\u03b8 + z(t)\n\u0117\n\n\u03b8 \u2212 u(t)\n\u0117\n\n\u03b8 \u2212 \u0117\nh1 (t)\n\n\u03b8 = \u03b7(x(t)\n\u0117 \u2217 y(t)),\n\u0117\nand\n\u03b8 = \u03b7(u(t)\n\u0117 \u2217 z(t)),\n\u0117\n\nwhere, by abuse of notation, we use the same symbol \u2217 to denote the induced tangent map T R2 \u2192\nT R1 . It follows that\n\u0117\nh1 (t)\n\n\u03b8 = x(t)\n\u0117\n\n\u03b8 + y(t)\n\u0117\n\n\u03b8 + z(t)\n\u0117\n\n\u03b8 \u2212 \u03b7(x(t)\n\u0117 \u2217 y(t))\n\u0117\n\u2212 \u03b7(u(t)\n\u0117 \u2217 z(t)).\n\u0117\n\n(31)\n\n\u03b8 + y(t)\n\u0117\n\n\u03b8 + z(t)\n\u0117\n\n\u03b8 \u2212 \u03b7(x(t)\n\u0117 \u2217 v(t))\n\u0117\n\u2212 \u03b7(y(t)\n\u0117 \u2217 z(t)).\n\u0117\n\n(32)\n\nSimilarly, one proves that\n\u0117\nh2 (t)\n\n\u03b8 = x(t)\n\u0117\n\nSince \u2202\u03b7 = 0, Eqs (31) and (32) imply that \u0117\nh1 (t)\nLet f (t) =\n\nf\nh\n1 (t)\n.\nf\nh\n2 (t)\n\n\u03b8 = \u0117\nh2 (t)\n\n\u03b8.\n\nf1 (t) = f (t) * h\nf2 (t), which implies that\nTherefore h\n\u0117\nh1 (t) = f (t) * \u0117\nh2 (t) + f \u0307(t)\u03be,\n\nwhere \u03be is the Euler vector field on R1 . Pairing with \u03b8 on both sides, one obtains that f \u0307(t) = 0.\nFinally, the identity \u2202g = 1 can be verified directly. \u0003\nCorollary 5.8 (i). For any y \u2208 X1 , we have g(s(y), y, t(y)) = 1. In particular, \u2200u \u2208 X0 , we\nhave g(u, u, u) = 1;\n38\n\n\f(ii). If X1 is s-connected, then g(x, y, z) = 1.\nProof. Since \u2202g = 1, we have\ng(y, z, w)g(xy, z, w)\u22121 g(x, yz, w)g(x, y, zw)\u22121 g(x, y, z) = 1.\nBy letting x = s(y) and z = t(y), we obtain that g(s(y), y, t(y)) = 1.\nFor any (x, y, z) \u2208 X3 , if X1 is s-connected, then x can be connected to s(y) by a smooth path\nin the t-fiber t\u22121 (s(y)) while z can be connected to t(y) by a smooth path in the s-fiber s\u22121 (t(y)).\nIn other words, (x, y, z) and (s(y), y, t(y)) belong to the same connected component of X3 . Thus\ng(x, y, z) = 1 according to Proposition 5.7.\u0003\nAn immediate consequence is the following\n3\nProposition 5.9 Let X1 \u21c9 X0 be an s-connected Lie groupoid, and \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ) a 3cocycle, where \u03b7 \u2208 \u03a91 (X2 ) and \u03c9 \u2208 \u03a92 (X1 ). Assume that \u03c9 represents an integer cohomology\n2\nclass in HDR\n(X1 ), so that there exists an S 1 -bundle \u03c0 : R1 \u2192 X1 with a connection 1-form\n1\n\u03b8 \u2208 \u03a9 (R1 ), whose curvature is \u2212\u03c9. If the associated S 1 -bundle p : \u03c0 \u22121 (\u039b)/T 2 \u2212\u2192 \u039b as in\ndiagram (20) is holonomy free, then R1 \u2192 X1 is a Lie groupoid S 1 -central extension with \u03b8 being\na pseudo-connection and \u03b7 + \u03c9 being the pseudo-curvature. In particular, \u03b7 + \u03c9 is of integer class\nin H 3 (X\u2022 , Z).\n\n5.3\n\nProperties of 3-cocycles\n\nIn this subsection we study some geometric properties of 3-cocycles of the De-Rham double complex\nof a Lie groupoid, which are important for our constructions in the next section.\n3\nLet \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ) be a de-Rham three-cocycle, where \u03b7 \u2208 \u03a91 (X2 ) and \u03c9 \u2208 \u03a92 (X1 ). Then\n\n\u2202\u03b7 = 0,\n\n\u2202\u03c9 + d\u03b7 = 0,\n\nd\u03c9 = 0.\n\n(33)\n\nBy X1s and X1t we denote the s- and t-fibrations of X1 \u21c9 X0 , respectively. Define a leafwise\none-form \u03bbr on X1t by\n\u03bbr (\u03b4x ) = \u03b7(rx\u22121 \u2217 \u03b4x , 0x ), \u2200\u03b4x \u2208 Tx X1t .\nSimilarly, let \u03bbl be the leafwise one-form on X1s given by\n\u03bbl (\u03b4x ) = \u03b7(0x , lx\u22121 \u2217 \u03b4x ),\n\n\u2200\u03b4x \u2208 Tx X1s .\n\nHere rx\u22121 and lx\u22121 denote the right and the left translations, respectively.\nNote that \u03bbr (or \u03bbl ) is in general not right (left)-invariant.\nBy A \u2192 X0 we denote the Lie algebroid of X1 \u21c9 X0 . For any section V \u2208 \u0393(A), we denote,\n\u2212\n\u2192\n\u2190\n\u2212\nrespectively, by V and V the right invariant and the left invariant vector fields on X1 corresponding\nto V .\nLemma 5.10 For any V \u2208 \u0393(A),\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n(i). \u03b7( V (x), 0y ) = \u03bbr ( V (xy)) \u2212 \u03bbr ( V (x)), \u2200(x, y) \u2208 X2 ;\n\u2190\n\u2212\n\u2190\n\u2212\n\u2190\n\u2212\n(ii). \u03b7(0x , V (y)) = \u03bbl ( V (xy)) \u2212 \u03bbl ( V (y)), \u2200(x, y) \u2208 X2 ;\n39\n\n\f\u2212\n\u2192\n\u2190\n\u2212\n(iii). \u03bbr ( V )(u) = \u03bbl ( V )(u) = 0, \u2200u \u2208 X0 ; and\n\u2212\n\u2192\n\u2190\n\u2212\n\u2190\n\u2212\n\u2212\n\u2192\n(iv). \u03b7( V (x), \u2212 V (x\u22121 )) = \u03bbl ( V )(x\u22121 ) \u2212 \u03bbr ( V )(x), \u2200x \u2208 X1 .\n\u2212\n\u2192\nProof. Consider the curve r(t) = (exp t V , x, y) in X3 through the point (s(x), x, y). By definition,\nwe have\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n\u1e59(0) \u2202\u03b7 = \u03b7(0x , 0y ) \u2212 \u03b7( V (x), 0y ) + \u03b7( V (s(x)), 0xy ) \u2212 \u03b7( V (s(x)), 0x ).\nThus (i) follows immediately since \u2202\u03b7 = 0. Similarly (ii) can be proved by considering the curve\n\u2190\n\u2212\n(x, y, exp t V ) through the point (x, y, t(y)). (iii) follows from (i) and (ii) by taking x = y = u \u2208 X0 .\nFinally, using (i)-(iii), we have\n\u2212\n\u2192\n\u2190\n\u2212\n\u03b7( V (x), \u2212 V (x\u22121 ))\n\n\u2212\n\u2192\n\u2190\n\u2212\n= \u03b7( V (x), 0x\u22121 ) \u2212 \u03b7(0x , V (x\u22121 ))\n\u2212\n\u2192\n\u2212\n\u2192\n\u2190\n\u2212\n\u2190\n\u2212\n= [\u03bbr ( V )(xx\u22121 ) \u2212 \u03bbr ( V )(x)] \u2212 [\u03bbl ( V )(xx\u22121 ) \u2212 \u03bbl ( V )(x\u22121 )]\n\u2190\n\u2212\n\u2212\n\u2192\n= \u03bbl ( V )(x\u22121 ) \u2212 \u03bbr ( V )(x).\n\nThus (iv) follows. \u0003\nFor any V \u2208 \u0393(A), by V r and V l we denote the vector fields on X2 given by V r (x, y) =\n\u2212\n\u2192\n\u2190\n\u2212\n( V (x), 0y ) and V l (x, y) = (0x , V (y)), \u2200(x, y) \u2208 X2 . It is clear that the flows of V r and V l are,\nrespectively, given by\n\u2212\n\u2192\n\u03c6t (x, y) = (exp (t V )x, y),\n\n\u2190\n\u2212\n\u03c8t (x, y) = (x, y exp (t V )).\n\n(34)\n\nLemma 5.11 For any V, W \u2208 \u0393(A),\n\u2212\n\u2192\n\u2190\n\u2212\n\u2190\n\u2212\n\u2212\n\u2192\n(i). (d\u03b7)(V r , W l )(x, y) = V (\u03bbl (W ))(xy) \u2212 W (\u03bbr ( V ))(xy).\n\u2212\n\u2192 \u2212\n\u2192\n\u2212\n\u2192 \u2212\n\u2192\n(ii). (d\u03b7)(V r , W r )(x, y) = (d\u03bbr )( V , W )(xy) \u2212 (d\u03bbr )( V , W )(x).\n\u2190\n\u2212 \u2190\n\u2212\n\u2190\n\u2212 \u2190\n\u2212\n(iii). (d\u03b7)(V l , W l )(x, y) = (d\u03bbl )( V , W )(xy) \u2212 (d\u03bbl )( V , W )(y).\nProof. (i) From Eq. (34), one easily sees that the vector fields V r and W l commute with each\nother: [V r , W l ] = 0.\n\u2190\n\u2212\n\u2190\n\u2212\nAccording to Lemma 5.10 (ii), \u03b7(W l )(x, y) = \u03bbl (W (xy)) \u2212 \u03bbl (W (y)). It thus follows that\nd\n\u2190\n\u2212\n\u2212\n\u2192\n\u2190\n\u2212\n\u2212\n\u2192\n\u2190\n\u2212\n|t=0 [\u03bbl (W (exp (t V )xy) \u2212 \u03bbl (W (y))] = V (\u03bbl (W ))(xy).\ndt\n\u2190\n\u2212\n\u2212\n\u2192\nSimilarly, one shows that W l (\u03b7(V r ))(x, y) = W (\u03bbr ( V )(xy). (i) thus follows.\nV r (\u03b7(W l ))(x, y) =\n\n(ii) We have\nV r (\u03b7(W r ))(x, y)\n\n\u2212\n\u2192\n\u2212\n\u2192\n= V r [\u03bbr (W (xy)) \u2212 \u03bbr (W (x))]\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\nd\n|t=0 [\u03bbr (W (exp (t V )xy)) \u2212 \u03bbr (W (exp (t V )x))]\n=\ndt\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n= V (\u03bbr (W ))(xy) \u2212 V (\u03bbr (W ))(x).\n\n40\n\n\fHence\n(d\u03b7)(V r , W r )(x, y)\n\n= V r (\u03b7(W r ))(x, y) \u2212 W r (\u03b7(V r ))(x, y) \u2212 \u03b7([V r , W r ])(x, y)\n\u2212\n\u2192 \u2212\n\u2192\n\u2212\n\u2192 \u2212\n\u2192\n= (d\u03bbr )( V , W )(xy) \u2212 (d\u03bbr )( V , W )(x).\n\n(iii) can be proved similarly.\u0003\n3\nProposition 5.12 Assume that \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ) is a 3-cocycle.\n\n(i). \u01eb\u2217 \u03c9 = \u2212d\u03b70 ;\n\u2192\n\u2190\n\u2212 \u2212\n\u2212\n\u2192 \u2190\n\u2212\n\u2212\n\u2192 \u2190\n\u2212\n(ii). For any V, W \u2208 \u0393(A), \u03c9( V , W ) = V \u03bbl (W ) \u2212 W \u03bbr ( V ).\n(iii). \u03c9 \u2212 d\u03bbr \u2208 \u03a92 (X t ) is a right invariant (leafwise) closed 2-form, and therefore induces a Lie\nalgebroid 2-cocycle \u03c9 r \u2208 \u0393(\u22272 A\u2217 ).\n(iv). \u03c9 \u2212 d\u03bbl \u2208 \u03a92 (X s ) is a left invariant (leafwise) closed 2-form, and therefore induces a Lie\nalgebroid 2-cocycle \u03c9 l \u2208 \u0393(\u22272 A\u2217 ).\n(v). \u03c9 r and \u03c9 l are related by\n\u03c9 r + \u03c9 l + \u03c1\u2217 d\u03b70 = 0,\ni.e. \u03c9 r and \u2212\u03c9 l are cohomologous Lie algebroid 2-cocycles. Here \u03c1 : A \u2192 T X0 is the anchor\nof the Lie algebroid A.\n\u2212\n\u2192\n\u2190\n\u2212\nProof. It is not difficult to see that m\u2217 V r (x, y) = V (xy) and m\u2217 W l (x, y) = W (xy). Thus\n\u2212\n\u2192 \u2190\n\u2212\n(\u2202\u03c9)(V r , W l )(x, y) = \u2212\u03c9( V , W )(xy).\nOn the other hand, according to Lemma 5.11(i), we have\n\u2212\n\u2192\n\u2190\n\u2212\n\u2212\n\u2192\n\u2190\n\u2212\n(d\u03b7)(V r , W l )(x, y) = V (\u03bbl (W ))(xy) \u2212 W (\u03bbr ( V ))(xy).\nSince \u2202\u03c9 + d\u03b7 = 0, it thus follows that\n\u2212\n\u2192 \u2190\n\u2212\n\u2212\n\u2192 \u2190\n\u2212\n\u2190\n\u2212 \u2212\n\u2192\n\u03c9( V , W )(xy) = V \u03bbl (W )(xy) \u2212 W \u03bbr ( V )(xy).\n(ii) thus follows by letting y = t(x).\nFor (iii), we note that\n\u2212\n\u2192 \u2212\n\u2192\n\u2212\n\u2192 \u2212\n\u2192\n(\u2202\u03c9)(V r , W r )(x, y) = \u03c9( V , W )(x) \u2212 \u03c9( V , W )(xy).\nThe conclusion thus follows from Lemma 5.11. (iv) can be proved similarly.\nFinally, consider the map \u03ba : X1 \u2192 X2 as in Eq. (28). It is clear that\n\u2212\n\u2192\n\u2212\n\u2192\n\u2190\n\u2212\n\u03ba\u2217 V (x) = ( V (x), \u2212 V (x\u22121 )).\nThus\n\u2212\n\u2192\n(\u03ba\u2217 \u03b7)( V )(x)\n\n=\n=\n=\n\n\u2212\n\u2192\n\u2190\n\u2212\n\u03b7( V (x), \u2212 V (x\u22121 )) (by Lemma 5.10 (iv))\n\u2212\n\u2192\n\u2190\n\u2212\n\u2212\u03bbr ( V )(x) + \u03bbl ( V )(x\u22121 )\n\u2212\n\u2192\n(\u2212\u03bbr \u2212 \u03b9\u2217 \u03bbl )( V )(x).\n41\n\n(35)\n\n\fIt follows that \u03ba\u2217 \u03b7 = \u2212\u03bbr \u2212 \u03b9\u2217 \u03bbl . Here \u03ba\u2217 \u03b7 is considered as a fiberwise one-form on X1t by\nrestriction.\n\u2212\n\u2192\n\u2190\n\u2212\nFor any V \u2208 \u0393(A), write V (x, x\u22121 ) = ( V (x), \u2212 V (x\u22121 )) \u2208 T(x,x\u22121 ) X2 . Eq. (35) means that\n\u2212\n\u2192\n\u03ba\u2217 V (x) = V (x, x\u22121 ). Hence for any V, W \u2208 \u0393(A),\n\u2212\n\u2192\n\u2212\n\u2192\n(d\u03b7)(V (x, x\u22121 ), W (x, x\u22121 )) = d(\u03ba\u2217 \u03b7)( V (x), W (x))\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\n= \u2212(d\u03bbr )( V (x), W (x)) \u2212 (d\u03bbl )(\u03b9\u2217 V (x), \u03b9\u2217 W (x))\n\u2212\n\u2192\n\u2212\n\u2192\n\u2190\n\u2212\n\u2190\n\u2212\n= \u2212(d\u03bbr )( V (x), W (x)) \u2212 (d\u03bbl )( V (x\u22121 ), W (x\u22121 )).\n\u2212\n\u2192\n\u2212\n\u2192\nOn the other hand, we have m\u2217 V (x, x\u22121 ) = \u01eb\u2217 s\u2217 V (x) and m\u2217 W (x, x\u22121 ) = \u01eb\u2217 s\u2217 W (x). To see\n\u2212\n\u2192\n\u2212\n\u2192\nthis, note that (exp t V * x, (exp t V * x)\u22121 ) is the flow generated by V (x, x\u22121 ) on X2 . Thus we have\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192 \u2212\n\u2192\n\u2190\n\u2212 \u2190\n\u2212\n(\u2202\u03c9)(V (x, x\u22121 ), W (x, x\u22121 )) = \u03c9( V , W )(x) + \u03c9( V , W )(x\u22121 ) \u2212 \u03c9(s\u2217 V (x), s\u2217 W (x)).\n(v) thus follows immediately. \u0003\n.\n\n5.4\n\nLie algebroid central extensions\n\n3\nAs in the last subsection, let \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ) be a de-Rham 3-cocycle of a Lie groupoid X1 \u21c9 X0\n2\nand \u03c9 represents an integer cohomology class in HDR\n(X1 ). Let \u03c0 : R1 \u2192 X1 be an S 1 -bundle and\n1\n\u03b8 \u2208 \u03a9 (R1 ) a connection 1-form of the bundle so that d\u03b8 = \u2212\u03c0 \u2217 \u03c9.\n\nRecall that, for a given Lie algebroid A \u2192 M , any Lie algebroid 2-cocycle \u03b3 \u2208 \u0393(\u22272 A\u2217 ) induces\ne = A \u2295 (M \u00d7 R) as follows. The anchor map \u03c1e(V + f ) = \u03c1(V ),\na Lie algebroid central extension A\n\u221e\n\u2200V \u2208 \u0393(A) and f \u2208 C (M ), and the bracket is\n[V + f, W + g] = [V, W ] + (\u03c1(V )(g) \u2212 \u03c1(W )(f ) + \u03b3(V, W )),\ner and A\nel the Lie algebroid central extensions of A\n\u2200V, W \u2208 \u0393(A) and f, g \u2208 C \u221e (M ). Denote by A\nr\nl\nr\ne\nel are isomorphic, while the isomorphism\nby the 2-cocycles \u03c9 and \u2212\u03c9 , respectively. Then A and A\nis given by\ner \u2212\u2192 A\nel , V + f \u2192 V + (f + \u03c1(V ) \u03b70 ), \u2200V \u2208 \u0393(A).\nA\n(36)\ne\n\nLet \u03b8r = \u03b8 + \u03c0 \u2217 \u03bbr and \u03b8l = \u03b8 + \u03c0 \u2217 \u03bbl be the fiberwise one-forms on R1t and R1es , respectively.\nThen \u03b8r is a fiberwise connection one-form on the fiberwise S 1 -principal bundle Re1t \u2192 X1t with\ncurvature being \u2212\u03c9 + d\u03bbr , while \u03b8l is a fiberwise connection one-form on the fiberwise S 1 -principal\n\u2212\n\u2192\nc\nbundle R1es \u2192 X1s with curvature being \u2212\u03c9 + d\u03bbl . For any V \u2208 \u0393(A), denote by V \u2208 X(Re1t ) the\n\u2212\n\u2192\n\u2190\n\u2212\n\u2190\n\u2212\nc\nhorizontal lift of V with respect to \u03b8r , and V \u2208 X(R1es ) the horizontal lift of V with respect to \u03b8l .\nI.e.,\n\uf8f1\n\u2212\n\u2192\n\uf8f2 c\nV (\u03b8 + \u03c0 \u2217 \u03bbr ) = 0,\n(37)\n\u2192 \u2212\n\u2192\nc\n\uf8f3 \u03c0 \u2212\nV\n=\nV\n\u2217\nand\n\n\uf8f1\n\uf8f2\n\uf8f3\n\n\u2190\n\u2212\nc\nV\n\n(\u03b8 + \u03c0 \u2217 \u03bbl ) = 0,\n\u2190\n\u2212 \u2190\n\u2212\nc\n\u03c0\u2217 V = V .\n42\n\n(38)\n\n\fer ) \u2212\u2192 X(R1 ) and \u03c8 : \u0393(A\nel ) \u2212\u2192 X(R1 ), respectively, by\nIntroduce linear maps \u03c6 : \u0393(A\nand\n\u221e\n\n\u2200V \u2208 \u0393(A) and f \u2208 C (X0 ). Set\n\n\u2212\n\u2192\nc\n\u03c6 : V + f \u2212\u2192 V + (\u03c0 \u2217 s\u2217 f )\u03be\n\n(39)\n\n\u2190\n\u2212\nc\n\u03c8 : V + f \u2212\u2192 V + (\u03c0 \u2217 t\u2217 f )\u03be,\n\n(40)\n\ner ), and Dt = \u03c8\u0393(A\nel ) \u2282 X(R1 )\nDs = \u03c6\u0393(A\nProposition 5.13\n\n(41)\n\n(i). Both \u03c6 and \u03c8 are Lie algebra homomorphisms.\n\n(ii). Vector fields in Ds and Dt mutually commute.\nProof. \u2200V, W \u2208 \u0393(A) and f, g \u2208 C \u221e (X0 ), we have\n\n=\n\n\u2212\n\u2192\n\u2212\n\u2192\nc\nc\n[ V + (\u03c0 \u2217 s\u2217 f )\u03be, W + (\u03c0 \u2217 s\u2217 g)\u03be]\n\u2212\n\u2192\n\u2212\n\u2192\n\u2192\n\u2212\n\u2192 \u2212\nc\nc\nc\nc\n[ V , W ] + [ V , (\u03c0 \u2217 s\u2217 g)\u03be] + [(\u03c0 \u2217 s\u2217 f )\u03be, W ]\n\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\nc\nc\nc\nSince the vector field V is S 1 -invariant, we have [ V , \u03be] = 0. On the other hand, since s\u2217 \u03c0\u2217 V =\n\u2212\n\u2192\n\u2212\n\u2192\nc\ns\u2217 V = \u03c1(V ), it follows that V (\u03c0 \u2217 s\u2217 g) = \u03c1(V )g. Therefore,\n\u2212\n\u2192\n\u2212\n\u2192\n\u2212\n\u2192\nc\nc\nc\n[ V , (\u03c0 \u2217 s\u2217 g)\u03be] = (\u03c0 \u2217 s\u2217 g)[ V , \u03be] + ( V (\u03c0 \u2217 s\u2217 g))\u03be = (\u03c1(V )g)\u03be.\n\n\u2212\n\u2192\nc\nSimilarly, one proves that [(\u03c0 \u2217 s\u2217 f )\u03be, W ] = \u2212(\u03c1(W )f )\u03be. Finally note that\n\u2212\n\u2212\u2212\u2212\u2192\n\u2212\n\u2192 \u2212\n\u2192\n\\\nc\nc\n[ V , W ] = [V, W ] + \u03c0 \u2217 s\u2217 \u03c9 r (V, W )\u03be.\nHence it follows that \u03c6 is indeed a Lie algebra homomorphism. Similarly, one proves that \u03c8 is also\na Lie algebra homomorphism.\nFor the second part, for any V, W \u2208 \u0393(A) and f, g \u2208 C \u221e (X0 ), we have\n[\u03c6(V + f ), \u03c8(W + g)] =\n=\n\n\u2190\n\u2212\n\u2212\n\u2192\nc\nc\n[ V + (\u03c0 \u2217 s\u2217 f )\u03be, W + (\u03c0 \u2217 t\u2217 g)\u03be]\n\u2212\n\u2192 \u2190\n\u2212\n\u2212\n\u2192\n\u2190\n\u2212\nc\nc\nc\nc\n[ V , W ] + [ V , (\u03c0 \u2217 t\u2217 g)\u03be] + [(\u03c0 \u2217 s\u2217 f )\u03be, W ].\n\n\u2190\n\u2212\n\u2190\n\u2212\n\u2212\n\u2192\n\u2212\n\u2192\n\u2190\n\u2212\n\u2212\n\u2192\nc\nc\nc\nc\nNow [ V , (\u03c0 \u2217 t\u2217 g)\u03be] = [(\u03c0 \u2217 s\u2217 f )\u03be, W ] = 0 since t\u2217 \u03c0\u2217 V = t\u2217 V = 0 and s\u2217 \u03c0\u2217 W = s\u2217 W = 0.\n\n\u2212\n\u2192 \u2190\n\u2212\n\u2212\n\u2192 \u2190\n\u2212\n\u2212\n\u2212\n\u2192 \u2190\nc\nc\nc\nc\nIt remains to show that [ V , W ] = 0. For this, first of all, note that \u03c0\u2217 [ V , W ] = [ V , W ] = 0.\n\u2212\n\u2192\n\u2190\n\u2212\n\u2212\n\u2192\n\u2190\n\u2212\nc\nc\nBy Eqs. (37), (38), we have V \u03b8 = \u2212\u03c0 \u2217 (\u03bbr ( V )) and W \u03b8 = \u2212\u03c0 \u2217 (\u03bbl (W )). It thus follows that\n\u2212\n\u2192 \u2190\n\u2212\nc\nc\n[V , W ]\n\n\u03b8\n\n\u2212\n\u2192 \u2190\n\u2212\n\u2190\n\u2212 c\n\u2212\n\u2192\n\u2212\n\u2192 \u2190\n\u2212\nc\nc\nc\nc\nc\nV \u03b8(W ) \u2212 W \u03b8( V ) \u2212 (d\u03b8)( V , W )\n\u2212\n\u2192 \u2190\n\u2212\n\u2190\n\u2212 \u2212\n\u2192\n\u2212\n\u2192 \u2190\n\u2212\n= \u03c0 \u2217 [\u2212 V \u03bbl (W ) + W \u03bbr ( V ) + \u03c9( V , W )] (by Proposition 5.12 (ii))\n=\n\n= 0.\nThis concludes the proof of the proposition.\u0003\n43\n\n\fIntroduce distributions Fs and Ft on \u03c0 \u22121 (\u039b) as follows. For any (e\nx, ye, ze) \u2208 \u03c0 \u22121 (\u039b),\nFs |(ex,ey,ez)\n\nFt |(ex,ey,ez)\n\n=\n\n=\n\n{(\u03c6(V + f )(e\nx), 0, \u03c6(V + f ))(e\nz ))|\u2200V \u2208 \u0393(A), f \u2208 C \u221e (X0 )}\n\u221e\n\n{(0, \u03c8(V + f )(e\ny), \u03c8(V + f ))(e\nz ))|\u2200V \u2208 \u0393(A), f \u2208 C (X0 )}.\n\n(42)\n(43)\n\nIt is clear, from Proposition 5.13, that both Fs and Ft are integrable distributions. By F , we\ne = 0. According to Eq. (22), F is an\ndenote the distribution on \u03c0 \u22121 (\u039b) defined by the equation \u0398\nintegrable distribution.\nProposition 5.14 We have Fs \u2286 F and Ft \u2286 F.\nProof. Let v = (\u03c6(V + f )(e\nx), 0, \u03c6(V + f ))(e\nz )). Then\nv\n\n(\u03b8, \u03b8, \u2212\u03b8)\n\n\u2212\n\u2192\nc\n= (V\n\n\u2212\n\u2192\nc\n\u03b8)(e\nx) + f (s \u25e6 \u03c0(e\nx)) \u2212 ( V\n\u2212\n\u2192\n\u2212\n\u2192\n= \u2212\u03bbr ( V )(x) + \u03bbr ( V )(z).\n\nOn the other hand,\nv\n\n\u2212\n\u2192\n\u03c0 \u2217 \u03b7 = ( V (x), 0)\n\nThus\nv\n\ne =v\n\u0398\n\n\u03b8)(e\nz ) \u2212 f (s \u25e6 \u03c0(e\nz ))\n\n\u2212\n\u2192\n\u03b7 = \u03b7( V (x), 0y ).\n\n\u0398\u2212v\n\n\u03c0 \u2217 \u03b7 = 0,\n\naccording to Lemma 5.10 (i). Hence we have proved that Fs \u2286 F. Similarly, one shows that\nFt \u2286 F. \u0003\nWe are now ready to prove the main theorem of this section.\n3\nTheorem 5.15 Let X1 \u21c9 X0 be an s-connected Lie groupoid, and \u03b7 + \u03c9 \u2208 ZDR\n(X\u2022 ) a de-Rham\n1\n2\n3-cocycle, where \u03b7 \u2208 \u03a9 (X2 ) and \u03c9 \u2208 \u03a9 (X1 ). Assume that \u03c9 represents an integer cohomology\n2\nclass in HDR\n(X1 ), so that there exists an S 1 -bundle \u03c0 : R1 \u2192 X1 with a connection \u03b8 \u2208 \u03a91 (R1 ),\nwhose curvature is \u2212\u03c9. Assume that \u01eb\u2217 R1 endowed with the flat connection \u01eb\u2217 \u03b8\u2212\u03c0 \u2217 \u01eb\u22172 \u03b7 is holonomy\nfree. (Here \u01eb : X0 \u2192 X1 and \u01eb2 : X0 \u2192 X2 are the respective identity morphisms.) Then R1 \u21c9 R0 ,\nwhere R0 = X0 , admits in a natural way the structure of a Lie groupoid, such that it becomes an\nS 1 -central extension of X1 \u21c9 X0 and \u03b7 + \u03c9 the pseudo-curvature of \u03b8. In particular, \u03b7 + \u03c9 is of\ninteger class in H 3 (X\u2022 , Z).\n\ne, \u2200u \u2208 X0 . Consider\nProof. Take a horizontal section \u01eb\u2032 of the bundle R1 |X0 \u2192 \u01eb(X0 ): \u01eb(u) \u2192 u\nthe foliation in R1 \u00d7 R1 \u00d7 R1 defined by Fs + Ft . Let\nI = {(e\nu, u\ne, u\ne)| \u2200u \u2208 X0 }.\n\nThen I is transversal to the foliation Fs + Ft . By the method of characteristics [9], there is\ne containing I which is immersed in R1 \u00d7 R1 \u00d7 R1 .\na minimal Fs + Ft -invariant submanifold \u039b\ne\ne\nProposition 5.14 implies that \u0398 = 0 when being restricted to \u039b.\ne is T 2 -invariant since the T 2 -generating vector fields \u03be1 \u2208 F\u03b1 and \u03be2 \u2208 F\u03b2 .\nIt is clear that \u039b\ne is a graph over R2 . Let pr : R1 \u00d7R1 \u00d7R1 \u2192 R1 \u00d7R1 be the natural\nNow we need to show that \u039b\n12\ne = R2 .\nprojection onto the first two coordinates: pr12 (x, y, z) = (x, y). First, we show that pr12 (\u039b)\ne if and only if x\nNote that (e\nx, ye, ze) \u2208 \u039b\ne = \u03c6\u03b1 u\ne, ye = \u03c6\u03b2 u\ne, and z = \u03c6\u03b1 \u03c6\u03b2 u\ne for some u \u2208 X0 ,\n\u03b1\n\u03b2\nwhere \u03c6 is a product of flows in Ds and \u03c6 is a product of flows in Dt .\n44\n\n\fSince e\nt\u2217 Ds = 0 and se\u2217 Dt = 0, the flow of Ds preserves e\nt-fibres and similarly the flow of Dt\npreserves se-fibres; thus\ne\nt(e\nx) = e\nt(\u03c6\u03b1 u\ne) = u,\n\nand\n\nse(e\ny ) = se(\u03c6\u03b2 u\ne) = u.\n\nI.e., e\nt(e\nx) = se(e\ny ), namely, (e\nx, ye) \u2208 R2 . Therefore,\n\ne \u2286 R2 .\npr12 (\u039b)\n\nConversely, for any (e\nx, ye) \u2208 R2 , assume that e\nt(e\nx) = se(e\ny ) = u \u2208 X0 . Since X1 \u21c9 X0 is tconnected and (t \u25e6 \u03c0)(e\nx) = u, there exists a product \u03c6\u03b10 of flows generated by vector fields of the\n\u2212\n\u2192\nx). For each V \u2208 \u0393(A), we denote the flow of the\nform V for V \u2208 \u0393(A), such that \u03c6\u03b10 (u) = \u03c0(e\n\u2212\n\u2192 \u2212\n\u2192\n\u2212\n\u2192\nc\nc\n\u03b1\nvector field V \u2208 X(R1 ) by \u03a6t . Since \u03c0\u2217 V = V , then\n\u03b10\n\u03c0 \u25e6 \u03a6\u03b1\nt = \u03c6t \u25e6 \u03c0.\n\u03b10\nAs each fibre of the S 1 -bundle R1 \u2192 X1 is compact, \u03a6\u03b1\nt is defined provided that \u03c6t is defined.\n\u03b1\n\u03b10\nLet \u03a6 denote the product of flows corresponding to \u03c6 . Then we have\n\n\u03c0 \u25e6 \u03a6\u03b1 = \u03c6\u03b10 \u25e6 \u03c0.\nHence\nx).\n\u03c0(\u03a6\u03b1 (e\nu)) = \u03c6\u03b10 (u) = \u03c0(e\nTherefore x\ne = \u03bb * \u03a6\u03b1 (e\nu) for some \u03bb \u2208 S 1 . Note that the flow \u03c8t (e\nx) = t * x\ne on R1 is generated by the\nstandard Euler vector field \u03be, which is also in Ds . Hence we conclude that there exists a product of\nflows \u03a6\u0302\u03b1 generated by the vector fields in Ds such that x\ne = \u03a6\u0302\u03b1 (e\nu). Similarly, we can find a product\n\u03b2\ne i.e.\nof flows \u03a6\u0302 generated by the vector fields in Dt such that ye = \u03a6\u0302\u03b2 (e\nu). So (e\nx, ye, \u03a6\u0302\u03b1 \u03a6\u0302\u03b2 (e\nu)) \u2208 \u039b,\n\u03b1 \u03b2\ne Thus we have proved that pr12 (\u039b)\ne = R2 .\n(e\nx, ye) = pr12 (e\nx, ye, \u03a6\u0302 \u03c6\u0302 (e\nu)) \u2208 pr12 (\u039b).\n\n\u03b2\ne and ye = \u03c6\u03b2 u\ne, then ze = \u03c6\u03b1 \u03c6\u03b2 u\ne and z1 = \u03c6\u03b1\nFinally, note that if x\ne = \u03c6\u03b1 u\ne = \u03c6\u03b1\n1 \u03c6 u. Thus\n1u\nze = \u03c6\u03b2 \u03c6\u03b1 u\ne = \u03c6\u03b2 (e\nx) = ze1 . Similarly, one shows that ze is also independent of the choice of the flows\ne is indeed a graph over R2 . Now the conclusion follows from Proposition\n\u03c6\u03b2 . This shows that \u039b\n5.9. \u0003\n\nRemark It would be interesting to investigate how the integrability condition of CrainicFernandes [11] is related to the theorem above.\n\nReferences\n[1] Artin, M., Grothendieck, A., and Verdier, J.-L., Th\u00e9orie des topos et cohomologie \u00e9tale des\nsch\u00e9mas, S\u00e9minaire de g\u00e9om\u00e9trie alg\u00e9brique du Bois-Marie (SGA4) Lecture Notes in Mathematics 269, 270, 305. Springer-Verlag, Berlin-New York, 1972-1973.\n[2] Artin, M., and Mazur, B., Etale homotopy, Lecture Notes in Mathematics 100 Springer-Verlag,\nBerlin-New York 1969.\n[3] Behrend, K., and Xu, P., S 1 -bundles and gerbes over differentiable stacks, C. R. Acad. Sci.\nParis, Serie I 336 (2003), 163-168.\n45\n\n\f[4] Behrend, K., Xu, P. and Zhang, B., Equivariant gerbes over compact simple Lie groups. C.\nR. Math. Acad. Sci. Paris, Serie I 336 (2003), 251\u2013256.\n[5] Brylinski, J.-L., Loop spaces, characteristic classes and geometric quantization, Progress in\nMathematics, 107 Birkh\u00e4user, 1993.\n[6] Brylinski, J.-L., Gerbes on complex reductive Lie groups, math.DG/0002158.\n[7] Bunke, U., Schick, T., Spitzweck, M., Sheaf theory for stacks in manifolds and twisted cohomology for S 1 -gerbes, Algebraic & Geometric Topology 7 (2007), 1007-1062.\n[8] Chatterjee, D., On the construction of abelian gerbes, PhD thesis (Cambridge), 1998.\n[9] Coste, A., Dazord, P., and Weinstein, A, Groupo\u0131\u0308des symplectiques, Publications du\nD\u00e9partement Nouvelle Serie. A 2 1\u201362, Univ. Claude-Bernard, Lyon, (1987) 1\u201362.\n[10] Crainic, M., Differentiable and algebroid cohomology, van Est isomorphisms, and characteristic classes, Comment. Math. Helv. 78 (2003), 681\u2013721\n[11] Crainic, M., and Fernandes, R., Integrability of Lie brackets, Ann. of Math. 157 (2003),\n575\u2013620.\n[12] Deligne, P., Th\u00e9orie de Hodge. III, Inst. Hautes \u00c9tudes Sci. Publ. Math. 44 (1974), 5\u201377.\n[13] Dijkgraaf, R., The mathematics of fivebranes, Documenta Math. Extra Volume ICM (1998).\n[14] Dupont, J., Curvature and characteristic classes, Lecture Notes in Mathematics 640 SpringerVerlag, Berlin-New York, 1978.\n[15] Duskin, J., An outline of nonabelian cohomology in a topos. I. The theory of bouquets and\ngerbes, Cahiers Topologie G\u00e9om. Diff\u00e9rentielle23 (1982), 165\u2013191.\n[16] Freed, D., Higher algebraic structures and quantization, Commun. Math. Phys. 159 (1994),\n343-398.\n[17] Gawedzki, K., and Reis, N., WZW branes and gerbes, Rev. Math. Phys. 14 (2002), 1281\u20131334.\n[18] Ginot, G., and Stienon, M., G-gerbes, principal 2-group bundles and characteristic classes,\narXiv:0801.1238\n[19] Giraud, J., Cohomologie non ab\u00e9lienne, Die Grundlehren der mathematischen Wissenschaften\n179, Springer-Verlag 1971.\n[20] Grothendieck, A., Revtements \u00e9tales et groupe fondamental, S\u00e9minaire de g\u00e9om\u00e9trie\nalg\u00e9brique du Bois-Marie 1960\u20131961 (SGA 1), Lecture Notes in Mathematics 224 SpringerVerlag, Berlin-New York, 1971.\n[21] Hitchin, N., Lectures on special Lagrangian submanifolds, Winter School on Mirror Symmetry,\nVector Bundles and Lagrangian Submanifolds (Cambridge, MA, 1999), AMS/IP Stud. Adv.\nMath. 23, 151\u2013182.\n[22] Hilsum, M., and Skandalis, G., Morphismes K-orient\u00e9s d'espaces de feuilles et fonctorialit\u00e9\nen th\u00e9orie de Kasparov (d'apr\u00e8s une conjecture d'A. Connes). Ann. Sci. \u00c9cole Norm. Sup. 20\n(1987), 325\u2013390.\n[23] Kalkkinen, J., Gerbes of massive type II configurations, J. High Energy Physics 9907 (1999),\n2-22.\n46\n\n\f[24] Kostant, B., Quantization and unitary representations. I. Prequantization. Lectures in modern\nanalysis and applications, III, Lecture Notes in Math. 170 87\u2013208.\n[25] Laumon, G., and Moret-Bailly, L., Champs alg\u00e9brique,, Results in Mathematics and Related\nAreas. 3rd Series. A Series of Modern Surveys in Mathematics, 39 Springer-Verlag, (2000).\n[26] Laurent-Gengoux, C., Tu, J.-L., and Xu, P., Chern-Weil map for principal bundles over\ngroupoids. Math Z. 255 (2007), 451-491.\n[27] Lupercio, E., and Uribe, B., Gerbes over orbifolds and twisted K-theory, Comm. Math. Phys.\n245 (2004), 449\u2013489.\n[28] Mackenzie, K., General theory of Lie groupoids and Lie algebroids, London Mathematical\nSociety Lecture Note Series 213 Cambridge University Press, Cambridge, 2005.\n[29] Meinrenken, E., The basic gerbe over a compact simple Lie group, Enseign. Math. (2)49\n(2003), 307\u2013333.\n[30] Mikami, K., and Weinstein, A., Moments and reduction for symplectic groupoid actions, Publ.\nRIMS Kyoto Univ. 24 (1988), 121-140.\n[31] Muhly, P., Renault, J. Williams, D., Equivalence and isomorphism for groupoid C \u2217 -algebras,\nJ. Operator Theory 17 (1987), 3\u201322.\n[32] Murray, M. K., Bundle gerbes, J. London Math. Soc. 54 (1996), 403\u2013416.\n[33] Murray, M. K., Stevenson, D., Bundle gerbes: stable isomorphism and local theory, J. London\nMath. Soc. 62 (2000), 925\u2013937.\n[34] Metzler, D., Topological and smooth stacks, math.DG/0306176.\n[35] Moerdijk, I., Orbifolds as groupoids: an introduction, Orbifolds in mathematics and physics\n(Madison, WI, 2001), Contemp. Math. 310, 205\u2013222, 2002.\n[36] Moerdijk, I. Lie groupoids, gerbes, and non-abelian cohomology, K-Theory 28 (2003), no. 3,\n207\u2013258.\n[37] Moerdijk, I., Introduction to the language of stacks and gerbes, math.AT/0212266.\n[38] Moerdijk, I., Mrcun, Introduction to Foliations and Lie Groupoids, Cambridge Studies in\nAdvanced Mathematics, 91, Cambridge University Press, Cambridge, 2003.\n[39] Noohi, B., Fundamental groups of algebraic stacks, J. Inst. Math. Jussieu 3 (2004), 69\u2013103.\n[40] Noohi, B., Foundations of topological stacks I, math.AG/0503247.\n[41] Stienon, M., Equivariant Dixmier-Douady classes, arXiv:0709.2720.\n[42] Tu, J.-L., Groupoid cohomology and extensions, Trans. AMS 358 (2006), 4721\u20134747.\n[43] Tu, J.-L., Xu, P., and Laurent-Gengoux, C., Twisted K-theory of differentiable stacks. Ann.\nSci. \u00c9cole Norm. Sup. (4) 37 (2004), no. 6, 841\u2013910.\n[44] Tu, J.-L., and Xu, P., Chern character for twisted K-theory of orbifolds, Adv Math 207 (2006),\n455\u2013483.\n\n47\n\n\f[45] Tu, J.-L., and Xu, P., The ring structure for equivariant twisted K-theory, J. Reine Angew.\nMath. (to appear); math.KT/0604160.\n[46] Sharpe, E., Discrete torsion, Phys. Rev. 68 (2003), 7[47] Souriau, J.-M., Structure of dynamical systems, A symplectic view of physics, Translated from\nthe French by C. H. Cushman-de Vries, Progress in Mathematics 149 Birkhuser Boston, Inc.,\nBoston, MA, 1997.\n[48] Weil, A., Sur les th\u00e9or\u00e8mes de de Rham, Comment. Math. Helv. 26, (1952). 119\u2013145.\n[49] Weinstein, A. and Xu, P., Extensions of symplectic groupoids and quantization. J. Reine\nAngew. Math. 417 (1991), 159\u2013189.\n[50] Wirth, J., and Stasheff, J., Homotopy transition cocycles, math.AT/0609220.\n\n48\n\n\f"}