{"id": "http://arxiv.org/abs/1102.4531v2", "guidislink": true, "updated": "2011-03-26T14:28:32Z", "updated_parsed": [2011, 3, 26, 14, 28, 32, 5, 85, 0], "published": "2011-02-22T15:17:45Z", "published_parsed": [2011, 2, 22, 15, 17, 45, 1, 53, 0], "title": "Stable logarithmic maps to Deligne--Faltings pairs II", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1102.2903%2C1102.4030%2C1102.3495%2C1102.5040%2C1102.3063%2C1102.0684%2C1102.4741%2C1102.2835%2C1102.3650%2C1102.2908%2C1102.1227%2C1102.0973%2C1102.5410%2C1102.0756%2C1102.0225%2C1102.0567%2C1102.1667%2C1102.2425%2C1102.5137%2C1102.3289%2C1102.1459%2C1102.2031%2C1102.3228%2C1102.5331%2C1102.2649%2C1102.3212%2C1102.1204%2C1102.3970%2C1102.3766%2C1102.4334%2C1102.3400%2C1102.0824%2C1102.0984%2C1102.2823%2C1102.1292%2C1102.0306%2C1102.1836%2C1102.2787%2C1102.4268%2C1102.4531%2C1102.5030%2C1102.2863%2C1102.1711%2C1102.1787%2C1102.3190%2C1102.3624%2C1102.0552%2C1102.1001%2C1102.4201%2C1102.2573%2C1102.4409%2C1102.5387%2C1102.4781%2C1102.4367%2C1102.2916%2C1102.5165%2C1102.3447%2C1102.3974%2C1102.5204%2C1102.3892%2C1102.3706%2C1102.4975%2C1102.2915%2C1102.4337%2C1102.1092%2C1102.1047%2C1102.3682%2C1102.0856%2C1102.4149%2C1102.0279%2C1102.3941%2C1102.3374%2C1102.1089%2C1102.4070%2C1102.3376%2C1102.4440%2C1102.1444%2C1102.0403%2C1102.5441%2C1102.0333%2C1102.0530%2C1102.5740%2C1102.0102%2C1102.5527%2C1102.4330%2C1102.2662%2C1102.4451%2C1102.0633%2C1102.1091%2C1102.5293%2C1102.0506%2C1102.1265%2C1102.1074%2C1102.0585%2C1102.3429%2C1102.1704%2C1102.0497%2C1102.4282%2C1102.0711%2C1102.1701%2C1102.0381&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Stable logarithmic maps to Deligne--Faltings pairs II"}, "summary": "We make an observation which enables one to deduce the existence of an\nalgebraic stack of log maps for all generalized Deligne--Faltings log\nstructures (in particular simple normal crossings divisor) from the simplest\ncase with log structures given by a Cartier divisor (essentially the smooth\ndivisor case).", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1102.2903%2C1102.4030%2C1102.3495%2C1102.5040%2C1102.3063%2C1102.0684%2C1102.4741%2C1102.2835%2C1102.3650%2C1102.2908%2C1102.1227%2C1102.0973%2C1102.5410%2C1102.0756%2C1102.0225%2C1102.0567%2C1102.1667%2C1102.2425%2C1102.5137%2C1102.3289%2C1102.1459%2C1102.2031%2C1102.3228%2C1102.5331%2C1102.2649%2C1102.3212%2C1102.1204%2C1102.3970%2C1102.3766%2C1102.4334%2C1102.3400%2C1102.0824%2C1102.0984%2C1102.2823%2C1102.1292%2C1102.0306%2C1102.1836%2C1102.2787%2C1102.4268%2C1102.4531%2C1102.5030%2C1102.2863%2C1102.1711%2C1102.1787%2C1102.3190%2C1102.3624%2C1102.0552%2C1102.1001%2C1102.4201%2C1102.2573%2C1102.4409%2C1102.5387%2C1102.4781%2C1102.4367%2C1102.2916%2C1102.5165%2C1102.3447%2C1102.3974%2C1102.5204%2C1102.3892%2C1102.3706%2C1102.4975%2C1102.2915%2C1102.4337%2C1102.1092%2C1102.1047%2C1102.3682%2C1102.0856%2C1102.4149%2C1102.0279%2C1102.3941%2C1102.3374%2C1102.1089%2C1102.4070%2C1102.3376%2C1102.4440%2C1102.1444%2C1102.0403%2C1102.5441%2C1102.0333%2C1102.0530%2C1102.5740%2C1102.0102%2C1102.5527%2C1102.4330%2C1102.2662%2C1102.4451%2C1102.0633%2C1102.1091%2C1102.5293%2C1102.0506%2C1102.1265%2C1102.1074%2C1102.0585%2C1102.3429%2C1102.1704%2C1102.0497%2C1102.4282%2C1102.0711%2C1102.1701%2C1102.0381&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We make an observation which enables one to deduce the existence of an\nalgebraic stack of log maps for all generalized Deligne--Faltings log\nstructures (in particular simple normal crossings divisor) from the simplest\ncase with log structures given by a Cartier divisor (essentially the smooth\ndivisor case)."}, "authors": ["Dan Abramovich", "Qile Chen"], "author_detail": {"name": "Qile Chen"}, "author": "Qile Chen", "arxiv_comment": "Add Section 4.7 to show the compatibility of minimality defined in\n  this paper with the basicness introduced by Gross-Siebert", "links": [{"href": "http://arxiv.org/abs/1102.4531v2", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1102.4531v2", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.AG", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.AG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "14D23, 14N35", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1102.4531v2", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1102.4531v2", "journal_reference": null, "doi": null, "fulltext": "arXiv:1102.4531v2 [math.AG] 26 Mar 2011\n\nSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS\nPAIRS II\nDAN ABRAMOVICH AND QILE CHEN\nAbstract. We make an observation which enables one to deduce the\nexistence of an algebraic stack of log maps for all generalized Deligne\u2013\nFaltings log structures (in particular simple normal crossings divisor)\nfrom the simplest case with characteristic generated by N (essentially\nthe smooth divisor case).\n\nContents\n1. Introduction\n2. Logarithmic maps: a tale of two categories\n3. The stacks of stable logarithmic maps\n4. The combinatorial description of minimality\n5. The case of a degeneration\nReferences\n\n1\n2\n6\n15\n18\n23\n\n1. Introduction\nThe idea of stable logarithmic maps was introduced in a legendary lecture by Bernd Siebert in 2001 [Sie01]. However, the program has been on\nhold for a while, since Mark Gross and Bernd Siebert were working on other\nprojects in mirror symmetry. Only recently they have taken up the unfinished project of Siebert jointly [GS]. The central object is a stack K\u0393 (Y )\nparameterizing what one calls stable logarithmic maps of log-smooth curves\ninto a logarithmic scheme Y with \u0393 indicating the relevant numerical data,\nsuch as genus, marked points, curve class and other indicators related to the\nlogarithmic structure. One needs to show K\u0393 (Y ) is algebraic and proper.\nGross and Siebert's approach builds on insights from tropical geometry, obtained by probing the stack of log maps using the standard log point. It\ncovers the case of fixed targets with Zariski log structures, and is currently\nbeing extended to targets with relatively coherent log structures.\nIn [Chen], the second author considers another combinatorial construction\nof the stack K\u0393 (Y ) when the logarithmic structure Y on the underlying\nscheme Y is associated to the choice of a line bundle with a section. The\nAbramovich supported in part by NSF grants DMS-0603284 and DMS-0901278. Chen\nsupported in part by funds from DMS-0901278.\n1\n\n\f2\n\nDAN ABRAMOVICH AND QILE CHEN\n\nmotivating case is that of a pair (Y , D), where D is a smooth divisor in\nthe smooth locus of the scheme Y underlying Y . This particular situation\nenables him to approach the degeneration formula of [LR01, IP03, Li02] in\nterms of logarithmic structures. It should be pointed out that these stable\nLogarithmic maps are not identical to those of Kim [Kim09], though they\nare closely related.\nOur point is that based solely on this special case, one can give a \"pure\nthought\" proof of algebraicity and properness of the stack K\u0393 (Y ) whenever\nY is a so called generalized Deligne-Faltings logarithmic structure. By saying\nY is a generalized Deligne-Faltings log structure we mean that there is a\nfine saturated sharp monoid P and a sheaf homomorphism P \u2192 MY which\nlocally lifts to a chart P \u2192 MY ; the slightly simpler Deligne-Faltings log\nstructure is the case where P = Nk . This in turn covers many of the cases of\ninterest, such as a variety with a simple normal crossings divisor, or a simple\nnormal crossings degeneration of a variety with a simple normal crossings\ndivisor. We generalize it a bit further in Proposition 3.13. It does not cover\nthe case of a normal crossings divisor which is not simple, but we expect to\ncover this case using descent arguments.\nThe purpose of this note is to set up a general categorical framework which\nenables us to make this construction. This general setup is of use not only\nfor K\u0393 (Y ). In particular we have applications, pursued elsewhere [ACGM],\nto constructing the target of evaluation maps of logarithmic Gromov-Witten\ntheory.\nAll logarithmic schemes in this note are assumed to be fine and saturated logarithmic schemes - abbreviated fs log schemes - unless indicated\notherwise.\n1.1. Acknowledgements. We thank Danny Gillam, Mark Gross, Davesh\nMaulik, Martin Olsson, Bernd Siebert, and Angelo Vistoli for numerous\nhelpful comments on this work.\n2. Logarithmic maps: a tale of two categories\n2.1. Stable maps. Let Y be a projective scheme. The stack of stable maps\nto Y is defined as follows: one fixes discrete data \u0393 = (g, n, \u03b2) where g, n\nare non-negative integers standing for genus and number of marked points,\nand \u03b2 is a curve class on Y . A pre-stable map to Y over a scheme S is a\ndiagram\n/Y\nC\n\n\u000f\nS\nwhere C \u2192 S is a proper flat family of n-pointed prestable curves, and\nC \u2192 Y a morphism. The prestable map is stable if on the fibers the groups\nAutY (C s ) are finite. Morphisms of prestable curves are defined as cartesian\ndiagrams.\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n3\n\nOne easily sees that prestable maps form a category fibered in groupoids\nover the category of schemes. It is an important theorem that this fibered\ncategory is represented by an algebraic stack K pre (Y ), and the substack\nK \u0393 (Y ) of stable maps of type \u0393 is proper with projective coarse moduli\nspace [Kon95]. When Y is smooth, there is a perfect obstruction theory,\ngiving rise to a virtual fundamental class [K \u0393 (Y )]virt underlying the usual\nalgebraic treatment of Gromov\u2013Witten theory [LT98, BF97].\nThe main result of this note is an analogue of the following evident result:\nassume Y = Y 1 \u00d7Y 2 Y 3 . Then\nK pre (Y ) = K pre (Y 1 )\n\n\u00d7\n\nK pre (Y 2 )\n\nK pre (Y 3 ).\n\n2.2. Stable logarithmic maps as a stack over LogSch. Let Y be a\nfs logarithmic scheme with projective underlying scheme Y . One can repeat the construction above, replacing prestable curves by log smooth curves\n[Kat00], and replacing all morphisms of schemes by morphisms of log schemes:\na pre-stable log map over S is a diagram of logarithmic schemes\n\n/Y\n\nC\n\n\u000f\nS\nwhere C \u2192 S is a log smooth curve and C \u2192 Y a morphism of log schemes.\nWe define such a map to be stable if the underlying prestable map is stable.\nArrows are defined using cartesian diagrams:\nC\u2032\n\n/C\n\n\u000f\nS\u2032\n\n\u000f\n/S\n\n/Y\n\nAgain it is evidently a category fibered in groupoids, but this time over\nthe category LogSch of fs logarithmic schemes. It is proven in [Chen] when\nthe log structure Y is given by a line bundle with a section, and more general\nin [GS], that this category is an fs logarithmic algebraic stack: there is a\nlogarithmic algebraic stack K\u0393 (Y ) = (K, MK ), where the log structure is fs,\nsuch that stable logarithmic maps over S are equivalent to log morphisms\nS \u2192 K\u0393 (Y ). Denote the universal log smooth curve by C \u2192 K\u0393 (Y ).\nIt is natural to search for general criteria for algebraicity of such logarithmic moduli which is analogous to Artin's work [Art74]. We do not address\nthis general question here.\n2.3. Stable logarithmic maps as a stack over Sch. The existence of\nK\u0393 (Y ) has immediate strong implications on the structure of stable log\nmaps. Objects of the underlying stack K\u0393 (Y ) over a scheme S can be\nunderstood as follows: an object is after all an arrow S \u2192 K\u0393 (Y ). It\n\n\f4\n\nDAN ABRAMOVICH AND QILE CHEN\n\nautomatically gives rise to a cartesian diagram\nC min\n\n/C\n\nS min\n\n\u000f\n\n\u000f\n/ K\u0393 (Y )\n\n\u000f\nS\n\n\u000f\n/ K\u0393 (Y ),\n\n/Y\n\nin particular an object S min \u2192 K\u0393 (Y ), but here the logarithmic structure\nS min is pulled back from K\u0393 (Y ). Moreover, every stable log map factors\nuniquely through one of this type: Given a stable log map over S we have a\nmorphism S \u2192 K\u0393 (Y ) by definition, giving rise to an extended diagram\nC\n\n/ C min\n\n/C\n\n\u000f\nS\n\n\u000f\n/ S min\n\n\u000f\n/ K\u0393 (Y )\n\n\u000f\nS\n\n\u000f\n/ K\u0393 (Y ).\n\n/Y\n\nFollowing B. Kim [Kim09] we call a log map over S minimal (not to be confused with log minimal models of the minimal model program) if S \u2192 K\u0393 (Y )\nis strict, namely the log structure on S is the pullback of the log structure on\nK\u0393 (Y ). It follows tautologically that the underlying stack K\u0393 (Y ) precisely\nparametrizes log maps with minimal log structure.\nIn fact this thought process is reversible: the construction of [Chen] in\nthe case of a Deligne-Faltings log structure of rank 1 goes by way of constructing a proposed minimal log structure associated to any log map, and\nverifying that log maps where the log structure is the proposed minimal\none are indeed minimal (every object maps uniquely to a minimal one), and\nform an algebraic stack over Sch carrying a logarithmic structure. In short,\nthe second categorical interpretation, of K\u0393 (Y ) as a stack over Sch, takes\nprecedence here.\nOne is tempted to try to mimic the same construction in general. This\nis not the route taken here. In fact we use the universality of the category\nK\u0393 (Y ) over LogSch for given Y to deduce its algebraicity from cases of\nsimpler Y . Minimal object are obtained as an afterthought in Proposition\n3.16 and described combinatorially in Section 4.1. It is worthwhile setting\nthis up in general.\n2.4. The general setup. Consider a commutative diagram\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\nXA\n\n5\n\nW\n\nAA\nAA\nAA\n\nB\n\n\u000f\nX?\n?\n\n}}\n}}\n}\n}\n}~ }\n\nf\n\n\u000f\n/W\n\n~\n??\n~~\n??\n~\n?\u001f \u000f \u007f~~~\n\nB\n\nwhere X \u2192 B is an integral morphism of fs log schemes with X \u2192 B flat\nand proper, W is an fs log scheme, and X \u2192 W a morphism. We can define\na category Liftf fibered in groupoids over LogSch whose objects over S are\nmorphisms S \u2192 B of fs log schemes with a lifting fS : XS \u2192 WS of the\nunderlying morphism f S : X S \u2192 W S . The arrows are again defined by\ntaking cartesian diagrams. We can ask the following question:\nProblem 2.5. Is the category Liftf equivalent to an fs logarithmic algebraic\nstack Lif tf ? Under what conditions is it proper?\nIn fact if convenient we can remove the geometry of W entirely from the\npicture, mimicking the methods of Olsson [Ols06]: consider W = W \u00d7B B\nand Z = X \u00d7W W . Then Z is a logarithmic scheme over X. The category\nLiftf is evidently equivalent to the category SecX/B (Z/X) whose objects\nover a log morphism S \u2192 B are sections XS \u2192 ZS of ZS \u2192 XS .\nThe main result is the following:\nTheorem 2.6. Let \u2206 = (Z\u03b1 , \u03c0\u03b1\u03b2 : Z\u03b1 \u2192 Z\u03b2 ) be a finite diagram of fs log\nschemes over X, with final object X. Assume\nZ = lim(\u2206)\n\u2190\u2212\nin the category of fs log schemes. Then\nSecX/B (Z/X) = lim SecX/B (Z\u03b1 /X)\n\u2190\u2212\nnamely it is the limit in the category of fs log schemes.\nIf the reader finds general categorical limits a bit off-putting, the main\ncases needed for our applications are (1) fiber products, and (2) equalizers,\nwhich can be described as fiber products using the diagonal morphisms.\nThe existence of such limits in the category of fs log schemes is proven in\n[Kat89]: the case of arbitrary log structures is treated in (1.6), coherent log\nstructures in (2.6), and fine log structures follow from (2.7); the case of fs\nlog structures follows from the analogous adjoint functor with P int replaced\nby P sat ([Ogu06, Chapter I, Proposition 1.2.3]).\n\n\f6\n\nDAN ABRAMOVICH AND QILE CHEN\n\nProof of the theorem. An object of SecX/B (Z/X) over an arrow S \u2192 B is\nby definition a section s : XS \u2192 Z, and composing with the canonical\nmaps we get s\u03b1 : XS \u2192 Z\u03b1 such that for each arrow \u03c0\u03b1\u03b2 : Z\u03b1 \u2192 Z\u03b2\nin \u2206 we have \u03c0\u03b1\u03b2 \u25e6 s\u03b1 = s\u03b2 . This in particular gives us a diagram of\nobjects s\u03b1 \u2208 SecX/B (Z\u03b1 /X)(S) with \u03c0\u03b1\u03b2 (s\u03b1 ) = s\u03b2 , namely an object of\nlim SecX/B (Zi /X). The correspondence on the level of arrows is similar\n\u2190\u2212\n(though maybe more confusing).\nThe process is completely reversible, hence the equivalence.\n\u2660\n3. The stacks of stable logarithmic maps\nTheorem 2.6 applies directly to the category Liftf and Problem 2.5. In the\npresent section we make this as explicit as possible, including a discussion\nof contact orders, the deformation-invariant numerical data encoded in the\nlogarithmic structure.\n3.1. The case of Deligne-Faltings pairs: setup. Let the target Y be a\nDF pair. We first break up the log structure MY into the known cases as\nin [Chen]. We may assume that P \u223c\n= Nm , and index the m copies of N by\nthe set {1, 2, * * * , m}. Note that the map P \u2192 MY locally lifts to a chart.\nConsider the i-th copy of N, and denote by Ni \u0592\u2192 P . Locally the following\ncomposition\nNi \u2192 P \u2192 MY\ndefines a rank 1 DF-log structure Mi on Y . Note that Mi \u2282 MY is a\nsub-log structure, and the following decomposition holds:\n(3.1.1)\n\nMY = M1 \u2295OY\u2217 M2 \u2295OY\u2217 * * * \u2295OY\u2217 Mm .\n\nDenote by Yi = (Y , Mi ) for all i. We view Y as a log scheme with trivial\nlog structure. The above decomposition is equivalent to\n(3.1.2)\n\nY = Y1 \u00d7 Y Y2 \u00d7 Y * * * \u00d7 Y Ym ,\n\nwhich can be written as\nY = lim Yi .\n\u2190\u2212\nNote that each Mi corresponds to a pair (Li , si ), consisting of a line bundle\nLi with a section si \u2208 H 0 (L\u2228\ni ).\n3.2. Numerical data and contact orders. We introduce a notation for\nthe numerical data:\nNotation 3.3. Denote by \u0393 = (\u03b2, g, n, c) where\n(1) \u03b2 \u2208 H 2 (Y , Z) is a curve class;\n(2) g is a non-negative integer, which will denote the genus of the source\ncurve;\n(3) n is a non-negative integer, which will denote the number of marked\npoints;\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n7\n\nj\nn\n(4) c = {(cji )m\ni=1 }j=1 is a set of tuples, where ci denotes the contact order\nof the j-th marking with respect to Mi . Hence we require that\n\n\u03b2\n\n* c1 (L\u2228\ni )\n\n=\n\nn\nX\n\ncji ,\n\nj=1\n\n\u2228\nwhere c1 (L\u2228\ni ) is the first chern class of Li .\n\nNote that the set c, hence the stack K\u0393 (X) we will construct later, depends on the choices of P . For example, consider the union of two disjoint divisors D = D1 \u222a D2 in Y . Denote by Ii the ideal sheaf of Di , and\nsi : Ii \u2192 OY the natural injection. Let MY be the standard log structure\nassociated to D on Y , and Y the log scheme (Y , MY ). Now we have two\nmap of sheaves of monoids\n(3.3.1)\n\nN \u2192 MY ,\n\nand\n\nN2 \u2192 MY ,\n\nwhere the first one is given by the ideal sheaf ID of D with the natural\ninjection sD : ID \u2192 OY , and the second one is given by the two pairs (Ii , si )\nfor i = 1, 2. Note that both maps of monoids in (3.3.1) can be lifted to\ncharts of MY locally.\nConsider a marked point p with assigned contact order c under the choice\nP = N. This includes the following two cases: p can have contact orders c\nwith D1 and 0 with D2 , or c with D2 and 0 with D1 . However if we choose\nthe second case where P = N2 , then the contact orders along both D1 and\nD2 will be specified. Thus, if we choose different choice of P , hence different\nc, we will obtain different tangency conditions, hence different stacks K\u0393 (Y ).\nlog\nIf we consider the stack Kg,n\n(Y, \u03b2) as in [Chen], which parametrizes minimal stable log maps with all possible choices of contact orders. This does\nnot depend on the choice of the monoid P . For any choice of P and \u0393, the\nlog\nstack K\u0393 (Y ) is an open and closed substack of Kg,n\n(Y, \u03b2).\nA further refined and entirely canonical formalism of contact orders follows from [ACGM]: given any fs logarithmic scheme Y one defines an Artin\nstack \u2227Y , locally of finite type over Y , parameterizing standard log points in\nY . We call it the evaluation space of Y . Given a stable log map f : C \u2192 Y\nand an integer j with 1 \u2264 j \u2264 n, the restriction f\u03a3j : \u03a3j \u2192 Y of f to the\nj-th marking, is an element of \u2227Y . This defines the j-th evaluation map\nKg,n (Y, \u03b2) \u2192 \u2227Y .\nDefinition 3.4. A logarithmic sector of Y is an element c \u2208 \u03c00 (\u2227Y ), namely\na connected component of the evaluation space of Y . A stable map f is said\nto have canonical contact order c = (c1 , . . . , cn ) if the j-th evaluation map\nlands in the logarithmic sector cj \u2208 \u03c00 (\u2227Y ).\nIn [GS, Formula (1.6)], Gross and Siebert introduce numerical data denoted up . This data is closely related to our canonical contact orders; this\nrelationship is made more precise in [ACGM].\n\n\f8\n\nDAN ABRAMOVICH AND QILE CHEN\n\nThe discussion which follows works equally well with the explicit and\ndown-to-earth contact orders of Definition 3.3, as with the canonical contact\norders of Definition 3.4.\n3.5. The case of Deligne-Faltings pairs: the stacks.\nDefinition 3.6. Denote by K\u0393 (Y ) (respectively K\u0393pre (Y )) the category fibered\nover LogSch, which parametrizes stable Log maps (respectively pre-stable\nlog maps) with discrete data \u0393 as in Notation 3.3.\nNote that for each i, we have a set ci = {cji }nj=1 . Consider the discrete\ndata \u0393i = (\u03b2, g, n, ci ). Then by [Chen] we have the log stack K\u0393i (Yi ), parameterizing minimal stable Log maps with discrete data \u0393i . (If instead\nwe use canonical contact orders, then ci is simply the image of c under the\ncanonical map \u03c00 (\u2227Y ) \u2192 \u03c00 (\u2227Yi ).)\nConsider the stack Kg,n (Y , \u03b2) of usual stable maps. Since the universal\ncurve is prestable, it has a canonical log smooth structure coming from Mg,n\nusing F. Kato's theorem [Kat00]. We put this in the setup of SecX/B (Z/X)\npre\n(Y , \u03b2) with the pull-back log structure\nby setting B to be Kg,n (Y , \u03b2) or Kg,n\ncoming from Mg,n ; X to be the universal curve with its canonical log structure; and W = Y \u00d7 B. Consider Z = X \u00d7(W \u00d7B B) W as before. Denote by\nZi = X \u00d7(W \u00d7B B) Wi for i = 1, * * * , m. Let Z0 = X \u00d7(W \u00d7B B) W . Then by\n(3.1.2), we have\n\u223c Z1 \u00d7Z Z2 \u00d7Z * * * \u00d7Z Zm ,\nZ=\n0\n0\n0\nor equivalently\nZ = lim Zi .\n\u2190\u2212\nCorollary 3.7. The fibered categories K\u0393 (Y ) and K\u0393pre (Y ) are represented\nby algebraic stacks equipped with fs log structures. Furthermore, K\u0393 (Y ) is\nrepresentable and finite over Kg,n (Y , \u03b2).\nProof. For the first statement, it follows from Theorem 2.6 that\n(3.7.1)\n\npre\nK\u0393pre (Y ) \u223c\n* * * \u00d7Kpre\nK\u0393pre\n(Ym ),\n= K\u03931 (Y1 ) \u00d7Kpre\ng,n (Y ,\u03b2)\ng,n (Y ,\u03b2)\nm\n\nwhere the fibered product are taken in the category of fs log schemes. It\n(Yi ). Note that\nwas shown in [Chen] that the first statement holds for K\u0393pre\ni\npre\nK\u0393 (Y , \u03b2).\nK\u0393 (Y ) \u223c\n= K\u0393 (Y ) \u00d7Kpre\ng,n (Y ,\u03b2)\n\nThus, the first statement follows.\nSimilarly, we have a fiber product of fs log stacks\n(3.7.2)\n\nK\u0393 (Y ) \u223c\n= K\u03931 (Y1 ) \u00d7Kg,n(Y ,\u03b2) * * * \u00d7Kg,n (Y ,\u03b2) K\u0393m (Ym ).\n\nNow the second statement follows from the finiteness of taking product in\nthe category of fs log schemes, see [Ogu06, Chapter 2, 2.4.5].\n\u2660\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n9\n\n3.8. The case of generalized Deligne-Faltings pairs. Slightly generalizing the above situation, we first give the following:\nDefinition 3.9. A log structure MY on Y is called a generalized DeligneFaltings log structure, if there exists a toric sharp monoid P and a map\nP \u2192 MY from the sheaf of constant monoid P , which locally lifts to a\nchart. The log scheme Y = (Y , MY ) is called a generalized Deligne-Faltings\n(DF) pair.\nConsider the target Y with generalized DF log structure MY , with a fixed\nmap P \u2192 MY as in Definition 3.9. Again we have B = Kg,n (Y , \u03b2) with\nthe pull-back log structure coming from Mg,n ; X is the universal curve of\nB with its canonical log structure; W = Y \u00d7 B; and Z = X \u00d7(W \u00d7B B) W as\nbefore.\nBy [Ogu06, Chapter 1, 2.1.9(7)], we have the following coequalizer diagram of monoids\n(3.9.1)\n\nv1\n\nN n2\n\n//\n\nv2\n\nN n1\n\nq\n\n/ P,\n\nwhere n1 and n2 are non-negative integers. This is equivalent to say that\nP = lim(Nn2 \u21d2 Nn1 ).\n\u2192\n\nThus we have the following push-out diagram of fs monoids:\n(3.9.2)\n\nN n2 \u2295 N n2\n\nid\u2295id\n\n/ N n2\n\nv1 \u2295v2\n\n\u000f\nN n1\n\n\u000f\n/ P.\n\nSince the map P \u2192 MY locally lifts to a chart, the two compositions\nNn1 \u2192 P \u2192 MY and Nn2 \u2192 P \u2192 MY\ninduce two DF log structures M1 and M2 respectively, with the following\ncoequalizer diagram of log structures:\n(3.9.3)\n\nv1\n\nM2\n\nv2\n\n// M\n\n1\n\nq\n\n/ MY .\n\nDenote by M3 = M2 \u2295OY\u2217 M2 . Since M2 is DF, there is a natural map\nNn2 \u2295 Nn2 \u2192 M3\nwhich locally lifts to a chart. Thus M3 is also a DF log structure. It is\nnot hard to check that the coequalizer diagram (3.9.3) is equivalent to the\nfollowing push-out diagram:\n(3.9.4)\n\nM3\n\nid\u2295id\n\n/ M2\n\nv1 \u2295v2\n\n\u000f\nM1\n\n\u000f\n/ MY .\n\n\f10\n\nDAN ABRAMOVICH AND QILE CHEN\n\nDenote by Yi = (Y , Mi ), for i = 1, 2, and 3. Then (3.9.3) induces a\nequalizer of log schemes:\nY \u2192 Y1 \u21d2 Y2 ,\nor equivalently\n(3.9.5)\n\nY = lim Yi .\n\u2190\u2212\n\nBy construction, the map Nni \u2192 Mi locally lifts to a chart. Hence each Yi\nis a DF pair.\nThe diagram (3.9.4) implies that (3.9.5) is equivalent to the following\ncartesian diagram of fs log schemes:\n(3.9.6)\n\nY\n\n/ Y2\n\n\u000f\nY1\n\n\u000f\n/ Y3 .\n\nDenote by Wi = Yi \u00d7 B, and Zi = X \u00d7(W i \u00d7B B) Wi . Then (3.9.5) and (3.9.6)\nimplies that\n(3.9.7)\n\nZ = lim Zi ,\n\u2190\u2212\nor equivalently the cartesian diagram of fs log schemes:\n(3.9.8)\n\nZ\n\n/ Z2\n\n\u000f\nZ1\n\n\u000f\n/ Z3 .\n\nWe can define discrete data using canonical contact orders c as in Definition 3.4. Alternatively, we can define a concret and down-to-earth version\nusing Irr(P ), the set of irreducible elements in P . Since the monoid P is\ntoric and sharp, Irr(P ) forms a set of generators of P . For each element\n\u03b1 \u2208 Irr(P ), there is a free sub-monoid N\u03b1 \u223c\n= N \u0592\u2192 P , which induces a rank\n1 DF sub-log structure M\u03b1 \u2282 MY . Denote by (L\u03b1 , s\u03b1 ) to be the pair of\nline bundle and sections corresponding to M\u03b1 . Again, we fix the numerical\ndata \u0393 = (\u03b2, g, n, c) such that\n(1) the data \u03b2, g, n denote the curve class, genus, and number of marked\npoints as in Notation 3.3;\n(2) c = {(cj\u03b1 )\u03b1\u2208Irr(P ) }nj=1 is a set of tuples, where cj\u03b1 denotes the contact\norder of the j-th marking with respect to M\u03b1 satisfying\n\u03b2*\n\nc1 (L\u2228\n\u03b1)\n\n=\n\nn\nX\n\ncj\u03b1 .\n\nj=1\n\nNote that the data \u0393 induces discrete data \u0393i for log maps to Yi via\n(3.9.2). We obtain the following:\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n11\n\nCorollary 3.10. Assume that the logarithmic structure of Y is a generalized\nDeligne\u2013Faltings log structure. Then the categories K\u0393 (Y ) and K\u0393pre (Y ) are\nalgebraic stacks with fs log structures. Furthermore, the stack K\u0393 (Y ) is\nrepresentable and finite over Kg,n (Y , \u03b2).\nProof. Again Theorem 2.6 implies that\npre\n(3.10.1)\nKpre (Y ) \u223c\n= K (Y1 ) \u00d7\n\u0393\n\n\u03931\n\nKpre\n\u0393 (Y3 )\n3\n\nK\u0393pre\n(Y2 )\n2\n\nand\n(3.10.2)\n\nK\u0393 (Y ) \u223c\n= K\u03931 (Y1 ) \u00d7K\u03933 (Y3 ) K\u03932 (Y2 )\n\nwhere the fibered product is taken over the category of fs log schemes. Now\nthe statement follows from the same argument as in Corollary 3.7.\n\u2660\n`\nRemark 3.11. Denote by Kg,n (Y, \u03b2) = \u0393\u2208\u039b K\u0393 (Y ), where \u039b is the set\nof all possible contact orders \u0393 = (\u03b2, g, n, c) with fixed g, n and \u03b2. Then\nKg,n (Y, \u03b2) represents the category of stable log maps over LogSch with all\npre\npossible\ncontact orders. Similarly, we can define the category Kg,n\n(Y, \u03b2) =\n`\npre\nK\n(Y\n),\nwhich\nparametrizes\nall\npre-stable\nlog\nmaps\nwith\nall\npossible\n\u0393\u2208\u039b \u0393\ncontact orders. Clearly, this is also represented by an algebraic stack with\nnatural fs log structure.\n3.12. A further generalization. We can weaken the Deligne\u2013Faltings assumption in Corollary 3.10 as follows. Consider a fine and saturated log\nscheme Y with a surjective homomorphism of sheaves of monoids NkY \u2192\nMY . This induces a new log scheme Y \u2032 with underlying scheme Y , and the\nlog structure MY \u2032 , which is locally given by the log structure associated\nto the composition of NkY \u2192 MY with a local chart MY \u2192 MY \u2192 OY .\nThus we have a natural map \u03c8 : Y \u2192 Y \u2032 with \u03c8 = idY . Note that the log\nstructure on Y \u2032 is Deligne-Faltings.\nAs in Section 2.2, we have a fibered category Kg,n (Y, \u03b2) parameterizing\ngenus g, n-pointed stable log maps with curve class \u03b2 to Y over LogSch.\nOne can also introduce canonical contact orders as in Definition 3.4. Note\nthat the map \u03c8 induces a natural map of the fibered categories\n(3.12.1)\n\n\u03c6 : Kg,n (Y, \u03b2) \u2192 Kg,n (Y \u2032 , \u03b2).\n\nProposition 3.13. The fibered category Kg,n (Y, \u03b2) is a logarithmic algebraic\nstack. Furthermore, the underlying morphism \u03c6 is representable and finite,\nand the map of log structures \u03c6\u2217 MKg,n (Y \u2032 ,\u03b2) \u2192 MKg,n (Y,\u03b2) is surjective.\nProof. By Corollary 3.10, we have that Kg,n (Y \u2032 , \u03b2) is a proper logarithmic\nalgebraic stack. It therefore suffices to prove the second statement in the\nproposition.\nWe construct Kg,n (Y, \u03b2) locally over Kg,n (Y \u2032 , \u03b2). We may assume we have\na fs log scheme of finite type B \u2032 and a stable log map (C \u2032 /B \u2032 , C \u2032 \u2192 Y \u2032 ). We\nclaim that B := B \u2032 \u00d7K\u0393 (Y \u2032 ) K\u0393 (Y ) \u2192 B \u2032 is a finite map of the underlying\nschemes, and the log structure of B \u2032 surjects to that of B.\n\n\f12\n\nDAN ABRAMOVICH AND QILE CHEN\n\nWe take Z = Y \u00d7Y \u2032 C \u2032 to be the fiber product in the category of fine log\nschemes. Then the canonical projection Z \u2192 C \u2032 induces a closed embedding\nZ \u2192 C \u2032 . By [SGA64, VIII Theorem 6.5] and the reduction argument [Abr94,\nTheorem 6(3)], there is a universal closed sub-scheme of W \u2282 B \u2032 satisfying\nthat for any T \u2192 B\u2032 if Z \u00d7B \u2032 T \u2192 C \u2032 \u00d7B \u2032 T is an isomorphism, then the\nmap T \u2192 B \u2032 factor through W uniquely. Note that any element of B over\nsome fs log scheme T is a commutative diagram\n\n(3.13.1)\n\nC ZT\n\n/Z\n\n/Y\n\n\u000f\nCT\u2032\n\n\u000f\n/ C\u2032\n\n\u000f\n/ Y\u2032\n\n\u000f\nT\n\n\u000f\n/ B \u2032.\n\nsT\n\nwhere the two upper squares are cartesian squares of fine log schemes, and\nthe bottom one is a cartesian square of fs log schemes. The map sT is\na section of ZT \u2192 CT\u2032 . Thus we have an isomorphism of the underlying\nschemes Z T \u223c\n= C \u2032T . This implies that the map T \u2192 B \u2032 , hence B \u2192 B \u2032\nfactors through W . We replace B \u2032 by W , with the pullback log structure.\nSince the problem is local, we may assume that there are sections \u03c3i :\n\u2032\nB \u2192 C \u2032 for i = 1, 2, * * * , n landing in the generic locus, and meeting every\ncomponent of every fiber. Let B0\u2032 = B \u2032 , Z0 = Z, and C0\u2032 = C \u2032 . We construct\nB by induction.\nDenote by B1\u2032 = B0\u2032 \u00d7C0\u2032 Z0 , where the product is taken via \u03c31 in the\ncategory of fs log schemes. It follows that the underlying map of the first\nprojection h1 : B1\u2032 \u2192 B0\u2032 is finite, and the map of log structures h\u266d1 : MB0\u2032 \u2192\nMB1\u2032 is surjective. We claim that the map B \u2192 B \u2032 factors through B1\u2032\nuniquely. To see this, we pick a commutative diagram as in (3.13.1). This\ninduces a commutative diagram\n\nZ0,T\nD\n\n/ Z0\n\n\u000f\n\u2032\nC0,T\nE\n\n\u000f\n/ C\u2032\n\n\u000f\nT\n\n\u000f\n/ B\u2032 .\n0\n\nsT\n0Y\n\u03c3i\n\n(\u03c3i )T\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n13\n\nhence a commutative diagram\nT @\n\n@\n\n@\n\n@\u001f\n\n#\n\nB1\u2032\n\n\u001b \u000f\nB0\u2032\n\n/ Z0\n\u03c31\n\n\u000f\n/ C\u2032\n\n0\n\nwhere the dashed arrow is induced by the universal property of fibered product. This proves the claim.\n\u2032\nReplacing Bi\u22121\nby Bi\u2032 one at a time, and repeating the previous step, we\n\u2032 } such that\nobtain a sequence of maps {hi : Bi\u2032 \u2192 Bi\u22121\ni\n(1) the underlying map hi is finite;\n\u2032\n(2) the map of log structures h\u266di : h\u2217i MBi\u22121\n\u2192 MBi\u2032 is surjective;\n(3) There is a canonical map B \u2192 Bi\u22121 of fibered categories over\nLogSch which factors through Bi uniquely.\nDenote by Zn \u2192 Cn\u2032 \u2192 Bn\u2032 the pull-back of Z \u2192 C \u2032 \u2192 B \u2032 via Bn\u2032 \u2192 B \u2032 .\nBy [Ols03, Lemma 3.5 iii], after taking finitely many sections \u03c3i , we may\nassume Zn \u2192 Cn\u2032 \u2192 Bn\u2032 has the property that Zn \u2192 Cn\u2032 is an isomorphism\nalong the smooth non-marked locus of each fiber.\nWe claim that Zn \u2192 Cn\u2032 is an isomorphism of log schemes. Since the\nunderlying map is an isomorphism, it is enough to show that the induced\nmap of characteristics  \u0304l : MZn \u2192 MCn\u2032 is an isomorphism. Note that we\nhave a cartesian diagram of fine log schemes:\n/Y\nZn\n\n\u000f\nCn\u2032\n\n\u000f\n/ Y \u2032.\n\nSince the map of log structures MY \u2032 \u2192 MY is surjective, the map of\nmonoids  \u0304l is also surjective.\nDenote by f : C \u2032n \u2192 Y the underlying stable map, and \u03c0n : Cn\u2032 \u2192 Bn\u2032 the\nmap of log curves. Locally at a marked point p \u2208 Cn\u2032 , we have a push-out\ndiagram of fine monoids:\nf \u2217 MY \u2032\n\n/ N p \u2295 \u03c0 \u2217 MB \u2032\n\n\u000f\n\u2217\nf MY\n\n\u000f\u000f\n/ MZ\nn\n\nn\n\nn\n\nl\u0304\n\nwhere N p \u223c\n= N = < \u03b4 > is the standard log structure given by the marking\nassociated to p. Pick two elements c1 \u03b4+e1 , c2 \u03b4+e2 \u2208 N p \u2295\u03c0n\u2217 MBn\u2032 locally at\np, where e1 , e2 \u2208 \u03c0n\u2217 MBn\u2032 , and c1 , c2 are two non-negative integers. Assume\n\n\f14\n\nDAN ABRAMOVICH AND QILE CHEN\n\nthat  \u0304l(c1 * \u03b4 + e1 ) =  \u0304l(c2 * \u03b4 + e2 ). By generalizing to a nearby smooth nonmarked point of p, we have  \u0304l(e1 ) =  \u0304l(e2 ). Since  \u0304l is an isomorphism at the\ngeneric smooth non-marked points, this implies that e1 = e2 . Thus, we have\n \u0304l(c1 \u03b4) =  \u0304l(c2 \u03b4). If c1 6= c2 , then there exists another positive integer c3 such\nthat  \u0304l(c3 \u03b4) = 0, which implies that c3 \u03b4 = 0 in N p . This is a contradiction.\nTherefore, we have c1 * \u03b4 + e1 = c2 * \u03b4 + e2 . This implies that  \u0304l is an injection,\nhence an isomorphism at each marked point. A similar argument as above\nwill imply that  \u0304l is also an isomorphism at each node. Therefore, the map\nZn \u2192 Cn\u2032 is an isomorphism of log schemes.\nNote that we have an element of B over Bn\u2032 , which is given by the identity\nmap id : Cn\u2032 \u2192 Zn . This induces a map Bn\u2032 \u2192 B. We claim that this map\nis an isomorphism of fibered categories over LogSch. Given an element of\nB over T as in (3.13.1), it is equivalent to have a commutative diagram\n\nC ZT\n\n/ Zn\n\n\u000f\nCT\u2032\n\n\u000f\n/ C\u2032\n\n\u000f\nT\n\n\u000f\n/ B\u2032 .\n\nsT\nn\n\nn\n\nwhere the two squares are cartesian squares of log schemes. Note that having\nsT is equivalent to have a commutative diagram\nf \u2217T MY \u2032\nf \u2217T MY\n\ntt\ntt\nt\ntt\ntz t\n\nII\nII\nII\nII\nI$\n\n/ MC \u2032 .\nn\n\nSince the morphism f \u2217T MY \u2032 \u2192 f \u2217T MY is a surjection, the section sT if\nexists, is unique. Hence, it is the pull-back of id : Cn\u2032 \u2192 Zn via T \u2192 Bn\u2032 .\nThis proves that B = Bn\u2032 .\n\u2660\n3.14. Minimal objects. Consider the fibered products (3.7.2), (3.10.2), or\nthe map (3.12.1). By pulling back the universal maps of each Yi , we obtain\nthe universal family of stable Log maps with discrete data \u0393:\n(3.14.1)\n\nC\n\n/Y\n\n\u000f\nK\u0393 (Y ).\nThis gives the first definition of the minimal stable Log maps:\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n15\n\nDefinition 3.15. A log map f : C \u2192 Y over a log scheme S is called\nminimal, if there exists a map g : S \u2192 K\u0393 (Y ) of the underlying structure,\nsuch that f is obtained by strict pull-back of (3.14.1) via g.\nProposition 3.16. Given any stable Log maps f : C \u2192 Y over a log scheme\nS, there exists (up to a unique isomorphism ) a unique minimal stable Log\nmap fm : Cm \u2192 Y over Sm , and a log map S \u2192 Sm such that\n(1) The log map f is given by the pull-back of fm via S \u2192 Sm .\n(2) The underlying map S \u2192 S m is the identity.\nProof. This follows from the universal property of K\u0393 (Y ) as a fibered category over LogSch.\n\u2660\n4. The combinatorial description of minimality\n4.1. The case of Deligne-Faltings pairs. The main result of [Chen] gives\nmore than just Corollary 3.10 for the case P = N: we have an explicit\ncombinatorial description of the minimal log structure associated to a given\nlog map, in terms of marked graphs. A similar description is possible in\ngeneral. We first present here the case P = Nm .\n4.1.1. The graph. Fix a log map f : C \u2192 Y over S, such that S is a\ngeometric point. Recall that we have a decomposition of Y as in (3.1.2).\nDenote by fi the following composition\n(4.1.1)\n\nf\n\nC \u2192 Y \u2192 Yi .\n\nLet Gi be the marked graph of the stable Log map fi as in [Chen].\nWe associate to the log map f a k-marked graph G, formed out of the\ndual graph of the curve C with the following extra data:\n(i)\n\n(1) k partitions of the vertices of G in two types V (G) = V0 (G) \u2294\n(i)\nV1 (G) according to the log maps fi as in [Chen], where i = 1, . . . , k.\n(i)\n(2) k integer weights cl \u2265 0, i = 1, . . . , m on the edges l \u2208 E(G), such\nthat cil is contact order of fi along l.\n(3) k orientations of edges: whenever an edge l has extremities v, v \u2032 and\n(i)\ncl > 0, we choose one of the orientations v >i v \u2032 or v \u2032 >i v of the\nedge l, which is given by the corresponding orientation in Gi .\n4.1.2. The monoid. We introduce a variable el for each edge l \u2208 E(G), and\n(i)\nm variables ev , i = 1, 2, * * * , m for each vertex v \u2208 V (G). Denote by hl,i the\n(i)\n(i)\n(i)\nedge equations ev\u2032 = ev + cl el for every edge l with extremities v \u2264i v \u2032 ;\n(i)\n(i)\nand hv,i the vertex equations ev = 0, for v \u2208 V0 (G). Consider the monoid\nE\u001e\nD\n(i)\nhl,i , hv,i l \u2208 E(G), v \u2208 V0 (Gi )\nM (G) = ev , el v \u2208 V(G), l \u2208 E(G)\n\n\f16\n\nDAN ABRAMOVICH AND QILE CHEN\n\nDenote by T (G) the torsion part of M (G)gp . Then we have the following\ncomposition\nM (G) \u2192 M (G)gp \u2192 M (G)gp /T (G).\nDenote by N (G) the image of M (G) in M (G)gp /T (G), and M(G) the saturation of N (G) in M (G)gp /T (G).\nRemark 4.2. When m = 1, the description in 4.1 is identical to the case\nin [Chen].\nProposition 4.3. There is a canonical morphism M(G) \u2192 MS . A log\nstructure is minimal if and only if this morphism is an isomorphism.\nProof. Consider the minimal stable Log map f m : C m \u2192 Y over S m , and a\nlog map S \u2192 S m , which satisfy the conditions in Proposition 3.16. Denote\nby fi the stable Log map given by the composition (4.1.1). Consider the\nminimal stable Log map fimin : Cimin \u2192 Yi over Simin and the log map\nS m \u2192 Simin given by Proposition 3.16. By (3.7.2), we have a fiber product\nof log schemes:\n(4.3.1)\n\nmin\n.\nS\u223c\n= S1min \u00d7S * * * \u00d7S Sm\n\nNote that the characteristic monoid of the right hand side of (4.3.1) is given\nby M(G). Thus, we obtain the map\nM(G) \u2192 MS .\nAssuming the log map f is minimal, this is equivalent to the map S \u2192 S m is\nan isomorphism, which is equivalent to the map on the level of characteristic\nMS m \u2192 MS is an isomorphism of monoid. This proves the statement. \u2660\n4.4. The case of generalized Deligne-Faltings pairs. Consider a log\nmap f : C \u2192 Y over S, such that S is a geometric point. We now assume\nthat Y is a generalized DF pair with a fixed global presentation P \u2192 MY .\nThus by (3.9.6), we have a cartesian diagram of log schemes:\n(4.4.1)\n\nh\n\nY\n\nu1\n\nh\n\n\u000f\nY1\n\n/ Y2\n\nu2\n\n\u000f\n/ Y3\n\nwhere Yi are DF pairs for i = 1, 2, 3. Let fi be the following composition\n(4.4.2)\n\nf\n\nC \u2192 Y \u2192 Yi ,\n\nfor i = 1, 2, 3.\n\nThen we obtain the marked graph Gi for the stable Log map fi as in Section\n4.1. Note that by removing all the weights and orientations, the underlying\ngraph Gi is the dual graph G of the underlying curve C over S, for all i.\nDenote by fim : Cim \u2192 Yi over Si the associated minimal log maps of fi ,\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n17\n\nand by f m : C m \u2192 Y over S m the associated minimal log maps of f . By\n(3.10.2), we obtain a cartesian diagram of log schemes:\n/ S2\n(4.4.3)\nSm\n\n\u000f\nS1\n\n\u000f\n/ S3 .\n\nLet M be the push-out of the following diagram in the category of toric\nsharp monoids:\n(4.4.4)\n\nM(G3 )\n\n/ M(G2 )\n\n\u000f\nM(G1 ).\nThen we have:\nProposition 4.5. There is a canonical map \u03c6 : M \u2192 MS . The log map f\nis minimal if and only if \u03c6 is an isomorphism.\nProof. The statement can be proved similarly using the argument as for\nProposition 4.3, and the fact that (4.4.3) is cartesian.\n\u2660\nRemark 4.6. We feel that the expression of M using the push-out diagram\n(4.4.4) is good enough for the purpose of calculations. But it is possible to\nwrite down an explicit formation of the base monoids as in Section 4.1.2.\nWe leave it for interested readers.\n4.7. Compatibility with Gross-Siebert's construction. As mentioned\nin the introduction, another construction of the stack of stable log maps\nis given by Gross and Siebert using so called basic stable log maps when\nthe target is equipped with Zariski log structures. In fact, when both the\nZariski condition and the generalized Deligne-Faltings or the condition in\nProposition 3.13 apply to the log structures on the targets, the notions of\nbasic log maps and minimal log maps are identical.\nProposition 4.8. A stable log map is minimal if and only if it is basic in\nthe sense of [GS, Definition 1.17].\nProof. This follows since basic log maps and minimal log maps satisfy the\nsame universal property: by Proposition 3.16, any given log map is uniquely\nthe pullback of a unique minimal log map on the same underlying base\nscheme. The same universal property holds for basic log maps by [GS,\nProposition 1.20].\n\u2660\nRemark 4.9. Both minimality and basicness can be defined by putting\nconstrains on the characteristic monoids of the bases. Thus, Proposition\n4.8 can be proved directly by comparing the base monoids of both minimal\nand basic stable log maps. We provide an argument when the log structure\n\n\f18\n\nDAN ABRAMOVICH AND QILE CHEN\n\non the target Y is Deligne-Faltings. The general situation can be proved\nsimilarly, but with more complicated notation and combinatorics.\nWe assume that there is a map Nk \u2192 MY locally lifting to a chart of\nMY . Consider the log scheme Yi as in Section 4.1. Let Di be the locus\nwith non-trivial log structure in Yi . Consider a stable log map f : C \u2192 Y\nover a log scheme S. Since both minimality and basicness can be defined\nfiber-wise, we might assume that S is a geometric point.\nConsider a generic point \u03b7 \u2208 C with associated irreducible component\nv \u2208 V (G), where G is the marked graph of f . In [GS, Construction 1.15],\nthe factor P\u03b7 can be viewed as the free monoid generated by the degeneracy\nev,i of v for i = 1, 2, * * * , k with the condition that ev,j = 0 if and only if the\nj\ncomponent\nQ v does not map into Di , or equivalently v \u2208 Vnd (G). Consider the\nmonoid q\u2208C N appearing as a factor in the expression [GS, (1.15)], where\nq \u2208 C denotes the nodes. It can be viewed as the free monoid generated by\nthe elements el for each l \u2208 E(G). Note that the condition aq (m) in [GS,\nConstruction 1.15] is exactly theQthe edge condition hl,i in Section 4.1.2.\nThus, the description of P\u03b7 and q\u2208C N using the elements associated to\nvertices and edges induces a natural isomorphism Q \u2192 M(G), where Q is\nthe monoid defined in [GS, (1.14)]. In fact, the object (Q, MC , \u03c8, \u03c6) defined\nin [GS, Construction 1.15] is equivalent to the data of a marked graph G.\nThis provides an explicit derivation of Proposition 4.8 in this case.\n5. The case of a degeneration\n5.1. Stable log maps relative to a base. Consider a family of projective\nlog schemes \u03c0 : X \u2192 B, such that MX and MB are generalized DF log\nstructures. We defined in [Chen, Definition 2.1.2] that a family of pre-stable\nlog maps over S with target X/B is a commutative diagram of log schemes:\n(5.1.1)\n\nC\n\n\u000f\nS\n\nf\n\n\u03c6\n\n/X\n\u000f\n/ B,\n\nsuch that the family C \u2192 S is a pre-stable log curve. For simplicity, we\ndenote it by \u03be = (C \u2192 S, f, \u03c6), and omit the target X \u2192 B, if there is no\ndanger of confusion. The log map \u03be is called stable, if the underlying map \u03be\nis stable in the usual sense.\nConsider two pre-stable log maps \u03be1 = (C1 \u2192 S1 , f1 , \u03c61 ) and \u03be2 = (C2 \u2192\nS2 , f2 , \u03c62 ). An arrow \u03be1 \u2192 \u03be2 is given by a pair (g : C1 \u2192 C2 , h : S1 \u2192 S2 )\nwhich fits in the following commutative diagram:\nC1\n\n\u000f\nS1\n\ng\n\nh\n\n/ C2\n\u000f\n/ S2\n\nf1\n\n\u03c61\n\n/X\n\u000f\n/ B,\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n19\n\nsuch that the square on the left is a cartesian square of log schemes, and\nf2 = f1 \u25e6 g and \u03c62 = \u03c61 \u25e6 h.\nWe fix a curve class \u03b2 on the fiber of \u03c0. Define Kg,n (X/B, \u03b2) (respectively\npre\nKg,n (X/B, \u03b2)) to be the fibered category over LogSch, parameterizing stable\n(respectively pre-stable) log maps to X/B with genus g, n-marked points\nand curve class \u03b2 on the fiber.\n5.2. The case when \u03c0 : X \u2192 B is strict. Note that we have a natural\nmap Kg,n (X/B, \u03b2) \u2192 Kg,n (X/B, \u03b2) by removing all log structures from the\ntarget. Thus, the stack Kg,n (X/B, \u03b2) is the stack of usual stable maps to\nX/B with the canonical log structure from the underlying curves. Note that\nthe stack Kg,n (X/B, \u03b2) is proper over B. Similarly, we have the natural map\npre\npre\npre\nKg,n\n(X/B, \u03b2) \u2192 Kg,n\n(X/B, \u03b2), where Kg,n\n(X/B, \u03b2) is the stack parameterizing usual pre-stable maps to X/B with the canonical log structure from\nthe underlying curves. We first consider the strict case:\nLemma 5.3. Assume that the map \u03c0 : X \u2192 B is strict. Then there is a\ncanonical isomorphism of log stacks\n\u223c Kpre (X/B, \u03b2) \u00d7B B.\nKpre (X/B, \u03b2) =\ng,n\n\ng,n\n\nIn particular, by requiring the stability conditions, we have\nKg,n (X/B, \u03b2) \u223c\n= Kg,n (X/B, \u03b2) \u00d7B B.\nProof. Consider the following commutative diagram\n(5.3.1)\n\npre\nKg,n\n(X/B, \u03b2)\n\n/B\n\n\u000f\npre\nKg,n\n(X/B, \u03b2)\n\n\u000f\n/ B.\n\n\u03c0\n\nWe need to prove the above diagram is cartesion. Consider an object\n\u03be = (p : C \u2192 S, f : C \u2192 X, \u03c6 : S \u2192 B) \u2208 Kg,n (X/B, \u03b2).\nThis is equivalent to have\n\u03be \u2032 = (p : C \u2192 S, f : C \u2192 X, \u03c6 : S \u2192 B) \u2208 Kg,n (X/B, \u03b2)\nand maps of log structures f \u266d : f \u2217 MX \u2192 MC and \u03c6\u266d : \u03c6\u2217 MB \u2192 MS such\nthat the following diagram of log structures is commutative:\n(5.3.2)\n\nf \u2217 \u25e6 \u03c0 \u2217 MB\n\n/ f \u2217 MX\n\n\u000f\np\u2217 MS\n\n\u000f\n/ MC .\n\nSince the map \u03c0 is strict, the data of f \u266d , \u03c6\u266d , and (5.3.2) is equivalent to give\na map of log schemes \u03c6 : S \u2192 B, whose underlying structure is compatible\nwith \u03c6 in \u03be \u2032 . This proves that (5.3.1) is cartesian.\n\n\f20\n\nDAN ABRAMOVICH AND QILE CHEN\n\nThe second statement follows since\npre\nKg,n\n(X/B, \u03b2)\nKg,n (X/B, \u03b2) \u223c\n= Kg,n (X/B, \u03b2) \u00d7Kpre\ng,n (X/B,\u03b2)\n\n\u2660\n5.4. Stack parameterizing log sources and targets. Denote by Mg,n\nthe stack of pre-stable curves with its canonical log structure. It is proved\nin [Kat00] that the log stack Mg,n represents the category of all genus g,\nn-marked pre-stable log curves over LogSch. Consider the new stack\nB = B \u00d7 Mg,n .\nIt represents a fibered category over LogSch, such that for each log scheme\nS, it associates diagrams of the following form:\n(5.4.1)\n\nC\n\n\u000f\nS\n\n\u03c6\n\n/ B,\n\nwhere C \u2192 S is a log curve. Denote (5.4.1) by \u03b6 = (C/S, \u03c6). Given two\nobjects \u03b61 = (C1 /S1 , \u03c61 ) and \u03b62 = (C2 /S2 , \u03c62 ), an arrow \u03b62 \u2192 \u03b61 is given by\nthe following commutative diagram:\n(5.4.2)\n\nC1\n\n\u000f\nS1\n\ng\n\nh\n\n/ C2\n\u000f\n/ S2\n\n\u03c61\n\n/ B,\n\nsuch that the square is catesian of log schemes, and \u03c62 = \u03c61 \u25e6 h.\nLemma 5.5. We have the following canonical isomorphism of log stacks:\npre\nB\u223c\n(B/B, 0).\n= Kg,n\n\nProof. By Lemma 5.3, we have\npre\npre\nKg,n\n(B/B, 0) \u223c\n(B/B, 0) \u00d7B B \u223c\n= Mg,n \u00d7B B \u223c\n= B.\n= Kg,n\n\n\u2660\n5.6. Construction of Kg,n (X/B, \u03b2). We have the following:\npre\nProposition 5.7. The fibered categories Kg,n (X/B, \u03b2) and Kg,n\n(X/B, \u03b2)\nare represented by algebraic stacks with a natural fs log structures. Furthermore, the underlying stack of Kg,n (X/B, \u03b2) is a DM-stack of finite type.\npre\nProof. Consider the stack Kg,n\n(B, 0) as in Remark 3.11 and the natural map\npre\npre\nKg,n\n(X, \u03b2) \u2192 Kg,n\n(B, 0) induced by \u03c0 : X \u2192 B as \u03c0\u2217 \u03b2 = 0. We have the\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n21\n\nfollowing commutative diagram:\n(5.7.1)\n\npre\n(X/B, \u03b2)\nKg,n\n\npre\n/ Kg,n\n(X, \u03b2)\n\n\u000f\nB\n\n\u000f\npre\n/ Kg,n\n(B, 0),\n\nwhere the right arrow is induced by \u03c0, the left and top arrow is obtained by\nremoving the maps to X and to B in (5.1.1) respectively, and the bottom\narrow is obtained by the composition in (5.4.1).\npre\nIn fact, giving an object \u03be = (C/S, f, \u03c6) \u2208 Kg,n\n(X/B, \u03b2) over S is equivalent to giving an object \u03b6 = (C/S, \u03c6), and a stable log map f : C \u2192 X,\nwhich induce the same map C \u2192 B. Thus (5.7.1) is a fibered diagram of\npre\nfs log stacks. This proves that Kg,n\n(X/B, \u03b2) is an algebraic stack with a\nnatural fs log structure. Note that with stability condition, Kg,n (X/B, \u03b2)\npre\nforms an open substack of Kg,n\n(X/B, \u03b2), hence is also algebraic.\nNote that the image of the Kg,n (X/B, \u03b2) in B is contained in an open\nsubstack of finite type. Therefore, the stack Kg,n (X/B, \u03b2) is of finite type.\npre\nFinally, since B \u223c\n= Kg,n (B/B, 0) by Lemma 5.5, it follows that the bottom\narrow of (5.7.1) is representable. Since the underlying stack of Kg,n (X, \u03b2)\nis a DM-stack, the finiteness of saturation implies that the underlying stack\nof Kg,n (X/B, \u03b2) is also a DM-stack.\nThis finishes the proof of the statement.\n\u2660\nProposition 5.8. The stack Kg,n (X/B, \u03b2) is proper over B.\nProof. Denote by X = X \u00d7B B. Thus we have a canonical map X \u2192 X,\nand a strict map \u03c0 \u2032 : X \u2192 B. Note also that the log structure on X is of\ngeneralized Deligne-Faltings. By Proposition 5.7 and (5.7.1), we have the\nfollowing cartesian diagram:\n(5.8.1)\n\nKg,n (X/B, \u03b2)\n\n/ Kg,n (X, \u03b2)\n\n\u000f\nKg,n (X/B, \u03b2)\n\n\u000f\n/ Kg,n (X, \u03b2)\n\n\u000f\nB\n\n\u000f\npre\n/ Kg,n\n(B, \u03c0\u2217 \u03b2).\n\nNote that by Corollary 3.10 both Kg,n (X, \u03b2) and Kg,n (X, \u03b2) are representable and finite over Kg,n (X, \u03b2). It follows from [LMB00, Lemma 3.12]\nthat the canonical map Kg,n (X, \u03b2) \u2192 Kg,n (X, \u03b2) is representable, hence is\nproper. By Lemma 5.3, the stack Kg,n (X/B, \u03b2) is proper over B. Thus the\nstatement of the proposition follows.\n\u2660\n\n\f22\n\nDAN ABRAMOVICH AND QILE CHEN\n\n5.9. Minimal objects in the degenerated case. By (5.7.1), we have a\nuniversal diagram of stable log maps:\n/X\n(5.9.1)\nC\n\n\u000f\nKg,n (X/B, \u03b2)\n\n\u000f\n/ B.\n\nDefinition 5.10. Consider a stable log map \u03be = (C \u2192 S, f, \u03c6) as in (5.1.1).\nIt is called minimal if there is a map of underlying structures g : S \u2192\nKg,n (X/B, \u03b2), such that \u03be is obtained by the strict pull-back of (5.9.1) via\ng.\nCorollary 5.11. Given a stable Log map \u03be = (C \u2192 S, f, \u03c6), there exists a\nminimal stable log map \u03bemin = (Cmin \u2192 Smin , fmin , \u03c6min ), and a log map\ng : S \u2192 Smin such that\n(1) \u03be is obtained by pull-back \u03bemin via g.\n(2) The underlying map g is an identity.\nFurthermore, the pair (\u03bemin , g) is unique up to a unique isomorphism.\nProof. By Proposition 5.7, the log map \u03be is equivalent to a log map S \u2192\nKg,n (X/B, \u03b2). Define \u03bemin to be the minimal log map given by the under\u2660\nlying map S \u2192 Kg,n (X/B, \u03b2). This proves the statement.\n5.12. Compatibility of minimality. We show that minimality in the degeneration case is equivalent to minimality of the map to the total space.\nFirst a lemma:\nLemma 5.13. Given a stable log map \u03be = (C \u2192 S, f, \u03c6) \u2208 Kg,n (X/B, \u03b2),\npre\nits image in Kg,n\n(B, 0) is a log map with zero contact orders.\npre\nProof. Note that the map Kg,n (X/B, \u03b2) \u2192 Kg,n\n(B, \u03c0\u2217 \u03b2) factors through B,\nwhich induces stable log maps with only zero contact orders.\n\u2660\n\nProposition 5.14. Consider \u03be = (C \u2192 S, f, \u03c6) \u2208 Kg,n (X/B, \u03b2) a stable\nLog map over S. It is minimal in the sense of Definition 5.10, if and only\nif the induced stable log map f : C \u2192 X over S in Kg,n (X, \u03b2) is minimal in\nthe sense of Definition 3.15.\nProof. In fact, we will prove that the top arrow in (5.7.1) is strict. This is\nequivalent to showing that the bottom arrow in (5.7.1) is strict. This can\nbe checked directly using the construction in the push-out diagram (4.4.4).\nConsider a diagram\nC\n\n\u000f\n\u03c6\n/ B,\nS\ninduced by a strict map S \u2192 B. It is enough to consider the case that S\nis a geometric point. Then we obtain an induced log map h : C \u2192 B over\n\n\fSTABLE LOGARITHMIC MAPS TO DELIGNE\u2013FALTINGS PAIRS II\n\n23\n\nS. Consider the minimal log map h\u2032 : C \u2032 \u2192 B over S \u2032 with the following\ncommutative diagram\n(5.14.1)\n\nC\n\nj\n\n/ C\u2032\np\n\n\u000f\nS\n\nk\n\n\u000f ~\n/ S\u2032\n\nh\u2032\n\n~\n\n~\n\n/B\n\n~>\n\n\u03c6\n\nsuch that h = h\u2032 \u25e6 j, the underlying map k is identity, the square is cartesian\nof fs log schemes, and \u03c6 is the underlying map of \u03c6. It is enough to show that\nthe map on the level of characteristic k\u0304 : MS \u2032 \u2192 MS is an isomorphism.\nNote that the map h\u2032 has only zero contact orders. Otherwise, the composition h = h\u2032 \u25e6 j will have non-zero contact orders, which violates Lemma\n5.13. Since all nodes of C is non-distinguished, all the edge equations in Section 4.1.2 is trivial. Hence the construction in Section 4.4 implies a natural\nC/S\nC/S\nsplitting MS \u2032 = MS \u2295 M, where MS can be viewed as the submonoid\nin MS \u2032 generated by the elements associated to edges, and M is generated\nby the element associated to vertices.\nC/S\nOn the other hand, we have MS = MS \u2295 \u03c6\u2217 MB . The map k\u0304 induces\na map g : M \u2192 \u03c6\u2217 MB . Using the fact that all contact orders are zero and\nthe construction in (4.4.4), we can check that g is an isomorphism. This\nimplies that k\u0304 is an isomorphism.\n\u2660\n\nReferences\n[Abr94]\n\nDan Abramovich, Subvarieties of semiabelian varieties, Compositio Math. 90\n(1994), no. 1, 37\u201352. MR MR1266493 (95c:14054)\n[ACGM] D. Abramovich, Q. Chen, D. Gillam, and S. Marcus, The evaluation space of\nlogarithmic stable maps, arXiv:1012.5416v1, preprint.\n[Art74] M. Artin, Versal deformations and algebraic stacks, Invent. Math. 27 (1974),\n165\u2013189. MR MR0399094 (53 #2945)\n[BF97] K. Behrend and B. Fantechi, The intrinsic normal cone, Invent. Math. 128\n(1997), no. 1, 45\u201388. MR MR1437495 (98e:14022)\n[Chen]\nQile Chen,\nStable logarithmic maps to Deligne-Faltings pairs I,\narXiv:1008.3090v3, Preprint.\n[GS]\nMark Gross and Bernd Siebert, Logarithmic Gromov-Witten invariants,\narXiv:1102.4322v1 Preprint.\n[IP03]\nEleny-Nicoleta Ionel and Thomas H. Parker, Relative Gromov-Witten invariants,\nAnn. of Math. (2) 157 (2003), no. 1, 45\u201396. MR MR1954264 (2004a:53112)\n[Kat89] Kazuya Kato, Logarithmic structures of Fontaine-Illusie, Algebraic analysis, geometry, and number theory (Baltimore, MD, 1988), Johns Hopkins Univ. Press,\nBaltimore, MD, 1989, pp. 191\u2013224. MR MR1463703 (99b:14020)\n[Kat00] Fumiharu Kato, Log smooth deformation and moduli of log smooth curves, Internat. J. Math. 11 (2000), no. 2, 215\u2013232. MR MR1754621 (2001d:14016)\n[Kim09] Bumsig Kim, Logarithmic stable maps, arXiv:0807.3611V2 (2009), To appear\nin the proceedings volume of the conference \"New developments in Algebraic\nGeometry, Integrable Systems and Mirror symmetry\", RIMS, Kyoto.\n\n\f24\n\nDAN ABRAMOVICH AND QILE CHEN\n\n[Kon95] Maxim Kontsevich, Enumeration of rational curves via torus actions, The moduli space of curves (Texel Island, 1994), Progr. Math., vol. 129, Birkh\u00e4user,\nBoston, MA, 1995, pp. 335\u2013368.\n[Li02]\nJun Li, A degeneration formula of GW-invariants, J. Differential Geom. 60\n(2002), no. 2, 199\u2013293. MR 1938113 (2004k:14096)\n[LMB00] G\u00e9rard Laumon and Laurent Moret-Bailly, Champs alg\u00e9briques, Ergebnisse der\nMathematik und ihrer Grenzgebiete. 3. Folge. A Series of Modern Surveys in\nMathematics [Results in Mathematics and Related Areas. 3rd Series. A Series of Modern Surveys in Mathematics], vol. 39, Springer-Verlag, Berlin, 2000.\nMR MR1771927 (2001f:14006)\n[LR01] An-Min Li and Yongbin Ruan, Symplectic surgery and Gromov-Witten invariants of Calabi-Yau 3-folds, Invent. Math. 145 (2001), no. 1, 151\u2013218.\nMR MR1839289 (2002g:53158)\n[LT98]\nJun Li and Gang Tian, Virtual moduli cycles and Gromov-Witten invariants of\nalgebraic varieties, J. Amer. Math. Soc. 11 (1998), no. 1, 119\u2013174. MR 1467172\n(99d:14011)\n[Ogu06] Arthur Ogus, Lectures on logarithmic algebraic geometry, TeXed notes (2006).\n[Ols03] Martin C. Olsson, Logarithmic geometry and algebraic stacks, Ann. Sci. \u00c9cole\nNorm. Sup. (4) 36 (2003), no. 5, 747\u2013791. MR MR2032986 (2004k:14018)\n[Ols06]\n, Hom-stacks and restriction of scalars, Duke Math. J. 134 (2006), no. 1,\n139\u2013164. MR MR2239345 (2007f:14002)\n[SGA64] Sch\u00e9mas en groupes. II: Groupes de type multiplicatif, et structure des sch\u00e9mas\nen groupes g\u00e9n\u00e9raux, S\u00e9minaire de G\u00e9om\u00e9trie Alg\u00e9brique du Bois Marie 1962/64\n(SGA 3). Dirig\u00e9 par M. Demazure et A. Grothendieck. Lecture Notes in Mathematics, Vol. 152, Springer-Verlag, Berlin, 1962/1964. MR MR0274459 (43\n#223b)\n[Sie01]\nBernd Siebert, Gromov-Witten invariants in relative and singular cases, Lecture\ngiven in the workshop on algebraic aspects of mirror symmetry, Universit\u00e4t\nKaiserslautern, Germany, Jun. 26 2001.\nDepartment of Mathematics, Brown University, Box 1917, Providence, RI\n02912, U.S.A.\nE-mail address: abrmovic@math.brown.edu, q.chen@math.brown.edu\n\n\f"}