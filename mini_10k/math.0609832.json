{"id": "http://arxiv.org/abs/math/0609832v1", "guidislink": true, "updated": "2006-09-29T05:41:03Z", "updated_parsed": [2006, 9, 29, 5, 41, 3, 4, 272, 0], "published": "2006-09-29T05:41:03Z", "published_parsed": [2006, 9, 29, 5, 41, 3, 4, 272, 0], "title": "Confluence Theory for Graphs", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0609780%2Cmath%2F0609722%2Cmath%2F0609832%2Cmath%2F0609179%2Cmath%2F0609242%2Cmath%2F0609460%2Cmath%2F0609086%2Cmath%2F0609052%2Cmath%2F0609048%2Cmath%2F0609285%2Cmath%2F0609235%2Cmath%2F0609105%2Cmath%2F0609189%2Cmath%2F0609123%2Cmath%2F0609068%2Cmath%2F0609524%2Cmath%2F0609072%2Cmath%2F0609266%2Cmath%2F0609386%2Cmath%2F0609334%2Cmath%2F0609785%2Cmath%2F0609641%2Cmath%2F0609188%2Cmath%2F0609011%2Cmath%2F0609491%2Cmath%2F0609729%2Cmath%2F0609248%2Cmath%2F0609146%2Cmath%2F0609435%2Cmath%2F0609496%2Cmath%2F0609268%2Cmath%2F0609200%2Cmath%2F0609791%2Cmath%2F0609080%2Cmath%2F0609838%2Cmath%2F0609688%2Cmath%2F0609034%2Cmath%2F0609715%2Cmath%2F0609051%2Cmath%2F0609128%2Cmath%2F0609673%2Cmath%2F0609076%2Cmath%2F0609392%2Cmath%2F0609599%2Cmath%2F0609088%2Cmath%2F0609008%2Cmath%2F0609744%2Cmath%2F0609807%2Cmath%2F0609368%2Cmath%2F0609820%2Cmath%2F0609062%2Cmath%2F0609455%2Cmath%2F0609763%2Cmath%2F0609703%2Cmath%2F0609385%2Cmath%2F0609774%2Cmath%2F0609271%2Cmath%2F0609104%2Cmath%2F0609283%2Cmath%2F0609583%2Cmath%2F0609169%2Cmath%2F0609220%2Cmath%2F0609611%2Cmath%2F0609738%2Cmath%2F0609594%2Cmath%2F0609310%2Cmath%2F0609038%2Cmath%2F0609364%2Cmath%2F0609694%2Cmath%2F0609208%2Cmath%2F0609403%2Cmath%2F0609747%2Cmath%2F0609273%2Cmath%2F0609238%2Cmath%2F0609291%2Cmath%2F0609284%2Cmath%2F0609096%2Cmath%2F0609458%2Cmath%2F0609312%2Cmath%2F0609264%2Cmath%2F0609487%2Cmath%2F0609057%2Cmath%2F0609290%2Cmath%2F0609408%2Cmath%2F0609842%2Cmath%2F0609365%2Cmath%2F0609384%2Cmath%2F0609773%2Cmath%2F0609701%2Cmath%2F0609492%2Cmath%2F0609082%2Cmath%2F0609217%2Cmath%2F0609391%2Cmath%2F0609471%2Cmath%2F0609534%2Cmath%2F0609695%2Cmath%2F0609776%2Cmath%2F0609340%2Cmath%2F0609790%2Cmath%2F0609546%2Cmath%2F0609150&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Confluence Theory for Graphs"}, "summary": "We develop a theory of confluence of graphs. We describe an algorithm for\nproving that a given system of reduction rules for abstract graphs and graphs\nin surfaces is locally confluent. We apply this algorithm to show that each\nsimple Lie algebra of rank at most 2, gives rise to a confluent system of\nreduction rules of graphs (via Kuperberg's spiders) in an arbitrary surface. As\na further consequence of this result, we find canonical bases of SU_3-skein\nmodules of cylinders over orientable surfaces.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0609780%2Cmath%2F0609722%2Cmath%2F0609832%2Cmath%2F0609179%2Cmath%2F0609242%2Cmath%2F0609460%2Cmath%2F0609086%2Cmath%2F0609052%2Cmath%2F0609048%2Cmath%2F0609285%2Cmath%2F0609235%2Cmath%2F0609105%2Cmath%2F0609189%2Cmath%2F0609123%2Cmath%2F0609068%2Cmath%2F0609524%2Cmath%2F0609072%2Cmath%2F0609266%2Cmath%2F0609386%2Cmath%2F0609334%2Cmath%2F0609785%2Cmath%2F0609641%2Cmath%2F0609188%2Cmath%2F0609011%2Cmath%2F0609491%2Cmath%2F0609729%2Cmath%2F0609248%2Cmath%2F0609146%2Cmath%2F0609435%2Cmath%2F0609496%2Cmath%2F0609268%2Cmath%2F0609200%2Cmath%2F0609791%2Cmath%2F0609080%2Cmath%2F0609838%2Cmath%2F0609688%2Cmath%2F0609034%2Cmath%2F0609715%2Cmath%2F0609051%2Cmath%2F0609128%2Cmath%2F0609673%2Cmath%2F0609076%2Cmath%2F0609392%2Cmath%2F0609599%2Cmath%2F0609088%2Cmath%2F0609008%2Cmath%2F0609744%2Cmath%2F0609807%2Cmath%2F0609368%2Cmath%2F0609820%2Cmath%2F0609062%2Cmath%2F0609455%2Cmath%2F0609763%2Cmath%2F0609703%2Cmath%2F0609385%2Cmath%2F0609774%2Cmath%2F0609271%2Cmath%2F0609104%2Cmath%2F0609283%2Cmath%2F0609583%2Cmath%2F0609169%2Cmath%2F0609220%2Cmath%2F0609611%2Cmath%2F0609738%2Cmath%2F0609594%2Cmath%2F0609310%2Cmath%2F0609038%2Cmath%2F0609364%2Cmath%2F0609694%2Cmath%2F0609208%2Cmath%2F0609403%2Cmath%2F0609747%2Cmath%2F0609273%2Cmath%2F0609238%2Cmath%2F0609291%2Cmath%2F0609284%2Cmath%2F0609096%2Cmath%2F0609458%2Cmath%2F0609312%2Cmath%2F0609264%2Cmath%2F0609487%2Cmath%2F0609057%2Cmath%2F0609290%2Cmath%2F0609408%2Cmath%2F0609842%2Cmath%2F0609365%2Cmath%2F0609384%2Cmath%2F0609773%2Cmath%2F0609701%2Cmath%2F0609492%2Cmath%2F0609082%2Cmath%2F0609217%2Cmath%2F0609391%2Cmath%2F0609471%2Cmath%2F0609534%2Cmath%2F0609695%2Cmath%2F0609776%2Cmath%2F0609340%2Cmath%2F0609790%2Cmath%2F0609546%2Cmath%2F0609150&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We develop a theory of confluence of graphs. We describe an algorithm for\nproving that a given system of reduction rules for abstract graphs and graphs\nin surfaces is locally confluent. We apply this algorithm to show that each\nsimple Lie algebra of rank at most 2, gives rise to a confluent system of\nreduction rules of graphs (via Kuperberg's spiders) in an arbitrary surface. As\na further consequence of this result, we find canonical bases of SU_3-skein\nmodules of cylinders over orientable surfaces."}, "authors": ["Adam S. Sikora", "Bruce W. Westbury"], "author_detail": {"name": "Bruce W. Westbury"}, "author": "Bruce W. Westbury", "links": [{"title": "doi", "href": "http://dx.doi.org/10.2140/agt.2007.7.439", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/math/0609832v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0609832v1", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "34 pages, 218 figures", "arxiv_primary_category": {"term": "math.QA", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.QA", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.GT", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "57M15, 57M27, 05C10, 16S15", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0609832v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0609832v1", "journal_reference": "Algebr. Geom. Topol. 7 (2007) 439-478", "doi": "10.2140/agt.2007.7.439", "fulltext": "arXiv:math/0609832v1 [math.QA] 29 Sep 2006\n\nCONFLUENCE THEORY FOR GRAPHS\nADAM S. SIKORA, BRUCE W. WESTBURY\nAbstract. We develop a theory of confluence of graphs. We describe\nan algorithm for proving that a given system of reduction rules for abstract graphs and graphs in surfaces is locally confluent. We apply this\nalgorithm to show that each simple Lie algebra of rank at most 2, gives\nrise to a confluent system of reduction rules of graphs (via Kuperberg's\nspiders) in an arbitrary surface. As a further consequence of this result,\nwe find canonical bases of SU3 -skein modules of cylinders over orientable\nsurfaces.\n\nContents\n1. Introduction\n2. Confluence\n2.1. Confluence of linear objects\n3. Graphs\n3.1. Abstract Graphs\n3.2. Graphs in manifolds\n3.3. Linear graphs\n3.4. Reduction rules on graphs\n3.5. Proving confluence of reduction rules of abstract graphs\n3.6. Proving confluence of reduction rules of surface graphs\n4. A1 -webs\n5. A2 -webs\n6. B2 -webs\n6.1. B2 -webs with crossings\n7. G2 -webs\n8. Partition Category and Dichromatic Reduction Rules\n8.1. Partition Category\n9. Application to knots\nReferences\n\nThe first author was sponsored in part by NSF grant #DMS-0307078.\n1\n\n2\n3\n4\n7\n7\n8\n9\n9\n10\n14\n16\n17\n19\n24\n24\n25\n26\n29\n31\n\n\f2\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\n1. Introduction\nThis paper is motivated by the following problem appearing in representation theory of Lie algebras and of quantum groups, in the study of moduli\nspaces, in knot theory, and in other areas of mathematics. We state it first\nfor abstract graphs and, later, for graphs in manifolds.\nLet R be a ring. An R-linear graph is a formal R-linear combination\nP\nof graphs \u0393 = ki=1 ri \u0393i , such that the graphs \u0393i have distinguished sets\nEi of 1-valent vertices (called external) and there are specified bijections\nE1 \u2243 E2 \u2243 .... \u2243 Ek . For any graph \u0393\u2032 with a distinguished set of 1-valent\nexternal vertices E \u2032 in a bijection with E1 (and, consequently, in a bijection\nwith Ei for all i), let < \u0393i , \u0393\u2032 > denote the contraction of \u0393i and \u0393\u2032 along\ntheir external vertices, respecting the specified bijections. In the process\nof the contraction these 1-valent vertices are removed and adjacent edges\nP\nidentified. Finally, let < \u0393, \u0393\u2032 >= ki=1 ri < \u0393i , \u0393\u2032 >.\nLet G be a set of graphs, {\u0393i }i\u2208I be a set of R-linear graphs, and let\nR(\u0393i , i \u2208 I) \u2282 RG be the submodule generated by contractions < \u0393i , \u0393\u2032 >\nfor all i \u2208 I and all graphs \u0393\u2032 as above.\n(1) Is RG/R(\u0393i , i \u2208 I) a free R-module? If so, then find an explicit basis\nof it.\n(2) Can a basis be given by taking all graphs in G satisfying a certain\n\"natural\" property?\nExamples appear in Section 8.\nThe topological version of this problem in dimension n involves topological\ngraphs embedded\nin n-dimensional manifolds. An R-linear topological graph\nPk\nis \u0393 =\nr\n\u0393\n,\nsuch\nthat \u03931 , ..., \u0393k lie in a manifold M of dimension n\ni i i\nand there is a finite set E \u2282 \u2202M, such that \u0393i \u2229 \u2202M = E for every i\nand this set is composed of 1-valent vertices of \u0393i . If \u0131 : M \u2192 N is an\nembedding into a manifold of equal dimension and \u0393\u2032 is a graph in N \\ \u0131(M )\nsuch that points of E are 1-valent vertices of \u0393\u2032 then < \u0393i , \u0393\u2032 > denotes\nthe contraction\n\u0393i and \u0393\u2032 along the vertices in E. As before,\nP of graphs\n\u2032\n\u2032\n< \u0393, \u0393 >= i ri < \u0393i , \u0393 >.\nNow, let G be a set of topological graphs in N and \u0393i be an R-linear graph\nin Mi , for every i in some index set I. As before, let R(\u0393i , i \u2208 I) \u2282 RG be the\nsubmodule generated by < \u0393i , \u0393\u2032 > for all i's and all embeddings \u0131 : Mi \u2192 N\nand all graphs \u0393\u2032 as above. In this setting we ask again questions (1),(2)\nabove.\nThe flavor of these questions depends on the dimension of the manifold\nN:\n(Dim=2) Interesting examples come from Kuperberg's spider webs, [Ku2],\nwhich provide a convenient graphical description of representation theory of\nLie algebras and associated quantum groups of rank \u2264 2. These are spaces of\ngraphs in D 2 considered modulo certain relations, of the type defined above.\nThe classes of graphs considered and the relations between them depend\non the Lie algebra in question. Because of their applications to quantum\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n3\n\ninvariants, it is important to consider Kuperberg's webs in surfaces other\nthan D 2 as well. We answer (1),(2) for these graphs in Sections 4-7. Our\napproach is based on theory of confluence of graphs developed in Section 2\nand an algorithm for finding confluent reduction rules for graphs described in\nSection 3.6. As an application, we will find canonical bases of skein modules\nof skein modules of [0, 1]-bundles over surfaces for all simple Lie groups of\nrank 1 and 2. This reproves theorem of Przytycki, [P6, Thm 3.1], for the\nKauffman bracket (SU2 ) skein modules of [0, 1]-bundles over surfaces and\nanswers the question for SU3 -skein modules, c.f. [FZ, S4].\n(Dim=3) The three-dimensional version of this problem appears in knot\ntheory, for example, in connection with Vassiliev invariants and skein modules. In both cases, (1),(2) are open in general.\n(Dim>3) In dimensions greater than 3 homotopic graphs are isotopic, and\ntherefore the problem of describing RG/R(\u0393i , i \u2208 I) can be reduced to purely\nalgebraic form depending on \u03c01 (N ) only, since every \u0393 \u2282 N is determined\nby a labeling all cycles of \u0393 by conjugacy classes of \u03c01 (N ). In particular, if\n\u03c01 (N ) is trivial then graphs in N can be thought as abstract graphs. For\nthat reason, it is enough to consider questions (1),(2) for abstract graphs\nonly.\n\n2. Confluence\nWe will approach the problems outlined in Introduction, by the method\nof confluence. To introduce it in its most abstract form, consider a set of\nobjects V and a set of reduction rules, E, composed of pairs of elements of\nV, denoted by v \u2192 v \u2032 . In other words, (V, E) is an arbitrary directed graph.\nA sequence of its vertices v1 \u2192 v2 \u2192 ... \u2192 vn is called a descending path\n\u2217\nand its existence is denoted by v1 \u2192 vn . We say that vn is a descendant of\n\u2217\n\u2217\nv1 . We allow the empty path, v \u2192 v, for any v. Consequently, v \u2192 w is a\nrelation on V which is reflexive and transitive but not necessarily symmetric.\nWe write v \u223c w if there is a finite path connecting v and w. (The edges\nof this path may have arbitrary directions.) The reduction rules E are\n(globally) confluent if all v1 \u223c v2 have a common descendant, i.e. w \u2208 V\n\u2217\n\u2217\nsuch that v1 \u2192 w and v2 \u2192 w. Finally, rules E are locally confluent if\nfor any v, w1 , w2 such that v \u2192 w1 , v \u2192 w2 , the elements w1 , w2 have\na common descendant. Clearly, global confluence implies local confluence.\nHowever, the opposite implication fails, as shown in the following example.\nThe graph below contains infinitely many vertices and edges:\n\n\f4\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nNonetheless, under certain mild conditions on reduction rules, local confluence implies global confluence. We say that reduction rules are terminal\nif all descending paths are finite.\nDiamond Lemma [Ne, Thm. 3] If reduction rules are terminal then local\nconfluence implies global confluence.\nAn example of an application of Diamond Lemma is the Jordan-H\u00f6lder\ntheorem, which follows directly from this result. Other applications of Diamond Lemma to ring theory and group theory are discussed in [Be] and\n[Sim]. Furthermore, Diamond Lemma and the notion of confluence is used\nin mathematical logic: in Church calculus, [La, Ne], in lambda calculus,\n[BaN, Cu, Oh, La, Mi], and in equational logic, [OD]. Additionally, it appears in computer science, in the theory of rewriting systems and in the\nstudy of graph grammars, [Eh1, Eh2, Na].\n2.1. Confluence of linear objects. For our applications we need a generalization of the notion of confluence to linear objects. For\nPna ring R, an\nR-linear reduction rule on a set V is a pair S : v \u2192\ni=1 ri vi where\nv, v1 , ..., vn \u2208 V and r1 , ..., rn \u2208 R. Denote the free R-module over V by\nS\nRV . For X, Y \u2208 RV, we write X \u2192 Y if v appears withPa non-zero coefficient in X and Y is obtained from X by replacing v by ni=1 ri vi . Finally,\n\u2217\ngiven a family of reduction rules, {Si }i\u2208I , we write X \u2192 Y if there is a\nsequence of reduction rules leading from X to Y . Denote the R-submodule\nS\nof RV generated by X \u2212Y for all X \u2192i Y by R(Si , i \u2208 I) and write X1 \u223c X2\nif X1 \u2212 X2 \u2208 R(Si , i \u2208 I). As before, we say that rules {Si }i\u2208I are (globally)\nconfluent if any X1 \u223c X2 have a common descendant, i.e. there is Y such\n\u2217\n\u2217\nthat X1 \u2192 Y and X2 \u2192 Y . Finally, rules {Si }i\u2208I are locally confluent on\nV (respectively: on RV ) if for any X \u2208 V (respectively: any X \u2208 RV ) and\nS\n\nSj\n\nany Y1 , Y2 \u2208 RV such that X \u2192i Y1 , X \u2192 Y2 , Y1 and Y2 have a common\ndescendant. Clearly, global confluence implies local confluence on RV , and\nterminal local confluence on RV implies global confluence. However local\nconfluence on V does not imply local confluence on RV ! For example, let\nV = {v1 , v2 } and let S1 : v1 \u2192 v1 + 2v2 , S2 : v2 \u2192 v2 + 2v1 . Obviously,\nS1 , S2 are locally confluent on V, since for no v \u2208 V , S1 (v) and S2 (v) are\nsimultaneously defined. However S1 and S2 are not confluent on RV !\n\u221a\n\u221a\nLemma 2.1. S1 (v1 + 2v2 ) and S2 (v1 + 2v2 ) have no common descendant\nin RV .\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n5\n\nProof. Notice that Si sends a1 v1 + a2 v2 to b1 v1 + b2 v2 , where\n\u0013\n\u0013\n\u0012\n\u0012\n\u0012 \u0013\n\u0012 \u0013\na1\nb1\n1 2\n1 0\n.\n, M2 =\nand M1 =\n= Mi\n0 1\n2 1\na2\nb2\n\u221a\n\u221a\nIf S1 (v1 + 2v2 ) and S2 (v1 + 2v2 ) have a common descendant c1 v1 + c2 v2\nfor some c1 , c2 \u2208 R, then for certain products N1 , N2 of matrices M1 , M2 ,\n\u0013\n\u0013 \u0012 \u0013\n\u0012\n\u0012\nc1\n1\n1\nN1 M1 \u221a\n= N2 M2 \u221a\n=\n.\n2\n2\nc2\n\u221a\nIrrationality of 2 implies N1 M1 = N2 M2 as matrices in SL(2, Z). However,\nM1 , M2 generate a free semigroup in SL(2, Z). Therefore, N1 M1 6= N2 M2\nfor any N1 , N2 .\n\u0003\nNonetheless, we have\nTheorem 2.2 (Linear Diamond Lemma). Let {Vj }j\u2208J be a family of sub\u2032\nsets\nS of V, such that J is a well ordered set and Vj \u2282 Vj \u2032 for j < j and\nj\u2208J Vj = V . Let deg(v) = min {j : v \u2208 Vj }. Consider a family of linear\nreduction rules on V such that each of them sends an element of V to a\nlinear combination of elements of smaller degree. Then\n(1) these reduction rules are terminal,\n(2) if this family is locally confluent on V then it is also locally confluent\non RV . Therefore, by Diamond Lemma, such family of reduction rules is\nglobally confluent on RV .\nProof.P(1) Assume that there is an infinite chain X1 \u2192 X2 \u2192 X3 \u2192 .... Let\nXi = nj i cij vij and let dik denote the k-th highest degree among degrees of\nvi,1 , ..., vi,ni . Since d11 \u2265 d21 \u2265 d31 \u2265 ..., the sequence stabilizes at certain\nplace, which we denote by N1 . In other words dk,1 = dN1 ,1 , for all k \u2265 N1 .\nLet e1 = dN1 ,1 . Similarly, dN1 ,2 \u2265 dN1 +1,2 \u2265 dN1 +2,2 \u2265 ..., stabilizes, let us\nsay, at N2 -th place. Let e2 = dN2 ,2 . By continuing this process, we construct\ne1 \u2265 e2 \u2265 e3 \u2265 ... This sequence stabilizes at some point as well \u2013P\nlet us say\nat s. Then for any k \u2265 Ns , the elements of V appearing in Xk = nj i ckj vkj\nhave degrees e1 , ..., es (each of them may be appearing many times). This,\nhowever, leads to contradiction since any reduction transformation replaces\nsome v by a linearPcombination of elements\nPof2 V of lower degree.\n1\nbi wi and S2 : v2 \u2192 ni=1\nci zi . Assume that deg(v1 ) <\n(2) Let S1 : v1 \u2192 ni=1\ndeg(v2 ). We need to prove that for any X, S1 (X), S2 (X) have a common\ndescendant. Let X = a1 v1 + a2 v2 + X \u2032 , where X \u2032 is a linear combination\nof elements of V \\ {v1 , v2 }. Since degrees of w1 , ..., wn1 are smaller than\nthat of v2 , the elements w1 , ..., wn1 are different than v2 . If, additionally,\nz1 , ..., zn2 6= v1 then\nn2\nn1\nX\nX\nci zi + X \u2032 = S1 S2 (X)\nbi wi + a2\n(1)\nS2 S1 (X) = a1\ni=1\n\ni=1\n\nis a common descendant of S1 (X) and S2 (X) and the proof is complete.\nTherefore, assume now that one of the zi 's, say z1 is equal to v1 . If a2 c1 = 0\n\n\f6\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nthen S1 S2 (X) = S2 S1 (X) again. However, this may not be the case if\na2 c1 6= 0, since then\nn2\nn1\nX\nX\nci zi + X \u2032\nbi wi + a2\nS1 S2 (X) = (a1 + a2 c1 )\ni=2\n\ni=1\n\nand S2 S1 (X) is as in (1). Now, however, S1 S2 (X) = S1 S2 S1 (X) is a common\ndescendant of S1 (X) and S2 (X).\n\u0003\nX \u2208 V is irreducible with respect to a given set of reduction rules if none\nof these rules applies to X. Denote the set of irreducible elements by Virr .\nNote that if {Si }i\u2208I are terminal then RV /R(Si , i \u2208 I) is spanned by Virr .\nThe opposite implication does not hold in general.\nThe combination of confluence and termination is a very strong property\nof reduction rules.\nTheorem 2.3. (1) For any terminal rules {Si }i\u2208I for RV the following\nconditions are equivalent:\n(a) Si , i \u2208 I, are locally confluent in RV ;\n(b) Si , i \u2208 I, are confluent in RV ;\n(c) For any x \u2208 RV there is a unique element \u03c8(x) \u2208 RVirr such that\n\u2217\nx \u2192 \u03c8(x).\n(2) If any of the above conditions holds then \u03c8 : RV \u2192 RVirr is an R-linear\nmap which factors to an isomorphism\n\u03c8\u0304 : RV /R(Si , i \u2208 I) \u2192 RVirr .\n\nFurthermore, \u03c8 is the identity on RVirr and, consequently, Virr is a basis\nof RV /R(Si , i \u2208 I).\nProof. (a) \u21d2 (b) by the Diamond Lemma.\n(b) \u21d2 (c): Since the reduction rules are terminal, every x \u2208 RV has a\n\u2217\ndescendant y \u2208 RVirr . By confluence, y is unique \u2013 indeed, if x \u2192 y \u2032 6= y and\n\u2032\n\u2032\ny \u2208 RVirr then y \u223c y but they have no common descendants, contradicting\nthe confluence assumption.\n(c) \u21d2 (a) is obvious.\n\u2217\n(c) \u21d2 (2): If x \u2192 y then \u03c8(x) = \u03c8(y). Since the relation \u223c defined\nat the beginning of Section 2.1 is the smallest equivalence relation on RV\n\u2217\ngenerated by \u2192, x \u223c y implies that \u03c8(x) = \u03c8(y). Therefore \u03c8 factors to\n\u03c8\u0304 : RV /R(Si , i \u2208 I) = RV / \u223c \u2192 RVirr .\n\nIf we denote the \"obvious\" map RVirr \u2192 RV \u2192 RV /R(Si , i \u2208 I) by\n\u0131 then clearly both \u0131\u03c8 and \u03c8\u0131 are identities on their respective domains.\nTherefore \u03c8\u0304 is a bijection and an R-linear map. Finally, \u03c8 is also R-linear,\nsince it is a composition of linear maps\n\u03c8\u0304\n\nRV \u2192 RV /R(Si , i \u2208 I) \u2192 RVirr .\n\n\u0003\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n7\n\nOnly a few interesting terminal and confluent reduction systems on sets\nof graphs are known. Most of them appear in the context of representation\ntheory of Lie algebras of rank \u2264 2 and of associated quantum groups, c.f.\nSections 4-7. See Section 8 for other examples.\n3. Graphs\n3.1. Abstract Graphs. In a most general setting, a labeled graph is \u0393 =\n(V, E, t, \u03c4, \u039b, \u03bb, \u03bd), where V is a vertex set, E is the set of edge directions,\nt : E \u2192 V is the tail map, \u03c4 : E \u2192 E is the change of direction involution\nwhich is fixed-point free. \u039b is a set of labels and \u03bb : E \u2192 \u039b is a labeling\nfunction. \u03bd : \u039b \u2192 \u039b is an involution such that \u03bd\u03bb = \u03bb\u03c4 : E \u2192 \u039b. The\nfunction t\u03c4 : E \u2192 V is called the head map.\nAn edge is a two-element set {e, \u03c4 (e)}. The valency of v \u2208 V is the number\nof edge directions e such that t(e) = v. As mentioned in Introduction, we will\nsometimes specify a set of 1-valent vertices Vext (\u0393) \u2282 V (\u0393), called external\nvertices, and consider it as part of graph structure of \u0393. The remaining\nvertices, Vint (\u0393) = V (\u0393) \\ Vext (\u0393), are internal.\nMost definitions of graphs can be deduced from this one. For example,\na partially directed graph is \u0393 = (V, E, t, \u03c4, \u2205, \u039b, \u03bb, \u03bd), such that \u039b = {\u00b11, 0}\nand \u03bd(x) = \u2212x. An edge {e, \u03c4 (e)} with \u03bb(e) = 0 is undirected. Otherwise,\nits direction is either e or \u03c4 (e) depending on whether \u03bb(e) = 1 or \u22121.\nThe reason for using edge directions, instead of edges, is that in representation theory one considers graphs whose edges are labeled by representations and have no canonical orientation. If an edge direction is labeled by a\nrepresentation V then the opposite direction is labeled by the dual of V .\nAn embedding of \u03931 into \u03932 is\n(1) a map f : V1 \u2192 V2 which is an embedding of internal vertices of \u03931 into\ninternal vertices of \u03932 ,\n(2) a map g : E1 \u0592\u2192 E2 , such that t2 g = f t1 , \u03c42 g = g\u03c41 , and g restricted to\n{e \u2208 E1 : t(e) is an internal vertex} is an embedding.\n(3) an embedding h : \u039b1 \u0592\u2192 \u039b2 such that \u03bb2 g = h\u03bb1 and \u03bd2 h = h\u03bd1 .\nFor any embedding f : \u0393 \u0592\u2192 \u0393\u2032 and e \u2208 E(\u0393\u2032 ), neighborhood of f \u22121 (e)\nhas one of the following forms1:\n\nType: EE\n\nEI1\n\nEI2\n\nEI3\n\nII1\n\n1To be precise, one considers the topological realization of \u0393 and the topological neigh-\n\nborhood of f \u22121 (e).\n\n\f8\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nII2\n\nII3\n\nII4\n\nII5\n\nII6\n\nAbove, black dots denote internal vertices and white dots the external\nones. Triple dots denote several parallel copies (possibly zero). For the\npurpose of this classification we ignore edge directions.\n3.2. Graphs in manifolds. Throughout the paper all manifolds are smooth.\nA graph in a manifold M, or manifold graph, is a subspace \u0393 \u2282 M which\nlooks locally like 1-dimensional submanifold of M (possibly with boundary) except for internal vertices,\n\n. For simplicity, we do not allow\n\n2-valent vertices.\nThe points of \u0393 \u2229 \u2202M = Vext (\u0393) are called external vertices. Manifold\ngraphs are considered up to isotopy of M fixing \u2202M . We denote the set of\nall vertices of \u0393 by V (\u0393). Note that \u0393 \\ V (\u0393) is composed of open intervals\nand circles (also called loops).\nA manifold graph \u0393 \u2282 M is labeled if there is specified a set \u039b with an\ninvolution \u03c4 : \u039b \u2192 \u039b and a labeling function\n\u03bb : {orientations of connected components of \u0393 \\ V (\u0393)} \u2192 \u039b.\nWe require that if o, \u014d are opposite orientations of the same edge or circle\nin \u0393 \\ V (\u0393) then \u03bb(\u014d) = \u03c4 (\u03bb(o)). A graph labeled by \u039b = {0, \u00b11}, with\n\u03c4 (x) = \u2212x, is called partially oriented. An edge or circle e of \u0393 is unoriented\nif \u03bb(e) = 0 and oriented otherwise. Its orientation is the one labeled by 1.\nNote that if M is connected, simply-connected, has connected boundary,\nand dim M \u2265 4 then each graph in M can be thought as a geometric realization of an abstract graph. Such abstract graph is unique up to an insertion\nor deletion of 2-valent internal vertices into edges or from edges.\nAn embedding of manifold graph \u03931 \u2282 M1 into \u03932 \u2282 M2 is an embedding\nf : M1 \u0592\u2192 M2 of manifolds of equal dimensions, which embeds a certain\nrepresentative \u03931 of the isotopy class of \u03931 \u2282 M1 into a certain representative\n\u03932 of the isotopy class of \u03932 \u2282 M2 such that f restricted to \u03931 \\ Vext (\u03931 )\nis an open map into \u03932 . We identify isotopic embeddings. This definition\nimplies that edges of \u03931 are mapped either into edges or circles of \u03932 .\nIf \u03931 \u2282 M1 , \u03932 \u2282 M2 are labeled manifold graphs, then an embedding\nof \u03931 into \u03932 consists of a map f : M1 \u2192 M2 as above together with an\nembedding of the set of labels \u0131 : \u039b1 \u0592\u2192 \u039b2 such that f maps every edge or\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n9\n\ncircle with some orientation, e1 , of \u03931 into an edge or circle of \u03932 , denoted\nby e2 with coinciding orientation such that \u03bb2 (e2 ) = \u0131\u03bb1 (e1 ).\n\u0592\u2192\n\nExample 3.1. A graph embedding:\n\n, and two\n\nnon-embeddings:\n,\nThe above graph embedding is isotopic and, hence, identified with the embedding\n\n.\n\nThe theory presented in this paper comes in two flavors: oriented and\nunoriented. In the first case all manifolds are oriented and all embeddings\npreserve orientations of manifolds. In the latter case, orientations of manifolds do not play any role. In both cases, labelings of edge and circle\norientations are preserved. We will stress the difference between oriented\nand unoriented case whenever necessary, for example in Section 5.\n3.3. Linear graphs. Let R be a P\nring. An R-linear graph is a formal Rlinear combination of graphs \u0393 = ki=1 ri \u0393i , together with specified bijections Vext (\u03931 ) \u2243 Vext (\u03932 ) \u2243 .... \u2243 Vext (\u0393k ) such that the corresponding\nexternal edge directions have identical labels. (Since each external vertex is\n1-valent, its adjacent external edge direction is well defined.)\nPnAn R-linear manifold graph in M is a formal linear combination \u0393 =\ni=1 ri \u0393i of graphs in M such that their external vertices coincide and\nthe outward orientations of the corresponding external edges have identical\nlabels. These graphs are considered up to isotopy of M fixing \u2202M . For\nexample,\nT =\n\n\u2212\n\nis a non-zero linear graph in D 2 .\n3.4. Reduction rules on graphs. We are going to apply the theory of\nconfluence to the problems stated in Introduction, with a particular focus on\ngraphs arising as Kuperberg's spiders webs. Certain versions of this method\nwere used implicitly already in [Ja, Ku2, Ku1] and [Ye]. Nonetheless, to our\nknowledge the subtle difference between local confluence on V and on RV\ndiscussed in Sec. 2.1 has never been observed.\nFor our purposes, the set of objects, V, considered in Section 2 is either a\nset of abstract graphs or a set of graphs in a given manifold M .\n\n\f10\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nIn the first case, for a given ring R, a graph reduction rule is a pair denoted\nP\nS\nby T0 \u2192 T, where T0 is a graph, T = ki=1 ri Ti is an R-linear graph and\nthe external vertices of T0 and Ti 's are identified via a bijection such that\nthe corresponding external edge directions have identical labels. Any graph\nS\nreduction rule T0 \u2192 T defines reductions of graphs \u0393 as follows: For any\nembedding \u03930 \u0592\u2192 \u0393 we obtain new graphs \u0393i by replacing T0 in \u0393 by Ti . We\nP\nS\nsay that reduction \u03930 \u2192 ki=1 ri \u0393i is induced by T0 \u2192 T and we denote\nS P\nthat fact by putting S above the arrow, \u0393 \u2192 ki=1 ri \u0393i . Therefore, unlike\nin Section 2, we use one symbol (here, S) to denote many reduction rules\nS\n\narising from T0 \u2192 T .\nS\nSimilarly, a graph reduction rule for manifold graphs is a pair T0 \u2192 T,\nPk\nwhere T0 is a graph in some manifold M0 and T =\ni=1 ri Ti is an Rlinear graph in the same manifold such that the external vertices of T0 and\nTi 's coincide and the corresponding external edge orientations have identical\nlabels. For any embedding M0 \u0592\u2192 M and a graph \u0393 \u2282 M such that \u0393\u2229M0 =\nT0 , we obtain new graphs \u0393i \u2282 M by replacing T0 in \u0393 by Ti . We say that\nP\nS\nreduction \u03930 \u2192 ki=1 ri \u0393i is induced by T0 \u2192 T and we denote that fact by\nS P\n\u0393 \u2192 ki=1 ri \u0393i .\nBy analogy to the notation in Section 2, we use R(Si , i \u2208 I) \u2282 RV to\nP\ndenote the submodule generated by all linear graphs \u0393 \u2212 ki=1 ri \u0393i coming\nS Pk\nfrom graph reductions \u0393 \u2192i\ni=1 ri \u0393i , for i \u2208 I.\n3.5. Proving confluence of reduction rules of abstract graphs. An\noverlap of graphs \u03931 and \u03932 is a graph \u0393 and pair of graph embeddings\nS P\n(\u03931 \u0592\u2192 \u0393, \u03932 \u0592\u2192 \u0393). If {Ti0 \u2192i\nk rik Tik }i\u2208I is a set of reduction rules of\nabstract graphs with coefficients in R, then each overlap O = (\u01311 : Ti0 \u0592\u2192\n\u0393, \u01312 : Tj0 \u0592\u2192 \u0393) leads to two different reductions of \u0393. We say that reduction\nrules {Si }i\u2208I are locally confluent on O = (\u03931 \u0592\u2192 \u0393, \u03932 \u0592\u2192 \u0393) if for any\nS P\ni, j such that \u0393i0 = \u03931 , \u0393j0 = \u03932 , the two reductions \u0393 \u2192i\nk rik \u0393k and\nSj P\n\u0393 \u2192 k rjk \u0393\u2032k , arising from this overlap have a common descendant.\nNote that {Si }i\u2208I are locally confluent on V if and only if they are locally\nconfluent on all overlaps of graphs Ti0 , i \u2208 I.\nWe say that O = (\u01311 : \u03931 \u0592\u2192 \u0393, \u01312 : \u03932 \u0592\u2192 \u0393) factors through O\u2032 = (\u0131\u20321 :\n\u03931 \u0592\u2192 \u0393\u2032 , \u0131\u20322 : \u03932 \u0592\u2192 \u0393\u2032 ) if there is an embedding f : \u0393\u2032 \u0592\u2192 \u0393, such that\n\u01311 = f \u0131\u20321 , \u01312 = f \u0131\u20322 . If reduction rules {Si }i\u2208I are locally confluent on O\nthen they are locally confluent on all overlaps which factor through O. An\noverlap with no factorizations other than the identity is irreducible.\nWe are going to show that the following types of factorizations (\u0131\u20321 : \u03931 \u0592\u2192\nf\n\n\u0393\u2032 , \u0131\u20322 : \u03932 \u0592\u2192 \u0393\u2032 ) \u2192 (\u01311 : \u03931 \u0592\u2192 \u0393, \u01312 : \u03932 \u0592\u2192 \u0393) reduce every overlap to an\nirreducible one:\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n11\n\n(1) If V (\u03931 ) \u222a V (\u03932 ) is a proper subset of V (\u0393) then let \u0393\u2032 be a graph\nobtained from \u0393 by removing vertices in V (\u0393) \\ (V (\u03931 ) \u222a V (\u03932 )). Let\n\u0131\u20321 = \u01311 , \u0131\u20322 = \u01311 , and let f be the obvious embedding.\n(2) If Vint (\u03931 ) \u222a Vint (\u03932 ) is a proper subset2 of Vint (\u0393), then let \u0393\u2032\nbe a graph obtained from \u0393 by changing the internal vertices in\nVint (\u0393) \\ (Vint (\u03931 ) \u222a Vint (\u03932 )) to external ones. Let f be the obvious\nembedding.\n(3) If E(\u03931 )\u222a E(\u03932 ) \u2282 E(\u0393) is a proper subset, then let \u0393\u2032 be \u0393 with the\nedge directions in E(\u0393) \\ (E(\u03931 ) \u222a E(\u03932 )) removed. f is the obvious\nembedding.\n(4) Let Eext (\u0393) denote {e \u2208 E(\u0393) : t(e), h(e) \u2208 Vext (\u0393)}. If e1 \u2208 Eext (\u0393i ),\n\u0131i (e1 ) = \u0131j (e2 ), e1 6= e2 , for some i, j \u2208 {1, 2}, then let \u0393\u2032 be \u0393 with\ntwo extra external vertices v1 , v2 and two new edge directions e\u2032 , \u03c4 (e\u2032 )\nforming an edge connecting v1 and v2 . Let \u0131\u20321 , \u0131\u20322 coincide with \u01311 , \u01312 ,\nexcept for \u0131\u2032i sending e1 , \u03c4 (e1 ) to e\u2032 , \u03c4 (e\u2032 ) and sending t(e1 ), h(e1 ) to\nv1 , v2 . Let f (v1 ) = t(e), f (v2 ) = h(e), f (e\u2032 ) = e, and let f be the\nidentity on the remaining vertices and edges.\n(5) If e1 \u2208 Eext (\u0393i ) and there is no edge e2 as in (4) but \u0131i (t(e1 )) = \u0131j (v),\nt(e1 ) 6= v, for some i, j \u2208 {1, 2}, then let \u0393\u2032 be \u0393 \\ {\u0131i (e1 ), \u03c4 (\u0131i (e1 ))}\nwith an extra external vertex w and two new edge directions e\u2032 , \u03c4 (e\u2032 )\nforming an edge connecting w and \u0131i (h(e1 )). Let \u0131\u20321 , \u0131\u20322 coincide with\n\u01311 , \u01312 , except for \u0131\u2032i sending e1 , \u03c4 (e1 ) to e\u2032 , \u03c4 (e\u2032 ) and sending t(e1 ) to\nw. Let f (w) = \u0131i (t(e1 )), f (e\u2032 ) = \u0131i (e1 ), f (\u03c4 (e\u2032 )) = \u0131i (\u03c4 (e1 )), and let\nf be the identity on the remaining vertices and edge directions.\n\u22121\n(6) If \u0131\u22121\n1 (e) and \u01312 (e) are of type II5 (as defined at the end of Section\n3.1) then consider factorization\n\n\u03b9 2'\n\u03b9 '1\n\u03b91\n\n\u03b92\n\nf\n\n(For simplicity the edge directions are ignored in the above pic\u22121\nture.) Analogously, if \u0131\u22121\n1 (e) and \u01312 (e) are (in some order) of\n2Since graph embeddings send internal vertices to internal vertices, V (\u0393 ) \u222a\nint\n1\n\nVint (\u03932 ) \u2282 Vint (\u0393).\n\n\f12\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\ntypes (II1 , II5 ), (II1 , II6 ), (II2 , II5 ), (II2 , II6 ), (II3 , II5 ), (II3 , II6 ),\n(II5 , II6 ), (II6 , II6 ) then we perform similar factorizations.\nTheorem 3.2. An overlap O = (\u01311 : \u03931 \u0592\u2192 \u0393, \u01312 : \u03932 \u0592\u2192 \u0393) is irreducible iff\n(1) V (\u0393) = V (\u03931 ) \u222a V (\u03932 ).\n(2) Vint (\u0393) = Vint (\u03931 ) \u222a Vint (\u03932 ).\n(3) E(\u0393) = E(\u03931 ) \u222a E(\u03932 )\n(4) If e1 \u2208 Eext (\u0393i ) and \u0131i (e1 ) = \u0131j (e2 ) then j = i and e1 = e2 .\n(5) If e \u2208 Eext (\u0393i ), \u0131i (t(e)) = \u0131j (v), then i = j and t(e) = v.\n(6) \u0393 has no edges of types (II1 , II5 ), (II1 , II6 ), (II2 , II5 ), (II2 , II6 ),\n(II3 , II5 ), (II3 , II6 ), (II5 , II5 ), (II5 , II6 ), (II6 , II6 ).\nProof. \u21d2 If one of the conditions does not hold then O admits one of the\nfactorizations described above.\n\u21d0 Suppose that O satisfies (1)-(6) above and\nf : (\u0131\u20321 : \u03931 \u0592\u2192 \u0393\u2032 , \u0131\u20322 : \u03932 \u0592\u2192 \u0393\u2032 ) \u2192 (\u01311 : \u03931 \u0592\u2192 \u0393, \u01312 : \u03932 \u0592\u2192 \u0393) = O\n\nis a factorization of O.\n\nLemma 3.3. f : V (\u0393\u2032 ) \u2192 V (\u0393) is a bijection.\n\nProof. f (V (\u0393\u2032 )) \u2283 f \u0131\u20321 V (\u03931 ) \u222a f \u0131\u20322 V (\u03932 ) = \u01311 V (\u03931 ) \u222a \u01312 V (\u03932 ) is by (1) equal\nto V (\u0393). Therefore, f : V (\u0393\u2032 ) \u2192 V (\u0393) is onto.\nSuppose f (v1 ) = f (v2 ) = v for v1 6= v2 , v1 , v2 \u2208 V (\u0393\u2032 ). By definition of\ngraph embedding, f is 1-1 on Vint (\u0393\u2032 ). Hence, at least one of the vertices\nv1 , v2 is external, say v1 . Consider two cases:\n(a) v is external. Then v2 is external as well. Let e1 , e2 be edge didef\n\nrections with tails v1 , v2 . Since v is 1-valent, f (e1 ) = f (e2 ) = e \u2208 E(\u0393).\nSince f (h(e1 )) = f (h(e2 )) = h(e), at least one of the vertices h(e1 ), h(e2 ) is\nexternal, contradicting (4).\n(b) v is internal. By (2), we can choose v2 to be an internal vertex. Since\nv1 has valency one, there is a unique vertex w in \u0393\u2032 connected with v by\nan edge e\u2032 . By (5), w is internal. Let e = f (e\u2032 ). Then the preimage, f \u22121 ,\nof the neighborhood of e must be of type II5 or II6 . Since \u01311 , \u01312 satisfy\n(1)-(4) and factorize through f , they must be of one of the types listed in\n(6). Contradiction.\n\u0003\nCorollary 3.4. f : Vint (\u0393\u2032 ) \u2192 Vint (\u0393) and f : Vext (\u0393\u2032 ) \u2192 Vext (\u0393) are\nbijections.\nProof. Since f is 1-1 it is enough to prove that (a) f (Vint (\u0393\u2032 )) = Vint (\u0393) and\n(b) f (Vext (\u0393\u2032 )) = Vext (\u0393).\n(a) Since f is a graph embedding, f (Vint (\u0393\u2032 )) \u2282 Vint (\u0393). By (2), \u01311 (Vint (\u03931 ))\u222a\n\u01312 (Vint (\u03932 )) = Vint (\u0393), and since \u01311 , \u01312 factor through f, f (Vint (\u0393\u2032 )) = Vint (\u0393).\n(b) By previous lemma and by (a), |V (\u0393\u2032 )| = |V (\u0393)|, |Vint (\u0393\u2032 )| = |Vint (\u0393)|.\nHence, |Vext (\u0393\u2032 )| = |Vext (\u0393)| and the statement follows from the fact that f\nis 1-1.\n\u0003\nProposition 3.5. f : E(\u0393\u2032 ) \u2192 E(\u0393) is a bijection.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n13\n\nProof. By (3), f is onto. Suppose that f (e1 ) = f (e2 ) = e, e1 6= e2 . Since f\nis a bijection on vertices, t(e1 ) = t(e2 ), h(e1 ) = h(e2 ). Since t(e1 ), h(e2 ) are\nat least 2 valent, they are internal and, consequently, f maps two internal\nedge directions to a single edge direction and, therefore, it is not a graph\nembedding.\n\u0003\nTherefore f is the identity and the proof of Theorem 3.2 is completed.\n\n\u0003\n\nSince each overlap of \u03931 and \u03932 satisfying Theorem 3.2(1)-(3) is obtained\nas a quotient of the disjoint union of \u03931 and \u03932 , the number of such overlaps\nis finite.\nCorollary 3.6. Any two abstract graphs have a finite number of irreducible\noverlaps only.\nConsider an overlap of \u03931 and \u03932 . By applying factorizations of types\n(1)-(5), we obtain an overlap satisfying conditions (1)-(5) of Theorem 3.2.\nObserve, that if an overlap O satisfies these conditions then for every factorization f : O \u2032 \u2192 O of type (6), O \u2032 satisfies (1)-(5) as well. Furthermore,\nobserve that for each factorization\nf : (\u0131\u20321 : \u03931 \u0592\u2192 \u0393\u2032 , \u0131\u20322 : \u03932 \u0592\u2192 \u0393\u2032 ) \u2192 (\u01311 : \u03931 \u0592\u2192 \u0393, \u01312 : \u03932 \u0592\u2192 \u0393) = O\n\nof type (6), either (a) the number of connected components of \u0393\u2032 is larger\nthan the number of components of \u0393, or (b) the number of cycles of \u0393\u2032 is lower\nthan the number of cycles of \u0393. Since the number of connected components\nis bounded above by the (unchanging) number of vertices, every sequence\nof factorizations of type (6) is finite. Therefore, we proved:\nCorollary 3.7. (1) Each overlap can be reduced to an irreducible one by a\nfinite number of factorizations of types (1)-(6).\nS\n\n(2) {Ti0 \u2192i Ti }i\u2208I are locally confluent if they are locally confluent on all\nirreducible overlaps of pairs of graphs in {Ti0 }i\u2208I .\nTherefore, one has an effective procedure for deciding whether any finite\nset of reduction rules on graphs is locally confluent.\nand\n\nExample 3.8. Graphs\n\nhave 5 different irreducible over-\n\nlaps: four overlaps of the form\n\u2212\u2192\n\n\u2190\u2212\n\nand one \"trivial\" overlap\n\u2212\u2192\n\n\u2190\u2212\n\n\f14\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nExample 3.9. \u03931 = \u03932 =\n\nhave three different irreducible overlaps of\n\nthe form\n\u2212\u2192\n\n\u2190\u2212\n\nand one trivial overlap,\n\u2212\u2192\n\n\u2190\u2212\n\n.\n\n,\nNotice that the embeddings of \u03931 , \u03932 into\nnot irreducible since they factor through the trivial overlap.\n\n,\n\nare\n\n3.6. Proving confluence of reduction rules of surface graphs. An\noverlap of manifold graphs \u03931 \u2282 M1 , \u03932 \u2282 M2 is a graph \u0393 in a manifold M\ntogether with isotopy classes of embeddings (\u03931 , M1 ) \u0592\u2192 (\u0393, M ), (\u03932 , M2 ) \u0592\u2192\n(\u0393, M ).\nf : O \u2032 = ((\u03931 , M1 ) \u0592\u2192 (\u0393\u2032 , M \u2032 ), (\u03932 , M2 ) \u0592\u2192 (\u0393\u2032 , M \u2032 )) \u2192\n((\u03931 , M1 ) \u0592\u2192 (\u0393, M ), (\u03932 , M2 ) \u0592\u2192 (\u0393, M )) = O\nis a factorization of O, if for certain representatives \u0131\u20321 : (\u03931 , M1 ) \u0592\u2192 (\u0393, M ),\n\u0131\u20322 : (\u03932 , M2 ) \u0592\u2192 (\u0393, M ), of embeddings of O\u2032 , f \u01311 , f \u01312 belong to isotopy\nclasses of embeddings of O.\nS P\nAs before, given reduction rules, {Ti0 \u2192i\nk rik Tik }i\u2208I , where Si takes\nplace in a manifold Mi , each overlap O = (\u01311 : (Ti0 , Mi ) \u0592\u2192 (\u0393, M ), \u01312 :\n(Tj0 , Mj ) \u0592\u2192 (\u0393, M )) leads to two different reductions of \u0393. Rules {Si }i\u2208I\nare locally confluent if they are locally confluent on all overlaps of graphs\nTi0 , i \u2208 I. As before we consider factorization of overlaps and observe that\nif rules {Si }i\u2208I are locally confluent on O then they are locally confluent on\nall overlaps which factor through O.\nA factorization f : O\u2032 \u2192 O is trivial if f : M \u2032 \u2192 M is isotopic to a\nhomeomorphism. As before, an overlap is irreducible if it does not admit a\nnon-trivial factorization.\nIn this section we are going to develop an algorithm for proving local\nconfluence of overlaps of surface graphs. Observe that we cannot apply\nverbatim the method of the previous section to our current setting since\nCorollary 3.6 and Corollary 3.7(1) and (2) fail for surface graphs:\nLemma 3.10. (1) If every component of F has a non-empty boundary then\nno overlap ((\u03931 , F1 ) \u0592\u2192 (\u0393, F ), (\u03932 , F2 ) \u0592\u2192 (\u0393, F )) is irreducible.\n(2) If every component of F has a non-empty boundary then no overlap\n((\u03931 , F1 ) \u0592\u2192 (\u0393, F ), (\u03932 , F2 ) \u0592\u2192 (\u0393, F )) factors through an irreducible one.\n(3) If F is closed, F 6= S 2 , RP 2 , and \u0393 is either empty or it is a contractible\nloop in F, then (\u0393, F ) has infinitely many irreducible overlaps with itself.\nProof. (1) Let F \u2032 be F with a disk removed from one of its components,\nC. By imagining the disk lying \"very close\" to \u2202C, one can isotope \u01311 , \u01312 to\n\u0131\u20321 , \u0131\u20322 so that \u0131\u20321 (F1 ) \u222a \u0131\u20322 (F2 ) \u2282 F \u2032 . Consequently, (\u01311 , \u01312 ) factors through (\u0131\u20321 :\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n15\n\n(\u03931 , F1 ) \u0592\u2192 (\u0393\u2032 , F \u2032 ), \u0131\u20322 : (\u03932 , F2 ) \u0592\u2192 (\u0393\u2032 , F \u2032 )) via the embedding f : F \u2032 \u2192 F .\nThis is a non-trivial factorization, contradicting the initial assumption.\n(2) If an overlap as above factors through (\u01311 : (\u03931 , F1 ) \u0592\u2192 (\u0393\u0303, F\u0303 ), \u01312 :\n(\u03932 , F2 ) \u0592\u2192 (\u0393\u0303, F\u0303 )) then F\u0303 \u2282 F and consequently, every component of F\u0303\nhas a non-empty boundary.\n(3) For any diffeomorphism f : (\u0393, F ) \u2192 (\u0393, F ), diffeomorphisms \u01311 = f :\n(\u0393, F ) \u2192 (\u0393, F ) and the identity map \u01312 = f : (\u0393, F ) \u2192 (\u0393, F ) form a an\nirreducible overlap which we denote by Of . Notice that Of = Of \u2032 if and\nonly if f \u2032 is isotopic to f . Since the mapping class group of F is infinite,\nthere are infinitely many irreducible overlaps of this type.\n\u0003\nWe will attempt to resolve these difficulties now. {Oj }j\u2208J is a basis of\noverlaps of (\u03931 , F1 ) and (\u03932 , F2 ) if every overlap of these surface graphs\nfactors through Oj for some j \u2208 J.\nP\nCorollary 3.11. The rules Si : \u0393i0 \u2192 k rik \u0393ik , i \u2208 I, are locally confluent,\nif they are locally confluent on a certain basis of overlaps of pairs of graphs\nin {(\u0393i0 , Fi )}i\u2208I .\nLemma 3.10(2) shows that not every pair of graphs in surfaces has a finite\nbasis of overlaps. Furthermore, basis of overlaps are generally not unique.\nNonetheless, we are going to show that any two simple graphs in surfaces\nhave a finite basis of overlaps. We say that \u0393 \u2282 F is simple if \u0393 is connected\nand every component C of F \\ \u0393 is either D 2 or an annulus whose one\nboundary component lies in \u0393 and the other in \u2202F .\nTheorem 3.12. Any two simple graphs have a finite basis of overlaps.\nOur proof is also an algorithm for finding such a finite basis.\nFor any graph \u0393 \u0592\u2192 F there is an \u03b50 > 0 such that \u03b5-neighborhoods of \u0393 in\nF are diffeomorphic to each other for all \u03b5 < \u03b50 . Denote such \u03b5-neighborhood\nby \u03bd(\u0393) and we call it a framing of \u0393. Each framing of \u0393 retracts onto \u0393\nand each finite abstract graph has finitely many different framings only.\nAny overlap of (\u03931 , \u03bd(\u03931 )) and (\u03932 , \u03bd(\u03932 )) factors through an overlap\n\u01311 : (\u03931 , \u03bd(\u03931 )) \u0592\u2192 (\u0393, F ), \u01312 : (\u03932 , \u03bd(\u03932 )) \u0592\u2192 (\u0393, F ), such that (\u01311 : \u03931 \u0592\u2192\n\u0393, \u01312 : \u03932 \u0592\u2192 \u0393) is an irreducible overlap of abstract graphs and F is a framing\nof \u0393. Consequently, such overlaps form a basis of overlaps of (\u03931 , \u03bd(\u03931 )) and\n(\u03932 , \u03bd(\u03932 )). Denote them by O1 , ..., Od .\nNow assume that \u03931 and \u03932 are embedded into F1 , F2 in such way that\nthey are simple graphs. We extend each basic overlap Oi = (\u01311 : (\u03931 , \u03bd(\u03931 )) \u0592\u2192\n(\u0393, F ), \u01312 : (\u03932 , \u03bd(\u03932 )) \u0592\u2192 (\u0393, F )) constructed above to an overlap of (\u03931 , F1 )\nand (\u03932 , F2 ) as follows: Every component B of \u2202F, disjoint from \u0393, is parallel to a unique cycle \u03b1B \u2282 \u0393. If the preimage \u0131\u22121\ni (\u03b1B ) for either i = 1 or 2 is\na circle in Fi which bounds a disk Di \u2282 Fi containing \u0131\u22121\ni (B) then we attach\na disk to F along B and we extend \u0131i over Di for those i = 1, 2 which satisfy\nthe above condition. By performing these operations for all components of\n\u2202F disjoint from \u0393, we extend Oi to an overlap \u014ci of (\u03931 , F1 ) and (\u03932 , F2 ).\n\n\f16\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nNotice that every overlap of these graphs which restricts to Oi must factor\nthrough \u014ci . Therefore we proved\nCorollary 3.13. \u014c1 , ..., \u014cd is a basis of overlaps of (\u03931 , F1 ) and (\u03932 , F2 ).\n4. A1 -webs\nInteresting examples of confluent and terminal reduction rules come from\nKuperberg's spider webs associated with simple Lie algebras of rank \u2264 2.\nThese are spaces of graphs in D 2 considered modulo certain relations, of\nthe type defined in Introduction. The classes of graphs considered and the\nrelations between them depend on the Lie algebra in question. Because of\ntheir relations to quantum invariants, it is important to consider Kuperberg's\nwebs in surfaces other than D 2 , even though they are not spiders anymore,\nsince the join operation is no longer defined. For that reason Kuperberg's\ngraphs in surfaces other than D 2 will simply be called webs. Although\nKuperberg's original reduction rules are not confluent for webs we will show\nthat these rules can be extended to finite, confluent, and terminal sets of\nreduction rules.\nThe A1 -webs without external vertices are unoriented link diagrams. To\nput such diagrams in the framework of surface graphs, we define crossings\nas marked 4-valent vertices depicted as\n\n. We require that opposite\n\nedges meeting at any crossing have equal labels, when taken with coinciding\norientations. The notions of linear graphs, reduction rules, local and global\nconfluence extend to graphs with crossings in an obvious way. Furthermore,\nthe method of proving local confluence discussed in Section 3.6 holds for\ngraphs with crossings as well.\nConsider now a surface F (not necessarily oriented) with a distinguished\nset of base points B \u2282 \u2202F (possibly empty). An A1 -web in (F, B) is an\nunoriented graph all of whose internal vertices are crossings and all of whose\nexternal vertices are points of B. (Such graphs in D 2 are called unoriented\ntangle diagrams with endpoints in B.) We denote the set of all A1 -webs in\n(F, B) by WA1 (F, B). Let R be a fixed ring with a distinguished invertible\nelement A. The A1 -web space over R is the R-module\nA1 (F, B, R) = RWA1 (F, B)/R(T1 , T2 ),\nwhere\n\u2212 A\u22121\n\nT1 =\n\n\u2212A\n\nT2 =\n\n\u2212 (A2 + A\u22122 )\u2205.\n\nHere and further on, all relations take place in D 2 and all 1-valent vertices are external, unless stated otherwise. The above relations suggest the\nobvious reduction rules:\nS1 :\n\n\u2192A\n\n+ A\u22121\n\n,\n\nS2 :\n\n\u2192 \u2212(A2 + A\u22122 )\u2205.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n17\n\nDenote the number of crossings and connected components of \u0393 \u2208 WA1 (F, B)\nby v(\u0393) and c(\u0393), respectively. If Z\u22650 \u00d7 Z\u22650 is given the lexicographic ordering then these reduction rules replace each graph \u0393 by a combination of\ngraphs \u0393i such that (v(\u0393i ), c(\u0393i )) < (v(\u0393), c(\u0393)). Therefore, the rules S1 , S2\nare terminal. The irreducible graphs are those with no crossings and no contractible loops. Since\n\nand\n\nhave no non-trivial overlaps, they are\n\nlocally confluent and, hence, also globally confluent. Now Theorem 2.3(2)\nprovides answers to questions (1),(2) of Introduction:\nCorollary 4.1. For any F, R and q, A1 (F, B, R) is the free R-module with\na basis given by finite collections of disjoint non-trivial simple closed loops\nin F, including \u2205.\n5. A2 -webs\nLet F be a surface with a distinguished set of base points B \u2282 \u2202F (possibly empty) which are marked by \u00b11. An A2 -web in (F, B) is an oriented\ngraph \u0393 in F all of whose internal vertices are either 3-valent sinks or sources\nor 4-valent crossings:\n\nand such that all external vertices are points of B. Furthermore, we require\nthat the external edge adjacent to b \u2208 B is oriented inwards or outwards\naccording to the labeling of b by 1 or \u22121.\nDenote the set of A2 -webs in F by WA2 (F, B). The A2 -web space is\nA2 (F, B, R) = RWA2 (F, B)/R(T1 , T2 , T3 , T4 , T5 , T6 ),\nwhere\nT1 =\n\n\u2212 (q + 1 + q \u22121 )\u2205,\n\nT2 =\n\n\u2212 (q + 1 + q \u22121 )\u2205,\n1\n\n1\n\n+ (q 2 + q \u2212 2 )\n\nT3 =\nT4 =\n\n\u2212\n\n\u2212\n\nT5 =\n\n\u2212 q6\n\nT6 =\n\n\u2212 q\u2212 6\n\n1\n\n1\n\n\u2212 q\u2212 3\n1\n\n1\n\n\u2212 q3\n\n,\n\nand R is an arbitrary ring with a distinguished invertible element denoted\n1\n1\nby q \u00b1 6 \u2208 R. (R = C[q \u00b1 6 ] in [Ku2].)\nThe above relations suggest \"obvious\" reduction rules:\n\n\f18\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\n\u2192 (q + 1 + q \u22121 )\u2205,\n\nS1 :\n\n1\n\n\u2192\n\nS4 :\n1\n\n\u2192 q6\n\n1\n\n\u2192 \u2212(q 2 + q \u2212 2 )\n\nS3 :\n\nS5 :\n\n\u2192 (q + 1 + q \u22121 )\u2205,\n\nS2 :\n\n1\n\n+ q\u2212 3\n\n,\n\n+\n\nS6 :\n\n1\n\n\u2192 q\u2212 6\n\n1\n\n+ q3\n\n.\n\nDenote the number of connected components, 3-valent vertices, and crossings of any \u0393 \u2208 WA2 (F, B) by c(\u0393), v3 (\u0393), and v4 (\u0393), respectively. If\nZ\u22650 \u00d7 Z\u22650 \u00d7 Z\u22650 is given the lexicographic ordering, then the above reduction rules replace \u0393 by a linear combination of graphs \u0393i such that\n(v4 (\u0393i ), v3 (\u0393i ), c(\u0393i )) < (v4 (\u0393), v3 (\u0393), c(\u0393)). Consequently, these reduction\nrules are terminal. However, they are not confluent for F 6= D 2 , S 2 ! Indeed,\nany surface F 6= D 2 , S 2 contains an annulus whose core is not contractible\n, followed by\n\nin F and the two possible applications of S4 to \u0393 =\n\nS1 , S2 , reduce it to X1 + (q + 1 + q \u22121 )\u2205 and X2 + (q + 1 + q \u22121 )\u2205, where\nX1 =\n\n,\n\nX2 =\n\n.\n\nSince X1 and X2 are irreducible and not isotopic, the reduction rules are\nnot confluent. In order to remedy this imperfection, we need to consider an\nadditional reduction rule taking place in an annulus:\nS7 :\n\n\u2192\n\n.\n\nNote that S1 , ..., S7 are terminal in the oriented case but not terminal in\nthe unoriented case, c.f. last paragraph of Section 3.2. Indeed, S7 is its own\ninverse in the unoriented case! Therefore, we consider A2 -webs in oriented\nsurfaces only and work in the category of oriented surfaces from now on.\n(We assume that all surfaces appearing in reduction rules S1 , ..., S7 have\ncounterclockwise orientation.)\nOne checks all overlaps for S1 , ..., S7 and concludes that S1 , ..., S7 are\nlocally confluent on all of them3. Therefore, by Theorem 2.3, we conclude:\n3Recall that irreducible overlaps of S and S (as abstract graphs) were classified in\n3\n4\n\nExample 3.8.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n19\n\nCorollary 5.1. The reduction rules S1 , ..., S7 are both terminal and confluent for graphs in WA2 (F, B), for any oriented surface F and any set of\nmarked base points B \u2282 \u2202F . Consequently, A2 (F, B, R) is a free R-module\nwith a basis composed of irreducible graphs in WA2 (F, B).\n\nObserve that irreducible A2 -webs in D 2 are those which have no S 1 's,\nno internal bi-gons, and no internal 4-gons. (Such graphs in D 2 are called\nnon-elliptic in [Ku2].) While these terms are intuitively obvious for graphs\nin D 2 , they do require clarification for graphs in other surfaces.\nComponents of F \\ \u0393 are faces of \u0393. A face is internal if it is disjoint from\n\u2202F . An internal face is called an n-gon if it is a disk bounded by a sequence\nof n edges of \u0393. (The orientations of the edges are irrelevant.) An n-gon is\ntrue if all its boundary edges are distinct; otherwise it is fake. For example,\nthe 4-gon in S 1 \u00d7 I bounded by the edges E1 , E2 , E3 , E2 depicted below is\nfake.\n\nE1\nE2\nE3\nA loop in \u0393 bounding a disk in F \\\u0393 is called a 0-gon. The next statement\nfollows directly from A2 -web reduction rules:\nCorollary 5.2. The irreducible graphs in WA2 (F, B) are precisely those with\nno 0-gons, no true bi-gons, and no true 4-gons.\n6. B2 -webs\nLet F be a surface together with a specified finite set of base points\nB \u2282 \u2202F (possibly empty), each of them marked by 1 or 2. Throughout this\nsection we work in the category of unoriented surfaces.\nDefinition 6.1. Let WB2 (F, B) be the set of all labeled graphs \u0393 in F , with\n\u039b = {1, 2} and \u03bd the identity, c.f. Section 3, such that\n(1) the labels of edges adjacent to points of B coincide with their labels, and\n(2) all internal vertices of \u0393 are of the form\n\n(The labels are depicted either by a single or double line.)\nThe B2 -web space is\nB2 (F, B, R) = RWB2 (F, B)/R(T1 , ..., T6 ),\nwhere\n\n\f20\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nT1 =\n\n+ (q 2 + q + q \u22121 + q \u22122 )\u2205\n\nT2 =\n\n\u2212 (q 3 + q + 1 + q \u22121 + q \u22123 )\u2205\n\nT3 =\n+ (q + 2 + q \u22121 )\n\nT4 =\nT5 =\nT6 =\n\n\u2212\n\n\u2212\n\n+\n\nand R is an arbitrary ring with a distinguished invertible element q \u2208 R.\nB2 -webs with crossings are discussed in the next subsection.\nWhile T1 , ..., T5 yield \"obvious\" reduction relations, which we denote by\nS1 , ..., S5 , relation T6 creates a problem since the rule\n\u2192\n\n\u2212\n\n+\n\nis its own inverse and, hence, it is not terminal. Following Kuperberg's\nidea, we remedy this problem by allowing B2 -webs to have 4-valent vertices\nsubject to a relation T6\u2032 = 0, where\nT6\u2032 =\n\n\u2212\n\n\u2212\n\n.\n\n\u2032 (F, B). Note that T \u2032 does\nWe denote this extended family of webs by WB\n6\n2\nnot introduce any new relations and, therefore,\n\u2032\nB2 (F, B, R) = RWB2 (F, B)/R(T1 , ..., T6 ) = RWB\n(F, B)/R(T1 , ..., T5 , T6\u2032 ).\n2\n\nNow, T6\u2032 suggests the reduction rule\nS6 :\n\n\u2192\n\n+\n\nSince each of the reduction rules S1 , ..., S6 either decreases the number of\nvertices or decreases the number of connected components without increasing the number of vertices, these reduction rules are terminal. However, they\nare not confluent in general4. S1 , ..., S6 have the following basis of overlaps:\nO36 =\n\nO46c =\n\n, O46a =\n\n, O56a =\n\n, O46b =\n\n, O56b =\n\n,\n\n, O56c =\n\n4These rules may be confluent for certain choices of R and q, but not for all.\n\n.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n21\n\nDashed lines denote boundaries of surfaces. (No dashed line is drawn for\ndiagrams in D 2 .) Overlaps O46b and O56b take place in annuli and O46c and\nO56c in M\u00f6bius bands. Unfortunately, S1 , ..., S6 are not locally confluent on\nthese overlaps. For example,\nS6 ,S1\n\nS\n\n3\n0 \u2190\u2212\n\n\u2212\u2192\n\n\u2212 (q 2 + q + q \u22121 + q \u22122 )\n\n,\n\nand both of these linear graphs are irreducible with respect to S1 , ..., S6 .\nIn order to remedy that, we introduce the following new rules (preserving\nrelations S1 -S6 ):\nS7 :\n\n\u2192 (q 2 + q + q \u22121 + q \u22122 )\n\nS8 :\n\n\u2192 \u2212(q + 2 + q \u22121 )\n\nS9 :\n\n\u2192 (q + 2 + q \u22121 )\n\nS10 :\n\n\u2192 \u2212(q + 2 + q \u22121 )\n\nS11 :\n\n\u2192 \u2212(q + 2 + q \u22121 )\n\nS12 :\n\n\u2192 0\n\nS13 :\n\n\u2192 0\n\n+ (q 2 + q + q \u22121 + q \u22122 )\u2205\n+ (q 2 + q + q \u22121 + q \u22122 )\u2205\n\nRules S10 , S12 take place in annuli and rules S11 , S13 in M\u00f6bius bands.\n(The graph on the left side of rule S11 has a single vertex, and the one on\nthe left side of S13 has two vertices.)\nNow S1 , ..., S13 are locally confluent on O36 , ..., O56c , but the new rules,\nS7 -S13 , lead to new overlaps:\n, O68 =\n, O78 =\n, O88 =\n,\nO77 =\nO69a =\n\nO89 =\n\n, O69b =\n\n, O99 =\n\n, O69c =\n\n, O6,12 =\n\n, O79 =\n\n,\n\n, O6,13 =\n\nNow, we make S1 , ..., S13 locally confluent on these overlaps by introducing\nthe following new reduction rules:\n\n.\n\n\f22\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nS14 :\nS15 :\n\n\u2192 \u2212(q + 2 + q \u22121 )\n\u0012\n\u22121\n\u2192 (q + 2 + q )\n\n\u2212 (q 2 + 2q + 2 + 2q \u22121 + q \u22122 )\n\u0013\n+\n\nS16 :\n\n\u2192 (q + 2 + q \u22121 )\n\n\u2212 (q 2 + q + q \u22121 + q \u22122 )\n\nS17 :\n\n\u2192 (q + 2 + q \u22121 )\n\n\u2212 (q 2 + q + q \u22121 + q \u22122 )\n\n.\n\nThe new overlaps now are:\nO7,14 =\nO14,14a =\nO14,14d =\n\nO9,15 =\nO15,15a =\n\n, O8,14 =\n, O14,14b =\n, O6,15 =\n\n, O9,14 =\n, O14,14c =\n, O7,15 =\n\n, O14,15b =\n\n,\n,\n, O8,15 =\n\n, O14,15c =\n\n, O15,15b =\n\n,\n\n,\n\n, O15,15c =\n\n,\n\nO15,15d =\n\n, O15,15e =\n\n, O7,16 =\n\n,\n\nO8,16 =\n\n, O9,16 =\n\n, O15,16 =\n\n,\n\nO16,16a =\nO8,17 =\n\nO15,17 =\n\nO17,17a =\n\n, O16,16b =\n, O9,17 =\n\n, O7,17 =\n, O14,17 =\n\n, O16,17a =\n\n,\n,\n\n, O16,17b =\n\n. Finally, there is an overlap O17,17b in a Klein\n\n,\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n23\n\nbottle obtained by gluing two M\u00f6bius bands along their boundaries and taking a union \u0393 of two graphs\n\nv\n\noverlapping at vertex v. (Hence, \u0393\n\nhas three 4-valent vertices and no vertices of other valences.) Since S1 -S17\nare not locally confluent on O6,15 , we add yet another reduction rule:\n\u0012\n\u0013\n\u22121\n\u2192 (q + 2 + q )\n+\n+\nS18 :\n+\n(q 2 + 4q + 6 + 4q \u22121 + q \u22122 )\n\n.\n\nOne can check that S1 -S18 are locally confluent on all overlaps listed so far.\nHowever, S18 leads to new overlaps:\nO7,18 =\n\nO14,18b =\nO15,18a =\n\nO15,18d =\n\nO18,18b =\nO18,18d =\n\n, O8,18 =\n\n, O9,18 =\n\n, O14,18c =\n, O15,18b =\n\n, O18,18d =\n\n,\n\n, O14,18d =\n, O15,18c =\n\n, O15,18e =\n\n, O18,18c =\n\n, O14,18a =\n\n,\n,\n\n, O18,18a =\n\n, O18,18d =\n\n,\n\n,\n\n.\n\nBy checking all of the above overlaps, we conclude that S1 -S18 are locally\nconfluent on all of them! Therefore, we proved:\nTheorem 6.2. The reduction rules S1 , ..., S18 are both terminal and confluent for WB2 (F, B), for any surface F and B \u2282 \u2202F (both in orientable and\nunorientable categories).\nFor sets B \u2282 \u2202F all of whose points are marked by 1, denote the set of\nall graphs in WB2 (F, B) with single edges only (i.e. edges labeled by 1), by\n\u2032 (F, B). (Graphs in W \u2032 (F, B) may include double loops.)\nWB\nB2\n2\nProposition 6.3. For any F and B \u2282 \u2202F as above,\n\u2032 (F, B) \u0592\u2192 W (F, B) induces an isomorphism\n(1) the embedding WB\nB2\n2\n\u2032\n\u03c6 : RWB\n(F, B)/R(S1 , S2 , S7 , S10 , S11 , S14 , S16 , S17 ) \u2192 B2 (F, B, R).\n2\n\n\f24\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\n(2) the rules S1 , S2 , S7 , S10 , S11 , S14 , S16 , S17 are terminal and confluent for\n\u2032 (F, B).\ngraphs in WB\n2\nProof. Since internal double edges are resolvable by S6 , \u03c6 is onto. The map\n\u03c6 is 1-1 as well: If \u03c6(x) = 0 in WB2 (F, B), then by confluence of S1 -S18 , x\n\u2032 (F, B), the rules which\ncan be reduced to 0 by these rules. Since x \u2208 RWB\n2\ndo not contain double edges are sufficient to reduce x to 0.\n\u0003\n6.1. B2 -webs with crossings. For any F and B \u2282 \u2202F as in Section 6, let\nc (F, B) be the set of all labeled graphs \u0393 in F , with edges labeled by 1\nWB\n2\nand 2 such that\n(1) the labels of edges adjacent to points of B coincide with their labels,\n(2) all internal vertices of \u0393 are of the form\n,\n\n,\n\n,\n\n,\n\n.\n\nResolutions of crossings are provided by\n1\n\n1\n\n\u2212 q\u2212 2\n\n1\n\nC1 :\n\n\u2192 \u2212q 2\n\nC2 :\n\n\u2192\n\n1\nq\u2212 2\n1\n1\nq 2 +q \u2212 2\n\n+\n\n1\nq2\n1\n1\nq 2 +q \u2212 2\n\nC3 :\n\n\u2192\n\n1\nq2\n1\n1\nq 2 +q \u2212 2\n\n+\n\n1\nq\u2212 2\n1\n1\nq 2 +q \u2212 2\n\nC4 :\n\n\u2192 q\n\n+ q \u22121\n\n+\n\n+\n\n1\n\n1\n\nq 2 +q \u2212 2\n\n1\nq+2+q \u22121\n\n.\n\nSince the crossing diagrams do not add any new overlaps, we conclude with\n1\n\nCorollary 6.4. If q 2 \u2208 R is such that q + 1 is invertible in R, then resolutions S1 , ..., S18 together with C1 , ..., C4 are confluent and terminal for any\nsurface F and B \u2282 \u2202F .\n7. G2 -webs\nLet F be a surface together with a specified finite set of base points\nB \u2282 \u2202F (possibly empty), each of them marked by 1 or 2. Throughout this\nsection we work in the category of unoriented surfaces.\nDefinition 7.1. Let WG2 (F, B) be the set of all labeled graphs \u0393 in F , whose\nedges are labeled by 1 or 2 and such that\n(1) the labels of edges adjacent to points of B coincide with their labels,\n(2) all internal vertices of \u0393 are of the form\nor\n\n.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n25\n\nThe G2 -web space is\nG2 (F, B, R) = RWG2 (F, B)/R(S1 , ..., S8 ),\nwhere\nS1 :\n\n\u2192 (q 5 + q 4 + q + 1 + q \u22121 + q \u22124 + q \u22125 )\u2205\n\nS2 :\n\n\u2192 (q 9 + q 6 + q 5 + q 4 + q 3 + q + 2 + q \u22121 + q \u22123 + q \u22124 +\nq \u22125 + q \u22126 + q \u22129 )\u2205\n\nS3 :\n\n\u2192 0\n\nS4 :\n\n\u2192 \u2212(q 3 + q 2 + q + q \u22121 + q \u22122 + q \u22123 )\n\nS5 :\n\n\u2192 (q 2 + 1 + q \u22122 )\n\nS6 :\n\n\u2192 \u2212(q + q \u22121 )\n\u0012\n\u2192\n+\n\u0012\n+\n\nS7 :\n\n\u2192\n\nS8 :\n\n\u2212\n\n\u0010\n\n+\n+\n+\n\n\u2212\n\n1\nq 2 \u22121+q \u22122\n\n\u0011\n\n\u0010\n+ (q + 1 + q \u22121 )\n\u0013\n\u2212\n+\n+\n\u0013\n+\n+\n.\n+\n\n1\nq+1+q \u22121\n\n+\n\n.\n\n(Be advised that reduction rule S7 has wrong signs in [Ku2].) Reduction\nrules for crossings are listed in [Ku2].\nBy checking all overlaps we conclude\nTheorem 7.2. If F is orientable and q 2 \u2212 1 + q \u22122 , q + 1 + q \u22121 are invertible\nin R, then reduction rules S1 , ..., S8 together with\nS9 :\n\n\u2192\n\n\u2212 (q + 1 + q \u22121 )\n\n(taking place in annulus) are confluent and terminal.5\n8. Partition Category and Dichromatic Reduction Rules\nAn example of terminal and confluent reduction rules for abstract graphs\ncomes from dichromatic polynomial, c.f. [Ye].\n5We did not check confluence for unoriented surfaces.\n\n\u0011\n\n\f26\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nLet Gn be the set of all unoriented graphs with n external vertices labeled\nfrom 1 to n and let R = Z[p, q, s, v, w1 , w2 ]. Consider reduction rules\nSk,l :\n\nl \u2192\n\nk\n\nSl :\n\nl\n\np\n\n\u2192 s\n\nSv :\n\n\u2192 v\u2205,\n\nSbw :\n\n\u2192 w1\n\nSbwb :\n\n\u2192 w2\n\n+q\n\n,\n\n,\n\nwhere external (respectively: internal) vertices are denoted by black (respectively: white) nodes and k, l \u2208 Z\u22650 .\nTheorem 8.1. (a) The above reduction rules are terminal and confluent.\n(b) Connected components of irreducible graphs are either isolated external\nor at least 3 external vertices connected to a single\nvertices, , or\ninternal vertex.\nThe termination of the above rules is obvious. The proof of confluence is\nleft to the reader.\nCorollary 8.2. Irreducible graphs in Gn are in 1-1 correspondence to partitions of {1, ..., n}.\nThe only irreducible graph with no external vertices is \u2205. Consequently,\nRG0 /R(Skl , Sl , k, l \u2265 0, S0 ) is a cyclic R-module generated by \u2205. The\nprojection G0 \u2192 RG0 /R(Skl , k, l \u2265 0, S0 ) \u2243 R followed by substitution\np\u21921,s\u21921+q\n\nR\n\u2212\u2192\nZ[q, v] is the dichromatic polynomial of graphs. A generalization of dichromatic polynomial to ribbon graphs is considered in [BR]. It\ncan be defined by reductions rules similar to those above as well.\n\n8.1. Partition Category. Let R be a ring with a specified \u03b4\u00b11 \u2208 R. A\nversion of the \"dichromatic\" reduction rules appears in the context of the\npartition category. There are two types of that category: symmetric and\nplanar one. In each of them, objects are non-negative integers.\nIn the symmetric partition category, the morphisms [n] \u2192 [m] are Rlinear combinations of abstract graphs with n + m external vertices divided\ninto an input set and an output set of n and m vertices, respectively. Vertices\nin each of these sets are numbered. The internal vertices have valency at\nmost 3. Furthermore, the graphs are subject to the following rules:\nT1 :\n\n=\n\n,\n\nT2 :\n\n= \u03b4,\n\nT3 :\n\n=\n\n,\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\nT4 :\n\n=\n\nT7 :\n\n,\n\n=\n\nT5 :\n\n27\n\n= 1, T6 :\n\n, T8 :\n\n= \u03b4\n\n=\n\n,\n\n.\n\nAs before, empty/full dots represent internal/external vertices. The composition of morphisms \u03931 \u2208 M or([n], [m]), \u03932 \u2208 M or([m], [k]) is defined by\nidentifying output vertices of \u03931 with corresponding input vertices of \u03932 .\n(The correspondence between these vertices is established by their numbering.) These vertices become internal in \u03932 \u25e6 \u03931 . The symmetric partition category is monoidal, with the tensor product of morphisms \u03931 \u2208\nM or([n1 ], [m1 ]), \u03932 \u2208 M or([n2 ], [m2 ]) given by taking their disjoint union\nand shifting the numbering of the input and output vertices of \u03932 by n1 and\nm1 respectively.\nIn the planar partition category, one thinks of objects as sets [n] =\nn\n1\n, ..., n+1\n} \u2282 [0, 1]. Morphisms [n] \u2192 [m] are R-linear (manifold) graphs\n{ n+1\nin [0, 1]\u00d7 [0, 1] without S 1 's, whose external vertices are [n]\u00d7 {0}\u222a [m]\u00d7 {1}.\nThese graphs are considered up to relations T1 , ..., T8 . We denote the space\nof morphisms in the planar partition category by M or p ([n], [m]). Compositions (respectively: tensor products) of morphisms are given by vertical\n(respectively: horizontal) stacking of graphs.\nThe importance of the planar (respectively: symmetric) partition category stems from the fact that the object [1] is the universal Frobenius algebra\n(respectively: commutative Frobenius algebra) in a monoidal (respectively\nsymmetric monoidal) category. Consequently, monoidal (respectively: symmetric monoidal) functors from the planar (respectively: symmetric) partition category into the category of R-modules are in 1-1 correspondence with\nFrobenius algebras (respectively: commutative Frobenius algebras) over R.\nFurthermore, the algebra of morphisms [n] \u2192 [n] called the partition algebra\nappears in the theory of Potts models, [Jo, Ma].\nReduction relations going from left to right sides of equations T1 -T8 are\nlocally confluent but not terminal since T1 is invertible. (Nonetheless, we are\ngoing to prove that they are confluent.) The intuitive way of making these\nrules terminal is by allowing 4-valent vertices and by adding a reduction rule\n\u2192\n\n.\n\nNow to make the new rules terminal and locally confluent one needs to add\nan additional relation involving 5-valent vertices, and then one involving\n6-valent vertices, etc. Finally, one arrives at:\nTheorem 8.3. (1) The natural embedding of graphs of the symmetric partition category into (abstract) graphs factors to an isomorphism of R-modules\n\u03c6 : M or([n], [m]) \u2192 Gn+m /R(S\u0304k,l , S\u0304l , S\u0304v , S\u0304bw , S\u0304bwb ),\n\n\f28\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nwhere\nS\u0304k,l : k\n\nl \u2192\n\n,\n\nS\u0304l :\n\nl\n\n\u2192 \u03b4\n\n,\n\nS\u0304v :\n\u2192 \u2205, S\u0304bw :\n\u2192 , S\u0304bwb :\n\u2192\n.\n(Note that these are the dichromatic reduction rules for p = 0, q = v = w1 =\nw2 = 1, s = \u03b4).\n(2) Similarly, the natural embedding of graphs of planar partition category\ninto planar graphs in D 2 with n + m external vertices factors to an isomorphism\n\u03c6p : M or p ([n], [m]) \u2192 Gn+m (D 2 )/R(S\u0304k,l , S\u0304l , S\u0304v , S\u0304bw , S\u0304bwb ).\n\nSketch of Proof. (1) The irreducible graphs in Gn+m listed in Theorem 8.1\nspan Gn+m /R(S\u0304k,l , S\u0304l , S\u0304v , S\u0304bw , S\u0304bwb ). Since all of these graphs are values of \u03c6,\nit is an epimorphism. To prove that \u03c6 is 1-1 observe that connected components of every graph in M or([n], [m]) determine a partition of {1, ..., n + m}.\nLet M or \u03c4 ([n], [m]) be the subspace of M or([n], [m]) spanned by graphs associated with the partition \u03c4. Since T1 , ..., T8 preserve partitions,\nM\nM or([n], [m]) =\nM or \u03c4 ([n], [m])\npartitions \u03c4\n\nand, similarly, Gn+m /R(S\u0304k,l , S\u0304l , S\u0304v , S\u0304bw , S\u0304bwb ) decomposes into subspaces indexed by partitions, which by Theorem 8.1 are 1-dimensional. Since \u03c6 preserves partition classes, it is enough to prove that M or \u03c4 ([n], [m]) \u2243 R as an\nR-module. This follows from the following:\nLemma 8.4. Any two connected graphs with internal vertices of valency\n\u2264 3 are equivalent via relations T1 , ..., T8 .\n\nProof: T4 and T1 allow to \"slide\" edges past 2-valent and 3-valent vertices.\nTherefore, all cycles in a graph can be transformed into loops, which can be\neliminated by T2 and T8 . Furthermore, all internal 1-valent vertices can be\nremoved by T5 , T6 and T7 . Consequently, each connected graph is equivalent\nto a tree with no internal 1-valent vertices. All such trees are related by T1\nmoves. There is a geometric way to see that. First, any such tree embeds\ninto D 2 and its dual corresponds to a division of a (n + m)-gon into triangles\nby non-intersecting diagonals. Here is an example of a planar tree and the\ncorresponding dual triangulation of 6-gon:\n\nAny two such triangulations are related by the move:\n\n\u2194\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n29\n\nwhich is dual to T1 .\n\n\u0003\n\nThe proof of Theorem 8.3(2) is analogous.\n9. Application to knots\nNow, we turn to spaces of dimension 3, which are the most difficult to\ndeal with in the context of graph embeddings. Graphs in a 3-dimensional\nmanifold M are the easiest to analyze if M is an I-bundle over a surface F ,\nI = [\u22121, 1], since then each graph is represented by its diagram in F and\nsuch representations are unique up to Reidemeister moves:\nRI :\n\n\u2194\n\n,\n\n\u2194\n\nRII :\n\n,\n\nand RIII :\n\n\u2194\n\n,\n\nand the moves\n\u2194\n\nV :\n\n\u2194\n\u2194\n\nVk,l :\n\nwhere there are k edges on the right and l on the left, for all k, l \u2265 0.\nThe main problem in knot theory is deciding whether any two link diagrams represent isotopic links. This reduces now to question whether these\nlink diagrams are equal in ZLD(F )/R(RI, RII, RIII), where LD(F ) is the\nset of all link diagrams in F . (In classical knot theory F = D 2 , but other\nsurfaces are of interest for us as well.) Notice that this is a version of the\nproblem formulated in Introduction.\nThe rules\nr1 :\n\n\u2192\n\n,\n\nr2 :\n\n\u2192\n\nalthough terminal are not confluent, since\nand\nare both irreducible but not equivalent to each other. However, it is easy to\nshow by the method of Section 3.6 that r1 , r2 together with\nr1\u2032 :\n\n\u2192\n\nare terminal and confluent. Unfortunately, the rule r3 :\n\n\u2192\n\nr1 , r1\u2032 , r2 , r3\n\nis\n\nare not\nnot terminal since it is its own inverse. Furthermore,\nconfluent.\nNonetheless, inspired by the notion of confluence we ask the following\nquestion:\n\n\f30\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nQuestion 9.1. For any given surface F, is there a set G of graphs in F\ncontaining LD(F ) and a finite set of terminal and confluent reduction rules\nS1 , ..., Sd , with coefficients in a ring R such that the inclusion LD(F ) \u0592\u2192 G\ninduces a monomorphism\n\u03c6 : RLD(F )/R(RI, RII, RIII) \u0592\u2192 RG/R(S1 , ..., Sd ).\nA positive answer to this question would provide an obvious algorithm for\ndistinguishing non-isotopic links in I-bundles over F . We conjecture that\nthere does not exist a set of terminal and confluent reduction rules with\nthese properties.\nConfluence theory provides an immediate proof of the following statement.\nTheorem 9.2. Let F be any surface and B \u2282 \u2202F a finite set.\n(1) unoriented link diagrams (A1 -webs) in F are invariant in A1 (F, B, R)\nunder moves RII, RIII, and the first balanced Reidemeister move:\nRIb :\n\n\u2192\n\n.\n\n(2) A2 -webs are invariant in A2 (F, B, R) under oriented 2nd and 3rd Reidemeister moves as well as oriented 1st balanced Reidemeister move and under\nmoving an arc over a vertex.\n(3) Similarly, B2 -webs and G2 -webs in F are invariant under all 2nd and\n3rd Reidemeister moves (involving both single and double lines) and under\nmoving an arc over a vertex.\nTo prove invariance under any of the above relations it is enough to check\nthat reduction rules applied to both sides of that relation yield identical\nlinear diagrams.\nCorollary 9.3. For orientable F , A1 (F, \u2205, R), B2 (F, \u2205, R), G2 (F, \u2205, R), provide invariants of framed unoriented links and A2 (F, \u2205, R) provides an invariant of framed oriented links under isotopy in F \u00d7 I.\n\nFor F = R2 , B = \u2205, and R = Z[A\u00b11 ], the module A1 (F, B, R) is free on\none generator, \u2205, and [L] \u2208 A1 (F, B, R) = R is the Kauffman bracket of L,\n[Ka]. For other oriented surfaces, A1 (F, \u2205, R) is isomorphic to the Kauffman\nbracket skein module of F \u00d7 I, [HP2, P5, P6, PS]. (For more on Kauffman\nbracket skein modules see [Bu1, Bu2, BFK1, BFK2, BHMV, BP, FG, FGL,\nFK, GS1, GS2, GH, HP3, HP4, Le, Sa1, Sa2, S1, S3, Tu].) Consequently,\nCorollary 4.1 immediately implies the result of Przytycki, [P6, Theorem 3.1]:\nTheorem 9.4. For any ring R with A\u00b11 \u2208 R and any orientable surface F,\nthe Kauffman bracket skein module of F \u00d7 [0, 1] is a free R-module with basis\ncomposed of links whose diagrams in F have no crossings and no contractible\ncomponents.\n\nThere are versions of this theorem for orientable I-bundles over nonorientable surfaces and for B 6= \u2205. They can be easily proved by the method\nof confluence as well.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n31\n\nThe module A2 (F, \u2205, R) is isomorphic to the SU3 -skein module of F \u00d7 I\nintroduced in [FZ, S4]. (See also [OY].) Consequently, Corollary 5.2 implies\nTheorem 9.5. The SU3 -skein module of F \u00d7 I, S3 (F \u00d7 I, R) (in notation\nof [S4]) is a free R-module with a basis given by all A2 -webs in F with no\n0-gons, no true bigons, and no true 4-gons.\nProblem 9.6. A large number of skein modules is considered in the literature, other than those mentioned above, [AT1, AT2, GZ, HM, HP1, Kai1,\nKai2, Kai3, KL, Li, P1, P2, P3, P4, P7, P8, P9, PT, Zh, ZL]. Can the method\nof confluence be applied to determine canonical bases of these modules for\nF \u00d7 I?\nThe applications of confluence theory to knot theory discussed so far apply\nto links in I-bundles over surfaces. Unfortunately, reduction rules for links\nin arbitrary 3-manifolds are more difficult to handle. This is illustrated by\nthe Kauffman bracket skein relations:\nLet L(M ) be the set of all framed unoriented links in an orientable 3manifold M . Let R be a ring with a distinguished element A\u00b11 \u2208 R and\nlet\n+ A\u22121\n\nS1 :\n\n\u2192 A\n\nS2 :\n\n\u2192 (A2 + A\u22122 )\u2205\n\nbe reduction rules taking place in D 3 . The R-module RL(M )/R(S1 , S2 ) is\ncalled the Kauffman bracket skein module of M . We leave the proof of the\nfollowing to the reader:\nProposition 9.7. S1 , S2 are confluent but not terminal.\nReferences\n[AT1] J. E. Andersen, V. Turaev, Higher Skein Modules, J. Knot Theory Ramifications\n8 (1999), no. 8, 963\u2013984. math.GT/9812071\n[AT2] J. E. Andersen, V. Turaev, Higher skein modules II, in Topology, ergodic theory,\nreal algebraic geometry, 21\u201330, Amer. Math. Soc. Transl. Ser. 2, 202, Amer. Math.\nSoc., Providence, RI, 2001.\n[Be] G. M. Bergman, The diamond lemma for ring theory, Adv. in Math. 29 (1978), no.\n2, 178\u2013218.\n[BHMV] C. Blanchet, N. Habegger, G. Masbaum, P. Vogel, Topological quantum field\ntheories derived from the Kauffman bracket, Topology 34 (1995) 883\u2013927.\n[BaN] F. Baader, T. Nipkow, Term rewriting and all that, Cambridge University Press,\nCambridge, 1998.\n[BR] B. Bollobas, O. Riordan, A polynomial of graphs on surfaces, Math. Ann. 323\n(2002), no. 1, 81\u201396.\n[Bu1] D. Bullock, The (2, \u221e)-skein module of the complement of a (2, 2p + 1) torus knot,\nJ. Knot Theory Ramifications 4 (1995), no. 4, 619\u2013632.\n[Bu2] D. Bullock, Rings of Sl2 (C)-characters and the Kauffman bracket skein module,\nComment. Math. Helv. 72 (1997), 521-542.\n[BL] D. Bullock, W. Lofaro, The Kauffman bracket skein module of a twist knot exterior,\nAlgebr. Geom. Topol. 5 (2005), 107\u2013118.\n\n\f32\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\n[BFK1] D. Bullock, C. Frohman, J. Kania-Bartoszy\u0144ska, Understanding the Kauffman\nbracket skein module, J. of Knot Theory and Ramifications, 8 (1999) no. 3, 265\u2013\n277. arXiv: q-alg/9604013\n[BFK2] D. Bullock, C. Frohman, J. Kania-Bartoszy\u0144ska, Frohman, Charles; KaniaBartoszy\u0144ska, Joanna The Yang-Mills measure in the Kauffman bracket skein module, Comment. Math. Helv. 78 (2003), 1\u201317.\n[BP] D. Bullock, J. H. Przytycki, Multiplicative structure of Kauffman bracket skein\nmodule quantizations, Proc. Amer. Math. Soc. 128 (2000), no. 3, 923\u2013931.\n[Cu] P.-L. Curien, Categorical combinators, sequential algorithms, and functional programming, Progress in Theoretical Computer Science, Birkh\u00e4user Boston, Inc.,\nBoston, 1993.\n[Eh1] H. Ehrig, Introduction to the algebraic theory of graph grammars (A survey), pp. 1\u2013\n69 in Graph-Grammars and Their Application to Computer Science and Biology,\nLect. Notes in Comp. Science, 73, Eds. V. Claus, H. Ehrig, and G. Rozenberg,\nSpringer-Verlag, 1979.\n[Eh2] H. Ehrig, Tutorial Introduction to the algebraic approach to graph grammars, pp.\n3\u201314 in Graph-Grammars and Their Application to Computer Science, Lect. Notes\nin Comp. Science, 291, Eds. H. Ehrig, M. Nagl et al., Springer-Verlag, 1987.\n[FG] C. Frohman, R. Gelca, Skein modules and the noncommutative torus, Trans. Amer.\nMath. Soc. 352 (2000), no. 10, 4877\u20134888.\n[FGL] C. Frohman, R. Gelca, W. Lofaro, The A-polynomial from noncommutative viewpoint, Trans. Amer. Math. Soc. 354 (2002), 735\u2013747.\n[FK] C. Frohman, J. Kania-Bartoszy\u0144ska, A quantum obstruction to embedding, Math.\nProc. Cambridge Philos. Soc. 131 (2001), no. 2, 279\u2013293.\n[FZ] C. Frohman, J. Zhong, The Yang-Mills measure in the SU3 skein module, preprint\n2004.\n[Ge1] R. Gelca, On the relation between the A-polynomial and the Jones polynomial,\nProc. Amer. Math. Soc. 130 (2002), no. 4, 1235\u20131241\n[Ge2] R. Gelca, Non-commutative trigonometry and the A-polynomial of the trefoil knot,\nMath. Proc. Cambridge Philos. Soc. 133 (2002), no. 2, 311\u2013323.\n[GS1] R. Gelca, J. Sain, The computation of the non-commutative generalization of the\nA-polynomial of the figure-eight knot, J. Knot Theory Ramifications 13 (2004), no.\n6, 785\u2013808.\n[GS2] R. Gelca, J. Sain, The noncommutative A-ideal of a (2, 2p + 1)-torus knot determines its Jones polynomial, J. Knot Theory Ramifications 12 (2003), no. 2,\n187\u2013201.\n[GH] P. M. Gilmer, J. M. Harris, On the Kauffman bracket skein module of the quaternionic manifold, math.GT/0406152\n[GZ] P. M. Gilmer, J. K. Zhong, The Homflypt skein module of a connected sum of\n3-manifolds, Alg. and Geom. Top. 1 (2001), no. 31, 605\u2013625.\n[HM] R. J. Hadji, H. R. Morton, A basis for the full Homfly skein of the annulus,\nmath.GT/0408078\n[HP1] J. Hoste, J. Przytycki, Homotopy skein modules of orientable 3-manifolds, Math.\nProc. Cambridge Philos. Soc. 108 (1990), 475\u2013488.\n[HP2] J. Hoste, J. Przytycki, A survey of skein modules of 3-manifolds, in \"Knots'90\",\nWalter de Gruyter, Berlin- New York, 1992, 363\u2013379.\n[HP3] J. Hoste, J. Przytycki, The (2, \u221e)-skein module of Whitehead manifolds, J. Knot\nTheory Ramifications 4 (1995), no. 3, 411\u2013427.\n[HP4] J. Hoste, J. Przytycki, The Kauffman bracket skein module of S 1 \u00d7 S 2 , Math. Z.\n220 (1995), no. 1, 65\u201373.\n[Ja]\nF. Jaeger, Confluent reductions of cubic plane maps, talk in Graph Theory and\nCombinatorics International Conference, Marseille, 1990.\n\n\fCONFLUENCE THEORY FOR GRAPHS\n\n[Jo]\n[Kai1]\n[Kai2]\n[Kai3]\n[KL]\n[Ka]\n[KV]\n[Ku1]\n[Ku2]\n[La]\n[Le]\n[Li]\n[Na]\n\n[Ne]\n[OD]\n[OY]\n[Mi]\n[Ma]\n[MR]\n\n[Oh]\n[P1]\n\n[P2]\n[P3]\n\n[P4]\n\n33\n\nV. F. R. Jones, The Potts model and the symmetric group, pp. 259\u2013267 in Subfactors, (Kyuzeso, 1993), World Sci. Publishing 1994,\nU. Kaiser, Quantum deformations of fundamental groups of oriented 3-manifolds,\nhttp://www.arxiv.org/abs/math.GT/0202293\nU. Kaiser, Deformation of string topology into homotopy skein modules, Alg. and\nGeom. Top. 3 (2003), paper no. 34, 1005\u20131035.\nU. Kaiser, Link bordism skein modules, Fund. Math. 184 (2004), 113\u2013134.\nE. Kalfagianni, X.-S. Lin, The HOMFLY polynomial for links in rational homology\n3-spheres, Topology, 38, (1999), no. 1, 95\u2013115, q-alg/9509010\nL. H. Kauffman, State models and the Jones polynomial, Topology 26 (1987) no.\n3, 395\u2013407.\nL. H. Kauffman, P. Vogel, Link polynomials and graphical calculus, J. of Knot\nTheory Ramifications 1, no. 1 (1992), 59\u2013104.\nG. Kuperberg, The quantum G2 link invariant, Internat. J. Math. 5 (1994), no. 1,\n61\u201385.\nG. Kuperberg, Spiders for rank 2 Lie algebras, Comm. Math. Phys. 180 (1996),\nno. 1, 109\u2013151.\nR. Lalement, Computation as logic, Prentice Hall International Series in Computer\nScience. Prentice Hall International, 1993.\nT. T. Q. Le, The Colored Jones Polynomial and the A-Polynomial of Knots,\nmath.GT/0407521\nJ. Lieberum, Skein modules of links in cylinders over surfaces, Int. J. Math. Math.\nSci. 32 (2002), no. 9, 515\u2013554, math.QA/9911174\nM. Nagl, A tutorial and bibliographical survey on graph grammars, pp. 70\u2013126 in\nGraph-Grammars and Their Application to Computer Science and Biology, Lect.\nNotes in Comp. Science, 73, Eds. V. Claus, H. Ehrig, and G. Rozenberg, SpringerVerlag, 1979.\nM. H. A. Neuman, On theories with a combinatorial definition of \"equivalence\",\nAnn. of Math. 43 (1942), no. 2, 223\u2013243.\nM. J. ODonnell, Computing in systems described by equations, Lecture Notes in\nComputer Science, Vol. 58, Springer-Verlag, 1977.\nT. Ohtsuki, S. Yamada, Quantum SU (3) invariants via linear skein theory, J. Knot\nTheory Ramifications, 6 (1997) 373\u2013404.\nJ. C. Mitchel, Foundations for Programming Languages, MIT Press, 1996.\nP. Martin, Potts models and related problems in statistical mechanics, Series of\nAdvances in Statistical Mechanics, vol 5, World Sci. Publishing, 1991.\nH. R. Morton, H. J. Ryder, Mutants and SU (3)q invariants, pp. 365\u2013381 in The Epstein birthday schrift, Eds.: I. Rivin, C. Rourke, C. Series, Geom. Topol. Monogr.,\n1, Geom. Topol. Publ., Coventry, 1998.\nE. Ohlebusch, Advanced topics in term rewriting, Springer-Verlag, New York, 2002.\nJ. H. Przytycki, Skein module of links in a handlebody, in Topology 90, Proc. of the\nResearch Semester in Low Dimensional Topology at OSU, Editors: B.Apanasov,\nW.D.Neumann, et al., De Gruyter Verlag, 1992, 315-342.\nJ. H. Przytycki, Skein modules of 3-manifolds, Bull. Polish Acad. Sci. Math., 39\n(1991) no. 1-2, 91\u2013100.\nJ. H. Przytycki, Vassiliev-Gusarov skein modules of 3-manifolds and criteria for\nperiodicity of knots, in Low-dimensional topology (Knoxville, TN, 1992), 143\u2013162,\nConf. Proc. Lecture Notes Geom. Topology, III, Internat. Press, Cambridge, MA,\n1994.\nJ. H. Przytycki, A q-analogue of the first homology group of a 3-manifold, Perspectives on quantization (South Hadley, MA, 1996), 135\u2013144, Contemp. Math., 214,\nAmer. Math. Soc., Providence, RI, 1998.\n\n\f34\n\n[P5]\n\nADAM S. SIKORA, BRUCE W. WESTBURY\n\nJ. H. Przytycki, Algebraic topology based on knots: An introduction, Proceedings\nof Knots'96, edited by Shin'ichi Suzuki, World Scientific Pub. 1997, pp. 279\u2013297.\n[P6] J. H. Przytycki, Fundamentals of Kauffman bracket skein modules, Kobe Math. J.,\n16(1) 1999, 45\u201366, http://xxx.lanl.gov/abs/math.GT/9809113\n[P7] J. H. Przytycki, Skein module deformations of elementary moves on links, Invariants\nof knots and 3-manifolds (Kyoto, 2001), 313\u2013335 in Geom. Topol. Monogr., 4,\nGeom. Topol. Publ., Coventry, 2002.\n[P8] J. H. Przytycki, Homotopy and q-homotopy skein modules of 3-manifolds: an example in Algebra Situs, Proceedings of the Conference in Low-Dimensional Topology\nin Honor of Joan Birman's 70th Birthday, Columbia University/Barnard College,\nNew York, March 14\u201315, 1998, to appear.\n[P9] J. H. Przytycki, From 3-moves to Lagrangian tangles and cubic skein modules,\nProceedings of the workshop New Techniques in Topological Quantum Field Theory; Calgary/Kananaskis, August 22-27, 2001, Kluwer Academic Publisher, 2004,\nto appear.\n[PS] J. H. Przytycki, A. S. Sikora, On Skein Algebras and Sl2 (C)-Character Varieties,\nTopology, 39(1) (2000), 115\u2013148. http://xxx.lanl.gov/abs/q-alg/9705011\n[PT] J. H. Przytycki, T. Tsukamoto, The fourth skein module and the MontesinosNakanishi conjecture for 3-algebraic links, J. Knot Theory Ramifications 10 (2001),\nno. 7, 959\u2013982.\n[Sa1] P. Sallenave, On the Kauffman bracket skein algebra of parallelized surfaces, Ann.\nSci. \u00c9cole Norm. Sup. (4) 33 (2000), no. 5, 593\u2013610.\n[Sa2] P. Sallenave, Structure of the Kauffman bracket skein algebra of T 2 \u00d7 I, J. Knot\nTheory Ramifications 8 (1999), no. 3, 367\u2013372.\n[S1] A. S. Sikora, Skein modules and TQFT, in Knots in Hellas '98 (Delphi), 436\u2013439,\nSer. Knots Everything, 24, World Sci. Publishing, River Edge, NJ, 2000.\n[S2] A. S. Sikora, SLn -Character Varieties as Spaces of Graphs, Trans. Amer. Math.\nSoc., 353 (2001), 2773\u20132804.\n[S3] A. S. Sikora, Skein modules at the 4th roots of unity, J. Knot Theory Ramifications\n13 (2004), no. 5, 571\u2013585.\n[S4] A. S. Sikora, Skein Theory for SU (n)-quantum invariants, Algebr. Geom. Top., 5\n(2005) 865\u2013897.\n[Sim] C. C. Sims, Computation with finitely presented groups, Encyclopedia of Mathematics and its Appl., 48., Cambridge Univ. Press, Cambridge, 1994.\n[Tu] V. Turaev, The Conway and Kauffman modules of the solid torus, Zap. Nauchn.\nSem. Lomi. 167 (1988) 79\u201389.\n[Ye] D. N. Yetter, On graph invariants given by linear recurrence relations, J. Combin.\nTheory Ser. B 48 (1990), no. 1, 6\u201318.\n[Zh] J. K. Zhong, The Kauffman skein module of the connected sum of 3-manifolds,\n[ZL] J. K. Zhong, B. Lu, On the Kauffman skein modules, Manuscripta Math., 109,\n(2002), no. 1, 29\u201347.\n\n\f"}