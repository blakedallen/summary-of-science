{"id": "http://arxiv.org/abs/0706.1326v3", "guidislink": true, "updated": "2009-02-27T15:10:56Z", "updated_parsed": [2009, 2, 27, 15, 10, 56, 4, 58, 0], "published": "2007-06-09T17:50:17Z", "published_parsed": [2007, 6, 9, 17, 50, 17, 5, 160, 0], "title": "The oscillation stability problem for the Urysohn sphere: A\n  combinatorial approach", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0706.3671%2C0706.0227%2C0706.2165%2C0706.0292%2C0706.1678%2C0706.0414%2C0706.2874%2C0706.0004%2C0706.2466%2C0706.2843%2C0706.2137%2C0706.4306%2C0706.2094%2C0706.3016%2C0706.2239%2C0706.3169%2C0706.4383%2C0706.1440%2C0706.3376%2C0706.1732%2C0706.0798%2C0706.1760%2C0706.1772%2C0706.3399%2C0706.3126%2C0706.3637%2C0706.0653%2C0706.0510%2C0706.3277%2C0706.2767%2C0706.4288%2C0706.1543%2C0706.1041%2C0706.3944%2C0706.0538%2C0706.3451%2C0706.2066%2C0706.0058%2C0706.1289%2C0706.0489%2C0706.3693%2C0706.2106%2C0706.1892%2C0706.1235%2C0706.3354%2C0706.2879%2C0706.2953%2C0706.3441%2C0706.4457%2C0706.3453%2C0706.1382%2C0706.4069%2C0706.3653%2C0706.0530%2C0706.2766%2C0706.0272%2C0706.2448%2C0706.0534%2C0706.4308%2C0706.1310%2C0706.3265%2C0706.2570%2C0706.3234%2C0706.1428%2C0706.2500%2C0706.0241%2C0706.0692%2C0706.4143%2C0706.0170%2C0706.0953%2C0706.0052%2C0706.0934%2C0706.2140%2C0706.0471%2C0706.1955%2C0706.1923%2C0706.0383%2C0706.1326%2C0706.0001%2C0706.4337%2C0706.1870%2C0706.2681%2C0706.4436%2C0706.3682%2C0706.2854%2C0706.1309%2C0706.1152%2C0706.1845%2C0706.2892%2C0706.3590%2C0706.3308%2C0706.0303%2C0706.3955%2C0706.1782%2C0706.1317%2C0706.2053%2C0706.4299%2C0706.1394%2C0706.3765%2C0706.0482%2C0706.2139&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "The oscillation stability problem for the Urysohn sphere: A\n  combinatorial approach"}, "summary": "We study the oscillation stability problem for the Urysohn sphere, an analog\nof the distortion problem for $\\ell_2$ in the context of the Urysohn space\n$\\Ur$. In particular, we show that this problem reduces to a purely\ncombinatorial problem involving a family of countable ultrahomogeneous metric\nspaces with finitely many distances.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0706.3671%2C0706.0227%2C0706.2165%2C0706.0292%2C0706.1678%2C0706.0414%2C0706.2874%2C0706.0004%2C0706.2466%2C0706.2843%2C0706.2137%2C0706.4306%2C0706.2094%2C0706.3016%2C0706.2239%2C0706.3169%2C0706.4383%2C0706.1440%2C0706.3376%2C0706.1732%2C0706.0798%2C0706.1760%2C0706.1772%2C0706.3399%2C0706.3126%2C0706.3637%2C0706.0653%2C0706.0510%2C0706.3277%2C0706.2767%2C0706.4288%2C0706.1543%2C0706.1041%2C0706.3944%2C0706.0538%2C0706.3451%2C0706.2066%2C0706.0058%2C0706.1289%2C0706.0489%2C0706.3693%2C0706.2106%2C0706.1892%2C0706.1235%2C0706.3354%2C0706.2879%2C0706.2953%2C0706.3441%2C0706.4457%2C0706.3453%2C0706.1382%2C0706.4069%2C0706.3653%2C0706.0530%2C0706.2766%2C0706.0272%2C0706.2448%2C0706.0534%2C0706.4308%2C0706.1310%2C0706.3265%2C0706.2570%2C0706.3234%2C0706.1428%2C0706.2500%2C0706.0241%2C0706.0692%2C0706.4143%2C0706.0170%2C0706.0953%2C0706.0052%2C0706.0934%2C0706.2140%2C0706.0471%2C0706.1955%2C0706.1923%2C0706.0383%2C0706.1326%2C0706.0001%2C0706.4337%2C0706.1870%2C0706.2681%2C0706.4436%2C0706.3682%2C0706.2854%2C0706.1309%2C0706.1152%2C0706.1845%2C0706.2892%2C0706.3590%2C0706.3308%2C0706.0303%2C0706.3955%2C0706.1782%2C0706.1317%2C0706.2053%2C0706.4299%2C0706.1394%2C0706.3765%2C0706.0482%2C0706.2139&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We study the oscillation stability problem for the Urysohn sphere, an analog\nof the distortion problem for $\\ell_2$ in the context of the Urysohn space\n$\\Ur$. In particular, we show that this problem reduces to a purely\ncombinatorial problem involving a family of countable ultrahomogeneous metric\nspaces with finitely many distances."}, "authors": ["Jordi Lopez Abad", "Lionel Nguyen Van Th\u00e9"], "author_detail": {"name": "Lionel Nguyen Van Th\u00e9"}, "author": "Lionel Nguyen Van Th\u00e9", "arxiv_comment": "19 pages", "links": [{"href": "http://arxiv.org/abs/0706.1326v3", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/0706.1326v3", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.MG", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.MG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.CO", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "22F05", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/0706.1326v3", "affiliation": "ELM", "arxiv_url": "http://arxiv.org/abs/0706.1326v3", "journal_reference": null, "doi": null, "fulltext": "arXiv:0706.1326v3 [math.MG] 27 Feb 2009\n\nTHE OSCILLATION STABILITY PROBLEM FOR THE\nURYSOHN SPHERE: A COMBINATORIAL APPROACH.\nJ. LOPEZ-ABAD AND L. NGUYEN VAN TH\u00c9\nAbstract. We study the oscillation stability problem for the Urysohn sphere,\nan analog of the distortion problem for l2 in the context of the Urysohn space\nU. In particular, we show that this problem reduces to a purely combinatorial\nproblem involving a family of countable ultrahomogeneous metric spaces with\nfinitely many distances.\n\n1. Introduction.\nThe purpose of this note is to present several partial results related to the oscillation stability problem for the Urysohn sphere, a problem about to the geometry\nof the Urysohn space U which can, in some sense, be seen as an analog for U of\nthe well-known distortion problem for l2 . This latter problem appeared after the\nfollowing central result in geometric functional analysis established by Milman: For\nN \u2208 \u03c9 strictly positive, let SN denote the unit sphere of the (N + 1)-dimensional\nEuclidean space and let S\u221e denote the unit sphere of the Hilbert space l2 . If\nX = (X, dX ) is a metric space, Y \u2282 X and \u03b5 > 0, let also\n(Y )\u03b5 = {x \u2208 X : \u2203y \u2208 Y dX (x, y) 6 \u03b5}.\nThen:\nTheorem (Milman [10]). Let \u03b3 be a finite partition of S\u221e . Then for every \u03b5 > 0\nand every N \u2208 \u03c9, there is A \u2208 \u03b3 and an isometric copy e\nSN of SN in S\u221e such that\nN\ne\nS \u2282 (A)\u03b5 .\n\nWhether Milman's theorem still holds when N is replaced by \u221e is the content\nof the distortion problem for l2 . Equivalently, if \u03b5 > 0 and f : S\u221e \u2212\u2192 R is\nbounded and uniformly continuous, is there a closed infinite-dimensional subspace\nV of l2 such that sup{|f (x) \u2212 f (y)| : x, y \u2208 V \u2229 S\u221e } < \u03b5? This question remained\nunanswered for about 30 years, until the solution of Odell and Schlumprecht in [12]:\n\nTheorem (Odell-Schlumprecht [12]). There is a finite partition \u03b3 of S\u221e and \u03b5 > 0\nsuch that no (A)\u03b5 for A \u2208 \u03b3 includes an isometric copy of S\u221e .\nThis result is traditionally stated in terms of oscillation stability, a concept coming from Banach space theory. However, it turns out that it can also be stated\nthanks to a new concept of oscillation stability due to Kechris, Pestov and Todorcevic introduced in [8] and more fully developed in [13]. The global formulation of\nDate: June, 2007.\n2000 Mathematics Subject Classification. Primary: 22F05. Secondary: 03E02, 05C55, 05D10,\n22A05, 51F99.\nKey words and phrases. Topological groups actions, Oscillation stability, Ramsey theory, Metric geometry, Urysohn metric space.\n1\n\n\fthis notion takes place at a very general level and allows to capture various phenomena coming from combinatorics and functional analysis. Nevertheless, it can be\npresented quite simply in the realm of complete separable ultrahomogeneous metric\nspaces, where it coincides with the Ramsey-theoretic concept of approximate indivisibility. Recall that a metric space X is ultrahomogeneous when every isometry\nbetween finite metric subspaces of X can be extended to an isometry of X onto\nitself. Now, for \u03b5 > 0, call a metric space X \u03b5-indivisible when for every strictly\ne \u2282 X isometric to X\npositive k \u2208 \u03c9 and every \u03c7 : X \u2212\u2192 k, there is i < k and X\nsuch that\n\u2212{i}) .\ne \u2282 (\u2190\nX\n\u03c7\n\u03b5\n\nThen X is approximately indivisible when X is \u03b5-indivisible for every \u03b5 > 0, and X\nis indivisible when X is 0-indivisible. For example, in this terminology, the aforementioned theorem of Odell and Schlumprecht asserts that S\u221e is not approximately\nindivisible. However, in spite of this solution, it is sometimes felt that something\nessential is still to be discovered about the metric structure of S\u221e . Indeed, quite\nsurprisingly, the proof leading to the solution is not based on an analysis of the\nintrinsic geometry of l2 . This fact is one of the motivations for the present note:\nIn this article, hoping that a better understanding of S\u221e might be hidden behind a\ngeneral approach of approximate indivisibility, we study the approximate indivisibility problem for another complete, separable ultrahomogeneous metric space, the\nUrysohn sphere S, defined as follows: Up to isometry, it is the unique metric space\nto which every sphere of radius 1/2 in the Urysohn space U is isometric. Equivalently, it is, up to isometry, the unique complete separable ultrahomogeneous metric\nspace with diameter 1 into which every separable metric space with diameter less\nor equal to 1 embeds isometrically. In this note, we try to answer the following\nquestion implicitly present in [8] and explicitly stated in [7] and [13]:\nQuestion. Is the Urysohn sphere S oscillation stable? That is, given a finite\npartition \u03b3 of S and \u03b5 > 0, is there A \u2208 \u03b3 such that (A)\u03b5 includes an isometric copy\nof S?\nOur approach here is combinatorial and follows the general intuition according\nto which the structure of complete separable ultrahomogeneous metric spaces can\nbe approached via combinatorial means. This intuition is based on two ideas. The\nfirst one is that the combinatorial point of view is relevant for the study of countable ultrahomogeneous metric spaces in general. This idea is already central in the\nwork of Fra\u0131\u0308ss\u00e9 completed in the fifties, even though Fra\u0131\u0308ss\u00e9 theory takes place at\nthe level of relational structures and includes much more than metric spaces (for\na reference on Fra\u0131\u0308ss\u00e9 theory, see [5]). More recently, it was also rediscovered by\nBogatyi in a purely metric context, see [1] and [2]. The second idea is that the\ncomplete separable ultrahomogeneous metric spaces are closely linked to the countable ultrahomogeneous metric spaces. This connection also appears in Bogatyi's\nwork but is on the other hand supported by the following result (which answers a\nquestion posed in [2]):\nTheorem 1. Every complete separable ultrahomogeneous metric space Y includes\na countable ultrahomogeneous dense metric subspace.\nFor example, consider the rational Urysohn space UQ which can be defined up\nto isometry as the unique countable ultrahomogeneous metric space with rational\ndistances for which every countable metric space with rational distances embeds\n2\n\n\fisometrically. The Urysohn space U arises then as the completion of UQ , a fact\nwhich is actually essential as it is at the heart of several important contributions\nabout U. In particular, in the original article [15] of Urysohn, the space U is\nprecisely constructed as the completion of UQ which is in turn constructed by\nhand.\nSimilarly, the Urysohn sphere S arises as the completion of the so-called rational\nUrysohn sphere SQ , defined up to isometry as the unique countable ultrahomogeneous metric space with distances in Q \u2229 [0, 1] into which every at most countable\nmetric space with distances in Q \u2229 [0, 1] embeds isometrically.\nAt first glance, such a representation is relevant with respect to the oscillation\nstability problem for complete separable ultrahomogeneous metric spaces because it\nprovides a direct way to transfer an approximate indivisibility problem to an exact\nindivisibility problem. For example, in the present case, it naturally leads to the\nquestion (explicitly stated in [11] and in [13]) of knowing whether SQ is indivisible,\na question which was answered recently by to Delhomm\u00e9, Laflamme, Pouzet and\nSauer in [3], where a detailed analysis of metric indivisibility is provided and several\nobstructions to indivisibility are isolated. Cardinality is such an obstruction: A\nclassical result in topology asserts that as soon as a metric space X is uncountable,\nthere is a partition of X into two pieces such that none of the pieces includes a\ncopy of the space via a continuous 1 \u2212 1 map. Unboundedness is another example:\nIf a metric space X is indivisible, then its distance set is bounded. Now, it turns\nout that SQ avoids these obstacles but encounters a third one: For a metric space\nX, x \u2208 X, and \u03b5 > 0, let \u03bb\u03b5 (x) be the supremum of all reals l 6 1 such that there\nis an \u03b5-chain (xi )i6n containing x and such that dX (x0 , xn ) > l. Then, define\n\u03bb(x) = inf{\u03bb\u03b5 (x) : \u03b5 > 0}.\nTheorem (Delhomm\u00e9-Laflamme-Pouzet-Sauer [3]). Let X be a countable metric\nspace. Assume that there is x0 \u2208 X such that \u03bb(x0 ) > 0. Then X is not indivisible.\nNow, for SQ , it is easy to see that ultrahomogeneity together with the fact that\nthe distance set contains 0 as an accumulation point imply that every point x in\nSQ is such that \u03bb(x) = 1. It follows that:\nCorollary (Delhomm\u00e9-Laflamme-Pouzet-Sauer [3]). SQ is divisible.\nThis result put an end to the first attempt to solve the oscillation stability\nproblem for S. Indeed, had SQ been indivisible, S would have been oscillation\nstable. But in the present case, the coloring which is used to divide SQ does not\nlead to any conclusion and the oscillation stability problem for S has to be attacked\nfrom another direction.\nHere, following with the intuition that approximate indivisibility for S can be\nattacked via the study of the exact indivisibility of simpler spaces, we can show:\nTheorem 2. S is 1/3-indivisible.\nThis result is obtained after having shown that the problem of approximate\nindivisibility for S can be reduced to a purely combinatorial problem involving a\nfamily (Sm )m>1 of countable metric spaces which in some sense approximate the\nspace S. For m \u2208 \u03c9 strictly positive, set\n[0, 1]m := {\n\nk\n: k \u2208 {0, . . . , m}}.\nm\n3\n\n\fThen Sm is defined as follows: Up to isometry it is the unique countable ultrahomogeneous metric space with distances in [0, 1]m into which every countable metric\nspace with distances in [0, 1]m embeds isometrically. Then:\nTheorem 3. The following are equivalent:\n(i) S is oscillation stable (equivalently, approximately indivisible).\n(ii) For every strictly positive m \u2208 \u03c9, Sm is 1/m-indivisible.\n(iii) For every strictly positive m \u2208 \u03c9, Sm is indivisible.\nThe paper is organized as follows: In section 2, we introduce the spaces Sm and\nstudy their relationship with S. In particular, this leads us to a stronger version of\nTheorem 3. In section 3, we follow the different directions suggested by Theorem 3\nand study the indivisibility as well as the 1/m-indivisibility properties of the spaces\nSm . We then show how these results can be used to derive Theorem 2. Finally,\nwe close with a short section including some remarks about possible further studies\nwhile an Appendix provides a proof of Theorem 1.\nNote: Item (iii) of Theorem 3 was recently proved by the N. W. Sauer and the\nsecond author. The Urysohn sphere is therefore oscillation stable.\n2. Discretization.\nThe purpose of this section is to prove Theorem 3 and therefore to show that\ndespite the unsuccessful attempt realized with SQ , the oscillation stability problem\nfor S can indeed be understood via the study of the exact indivisibility of simpler\nspaces. The starting point of our construction consists in the observation that SQ\nis the first natural candidate because it is a very good countable approximation\nof S, but this good approximation is paradoxically responsible for the divisibility\nof SQ . In particular, the distance set of SQ is too rich and allows to create a\ndividing coloring. A natural attempt at that point is consequently to replace SQ\nby another space with a simpler distance set but still allowing to approximate S\nin a reasonable sense. In this perspective, general Fra\u0131\u0308ss\u00e9 theory provides a whole\nfamily of candidates. Indeed, recall that for a strictly positive m \u2208 \u03c9, [0, 1]m\ndenotes the set {k/m : k \u2208 {0, . . . , m}}. Then one can prove that there is a\ncountable ultrahomogeneous metric space Sm with distances in [0, 1]m into which\nevery countable metric space with distances in [0, 1]m embeds isometrically and\nthat those properties actually characterize Sm up to isometry. In other words, the\nspaces Sm are really the analogs of SQ after having discretized the distance set\nQ \u2229 [0, 1] with [0, 1]m . The intuition is then that in some sense, this should allow\nthem to approximate S. This intuition turns out to be right, as shown by the\nfollowing proposition whose proof is postponed to subsection 2.1:\nProposition 1. For every strictly positive m \u2208 \u03c9, there is an isometric copy Sf\nm\nof Sm inside S such that (Sf\n)\n=\nS.\nm 1/m\n\nThe spaces Sm consequently appear as good candidates towards a discretization\nof the oscillation stability problem for S. However, it turns out that Proposition 1\nis not of any help towards a proof of Theorem 3. For example, Proposition 1 does\nnot imply alone that if for some strictly positive m \u2208 \u03c9, Sm is indivisible, then\nS is 1/m-indivisible: Assume that \u03c7 : S \u2212\u2192 k. \u03c7 induces a coloring of Sm so by\ne m \u2282 Sm isometric to Sm on which \u03c7 is constant. But\nindivisibility of Sm there is S\n4\n\n\fe m )1/m\nhow does that allow to obtain a copy of S? For example, are we sure that (S\nincludes a copy of S? We are not able to answer this question, but recent results\ne m )1/m really depends on the copy S\nem\nof J. Melleray in [9] strongly suggest that (S\nand can be extremely small. In particular, it may not include a copy of S. Thus, to\nour knowledge, Proposition 1 does not say anything about the oscillation stability\nof S, except maybe that the spaces Sm 's are not totally irrelevant for our purposes.\nFortunately, the spaces Sm do allow to go much further than Proposition 1\nand are indeed relevant objects. In particular, they allow to reach the following\nequivalence, extending Theorem 3:\nTheorem 4. The following are equivalent:\n(i)\n(ii)\n(iii)\n(iv)\n\nS is oscillation stable.\nSQ is approximately indivisible.\nFor every strictly positive m \u2208 \u03c9, Sm is 1/m-indivisible.\nFor every strictly positive m \u2208 \u03c9, Sm is indivisible.\n\nSubsections 2.2 to 2.5 are devoted to the proof of this result. But before going\ndeeper into the technical details, let us mention here that part of our hope towards\nthe discretization strategy comes from the proof of a famous result in Banach\nspace theory, namely Gowers' stabilization theorem for c0 [6], where combinatorial\nRamsey-type theorems for the spaces FIN\u00b1\nk and FINk imply that the unit sphere\nSc0 of c0 and its positive part S+\nc0 are approximately indivisible.\n2.1. Proof of proposition 1. We start with a definition: Given a metric space\nX = (X, dX ), a map f : X \u2212\u2192]0, +\u221e[ is Kat\u0115tov over X when:\n\u2200x, y \u2208 X, |f (x) \u2212 f (y)| 6 dX (x, y) 6 f (x) + f (y).\n.\n\nEquivalently, one can extend the metric dX on X \u222a {f } by defining, for every x, y\nc\nX (x, f ) = f (x) and d\nX (x, y) = dX (x, y). The corresponding metric space is\nin X, dc\n.\nthen written X \u222a {f }. Here, the concept of Kat\u0115tov map is relevant because of the\nfollowing standard reformulation of the notion of ultrahomogeneity:\nLemma 1. Let X be a countable metric space. Then X is ultrahomogeneous\niff for\n.\nevery finite subspace F \u2282 X and every Kat\u0115tov map f over F, if F \u222a {f } embeds\ninto X, then there is y \u2208 X such that for every x \u2208 F, dX (x, y) = f (x).\nThis result will be used constantly throughout the proof. Now, some notation:\nFor m \u2208 \u03c9 strictly positive, recall that [0, 1]m = {k/m : k \u2208 {0, . . . , m}}. For\n\u03b1 \u2208 [0, 1], set also\n\u2308m\u03b1\u2309\n,\n\u2308\u03b1\u2309m = min([\u03b1, 1] \u2229 [0, 1]m ) =\nm\nwhere \u2308x\u2309 = min([x, \u221e[\u2229Z) is the ceiling function. Since S is the metric completion\nof SQ , it is enough to show that for every strictly positive m \u2208 \u03c9, there is an\ne m of Sm inside SQ such that (S\ne m )1/m = SQ . This is achieved\nisometric copy S\nthanks to a back and forth argument. The following is the main idea.\nClaim. Suppose that X \u2282 SQ is finite and embeddable in Sm , and let y \u2208 SQ r X.\nThen the mapping f = fX,y,m : X \u222a {y} \u2192]0, \u221e[ defined by f (x) = \u2308dSQ (x, y)\u2309m if\nx \u2208 X and f (y) = max{\u2308dSQ (x, y)\u2309m \u2212 dSQ (x, y) : x \u2208 X} is Kat\u0115tov.\n5\n\n\fAssume this claim is true. Fix (xn )n\u2208\u03c9 an enumeration of Sm and (yn )n\u2208\u03c9 an\nenumeration of SQ . We are going to construct \u03c3 : \u03c9 \u2192 \u03c9 together with a set\ne m = {e\nS\nx\u03c3(n) : n \u2208 \u03c9} \u2282 SQ so that:\n(i) \u03c3 is a bijection.\n(ii) x\ne\u03c3(n) 7\u2192 x\u03c3(n) defines an isometry.\n(iii) For every n \u2208 \u03c9, {yi : i 6 n} \u2282 ({e\nxi : i 6 2n + 1})1/m .\nObserve that, since \u03c3 is a permutation, (i) and (ii) guarantee that x\nen 7\u2192 xn defines\ne m and Sm . On the other hand, (iii) guarantees that\na surjective isometry between S\ne m )1/m = SQ .\n(S\nLet \u03c3(0) = 0, x\ne0 = y0 . Suppose now all data up to 2n already defined in the\nappropriate way, i.e. fulfilling the obvious partial versions of (i), (ii) and (iii). Let\n\u03c3(2n + 1) = min(\u03c9 r {\u03c3(i) : 0 6 i 6 2n}).\n\nSet also x\u0303\u03c3(2n+1) \u2208 SQ such that:\n\u2200i \u2208 {0, . . . , 2n}, dSQ (x\u0303\u03c3(i) , x\u0303\u03c3(2n+1) ) = dSm (x\u03c3(i) , x\u03c3(2n+1) ).\n\u0001\ne\u03c3(2n+2) as\nNext, if yn \u2208 {e\nx\u03c3(i) : i 6 2n + 1} 1/m , then we define \u03c3(2n + 2) and x\nwe did for 2n + 1. Otherwise, let f be the Kat\u0115tov map given by the previous claim\nwhen applied to X = {x\u0303\u03c3(i) : 0 6 i 6 2n + 1} and yn . Let x\u0303 \u2208 SQ realizing f . Now\nobserve that the map g defined on {x\u03c3(i) : 0 6 i 6 2n + 1} by g(x\u03c3(i) ) = f (e\nx\u03c3(i) ) is\nKat\u0115tov with values in [0, 1]m , so\n\u03c3(2n + 2) = min{k \u2208 \u03c9 : \u2200i \u2208 {0, . . . , 2n + 1}, dSm (x\u03c3(i) , xk ) = g(x\u03c3(i) )}\nis well defined and we set x\u0303\u03c3(2n+2) = x\u0303.\nWe now turn to the proof of the claim. Fix x, x\u2032 \u2208 X. We have to prove:\n|f (x) \u2212 f (x\u2032 )| 6 dSQ (x, x\u2032 ) 6 f (x) + f (x\u2032 )\nSQ\n\n|f (x) \u2212 f (y)| 6 d (x, y) 6 f (x) + f (y)\n\n(1)\n(2)\n\nFor (1): The right inequality is not a problem:\ndSQ (x, x\u2032 ) 6 dSQ (x, y) + dSQ (y, x\u2032 ) 6 f (x) + f (x\u2032 ).\nFor the left inequality, we use the following simple fact:\np\np\n\u2200\u03b1, \u03b2 \u2208 R, \u2200p \u2208 \u03c9, |\u03b2 \u2212 \u03b1| 6\n\u2212\u2192 |\u2308\u03b2\u2309m \u2212 \u2308\u03b1\u2309m | 6 .\nm\nm\nIndeed, assume that |\u03b2 \u2212 \u03b1| 6 p/m. We want |\u2308m\u03b2\u2309 \u2212 \u2308m\u03b1\u2309| 6 p. Without loss\nof generality, \u03b1 6 \u03b2. Then 0 6 \u2308m\u03b2\u2309 \u2212 \u2308m\u03b1\u2309 < m\u03b2 + 1 \u2212 m\u03b1 6 p + 1, so\n|\u2308m\u03b2\u2309 \u2212 \u2308m\u03b1\u2309| 6 p and we are done. In our case, that property is useful because\nthen the left inequality directly follows from\ndSQ (x, y) \u2212 dSQ (y, x\u2032 ) 6 dSQ (x, x\u2032 ) \u2208 [0, 1]m ,\nbecause X is embeddable in Sm . For (2):\n|f (x) \u2212 f (y)| = f (x) \u2212 f (y).\nThis is because f (x) > 1/m and 0 6 f (y) < 1/m. Furthermore, by definition of f ,\nf (y) > f (x) \u2212 dSQ (x, y).\nSo the left inequality is satisfied. For the right inequality, simply observe that\ndSQ (x, y) 6 f (x).\n6\n\n\u0003\n\n\f2.2. From oscillation stability of S to approximate indivisibility of SQ .\nThe purpose of what follows is to prove the implication (i) \u2192 (ii) of Theorem 4\nstating that if S is oscillation stable, then SQ is approximately indivisible. This is\ndone thanks to the following result:\nProposition 2. Suppose that S0Q and S1Q are two copies of SQ in S such that S0Q\nis dense in S. Then for every \u03b5 > 0 the subspace S0Q \u2229 (S1Q )\u03b5 includes a copy of SQ .\nProof. We construct the required copy of SQ inductively. Let {yn : n \u2208 \u03c9} enumerate S1Q . For k \u2208 \u03c9, set\nk\n\n\u03b5X 1\n.\n2 i=0 2i\n\n\u03b4k =\nSet also\n\n\u03b5 1\n.\n3 2k+1\nS0Q being dense in S, choose z0 \u2208 S0Q such that dS (y0 , z0 ) < \u03b40 . Assume now that\nz0 , . . . , zn \u2208 S0Q were constructed such that for every k, l 6 n\n\u001a S\nd (zk , zl ) = dS (yk , yl )\ndS (zk , yk ) < \u03b4k .\n\u03b7k =\n\nAgain by denseness of S0Q in S, fix z \u2208 S0Q such that\ndS (z, yn+1 ) < \u03b7n+1 .\nThen for every k 6 n,\ndS (z, zk ) \u2212 dS (yn+1 , yk ) = dS (z, zk ) \u2212 dS (zk , yn+1 ) + dS (zk , yn+1 ) \u2212 dS (yn+1 , yk )\n6 dS (z, yn+1 ) + dS (zk , yk )\n< \u03b7n+1 + \u03b4k\n< \u03b7n+1 + \u03b4n .\nIt follows that there is zn+1 \u2208 S0Q such that\n\u001a\n\u2200k 6 n dS (zn+1 , zk ) = dS (yn+1 , yk )\ndS (zn+1 , z) < \u03b7n+1 + \u03b4n .\nIndeed, consider the map f defined on {zk : k 6 n} \u222a {z} by:\n\u001a\n\u2200k 6 n f (zk ) = dS (yn+1 , yk )\nf (z) = dS (z, zk ) \u2212 dS (yn+1 , yk ) .\nThen f is Kat\u0115tov over the subspace of S0Q supported by {zk : k 6 n} \u222a {z}, so\nsimply take zn+1 \u2208 S0Q realizing it. Observe then that\ndS (zn+1 , yn+1 ) 6\n<\n<\n\ndS (zn+1 , z) + dS (z, yn+1 )\n\u03b7n+1 + \u03b4n + \u03b7n+1\n\u03b4n+1 .\n\nAfter \u03c9 steps, we are left with {zn : n \u2208 \u03c9} \u2282 S0Q \u2229 (S1Q )\u03b5 isometric to SQ .\n7\n\n\u0003\n\n\fWe now show how to deduce (i) \u2192 (ii) of Theorem 4 from Proposition 2: Let\n\u03b5 > 0, k \u2208 \u03c9 strictly positive and \u03c7 : SQ \u2212\u2192 k. Then in S, seeing SQ as a dense\nsubspace:\n[\n\u2212{i}) .\nS=\n(\u2190\n\u03c7\n\u03b5/2\ni<k\n\ne of S included in S such\nBy oscillation stability of S, there is i < k and a copy S\nthat\n\u2212{i}) ) .\ne \u2282 ((\u2190\nS\n\u03c7\n\u03b5/2 \u03b5/4\ne\nSince S includes copies of SQ , and since SQ is dense in S, it follows by Proposition\ne Q of SQ in SQ \u2229 (S)\ne \u03b5/4 . Then in SQ\n2 that there is a copy S\n\u2212{i}) .\ne Q \u2282 (\u2190\nS\n\u03c7\n\u03b5\n\n\u0003\n\n2.3. From approximate indivisibility of SQ to 1/m-indivisibility of Sm .\nHere, we provide a proof for the implication (ii) \u2192 (iii) of Theorem 4 according to\nwhich if SQ is approximately indivisible, then Sm is 1/m-indivisible for every strictly\npositive m \u2208 \u03c9. This is obtained as the consequence of the following proposition:\nProposition 3. Let \u03b5 > 0 and assume that SQ is \u03b5-indivisible. Then Sm is 1/mindivisible whenever m 6 1/\u03b5.\nProof. Let \u03b5 > 0, assume that\n\u0006\n\u0007SQ is \u03b5-indivisible and fix m \u2208 \u03c9 strictly positive\nsuch that \u03b5 6 1/m. Define dSQ m by\n\u0006\n\u0007\n\u0006\n\u0007\n\u2200x, y \u2208 X dSQ m (x, y) = dSQ (x, y) m .\n\u0006 \u0007\nClaim. dSQ m is a metric on SQ .\nProof. Since the function \u2308*\u2309m is subadditive and increasing, it easily follows that\nthe composition \u2308dSQ \u2309m = \u2308*\u2309m \u25e6 dSQ is a metric.\n\u0003\nLet Xm be the metric space\n\n\u0007\n\u0006\nXm = (SQ , dSQ m ),\n\nand let \u03c0m denote the identity map from SQ to Xm . Observe that Xm and Sm\nembed into each other, and that consequently, 1/m-indivisibility of Sm is equivalent\nto 1/m-indivisibility of Xm . So let k \u2208 \u03c9 be strictly positive and \u03c7 : Xm \u2212\u2192 k.\nThen \u03c7 induces a coloring \u03c7 \u25e6 \u03c0m : SQ \u2212\u2192 k. Since SQ is \u03b5-indivisible, there is\ne Q of SQ inside SQ such that\ni < k and a copy S\ne Q \u2282 (\u2190\nS\n\u03c7\u2212\n\u25e6\u2212\u03c0\u2212\u2212\nm {i})\u03b5 .\n\n\u2032\u2032 e\nNow, observe that \u03c0m\nSQ is a copy of Xm inside Xm . Furthermore, note that\n\n\u2200x 6= y \u2208 SQ if dSQ (x, y) 6\n\n1\n1\nthen dXm (\u03c0m (x), \u03c0m (y)) = .\nm\nm\n\nSince \u03b5 6 1/m, it follows that\n\u2190\n\u2212\n\u2032\u2032 \u2190\n\u03c0m\n(\u03c7\u2212\n\u25e6\u2212\u03c0\u2212\u2212\nm {i})\u03b5 \u2282 ( \u03c7 {i})1/m .\nAnd so\n\n\u2212{i})\n\u2032\u2032 e\n\u03c0m\nSQ \u2282 (\u2190\n\u03c7\n1/m .\n8\n\n\u0003\n\n\f2.4. From 1/2(m2 + m)-indivisibility of S2(m2 +m) to indivisibility of Sm . We\nnow turn to the proof of the implication (iii) \u2192 (iv) of Theorem 4 stating that\nif for every strictly positive m \u2208 \u03c9, Sm is 1/m-indivisible, then for every strictly\npositive m \u2208 \u03c9, Sm is indivisible. This is done via the following proposition:\nProposition 4. Suppose that for some strictly positive integer m, S2(m2 +m) is\n1/2(m2 + m)-indivisible. Then Sm is indivisible.\nProof. Let m \u2208 \u03c9 be strictly positive and such that S2(m2 +m) is 1/2(m2 + m)indivisible. We are going to create a metric space W with distances in [0, 1]m and\na bijection \u03c0 : S2(m2 +m) \u2212\u2192 W such that for every subspace Y of S2(m2 +m) , if\n(Y)1/2(m2 +m) includes a copy of Sm , then so does \u03c0 \u2032\u2032 Y.\nAssuming that such a space W is constructed, the result is proved as follows: Observe first that W and Sm embed into each other. Indivisibility of W is consequently\nequivalent to indivisibility of Sm and it is enough to show that W is indivisible.\nLet k \u2208 \u03c9 be strictly positive and \u03c7 : W \u2212\u2192 k. Then \u03c7\u25e6\u03c0 : S2(m2 +m) \u2212\u2192 k and by\n1/2(m2 + m)-indivisibility of S2(m2 +m) , there is i < k such that (\u2190\n\u03c7\u2212\u25e6\u2212\u2212\n\u03c0{i})1/2(m2 +m)\nincludes a copy of S2(m2 +m) . Since Sm embeds into S2(m2 +m) , (\u2190\n\u03c7\u2212\u25e6\u2212\u2212\n\u03c0{i})1/2(m2 +m)\n\u2212{i} = \u03c0 \u2032\u2032 \u2190\n\u03c7\u2212\u25e6\u2212\u2212\n\u03c0{i} includes a copy of Sm , and\nalso includes a copy of Sm . Thus, \u2190\n\u03c7\ntherefore a copy of W.\nWe now turn to the construction of W. This space is obtained by modifying the\nmetric on S2(m2 +m) to a metric d, so that W = (S2(m2 +m) , d) and \u03c0 is simply the\nidentity map from S2(m2 +m) to W. The metric d is defined as follows: consider the\nmap f : [0, 1]2(m2 +m) \u2212\u2192 [0, 1]m defined by f (x) = ml where l is the least integer\nsuch that\n\u0012\n\u0013\n1\n1\nx6l\n.\n+ 2\nm m +m\nObserve that f is increasing, that f (0) = 0, and that\n\u0012\n\u0013\n\u03b5\n\u2200\u03b1 \u2208 [0, 1]m \u2200\u03b5 \u2208 {\u22122, \u22121, 0, 1, 2} f \u03b1 +\n= \u03b1.\n2(m2 + m)\nNote also that f is subadditive: Let x, y, \u2208 [0, 1]2(m2 +m) . Assume that f (x) = l/m.\nThen there is n \u2208 {1, . . . , 2m + 4} such that\nl\u22121\nn\nl\u22121\n+ 2\n+\n.\nx=\nm\nm + m 2(m2 + m)\nSimilarly, there are l\u2032 \u2208 {0, . . . , m} and n\u2032 \u2208 {1, . . . , 2m + 4} such that\ny=\nSo\nx+y\n\nl\u2032 \u2212 1\nl\u2032 \u2212 1\nn\u2032\n+ 2\n+\n.\n2\nm\nm + m 2(m + m)\n\n\u0013\n\u0012\n\u0013\nn + n\u2032\n1\n1\n1\n1\n\u22122\n+\n+ 2\n+ 2\n= (l + l )\nm m +m\nm m +m\n2(m2 + m)\n\u0013\n\u0012\n\u2032\nn \u2212 (2m + 4) + n \u2212 (2m + 4)\n1\n1\n+\n+\n= (l + l\u2032 )\nm m2 + m\n2(m2 + m)\n\u0012\n\u0013\n1\n1\n6 (l + l\u2032 )\n.\n+\nm m2 + m\n\u2032\n\n\u0012\n\nTherefore,\nf (x + y) 6\n\nl\nl\u2032\nl + l\u2032\n=\n+\n= f (x) + f (y).\nm\nm m\n9\n\n\fIt follows that the map d := f \u25e6 dS2(m2 +m) is a metric taking values in [0, 1]m .\nNow to show that d is as required, it suffices to prove that for every subspace Y\nof S2(m2 +m) , if (Y)1/2(m2 +m) includes a copy of Sm , then \u03c0 \u2032\u2032 Y includes a copy\nof Sm . So let Y be a subspace of S2(m2 +m) such that (Y)1/2(m2 +m) includes a\ne m of Sm . Then for every x \u2208 S\ne m , there is an element \u03c6(x) \u2208 Y such that\ncopy S\nS2(m2 +m)\n2\nd\n(x, \u03c6(x)) 6 1/2(m + m). Thus,\nem\n\u2200x 6= y \u2208 S\n\ndS2(m2 +m) (\u03c6(x), \u03c6(y)) \u2212 dS2(m2 +m) (x, y) 6\n\n1\n.\nm2 + m\n\nSince dS2(m2 +m) (x, y) \u2208 [0, 1]m ,\n\u0010\n\u0011\nf dS2(m2 +m) (\u03c6(x), \u03c6(y)) = dS2(m2 +m) (x, y).\nThat is\nd(\u03c0(\u03c6(x)), \u03c0(\u03c6(y))) = dS2(m2 +m) (x, y).\nThus, \u03c0 \u2032\u2032 ran(\u03c6) \u2282 \u03c0 \u2032\u2032 Y is isometric to Sm .\n\n\u0003\n\n2.5. From indivisibility of Sm to oscillation stability of S. We are now ready\nto close the loop of implications of Theorem 4. In what follows, we show that if Sm\nis indivisible for every strictly positive m \u2208 \u03c9, then S is oscillation stable. This is\nachieved thanks to the following result:\nProposition 5. Assume that for some strictly positive m \u2208 \u03c9, Sm is indivisible.\nThen S is 1/m-indivisible.\nProof. This is obtained by showing that for every strictly positive m \u2208 \u03c9, there\ne m \u2282 S\u2217 isometric\nis an isometric copy S\u2217m of Sm inside S such that for every S\nm\ne m )1/m includes an isometric copy of S. This property indeed suffices to\nto Sm , (S\nprove Proposition 5: Let \u03c7 : S \u2212\u2192 k for some strictly positive k \u2208 \u03c9. \u03c7 induces a\ne m \u2282 S\u2217 such\nk-coloring of the copy S\u2217m . By indivisibility of Sm , find i < k and S\nm\ne m with value i. But then, in S, (S\ne m )1/m includes a copy of\nthat \u03c7 is constant on S\n\u2212{i})\nS. So (\u2190\n\u03c7\n1/m includes a copy of S.\nWe now turn to the construction of S\u2217m . The core of the proof is contained in\nLemma 2 which we present now. Fix an enumeration {yn : n \u2208 \u03c9} of SQ . Also,\nkeeping the\u0006notation\nintroduced in the proof of Proposition 3, let Xm be the metric\n\u0007\nspace (SQ , dSQ m ). The underlying set of Xm is really {yn : n \u2208 \u03c9} but to avoid\nconfusion, we write it {xn : n \u2208 \u03c9}, being understood that for every n \u2208 \u03c9, xn = yn .\nOn the other hand, remember that Sm and Xm embed isometrically into each other.\nLemma 2. There is a countable metric space Z with distances in [0, 1] and including\nXm such that for every strictly increasing \u03c3 : \u03c9 \u2212\u2192 \u03c9 such that xn 7\u2192 x\u03c3(n) is an\nisometry, ({x\u03c3(n) : n \u2208 \u03c9})1/m includes an isometric copy of SQ .\nAssuming Lemma 2, we now show how we can construct S\u2217m . Z is countable\nwith distances in [0, 1] so we may assume that it is a subspace of S. Now, take S\u2217m\ne m \u2282 S\u2217\na subspace of Xm and isometric to Sm . We claim that S\u2217m works: Let S\nm\ne\nbe isometric to Sm . We first show that (Sm )1/m includes a copy of SQ . The\ne m in type \u03c9. According\nenumeration {xn : n \u2208 \u03c9} induces a linear ordering < of S\ne\nto lemma 2, it suffices to show that (Sm , <) includes a copy of {xn : n \u2208 \u03c9}< seen\nas an ordered metric space. To do that, observe that since Xm embeds isometrically\n10\n\n\finto Sm , there is a linear ordering <\u2217 of Sm in type \u03c9 such that {xn : n \u2208 \u03c9}<\nembeds into (Sm , <\u2217 ) as ordered metric space. Therefore, it is enough to show:\ne m , <) includes a copy of (Sm , <\u2217 ).\nClaim. (S\n\nProof. Write\n\n(Sm , <\u2217 ) = {sn : n \u2208 \u03c9}<\u2217\ne m , <) = {tn : n \u2208 \u03c9}< .\n(S\n\nLet \u03c3(0) = 0. If \u03c3(0) < * * * < \u03c3(n) are chosen such that sk 7\u2192 t\u03c3(k) is a finite\nisometry, observe that the following set is infinite\n{i \u2208 \u03c9 : \u2200k 6 n dSm (t\u03c3(k) , ti ) = dSm (sk , sn+1 )}.\nTherefore, simply take \u03c3(n + 1) in that set and larger than \u03c3(n).\n\n\u0003\n\ne m )1/m in\nObserve that since the metric completion of SQ is S, the closure of (S\ne m )1/m is closed in S.\nS includes a copy of S. Hence we are done since (S\n\u0003\n\nWe now turn to the proof of lemma 2. The strategy is first to provide the set Z\nwhere the required metric space Z is supposed to be based on, and then to argue\nthat the distance dZ can be obtained (lemmas 3 to 7). To construct Z, proceed as\nfollows: For t \u2282 \u03c9, write t as the strictly increasing enumeration of its elements:\nt = {ti : i \u2208 |t|}< .\nNow, let T be the set of all finite nonempty subsets t of \u03c9 such that xn 7\u2192 xtn is\nan isometry between {xn : n \u2208 |t|} and {xtn : n \u2208 |t|}. This set T is a tree when\nordered by end-extension. Let\n.\nZ = Xm \u222a T .\nFor z \u2208 Z, define\n\u001a\nz\nif z \u2208 Xm .\n\u03c0(z) =\nxmax z if z \u2208 T .\nNow, consider an edge-labelled graph structure on Z by defining \u03b4 with domain\ndom(\u03b4) \u2282 Z \u00d7 Z and range ran(\u03b4) \u2282 [0, 1] as follows:\n\u2022 If s, t \u2208 T , then (s, t) \u2208 dom(\u03b4) iff s and t are <T comparable. In this\ncase,\n\u03b4(s, t) = dSQ (y|s|\u22121 , y|t|\u22121 ).\n\u2022 If x, y \u2208 Xm , then (x, y) is always in dom(\u03b4) and\n\u03b4(x, y) = dXm (x, y).\n\n\u2022 If t \u2208 T and x \u2208 Xm , then (x, s) and (s, x) are in dom(\u03b4) iff x = \u03c0(t). In\nthis case\n1\n\u03b4(x, s) = \u03b4(s, x) = .\nm\nFor a branch b of T and i \u2208 \u03c9, let b(i) be the unique element of b with height i\nin T . Observe that b(i) is a i + 1-element subset of \u03c9. Observe also that for every\ni, j \u2208 \u03c9, b(i) is connected to \u03c0(b(i)) and b(j), and\n(i) \u03b4(b(i), \u03c0(b(i)) = 1/m,\n(ii) \u03b4(b(i), b(j)) = dSQ (yi , yj ),\n(iii) \u03b4(\u03c0(b(i)), \u03c0(b(j))) is equal to any of the following quantities:\ndXm (xmax b(i) , xmax b(j) ) = dXm (xi , xj ) = \u2308dSQ (yi , yj )\u2309m .\n11\n\n\fIn particular, if b is a branch of T , then \u03b4 induces a metric on b and the map from\nSQ to b mapping yi to b(i) is a surjective isometry. We claim that if we can show\nthat \u03b4 can be extended to a metric dZ on Z with distances in [0, 1], then lemma 2\nwill be proved. Indeed, let\ne m = {x\u03c3(n) : n \u2208 \u03c9} \u2282 Xm ,\nX\n\nwith \u03c3 : \u03c9 \u2212\u2192 \u03c9 strictly increasing and xn 7\u2192 x\u03c3(n) distance preserving. See ran(\u03c3)\nas a branch b of T . Then (b, dZ ) = (b, \u03b4) is isometric to SQ and\ne m )1/m .\nb \u2282 (\u03c0 \u2032\u2032 b)1/m = (X\n\nOur goal now is consequently to show that \u03b4 can be extended to a metric on Z with\nvalues in [0, 1]. Recall that for x, y \u2208 Z, and n \u2208 \u03c9 strictly positive, a path from x\nto y of size n as is a finite sequence \u03b3 = (zi )i<n such that z0 = x, zn\u22121 = y and for\nevery i < n \u2212 1,\n(zi , zi+1 ) \u2208 dom(\u03b4).\nFor x, y in Z, P (x, y) is the set of all paths from x to y. If \u03b3 = (zi )i<n is in P (x, y),\nk\u03b3k is defined as:\nn\u22121\nX\n\u03b4(zi , zi+1 ).\nk\u03b3k =\ni=0\n\nOn the other hand, k\u03b3k61 is defined as:\nk\u03b3k61 = min(k\u03b3k, 1).\nWe are going to see that the required metric can be obtained with dZ defined by\ndZ (x, y) = inf{k\u03b3k61 : \u03b3 \u2208 P (x, y)}.\nEquivalently, we are going to show that for every (x, y) \u2208 dom(\u03b4), every path \u03b3\nfrom x to y is metric, that is:\n\u03b4(x, y) 6 k\u03b3k61\n\n(3)\n\nLet x, y \u2208 Z. Call a path \u03b3 from x to y trivial when \u03b3 = (x, y) and irreducible when\nno proper subsequence of \u03b3 is a non-trivial path from x to y. Finally, say that \u03b3 is\na cycle when (x, y) \u2208 dom(\u03b4). It should be clear that to prove that dZ works, it is\nenough to show that the previous inequality (3) is true for every irreducible cycle.\nNote that even though \u03b4 takes only rational values, it might not be the case for dZ .\nWe now turn to the study of the irreducible cycles in Z.\nLemma 3. Let x, y \u2208 T . Assume that x and y are not <T -comparable. Let \u03b3 be\nan irreducible path from x to y in T . Then there is z \u2208 T such that z <T x, z <T y\nand \u03b3 = (x, z, y).\nProof. Write \u03b3 = (zi )i<n+1 . z1 is connected to x so z1 is <T -comparable with\nx. We claim that z1 <T x : Otherwise, x <T z1 and every element of T which\nis <T -comparable with z1 is also <T -comparable with x. In particular, z2 is <T comparable with x, a contradiction since z2 and x are not connected. We now claim\nthat z1 <T y. Indeed, observe that z1 <T z2 : Otherwise, z2 <T z1 <T x so z2 <T x\ncontradicting irreducibility. Now, every element of T which is <T -comparable with\nz2 is also <T -comparable with z1 , so no further element can be added to the path.\nHence z2 = y and we can take z1 = z.\n\u0003\nLemma 4. Every non-trivial irreducible cycle in Xm has size 3.\n12\n\n\fProof. Obvious since \u03b4 induces the metric dXm on Xm .\n\n\u0003\n\nLemma 5. Every non-trivial irreducible cycle in T has size 3 and is included in a\nbranch.\nProof. Let c = (zi )i<n be a non-trivial irreducible cycle in T . We may assume\nthat z0 <T zn\u22121 . Now, observe that every element of T comparable with z0 is also\ncomparable with zn\u22121 . In particular, z1 is such an element. It follows that n = 3\nand that z0 , z1 , z2 are in a same branch.\n\u0003\nLemma 6. Every irreducible cycle in Z intersecting both Xm and T is supported\nby a set whose form is one of the following ones.\n\nFigure 1. Irreducible cycles\n\nProof. Let C be a set supporting an irreducible cycle c intersecting both Xm and\nT . It should be clear that |C \u2229 Xm | 6 2: Otherwise since any two points in Xm are\nconnected, c would admit a strict subcycle, contradicting irreducibility.\nIf C \u2229 Xm has size 1, let z0 be its unique element. In c, z0 is connected to two\nelements which we denote z1 and z3 . Note that z1 , z3 \u2208 T so \u03c0(z1 ) = \u03c0(z3 ) = z0 .\nSince elements in T which are connected never project on a same point, it follows\nthat z1 , z3 are <T -incomparable. Now, c induces an irreducible path from z1 to z3\nin T so from lemma 3, there is z2 \u2208 C such that z2 <T z1 , z2 <T z3 , and we are in\ncase 2.\nAssume now that C \u2229 Xm = {z0 , z4 }. Then there are z1 , z3 \u2208 C \u2229 T such that\n\u03c0(z1 ) = z0 and \u03c0(z3 ) = z4 . Note that since z0 6= z4 , we must have z1 6= z3 . Now,\nC \u2229 T induces an irreducible path from z1 to z3 in T . By lemma 3, either z1 and z3\nare compatible and in this case, we are in case 1, or z1 and z3 are <T -incomparable\nand there is z2 in C \u2229 T such that z2 <T z1 , z2 <T z3 and we are in case 3.\n\u0003\nLemma 7. Every non-trivial irreducible cycle in Z is metric.\nProof. Let c be an irreducible cycle in Z. If c is supported by Xm , then by lemma\n4 c has size 3 and is metric since \u03b4 induces a metric on Xm . If c is supported by T ,\nthen by lemma 5 c also has size 3 and is included in a branch b of T . Since \u03b4 induces\na metric on b, c is metric. We consequently assume that c intersects both Xm and\nT . According to lemma 6, c is supported by a set C whose form is covered by one\nof the cases 1, 2 or 3. So to prove the present lemma, it is enough to show every\ncycle obtained from a re-indexing of the cycles described in those cases is metric.\n13\n\n\fCase 1: The required inequalities are obvious after having observed that\n\u03b4(z0 , z3 ) = \u2308\u03b4(z1 , z2 )\u2309m and \u03b4(z0 , z1 ) = \u03b4(z2 , z3 ) =\n\n1\n.\nm\n\nCase 2: Notice that \u03b4(z0 , z1 ) = \u03b4(z0 , z3 ) = 1/m. So the inequalities we need to\nprove are\n2\n,\nm\n2\n\u03b4(z2 , z3 ) 6 \u03b4(z1 , z2 ) + .\nm\n\n\u03b4(z1 , z2 ) 6 \u03b4(z2 , z3 ) +\n\n(4)\n(5)\n\nBy symmetry, it suffices to verify that (4) holds. Observe that since \u03c0(z1 ) =\n\u03c0(z3 ) = z0 , we must have \u2308\u03b4(z1 , z2 )\u2309m = \u2308\u03b4(z2 , z3 )\u2309m . So:\n2\n.\nm\nCase 3: Observe that \u03b4(z0 , z1 ) = \u03b4(z3 , z4 ) = 1/m, so the inequalities we need to\nprove are\n\u03b4(z1 , z2 ) 6 \u2308\u03b4(z1 , z2 )\u2309m = \u2308\u03b4(z2 , z3 )\u2309m 6 \u03b4(z2 , z3 ) +\n\n2\n,\nm\n2\n\u03b4(z0 , z4 ) 6 \u03b4(z1 , z2 ) + \u03b4(z2 , z3 ) + .\nm\n\n\u03b4(z1 , z2 ) 6 \u03b4(z2 , z3 ) + \u03b4(z0 , z4 ) +\n\n(6)\n(7)\n\nFor (6):\n\u03b4(z1 , z2 ) 6 \u2308\u03b4(z1 , z2 )\u2309m\n= \u03b4(\u03c0(z1 ), \u03c0(z2 ))\n= \u03b4(z0 , \u03c0(z2 ))\n6 \u03b4(z0 , z4 ) + \u03b4(z4 , \u03c0(z2 ))\n= \u03b4(z0 , z4 ) + \u2308\u03b4(z3 , z2 )\u2309m\n2\n6 \u03b4(z0 , z4 ) + \u03b4(z2 , z3 ) + .\nm\nFor (7): Write z1 = b(j), z3 = b\u2032 (k), z2 = b(i) = b\u2032 (i). Then z0 = \u03c0(z1 ) = xmax b(j)\nand z4 = \u03c0(z3 ) = xmax b\u2032 (k) . Observe also that \u03b4(z1 , z2 ) = dSQ (yj , yi ) and that\n\u03b4(z2 , z3 ) = dSQ (yi , yk ). So:\n\u03b4(z0 , z4 ) = dXm (xmax b(j) , xmax b\u2032 (k) )\n6 dXm (xmax b(j) , xmax b(i) ) + dXm (xmax b\u2032 (i) , xmax b\u2032 (k) )\n= dXm (xj , xi ) + dXm (xi , xk )\n\u0006\n\u0007\n\u0006\n\u0007\n= dSQ (yj , yi ) m + dSQ (yi , yk ) m\n\n= \u2308\u03b4(z1 , z2 )\u2309m + \u2308\u03b4(z2 , z3 )\u2309m\n1\n1\n6 \u03b4(z1 , z2 ) +\n+ \u03b4(z2 , z3 ) +\nm\nm\n2\n= \u03b4(z1 , z2 ) + \u03b4(z2 , z3 ) + .\nm\n14\n\n\u0003\n\n\f3. Results and bounds.\nIdeally, the title of this section would have been \"The Urysohn sphere is oscillation stable\" and we would have ended this article with the proof of one of the\ndifferent formulations of oscillation stability for S presented in Theorem 4. Unfortunately, so far, our numerous attempts to reach this goal did not succeed1. This\nis why this part is entitled \"bounds\". Instead, what we will be presenting now will\nshow how far we were able to push in the different directions suggested by Theorem\n4. We start with a summary about the indivisibility properties of the spaces Sm .\n3.1. Are the Sm 's indivisible? Of course, when m = 1, the space Sm is indivisible in virtue of the most elementary pigeonhole principle on \u03c9. The first non-trivial\ncase is consequently for m = 2. However, this case is also easy to solve after having\nnoticed that S2 is really the Rado graph R where the distance is 1/2 between connected points and 1 between non-connected distinct points. Therefore, indivisibility\nfor S2 is equivalent to indivisibility of R, a problem whose solution is well-known:\nProposition 6. The Rado graph R is indivisible.\nThe following case to consider is S3 , which turns out to be another particular\ncase thanks to an observation made in [3]. Indeed, S3 can be encoded by the countable ultrahomogeneous edge-labelled graph with edges in {1/3, 1} and forbidding\nthe complete triangle with labels 1/3, 1/3, 1. The distance between two points connected by an edge is the label of the edge while the distance between two points\nwhich are not connected is 2/3. This fact allows to show:\nTheorem (Delhomm\u00e9-Laflamme-Pouzet-Sauer [3]). S3 is indivisible.\nIndeed, the proof of this theorem can be deduced from the proof of the indivisibility of the Kn -free ultrahomogeneous graph by El-Zahar and Sauer in [4]. We\ndo not write more here but the interested reader is referred to [3], section on the\nindivisibility of Urysohn spaces, for more details.\nThe very first substantial case consequently shows up for m = 4. Unfortunately,\nit appears to be so substantial that so far, we still do not know whether this space\nis indivisible or not. Nevertheless, we are able to establish that if this space is not\nindivisible, then S4 is quite exceptional, in a sense that we precise now. We already\nmentioned that [3] contains an analysis of indivisibility in the realm of countable\nmetric spaces. It turns out that this study also led its authors to examine the\nconditions under which a set of strictly positive reals can be interpreted as the\ndistance set of a countable universal and ultrahomogeneous metric space:\nDefinition (4-values condition). Let S \u2282]0, +\u221e[. S satisfies the 4-values condition\nwhen for every s0 , s1 , s\u20320 , s\u20321 \u2208 S, if there is t \u2208 S such that:\n|s0 \u2212 s1 | 6 t 6 s0 + s1 and |s\u20320 \u2212 s\u20321 | 6 t 6 s\u20320 + s\u20321 ,\nthen there is u \u2208 S such that:\n|s0 \u2212 s\u20320 | 6 u 6 s0 + s\u20320 and |s1 \u2212 s\u20321 | 6 u 6 s1 + s\u20321 .\nTheorem (Delhomm\u00e9-Laflamme-Pouzet-Sauer [3]). Let S \u2282]0, +\u221e[. TFAE:\n1The goal has now been achieved by N. W. Sauer and the second author\n15\n\n\f(i) There is a countable ultrahomogeneous metric space US with distances\nin S into which every countable metric space with distances in S embeds\nisometrically.\n(ii) S satisfies the 4-values condition.\nAs detailed in [3], the 4-values condition covers a wide variety of examples. For\nour purposes, the 4-values condition is relevant because it allows to establish a list\nof spaces such that any space US with S finite is in some sense isomorphic to some\nspace in the list. In particular, it allows to set up a finite list of spaces exhausting\nall the spaces US with S 6 4. More precisely, for finite subsets S = {s0 , . . . , sm }< ,\nT = {t0 , . . . , tn }< of ]0, +\u221e[, define S \u223c T when m = n and:\n\u2200i, j, k < m, si 6 sj + sk \u2194 ti 6 tj + tk .\nObserve that when S \u223c T , S satisfies the 4-value condition iff T does and in this\ncase, S and T essentially provide the same metric spaces as it is possible to have\nUS and UT supported by \u03c9 with the metrics dUS and dUT being defined such that:\n\u2200x, y \u2208 \u03c9, dUS (x, y) = si \u2194 dUT (x, y) = ti .\nNow, clearly, for a given cardinality m there are only finitely many \u223c-classes, so we\ncan find a finite collection Sm of finite subsets of ]0, \u221e[ of size m such that for every\nT of size m satisfying the 4-value condition, there is S \u2208 Sm such that T \u223c S. For\nm 6 3, examples of such lists can be easily provided. For instance, one may take:\nS1 = {{1}}\nS2 = {{1, 2}, {1, 3}}\nS3 = {{2, 3, 4}, {1, 2, 3}, {1, 2, 5}, {1, 3, 4}, {1, 3, 6}, {1, 3, 7}}.\nNotice that in those lists, the set [0, 1]m is represented by the set {1, 2, . . . , m}. For\nm = 4, a long and tedious checking procedure of the 4-values condition allows to\nfind Sm but it then contains more than 20 elements so there is no point writing\nthem all here. Still, it turns out that in most of the cases, we are able to solve the\nindivisibility problem for the space US . Our result can be stated as follows:\nTheorem 5. Let S be finite subset of ]0, +\u221e[ of size |S| 6 4 and satisfying the\n4-values condition. Assume that S \u2241 {1, 2, 3, 4}. Then US is indivisible.\nDue to the number of cases to consider, we do not prove this theorem here but\nsimply mention that when the proofs are not elementary, three essential ingredients\ncome into play. The first one is the usual infinite Ramsey theorem, due to Ramsey.\nThe second one is due to El-Zahar and Sauer and was already mentioned when\ndealing with S3 . As for the last one, it is due to Milliken (For more on this theorem\nand its applications, see [14]).\nThe case S = {1, 2, 3, 4} is consequently the only case with S = 4 for which\nthe indivisibility problem remains unsolved. In the present case, it is a bit ironical\nas {1, 2, 3, 4} is precisely the distance set in which we were interested. So far, the\nreason for which S4 stands apart is still unclear. However, it might be that it is\nactually the very first case were metricity comes into play. Indeed, for all the other\nsets S with |S| 6 4, the space US can be coded as an object where the metric\naspect does not appear and this is what makes Ramsey, Milliken and El-Zahar Sauer theorems helpful. Our feeling is consequently that solving the indivisibility\nproblem for S4 requires a new approach. Still, we have to admit that what we are\n16\n\n\fhoping for is a positive answer and that Theorem 5 is undoubtedly responsible for\nthat.\n3.2. 1/m-indivisibility of the Sm 's. We now turn to 1/m-indivisibility of the\nspaces Sm . In Theorem 5, we showed how an exact indivisibility result transfers to\nan approximate one. It turns out that a slight modification of the proof allows to\nshow:\nProposition 7. Assume that for some strictly positive m \u2208 \u03c9, Sm is indivisible.\nThen S3m is 2/3m-indivisible.\nProof. To prove this theorem, it suffices to show that there is an isometric copy\n\u2217\u2217\ne\ne\nS\u2217\u2217\nm of Sm inside S3m such that for every Sm \u2282 Sm isometric to Sm , (Sm )2/3m\nincludes an isometric copy of S3m . The proof is essentially the same as the proof of\n\u2217\nProposition\n\u0006 S \u0007 5 where Sm is constructed\n\u0006 except\n\u0007 that instead of the metric space Xm =\n(SQ , d Q m ), one works with (S3m , dSQ m ). The fact that the approximation can\nbe made up to 2/3m and not 1/m comes from the fact that for \u03b1 \u2208 [0, 1]3m , \u03b1 6\n\u2308\u03b1\u2309m 6 \u03b1 + 2/3m whereas if \u03b1 \u2208 [0, 1] \u2229 Q, one only has \u03b1 6 \u2308\u03b1\u2309m < \u03b1 + 1/m. \u0003\nThus:\nTheorem 6. For every m 6 9, Sm is 2/m-indivisible.\n3.3. Bounds. We now turn to the computation of values \u03b5 with respect to which\nS is \u03b5-indivisible.\nTheorem (Theorem 2). S is 1/3-indivisible.\nNote also that if at some point an approximate indivisibility result for Sm showed\nup independently of an exact one, we would still be able to compute a bound for\nS:\nProposition 8. Suppose that for some strictly positive integer m, Sm is 1/mindivisible. Then S is \u03b5-indivisible for every \u03b5 > 3/2m.\nProof. Let \u03b5 > 3/2m. Consider S\u2217m constructed in Proposition 5. Now, let k \u2208 \u03c9\nbe strictly positive and \u03c7 : S \u2212\u2192 k. \u03c7 induces a coloring of S\u2217m and Sm being\nem \u2282\ne m \u2282 S\u2217 isometric to Sm such that S\n1/m-indivisible, there are i < k and S\nm\n\u2190\n\u2212\ne m )1/2m includes an isometric copy of S. Now,\n( \u03c7 {i})1/m . By construction, (S\n\u2212{i})\n\u2190\n\u2212\n\u2190\n\u2212\n((\u2190\n\u03c7\n1/m )1/2m \u2282 ( \u03c7 {i})3/2m \u2282 ( \u03c7 {i})\u03b5 .\n\u2212{i}) includes an isometric copy of S.\nIt follows that (\u2190\n\u03c7\n\u03b5\n\n\u0003\n\n4. Concluding remarks and open problems.\nThe equivalence provided by Theorem 4 suggests several lines of future investigation. Apparently, here is the first and most reasonable question to consider:\nQuestion. Is S4 indivisible? More generally, is Sm indivisible for every strictly\npositive integer m?\nWe finish with two results which might be useful for that purpose. The first one\nmakes a reference to the space SQ :\n17\n\n\fProposition 9. Let m \u2208 \u03c9 be strictly positive. Assume that for every strictly\ne m of Sm in SQ on which \u03c7 is\npositive k \u2208 \u03c9 and \u03c7 : SQ \u2212\u2192 k, there is a copy S\nconstant. Then Sm is indivisible.\n\u0006\n\u0007\nProof. Once again, we work with Xm = (SQ , dSQ m ) and the identity map \u03c0m :\nSQ \u2212\u2192 Sm . Think of Xm as a subspace of Sm . Now, let k \u2208 \u03c9 be strictly positive\nand \u03c7 : Sm \u2212\u2192 k. Then \u03c7 induces a coloring of Xm , and therefore a coloring \u03c7 \u25e6 \u03c0\ne m of Sm in SQ on which \u03c7 \u25e6 \u03c0 is constant\nof SQ . By hypothesis, there is a copy S\n\u2190\n\u2212\n\u2032\u2032 e\ne m is isometric\nwith value i < k. Then \u03c0 Sm \u2282 \u03c7 {i}. The result follows since \u03c0 \u2032\u2032 S\nto Sm .\n\u0003\nThe second result provides a space whose indivisibility is equivalent to the indivisibility of Sm . Let P denote the Cantor space, that is the topological product\nspace 2\u03c9 . Let C(P ) denote the set of all continuous maps from P to R equipped\nwith the k.k\u221e norm. Since the work of Banach and Mazur, it is known that C(P ) is\na universal separable metric space. Actually, Sierpinski's proof of that fact allows\nto show the following result. For m \u2208 \u03c9 strictly positive, let Cm denote the space\nof all continuous maps from P to [0, 1]m equipped with the distance induced by\nk.k\u221e .\nProposition 10. Cm is a countable metric space and is universal for the class of\nall countable metric spaces with distances in [0, 1]m .\nIt follows that Sm is indivisible iff Cm is. Cm being a much more concrete object\nthan Sm , studying its indivisibility might be a alternative to solve the indivisibility\nproblem for Sm .\n5. Appendix - Proof of Theorem 1.\nUnlike the rest of this paper, this section does not specifically deal with the\noscillation stability for S and is simply included here for the sake of completeness.\nOur purpose is to prove Theorem 1 by constructing the required subspace of Y.\nLet X0 \u2282 Y be countable and dense. Then, assuming that Xn \u2282 Y countable has\nbeen constructed, get Xn+1 as follows: Consider F the set of all finite subspaces\nof Xn . For F \u2208 F , consider the set En (F) of all Kat\u0115tov maps f over F with\nvalues in the set {dY (x, y) : x, y \u2208 Xn } and such that F \u222a {f } embeds into Y.\nObserve that Xn being countable, so are {dY (x, y) : x, y \u2208 Xn } and En (F). Then,\nf\nfor F \u2208 F , f \u2208 En (F), fix yF\n\u2208 Y realizing f over F. Finally, let Xn+1 be\nthe subspace of YSwith underlying set Xn \u222a {yFf : F \u2208 F , f \u2208 En (F)}. After\n\u03c9 steps, set X = n\u2208\u03c9 Xn . X is clearly a countable dense subspace of Y, and\nit is ultrahomogeneous thanks to the equivalent formulation of ultrahomogeneity\nprovided in lemma 1.\nA second proof involves logical methods. Fix a countable elementary submodel\nM \u227a H\u03b8 for some large enough \u03b8 and such that Y, dY \u2208 M . Let X = M \u2229 Y.\nWe claim that X has the required property. First, observe that X is dense inside\nY since by the elementarity of M , there is a countable D \u2208 M (and therefore\nD \u2282 M ) which is a dense subset of Y. For ultrahomogeneity, let F \u2282 X be finite\nand let f be a Kat\u0115tov map over F such that F \u222a {f } embeds into X. Observe\ne \u222a {y} \u2282 X be\nthat f \u2208 M . Indeed, dom(f ) \u2208 M . On the other hand, let F\nisometric to F \u222a {f } via an isometry \u03c6. Then for every x \u2208 F, dY (\u03c6(x), y) \u2208 M .\nBut dY (\u03c6(x), y) = f (x). Thus, ran(f ) \u2208 M . It follows that f is an element of\n18\n\n\fM . Now, by ultrahomogeneity of Y, there is y in Y realizing f over F. So by\nelementarity, there is x in X realizing f over F.\nReferences\n[1] S. A. Bogatyi, Universal homogeneous rational ultrametric on the space of irrational numbers, Moscow Univ. Math. Bull, 55, 20-24, 2000.\n[2] S. A. Bogatyi, Metrically homogeneous spaces, Russian Math. Surveys, 57, 221-240, 2002.\n[3] C. Delhomm\u00e9, C. Laflamme, M. Pouzet, N. Sauer, Divisibility of countable metric spaces,\npreprint, 2005.\n[4] M. El-Zahar, N. W. Sauer, The indivisibility of the homogeneous Kn -free graphs, J. Combin. Theory Ser. B, 47, 162-170, 1989.\n[5] R. Fra\u0131\u0308ss\u00e9, Theory of relations, Studies in Logic and the Foundations of Mathematics, 145,\nNorth-Holland Publishing Co., Amsterdam, 2000.\n[6] W. T. Gowers, Lipschitz functions on Classical spaces, Europ. J. Combinatorics, 13, 141151, 1992.\n[7] G. Hjorth, An oscillation theorem for groups of isometries, preprint, 2004.\n[8] A. S. Kechris, V. Pestov and S. Todorcevic, Fra\u0131\u0308ss\u00e9 limits, Ramsey theory, and topological\ndynamics of automorphism groups, Geom. Funct. Anal., 15, 106-189, 2005.\n[9] J. Melleray, On the geometry of Urysohn's universal metric space. Topology Appl. 154\n(2007), no. 2, 384\u2013403.\n[10] V. D. Milman, A new proof of A. Dvoretzky's theorem on cross-sections of convex bodies,\nFunkcional. Anal. i Prilo\u017een., 5 (4), 28-37, 1971 (in Russian).\n[11] J. Ne\u0161et\u0159il, Metric spaces are Ramsey, European J. Combin. 28 (2007), no. 1, 457\u2013468.\n[12] E. Odell, T. Schlumprecht, The distortion problem, Acta Mathematica, 173, 259-281, 1994.\n[13] V. Pestov, Dynamics of Infinite-dimensional Groups and Ramsey-type Phenomena, Publica\u00e7\u00f5es matematicas (IMPA, Rio de Janeiro), 2005.\n[14] S. Todorcevic, Introduction to Ramsey spaces, to appear.\n[15] P. Urysohn, Sur un espace m\u00e9trique universel, Bull. Sci. Math., 51, 43-64, 74-90, 1927.\nEquipe de Logique Math\u00e9matique, UFR de Math\u00e9matiques, (case 7012), Universit\u00e9\nDenis Diderot Paris 7, 2 Place Jussieu, 75251 Paris Cedex 05, France.\nE-mail address: abad@logique.jussieu.fr\nE-mail address: nguyenl@logique.jussieu.fr\n\n19\n\n\f"}