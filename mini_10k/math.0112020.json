{"id": "http://arxiv.org/abs/math/0112020v1", "guidislink": true, "updated": "2001-12-03T16:10:37Z", "updated_parsed": [2001, 12, 3, 16, 10, 37, 0, 337, 0], "published": "2001-12-03T16:10:37Z", "published_parsed": [2001, 12, 3, 16, 10, 37, 0, 337, 0], "title": "Uniform approximation of continuous functions by smooth functions with\n  no critical points on Hilbert manifolds", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0112140%2Cmath%2F0112098%2Cmath%2F0112271%2Cmath%2F0112206%2Cmath%2F0112050%2Cmath%2F0112165%2Cmath%2F0112265%2Cmath%2F0112161%2Cmath%2F0112311%2Cmath%2F0112052%2Cmath%2F0112014%2Cmath%2F0112173%2Cmath%2F0112168%2Cmath%2F0112230%2Cmath%2F0112082%2Cmath%2F0112066%2Cmath%2F0112117%2Cmath%2F0112315%2Cmath%2F0112170%2Cmath%2F0112176%2Cmath%2F0112219%2Cmath%2F0112175%2Cmath%2F0112042%2Cmath%2F0112092%2Cmath%2F0112060%2Cmath%2F0112095%2Cmath%2F0112051%2Cmath%2F0112225%2Cmath%2F0112282%2Cmath%2F0112252%2Cmath%2F0112078%2Cmath%2F0112027%2Cmath%2F0112075%2Cmath%2F0112181%2Cmath%2F0112038%2Cmath%2F0112013%2Cmath%2F0112020%2Cmath%2F0112306%2Cmath%2F0112055%2Cmath%2F0112301%2Cmath%2F0112039%2Cmath%2F0112182%2Cmath%2F0112102%2Cmath%2F0112220%2Cmath%2F0112307%2Cmath%2F0112126%2Cmath%2F0112056%2Cmath%2F0112129%2Cmath%2F0112059%2Cmath%2F0112308%2Cmath%2F0112062%2Cmath%2F0112053%2Cmath%2F0112288%2Cmath%2F0112267%2Cmath%2F0112029%2Cmath%2F0112292%2Cmath%2F0112276%2Cmath%2F0112249%2Cmath%2F0112285%2Cmath%2F0112234%2Cmath%2F0112172%2Cmath%2F0112103%2Cmath%2F0112289%2Cmath%2F0112099%2Cmath%2F0112272%2Cmath%2F0112045%2Cmath%2F0112137%2Cmath%2F0112294%2Cmath%2F0112286%2Cmath%2F0112072%2Cmath%2F0112088%2Cmath%2F0112162%2Cmath%2F0112239%2Cmath%2F0112245%2Cmath%2F0112016%2Cmath%2F0112069%2Cmath%2F0112262%2Cmath%2F0112290%2Cmath%2F0112221%2Cmath%2F0112259%2Cmath%2F0112260%2Cmath%2F0112001%2Cmath%2F0112105%2Cmath%2F0112240%2Cmath%2F0112044%2Cmath%2F0112011%2Cmath%2F0112287%2Cmath%2F0112231%2Cmath%2F0112226%2Cmath%2F0112101%2Cmath%2F0112036%2Cmath%2F0112318%2Cmath%2F0112130%2Cmath%2F0112270%2Cmath%2F0112149%2Cmath%2F0112298%2Cmath%2F0112189%2Cmath%2F0112169%2Cmath%2F0112266%2Cmath%2F0112188%2Cmath%2F0112321&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Uniform approximation of continuous functions by smooth functions with\n  no critical points on Hilbert manifolds"}, "summary": "We prove that every continuous function on a separable infinite-dimensional\nHilbert space X can be uniformly approximated by smooth functions with no\ncritical points. This kind of result can be regarded as a sort of very strong\napproximate version of the Morse-Sard theorem. Some consequences of the main\ntheorem are as follows. Every two disjoint closed subsets of X can be separated\nby a one-codimensional smooth manifold which is a level set of a smooth\nfunction with no critical points; this fact may be viewed as a nonlinear\nanalogue of the geometrical version of the Hahn-Banach theorem. In particular,\nevery closed set in X can be uniformly approximated by open sets whose\nboundaries are smooth one-codimensional submanifolds of X. Finally, since every\nHilbert manifold is diffeomorphic to an open subset of the Hilbert space, all\nof these results still hold if one replaces the Hilbert space X with any smooth\nmanifold M modelled on X.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0112140%2Cmath%2F0112098%2Cmath%2F0112271%2Cmath%2F0112206%2Cmath%2F0112050%2Cmath%2F0112165%2Cmath%2F0112265%2Cmath%2F0112161%2Cmath%2F0112311%2Cmath%2F0112052%2Cmath%2F0112014%2Cmath%2F0112173%2Cmath%2F0112168%2Cmath%2F0112230%2Cmath%2F0112082%2Cmath%2F0112066%2Cmath%2F0112117%2Cmath%2F0112315%2Cmath%2F0112170%2Cmath%2F0112176%2Cmath%2F0112219%2Cmath%2F0112175%2Cmath%2F0112042%2Cmath%2F0112092%2Cmath%2F0112060%2Cmath%2F0112095%2Cmath%2F0112051%2Cmath%2F0112225%2Cmath%2F0112282%2Cmath%2F0112252%2Cmath%2F0112078%2Cmath%2F0112027%2Cmath%2F0112075%2Cmath%2F0112181%2Cmath%2F0112038%2Cmath%2F0112013%2Cmath%2F0112020%2Cmath%2F0112306%2Cmath%2F0112055%2Cmath%2F0112301%2Cmath%2F0112039%2Cmath%2F0112182%2Cmath%2F0112102%2Cmath%2F0112220%2Cmath%2F0112307%2Cmath%2F0112126%2Cmath%2F0112056%2Cmath%2F0112129%2Cmath%2F0112059%2Cmath%2F0112308%2Cmath%2F0112062%2Cmath%2F0112053%2Cmath%2F0112288%2Cmath%2F0112267%2Cmath%2F0112029%2Cmath%2F0112292%2Cmath%2F0112276%2Cmath%2F0112249%2Cmath%2F0112285%2Cmath%2F0112234%2Cmath%2F0112172%2Cmath%2F0112103%2Cmath%2F0112289%2Cmath%2F0112099%2Cmath%2F0112272%2Cmath%2F0112045%2Cmath%2F0112137%2Cmath%2F0112294%2Cmath%2F0112286%2Cmath%2F0112072%2Cmath%2F0112088%2Cmath%2F0112162%2Cmath%2F0112239%2Cmath%2F0112245%2Cmath%2F0112016%2Cmath%2F0112069%2Cmath%2F0112262%2Cmath%2F0112290%2Cmath%2F0112221%2Cmath%2F0112259%2Cmath%2F0112260%2Cmath%2F0112001%2Cmath%2F0112105%2Cmath%2F0112240%2Cmath%2F0112044%2Cmath%2F0112011%2Cmath%2F0112287%2Cmath%2F0112231%2Cmath%2F0112226%2Cmath%2F0112101%2Cmath%2F0112036%2Cmath%2F0112318%2Cmath%2F0112130%2Cmath%2F0112270%2Cmath%2F0112149%2Cmath%2F0112298%2Cmath%2F0112189%2Cmath%2F0112169%2Cmath%2F0112266%2Cmath%2F0112188%2Cmath%2F0112321&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We prove that every continuous function on a separable infinite-dimensional\nHilbert space X can be uniformly approximated by smooth functions with no\ncritical points. This kind of result can be regarded as a sort of very strong\napproximate version of the Morse-Sard theorem. Some consequences of the main\ntheorem are as follows. Every two disjoint closed subsets of X can be separated\nby a one-codimensional smooth manifold which is a level set of a smooth\nfunction with no critical points; this fact may be viewed as a nonlinear\nanalogue of the geometrical version of the Hahn-Banach theorem. In particular,\nevery closed set in X can be uniformly approximated by open sets whose\nboundaries are smooth one-codimensional submanifolds of X. Finally, since every\nHilbert manifold is diffeomorphic to an open subset of the Hilbert space, all\nof these results still hold if one replaces the Hilbert space X with any smooth\nmanifold M modelled on X."}, "authors": ["Daniel Azagra", "Manuel Cepedello Boiso"], "author_detail": {"name": "Manuel Cepedello Boiso"}, "author": "Manuel Cepedello Boiso", "arxiv_comment": "24 pages", "links": [{"href": "http://arxiv.org/abs/math/0112020v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0112020v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.DG", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.DG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "58B99; 57R12; 57R70; 46T05", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0112020v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0112020v1", "journal_reference": null, "doi": null, "fulltext": "arXiv:math/0112020v1 [math.DG] 3 Dec 2001\n\nUNIFORM APPROXIMATION OF CONTINUOUS FUNCTIONS\nBY SMOOTH FUNCTIONS WITH NO CRITICAL POINTS ON\nHILBERT MANIFOLDS\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\nAbstract. We prove that every continuous function on a separable infinitedimensional Hilbert space X can be uniformly approximated by C \u221e smooth\nfunctions with no critical points. This kind of result can be regarded as a sort of\nvery strong approximate version of the Morse-Sard theorem. Some consequences\nof the main theorem are as follows. Every two disjoint closed subsets of X can\nbe separated by a one-codimensional smooth manifold which is a level set of a\nsmooth function with no critical points; this fact may be viewed as a nonlinear\nanalogue of the geometrical version of the Hahn-Banach theorem. In particular, every closed set in X can be uniformly approximated by open sets whose\nboundaries are C \u221e smooth one-codimensional submanifolds of X. Finally, since\nevery Hilbert manifold is diffeomorphic to an open subset of the Hilbert space,\nall of these results still hold if one replaces the Hilbert space X with any smooth\nmanifold M modelled on X.\n\n1. Introduction and main results\nA fundamental result in differential topology and analysis is the Morse-Sard\ntheorem [17, 18], which states that if f : Rn \u2212\u2192 Rm is a C r smooth function, with\nr > max{n \u2212 m, 0}, and Cf stands for the set of critical points of f (that is, the\npoints of X at which the differential of f is not surjective), then the set of critical\nvalues, f (Cf ), is of (Lebesgue) measure zero in Rm . This result also holds true for\nsmooth functions f : X \u2212\u2192 Y between two smooth manifolds of dimensions n and\nm respectively.\nSeveral authors have dealt with the question as to what extent one can obtain a\nsimilar result for infinite-dimensional spaces or manifolds modelled on such spaces.\nLet us recall some of their results.\nSmale [20] proved that if X and Y are separable connected smooth manifolds\nmodelled on Banach spaces and f : X \u2212\u2192 Y is a C r Fredholm map (that is, every\ndifferential df (x) is a Fredholm operator between the corresponding tangent spaces)\nthen f (Cf ) is meager, and in particular f (Cf ) has no interior points, provided that\nr > max{index(df (x)), 0} for all x \u2208 X; here index(df (x)) stands for the index of the\nFredholm operator df (x), that is, the difference between the dimension of the kernel\nof df (x) and the codimension of the image of df (x), which are both finite. However,\nthese assumptions are quite restrictive: for instance, if X is infinite-dimensional then\nDate: December 2, 2001.\n1\n\n\f2\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nthere is no Fredholm map f : X \u2212\u2192 R. In general, the existence of a Fredholm map\nf from a manifold X into another manifold Y implies that Y is infinite-dimensional\nwhenever X is.\nOn the other hand, one cannot dream of extending the Morse-Sard theorem\nto infinite dimensions without imposing strong restrictions. Indeed, as shown by\nKupka's counterexample [15], there are C \u221e smooth functions f : X \u2212\u2192 R, where\nX is a Hilbert space, so that their sets of critical values f (Cf ) contain intervals and\nin particular have non-empty interior.\nMore recently, S. M. Bates has carried out a deep study concerning the sharpness\nof the hypothesis of the Morse-Sard theorem and the geometry of the sets of critical\nvalues of smooth functions. In particular he has shown that the above C r smoothness\nhypothesis in the statement of the Morse-Sard theorem can be weakened to C r\u22121,1 .\nSee [3, 4, 5, 6, 7].\nNevertheless, for many applications of the Morse-Sard theorem, it is often enough\nto know that any given function can be uniformly approximated by a map whose set\nof critical values has empty interior. In this direction, Eells and McAlpin established\nthe following theorem [13]: if X is a separable Hilbert space, then every continuous\nfunction from X into R can be uniformly approximated by a smooth function f\nwhose set of critical values f (Cf ) is of measure zero. This allowed them to deduce\na version of this theorem for mappings between smooth manifolds M and N modelled on X and a Banach space F respectively, which they called an approximate\nMorse-Sard theorem: every continuous mapping from M into N can be uniformly\napproximated by a smooth function f : X \u2212\u2192 Y so that f (Cf ) has empty interior.\nHowever, this seemingly much more general version of the result is a bit tricky: indeed, as they already observed ([13], Remark 3A), when F is infinite-dimensional,\nthe function f they obtain satisfies that Cf = X, although f (X) has empty interior\nin Y . Unfortunately, even though all the results of that paper seem to be true, some\nof the proofs are not correct.\nIn this paper we will prove a much stronger result: if M is a C \u221e smooth manifold\nmodelled on a separable infinite-dimensional Hilbert space X (in the sequel such a\nmanifold will be called a Hilbert manifold), then every continuous function on M\ncan be uniformly approximated by C \u221e smooth functions with no critical points.\nThis kind of result might be regarded as the strongest possible one of any class of\napproximate Morse-Sard theorems, when the target space is R.\nAs a by-product we also obtain the following: for every open set U in a separable\nHilbert space X there is a C \u221e smooth function f whose support is the closure of U\nand so that f \u2032 (x) 6= 0 for every x \u2208 U . This result could be summed up by saying\nthat for every open subset U of X there is a function f whose open support is U\nand which does not satisfy Rolle's theorem; one should compare this result with the\nmain theorem from [2] (see also the references therein).\nEither of these results has in turn interesting consequences related to smooth\napproximation and separation of closed sets. For instance, every closed set in a\nseparable Hilbert manifold M can be uniformly approximated by open sets whose\nboundaries are smooth one-codimensional submanifolds of M . Moreover, every two\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n3\n\ndisjoint closed subsets in M can be separated by a smooth one-codimensional submanifold of M which is a level set of a smooth function with no critical points. The\nlatter may in turn be regarded as a nonlinear analogue of the geometrical version of\nthe Hahn-Banach theorem.\nLet us now formally state our main results.\nTheorem 1.1. Let U be an open subset of a separable infinite-dimensional Hilbert\nspace X. Then, for all continuous functions f : U \u2212\u2192 R and \u03b5 : U \u2212\u2192 (0, +\u221e),\nthere are C \u221e smooth functions \u03c8 on U such that |f (x) \u2212 \u03c8(x)| \u2264 \u03b5(x) and \u03c8 \u2032 (x) 6= 0\nwhenever x \u2208 X.\nWe will prove this result in the following section. Let us now establish the\nannounced consequences of Theorem 1.1.\nOne could probably adapt the ideas in our proof to extend Theorem 1.1 to the\nsetting of Hilbert manifolds but, for simplicity, we will instead use another approach.\nIndeed, bearing in mind a fundamental result on Hilbert manifolds due to Eells and\nElworthy [12] that every separable Hilbert manifold can be C \u221e embedded as an\nopen subset of the Hilbert space, it is a triviality to observe that Theorem 1.1 still\nholds if we replace U with a a separable Hilbert manifold.\nTheorem 1.2. Let M be a separable Hilbert manifold. Then, for all continuous\nfunctions f : M \u2212\u2192 R and \u03b5 : M \u2212\u2192 (0, +\u221e), there are C \u221e smooth functions\n\u03c8 : M \u2212\u2192 R so that |f (x) \u2212 \u03c8(x)| \u2264 \u03b5(x), and d\u03c8(x) 6= 0, for all x \u2208 X.\nProof. According to the main theorem of [12], there is a C \u221e embedding of M onto\nan open subset of the Hilbert space X. Therefore M is C \u221e diffeomorphic to an\nopen subset U of X; let h : U \u2212\u2192 M be such a C \u221e diffeomorphism. Consider\nthe continuous functions g = f \u25e6 h : U \u2212\u2192 R and \u03b4 = \u03b5 \u25e6 h : U \u2212\u2192 (0, +\u221e). By\nTheorem 1.1 there is a C \u221e smooth function \u03c6 : U \u2212\u2192 R so that \u03c6 has no critical\npoints, and\n|g(y) \u2212 \u03c6(y)| \u2264 \u03b4(y)\nfor all y \u2208 U . Now define \u03c8 = \u03c6 \u25e6 h\u22121 : M \u2212\u2192 R. Since h is a diffeomorphism it\nis clear that h takes the critical set of \u03c8 onto the critical set of \u03c6 = \u03c8 \u25e6 h. But, as\nthe latter is empty, so is the former; that is, \u03c8 has no critical points either. On the\nother hand, it is clear that\n|f (x) \u2212 \u03c8(x)| = |g(h\u22121 (x)) \u2212 \u03c6(h\u22121 (x))| \u2264 \u03b4(h\u22121 (x)) = \u03b5(x)\nfor all x \u2208 M .\nAs an easy corollary we can deduce our promised nonlinear version of the geometrical Hahn-Banach theorem.\nWe will say that an open subset U of a Hilbert manifold M is smooth provided\nthat its boundary \u2202U is a smooth one-codimensional submanifold of M .\nCorollary 1.3. Let M be a separable Hilbert manifold. Then, for every two disjoint\nclosed subsets C1 , C2 of M , there exists a C \u221e smooth function \u03c6 : X \u2212\u2192 R with\nno critical points, such that the level set N = \u03c6\u22121 (0) is a 1-codimensional C \u221e\n\n\f4\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nsmooth submanifold of M that separates C1 and C2 , in the following sense. Define\nU1 = {x \u2208 M : \u03c6(x) < 0} and U2 = {x \u2208 M : \u03c6(x) > 0}; then U1 and U2 are disjoint\nC \u221e smooth open sets of M so that Ci \u2282 Ui for i = 1, 2, and \u2202U1 = \u2202U2 = N .\nProof. By Urysohn's lemma there exists a continuous function f : M \u2212\u2192 [0, 1] so\nthat C1 \u2282 f \u22121 (0) and C2 \u2282 f \u22121 (1). Taking \u03b5 = 1/3 and applying Theorem 1.2 we\nget a C \u221e smooth function \u03c8 : M \u2212\u2192 R which has no critical points and is so that\n|f (x) \u2212 \u03c8(x)| \u2264 1/3\nfor all x \u2208 M ; in particular\nC1 \u2286 f \u22121 (0) \u2286 \u03c8 \u22121 (\u2212\u221e, 1/2) := U1 ,\nand\n\nC2 \u2286 f \u22121 (1) \u2286 \u03c8 \u22121 (1/2, +\u221e) := U2 .\nThe open sets U1 and U2 are smooth because their common boundary N = \u03c8 \u22121 (1/2)\nis a smooth one-codimensional submanifold of M (thanks to the implicit function\ntheorem and the fact that d\u03c8(x) 6= 0 for all x \u2208 N ). In order to obtain the result in\nthe above form it is enough to set \u03c6 = \u03c8 \u2212 1/2.\nA trivial consequence of this result is that every closed subset of X can be\nuniformly approximated by smooth open subsets of X. In fact,\nCorollary 1.4. Every closed subset of a separable Hilbert manifold M can be approximated by smooth open subsets of M , in the following sense: for every closed\nset C \u2282 M and every open set W containing C there is a C \u221e smooth open set U so\nthat C \u2282 U \u2286 W .\nFinally, the following result, which also implies the above corollary, tells us that\nfor every open set U in X there always exists a function whose open support is U\nand which does not satisfy Rolle's theorem.\nTheorem 1.5. For every open subset U of a Hilbert manifold M there is a continuous function f on M whose support is the closure of U , so that f is C \u221e smooth\non U and yet f has no critical point in U .\nProof. For the same reasons as in the proof of Theorem 1.2 we may assume that\nU is an open subset of the Hilbert space X = l2 . Let \u03b5 : X \u2212\u2192 [0, +\u221e) be the\ndistance function to X \\ U , that is,\n\u03b5(x) = dist(x, X \\ U ) = inf{kx \u2212 yk : y \u2208 X \\ U }.\nThe function \u03b5 is continuous on X and satisfies that \u03b5(x) > 0 if and only if x \u2208 U .\nAccording to Theorem 1.1, and setting f (x) = 2\u03b5(x), there exists a C \u221e smooth\nfunction \u03c8 : U \u2212\u2192 R which has no critical points on U , and such that \u03b5-approximates\nf on U , that is,\n|2\u03b5(x) \u2212 \u03c8(x)| \u2264 \u03b5(x)\nfor all x \u2208 U . This inequality implies that\nlim \u03c8(x) = 0\n\nx\u2192z\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n5\n\nfor every z \u2208 \u2202U . Therefore, if we set \u03c8 = 0 on X \\ U , the extended function\n\u03c8 : X \u2212\u2192 [0, +\u221e) is continuous on the whole of X, is C \u221e smooth on U and has no\ncritical points on U . On the other hand, \u03c8(x) \u2265 \u03b5(x) > 0 for all x \u2208 U , hence the\nsupport of \u03c8 is U .\n2. Proof of the main result\nThe main ideas behind the proof of Theorem 1.1 are as follows. First we use a\nperturbed smooth partition of unity to approximate the given continuous function\nf . The summands of this perturbed partition of unity are functions supported on\nscalloped balls and carefully constructed in such a way that the critical points of the\napproximating sum \u03c6 are kept under control. More precisely, those critical points\nconsist of a sequence of compact sets Kn that are suitably isolated in pairwise disjoint\nopen sets Un of small diameter so that the oscillation of both f and \u03c6 on Un is small\nas well.\nThen we have to eliminate all of those critical points without losing much of\nthe approximation. To this end we compose the approximating function \u03c6 with\na sequence of deleting diffeomorphisms hn : X \u2212\u2192 X \\ Kn which extract each of\nthe compact sets of critical points Kn and restrict to the identity outside each of\nthe open sets Un . The infinite composition of deleting diffeomorphisms with our\nfunction, \u03c8 = \u03c6 \u25e6 \u221e\nn=1 hn , is locally finite, in the sense that only a finite number\nof diffeomorphisms are acting on some neighborhood of each point, while all the\nrest restrict to the identity on that neighborhood. In this way we obtain a smooth\nfunction \u03c8 which has no critical points, and which happens to approximate the\nfunction \u03c6 (which in turn approximates the original f ) because the perturbation\nbrought on \u03c6 by that infinite composition is not very important: indeed, recall\nthat each hn restricts to the identity outside the set Un (on which \u03c6 has a small\noscillation), and the Un are pairwise disjoint.\nWe will make the proof of Theorem 1.1 in the case of a constant \u03b5 > 0 so as to\navoid bearing an unnecessary burden of notation. Later on we will briefly explain\nwhat additional technical precautions must be taken in order to deduce the general\nform of this result (see Remark 2.8).\nThe following proposition shows the existence of a function \u03c6 with the above\nproperties. Recall that C\u03c6 stands for the set of critical points of \u03c6.\nProposition 2.1. Let U be an open subset of the separable Hilbert space X. Let\nf : U \u2212\u2192 R be a continuous function on X, and \u03b5 > 0. Then there exist a C \u221e\nsmooth function \u03c6 : U \u2212\u2192 R, a sequence (Kn ) of compact sets, a sequence (Un ) of\nopen sets, and a sequence (B(yn , rn )) of open balls which are contained in U and\nwhose union covers U , such that:\nS\n(a) C\u03c6 \u2286 \u221e\nn=1 Kn ;\n(b) Kn \u2282 Un \u2286 B(yn , rn ) for all n \u2208 N, and Un \u2229 Um = \u2205 whenever n 6= m;\n(c) |\u03c6(x) \u2212 f (y)| \u2264 2\u03b5 for all x, y \u2208 B(yn , rn ), n \u2208 N;\n(d) for every x \u2208 U there exist an open neighborhood Vx of x and some nx \u2208 N\nsuch that Vx \u2229 Um = \u2205 for all m > nx .\n\n\f6\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nThe following theorem ensures the existence of the diffeomorphisms hn .\nTheorem 2.2. Let X be an infinite-dimensional Hilbert space. Then, for every\ncompact set K and every open subset U of X with K \u2282 U , there exists a C \u221e smooth\ndiffeomorphism h : X \u2212\u2192 X \\ K so that h restricts to the identity outside U .\nThis result may be regarded, in the Hilbert case, as a (rather technical, but crucial\nto our purposes) improvement of some known results on smooth negligibility of\ncompact sets (see [1, 14]; there h is known to be the identity only outside a ball\ncontaining K).\nAssume for a while that Proposition 2.1 and Theorem 2.2 are already established,\nand let us see how we can deduce Theorem 1.1.\nProof of Theorem 1.1\nFor a given continuous function f and a number \u03b5 > 0, take a function \u03c6 and\nsequences (Kn ) and (Un ) with the properties of Proposition 2.1. For each compact\nset Kn and each open set Un , use Theorem 2.2 to find a C \u221e diffeomorphism hn :\nX \u2212\u2192 X \\ Kn so that hn (x) = x if x \u2208\n/ Un . Note that, since the Uj contain the Kj\nand are pairwise disjoint,\n\u221e\n[\nKj \u2287 C\u03c6\n(1)\nhn (x) \u2208\n/\nj=1\n\nfor all x \u2208 U , n \u2208 N. Define then \u03c8 : U \u2212\u2192 R by\n\u03c8 =\u03c6\u25e6\n\n\u221e\nn=1 hn .\n\nThis formula makes sense and the function \u03c8 is C \u221e smooth because the infinite\ncomposition is in fact locally finite. Indeed, for a given x \u2208 U , according to Proposition 2.1(d), we can find an open neighborhood Vx of x and some nx \u2208 N so that\nVx \u2229 Um = \u2205 for all m > nx ; hence hm (y) = y for all y \u2208 Vx and m > nx , and\ntherefore\n\u03c8(y) = \u03c6 \u25e6 hnx \u25e6 hnx \u22121 \u25e6 ... \u25e6 h2 \u25e6 h1 (y)\n(2)\nfor all y \u2208 Vx . The derivative \u03c8 \u2032 (y) is given by\n\u0001\n\u0001\nnx\nnx \u22121\n\u03c8 \u2032 (y) = \u03c6\u2032\nj=1 hj (y) \u25e6 Dhnx\nj=1 hj (y) \u25e6 ... \u25e6 Dh2 (h1 (y)) \u25e6 Dh1 (y)\n\n(3)\n\nfor all y \u2208 Vx . Since Un \u2286 X \\ Um for n 6= m, we have that hm is the identity on\nUn , and therefore Dhm (x) = I (the identity isomorphism of l2 ) for all x \u2208 Un . By\nthe continuity of Dhn it follows that Dhm (x) = I for all x \u2208 U n , if m 6= n. This\nimplies that, for y \u2208 Un \u2229 Vx , all the differentials Dhj (z) in (3) are the identity,\nexcept perhaps for j = n. Hence we get that either\n\u03c8 \u2032 (y) = \u03c6\u2032 (hn (y)) \u25e6 Dhn (y), and \u03c8(y) = \u03c6(hn (y)),\n\n(4)\n\nif y belongs to some U n , or else\n\u03c8 \u2032 (y) = \u03c6\u2032 (y), and \u03c8(y) = \u03c6(y),\nwhen y \u2208\n/\n\nS\u221e\n\nn=1 U n .\n\n(5)\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n7\n\nNow we can easily check that C\u03c8 = \u2205. Take x \u2208 U . If we are in the case that\nx \u2208 U n for some n then \u03c8 \u2032 (x) = \u03c6\u2032 (hn (x)) \u25e6 Dhn (x) 6= 0, because Dhn (x) is a linear\nisomorphism\nand, according to (1) above, \u03c6\u2032 (hn (x)) 6= 0. Otherwise we have that\nS\u221e\nx\u2208\n/ n=1 U n \u2287 C\u03c6 , so \u03c8 \u2032 (x) = \u03c6\u2032 (x) 6= 0 trivially.\nIt only remains to check that \u03c8 still approximates f . As before, for a given\nx \u2208 U , either \u03c8(x) = \u03c6(x) or \u03c8(x) = \u03c6(hn (x)) for some n (with x \u2208 Un ). In the\nfirst case, from Proposition 2.1(c) we get that |\u03c8(x) \u2212 f (x)| \u2264 2\u03b5. In the second\ncase, bearing in mind that hn (x) \u2208 Un \u2286 B(yn , rn ), and for the same reason, we\nhave that\n|\u03c8(x) \u2212 f (x)| = |\u03c6(hn (x)) \u2212 f (x)| \u2264 2\u03b5;\nin either case we obtain that |\u03c8(x) \u2212 f (x)| \u2264 2\u03b5.\nProof of Proposition 2.1\nWe will assume that U = X, since the proof is completely analogous in the\ncase of a general open set. One only has to take some (easy but rather rambling)\ntechnical precautions in order to make sure that the different balls considered in the\nargument are in U .\nLet B(x, r) and B(x, r) stand for the open ball and closed ball, respectively, of\ncenter x and radius r, with respect to the usual hilbertian norm k * k of X.\nLet f : X \u2212\u2192 R be a continuous function, and let \u03b5 > 0. By continuity, for every\nx \u2208 XSthere exists \u03b4x > 0 so that |f (y) \u2212 f (x)| \u2264 \u03b5/4 whenever y \u2208 B(x, 2\u03b4x ). Since\nX = x\u2208X B(x, \u03b4x /2) is separable, there exists a countable subcovering,\nX=\n\n\u221e\n[\n\nB(xn , sn /2),\n\nn=1\n\nwhere sn = \u03b4xn , for some sequence of centers (xn ). By induction we can choose a\nsequence of linearly independent vectors (yn ), with yn \u2208 B(xn , sn /2), so that\nX=\n\n\u221e\n[\n\nB(yn , sn ).\n\nn=1\n\nMoreover, we have that\n\n|f (y) \u2212 f (yn )| \u2264 \u03b5/2\nprovided ky \u2212 yn k \u2264\n\n3\n2 sn ,\n\nas is immediately checked.\n\nNotation 2.3. In the sequel A[z1 , ..., zk ] stands for the affine subspace spanned by\na finite sequence of points z1 , ..., zk \u2208 X.\nThe following lemma shows that we can slightly move the radii sn so that, for\nany finite selection of centers yn , the spheres that are the boundaries of the balls\nB(yn , sn ) have empty intersection with the affine subspace spanned by those centers.\nLemma 2.4. We can find a sequence of positive numbers (rn ) with sn \u2264 rn \u2264 32 sn\nso that, if we denote Sn = \u2202B(yn , rn ) then,\n\n\f8\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\n(i) for each finite sequence of positive integers k1 < k2 < ... < km ,\nA[yk1 , ..., ykm ] \u2229 Sk1 \u2229 ... \u2229 Skm = \u2205.\n(ii) for any n, k \u2208 N, yn \u2208\n/ Sk .\nProof. We will define the rn inductively.\nFor n = 1 we may take r1 \u2208 [s1 , 32 s1 ] so that r1 does not belong to the countable\nset {ky1 \u2212 yk k : k \u2208 N}; this means that yk \u2208\n/ S1 for any k \u2208 N. On the other hand,\nit is obvious that {y1 } \u2229 S1 = \u2205.\nAssume now that r1 , ..., rn have already been chosen in such a way that the\nspheres S1 , ..., Sn satisfy (i) and (ii), and let us see how we can find rn+1 . For any\nfinite sequence of integers 0 < k1 < ... < kj \u2264 n + 1, let us denote\nAk1 ,...,kj = A[yk1 , ..., ykj ].\nFor simplicity, and up to a suitable translation (which obviously does not affect our\nproblem), we may assume that yn+1 = 0, so that Ak1 ,...,km,n+1 is the m-dimensional\nvector subspace of X spanned by yk1 , ..., ykm . Now, for each finite sequence of\nintegers 0 < k1 < ... < km \u2264 n, consider the map Fk1 ,...,km : Ak1 ,...,km,n+1 \u2212\u2192 Rm\ndefined by\n\u0001\nFk1 ,...,km (x) = kx \u2212 yk1 k2 \u2212 rk1 2 , ..., kx \u2212 ykm k2 \u2212 rkm 2 .\nNote that\n\n\u0001\nDFk1 ,...,km (x) = 2(x \u2212 yk1 ), ..., 2(x \u2212 ykm )\n\u0001\nand therefore rank DFk1 ,...,km (x) < m if and only if x \u2208 Ak1 ,...,km . By the induction\nassumption we know that\n\nSk1 \u2229 ... \u2229 Skm \u2229 Ak1 ,...,km = \u2205,\n\u0001\nhence it is clear that rank DFk1 ,...,km (x) = m for all x \u2208 Sk1 \u2229...\u2229Skm \u2229Ak1 ,...,km,n+1 .\nThis implies that\nMk1 ,...,km := Sk1 \u2229 ... \u2229 Skm \u2229 Ak1 ,...,km,n+1\n\nis a compact m \u2212 m = 0-dimensional submanifold of Ak1 ,...,km,n+1 , and in particular\nMk1 ,...,km consists of a finite number of points (in fact two points, but we do not\nneed to know this). Therefore\n[\nM=\nMk1 ,...,km\n\n(where the union is taken over all the finite sequences of integers 0 < k1 < ... <\nkn \u2264 n) is a finite set as well. Now we have that\n\u0011\n\u0003 \u0010\n\u0002\n3\nI := sn+1 , sn+1 \\ {kzk : z \u2208 M } \u222a {kyj k : j \u2208 N}\n2\nis an uncountable subset of the real line, so we can find a number rn+1 \u2208 I. With\nthis choice it is clear that\nSk1 \u2229 ... \u2229 Skm \u2229 Sn+1 \u2229 Ak1 ,...,km,n+1 = Mk1 ,...,km \u2229 Sn+1 = \u2205\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n9\n\nfor all finite sequences of integers 0 < k1 < ... < km < n + 1, and also yj \u2208\n/ Sn+1 =\n\u2202B(0, rn+1 ) for all j \u2208 N. Therefore the spheres S1 , ..., Sn , Sn+1 satisfy (i) and (ii)\nas well. By induction the sequence (rn ) is thus well defined.\nSince sn \u2264 rn \u2264 23 sn for all n, it is clear that the new balls B(yn , rn ) keep the\ntwo important properties of the old balls B(yn , sn ), namely,\nX=\n\n\u221e\n[\n\nB(yn , rn ),\n\n(6)\n\nn=1\n\nand\n\n|f (y) \u2212 f (yn )| \u2264 \u03b5/2 whenever ky \u2212 yn k \u2264 rn .\n\n(7)\n\nNow we define the scalloped balls Bn that are the basis for our perturbed partition\nof unity: set B1 = B(y1 , r1 ), and for n \u2265 2 define\nBn = B(yn , rn ) \\\n\n\u0010n\u22121\n[\nj=1\n\n\u0011\nB(yj , \u03bbn rj ) ;\n\nwhere 1/2 < \u03bb2 < \u03bb3 < ... < \u03bbn < \u03bbn+1 < ... < 1, with limn\u2192\u221e \u03bbn = 1. The \u03bbn are\nto be fixed later on.\nTaking into account that limn\u2192\u221e \u03bbn = 1, it is easily checked that the Bn form a\nlocally finite open covering of X, with the nice property that\n|f (y) \u2212 f (yn )| \u2264 \u03b5/2 whenever y \u2208 Bn .\nNext, pick a C \u221e smooth function g1 : R \u2212\u2192 [0, 1] so that:\n(i) g1 (t) = 1 for t \u2264 0,\n(ii) g1 (t) = 0 for t \u2265 r1 2 ,\n(iii) g1\u2032 (t) < 0 if 0 < t < r1 2 ;\nand define then \u03c61 : X \u2212\u2192 R by\n\u03c61 (x) = g1 (kx \u2212 y1 k2 )\nfor all x \u2208 X. Note that \u03c61 is a C \u221e smooth function whose open support is B1 ,\nand B1 \u2229 C\u03c61 = {y1 }, that is, y1 is the only critical point of \u03c61 that lies inside B1 .\nNow, for n \u2265 2, pick C \u221e smooth functions \u03b8(n,j) : R \u2212\u2192 [0, 1], j = 1, ..., n, with\nthe following properties. For j = 1, ..., n \u2212 1, \u03b8(n,j) satisfies that\n(i) \u03b8(n,j) (t) = 0 for t \u2264 (\u03bbn rj )2 ,\n(ii) \u03b8(n,j) (t) = 1 for t \u2265 rj 2 ,\n\u2032\n(iii) \u03b8(n,j)\n(t) > 0 if (\u03bbn rj )2 < t < rj 2 ;\nwhile for j = n the function \u03b8(n,n) is such that\n(i) \u03b8(n,n) (t) = 1 for t \u2264 0,\n(ii) \u03b8(n,n) (t) = 0 for t \u2265 rn 2 ,\n\u2032\n(iii) \u03b8(n,n)\n(t) < 0 if 0 < t < rn 2 .\n\n\f10\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nThen define the function gn : Rn \u2212\u2192 [0, 1] as\ngn (t1 , ..., tn ) =\n\nn\nY\n\n\u03b8(n,i) (ti )\n\ni=1\n\nRn .\n\nfor all t = (t1 , ..., tn ) \u2208\nThis function is clearly C \u221e smooth on Rn and satisfies\nthe following properties:\n(i) gn (t1 , ..., tn ) > 0 if and only if tj > (\u03bbn rj )2 for all j = 1, ..., n \u2212 1, and tn < rn 2 ;\nand gn vanishes elsewhere;\n(ii) gn (t1 , ..., tn ) = \u03b8(n,n) (tn ) whenever tj \u2265 rj 2 for all j = 1, ..., n \u2212 1;\n(iii) \u2207gn (t1 , ..., tn ) 6= 0 provided (\u03bbn rj )2 < tj for all j = 1, ..., n \u2212 1, and 0 < tn <\nrn 2 .\nMoreover, under the same conditions as in (iii) just above we have that\nn\u22121\nY\n\u2202\u03b8(n,n)\n\u2202gn\n\u03b8(n,i) (ti ) < 0,\n(t1 , ..., tn ) =\n(tn )\n\u2202tn\n\u2202tn\n\n(8)\n\nn\nY\n\u2202\u03b8(n,j)\n\u2202gn\n(t1 , ..., tn ) =\n(tj )\n\u03b8(n,i) (ti ) > 0.\n\u2202tj\n\u2202tj\n\n(9)\n\ni=1\n\nsince no function in this product vanishes on the specified set, while for j < n,\naccording to the corresponding properties of the functions \u03b8(n,j) we have that\n\ni=1,i6=j\n\nIf we are not in the conditions of (iii) then the corresponding inequalities do still\nhold but are not strict.\nLet us now define \u03c6n : X \u2212\u2192 [0, 1] by\n\u03c6n (x) = gn (kx \u2212 y1 k2 , ..., kx \u2212 yn k2 ).\nIt is clear that \u03c6n is a C \u221e smooth function whose open support is precisely the\nscalloped ball Bn .\nAs above, let us denote by C\u03c6n the critical set of \u03c6n , that is,\nC\u03c6n = {x \u2208 X : \u03c6\u2032n (x) = 0}.\nSince our norm k * k is hilbertian we have that, if x \u2208 C\u03c6n \u2229 Bn , then x belongs to\nthe affine span of y1 , ..., yn . Indeed, if x \u2208 Bn ,\n\u03c6\u2032n (x) =\n\nn\nX\n\u2202gn\nj=1\n\n\u2202tj\n\n(kx \u2212 y1 k2 , ..., kx \u2212 yn k2 ) 2(x \u2212 yj ) = 0,\n\n(10)\n\nwhich (taking into account (8) and the fact that the yj are all linearly independent)\nmeans that x is in the affine span of y1 , ..., yn . Here, as is usual, we identify the\nHilbert space X with its dual X \u2217 , and we make use of the fact that the derivative\nof the function x 7\u2192 kxk2 is the mapping x 7\u2192 2x.\nSimilarly, by using (8) it can be shown that x \u2208 C\u03c61 +***+\u03c6m \u2229 (B1 \u222a ... \u222a Bm )\nimplies that x belongs to the affine span of y1 , ..., ym .\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n11\n\nIn order that our approximating function has a small critical set we cannot use\nthe standard approximation provided by the partition of unity associated with the\nfunctions (\u03c6j )i\u2208N , namely\nP\u221e\nn=1 \u03b1n \u03c6n (x)\nx 7\u2192 P\n,\n\u221e\nn=1 \u03c6n (x)\nwhere \u03b1n = f (yn ). Indeed, such a function would have a huge set of critical points\nsince it would be constant (equal to \u03b1n ) on a lot of large places (at least on each\nBn minus the union of the rest of the Bj ). Instead, we will modify this standard\napproximation by letting the \u03b1n be functions (and not mere numbers) of very small\noscillation and with only one critical point (namely yn ). So, for every n \u2208 N let us\npick a C \u221e smooth real function an : [0, +\u221e) \u2212\u2192 R with the following properties:\n(i) an (0) = f (yn );\n(ii) a\u2032n (t) < 0 whenever t > 0;\n(iii) |an (t) \u2212 an (0)| \u2264 \u03b5/2 for all t \u2265 0;\nand define \u03b1n : X \u2212\u2192 R by\n\u03b1n (x) = an (kx \u2212 yn k2 )\nfor every x \u2208 X. It is clear that \u03b1n is a C \u221e smooth function on X whose only\ncritical point is yn . Besides,\n|\u03b1n (x) \u2212 f (yn )| \u2264 \u03b5/2 for all x \u2208 X.\nNow we can define our approximating function \u03c6 : X \u2212\u2192 R by\nP\u221e\n\u03b1 (x)\u03c6n (x)\nP\u221e n\n\u03c6(x) = n=1\nn=1 \u03c6n (x)\n\nfor every x \u2208 X. Since the sums are locally finite, it is clear that \u03c6 is a well-defined\nC \u221e smooth function.\nFact 2.5. The function \u03c6 approximates f nicely. Namely, we have that\n(i) |\u03c6(x) \u2212 f (x)| \u2264 \u03b5 for all x \u2208 X, and\n(ii) |\u03c6(y) \u2212 f (x)| \u2264 2\u03b5 for all x, y \u2208 B(yn , rn ) and each n \u2208 N.\nProof. Indeed, for every n we have that |\u03b1n (x) \u2212 f (yn )| \u2264 \u03b5/2 for all x \u2208 X. On the\nother hand, by (7) above we know that |f (x) \u2212 f (yn)| \u2264 \u03b5/2 whenever x \u2208 B(yn , rn ).\nThen, by the triangle inequality, it follows that\n|\u03b1n (x) \u2212 f (x)| \u2264 \u03b5\n\n(11)\n\nwhenever x \u2208 B(yn , rn ). In the same way we deduce that\n|\u03b1m (x) \u2212 f (yn )| \u2264 \u03b5\n\n(12)\n\nwhenever x \u2208 B(yn , rn ) \u2229 B(ym , rm ). Since \u03c6m (y) = 0 when y \u2208\n/ B(ym , rm ), from\n(11) we get that\nP\u221e\nP\u221e\n\u03b5\u03c6m (x)\nm (x) \u2212 f (x))\u03c6m (x)\nm=1 (\u03b1\nP\u221e\n|\u03c6(x) \u2212 f (x)| =\n\u2264 Pm=1\n=\u03b5\n\u221e\nm=1 \u03c6m (x)\nm=1 \u03c6m (x)\n\n\f12\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nfor all x \u2208 X, which shows (i). Similarly, we deduce from (12) that\nP\u221e\nP\u221e\n\u03b5\u03c6m (y)\nm (y) \u2212 f (yn ))\u03c6m (y)\nm=1 (\u03b1P\n\u2264 Pm=1\n=\u03b5\n|\u03c6(y) \u2212 f (yn )| =\n\u221e\n\u221e\nm=1 \u03c6m (y)\nm=1 \u03c6m (y)\n\nfor every y \u2208 B(yn , rn ), which, combined with the fact that |f (x) \u2212 f (yn )| \u2264 \u03b5/2 for\nx \u2208 B(yn , rn ), yields that\n|\u03c6(y) \u2212 f (x)| \u2264 \u03b5 + \u03b5/2,\nfor every x, y \u2208 B(yn , rn ), so (ii) is satisfied as well.\nNow let us have a look at the derivative of \u03c6. To this end let us introduce the\nauxiliary functions fn defined by\nPn\nn\n[\n\u03b1 (x)\u03c6k (x)\nPn k\nBi .\n, for all x \u2208\nfn (x) = k=1\nk=1 \u03c6k (x)\ni=1\n\nNotice that \u03c6 can be expressed as\n\n\u03c6(x) = lim fn (x),\nn\u2192\u221e\n\nthat the domains of the fn form an increasing\ntower of open sets whose union is X,\nSn\u22121\nand that each fn restricts to fn\u22121 on i=1\nBi \\ Bn . Moreover, for each x \u2208 X there\nis some open neighborhood Vx of x and some nx \u2208 N so that \u03c6(y) = fnx (y) for all\ny \u2208 Vx . In fact we have that\n\u03c6(x) = fn (x) for all x \u2208 Vn :=\n\nn\n[\n\nj=1\n\nS\u221e\n\n\u0001\n\nBj \\\n\n\u221e\n[\n\ni=n+1\n\n\u0001\nBi ,\n\nfor every n, the Vn are open, Vn \u2286 Vn+1 , and i=1 Vi = X, because the covering of\nX formed by the Bj is locally finite.\nHence, by looking at the derivatives of the functions fn we will get enough\ninformation\nSnabout the derivative of \u03c6.\nIf x \u2208 j=1 Bj then the expression for the derivative of fn is given by\nPn\nPn\nPn\nPn\n\u2032\n\u2032\n\u2032\nj=1 [\u03b1j (x)\u03c6j (x) + \u03b1j (x)\u03c6j (x)]\ni=1 \u03c6i (x) \u2212\nj=1 \u03c6j (x)\ni=1 \u03b1i (x)\u03c6i (x)\n\u2032\nPn\n.\nfn (x) =\n2\n( j=1 \u03c6j (x))\nS\nTherefore, for x \u2208 nj=1 Bj we have that fn\u2032 (x) = 0 if and only if\nn X\nn\nX\nj=1 i=1\n\nh\ni\n\u0001\n\u03c6i (x) \u03b1\u2032j (x)\u03c6j (x) + \u03b1j (x) \u2212 \u03b1i (x) \u03c6\u2032j (x) = 0.\n\n(13)\n\nBy inserting the expressions for the derivatives of \u03c6j and \u03b1j in equation (13), we\ncan express the condition fn\u2032 (x) = 0 as a nontrivial linear dependence link on the\nvectors (x \u2212 yj ), which yields that x is in the affine span of the points y1 , ..., yn .\nIndeed, we are going to prove the following.\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n13\n\nFact 2.6. If x \u2208 Cfn \u2229 Bn , then x \u2208 An := A[y1 , ..., yn ]. Moreover, for each n \u2208 N\nand for every finite sequence of positive integers k1 < k2 < ... < km < n we have\nthat\nm\n[\n\u0003\n\u0001\n\u0002\nBkj \u2286 A {y1 , ..., yn } \\ {yk1 , ..., ykm } .\nCf n \u2229 Bn \\\nj=1\n\nProof. As above, in all the subsequent calculations, we will identify the Hilbert space\nX with its dual X \u2217 , and the derivative of k * k2 with the mapping x 7\u2192 2x. To save\nnotation, let us simply write\n\u2202gn\n(kx \u2212 y1 k2 , ..., kx \u2212 yn k2 ) = \u03bc(n,j) ,\n\u2202tj\nand\na\u2032j (kx \u2212 yj k2 ) = \u03b7j .\n\nNotice that, according to (8) and (9) above, \u03bc(n,j) \u2265 0 for j = 1, ..., n \u2212 1, while\n\u03bc(n,n) \u2264 0; and \u03bc(n,n) 6= 0 provided x \u2208 Bn and x 6= yn ; on the other hand it is clear\nthat \u03b7j < 0 for all j unless x = yj (in which case \u03b7j = 0).\nAssuming x \u2208 Cfn \u2229 Bn , and taking into account the expression (10) for \u03c6\u2032j (x)\nand the fact that \u03b1\u2032j (x) = 2\u03b7j (x \u2212 yj ), we can write condition (13) above in the form\n2\n\nn X\nn\nX\nj=1 i=1\n\nj\nh\ni\n\u0001X\n\u03c6i (x) \u03b7j \u03c6j (x) (x \u2212 yj ) + \u03b1j (x) \u2212 \u03b1i (x)\n\u03bc(j,l) (x \u2212 yl ) = 0,\nl=1\n\nwhich in turn is equivalent (taking the common factors of each (x \u2212 yj ) together) to\nthe following one\n#\n\"\nn \u0010X\nn\nn\nn\n\u0011\nX\nX\nX\n\u0001\n\u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x) \u03bc(k,j) (x \u2212 yj ) = 0. (14)\n\u03c6i (x) +\n\u03b7j \u03c6j (x)\nj=1\n\ni=1\n\nk=j\n\ni=1\n\nNow notice that, if we can prove that at least one of the expressions multiplying\nthe (x \u2212 yj ) does not vanish then we are done; indeed, we will have that the vectors\nx \u2212 y1 , ..., x \u2212 yn are linearly dependent, which means that x belongs to the affine\nspan of the points y1 , ..., yn .\nSo let us check that not all of those expressions in (14) vanish. In fact we are\ngoing to see that at least one of the terms is strictly negative. We can obviously\nassume that x is not any of the points y1 , ..., yn (which are already in An ). In this\ncase we have that \u03bc(n,n) < 0 and \u03b7j < 0 for all j = 1, ..., n. For simplicity, we will\nonly make the argument in the case n = 3; giving a proof in a more general case\nwould be as little instructive as tedious to read.\nLet us first assume that \u03c6j (x) 6= 0 for j = 1, 2, 3. We begin by looking at the\nterm that multiplies (x \u2212 y3 ) in (14), that is\n\u03b23 := \u03b73 \u03c63 (x)\n\n3\nX\ni=1\n\n\u03c6i (x) +\n\n3\nX\ni=1\n\n\u0001\n\u03b13 (x) \u2212 \u03b1i (x) \u03c6i (x)\u03bc(3,3) .\n\n\f14\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\n\u0001\nP\nIf 3i=1 \u03b13 (x) \u2212 \u03b1i (x) \u03c6i (x) \u2265 0 we are done, since in this case we easily see that\n\u03b23 < 0 (remember that \u03bc(3,3) \u2264 0, \u03b73 < 0, and \u03c63 (x) > 0). Otherwise we have that\n3 \u0010\n\u0011\nX\n\u03b13 (x) \u2212 \u03b1i (x) \u03c6i (x) < 0,\ni=1\n\nand then we look at the term \u03b22 multiplying (x \u2212 y2 ) in (14), namely,\n!\n3\n3\n3 \u0010\n\u0011\nX\nX\nX\n\u03c6i (x) +\n\u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x) \u03bc(k,2) .\n\u03b22 := \u03b72 \u03c62 (x)\ni=1\n\nk=2\n\ni=1\n\nP3\n\n\u0001\nNow, since \u03bc(3,2) \u2265 0, we have i=1 \u03b13 (x) \u2212 \u03b1i (x) \u03c6i (x)\u03bc(3,2) \u2264 0, and on the other\n\u0001\nP\nP\nhand \u03b72 \u03c62 (x) 3i=1 \u03c6i (x) < 0 so that, if 3i=1 \u03b12 (x) \u2212 \u03b1i (x) \u03c6i (x) happens to be\n\u0001\nP\nnonnegative, then we also have 3i=1 \u03b12 (x)\u2212 \u03b1i (x) \u03c6i (x)\u03bc(2,2) \u2264 0, and then we are\ndone since \u03b22 , being a sum of negative terms (one of them strictly negative) must\nbe negative as well. Otherwise,\n3 \u0010\n\u0011\nX\n\u03b12 (x) \u2212 \u03b1i (x) \u03c6i (x)\ni=1\n\nis negative, and then we finally pass to the term \u03b21 multiplying (x \u2212 y1 ) in (14), that\nis,\n!\n3\n3\n3 \u0010\n\u0011\nX\nX\nX\n\u03c6i (x) +\n\u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x) \u03bc(k,1) .\n\u03b21 := \u03b71 \u03c61 (x)\ni=1\n\nk=1\n\ni=1\n\nHere, by the assumptions P\nwe have made so far\u0001and taking into account the signs of\n\u03bc(k,j) and \u03b7j , we see that 3i=1 \u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x)\u03bc(k,1) \u2264 0 for k = 2, 3. Having\n\u0001\nP\narrived at this point, it is sure that 3i=1 \u03b11 (x) \u2212 \u03b1i (x) \u03c6i (x) must be nonnegative\n\u0001\nP3\n(otherwise the numbers i=1 \u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x) should be strictly negative for all\nk = 1, 2, 3, which is impossible if one takes \u03b1k (x) to be the maximum of the \u03b1i (x)),\nand now we can deduce as before that \u03b21 < 0.\nFinally let us consider the case when some of the \u03c6i (x) vanish, for i = 1, 2\n(remember that \u03c63 (x) 6= 0 since x \u2208 B3 , the open support of \u03c63 ). From the\ndefinitions of \u03bc(k,j), gn and \u03c6n , it is clear that \u03bc(k,j) = 0 whenever \u03c6j (x) = 0 or\n\u03c6k (x) = 0, and bearing this fact in mind we can simplify equality (14) to a great\nextent by dropping all the terms that now vanish.\nIf \u03c61 (x) = \u03c62 (x) = 0 then (14) reads\n\u03c63 (x)2 \u03b73 (x \u2212 y3 ) = 0,\nwhich cannot happen since we assumed x 6= yj (this means that the only critical\npoint that fn can have in B3 \\ (B1 \u222a B2 ) is y3 ).\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n15\n\nIf \u03c61 (x) = 0 and \u03c62 (x) 6= 0 then the term \u03b21 accompanying (x \u2212 y1 ) in (14)\nvanishes, and hence (14) is reduced to\n#\n\"\n3 \u0010X\n3\n3\n3\n\u0011\nX\nX\nX\n\u03c6i (x) +\n(\u03b1k (x) \u2212 \u03b1i (x))\u03c6i (x) \u03bc(k,j) (x \u2212 yj ) = 0.\n\u03b7j \u03c6j (x)\nj=2\n\ni=2\n\nk=j\n\ni=2\n\nP3\n\nSince at least one of the numbers i=2 (\u03b1k (x)\u2212\u03b1i (x))\u03c6i (x), k = 2, 3, is nonnegative,\nthe same reasoning as in the first case allows us to conclude that either \u03b23 or \u03b22 is\nstrictly negative. Finally, in the case \u03c61 (x) 6= 0 and \u03c62 (x) = 0, it is \u03b22 that vanishes,\nand (14) reads \u03b21 (x \u2212 y1 ) + \u03b23 (x \u2212 y3 ) = 0, where\n\u03b23 = \u03b73 \u03c63 (x)\n\n3\nX\n\n\u03c6i (x) +\n\ni=1,i6=2\n\n3\n\u0010\n\u0011\nX\n\u03b13 (x) \u2212 \u03b1i (x) \u03c6i (x)\u03bc(3,3) ,\n\ni=1,i6=2\n\nand\n\u03b21 = \u03b71 \u03c61 (x)\n\n3\nX\n\ni=1,i6=2\n\n\u03c6i (x) +\n\n3\nX\n\n3\n\u0010\nX\n\nk=1,i6=2 i=1,i6=2\n\n\u0011\n\u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x)\u03bc(k,1) .\n\n\u0001\nP\nAgain, at least one of the numbers 3i=1,i6=2 \u03b1k (x) \u2212 \u03b1i (x) \u03c6i (x), k = 1, 3, is nonnegative, and the same argument as above applies.\nTo finish the proof of the proposition we will need even more accurate information\nabout the location of the critical points of fn . Bearing in mind the definition of the\nfunctions \u03c6j , whose open support are the Bj , it is clear that the above discussion\nshows, in fact, the following inclusions:\nCf3 \u2229 B3 \u2286 A[y1 , y2 , y3 ];\nCf3 \u2229 (B3 \\ B1 ) \u2286 A[y2 , y3 ], and Cf3 \u2229 (B3 \\ B2 ) \u2286 A[y1 , y3 ] ;\nCf3 \u2229 (B3 \\ (B1 \u222a B2 )) \u2286 A[y3 ].\nAn analogous argument in the case n \u2265 4 proves the second part of the statement\nof Fact 2.6.\nRemark 2.7. Note that from Fact 2.6 it follows that the set of critical points C\u03c6\nis locally compact, since it is closed and it is locally a bounded set of a finitedimensional affine subspace.\nSo far, all the properties we have shown about our functions fn are independent\nof the way we may choose the numbers \u03bbj in the definitions of Bj and \u03c6j . Now\nwe are going to be more accurate and see how we can select those numbers \u03bbj so\nas to have more control over the set C\u03c6 of critical points of \u03c6. Indeed, we want\nC\u03c6 not only to be locally compact, but to consist of a sequence\nof suitably isolated\nS\nsmall compact sets Kn . That is, we want to write C\u03c6 \u2286 \u221e\nK\n, where the Kn are\nn\nn=1\ncompact sets which are associated with open sets Un so that Kn \u2282 Un \u2282 B(yn , rn ),\nand Un \u2229 Um = \u2205 whenever n 6= m.\nWe will choose the numbers \u03bbn and the open sets Un inductively.\n\n\f16\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nFirst step. Define \u03c61 as above and put f1 (x) = \u03b11 (x) for all x \u2208 B1 = B(y1 , r1 ).\nSet \u03bc2 = 1/2, K1 = Cf1 \u2229 B1 = {y1 }, and U1 = B(y1 , \u03bc2 r1 ).\nSecond step. Fix \u03bb2 \u2208 (\u03bc2 , 1), and define B2 , \u03c62 , and f2 as above. According to\nFact 2.6, we have that\nCf2 \u2229 B2 \u2282 A[y1 , y2 ], and\nCf2 \u2229 (B2 \\ B1 ) \u2286 A[y2 ].\nWe claim that there must exist some \u03bc3 \u2208 (\u03bb2 , 1) so that Cf2 \u2229 B2 \u2229 B1 \u2282 B(y1 , \u03bc3 r1 ).\nOtherwise there would exist a sequence (xj ) in Cf2 \u2229B2 \u2229B1 so that kxj \u2212y1 k goes to\nr1 as j goes to \u221e. Since Cf2 \u2229 B2 \u2282 A[y1 , y2 ], we may assume, by compactness, that\nxj converges to some point x0 \u2208 \u2202B(y1 , r1 ) = S1 . If x0 \u2208 B(y2 , r2 ) then f2\u2032 (x0 ) = 0\n/ S1 by ii) of Lemma 2.4), so\n(by continuity of f2\u2032 ), and x0 6= y2 (because y2 \u2208\nf2\u2032 (x0 ) = \u03b1\u20322 (x0 ) 6= 0,\na contradiction. Therefore it must be the case that x0 \u2208 \u2202B(y2 , r2 ) = S2 . But then\nx0 \u2208 S1 \u2229 S2 \u2229 A[y1 , y2 ],\nand this contradicts Lemma 2.4.\nSo let us take \u03bc3 \u2208 (\u03bb2 , 1) so that Cf2 \u2229 B2 \u2229 B1 \u2282 B(y1 , \u03bc3 r1 ). In the case that\ny2 \u2208 B1 , let us simply set\nU2 = B(y2 , r2 ) \u2229 B(y1 , \u03bc3 r1 ) \\ B(y1 , \u03bc2 r1 ), and\nK2 = Cf2 \u2229 B2 \u2229 B1 \u2282 U2 .\nIn the case that y2 \u2208\n/ B1 , find \u03b42 \u2208 (0, \u03bc3 r2 ) so that B(y2 , \u03b42 ) \u2282 B2 \\ B1 , and set\n\u0002\n\u0003\nU2 = B(y2 , r2 ) \u2229 B(y1 , \u03bc3 r1 ) \\ B(y1 , \u03bc2 r1 ) \u222a B(y2 , \u03b42 ), and\nK2 = Cf2 \u2229 B2 \u2229 B1 \u222a {y2 } \u2282 U2 .\nClearly, we have that Cf2 \u2286 K1 \u222a K2 , and U1 \u2229 U2 = \u2205.\nThird step. Now choose \u03bb3 \u2208 (\u03bc3 , 1) with \u03bb3 > 1 \u2212 1/3, and define B3 , \u03c63 , and f3\nas above. We have that f3 and f2 coincide on (B1 \u222a B2 ) \\ B3 . On B3 , according to\nFact 2.6, we know that\nCf3 \u2229 B3 \u2229 B2 \u2229 B1 \u2286 A[y1 , y2 , y3 ];\nCf3 \u2229 (B3 \u2229 B2 \\ B1 ) \u2286 A[y2 , y3 ], and Cf3 \u2229 (B3 \u2229 B1 \\ B2 ) \u2286 A[y1 , y3 ] ; (15)\nCf3 \u2229 (B3 \\ (B1 \u222a B2 )) \u2286 A[y3 ].\nAgain, there must be some \u03bc4 \u2208 (\u03bb3 , 1) so that\nCf3 \u2229 B3 \u2229 (B1 \u222a B2 ) \u2282 B(y1 , \u03bc4 r1 ) \u222a B(y2 , \u03bc4 r2 ).\nOtherwise (bearing in mind the local compactness of A[y1 , y2 , y3 ]), there would exist\na sequence (xj ) in Cf3 \u2229 B3 \u2229 (B1 \u222a B2 ) so that (xj ) converges to some point x0 and\n(xj ) is not contained in B(y1 , \u03bc4 r1 )\u222aB(y2 , \u03bc4 r2 ) for any \u03bc4 < 1. Since a subsequence\nof (xj ) must be contained in one of the sets listed in (15), we deduce that the limit\npoint x0 must belong to one of the following sets:\nS2 \u2229 S1 \u2229 A[y1 , y2 , y3 ];\nS2 \u2229 A[y2 , y3 ] \\ B1 ;\nS1 \u2229 A[y1 , y3 ] \\ B2 ,\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n17\n\nNow we have two cases: either x0 \u2208 B3 , or x \u2208 \u2202B3 . If x0 \u2208 B3 then f3\u2032 (x0 ) = 0\n/ S1 \u222a S2 by (ii) of Lemma 2.4), so\n(by continuity of f3\u2032 ), and x0 6= y3 (because y3 \u2208\nit follows that\nf3\u2032 (x0 ) = \u03b1\u20323 (x0 ) 6= 0,\na contradiction. On the other hand, if x0 \u2208 \u2202B3 then x0 \u2208 S3 as well, and now one\nof the following must hold:\nx0 \u2208 S3 \u2229 S2 \u2229 S1 \u2229 A[y1 , y2 , y3 ];\nx0 \u2208 S3 \u2229 S2 \u2229 A[y2 , y3 ];\nx0 \u2208 S3 \u2229 S1 \u2229 A[y1 , y3 ],\nbut in any case this contradicts Lemma 2.4.\nHence we can take \u03bc4 \u2208 (\u03bb3 , 1) so that\nCf3 \u2229 B3 \u2229 (B1 \u222a B2 ) \u2282 B(y1 , \u03bc4 r1 ) \u222a B(y2 , \u03bc4 r2 ).\nNow two possibilities arise. If y3 \u2208 B1 \u222a B2 , let us define\n\"\n#\n# \" 2\n2\n[\n\\ [\nU3 = B(y3 , r3 ) \\\nB(yj , \u03bc4 rj ) ,\nB(yj , \u03bc3 rj )\nj=1\n\nj=1\n\nand\nK3 = Cf3 \u2229 B3 \u2229 (B1 \u222a B2 ) \u2282 U3 .\nIf y3 \u2208\n/ B1 \u222a B2 , since y3 \u2208\n/ S1 \u222a S2 we can find \u03b43 \u2208 (0, \u03bc4 r3 ) so that B(y3 , \u03b43 ) \u2286\nB3 \\ (B1 \u222a B2 ), and then we can set\n#\n\"\n2\n2\n\u0011 [\n\u0010\n\u0011 \\\u0010 [\n[\nB(y3 , \u03b43 ),\nB(yj , \u03bc4 rj )\nU3 = B(y3 , r3 ) \\\nB(yj , \u03bc3 rj )\nj=1\n\nj=1\n\nand\nK3 = [Cf3 \u2229 B3 \u2229 (B1 \u222a B2 )] \u222a {y3 } \u2282 U3 .\nNotice that U3 does not meet U1 or U2 , and Cf3 \u2286 K1 \u222a K2 \u222a K3 .\nN-th step. Suppose now that \u03bcj , \u03bbj , \u03c6j , Bj , fj , Kj , Uj have already been fixed for\nj = 1, ..., n (and also \u03bcn+1 has been chosen) in such a manner that fj agrees with\nfj\u22121 on (B1 \u222a ... \u222a Bj\u22121 ) \\ Bj , and Kj and Uj are of the form\nKj = Cfj \u2229 Bj \u2229 (B1 \u222a ... \u222a Bj\u22121 )\n\n(16)\n\n\u0014\n\u0010j\u22121\n\u0011\u0015 \\hj\u22121\ni\n[\n[\nUj = B(yj , rj ) \\\nB(yi , \u03bcj ri )\nB(yi , \u03bcj+1 ri )\n\n(17)\n\nand\n\ni=1\n\ni=1\n\nin the case that yj \u2208 B1 \u222a ... \u222a Bj\u22121 , and are of this form plus {yj } and B(yj , \u03b4j )\nrespectively when yj \u2208\n/ B1 \u222a...\u222aBj\u22121 ; assume additionally that Uj \u2229Uk = \u2205 whenever\nS\nj 6= k, that Cfj \u2286 ji=1 Ki , and that \u03bbj > 1\u22121/j. Let us see how we can choose \u03bbn+1 ,\n\u03bcn+2 , Kn+1 and Un+1 so that the extended bunch keeps the required properties.\n\n\f18\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nPick any \u03bbn+1 \u2208 (\u03bcn+1 , 1) so that \u03bbn+1 > 1 \u2212 1/(n + 1), and define \u03c6n+1 , Bn+1\nand fn+1 as above. We know that fn+1 agrees with fn on the set (B1 \u222a...\u222aBn )\\Bn+1 .\nOn Bn+1 , according to Fact 2.6, we have that\nCfn+1 \u2229 Bn+1 \\\n\nm\n[\n\nj=1\n\n\u0003\n\u0001\n\u0002\nBkj \u2286 A {y1 , ..., yn+1 } \\ {yk1 , ..., ykm }\n\nfor every finite sequence of integers 0 < k1 < k2 < ... < km < n + 1.\nWe claim that there exists some \u03bcn+2 \u2208 (\u03bbn+1 , 1) so that\nCfn+1 \u2229 Bn+1 \u2229 (B1 \u222a ... \u222a Bn ) \u2286\n\nn\n[\n\nB(yi , \u03bcn+2 ri ).\n\ni=1\n\nOtherwise there would exist a finite (possibly empty!) sequence of integers 0 < k1 <\nk2 < ... < km < n + 1, and a sequence (xj )\u221e\nj=1 contained in\n\"\n#\nl\nm\n\u0011\n\u0010\\\n\u0010[\n\u0011\nB ij\nBkj \u2286 A[yi1 , ..., yil , yn+1 ]\nCfn+1 \u2229 Bn+1 \u2229\n\\\nj=1\n\nj=1\n\n(where i1 , ..., il are the positive integers less than or equal to n that are left when we\nremove\nSmk1 , ..., km ), such that (xj ) converges to some point x0 \u2208 Si1 \u2229 ... \u2229 Sil with\nx0 \u2208\n/ j=1 Bkj .\n\u2032\n\u2032\nIf x0 \u2208 Bn+1 then fn+1\n(x0 ) = 0 (by continuity of fn+1\n), and x0 6= yn+1 , so we\neasily see that\n\u2032\n(x0 ) = \u03b1\u2032n+1 (x0 ) 6= 0,\nfn+1\na contradiction.\nIf x0 \u2208 \u2202Bn+1 then x0 \u2208 Sn+1 as well, and in this case we have\nx0 \u2208 Si1 \u2229 ... \u2229 Sil \u2229 Sn+1 \u2229 A[yi1 , ..., yil , yn+1 ],\nbut this contradicts Lemma 2.4.\nTherefore we may take \u03bcn+2 \u2208 (\u03bbn+1 , 1) so that\nCfn+1 \u2229 Bn+1 \u2229 (B1 \u222a ... \u222a Bn ) \u2286\n\nn\n[\n\nB(yi , \u03bcn+2 ri ).\n\ni=1\n\nS\nAs before, now we face two possibilities. If yn+1 \u2208 ni=1 Bi , let us define\n#\n# \"n\n\"\nn\n[\n\\ [\nB(yi , \u03bcn+2 ri ) ,\nB(yi , \u03bcn+1 ri )\nUn+1 = B(yn+1 , rn+1 ) \\\ni=1\n\ni=1\n\nand\n\nKn+1 = Cfn+1 \u2229 Bn+1 \u2229 (B1 \u222a ... \u222a Bn ).\nSn\n\nIf yn+1 \u2208\n/ i=1 Bi , since\n/ Si we may find \u03b4n+1 \u2208 (0, \u03bcn+2 rn+1 ) so that\nS yn+1 \u2208\nB(yn+1 , \u03b4n+1 ) \u2286 Bn+1 \\ ni=1 Bi , and then we can add this ball to the above Un+1 ,\nand the point {yn+1 } to that Kn+1 , in order to obtain sets Un+1 , Kn+1 with the\nrequired properties.\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n19\n\nBy induction, the sequences (\u03c6n ), (fn ), (Un ), (Kn ) are well defined and satisfy\nthe above properties.\nFrom the construction it is clear that Un \u2229 Um = \u2205 whenever n 6= m, and\nn\n[\nKj\nCf n \u2286\nj=1\n\nfor all n. Note also that Un \u2286 B(yn , rn ) for all n, and limn\u2192\u221e \u03bbn = 1.\nAs observed before,\nP\u221e\n\u03b1 (x)\u03c6n (x)\nP\u221e n\n= lim fn (x)\n\u03c6(x) = n=1\nn\u2192\u221e\nn=1 \u03c6n (x)\n\nand, moreover, for each x \u2208 X there exists an open neighborhood Vx of x and some\nnx \u2208 N so that \u03c6(y) = fnx (y) for\nS\u221eall y \u2208 Vx . Bearing these facts in mind, it is\nimmediately checked that C\u03c6 \u2286 n=1 Kn . Now it is clear that \u03c6 satisfies (a), (b)\nand (d) in the statement of Proposition 2.1. On the other hand, remember that (c)\nis a consequence of fact 2.5.\nRemark 2.8. Let us say a few words as to the way one has to modify the above\nproofs in order to establish Theorem 1.1 when \u03b5 is a positive continuous function. At\nthe beginning of the proof of Proposition 2.1, before choosing the \u03b4x , we have to take\nsome number \u03b1x > 0 so that |\u03b5(y)\u2212\u03b5(x)| \u2264 \u03b5(x)/2 whenever ky \u2212xk \u2264 2\u03b1x and then\nwe can find some \u03b4x \u2264 \u03b1x so that |f (y) \u2212 f (x)| \u2264 \u03b5(x)/4 whenever y \u2208 B(x, 2\u03b4x ).\nEquation (7) above reads now\n|f (y) \u2212 f (yn )| \u2264 \u03b5(yn )/2\nfor all y \u2208 B(yn , rn ). Some obvious changes must be made in the definition of the\nfunctions an and \u03b1n . Fact 2.5 and Proposition 2.1(c) can be reduced to saying that\n|\u03c6(y) \u2212 f (x)| \u2264 2\u03b5(yn )\nfor all x, y \u2208 B(yn , rn ) and each n \u2208 N. Finally, at the end of the proof of Theorem\n1.1 we get that\n|\u03c8(x) \u2212 f (x)| \u2264 2\u03b5(yn )\nwhenever x, y \u2208 B(yn , rn ); now, taking into account that rn \u2264 \u03b1yn , we have that\n\u03b5(yn ) \u2264 2\u03b5(x) for all x \u2208 B(yn , rn ). Hence, by combining these inequalities, we\nobtain that |\u03c8(x) \u2212 f (x)| \u2264 4\u03b5(x) for all x \u2208 X.\nProof of Theorem 2.2\nThe proof of Theorem 2.2 is done in two steps. The first one uses the noncomplete\nnorm technique of deleting compact sets introduced in [1, 14]. We only sketch the\nguidelines of this part, referring to the proof of Theorem 2.1 in [1] for the details.\nWe will show that a mapping of the form G(x) = x + p(f (x)), x \u2208 X \\ K, for a\ncertain function f : X \u2192 [0, +\u221e) with f \u22121 (K) = 0 and a path p : (0, +\u221e) \u2192 X,\nestablishes a C \u221e diffeomorphism between X \\ K and X. The map G can be viewed\nas a small perturbation of the identity. In order that the perturbation p \u25e6 f be\n\n\f20\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nsmall, p and f must satisfy some Lipschitzian-type conditions with respect to a\ncertain distance induced by a smooth noncomplete norm \u03c9. Lemma 2.10 provides\nus with a required function f (x) which can be viewed as a smooth substitute for the\n\u03c9-distance function from x to the set K. Lemma 2.11 gives us a required path p(t)\nwhich avoids compact sets and gets lost in the infinitely many dimensions of X as\nt goes to 0; by pushing away \u03c9-neighborhoods of K along the path p, the mapping\nG\u22121 will make K disappear. By combining all these tools, the C \u221e diffeomorphism\nG can be constructed in such a way that G restricts to the identity outside a given\n\u03c9-neighborhood of K.\nSo far this is the same negligibility scheme as in [1, 14]. The second step of\nthe proof is to construct a self-diffeomorphism F of X that fixes the compact set\nK and takes the open set U (which in general is not a \u03c9-neighborhood of K) onto\na \u03c9-neighborhood of K, and then to adjust the definition of G so that it restricts\nto the identity outside F (U ). If we succeed in doing so then the composition h =\nF \u22121 \u25e6 G\u22121 \u25e6 F will define a diffeomorphism from X onto X \\ K with the property\nthat h is the identity outside U .\nDefinition 2.9. Let (X, k * k) be a Banach space. We say that a norm \u03c9 : X \u2212\u2192\n[0, +\u221e) is a C p smooth noncomplete norm on X provided \u03c9 is C p smooth (with\nrespect to k * k) away from the origin, but the norm \u03c9 is not equivalent to k * k.\nGeometrically speaking, this means that the unit ball of \u03c9 is a symmetric C p smooth\nconvex body that contains no rays and yet is unbounded. We define the (open) \u03c9-ball\nof center x and radius r as\nB\u03c9 (x, r) = {y \u2208 X : \u03c9(y \u2212 x) < r},\nand the \u03c9-distance from x to A as\nd\u03c9 (x, A) = inf{\u03c9(x \u2212 z) : z \u2208 A}.\nWe say that a set V is an \u03c9-neighborhood of a subset A of X provided that for every\nx \u2208 A there exists some r > 0 so that B\u03c9 (x, r) \u2286 V .\nWe next state the two facts we need for the first part of the proof. All the omitted\nproofs can be found in [1, 14].\nLemma 2.10. Let \u03c9 : X \u2212\u2192 [0, +\u221e) be a C \u221e smooth noncomplete norm in the\nHilbert space X, and let K be a compact subset of X. Then, for each \u03b5 > 0 there\nexists a continuous function f = f\u03b5 : X \u2212\u2192 [0, +\u221e) such that\n1. f is C \u221e smooth on X \\ K;\n2. f (x) \u2212 f (y) \u2264 \u03c9(x \u2212 y) for every x, y \u2208 X;\n3. f \u22121 (0) = K;\n4. inf{f (x) | d\u03c9 (x, K) \u2265 \u03b7} > 0 for every \u03b7 > 0;\n5. f is constant on the set {x \u2208 X | d\u03c9 (x, K) \u2265 \u03b5}.\nLemma 2.11. Let \u03c9 be a continuous noncomplete norm in the Hilbert space X.\nThen, for every \u03b4 > 0, there exists a C \u221e path p = p\u03b4 : (0, +\u221e) \u2212\u2192 X such that\n1. \u03c9(p(\u03b1) \u2212 p(\u03b2)) \u2264 12 (\u03b2 \u2212 \u03b1) if \u03b2 \u2265 \u03b1 > 0;\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n21\n\n2. For every compact set A \u2282 X there exists t0 > 0 such that\ninf{\u03c9(z \u2212 p(t)) | 0 < t \u2264 t0 , z \u2208 A} > 0;\n3. p(t) = 0 if and only if t \u2265 \u03b4.\nThe following lemma is the key to the second step of the proof, allowing us to\nimprove, at least for the Hilbert case, the negligibility scheme introduced in [1, 14].\nNote also that the norm \u03c9 that we will use in the first step is in fact the one provided\nby this lemma.\nLemma 2.12. Let (X, k * k) be an infinite-dimensional Hilbert space (with its usual\nhilbertian norm). Then, for every compact set K and every open set U so that K \u2282\nU , there exist a C \u221e diffeomorphism F : X \u2212\u2192 X and a C \u221e smooth noncomplete\nnorm \u03c9 on X such that F (K) = K and F (U ) is an \u03c9-neighborhood of K.\nProof. Since K is compact and U is an open neighborhood of K we can find points\nx1 , ..., xn \u2208 K and positive numbers r1 , ..., rn so that\nn\nn\n[\n[\nBk.k (xi , 2ri ) \u2286 U.\n(18)\nBk.k (xi , ri ) \u2282\nK\u2282\ni=1\n\ni=1\n\nWe may assume that 0 \u2208 K. Let Y = span{x1 , ..., xn }, and write X = Y \u2295 Z,\nwhere Z is an infinite-dimensional space of finite codimension that is orthogonal to\nY . Since the norm k * k is hilbertian we have that\n\u00011/2\nkxk = k(y, z)k = kyk2 + kzk2\n\nfor every x = (y, z) \u2208 X = Y \u2295 Z.\nTake a normalized basic sequence (zi ) in Z so that the vectors zi are pairwise\northogonal, and let W be the closed linear subspace spanned by (zi ). Let us write\nZ = W \u2295 V , where V is the orthogonal complement of W in Z. Define \u03c9Z : Z \u2212\u2192\n[0, +\u221e) by\n\u00151/2\n\u0014X\n\u221e \u0010\n< w, zj > \u00112\n2\n+ kvk\n,\n\u03c9Z (w, v) =\n2j\nj=1\n\nwhere <, > denotes the inner product on X. Then \u03c9Z is a C \u221e smooth noncomplete\nnorm on Z, as it is easily checked. We also have that \u03c9Z (z) \u2264 kzk for every z \u2208 Z.\nIf we define now \u03c9 : X = Y \u2295 Z \u2212\u2192 [0, +\u221e) by\n\u00011/2\n\u03c9(x) = \u03c9(y, z) = kyk2 + \u03c9Z (z)2\n,\n\nit is clear that \u03c9 is a C \u221e smooth noncomplete norm on X (note that in fact both\n\u03c9Z and \u03c9 are real-analytic, as they are prehilbertian).\nFor each i = 1, ..., n, let us now pick C \u221e smooth functions \u03b8i : R \u2212\u2192 [0, 1] so\nthat \u03b8i is nondecreasing and \u03b8i\u22121 (0) = (\u2212\u221e, ri ], while \u03b8i\u22121 (1) = [2ri , +\u221e). Define\nthen g : X = Y \u2295 Z \u2212\u2192 [0, 1] by\nn\nY\n\u03b8i (kx \u2212 xi k)\ng(y, z) = g(x) =\ni=1\n\n\f22\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\nfor all x \u2208 X. Note that the function g is C \u221e smooth on X and has the following\nproperties:\n(i) the function t 7\u2192\nSg(y, tz), t \u2265 0, is nondecreasing, for all (y, z) \u2208 X = Y \u2295 Z;\n(ii) g(x) = 0 if x \u2208 ni=1 Bk.k (xi , ri );\nS\n(iii) g(x) = 1 whenever x \u2208\n/ ni=1 Bk.k (xi , 2ri ).\n\nThe first property is merely a consequence of the definition of g and the fact that\nthe function t 7\u2192 k((y \u2212 xi , tz)k, t \u2265 0, is increasing for every (y, z) \u2208 Y \u2295 Z and\nevery i = 1, ..., n. Note that here we are using that k * k is a hilbertian norm; this\nproperty is not necessarily true for other norms.\nLet us define our mapping F : X = Y \u2295 Z \u2212\u2192 X by\n\u0012 \u0010\n\u0011 \u0013\nkzk\n+ 1 \u2212 g(x) z .\nF (x) = F (y, z) = y, g(x)\n\u03c9Z (z)\n\nClearly, F is C \u221e smooth. By using the facts that the functions t 7\u2192 g(y, tz), t \u2265 0,\nare nondecreasing, and that \u03c9Z (z) \u2264 kzk for every z \u2208 Z, y \u2208 Y , it is not difficult\nto see that F is a bijection from every ray {(y, tz) : t \u2265 0} onto itself, and therefore\nF is one-to-one from X onto X. Moreover, a standard application of the implicit\nfunction theorem allows to show that F \u22121 is C \u221e smooth as well, and hence F is a\ndiffeomorphism.\nFinally, by the definitions of g and\nS F , it is clear that F (K) = K. In fact, F\nrestricts to the identity on the set ni=1 Bk.k (xi , ri ), which contains K, because g\ntakes the value 0 on this set. S\nOn the other hand, if x \u2208\n/ ni=1 Bk.k (xi , 2ri ) we have g(x) = 1, so F (y, z) =\nkzk\nz), and therefore\n(y, \u03c9(z)\n\n\u0012\n\u0010\n\u0010 kzk \u00112 \u00131/2\nkzk \u0011\n\u03c9(F (x) \u2212 xj ) = \u03c9 y \u2212 xj ,\nz = ky \u2212 xj k2 + \u03c9\nz\n\u03c9(z)\n\u03c9(z)\n\u00011/2\n= ky \u2212 xj k2 + kzk2\n= kx \u2212 xj k \u2265 2rj\n\nfor each j = 1, ..., n, which means that F (x) \u2208\n/ \u222ani=1 B\u03c9 (xi , 2ri ). Therefore, considering (18), and bearing in mind that, since \u03c9(x) \u2264 kxk, the \u03c9-balls are larger than\nthe k * k-balls, we deduce that\nK\u2282\n\nn\n[\n\ni=1\n\nB\u03c9 (xi , ri ) \u2282\n\nn\n[\n\ni=1\n\nB\u03c9 (xi , 2ri ) \u2286 F\n\nn\n[\n\ni=1\n\n\u0001\nBk.k (xi , 2ri ) \u2286 F (U );\n\nin particular we see that F (U ) includes a finite union of \u03c9-balls which in turn includes\nK, and this shows that F (U ) is a \u03c9-neighborhood of K.\nLet us now see how we can finish the proof of Theorem 2.2. First, for the given\nsets K \u2282 U , take a non-complete norm \u03c9 and a diffeomorphism F : X \u2212\u2192 X with\nthe properties of Lemma 2.12. Since F (U ) is a \u03c9-neighborhood of K and K is also\n\n\fSMOOTH APPROXIMATION BY FUNCTIONS WITH NO CRITICAL POINTS\n\n23\n\ncompact in (X, \u03c9), we can write\nn\nn\n[\n[\nB\u03c9 (xi , 2ri ) \u2286 F (U )\nB\u03c9 (xi , ri ) \u2286\nK\u2282\ni=1\n\ni=1\n\nfor some points x1 , ..., xn \u2208 K and positive numbers r1 , ..., rn (in fact such an\nexpression appears in the proof of 2.12). This in turn implies that d\u03c9 (x, K) \u2265\nmin{r1 , ..., rn } > 0 whenever x \u2208 X \\ F (U ), as it is easily seen.\nNow, for \u03b5 = min{r1 , ..., rn }, we can choose a function f = f\u03b5 satisfying the\nproperties of Lemma 2.10 (for the already selected \u03c9). Assuming f (x) = \u03b4 > 0\nwhenever d\u03c9 (x, K) \u2265 \u03b5, select a path p = p\u03b4 from Lemma 2.11. With these choices,\nfor every x \u2208 X \\ K, define\nG(x) = x + p(f (x)).\nExactly as in the proof of Theorem 2.1 in [1], it can be checked that G is a C \u221e\ndiffeomorphism from X \\ K onto X, with the property that G(x) = x whenever\nd\u03c9 (x, K) \u2265 \u03b5. In particular, since d\u03c9 (x, K) \u2265 \u03b5 = min{r1 , ..., rn } whenever x \u2208\nX \\ F (U ), we have that G restricts to the identity outside F (U ).\nFinally, let us define h = F \u22121 \u25e6 G\u22121 \u25e6 F . Taking into account the properties of\nthe diffeomorphisms F : X \u2212\u2192 X and G : X \\ K \u2212\u2192 X, it is clear that h is a C \u221e\ndiffeomorphism from X onto X \\ K so that h is the identity outside U .\nAcknowledgements\nWe wish to thank Pilar Cembranos, Jos\u00e9 Mendoza, Tijani Pakhrou and Ra\u00fal Romero,\nwho helped us to realize that Fact 2.6 fails when the norm is not hilbertian.\nReferences\n[1] D. Azagra and T. Dobrowolski, Smooth negligibility of compact sets in infinite-dimensional\nBanach spaces, with applications, Math. Ann. 312 (1998), no. 3, 445-463.\n[2] D. Azagra and M. Jim\u00e9nez-Sevilla, The failure of Rolle's Theorem in infinite dimensional\nBanach spaces, J. Funct. Anal. 182 (2001), 207\u2013226.\n[3] S. M. Bates, On the image size of singular maps. I., Proc. Amer. Math. Soc. 114 (1992), no.\n3, 699-705.\n[4] S. M. Bates, On the image size of singular maps. II., Duke Math. J. 68 (1992), no. 3, 463-476.\n[5] S. M. Bates, Toward a precise smoothness hypothesis in Sard's theorem, Proc. Amer. Math.\nSoc. 117 (1993), no. 1, 279-283.\n[6] S. M. Bates, On smooth rank-1 mappings of Banach spaces onto the plane, J. Differential Geom.\n37 (1993), no. 3, 729-733.\n[7] S. M. Bates, On smooth non-linear surjections of Banach spaces, Israel J. Math. 100 (1997).\n209-220.\n[8] C. Bessaga, Every infinite-dimensional Hilbert space is diffeomorphic with its unit sphere, Bull.\nAcad. Polon. Sci., S\u00e9r. Sci. Math. Astr. et Phys.14 (1966), pp. 27-31.\n[9] C. Bessaga and A. Pelczynski, Selected topics in infinite-dimensional topology, Monografie\nMatematyczne, Tom. 58 Polish Scientific Publishers, Warszawa, 1975.\n[10] H. Cartan, Calcul diff\u00e9rentiel, Hermann, Paris 1967.\n[11] R. Deville, G. Godefroy, and V. Zizler, Smoothness and renormings in Banach spaces, vol. 64,\nPitman Monographs and Surveys in Pure and Applied Mathematics, Longman Scientific &\nTechnical, Harlow, 1993.\n\n\f24\n\nDANIEL AZAGRA AND MANUEL CEPEDELLO BOISO\n\n[12] J. Eells and K.D. Elworthy, Open embeddings of certain Banach manifolds, Ann. of Math. 91\n(1970), 465-485.\n[13] J. Eells and J. McAlpin, An approximate Morse-Sard theorem, J. Math. Mech. 17 (1967/1968),\n1055-1064.\n[14] T. Dobrowolski, Smooth and R-analytic negligibility of subsets and extension of homeomorphism\nin Banach spaces, Studia Math. 65 (1979), 115-139.\n[15] I. Kupka, Counterexample to the Morse-Sard theorem in the case of infinite-dimensional manifolds, Proc. Amer. Math. Soc. 16 (1965), 954-957.\n[16] A. Morse, The behavior of a function on its critical set, Annals of Math. 40 (1939), 62-70.\n[17] A. Sard, The measure of the critical values of differentiable maps, Bull. Amer. Math. Soc. 48\n(1942), 883-890.\n[18] A. Sard, Images of critical sets, Annals of Math. 68 (1958), 247-259.\n[19] A. Sard, Hausdorff measure of critical images on Banach manifolds, Amer. J. Math. 87 (1965),\n158-174.\n[20] S. Smale, An infinite dimensional version of Sard's theorem, Am. J. Math. 87 (1965), 861-866.\n[21] H. Whitney, A function not constant on a connected set of critical points, Duke Math. J. 1\n(1935), 514-517.\n\nDepartamento de An\u00e1lisis Matem\u00e1tico. Facultad de Ciencias Matem\u00e1ticas. Universidad Complutense. 28040 Madrid, SPAIN\nDepartamento de An\u00e1lisis Matem\u00e1tico. Universidad de Sevilla. Sevilla, SPAIN.\nE-mail addresses: daniel azagra@mat.ucm.es, mcb@us.es\n\n\f"}