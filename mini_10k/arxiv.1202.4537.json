{"id": "http://arxiv.org/abs/1202.4537v1", "guidislink": true, "updated": "2012-02-21T06:44:15Z", "updated_parsed": [2012, 2, 21, 6, 44, 15, 1, 52, 0], "published": "2012-02-21T06:44:15Z", "published_parsed": [2012, 2, 21, 6, 44, 15, 1, 52, 0], "title": "Sampled-Data and Harmonic Balance Analyses of Average Current-Mode\n  Controlled Buck Converter", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1202.6116%2C1202.5872%2C1202.1762%2C1202.2844%2C1202.4586%2C1202.3106%2C1202.1410%2C1202.4537%2C1202.3764%2C1202.4568%2C1202.0040%2C1202.6065%2C1202.2220%2C1202.4864%2C1202.4550%2C1202.2226%2C1202.0946%2C1202.5501%2C1202.1369%2C1202.0755%2C1202.0976%2C1202.2927%2C1202.2242%2C1202.2816%2C1202.0118%2C1202.5164%2C1202.6628%2C1202.6019%2C1202.1728%2C1202.2136%2C1202.1977%2C1202.3363%2C1202.5077%2C1202.3580%2C1202.2977%2C1202.5241%2C1202.4265%2C1202.3692%2C1202.0204%2C1202.3950%2C1202.1468%2C1202.2394%2C1202.0410%2C1202.4677%2C1202.6346%2C1202.6175%2C1202.0121%2C1202.0051%2C1202.2788%2C1202.5469%2C1202.1092%2C1202.1160%2C1202.5382%2C1202.5671%2C1202.1102%2C1202.0355%2C1202.1352%2C1202.4895%2C1202.1283%2C1202.3483%2C1202.3768%2C1202.5590%2C1202.4474%2C1202.2751%2C1202.5376%2C1202.3485%2C1202.3328%2C1202.1910%2C1202.0508%2C1202.3550%2C1202.3216%2C1202.1420%2C1202.4911%2C1202.1038%2C1202.1877%2C1202.4404%2C1202.2713%2C1202.2113%2C1202.6599%2C1202.1034%2C1202.1220%2C1202.2377%2C1202.6042%2C1202.2206%2C1202.0083%2C1202.3428%2C1202.3783%2C1202.5201%2C1202.4971%2C1202.4532%2C1202.1382%2C1202.5601%2C1202.0084%2C1202.1658%2C1202.3917%2C1202.6292%2C1202.0228%2C1202.4652%2C1202.1158%2C1202.4033%2C1202.2173&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Sampled-Data and Harmonic Balance Analyses of Average Current-Mode\n  Controlled Buck Converter"}, "summary": "Dynamics and stability of average current-mode control of buck converters are\nanalyzed by sampled-data and harmonic balance analyses. An exact sampled-data\nmodel is derived. A new continuous-time model \"lifted\" from the sampled-data\nmodel is also derived, and has frequency response matched with experimental\ndata reported previously. Orbital stability is studied and it is found\nunrelated to the ripple size of the current-loop compensator output. An\nunstable window of the current-loop compensator pole is found by simulations,\nand it can be accurately predicted by sampled-data and harmonic balance\nanalyses. A new S plot accurately predicting the subharmonic oscillation is\nproposed. The S plot assists pole assignment and shows the required ramp slope\nto avoid instability.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1202.6116%2C1202.5872%2C1202.1762%2C1202.2844%2C1202.4586%2C1202.3106%2C1202.1410%2C1202.4537%2C1202.3764%2C1202.4568%2C1202.0040%2C1202.6065%2C1202.2220%2C1202.4864%2C1202.4550%2C1202.2226%2C1202.0946%2C1202.5501%2C1202.1369%2C1202.0755%2C1202.0976%2C1202.2927%2C1202.2242%2C1202.2816%2C1202.0118%2C1202.5164%2C1202.6628%2C1202.6019%2C1202.1728%2C1202.2136%2C1202.1977%2C1202.3363%2C1202.5077%2C1202.3580%2C1202.2977%2C1202.5241%2C1202.4265%2C1202.3692%2C1202.0204%2C1202.3950%2C1202.1468%2C1202.2394%2C1202.0410%2C1202.4677%2C1202.6346%2C1202.6175%2C1202.0121%2C1202.0051%2C1202.2788%2C1202.5469%2C1202.1092%2C1202.1160%2C1202.5382%2C1202.5671%2C1202.1102%2C1202.0355%2C1202.1352%2C1202.4895%2C1202.1283%2C1202.3483%2C1202.3768%2C1202.5590%2C1202.4474%2C1202.2751%2C1202.5376%2C1202.3485%2C1202.3328%2C1202.1910%2C1202.0508%2C1202.3550%2C1202.3216%2C1202.1420%2C1202.4911%2C1202.1038%2C1202.1877%2C1202.4404%2C1202.2713%2C1202.2113%2C1202.6599%2C1202.1034%2C1202.1220%2C1202.2377%2C1202.6042%2C1202.2206%2C1202.0083%2C1202.3428%2C1202.3783%2C1202.5201%2C1202.4971%2C1202.4532%2C1202.1382%2C1202.5601%2C1202.0084%2C1202.1658%2C1202.3917%2C1202.6292%2C1202.0228%2C1202.4652%2C1202.1158%2C1202.4033%2C1202.2173&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Dynamics and stability of average current-mode control of buck converters are\nanalyzed by sampled-data and harmonic balance analyses. An exact sampled-data\nmodel is derived. A new continuous-time model \"lifted\" from the sampled-data\nmodel is also derived, and has frequency response matched with experimental\ndata reported previously. Orbital stability is studied and it is found\nunrelated to the ripple size of the current-loop compensator output. An\nunstable window of the current-loop compensator pole is found by simulations,\nand it can be accurately predicted by sampled-data and harmonic balance\nanalyses. A new S plot accurately predicting the subharmonic oscillation is\nproposed. The S plot assists pole assignment and shows the required ramp slope\nto avoid instability."}, "authors": ["Chung-Chieh Fang"], "author_detail": {"name": "Chung-Chieh Fang"}, "author": "Chung-Chieh Fang", "links": [{"title": "doi", "href": "http://dx.doi.org/10.1002/cta.1989", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/1202.4537v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1202.4537v1", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "Submitted to International Journal of Circuit Theory and Applications\n  on August 9, 2011; Manuscript ID: CTA-11-0168", "arxiv_primary_category": {"term": "cs.SY", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "cs.SY", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.DS", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "nlin.CD", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1202.4537v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1202.4537v1", "journal_reference": "Some parts of this manuscript are published in International\n  Journal of Circuit Theory and Applications, 43(8), pp. 995-1014, Aug. 2015", "doi": "10.1002/cta.1989", "fulltext": "Sampled-Data and Harmonic Balance Analyses of Average\nCurrent-Mode Controlled Buck Converter\n\narXiv:1202.4537v1 [cs.SY] 21 Feb 2012\n\nChung-Chieh Fang\n\n\u2217\n\nSubmitted to International Journal of Circuit Theory and Applications on August 9, 2011\nManuscript ID: CTA-11-0168\n\nAbstract\nDynamics and stability of average current-mode control of buck converters are analyzed by sampleddata and harmonic balance analyses. An exact sampled-data model is derived. A new continuoustime model \"lifted\" from the sampled-data model is also derived, and has frequency response\nmatched with experimental data reported previously. Orbital stability is studied and it is found\nunrelated to the ripple size of the current-loop compensator output. An unstable window of the\ncurrent-loop compensator pole is found by simulations, and it can be accurately predicted by\nsampled-data and harmonic balance analyses. A new S plot accurately predicting the subharmonic\noscillation is proposed. The S plot assists pole assignment and shows the required ramp slope to\navoid instability.\nKEY WORDS: DC-DC power conversion, sampled-data systems, harmonic balance analysis, av-\n\nerage current-mode control, modeling, small-signal analysis\n\n\u2217\nC.-C Fang is with Advanced Analog Technology, 2F, No. 17, Industry E. 2nd Rd., Hsinchu 300, Taiwan, Tel:\n+886-3-5633125 ext 3612, Email: fangcc3@yahoo.com\n\n1\n\n\fContents\n1 Introduction\n\n3\n\n2 Operation and Instability of ACMC\n\n4\n\n3 Exact General Sampled-Data Analysis\n\n6\n\n3.1\n\nExact Switching Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n\n6\n\n3.2\n\nLifted Model with Improved Frequency Response . . . . . . . . . . . . . . . . . . . .\n\n7\n\n3.3\n\n\"S Plot\" Accurately Predicts Pole Location and PDB . . . . . . . . . . . . . . . . .\n\n8\n\n4 Modeling of ACMC Buck Converter\n\n9\n\n4.1\n\nSampled-Data Analysis\n\n. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n\n9\n\n4.2\n\nAverage Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .\n\n9\n\n4.3\n\nHarmonic Balance Analysis and the S Plots in Frequency Forms . . . . . . . . . . .\n\n9\n\n5 Illustrative Examples\n\n10\n\n5.1\n\nMany Useful Usages of the S Plot . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10\n\n5.2\n\nThe Sample-Data Model Accurately Predicts the Unstable Window of \u03c9p . . . . . . 12\n\n5.3\n\nThe Lifted Model Predicts PDB and Has Matched Frequency Response . . . . . . . 14\n\n6 Conclusion\n\n18\n\n2\n\n\f1\n\nIntroduction\n\nSubharmonic oscillation is a fast-scale instability commonly seen in DC-DC converters. The instability is generally associated with period-doubling bifurcation (PDB) [1]. Sampled-data models [2\u20137]\ncan accurately predict PDB, which occurs when a sampled-data pole is at -1 in the complex plane.\nA sampled-data pole p, not negative real, can be mapped to a corresponding pole ln(p)/T in the average model. However, there is no single corresponding pole which can be mapped from a negative\nreal sampled-data pole [8]. That explains why some average models cannot predict PDB.\nIn the past research [9\u201317], frequency responses of the average models show good matches\nwith experimental data. However, these experiments are made under specific conditions when the\nsampled-data poles are not negative real. The deficiency or inaccuracy of the average model will be\npronounced if there exists a negative real sampled-data pole. This deficiency can be eliminated by\nmapping (\"lifting\") the negative real pole to a pair of complex poles in the right half plane (RHP)\nand a zero [8], which increases the system dimension. With an additional pole, the lifted model\nhas additional degree of freedom to have matched frequency response. This approach is adopted in\nthis paper. An exact sampled-data model is first derived, then lifted to a continuous-time model.\nThe lifted model is more accurate than the average model, and can predict PDB.\nFor a converter under peak current-mode control (PCMC), the current loop is one-dimensional.\nBy considering the sampling effect and increasing the current loop dimension to two, improved average models [18, 19] can accurately predict PDB. In essence, the accuracy is improved by \"lifting\"\nthe sampled-data model to increase the system dimension. In contrast, any improvement in the\naverage model without increasing the system dimension is deficient in predicting PDB. The oscillation predicted by [20] is actually a Neimark bifurcation (slow-scale instability), not a PDB, because\nthe predicted oscillation frequency is not half the switching frequency. A single continuous-time\npole cannot cause system oscillation, while a single negative real sampled-data pole can. A pair of\nRHP continuous-time poles are required to cause oscillation. Without increased system dimension\nas in [18, 19], the average model generally cannot predict PDB.\nPrevious works on average current-mode control (ACMC) are generally based on average models\n[9\u201317], which can be divided into two groups. The first group [9\u201315] does not consider the sampling\neffect and is equivalent to state-space average models. The second group [16, 17] considers the\nsampling effect. Adding the sampling effect is effective for PCMC, but directly applying it to\nACMC has been questioned [10]. Two reasons can be given. First, ACMC resembles voltage-mode\ncontrol rather than PCMC [10], and considering the sampling effect may be unnecessary. Second,\nThe current loop in ACMC has more than one pole, not just one as in PCMC. Some poles may\nmigrate and regroup with each other [12, 14, 15]. One cannot predict which pole is real negative to\nbe lifted. It is not accurate as in [16] to lift just one particular pole.\nHarmonic balance modeling [21] is another approach to analyze switching converters and can\npredict PDB. The contributions of the paper are as follows. First, PDB does occur in ACMC. It even\noccurs in the circuit example in [16], and such a PDB instability was reported around a decade ago\nin [22]. The occurrence of PDB can be predicted by the sampled-data and harmonic balance models.\nSecond, it is shown that the average model has frequency responses matched with experimental\ndata only in those conditions when the converter does not have negative real sampled-data poles.\nThe average model without increased system dimension fails to predict PDB. Third, a lifted model\nis proposed. It has frequency responses matched with experimental data, and it accurately predicts\nPDB even if there is a negative real sampled-data pole. Fourth, a new stability criterion based on\nthe harmonic balance model is derived. Fifth, a new S plot is proposed. It accurately predicts PDB\nand greatly assists converter designers to adjust some particular parameters to avoid PDB. It also\nassists pole assignment.\n\n3\n\n\fvs\n\n\u2732\n\u2732\n\n\u2732 vo\n\nPower Stage\n\niL\n\u2744\n\nHn (s) \u271b\n\u2727\ny\n\u2727\n\u2727 +\u271b\n\u2727\n\u275c\n\u275c \u2212\u271b\n\u275c\n\u275c\n\n\u2727\n\u2727\n\u2727 \u2212\u271b\n\u2727\n\u275c\n\u275c +\u271b\n\u275c\nh\n\u275c\n\nRs\nHd (s) \u271b\nvc\n\nFigure 1: System diagram of an ACMC DC-DC converter.\n\n2\n\nOperation and Instability of ACMC\n\nAn ACMC DC-DC converter is shown in Fig. 1. The source voltage is vs , and the output voltage\nis vo . Let the switching frequency be fs = 1/T and let \u03c9s = 2\u03c0fs . The inductor current iL is\nsensed by a resistor Rs and compared with a control reference vc . The difference is amplified by a\ncompensator,\nKc (1 + \u03c9sz )\nHn (s)\nHc (s) =\n=\n(1)\nHd (s)\n(s + \u03b4)(1 + \u03c9sp )\nwhere Kc is the compensator gain at low frequency. The mid-frequency gain is Kc /\u03c9z . The poles\nare \u03b4 \u2248 0 and \u03c9p . The compensator output y(t) is compared with a T -periodic ramp signal h(t),\nwhich has h(0) = 0 and h(T \u2212 ) = Vh (ramp amplitude). The nominal solution of a DC-DC converter\nis a T -periodic orbit, not an equilibrium point as depicted in the average model. Denote the orbit\nby x0 (t), and let y 0 (t) = Cx0 (t) + Du. A periodic orbit (like x0 (t) or y 0 (t)) is orbitally stable if a\nstate trajectory stays in the orbit after being perturbed. If the state trajectory eventually leaves\nthe orbit, the orbit is unstable. Previous work [10] reported that the ripple size or slope of y affects\nstability. However, the following simulations show otherwise. Furthermore, an unstable window of\n\u03c9p is found.\nExample 1. (Unstable window of \u03c9p .) Consider an ACMC buck converter [16, p. 114]. The\nsystem parameters are vs = 14 V, vo = 5 V, vc = 0.5, fs = 50 kHz, L = 37.5 \u03bcH, C = 380 \u03bcF\nwith equivalent series resistance (ESR) Rc = 0.02 \u03a9, R = 1 \u03a9, Rs = 0.1 \u03a9, Vh =1, \u1e23(d) = 50000,\nKc = 75506, \u03c9p = 0.492\u03c9s , and \u03c9z = 5652.9 rad/s. All of the parameters are the same as in [16].\nThe converter is actually unstable [22]. The sampled-data poles are -1.123, -0.045, 0.882, and\n0.9537. The pole -1.123 indicates that PDB occurs and the orbit x0 (t) is unstable. When x0 (t) is\nperturbed, the state trajectory will leave the periodic orbit and become erratic as shown in Fig. 2\nand does not converge to a T -periodic orbit. Time simulation shows that the converter is unstable\nfor 0.13 < \u03c9p /\u03c9s < 0.56. This unstable window of \u03c9p can be predicted by the sampled-data and\nharmonic balance analyses shown later.\n\u2737\nExample 2. (Stability is unrelated to ripple size.) In Example 1, change L to 46.1 \u03bcH, which\ndoes not change the dynamics substantially. The change of L is used to illustrate a slightly smaller\nunstable window of \u03c9p . Compensator pole \u03c9p is varied from 0.1\u03c9s to 0.8\u03c9s . The pole \u03c9p adjusts\nhow much high-order harmonics of the compensator output y is attenuated. The ripple size and\nslope of y increase as \u03c9p increases. An unstable window of \u03c9p was found and reported in [22]. In the\n4\n\n\fh(t) and y(t)\n\n1\n0.8\n0.6\n0.4\n0.2\n0\n0\n\n1\nTime (Second)\n\nx 10\n\n2\n\n1\nTime (Second)\n\nx 10\n\n\u22124\n\nInductor current\n\n6\n5.5\n5\n4.5\n4\n\n0\n\n2\n\u22124\n\nFigure 2: Unstable state trajectory after the T -periodic orbit x0 (t) is perturbed.\ny(t)\nh(t)\n\n1.2\n\n1\n\n0.8\n\n0.6\n\n0.4\n\n0.2\n\n0\n0\n\n1\n\n2\n\n3\n\n4\nTime (Second)\n\n5\n\n6\n\n7\n\n8\n\u22125\n\nx 10\n\nFigure 3: Unstable T -periodic y 0 (t), \u03c9p = 0.49\u03c9s .\n\nwindow 0.18\u03c9s \u2264 \u03c9p \u2264 0.49\u03c9s , x0 (t) and y 0 (t) are unstable. Outside the window, x0 (t) and y 0 (t)\nare stable. Therefore, the stability is unrelated to the ripple size: for \u03c9p < 0.18\u03c9s , the converter is\nstable with a small ripple size of x0 (t) or y 0 (t); for 0.18\u03c9s \u2264 \u03c9p \u2264 0.49\u03c9s , the converter is unstable\nwith a little larger ripple size; for \u03c9p > 0.49\u03c9s , the converter is stable again with a much larger\nripple size.\nLet \u03c9p = 0.49\u03c9s , for example. Subharmonic instability occurs, and the unstable T -periodic orbit\n(Fig. 3) and the stable 2T -periodic orbit (Fig. 4) coexists. When the unstable T -periodic orbit is\nperturbed, it will lead to the stable 2T -periodic orbit. The two orbits have the same average duty\ncycle 0.357 and share the same average orbits. Based on the average model, they should have the\nsame stability. However, their stabilities are different. For \u03c9p > 0.49\u03c9s , x0 (t) and y 0 (t) are stable.\nLet \u03c9p = 0.8\u03c9s , for example, y 0 (t) is stable with a large ripple size and slope (Fig. 5). Comparing\nFigs. 3 and 5, one can see that the stability is unrelated to the ripple size. It is interesting to note\nthat as \u03c9p varies from 0.1\u03c9s to 0.8\u03c9s , the average duty cycle remains the same, but the stability\ncan be quite different.\n\u2737\n\n5\n\n\fy(t)\nh(t)\n\n1.2\n\n1\n\n0.8\n\n0.6\n\n0.4\n\n0.2\n\n0\n0\n\n1\n\n2\n\n3\n\n4\nTime (Second)\n\n5\n\n6\n\n7\n\n8\n\u22125\n\nx 10\n\nFigure 4: Stable 2T -periodic orbit, \u03c9p = 0.49\u03c9s .\n\ny(t)\nh(t)\n\n1.2\n\n1\n\n0.8\n\n0.6\n\n0.4\n\n0.2\n\n0\n0\n\n1\n\n2\n\n3\n\n4\nTime (Second)\n\n5\n\n6\n\n7\n\n8\n\u22125\n\nx 10\n\nFigure 5: Stable T -periodic y 0 (t) with large ripple, \u03c9p = 0.8\u03c9s .\n\n3\n3.1\n\nExact General Sampled-Data Analysis\nExact Switching Model\n\nThe switching model [6] in Fig. 6 describes exactly the operation of a DC-DC converter. In the\nmodel, A1 , A2 \u2208 RN \u00d7N , B1 , B2 \u2208 RN \u00d72 , C, E1 , E2 \u2208 R1\u00d7N , and D \u2208 R1\u00d72 are constant matrices,\nwhere N is the system dimension. For example, N = 4 for a buck converter with a two-pole\ncompensator. Within a clock period, the dynamics is switched between S1 and S2 . Switching\noccurs when the ramp signal h(t) intersects with the compensator output y := Cx + Du \u2208 R. The\nsystem is in S1 when y(t) \u2265 h(t), and switches to S2 at instants when y(t) < h(t).\nIn the n-th cycle, let xn = x(nT ). For high switching frequency, u = (vs , vc )\u2032 \u2208 R2\u00d71 can\nbe considered constant within the cycle and denoted as un = (vsn , vrn )\u2032 . The short notation vsn ,\ninstead of vs,n , is used for brevity. This applies to other variables.\nLet the steady-state duty cycle be D and let d = DT . Confusion of notations for capacitance\nC and duty cycle D with the matrices C and D can be avoided from the context. Let \u1e8b0 (d\u2212 ) =\nA1 x0 (d) + B1 u and \u1e8b0 (d+ ) = A2 x0 (d) + B2 u denote the time derivative of x0 (t) at t = d\u2212 and d+ ,\nrespectively.\n6\n\n\f\u271b\n\nSwitching\nDecision\n\nh(t) = Vh ( Tt mod 1)\nclock\n\n\u271b\n\u271b\n\ny = Cx + Du\nSwitch to S1 or S2\n\u2744\n\nu=(\n\nvs\n)\nvc\n\n\u2732\n\nS1 :\n\n(\n\n\u1e8b = A1 x + B1 u\nvo = E1 x\n\nS2 :\n\n(\n\n\u1e8b = A2 x + B2 u\nvo = E2 x\n\n\u2732 vo\n\nFigure 6: Exact switching model for DC-DC converter.\n\nThe periodic orbit x0 (t) in the system of Fig. 6 corresponds to a fixed point x0 (0) in the sampleddata dynamics. Using a hat \u02c6 to denote small perturbations (e.g., x\u0302n = xn \u2212 x0 (0)). From [6], the\nlinearized sampled-data dynamics is\nx\u0302n+1 = \u03a6x\u0302n + \u0393\u00fbn = \u03a6x\u0302n + \u03931 v\u0302sn + \u03932 v\u0302cn\n\n(2)\n\nwhere \u03a6 \u2208 RN \u00d7N and \u0393 = [\u03931 , \u03932 ] \u2208 RN \u00d72 are\n\u03a6 = eA2 (T \u2212d) (I \u2212\nZ\n\nd\n\n\u0393 = eA2 (T \u2212d) (\n\n0\n\n(C\n\nZ\n\nd\n\nA1 \u03c3\n\ne\n\n0\n\n(\u1e8b0 (d\u2212 ) \u2212 \u1e8b0 (d+ ))C A1 d\n)e\nC \u1e8b0 (d\u2212 ) \u2212 \u1e23(d)\neA1 \u03c3 d\u03c3B1 \u2212\n\nd\u03c3B1 + D)) +\n\n(3)\n\n\u1e8b0 (d\u2212 ) \u2212 \u1e8b0 (d+ )\n*\nC \u1e8b0 (d\u2212 ) \u2212 \u1e23(d)\nZ\n\n0\n\nT \u2212d\n\neA2 \u03c3 d\u03c3B2\n\n(4)\n\nThe periodic solution x0 (t) is asymptotically orbitally stable if all of the eigenvalues of \u03a6 are\ninside the unit circle of the complex plane. PDB occurs when an eigenvalue is at -1. Saddle-node\nbifurcation (SNB) [1] occurs when an eigenvalue is at 1.\nLet E := (E1 + E2 )/2, because the output voltage may be discontinuous. From (2), the controlto-output transfer function is\nToc (z) =\n\nv\u0302o (z)\n= E(zI \u2212 \u03a6)\u22121 \u03932\nv\u0302c (z)\n\n(5)\n\nGiven a transfer function in the z domain, T (z), its frequency response is T (ej\u03c9T ), valid up to half\nthe switching frequency.\n\n3.2\n\nLifted Model with Improved Frequency Response\n\nIn the sampled-data model, the switching frequency is high enough that vc is assumed constant\nwithin the cycle, which is the same as assuming a sampler with a zero-order-hold being placed after\n\n7\n\n\fvc . The sampled-data dynamics (2) can be converted back (\"lifted\") to a continuous-time dynamics\n\u1e8b = Ax + Bu, with the following relationship [4, 5, 8],\n\"\n\n\u03a6 \u0393\n0 1\n\n#\n\n\"\n\nA B\n= exp(\n0 0\n\n#\n\nT)\n\nThis conversion can be done by the d2c command in Matlab. A negative real pole, if any, in the\nsampled-data model is mapped to a pair of complex RHP poles and a zero, and the lifted model\nhas increased system dimension [8]. The \"lifted\" control-to-output transfer function is\nE(sI \u2212 A)\u22121 B.\n\n(6)\n\nThe \"lifted\" model has improved high frequency phase response because the effect of the assumption\nthat vc being constant within the cycle becomes significant at high frequency. It will be shown (in\nExamples 6 and 7) that the \"lifted\" control-to-output transfer function has phase response matched\nwith experimental data. The lifted model also predicts PDB.\n\n3.3\n\n\"S Plot\" Accurately Predicts Pole Location and PDB\n\nBased on [4, p. 46], suppose \u03bb is not an eigenvalue of eA2 (T \u2212d) eA1 d , then \u03bb is an eigenvalue of \u03a6 if\nand only if the following boundary condition holds:\n\u1e8f 0 (d\u2212 ) + C(\u03bbe\u2212A2 (T \u2212d) e\u2212A1 d \u2212 I)\u22121 (\u1e8b0 (d\u2212 ) \u2212 \u1e8b0 (d+ )) = \u1e23(d)\n\n(7)\n\nThe proof is as follows. Suppose \u03bb is not an eigenvalue of eA2 (T \u2212d) eA1 d , then\ndet[\u03bbI \u2212 \u03a6] = det[\u03bbI \u2212 eA2 (T \u2212d) eA1 d ] det[I + (\u03bbI \u2212 eA2 (T \u2212d) eA1 d )\u22121 eA2 (T \u2212d)\n\n\u1e8b0 (d\u2212 ) \u2212 \u1e8b0 (d+ ) A1 d\nCe ]\nC \u1e8b0 (d\u2212 ) \u2212 \u1e23(d)\n\n= det[\u03bbI \u2212 eA2 (T \u2212d) eA1 d ][1 + CeA1 d (\u03bbI \u2212 eA2 (T \u2212d) eA1 d )\u22121 eA2 (T \u2212d)\n\n\u1e8b0 (d\u2212 ) \u2212 \u1e8b0 (d+ )\n]\n\u1e8f 0 (d\u2212 ) \u2212 \u1e23(d)\n\ndet[\u03bbI \u2212 \u03a6] = 0 requires that the last term (inside the second square brackets) of the last equation\nequals to zero, which leads to (7).\nSince the condition (7) is in terms of signal slopes (\u1e8f 0 (d\u2212 ), \u1e8b0 (d\u2212 ), \u1e8b0 (d+ ), and \u1e23(d)), the left\nside of (7) is called an \"S plot\", S(\u03bb, D, \u03c9p ), as a function of \u03bb, D = d/T , and \u03c9p , for example. Then,\nPDB occurs when S(\u22121, D, \u03c9p ) = \u1e23(d). The converter is unstable with PDB if S(\u22121, D, \u03c9p ) > \u1e23(d).\nSNB occurs when S(1, D, \u03c9p ) = \u1e23(d). Although this paper focuses on the buck converter, the\ncondition (7) is also applicable to other converters.\nLike the popular Bode plot, the S plot facilitates the converter design. For example, the\nintersection of the S plot (as a function of pole \u03bb) and \u1e23(d) shows the real pole location. The S plot\ncan be used for pole assignment. A limitation of the pole assignment is that only real poles can be\nassigned. Choosing a particular ramp slope \u1e23(d) can assign the pole to some locations. Also, if the\nramp slope \u1e23(d) is large enough such that \u1e23(d) > S(\u22121, D, \u03c9p ), PDB is avoided.\n\n8\n\n\f4\n4.1\n\nModeling of ACMC Buck Converter\nSampled-Data Analysis\n\nFor the buck converter, let x = (iL , vC , ve1 , ve2 )\u2032 , where iL is the inductor current, vC is the capacitor\nvoltage, and ve1 and ve2 are the states of the current-loop compensator. Then,\n\uf8ee\n\n\u2212\u03c1Rc\nL\n\u03c1\nC\n\n\u2212\u03c1\nL\n\u2212\u03c1\nRC\n\n0\n0\n\uf8ef\n0\n0\n\uf8ef\n= A2 = \uf8ef\n\uf8f0\n0\n0\n0\n1\n\u2212\u03c9\nR\n0\n\u2212\u03b4\u03c9\n\u2212\u03b4\n\u2212\n\u03c9p\np\ns\np\n\uf8ee\n\uf8f9\n\uf8ee 1\n\uf8f9\n0\n0\n0\n\uf8ef 0 0 \uf8fa\n\uf8fa\n\uf8ef L\n\uf8ef\n\uf8ef 0 0 \uf8fa\n\uf8fa\n= \uf8ef\n\uf8fa , B2 = \uf8ef\n\uf8fa\n\uf8f0 0 0 \uf8fb\n\uf8f0 0 0 \uf8fb\n0 \u03c9hp\nh 0 \u03c9p\ni\ni\nKc\n0\n0\nK\n=\n, D= 0 1\nc\n\u03c9z\n\nA1\n\nB1\nC\n\nE1 = E2 =\n\nh\n\n\u03c1Rc \u03c1 0 0\n\n\uf8f9\n\uf8fa\n\uf8fa\n\uf8fa\n\uf8fb\n\ni\n\nwhere \u03c1 = R/(R + Rc ). A small nonzero \u03b4 is chosen to make both A1 and A2 invertible. Let\nB1 := [B11 , B12 ], B2 := [B21 , B22 ] to expand the matrices into two columns. The buck converter\ngenerally has A1 = A2 , B21 = 0N \u00d71 , and B12 = B22 . The boundary condition (7) becomes\nS(\u03bb, D, \u03c9p ) := C[(I \u2212 eA1 T )\u22121 (eA1 DT \u2212 I) + I + (\u03bbe\u2212A1 T \u2212 I)\u22121 ]B11 vs = \u1e23(d)\n\n(8)\n\nIf vo is fixed, vs = vo /D is used in the S plot.\n\n4.2\n\nAverage Analysis\n\nThe linearized dynamics of the state-space average model for the buck converter is derived:\nvs B11\nvs B11 C\n)x\u0302 + (\n+ B12 )v\u0302c\nx\u0302 \u0307 = (A1 +\nVh\nVh\n\n(9)\n\nThe control-to-output transfer function is\n\u2032\nToc\n(s) =\n\n4.3\n\nv\u0302o (s)\nvs B11 C \u22121 vs B11\n= E(sI \u2212 A1 \u2212\n) (\n+ B12 )\nv\u0302c (s)\nVh\nVh\n\n(10)\n\nHarmonic Balance Analysis and the S Plots in Frequency Forms\n\nLet the current loop transfer function be T (s). Then, one has T (s) = Hc (s)Gid (s)/Vh , where\nGid (s) =\n\nvs ((R + Rc )Cs + 1)\n(R + Rc )LCs2 + (L + RRc C)s + R\n\n(11)\n\nis the duty-cycle-to-inductor-current transfer function. Define a transfer function G(s) = T (s)Vh /vs .\nFrom [21], PDB occurs when\n\u221e\nX\n\n1\n((1 \u2212 ej2\u03c0kD )G(j\u03c9s k) \u2212 G(j\u03c9s (k \u2212 )))] = \u1e23(d)\n2\nk=1\n\n2vs fs Re[\n\n9\n\n(12)\n\n\fOne can prove that (12) and (8) (with \u03bb = \u22121) are equivalent but expressed in different forms, and\nthe left side of (12) is the S plot, S(\u22121, D, \u03c9p ).\nGenerally G(j\u03c9s ) is low-pass, and using just one term in the summation in (12),\nS(\u22121, D, \u03c9p ) \u2248 2vs fs Re[(1 \u2212 ej2\u03c0D )G(j\u03c9s ) \u2212 G(\n\nj\u03c9s\n)]\n2\n\n(13)\n\n\u221a\nUsing (1) and (11), for \u03c9s \u226b 1/ LC and 1/RC,\nS(\u22121, D, \u03c9p ) \u2248 (\n\n4\u03c9p \u03c9s Kc Rs vo\n)\n4\u03c9p2 + \u03c9s2 \u03c9z L\u03c0D\n\n(14)\n\nFor S(\u22121, D, \u03c9p ) > \u1e23(d), instability occurs with PDB. A higher value of S(\u22121, D, \u03c9p ) is likely to\nlead to PDB. Generally, the S plot as a function of \u03c9p is \u039b-shaped (see Fig. 8, for example), and\nhas a maximum value of Kc Rs vo /\u03c9z L\u03c0D at \u03c9p = \u03c9s /2. To avoid PDB, the ramp slope \u1e23(d) should\nbe higher than this maximum value. Therefore, a conservative (conservativeness because it is valid\nfor all \u03c9p ) design guideline to avoid PDB is\nKc Rs vs\nKc Rs vo\n=\n< \u03c0 \u1e23(d)\n\u03c9z L\n\u03c9z LD\n\n(15)\n\nwhich shows how different parameters affect stability and is useful for converter design. If the\ncondition (15) is not met, there may exist an unstable window of \u03c9p . Although the unstable window\nof \u03c9p predicted by (15) may be a little different from the exact condition (12), the approximate\ncondition (15) at least predicts a characteristic of an unstable window of \u03c9p . No existing stability\ncriterion has been reported to predict the unstable window of \u03c9p .\nIt is reported in [15] that an increase of the PWM modulator gain 1/Vh , the mid-frequency\ncurrent loop gain Kc /\u03c9z , or vs will cause a shift of resonance frequency toward fs /2. It is also\nreported in [15] that the load resistance R does not cause such a shift. These observations agree\nwith (15).\nNote that (12) is an exact condition, (13) and (14) are approximate, and (15) is conservative.\nAlso note that (14) is \u03c9p -dependent, and such a dependence is removed in (15). Using which one of\nthe conditions (12)-(15) depends on how much accuracy is required. A design guideline proposed\nin [12] suggests that the value of \u03c9p is chosen between 0.33\u03c9s and 0.5\u03c9s . However, this range is\nclose to the unstable window of \u03c9p .\nAnother stability guideline proposed in [10] suggests\n2\n1\nKc Rs vs\n< min[\n, ]\u1e23(d)\n\u03c9z L\n1\u2212D D\n\n(16)\n\nFor a small D, the term 2/(1 \u2212 D) dominates and has a value between 2 and 3. For a large D,\nthe term 1/D dominates and has a value between 1 and 3. Either way, the right side of (16) has a\nvalue of at most 3. Therefore, (16) is more conservative than (15). The stability criterion can be\nrelaxed as in (15) to achieve better dynamics.\n\n5\n5.1\n\nIllustrative Examples\nMany Useful Usages of the S Plot\n\nExample 3. [The S plot predicts the pole location and shows the required ramp slope to avoid\nPDB.] Consider again Example 1. In Fig. 7, the intersection of the S plot (as a function of \u03bb) and\n10\n\n\f4\n\nx 10\n16\n14\n\nSlope\n\n12\n10\n8\n6\n4\n2\n0\n\u22122\n\n\u22121.5\n\n\u22121\nPole \u03bb\n\n\u22120.5\n\n0\n\nFigure 7: The intersection of S(\u03bb, 0.357, 0.492\u03c9s ) (solid line) and \u1e23(d) (dashed line) shows two\npoles at -1.123 and -0.045.\n\u1e23(d) shows the two negative real poles at -1.123 and -0.045. To avoid PDB, the S plot shows that\nthe required ramp slope is 62000 (corresponding to Vh = 1.24), which shifts the two poles to -0.999\nand -0.051. To shift the poles from being negative real, the S plot also shows that the required\nramp slope is 150000. With this slope, the sampled-data poles are now either complex or positive,\nand they are \u22120.224 \u00b1 0.029j, 0.872, and 0.957, agreed with the prediction of the S plot.\n[The S plot predicts the unstable window.] In Fig. 8, the intersection of the S plot (as a function\nof \u03c9p ) and \u1e23(d) shows exactly the unstable window of \u03c9p : 0.13 < \u03c9p /\u03c9s < 0.56. In ACMC, the\noutput voltage is regulated to be around vc , then D is varied if vs is varied. The S plot as a\nfunction of D shown in Fig. 9 shows that the converter is unstable for all D. In both Figs. 8\nand 9, a circle symbol indicates the circuit parameters (e.g., D = 0.357 and \u03c9p /\u03c9s = 0.492) used\nin Example 1. The circle symbol is above the ramp slope line at 50000, indicating instability as\nreported in Example 1. Both of the figures show that if the ramp slope increases to 62000 (or\nVh = 1.24), the converter is stabilized.\nWith \u1e23(d) = 62000, the sampled-data poles are -0.999, -0.051, 0.881, and 0.9537, indicating\nstability as predicted. In Fig. 9, draw a horizontal line at \u1e23(d) = 62000. The line intersects with\nthe S plot at D = 0.35 and 0.72. Therefore, this larger ramp slope leads to a larger stable operating\nrange: 0.35 < D < 0.72. The converter in Example 1 has D = 0.357 which is now within the stable\nrange.\nIn Fig. 8, draw a horizontal line at \u1e23(d) = 62000. The line intersects with the S plot at\n\u03c9p /\u03c9s = 0.18 and 0.49. Therefore, this larger ramp slope also leads to a smaller unstable window:\n0.18 < \u03c9p /\u03c9s < 0.49. The converter in Example 1 has \u03c9p = 0.492\u03c9s which is now outside the\nunstable range. This window is the same as in Example 2 (with increased L). This can be\nexplained by (15) because increasing L or \u1e23(d) has the same effect to stabilize the converter. \u2737\nIn summary, the S plot has many usages:\n1. The S plot as a function of \u03bb (Fig. 7, for example) predicts the pole location and shows the\nrequired ramp slope to assign the real poles to some locations.\n2. The S plot as a function of \u03c9p (Fig. 8, for example) predicts the stable operating range of \u03c9p\nand shows the required ramp slope to operate in a desired range of \u03c9p without occurrence of\nPDB.\n11\n\n\f4\n\n10\n\nx 10\n\n9\n\nSlope\n\n8\n\n7\no\n\n6\n\n5\n\n4\n\n3\n0.1\n\n0.2\n\n0.3\n\n\u03c9 /\u03c9\np\n\n0.4\n\n0.5\n\n0.6\n\ns\n\nFigure 8: The intersection of S(\u22121, 0.357, \u03c9p ) (solid line) and \u1e23(d) (dashed line) shows the unstable\nwindow of \u03c9p \u2208 (0.13, 0.57)\u03c9s . The circle, for the set of converter parameters in Example 1, is above\n\u1e23(d) = 50000, implying instability in Example 1.\n4\n\n10\n\nx 10\n\n9\n\nSlope\n\n8\n\n7\no\n\n6\n\n5\n\n4\n\n3\n0.2\n\n0.3\n\n0.4\n\n0.5\n\n0.6\nDuty cycle\n\n0.7\n\n0.8\n\n0.9\n\n1\n\nFigure 9: S(\u22121, D, 0.492\u03c9s ) (solid line) is above \u1e23(d) (dashed line), showing instability for all D.\nThe circle, for the set of converter parameters in Example 1, is above \u1e23(d) = 50000, implying\ninstability in Example 1.\n3. The S plot as a function of D (Fig. 9, for example) predicts the stable operating range of D\nand shows the required ramp slope to operate in a desired rang of D without occurrence of\nPDB.\nIf the S plot is represented as a function of another variable (Kc , \u03c9z , or L, for example), it can\npredict the stable operating range of such a variable and show the required ramp slope to avoid\nPDB.\n\n5.2\n\nThe Sample-Data Model Accurately Predicts the Unstable Window of \u03c9p\n\nExample 4. Consider again Example 1. The sampled-data model (5) is\n0.87528(z + 0.4034)(z \u2212 0.8987)(z \u2212 0.0255)\n(z + 1.123)(z \u2212 0.9537)(z \u2212 0.882)(z + 0.04509)\n12\n\n(17)\n\n\f1\n0.8\n0.6\n\n\u03c9 /\u03c9 =0.13, 0.56\np\n\ns\n\n0.4\n\np\n\ns\n\n\u03c9 /\u03c9 =0.12\np\n\n0.2\n0\n\n\u03c9 /\u03c9 =0.1\n\n\u03c9 /\u03c9 =0.25\np\n\ns\n\n\u03c9 /\u03c9 =0.8\n\ns\n\np\n\ns\n\n\u22120.2\n\u22120.4\n\u03c9 /\u03c9 =0.8\np\n\n\u22120.6\n\ns\n\n\u22120.8\n\u22121\n\u22121.5\n\n\u22121\n\n\u22120.5\n\n0\n\n0.5\n\n1\n\nFigure 10: Sampled-data pole trajectories for \u03c9p /\u03c9s \u2208 (0.1, 0.8).\nThere are two negative real poles. One negative pole is less than -1 and is unstable. The lifted\nmodel (6) is\n29505(s + 5338)(s2 + 302500s + 3.812 \u00d7 1010 )(s2 + 124700s + 2.981 \u00d7 1010 )\n(s + 6276)(s + 2372)(s2 + 309900s + 4.868 \u00d7 1010 )(s2 \u2212 11620s + 2.471 \u00d7 1010 )\n\n(18)\n\nThe unstable negative sampled-data poles are lifted to become a pair of unstable complex poles,\naccurately predicting the instability. The stable negative sampled-data poles are lifted to become\na pair of stable complex poles. The lifted model now has six poles.\nNext, the effect of \u03c9p is considered. The sampled-data pole trajectories for \u03c9p /\u03c9s \u2208 (0.1, 0.8)\n\u2212T\n\nare shown in Fig. 10. Two poles are fixed around 0.882, and 0.9537 (\u2248 e RC ). A pole leaves the unit\ncircle through -1 when \u03c9p = 0.13\u03c9s , and enters the unit circle when \u03c9p = 0.56\u03c9s . This explains\nexactly the unstable window of \u03c9p discussed in Example 1. Similar techniques to increase the\nsystem dimension to predict PDB is also adopted in [23, 24].\n\u2737\n\nExample 5. (Average models do not predict PDB and the unstable window of \u03c9p .) In Example\n1, the average model (10) is\n7320(s + 131600)(s + 2216000)(s + 5272)\n(s + 5945)(s + 2477)(s2 + 149400s + 7.641 \u00d7 1010 )\n\n(19)\n\nwith poles in the left half plane (LHP) and fails to predict the instability.\nBy considering the sampling effect but without increasing the system dimension, another average\nmodel of [16] is\n3.6 \u00d7 1014 (s + 131600)\n(20)\n(s + 1962000)(s + 154700)(s + 12570)(s + 1243)\nwith poles still in LHP and fails to predict the instability. One explanation that these average\nmodels fail to predict PDB is that these average models do not lift the unstable sampled-data poles\nto increase the system dimension.\nNext, the effect of \u03c9p is considered. The pole trajectories for \u03c9p /\u03c9s \u2208 (0.1, 0.8) of the average\nmodel (10) are are shown in Fig. 11. Two poles are fixed around -5945, and -2477, which can\nbe mapped from the corresponding sampled-data poles 0.882 and 0.9537. For example, -5945\u2248\nln(0.882)/T . All four poles are in LHP. This contradicts the unstable window in Example 1. \u2737\n13\n\n\f5\n\n4\n\nx 10\n\n\u03c9 /\u03c9 =0.8\np\n\ns\n\n3\n2\n\u03c9 /\u03c9 =0.1\np\n\ns\n\n1\n0\n\u22121\n\u22122\n\u22123\n\u22124\n\u221214\n\n\u221212\n\n\u221210\n\n\u22128\n\n\u22126\n\n\u22124\n\n\u22122\n\n0\n4\n\nx 10\n\nFigure 11: Average model pole trajectories for \u03c9p /\u03c9s \u2208 (0.1, 0.8).\n\n5.3\n\nThe Lifted Model Predicts PDB and Has Matched Frequency Response\n\nExample 6. Consider another ACMC buck converter from [10, p. 982]. The system parameters\nare vs = 5 V, vo = 2 V, vc = 0.279, fs = 180 kHz, L = 13 \u03bcH, C = 750 \u03bcF, Rc = 5 m\u03a9, R = 0.43\n\u03a9, Rs = 0.06 \u03a9, Vh =2.7, \u1e23(d) = 486000, Kc = 98000, \u03c9p = \u03c9s , and \u03c9z = 6723 rad/s.\nThe sampled-data model (5) is\n0.078161(z \u2212 0.2163)(z \u2212 0.9654)(z + 0.08168)\n(z \u2212 0.003783)(z \u2212 0.5155)(z \u2212 0.9525)(z \u2212 0.9861)\n\n(21)\n\nAll four poles are positive real. Since there are no negative real poles, the average model is expected\nto be accurate. The lifted model (6) is\n8100(s + 1427000)(s + 259500)(s + 6332)\n(s + 1004000)(s + 119300)(s + 8755)(s + 2528)\n\n(22)\n\nThere are still four poles, directly mapped from the sampled-data poles. The average model (10) is\n704(s + 17610000)(s + 266700)(s + 6294)\n(s + 989500)(s + 133800)(s + 8523)(s + 2573)\n\n(23)\n\nwhich has similar corresponding pole locations. The control-to-output frequency responses of the\nlifted and the average models are shown in Fig. 12, both matching with the experimental data\nshown in Fig. 6 of [10].\nHere, the average model shows matched frequency responses. The good match in one condition\ndoes not necessarily mean that the good match occurs in all other conditions. The good match is\ndue to the fact that here the sampled-data poles are not negative real. If one converter parameter\n(vs , for example, as shown next) is adjusted such that the converter has a negative real sampled-data\npole, then the average model fails to predict the converter dynamics.\nThe S plot (as a function of D) in Fig. 13 shows that PDB occurs if D < 0.065 (corresponding\nto vs = vo /D = 30.84). The approximate S plot (13) fits closely with the exact plot based on (8) or\n(12). The other approximate S plot (14), although not fitting with the exact plot, still accurately\npredicts the instability around D = 0.065.\n\n14\n\n\fNext, let vs = 30.84. The unstable time waveform is similar to Figs. 2 and 4, omitted to save\nspace. The sampled-data model (5) is\n0.1552(z + 1.692)(z \u2212 0.9657)(z \u2212 0.3773)\n(z + 1.0002)(z + 0.001935)(z \u2212 0.9623)(z \u2212 0.9835)\n\n(24)\n\nwhich shows PDB with two negative real poles. One negative pole is unstable. Lifting these two\npoles to totally have six poles and five zeros, with the other two stable poles being not substantially\nchanged, the lifted model (6) is\n137269(s + 1335000)(s + 258800)(s + 6284)(s2 \u2212 125700s + 2.522 \u00d7 1011 )\n(s2 \u2212 68s + 3.198 \u00d7 1011 )(s2 + 2249000s + 1.584 \u00d7 1012 )(s + 6920)(s + 2994)\n\n(25)\n\nwhich also has a pair of unstable poles and accurately predicts the instability. The average model\n(10) is\n4343(s + 266700)(s + 6294)(s + 17610000)\n(26)\n(s2 + 1124000s + 8.62 \u00d7 1011 )(s + 7013)(s + 2963)\nwith poles in LHP and fails to predict the instability. The control-to-output frequency responses of\nthe lifted and the average models are shown in Fig. 14. The lifted model has a peaking at half the\nswitching frequency and shows the instability. The average model does not show such a peaking and\nfails to predict the instability. Therefore, even though the average model shows matched frequency\nresponse in one condition (vs = 5), it does not necessarily show accurate frequency response in\nanother condition (vs = 30.84). In contrast, in either condition, the lifted model accurately predicts\nthe dynamics.\nWith vs = 30.84, the S plot as a function of \u03c9p in Fig. 15 shows an unstable window for\n0.2 \u2264 \u03c9p /\u03c9s \u2264 1. In this example, \u03c9p equals to \u03c9s and is inside this unstable window. To avoid the\nunstable window, one has two options: increase the ramp slope or operate with \u03c9p being outside\nthe window.\nFirst, consider the option of increasing the ramp slope. the S plot shows that the required slope\nis \u1e23(d) = 700000 (corresponding to Vh = 3.89). Let \u1e23(d) = 700000, the sampled-data poles are\n-0.652, -0.003, 0.962, and 0.984, indicating that PDB is avoided as expected.\nNext, consider the option of operating with \u03c9p being outside the window. The S plot also shows\nthat if \u03c9p /\u03c9s > 1 or \u03c9p /\u03c9s < 0.2, PDB is avoided by operating outside the unstable window. Let\n\u03c9p = 0.15\u03c9s , for example, the sampled-data poles are \u22120.457 \u00b1 0.442j, 0.962, and 0.984, indicating\nthat PDB is avoided as expected.\n\u2737\nExample 7.\nConsider another ACMC buck converter from [12]. The system parameters are\nvs = 3 V, vo = 2.25 V, vc = 0.5625, fs = 100 kHz, L = 20 \u03bcH, C = 330 \u03bcF, Rc = 25 m\u03a9, R = 2 \u03a9,\nRs = 0.5 \u03a9, Vh =1.8, \u1e23(d) = 180000, Kc = 11455, \u03c9p = 314940 \u2248 \u03c9s /2, and \u03c9z = 11905 rad/s.\nThe sampled-data model (5) is\n0.047467(z \u2212 0.0746)(z \u2212 0.9432)(z + 0.003245)\n(z 2 \u2212 1.564z + 0.6236)(z \u2212 0.06766)(z \u2212 0.9889)\n\n(27)\n\nAll four poles are stable. Different from Example 6, a pair of complex poles exists. This example\nis used to show that no matter how the poles migrate and regroup, both the sampled-data and the\nlifted models still accurately predict the dynamics. The lifted model (6) is\n(s2\n\n2739(s + 273900)(s + 209300)(s + 5847)\n+ 47230s + 758500000)(s + 269300)(s + 1119)\n15\n\n(28)\n\n\f20\n\nMagnitude (dB)\n\n10\n0\n\u221210\n\u221220\n\u221230\n\nPhase (deg)\n\n\u221240\n0\n\n\u221245\n\n\u221290\n\n\u2212135\n1\n\n2\n\n10\n\n3\n\n10\n\n4\n\n5\n\n10\n10\nFrequency (rad/sec)\n\n10\n\nFigure 12: Control-to-output frequency responses; solid line for the lifted model and dashed line\nfor the average model, vs = 5.\n5\n\n7\n\nx 10\n\n6\n5\n\nSlope\n\n4\n3\n2\n1\n0\n\u22121\n\n0.1\n\n0.2\n\n0.3\n\n0.4\n\n0.5\n0.6\nDuty cycle\n\n0.7\n\n0.8\n\n0.9\n\n1\n\nFigure 13: The intersection of S(\u22121, D, \u03c9s ) (solid line) and \u1e23(d) (dashed line) shows instability for\nD < 0.065; dash-dotted line for (13) and dotted line for (14) are approximate S plots.\nThere are still four poles (with complex poles), mapped from the sampled-data poles. The average\nmodel (10) is\n2058(s + 121200)(s + 612100)(s + 5894)\n(29)\n(s2 + 46410s + 745900000)(s + 270100)(s + 1116)\nwhich has similar corresponding pole locations. The control-to-output frequency responses of the\nlifted and the average models are shown in Fig. 16, both matching with the experimental data\nshown in Fig. 6 of [12].\nAlthough the average model has matched frequency response, it still fails to predict PDB if\nvs is changed as shown next, whereas the sampled-data and the lifted models can predict PDB.\nThe S plot in Fig. 17 shows that PDB occurs if D < 0.09 (corresponding to vs = vo /D = 25, also\npredicted by (15) based on the harmonic balance model).\n\n16\n\n\f60\n\nMagnitude (dB)\n\n40\n20\n0\n\u221220\n\u221240\n0\n\nPhase (deg)\n\n\u221245\n\u221290\n\u2212135\n\u2212180\n1\n10\n\n2\n\n3\n\n10\n\n4\n\n5\n\n10\n10\nFrequency (rad/sec)\n\n6\n\n10\n\n10\n\nFigure 14: Control-to-output frequency responses; solid line for the lifted model and dashed line\nfor the average model, vs = 30.84.\n5\n\n7\n\nx 10\n\n6.5\n6\n\nSlope\n\n5.5\n5\n4.5\n4\n3.5\n3\n2.5\n0.1\n\n0.2\n\n0.3\n\n0.4\n\n0.5\n0.6\n\u03c9 /\u03c9\np\n\n0.7\n\n0.8\n\n0.9\n\n1\n\ns\n\nFigure 15: The intersection of S(\u22121, 0.4, \u03c9p ) (solid line) and \u1e23(d) (dashed line) shows the unstable\nwindow of \u03c9p \u2208 (0.2, 1)\u03c9s .\nNext, let vs = 25. The sampled-data model (5) is\n0.28065(z \u2212 0.9422)(z \u2212 0.4226)(z + 0.5305)\n(z + 1.023)(z + 0.04694)(z \u2212 0.8816)(z \u2212 0.9856)\n\n(30)\n\nwhich shows PDB with two negative real poles. Lifting these two poles, the lifted model (6) is\n30795(s + 563100)(s + 101100)(s + 5961)(s2 + 125600s + 1.318 \u00d7 1011 )\n(s2 \u2212 4558s + 9.87 \u00d7 1010 )(s2 + 611800s + 1.923 \u00d7 1011 )(s + 12600)(s + 1448)\n\n(31)\n\nwhich also has a pair of unstable poles. The average model (10) is\n(s2\n\n17147(s + 121200)(s + 612100)(s + 5894)\n+ 303400s + 1.02 \u00d7 1011 )(s + 12810)(s + 1436)\n17\n\n(32)\n\n\f20\n\nMagnitude (dB)\n\n10\n0\n\u221210\n\u221220\n\u221230\n\nPhase (deg)\n\n\u221240\n0\n\n\u221245\n\n\u221290\n\n\u2212135\n1\n\n2\n\n10\n\n10\n\n3\n\n10\nFrequency (rad/sec)\n\n4\n\n5\n\n10\n\n10\n\nFigure 16: Control-to-output frequency responses; solid line for the lifted model and dashed line\nfor the average model.\n\n5\n\n2.5\n\nx 10\n\n2\n\nSlope\n\n1.5\n\n1\n\n0.5\n\n0\n\n0\n\n0.2\n\n0.4\n\n0.6\n\n0.8\n\n1\n\nDuty cycle\n\nFigure 17: The intersection of S(\u22121, D, \u03c9s /2) (solid line) and \u1e23(d) (dashed line) shows instability\nfor D < 0.09; dash-dotted line for (13) and dotted line for (14) are approximate S plots.\nwith poles in LHP and fails to predict the instability.\nWith vs = 25, the S plot as a function of \u03c9p in Fig. 18 shows an unstable window for 0.36 <\n\u03c9p /\u03c9s < 0.54. To avoid the unstable window, the S plot shows the required slope is \u1e23(d) = 185000\n(or Vh = 1.85).\nNext, let \u1e23(d) = 185000, the sampled-data poles are -0.982, -0.049, 0.881, and 0.986, indicating\nthat PDB is avoided as expected. The S plot also shows that if \u03c9p /\u03c9s > 0.54 or \u03c9p /\u03c9s < 0.36, PDB\nis avoided by operating outside the unstable window. Let \u03c9p = 0.55\u03c9s , for example, the sampleddata poles are -0.991, -0.036, 0.882, and 0.986, indicating that PDB is avoided as expected.\n\u2737\n\n6\n\nConclusion\n18\n\n\f5\n\n2\n\nx 10\n\n1.8\n\nSlope\n\n1.6\n\n1.4\n\n1.2\n\n1\n\n0.8\n\n0.6\n0.1\n\n0.2\n\n0.3\n\n0.4\n\n0.5\n0.6\n\u03c9 /\u03c9\np\n\n0.7\n\n0.8\n\n0.9\n\n1\n\ns\n\nFigure 18: The intersection of S(\u22121, 0.75, \u03c9p ) (solid line) and \u1e23(d) (dashed line) shows the unstable\nwindow of \u03c9p \u2208 (0.36, 0.54)\u03c9s .\nSampled-data modeling and harmonic balance modeling are applied to analyze ACMC buck converters. In the sampled-data model, the system dynamics is derived directly and exactly from the\nexact switching model. The orbital nature of the nominal periodic solution is preserved. Orbital\nstability is studied and is unrelated to the ripple size of the current-loop compensator output. A\nnew continuous-time model \"lifted\" from the sampled-data model is also derived, and has frequency\nresponse matched with experimental data reported previously. An unstable window of \u03c9p (currentloop compensator pole) which leads to PDB is found by simulations. PDB can be predicted by\nthe sampled-data model, the lifted model and the harmonic balance model, but not the average\nmodel if the system dimension is not increased. Similar analysis can be applied to other types of\nconverters.\nAccurate PDB boundary conditions, such as (7), (8), (12)-(15) are derived. The boundary\nconditions, which also lead to a new \"S plot\", greatly assist converter design to avoid instability,\njust like the popular Bode plot. The S plot has many expressions: (7) is for any DC-DC converters\nand is exact, (8) and (12)-(15) are for buck converters, (8) is exact in terms of matrices, (12) is\nexact in terms of signal harmonics, and (13)-(15) are approximate.\nWith some converter parameters, the average model may show frequency responses matched\nwith experimental data. The good match in one condition does not necessarily mean that the good\nmatch occurs in all other conditions. If one converter parameter is adjusted such that the converter\nhas a negative real sampled-data pole, the average model without increased system dimension does\nnot accurately predict the converter dynamics. A negative real sampled-data pole implies that the\nsystem is oscillatory. The traditional average model without increased system dimension does not\nhave a corresponding single pole mapped from the negative real sampled-data pole. This deficiency\nis removed in the lifted model. In the lifted model, the system dimension is increased to generate\nadditional degree of freedom to have better and matched frequency response. Therefore, if the\nconverter does not have a negative real sampled-data pole, the average model is adequate. If the\nconverter has a negative real sampled-data pole, the sampled-data and the lifted models will give\nmore accurate results.\nThe following design procedure for ACMC is suggested. First, use (14) or (15) for an initial\ndesign. Compared with the exact condition (12), the conditions (14) and (15) are conservative,\nbut they are not as conservative as the traditional guideline (16). Next, use the S plot (8) or (12),\nas a function of D or \u03c9p , to confirm that PDB is avoided. Increase the ramp slope above the S\n\n19\n\n\fplot to have sufficient stability margin. The S plot can be also used for pole assignment. If an\nunstable window of \u03c9p exists, generally between 0.3\u03c9s and 0.5\u03c9s , operate outside the window or\nadjust converter parameters according to (14), such as decrease Kc Rs vs , or increase \u03c9z L. Then,\nplot the frequency response of the lifted model (6) to assist the voltage-loop compensation design.\nKnowledge about the sampled-data pole locations are also useful for digital control of the converter.\n\nReferences\n[1] C.-C. Fang and E. H. Abed, \"Saddle-node bifurcation and Neimark bifurcation in PWM DCDC converters,\" in Nonlinear Phenomena in Power Electronics: Bifurcations, Chaos, Control,\nand Applications, S. Banerjee and G. C. Verghese, Eds. New York: Wiley, 2001, pp. 229\u2013240.\n[2] A. Brown and R. D. Middlebrook, \"Sampled-data modelling of switching regulators,\" in Proc.\nIEEE PESC, 1981, pp. 349\u2013369.\n[3] G. C. Verghese, M. Elbuluk, and J. G. Kassakian, \"A general approach to sample-data modeling for power electronic circuits,\" IEEE Trans. Power Electron., vol. 1, no. 2, pp. 76\u201389,\n1986.\n[4] C.-C. Fang, \"Sampled-data analysis and control of DC-DC switching converters,\" Ph.D.\ndissertation, Dept. of Elect. Eng., Univ. of Maryland, College Park, 1997, available:\nhttp://www.lib.umd.edu/drum/, also published by UMI Dissertation Publishing in 1997.\n[5] C.-C. Fang and E. H. Abed, \"Sampled-data modeling and analysis of power stages of PWM\nDC-DC converters,\" Int. J. of Electron., vol. 88, no. 3, pp. 347\u2013369, March 2001.\n[6] --, \"Sampled-data modeling and analysis of closed-loop PWM DC-DC converters,\" in Proc.\nIEEE ISCAS, vol. 5, 1999, pp. 110\u2013115.\n[7] C.-C. Fang, \"Sampled-data modeling and analysis of one-cycle control and charge control,\"\nIEEE Trans. Power Electron., vol. 16, no. 3, pp. 345\u2013350, May 2001.\n[8] I. Koll\u00e1r, G. Franklin, and R. Pintelon, \"On the equivalence of z-domain and s-domain models\nin system identification,\" in IEEE Instrumentation and Measurement Technology Conference,\nJune 1996, pp. 14\u201319.\n[9] L. H. Dixon, \"Average current-mode control of switching power supplies,\" Unitrode Power\nSupply Design Seminar Handbook, 1990.\n[10] J. Sun and R. M. Bass, \"Modeling and practical design issues for average current control,\" in\nProc. IEEE APEC, 1999, pp. 980\u2013986.\n[11] C. Sun, B. Lehman, and R. Ciprian, \"Dynamic modeling and control in average current mode\ncontrolled PWM DC/DC converter,\" in Proc. IEEE PESC, 1999, pp. 1152\u20131157.\n[12] P. Cooke, \"Modeling average current mode control,\" in Proc. IEEE APEC, 2000, pp. 256\u2013262.\n[13] T. Suntio, J. Lempinen, I. Gadoura, and K. Zenger, \"Dynamic effects of inductor current ripple\nin average current mode control,\" in Proc. IEEE PESC, 2001, pp. 1259\u20131264.\n[14] R. Li, T. O'Brien, J. Lee, and J. Beecroft, \"A unified small signal analysis of DC-DC converters\nwith average current mode control,\" in IEEE Energy Conversion Congress and Exposition,\n2009, pp. 647\u2013654.\n20\n\n\f[15] --, \"Effects of circuit and operating parameters on the small-signal dynamics of averagecurrent-mode-controlled DC-DC converters,\" in IEEE 8th International Conference on Power\nElectronics and ECCE Asia, 2011, pp. 60\u201367.\n[16] W. Tang, F. C. Lee, and R. B. Ridley, \"Small-signal modeling of average current-mode control,\"\nIEEE Trans. Power Electron., vol. 8, no. 2, pp. 112\u2013119, 1993.\n[17] Y.-S. Jung, J.-Y. Lee, and M.-J. Youn, \"A new small-signal modeling of averaging current\nmode control,\" in Proc. IEEE PESC, 1998, pp. 1118\u20131124.\n[18] R. B. Ridley, \"A new, continuous-time model for current-mode control,\" IEEE Trans. Power\nElectron., vol. 6, no. 2, pp. 271\u2013280, 1991.\n[19] F. D. Tan and R. D. Middlebrook, \"Unified modeling and measurement of current-programmed\nconverters,\" in Proc. IEEE PESC, 1993, pp. 380\u2013387.\n[20] J. Sun and B. Choi, \"Averaged modeling and switching instability prediction for peak current\ncontrol,\" in Proc. IEEE PESC, 2005, pp. 2764\u20132770.\n[21] C.-C. Fang and E. H. Abed, \"Harmonic balance analysis and control of period doubling bifurcation in buck converters,\" in Proc. IEEE ISCAS, vol. 3, May 2001, pp. 209\u2013212.\n[22] C.-C. Fang, \"Modeling and instability of average current control,\" in International Power\nElectronics And Motion Control Conference, 2002, paper SSIN-03.\n[23] J. Li and F. C. Lee, \"New modeling approach and equivalent circuit representation for currentmode control,\" IEEE Trans. Power Electron., vol. 25, no. 5, pp. 1218\u20131230, 2010.\n[24] F. Yu, \"Modeling of V2 control with composite capacitors and average current mode control,\"\nMaster's thesis, Virginia Polytechnic Institute and State University, Blacksburg, VA, May\n2011.\n\n21\n\n\f"}