{"id": "http://arxiv.org/abs/1108.1554v1", "guidislink": true, "updated": "2011-08-07T16:52:18Z", "updated_parsed": [2011, 8, 7, 16, 52, 18, 6, 219, 0], "published": "2011-08-07T16:52:18Z", "published_parsed": [2011, 8, 7, 16, 52, 18, 6, 219, 0], "title": "A Stochastic Calculus for Network Systems with Renewable Energy Sources", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1108.2047%2C1108.3738%2C1108.2439%2C1108.1371%2C1108.0131%2C1108.2733%2C1108.3419%2C1108.4993%2C1108.4263%2C1108.4286%2C1108.0100%2C1108.1361%2C1108.0669%2C1108.4465%2C1108.0629%2C1108.3673%2C1108.2724%2C1108.2154%2C1108.6319%2C1108.5601%2C1108.4323%2C1108.4148%2C1108.3781%2C1108.6324%2C1108.2869%2C1108.3240%2C1108.5475%2C1108.2832%2C1108.0899%2C1108.4873%2C1108.4354%2C1108.6026%2C1108.3639%2C1108.5406%2C1108.2953%2C1108.3990%2C1108.2672%2C1108.0231%2C1108.0573%2C1108.2265%2C1108.3940%2C1108.4480%2C1108.2588%2C1108.1339%2C1108.0919%2C1108.3701%2C1108.2939%2C1108.2405%2C1108.3668%2C1108.3500%2C1108.5950%2C1108.5966%2C1108.2288%2C1108.3645%2C1108.1551%2C1108.0759%2C1108.2458%2C1108.1770%2C1108.3719%2C1108.1885%2C1108.0074%2C1108.2201%2C1108.5439%2C1108.0245%2C1108.0292%2C1108.0615%2C1108.1042%2C1108.2351%2C1108.4487%2C1108.4622%2C1108.4905%2C1108.1369%2C1108.1983%2C1108.5958%2C1108.2368%2C1108.5445%2C1108.3061%2C1108.1237%2C1108.4551%2C1108.3893%2C1108.0122%2C1108.3094%2C1108.2096%2C1108.5379%2C1108.5211%2C1108.3501%2C1108.1554%2C1108.0380%2C1108.1684%2C1108.3882%2C1108.3766%2C1108.3389%2C1108.3151%2C1108.1242%2C1108.1015%2C1108.2250%2C1108.2426%2C1108.0111%2C1108.4923%2C1108.1228%2C1108.1708&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "A Stochastic Calculus for Network Systems with Renewable Energy Sources"}, "summary": "We consider the performance modeling and evaluation of network systems\npowered with renewable energy sources such as solar and wind energy. Such\nenergy sources largely depend on environmental conditions, which are hard to\npredict accurately. As such, it may only make sense to require the network\nsystems to support a soft quality of service (QoS) guarantee, i.e., to\nguarantee a service requirement with a certain high probability. In this paper,\nwe intend to build a solid mathematical foundation to help better understand\nthe stochastic energy constraint and the inherent correlation between QoS and\nthe uncertain energy supply. We utilize a calculus approach to model the\ncumulative amount of charged energy and the cumulative amount of consumed\nenergy. We derive upper and lower bounds on the remaining energy level based on\na stochastic energy charging rate and a stochastic energy discharging rate. By\nbuilding the bridge between energy consumption and task execution (i.e.,\nservice), we study the QoS guarantee under the constraint of uncertain energy\nsources. We further show how performance bounds can be improved if some strong\nassumptions can be made.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1108.2047%2C1108.3738%2C1108.2439%2C1108.1371%2C1108.0131%2C1108.2733%2C1108.3419%2C1108.4993%2C1108.4263%2C1108.4286%2C1108.0100%2C1108.1361%2C1108.0669%2C1108.4465%2C1108.0629%2C1108.3673%2C1108.2724%2C1108.2154%2C1108.6319%2C1108.5601%2C1108.4323%2C1108.4148%2C1108.3781%2C1108.6324%2C1108.2869%2C1108.3240%2C1108.5475%2C1108.2832%2C1108.0899%2C1108.4873%2C1108.4354%2C1108.6026%2C1108.3639%2C1108.5406%2C1108.2953%2C1108.3990%2C1108.2672%2C1108.0231%2C1108.0573%2C1108.2265%2C1108.3940%2C1108.4480%2C1108.2588%2C1108.1339%2C1108.0919%2C1108.3701%2C1108.2939%2C1108.2405%2C1108.3668%2C1108.3500%2C1108.5950%2C1108.5966%2C1108.2288%2C1108.3645%2C1108.1551%2C1108.0759%2C1108.2458%2C1108.1770%2C1108.3719%2C1108.1885%2C1108.0074%2C1108.2201%2C1108.5439%2C1108.0245%2C1108.0292%2C1108.0615%2C1108.1042%2C1108.2351%2C1108.4487%2C1108.4622%2C1108.4905%2C1108.1369%2C1108.1983%2C1108.5958%2C1108.2368%2C1108.5445%2C1108.3061%2C1108.1237%2C1108.4551%2C1108.3893%2C1108.0122%2C1108.3094%2C1108.2096%2C1108.5379%2C1108.5211%2C1108.3501%2C1108.1554%2C1108.0380%2C1108.1684%2C1108.3882%2C1108.3766%2C1108.3389%2C1108.3151%2C1108.1242%2C1108.1015%2C1108.2250%2C1108.2426%2C1108.0111%2C1108.4923%2C1108.1228%2C1108.1708&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We consider the performance modeling and evaluation of network systems\npowered with renewable energy sources such as solar and wind energy. Such\nenergy sources largely depend on environmental conditions, which are hard to\npredict accurately. As such, it may only make sense to require the network\nsystems to support a soft quality of service (QoS) guarantee, i.e., to\nguarantee a service requirement with a certain high probability. In this paper,\nwe intend to build a solid mathematical foundation to help better understand\nthe stochastic energy constraint and the inherent correlation between QoS and\nthe uncertain energy supply. We utilize a calculus approach to model the\ncumulative amount of charged energy and the cumulative amount of consumed\nenergy. We derive upper and lower bounds on the remaining energy level based on\na stochastic energy charging rate and a stochastic energy discharging rate. By\nbuilding the bridge between energy consumption and task execution (i.e.,\nservice), we study the QoS guarantee under the constraint of uncertain energy\nsources. We further show how performance bounds can be improved if some strong\nassumptions can be made."}, "authors": ["Kui Wu", "Yuming Jiang", "Dimitri Marinakis"], "author_detail": {"name": "Dimitri Marinakis"}, "author": "Dimitri Marinakis", "arxiv_comment": "10 pages, 1 figure", "links": [{"href": "http://arxiv.org/abs/1108.1554v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1108.1554v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "cs.PF", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "cs.PF", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "C.4; G.3", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1108.1554v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1108.1554v1", "journal_reference": null, "doi": null, "fulltext": "A Stochastic Calculus for Network Systems with\nRenewable Energy Sources\nKui Wu\n\nYuming Jiang\n\nDimitri Marinakis\n\narXiv:1108.1554v1 [cs.PF] 7 Aug 2011\n\nDept. of Computer Science\nQ2S Center of Excellence\nDept. of Computer Science\nUniversity of Victoria\nNorwegian University of Science and Technology\nUniversity of Victoria\nVictoria, British Columbia, Canada\nTrondheim, Norway\nVictoria, British Columbia, Canada\n\nAbstract-We consider the performance modeling and evaluation of network systems powered with renewable energy sources\nsuch as solar and wind energy. Such energy sources largely\ndepend on environmental conditions, which are hard to predict\naccurately. As such, it may only make sense to require the\nnetwork systems to support a soft quality of service (QoS)\nguarantee, i.e., to guarantee a service requirement with a certain\nhigh probability. In this paper, we intend to build a solid\nmathematical foundation to help better understand the stochastic\nenergy constraint and the inherent correlation between QoS and\nthe uncertain energy supply. We utilize a calculus approach\nto model the cumulative amount of charged energy and the\ncumulative amount of consumed energy. We derive upper and\nlower bounds on the remaining energy level based on a stochastic\nenergy charging rate and a stochastic energy discharging rate.\nBy building the bridge between energy consumption and task\nexecution (i.e., service), we study the QoS guarantee under the\nconstraint of uncertain energy sources. We further show how\nperformance bounds can be improved if some strong assumptions\ncan be made.\nIndex Terms-Stochastic Network Calculus, Performance Evaluation, Renewable Energy, Energy Scheduling\n\nI. I NTRODUCTION\nIn the last decades, there have been increasing demands on\ncomputing, communication and storage systems. The strong\ndemands drive modern IT infrastructures to extend and scale\nat an unprecedented speed, raising serious \"green\" related concerns about high energy consumption and greenhouse emission. Addressing this problem, the use of renewable energy\nsources, such as solar and wind energy, plays an important role\nin the support of sustainable computing [5]. Various energy\nharvesting devices have been developed and broadly used\nin real-world applications. For example, to support perpetual\nenvironmental monitoring, solar energy has been used to\npower tiny sensor nodes deployed in the wilderness [8].\nWhile the benefit of using renewable energy is clear, its\napplication can pose great challenges in terms of assuring a\nsatisfactory quality of services (QoS) for computing systems.\nFirst, renewable energy sources are generally unreliable and\nhard to predict. The uncertainty in the energy supply makes\nit extremely hard to support strict QoS requirements. As a\nresult, it only makes sense to demand the system to support\na soft QoS guarantee, i.e., to guarantee the QoS requirement\n(e.g., delay, throughput) with a certain probability. Second,\nalthough modern computing and communication devices could\nbe equipped with rate-adaptive capabilities [23], allowing\nthe devices to \"smartly\" schedule the execution of various\ntasks, it is nevertheless non-trivial to design good scheduling\n\nalgorithms that can effectively utilize a limited and variable\nenergy resource. Many aspects come into play, including for\nexample, the predicted energy charging rate, the tolerable\nrange of a QoS guarantee, the rate-adaptive features of the\ndevice, and so on. Third, QoS support and task scheduling\nbecome even harder when the network includes multiple nodes\npowered by renewable energy, because the task scheduling and\nenergy management of one node may have direct impact on the\nother nodes. Such dependency makes QoS support extremely\nhard.\nGiven these challenges, we perceive the strong need for\na generic analytical framework for performance modeling\nand evaluation of a network system using renewable energy\nsources. Such a theoretical model should (1) capture the\nstochastic features in energy replenishment and energy consumption, (2) provide good guidelines on the schedulability\nof given tasks under uncertain energy constraints, (3) be\napplicable to a large group of systems where the power-rate\nfunction [11], [23] may be of different forms, and (4) be able\nto analyze a single node as well as a network system.\nVarious methods have been developed for task scheduling and performance analysis of energy constrained system,\nincluding for example Markov chain based methods [16],\n[20], calculus approaches [11], [23], prediction-based approaches [7], [21], and so on. Nevertheless, no analytical\nmodel so far is sufficient to meet all the above requirements.\nWe are thus motivated to develop a more generic analytical\nframework to fill the vacancy. In this paper, we make the\nfollowing contributions:\n\u2022 We build a theoretical model for performance evaluation\nof network systems with renewable energy sources. Our\nmodel is based on recent progress in stochastic network\ncalculus, but it much extends the concepts of the traditional stochastic network calculus by introducing energy charging/discharging models. Such extension is nontrivial since the new concepts require special treatment in\nthe derivation of performance bounds.\n\u2022 We derive the stochastic upper and lower bounds on\na node's residual energy level. These bounds provide\nfundamental guidance in the energy management of a\nsystem with renewable energy supply.\n\u2022 By using a generic power-rate function to bridge the\ntask execution and its energy consumption, we derive\nthe stochastic performance bounds on delay and system\nbacklog. We study both the single-node case and the\nnetwork case.\n\n\f2\n\nWe extend the model to analyze systems that utilize\nmultiple energy sources.\n\u2022 We point out a method to improve the performance\nbounds if some strong assumptions, such as independence\nbetween multiple energy sources, can be made.\nThe rest of the paper is organized as follows. We introduce\nthe basic notations in Section II. In Section III, we present new\nenergy models to capture the stochastic features in the energy\ncharging and discharging processes. Based on the new energy\nmodels, we derive the stochastic bounds on a node's remaining\nenergy. We analyze the performance bounds of a single node\nwith respect to delay and system backlog in Section IV. The\nperformance of a network system is provided in Section V.\nMethods of handling multiple energy sources and improving\nperformance bounds are introduced in Sections VI and VII,\nrespectively. Related work is discussed in Section VIII. The\npaper is concluded in Section IX.\n\u2022\n\nII. BASIC N OTATIONS\nWe first introduce the basic notations following the convention of stochastic network calculus [9], [10], [13]. We denote\nby F the set of non-negative, wide-sense increasing functions,\ni.e.,\nF = {f (*) : \u22000 \u2264 x \u2264 y, 0 \u2264 f (x) \u2264 f (y)},\nand by F\u0304 the set of non-negative, wide-sense decreasing\nfunctions, i.e.,\nF\u0304 = {f (*) : \u22000 \u2264 x \u2264 y, 0 \u2264 f (y) \u2264 f (x)}.\n\nbelongs to F , and its complementary distribution function,\ndenoted by\nF\u0304X (x) \u2261 P rob{X > x},\nbelongs to F\u0304 .\nFor any function f (t), we use f \u2032 (t) to denote its derivative,\nif it exists.\nThe following operations will be used in this paper:\n\u2022 The (min, +) convolution of functions f and g under the\n(min, +) algebra [1], [4], [12] is defined as:\n0\u2264s\u2264t\n\n\u2022\n\n(1)\n\nThe (min, +) deconvolution of functions f and g is\ndefined as:\n(f \u2298 g)(t) \u2261 sup{f (t + s) \u2212 g(s)}.\n\n(2)\n\ns\u22650\n\u2022\n\nThe (max, +) convolution of functions f and g is defined\nas:\n \u0304\n(f \u2297g)(t)\n\u2261 sup {f (s) + g(t \u2212 s)}.\n(3)\n\n\u2022\n\nThe pointwise infimum or pointwise minimum of functions\nf and g is defined as\n\n0\u2264s\u2264t\n\n(f \u2227 g)(t) \u2261 min[f (t), g(t)].\nIn addition, we adopt:\n\nIII. S TOCHASTIC E NERGY M ODELS AND R ESIDUAL\nE NERGY\nA. Stochastic Energy Charging and Discharging Models\nDefinition 1: The stochastic energy charging model: The\ncumulative energy amount C(t) is said to follow stochastic\nenergy charging (s.e.c.) curves \u03b11 \u2208 F and \u03b12 \u2208 F with\nbounding functions f1 \u2208 F\u0304 and f2 \u2208 F\u0304 , respectively, denoted\nby\nC \u223csec < f1 , \u03b11 , f2 , \u03b12 >,\nif for all t \u2265 s \u2265 0 and all x \u2265 0,\n\nFor any random variable X, its distribution function, denoted\nby\nFX (x) \u2261 P rob{X \u2264 x},\n\n(f \u2297 g)(t) \u2261 inf {f (s) + g(t \u2212 s)}.\n\n[x]+ \u2261 max{x, 0},\n\u2022 [x]1 \u2261 min{x, 1}.\nThroughout this paper, we assume that the energy charging\ncurve and the energy discharging curve, both of which will\nbe defined later, are non-negative and wide-sense increasing\nfunctions. In this paper, C(t) and C \u2217 (t) are used to denote the\ncumulative energy amount that has been charged and depleted\nin the time interval (0, t], respectively. For any 0 \u2264 s \u2264 t,\nlet C(s, t) \u2261 C(t) \u2212 C(s) and C \u2217 (s, t) \u2261 C \u2217 (t) \u2212 C \u2217 (s).\nSimilarly, A(t) and A\u2217 (t) are used to denote the cumulative\namount of data traffic that has arrived and departed in time\ninterval (0, t], respectively, and S(t) is used to denote the\ncumulative amount of service provided by the system in time\ninterval (0, t]. For any 0 \u2264 s \u2264 t, let A(s, t) \u2261 A(t) \u2212\nA(s), A\u2217 (s, t) \u2261 A\u2217 (t)\u2212A\u2217 (s), and S(s, t) \u2261 S(t)\u2212S(s). By\ndefault, A(0) = A\u2217 (0) = S(0) = 0, and C(0) = C \u2217 (0) = 0.\n\u2022\n\n(4)\n\nP rob{ inf [C(s, t) \u2212 \u03b11 (t \u2212 s) > x]} \u2265 f1 (x),\n\n(5)\n\nP rob{ sup [C(s, t) \u2212 \u03b12 (t \u2212 s) > x]} \u2264 f2 (x).\n\n(6)\n\n0\u2264s\u2264t\n\nand\n0\u2264s\u2264t\n\nWe call the curves \u03b11 and \u03b12 the lower curve and the\nupper curve, respectively, and the functions f1 and f2 the\nlower bounding function and the upper bounding function,\nrespectively.\nRemark 1: The practical meaning of (5) is to lower bound\nthe cumulative amount of charged energy, i.e., the energy\nharvester should provide a minimal level of energy with a high\nprobability. The meaning of (6) is that the cumulative amount\nof charged energy may be upper bounded. For instance, in the\ncase of solar-powered sensor nodes, the total charged energy\nshould not beyond the best case scenario, e.g., sunny all the\ntime.\nRemark 2: The (\u03c1, \u03c31 , \u03c32 )-source in the harvesting theory\n[11] is a special case of our stochastic energy charging model,\nby defining \u03b11 (t) = \u03c1t \u2212 \u03c31 , \u03b12 (t) = \u03c1t + \u03c32 , and setting the\nbounding functions to 0.\nDefinition 2: The stochastic energy discharging model:\nUnder the constraint of charged energy amount C(t), the\ncumulative discharged energy amount C \u2217 (t) is said to have\nstochastic energy discharging (s.e.d.) curves \u03b21 \u2208 F and\n\u03b22 \u2208 F with bounding functions g1 \u2208 F\u0304 and g2 \u2208 F\u0304 ,\nrespectively, denoted by\nC \u2217 \u223csed < g1 , \u03b21 , g2 , \u03b22 >,\n\n\f3\n\nif for all t \u2265 0 and all x \u2265 0,\nP rob{C \u2297 \u03b21 (t) \u2212 C \u2217 (t) > x} \u2265 g1 (x),\n\n(7)\n\nP rob{C \u2297 \u03b22 (t) \u2212 C \u2217 (t) > x} \u2264 g2 (x).\n\n(8)\n\nand\nWe call curves \u03b21 and \u03b22 the upper curve and the lower curve,\nrespectively, and the functions g1 , g2 the upper bounding\nfunction and the lower bounding function, respectively.\nRemark 3: The practical meaning of the above definition is\nas follows. If we use \u03b21 (t) to denote the cumulative virtual\nenergy discharging amount (i.e., the energy budget that a\nservice should follow), and if we want to use \u03b21 (t) to upper\nbound the actual discharged energy C \u2217 (t), then under the\nconstraint of cumulative charged energy amount C(t), at any\ntime instance t, we have\nC \u2217 (t) \u2264 \u03b21 (s) + C(t \u2212 s).\n\n(9)\n\nNote that we should not replace \u03b21 (s) with C \u2217 (s) since\notherwise we obtain C \u2217 (t \u2212 s) \u2264 C(t \u2212 s) for any time\ninterval (s, t], which is a constraint too restrictive. Because\nthe inequality (9) holds for any s \u2264 t, we have C \u2217 (t) \u2264\ninf 0\u2264s\u2264t {\u03b21 (s)+C(t\u2212s)}, which is C \u2217 (t) \u2264 C\u2297\u03b21 (t) by the\ndefinition of (min,+) convolution. Inequality (7) in Definition 2\nrepresents the stochastic version of the above relationship. In\npractice, we may also want to lower bound the discharged\nenergy (with a curve \u03b22 ) to effectively utilize the harvested\nenergy, since overcharged energy beyond the energy storage\ncapacity will be wasted. In this case, the stochastic lower\nbound is represented by the inequality (8).\nSince C(t) and C \u2217 (t) denote the cumulative amount of\ncharged energy and the cumulative amount of discharged\nenergy, respectively, the remaining energy amount, denoted\nby E(t), in the system at time t can be calculated as:\nE(t) = C(t) \u2212 C \u2217 (t).\n\n(10)\n\nB. Stochastic Analysis on Remaining Energy\nFor any energy-aware scheduling, we first need to understand the feasible energy depletion region. Particularly, we\nneed to answer the following question: what are the lower\nand upper bounds of P rob{E(t) > x}?\nThe practical meaning of the lower bound comes from\nreliability consideration: the remaining energy at any time\ninstance should be with a high probability larger than a\nminimal threshold value (called safety threshold) to guarantee\nthe reliable operation of the system. The upper bound is related\nto the effective use of the energy source: since the capacity of\nenergy storage is limited (in this case, x could be considered\nas the upper limit of the energy capacity), tasks should be\nscheduled to consume energy effectively so that the probability\nthat the system is overcharged is small.\nTo answer the above question, we start with the following\nlemma.\nLemma 1: Assume that the complementary cumulative distribution functions (CCDF) of random variables X, Y are\nF\u0304X \u2208 F\u0304 and F\u0304Y \u2208 F\u0304 , respectively. Assume that f1 (x) \u2264\nF\u0304X (x) \u2264 f2 (x) and g1 (x) \u2264 F\u0304Y (x) \u2264 g2 (x). Denote\n\nZ = X +Y . Then no matter whether X and Y are independent\nor not, there holds for \u2200x \u2265 0,\nF\u0304Z (x) \u2264 f2 \u2297 g2 (x),\n\n(11)\n\n \u0304 1 (x) \u2212 1.\nF\u0304Z (x) \u2265 f1 \u2297g\n\n(12)\n\nand\nThe proofs of all lemmas are referred to Appendix of this\npaper.\nTheorem 1: Assume that the system has an energy charging\nsource with cumulative charged energy amount C(t) \u223csec <\nf1 , \u03b11 , f2 , \u03b12 > and it provides service with cumulative\ndepleted energy amount C \u2217 (t) \u223csed < g1 , \u03b21 , g2 , \u03b22 >. The\nremaining energy amount of the system at any time instant t,\nE(t), is lower bounded by\n \u0304 1 (x \u2212 \u03b11 \u2298 \u03b21 (0)) \u2212 1,\nP rob{E(t) > x} \u2265 f1 \u2297g\n\n(13)\n\nand is upper bounded by\nP rob{E(t) > x} \u2264 f2 \u2297 g2 (x \u2212 \u03b12 \u2298 \u03b22 (0)),\n\n(14)\n\nProof: We only prove the lower bound, since the upper\nbound can be easily proved following the same argument using\nthe curves \u03b12 and \u03b22 , the bounding functions f2 and g2 , and\nInequality (11).\nFor any t \u2265 s > 0, we have\nE(t) =C(t) \u2212 C \u2217 (t)\n=C(t) \u2212 C \u2297 \u03b21 (t) + C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n= sup {C(s, t) \u2212 \u03b11 (t \u2212 s) + \u03b11 (t \u2212 s) \u2212 \u03b21 (t \u2212 s)}\n0\u2264s\u2264t\n\n+ C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n\u2265 sup { inf {C(s, t) \u2212 \u03b11 (t \u2212 s)}\n0\u2264s\u2264t 0\u2264s\u2264t\n\n+ \u03b11 (t \u2212 s) \u2212 \u03b21 (t \u2212 s)} + C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n= inf {C(s, t) \u2212 \u03b11 (t \u2212 s)} + sup {\u03b11 (t \u2212 s)\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n\u2212 \u03b21 (t \u2212 s)} + C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n= inf {C(s, t) \u2212 \u03b11 (t \u2212 s)} + sup{\u03b11 (t) \u2212 \u03b21 (t)}\n0\u2264s\u2264t\n\nt>0\n\n+ C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n= inf {C(s, t) \u2212 \u03b11 (t \u2212 s)} + C \u2297 \u03b21 (t) \u2212 C \u2217 (t)\n0\u2264s\u2264t\n\n+ \u03b11 \u2298 \u03b21 (0)\n(15)\nIf we consider inf 0\u2264s\u2264t {C(s, t) \u2212 \u03b11 (t \u2212 s)} and C \u2297 \u03b21 (t) \u2212\nC \u2217 (t) as two random variables depending on t, Inequality (13)\nfollows according to the definitions of s.e.c. and s.e.d. curves\nand Inequality (12) in Lemma 1.\nRemark 4: Theorem 1 provides the following fundamental\nguidance in the energy management of systems powered with\nrenewable energy:\n\u2022 Given the statistical feature of a renewable energy source\nand a safety threshold on remaining energy level, we\ncan find a suitable energy consumption budget to service\nrequirements (i.e., \u03b21 (t) in Theorem 1) based on (13),\nso that the system has sufficient energy with a certain\nprobability.\n\n\f4\n\n\u2022\n\n\u2022\n\nGiven the statistical feature of a renewable energy source\nand the maximum capacity of energy storage in the\nsystem, we can obtain a minimal energy expenditure rate\nbased on (14), such that the probability that the system\nis overcharged is lower than a certain probability.\nOverall, given a renewable energy source, a safety threshold energy level, and an upper limit for energy storage,\nthe two inequalities in Theorem 1 describe the stochastically feasible region of energy budget for services.\n\nIV. S TOCHASTIC S ERVICE G UARANTEE\nN ODE\n\nOF\n\nif during any period (s, t] and for any x \u2265 0, it holds [9], [10]\nP rob{S(s, t) < \u03b2(t \u2212 s) \u2212 x} \u2264 g(x).\n\nRemark 6: The s.s.c. model is to decouple the service and\ntraffic arrivals. It is useful in energy outage analysis as shown\nlater in Section IV-C.\nThe following measures are of interest in service guarantee\nanalysis under network calculus:\n\u2022 The backlog B(t) in the system at time t is defined as:\n\nA S INGLE\n\nB(t) = A(t) \u2212 A\u2217 (t).\n\u2022\n\nA. System Model\nWith the above energy models, we next study the problem\nof providing a stochastic service guarantee given an uncertain\nenergy supply. We start with the single-node case.\nFor the paper to be self-contained, we need to briefly\nintroduce the core concepts in traditional stochastic network calculus\u2013 stochastic traffic arrival curves and service\ncurves [10]. For traffic arrivals, we have the following model.\nDefinition 3: The v.b.c. model: A flow A(t) is said to\nhave a virtual-backlog-centric (v.b.c.) stochastic arrival curve\n\u03b1 \u2208 F with bounding function f \u2208 F\u0304 , denoted by\nA \u223cvb < f, \u03b1 >,\nif for all t \u2265 0 and all x \u2265 0, it holds [9], [10]\nP rob{ sup [A(s, t) \u2212 \u03b1(t \u2212 s)] > x} \u2264 f (x).\n\n(16)\n\n0\u2264s\u2264t\n\nFor service models, we have the followings.\nDefinition 4: The s.c. model: A server is said to provide\na flow A(t) with a stochastic service curve (s.c.) \u03b2 \u2208 F with\nbounding function g \u2208 F\u0304, denoted by\nS \u223csc < g, \u03b2 >,\nif for all t \u2265 0 and all x \u2265 0, it holds [9], [10]\nP rob{ sup [A \u2297 \u03b2(s) \u2212 A\u2217 (s)] > x} \u2264 g(x).\n\n(17)\n\n0\u2264s\u2264t\n\nRemark 5: The s.c. model is adopted in this paper for\nease of expressing the results, particularly the concatenation\nproperty for the network case analysis in Section V. However,\nthe s.c. model may be too restrictive. In the literature, a\nvariation of the model is available, which is called weak\nstochastic service curve (w.s) in [9]. The w.s. model is much\nless restrictive and has been widely adopted in the stochastic\nnetwork calculus literature. We would like to stress that the\nw.s. model can also be used here, and it can be verified (e.g.\nsee [9]) that the delay and backlog bound results in this paper\nremain unchanged with the w.s. model. The affected one is\nthe analysis on the network case, which would have much\ncomplicated expression.\nDefinition 5: The s.s.c. model: A server is said to provide\na flow A(t) with a strict stochastic service curve (s.s.c.) \u03b2 \u2208 F\nwith bounding function g \u2208 F\u0304 , denoted by\nS \u223cssc < g, \u03b2 >,\n\n(18)\n\n(19)\n\nThe delay D(t) at time t is defined as:\nD(t) = inf{\u03c4 \u2265 0 : A(t) \u2264 A\u2217 (t + \u03c4 )}.\n\n(20)\n\nB. Stochastic Service Guarantee\nTo ease description, we define the following terms:\nDefinition 6: Power-rate function [23] is a function that\ntranslates the amount of service to the amount of consumed\nenergy. We use a generic notation P to denote the power-rate\nfunction.\nDefinition 7: Energy-oblivious service curve of a system\nis the service curve that the system would have if there were\nno energy constraint.\nNote that most modern devices, such as computer servers\nand wireless transceivers, have the capability of adjusting\nprocessing/transmission rate. Associated with a rate, there\nis a corresponding power expenditure that is governed by\nthe power rate function. Generally speaking, a low processing/transmission rate requires low energy consumption. The\npower-rate function is system dependent. For example, for\nmost encoding schemes in wireless communication, the required power is a convex function of the rate [23]. In addition,\nthere are some devices, e.g., Atmel microprocessors, whose\nenergy consumption is dominated by its on state. That is, as\nlong as the device is powered on, it consumes energy at a\nroughly constant speed, no matter whether or not its CPU\nremains idle or executes tasks. To avoid those different details,\nwe use a generic notation P to build a broadly-applicable\nmodel.\nGiven a cumulative energy amount C(t), the service amount\nthat C(t) can support, denoted as SC (t), can thus be calculated\nas:\nZ t\nSC (t) =\nP \u22121 (C \u2032 (x))dx,\n(21)\n0\n\nSimilarly, given a service amount S(t), the corresponding\nenergy consumption amount, denoted by CS\u2217 , can be calculated\nas:\nZ t\n\u2217\nP(S \u2032 (x))dx.\n(22)\nCS (t) =\n0\n\nRemark 7: We assume that the inverse of power rate function P, the derivative of the energy charging curve C, and the\nderivative of the service curve S, all exist. This assumption has\nbeen used and justified in [23]. This assumption is reasonable,\nbecause (1) there is usually a one-to-one mapping between\nthe served data amount and the used energy amount, and (2)\ncumulative energy charging amount and cumulative service\namount are mostly continuous. Nevertheless, even if the above\n\n\f5\n\nassumption may not be true in some specific situations,\nnumerical approximation can be used to estimate SC and CS\u2217 .\nIn the rest of the paper, we will use Equations (21) and (22)\nwithout giving further explanation.\nWith all notations being introduced, we are ready to answer\nthe following question regarding a QoS guarantee:\nAssume that a data flow A(t) with the traffic arrival\ncurve A \u223cvb < f, \u03b1 > is input into a node, which has\nan energy-oblivious service curve S \u223csc < g, \u03b2 >. Assume\nthat the system is powered by an energy source following\nC(t) \u223csec < f1 , \u03b11 , f2 , \u03b12 >. For any time t, what are the\nstochastic bounds on the flow's delay D(t) and backlog B(t)?\nThe main difficulty in solving the above question is that the\ndata flow may not be able to get a service following the service\ncurve \u03b2 due to the energy constraint. In other words, a service\nis possible only if the system has enough energy. By \"enough\nenergy\", we mean that the system's energy level is above\nthe safety threshold. To simplify presentation, we assume the\nsafety threshold value is 0 in this section. Otherwise, trivial\nmodification is required for the following performance results.\nWe have the following important technical lemmas.\nLemma 2: Assume that functions f1 , f2 , f3 \u2208 F , and assume that f1 (0) = f2 (0) = f3 (0) = 0. For any t \u2265 0, it holds\nthat\nf1 \u2297 (f2 \u2227 f3 )(t) \u2264 (f1 \u2297 f2 (t)) \u2227 f3 (t)\n(23)\nLemma 3: If X1 \u2265 X2 \u2265 0 and X3 \u2265 X4 \u2265 0, it holds\nX1 \u2227 X4 \u2212 X2 \u2227 X3 \u2264 X1 \u2212 X2 + X3 \u2212 X4 .\n\n(24)\n\nLemma 4: [10] Consider a random variable X. For any x \u2265\n0, P rob{[X]+ > x} = P rob{X > x}.\nTheorem 2: Assume that a node has an energy-oblivious\nservice curve S \u223csc < g, \u03b2 >. Assume that the node\nis powered with an energy source following C(t) \u223csec <\nf1 , \u03b11 , f2 , \u03b12 >. The actual service available to the task,\ndenoted by Se (t), follows Se (t) \u223csc < \u0121, \u03b2 \u2227 \u03b1 \u03072 >, where\n\u0121(x) = g \u2297 f2 (x),\nZ t\n\u03b1 \u03072 (t) =\nP \u22121 (\u03b12 (x))dx.\n\n(25)\n(26)\n\n0\n\nProof: It is clear that at any time t \u2265 0, the actual service\nprovided by the system,\n\u001a\nS(t)\nif S(t) \u2264 SC (t)\nSe (t) =\n(27)\nSC (t)\notherwise,\n\nNote that in the above, the first inequality is due to\nLemma 2, the second equality is because that A\u2217 (s) = Se (s),\nand the last inequality is based on Lemma 3.\nWe thus have\nsup {A \u2297 (\u03b2 \u2227 \u03b1 \u03072 )(s) \u2212 A\u2217 (s)}\n\n0\u2264s\u2264t\n\n\u2264 sup {[A \u2297 \u03b2(s) \u2212 A\u2217 (s)]+ + [SC (s) \u2212 \u03b1 \u03072 (s)]+ }\n0\u2264s\u2264t\n\n\u2264 sup {[A \u2297 \u03b2(s) \u2212 A\u2217 (s)]+ } + sup {[SC (s) \u2212 \u03b1 \u03072 (s)]+ }\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n(29)\nBased on the definitions of the s.c. curve and the s.e.c. curve,\nand Lemma 4, we have for any x > 0, 0 \u2264 s \u2264 t,\nP rob{ sup [A \u2297 \u03b2(s) \u2212 A\u2217 (s)]+ > x} \u2264 g(x),\n\n(30)\n\n0\u2264s\u2264t\n\nP rob{ sup [SC (s) \u2212 \u03b1 \u03072 (s)]+ > x} \u2264 f2 (x).\n\n(31)\n\n0\u2264s\u2264t\n\nFor (31), we remind the readers that the calculations of SC\nand \u03b1 \u03072 do not change the bounding function. The theorem\nfollows based on (30), (31), Inequality (11), and the definition\nof s.c. service curve.\nWe have the following theorem for service guarantee.\nTheorem 3: Assume that a data flow A(t) with the traffic\narrival curve A \u223cvb < f, \u03b1 > is input into a node. Assume\nthat the node has an energy-oblivious service curve S \u223csc <\ng, \u03b2 >. Assume that the node is powered with energy supply\nfollowing C(t) \u223csec < f1 , \u03b11 , f2 , \u03b12 >.\n\u2022 For any time t \u2265 0, x \u2265 0,\nP rob{D(t) > h(\u03b1(t) + x, \u03b2 \u2227 \u03b1 \u03072 (t))} \u2264 f \u2297 \u0121(x) (32)\n\n\u2022\n\nwhere \u0121 is defined with (25), \u03b1 \u03072 is defined with (26),\nand h(\u03b1(t) + x, \u03b2 \u2227 \u03b1 \u03072 (t)) is the maximum horizontal\ndistance between functions \u03b1(t) + x and \u03b2 \u2227 \u03b1 \u03072 (t).\nFor any t > 0 and x \u2265 0, the backlog B(t) is bounded\nby\nP rob{B(t) > x} \u2264 f \u2297 \u0121(x \u2212 \u03b1 \u2298 (\u03b2 \u2227 \u03b1 \u03072 )(0)). (33)\n\nProof: Theorem 3 follows directly by applying Theorem 2\nto existing results of service guarantee in traditional stochastic\nnetwork calculus (refer to Chapter 5 of [10]).\n\nC. The Danger of Energy-Oblivious Service\nAn argument for using deterministic energy management is\nthat\nthe system would be safe if the average energy depletion\nwhere SC is defined by (refeq:SC). This is because if S(t) \u2264\nSC (t), the energy constraint does not play a role, and the rate equals the predicted energy replenishment rate. Since no\nactual service amount is equal to S(t). Otherwise, the actual absolute guarantee can be made on the accuracy of energy\nservice is equal to the amount allowed by the energy con- prediction, there is a chance that an energy outage occurs, i.e.,\nthe remaining energy-level is lower than the safety threshold.\nstraint, i.e., SC (t). In other words, Se (t) = S(t) \u2227 SC (t).\nNext, we prove that Se (t) \u223csc < \u0121, \u03b2 \u2227 \u03b1 \u03072 >. Denote the In this section, we show that the energy outage probability is\narrival flow as A(t) and the output flow as A\u2217 (t), which is non-negligible.\nTheorem 4: Assume that a node provides an energyequal to Se (t). For any time 0 \u2264 s \u2264 t, based on Lemma 2\noblivious service curve S \u223cssc < g, \u03b2 >. Assume that the\nand Lemma 3, we have\nnode is powered with energy supply\nR t following C(t) \u223csec <\nA \u2297 (\u03b2 \u2227 \u03b1 \u03072 )(s)\u2212A\u2217 (s) \u2264 (A \u2297 \u03b2(s)) \u2227 \u03b1 \u03072 (s) \u2212 A\u2217 (s)\nf1 , \u03b11 , f2 , \u03b12 >. Denote CS\u2217 (t) = 0 P(S \u2032 (x))dx, and E(t) =\n= (A \u2297 \u03b2(s)) \u2227 \u03b1 \u03072 (s) \u2212 S(s) \u2227 SC (s)\nC(t) \u2212 CS\u2217 (t). For any time t \u2265 0, given the energy safety\n\u2264 [A \u2297 \u03b2(s) \u2212 A\u2217 (s)]+ + [SC (s) \u2212 \u03b1 \u03072 (s)]+ threshold x \u2265 0,\n(28)\n\nP rob{E(t) < x} \u2265 1 \u2212 f2 \u2297 g(x \u2212 \u03b12 \u2298 \u03b2\u0307(0)),\n\n(34)\n\n\f6\n\nRt\nwhere \u03b2\u0307(t) = 0 P(\u03b2(x))dx.\nProof: For any t \u2265 s \u2265 0, we have\n\ncurve S i \u223csc < g i , \u03b2 i > to its input. Assume that each node\ni is powered with an energy supply following C i \u223csec <\nf1i , \u03b1i1 , f2i , \u03b1i2 >. The network guarantees to the flow a stochastic service curve S \u223csc < g, \u03b2 > with\n\nE(t) =C(t) \u2212 CS\u2217 (t)\n=C(t) \u2212 \u03b12 (t) + \u03b2\u0307(t) \u2212 CS\u2217 (t) + \u03b12 (t) \u2212 \u03b2\u0307(t)\n\u2264 sup {C(s, t) \u2212 \u03b12 (t \u2212 s)}\n\ng = \u0121 1 \u2297 \u0121 2 . . . \u2297 \u0121 N ,\n\n(37)\n\n\u03b2 = \u03b2\u0307 1 \u2297 \u03b2\u0307 2 . . . \u2297 \u03b2\u0307 N ,\n\n(38)\n\n\u0121 i (x) = g i \u2297 f2i (x),\n\n(39)\n\n0\u2264s\u2264t\n\n+ sup {\u03b2\u0307(s, t) \u2212 CS\u2217 (s, t)} + sup{\u03b12 (t) \u2212 \u03b2\u0307(t)}\n0\u2264s\u2264t\n\nt\u22650\n\nwhere\n\n= sup {C(s, t) \u2212 \u03b12 (t \u2212 s)}\n0\u2264s\u2264t\n\n+ sup {\u03b2\u0307(s, t) \u2212\n0\u2264s\u2264t\n\nCS\u2217 (s, t)}\n\n+ \u03b12 \u2298 \u03b2\u0307(0).\n\n(35)\n\nBased on Inequality (11), the definition of s.e.c. curve, and the\ndefinition of s.s.c. curve (we note again that the calculations\nof \u03b2\u0307 and CS\u2217 do not change the bounding function), we obtain\nfor any x > 0,\nP rob{E(t) > x} \u2264 f2 \u2297 g(x \u2212 \u03b12 \u2298 \u03b2\u0307(0)).\n\n(36)\n\nThe theorem follows.\nAs an example, assume that there exists an upper curve\non the energy charging rate of \u03b12 (t) = \u03c1t + \u03c3, with a\nbounding function f2 (x) = e\u2212(x+2) , where \u03c3 is a given\nsafety threshold energy level and \u03c1 is the average energy\ncharging rate. Assume that the node could provide energyoblivious service S R\u223cs.c. < \u03b2, g >, where g(x) = e\u2212(x+2) .\nt\nAssume that \u03b2\u0307(t) = 0 P(\u03b2(x))dx = \u03c1t. Clearly, the average\nenergy charging rate is equal to the average energy discharging\nrate and initially the energy level at the node is safe. With\nTheorem 4, however, it is easy to calculate that the energy\noutage probability is no less than 72.9%, regardless of the\ntime and the values of \u03c1 and \u03c3.\nRemark 8: Theorem 4 and the above example illustrate\nthe danger of energy-oblivious service. Since a service is\npractically feasible only if it does not cause an energy outage,\nany service scheduling algorithm should consider the energy\nconstraint. This is the main reason why in Section III the\nenergy discharging model is inherently coupled with the\nenergy charging model and why in our analysis for service\nguarantee, we enforce an energy constraint on the energyoblivious service.\nV. S TOCHASTIC S ERVICE G UARANTEE\nN ETWORKED S YSTEM\n\nFOR A\n\nIn the previous section, we analyzed the single node case.\nHere, we study the service guarantee question in a network\nfor which the network nodes are powered with a renewable\nenergy source. It is well-known that we cannot simply add\nthe delay bounds for each individual nodes to obtain the endto-end delay bound along a path [3], [12], since otherwise the\nnetwork-wide delay bounds would be too loose to be useful.\nAs a solution, the concatenation property of service curves\nshould be proved and applied [10].\nBased on Theorem 2 and the concatenation property of s.c.\nservice model, the following theorem holds immediately.\nTheorem 5: Consider a traffic flow passing through of a\nnetwork of N nodes in tandem. Assume that each node\ni(= 1, 2, . . . , N ) would provide an energy-oblivious service\n\n\u03b2\u0307 i (t) = \u03b2 i (t) \u2227\n\nZ\n\n0\n\nt\n\nP \u22121 (\u03b1i2 (x))dx.\n\n(40)\n\nRemark 9: Theorem 5 indicates that we can treat the concatenation of multiple nodes as a single system. To obtain the\nend-to-end performance, we just need to apply Theorem 5 into\nTheorem 3, that is, replacing \u0121 and \u03b2 \u2227 \u03b1 \u03072 (t) in Theorem 3\nwith g and \u03b2 in Theorem 5, respectively.\nRemark 10: In Sections IV and V, we only used the upper\ncurve of the charged energy amount to constrain a service.\nActually, another set of similar analysis could be done, if we\nuse the lower curve of the charged energy amount to constrain\na service. The practical meaning of this constraint is to avoid\novercharging the system and to effectively use the energy, i.e.,\nthe service should deplete the energy at a rate no less than the\nminimal charging rate.\nVI. N ODES P OWERED\n\nWITH\n\nM ULTIPLE E NERGY S OURCES\n\nIt is possibly that a network node might be charged with\nmultiple energy sources. For example, several types of energy\nsuch as solar, wind, vibrational, and thermal among others\ncan be scavenged from the surroundings of a sensor node to\nreplenish its battery [19]. In this case, we need to study the\nstatistical features of the integrated energy source, for which\nwe have the following theorem.\nTheorem 6: Assume that a node has N energy sources,\ndenoted by C 1 , C 2 , . . . , C N , with C i following C i (t) \u223csec <\nf1i , \u03b1i1 , f2i , \u03b1i2 >. Assume that the hardware permits the multiple energy sources to charge the battery simultaneously. The\noverall energy supply to the node, denoted by C, follows\nC(t) \u223csec < f1 , \u03b11 , f2 , \u03b12 >, where\n \u0304 12 . . . \u2297f\n \u0304 1N (x) \u2212 (N \u2212 1),\nf1 (x) = f11 \u2297f\n\n(41)\n\n\u03b11 (t) = \u03b111 + \u03b121 . . . + \u03b1N\n1 (t),\n\n(42)\n\nf2 (x) = f21 \u2297 f22 . . . \u2297 f2N (x),\n\n(43)\n\n\u03b12 (t) = \u03b112 + \u03b122 . . . + \u03b1N\n2 (t),\n\n(44)\n\nProof: We only prove Equations (41) and (42) by applying Inequality (12), as the proof for Equations (43) and (44)\nis similar by using Inequality (11). In addition, we only need\nto prove the case that N = 2, because the theorem holds by\nrecursively applying the result for N = 2.\n\n\f7\n1\n\nAs we assume that the multiple energy sources can charge\nthe node simultaneously, for any time t > 0, C(t) = C 1 (t) +\nC 2 (t). For any t \u2265 s > 0, we have\n\n= inf {C 1 (s, t) + C 2 (s, t) \u2212 (\u03b111 (t \u2212 s) + \u03b121 (t \u2212 s))}\n0\u2264s\u2264t\n\nold upper bound\nnew upper bound\nold lower bound\nnew lower bound\n\n0.8\n0.7\nBounding Functions\n\ninf {C(s, t) \u2212 \u03b11 (t \u2212 s)}\n\n0\u2264s\u2264t\n\n0.6\n0.5\n0.4\n0.3\n\n= inf {C 1 (s, t) \u2212 \u03b111 (t \u2212 s) + (C 2 (s, t) \u2212 \u03b121 (t \u2212 s))}\n\n0.2\n\n0\u2264s\u2264t\n\n\u2265 inf {C 1 (s, t) \u2212 \u03b111 (t \u2212 s) + inf [C 2 (s, t) \u2212 \u03b121 (t \u2212 s)]}\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n1\n\n= inf {C (s, t) \u2212\n0\u2264s\u2264t\n\n0.9\n\n\u03b111 (t\n\n0.1\n0\n0\n\n1\n\n2\n\n3\n\n4\n\n5\n\n6\n\n7\n\nx\n\n2\n\n\u2212 s)} + inf {C (s, t) \u2212\n0\u2264s\u2264t\n\n\u03b121 (t\n\n\u2212 s)}\n\nFig. 1.\n\nComparison of old and new bounds\n\n(45)\nThe lower curve and the lower bounding function of C(t), i.e.,\nEquations (41) and (42), are thus proved based on the above\ninequality and Inequality (12).\nVII. F URTHER I MPROVEMENT ON B OUNDS\nSo far, we have developed an analytical framework based\non stochastic network calculus to evaluate the performance of\nnetwork systems with nodes powered by renewable energy\nsources. This analytical framework is general enough no\nmatter whether or not the energy-oblivious service process and\nthe energy charging process are independent, and no matter\nwhether or not multiple energy sources, if they exists, are\nindependent. If we assume that the energy-oblivious service\nprocess and the energy charging process are independent or\nthat multiple energy sources are independent, which we believe\nis true in most applications, better performance bounds could\nbe obtained, using the following lemma.\nLemma 5: Assume that the complementary cumulative distribution functions (CCDF) of non-negative random variables\nX, Y are F\u0304X \u2208 F\u0304 and F\u0304Y \u2208 F\u0304 , respectively. Assume that\nf1 (x) \u2264 F\u0304X (x) \u2264 f2 (x), g1 (x) \u2264 F\u0304Y (x) \u2264 g2 (x), and\nf1 , f2 , g1 , g2 \u2208 F\u0304 . Denote Z = X + Y . Assume that X and\nY are independent, there holds for \u2200x \u2265 0,\n\nand\n\nF\u0304Z (x) \u2264 1 \u2212 f \u03042 \u22c6 \u1e212 (x),\n\n(46)\n\nF\u0304Z (x) \u2265 1 \u2212 f \u03041 \u22c6 \u1e211 (x),\n\n(47)\n\nwhere f \u03041 = 1 \u2212 [f1 ]1 , f \u03042 = 1 \u2212 [f2 ]1 , \u1e211 = 1 \u2212 [g1 ]1 , \u1e212 =\n1 \u2212 [g2 ]1 , and \u22c6 is the Stieltjes convolution operation [17].\nWith Lemma 5, if the independence assumption could be\nmade, the bounds in the theorems of this paper could be\nrevised accordingly. That is, we could apply Lemma 5 instead\nof Lemma 1 in the proofs of the theorems to get better\nbounds. For example, if we assume that two energy sources\nare independent, the lower and upper bounds in Theorem 6\nshould be revised, respectively, to\nf1 (x) = 1 \u2212 (1 \u2212 f11 ) \u22c6 (1 \u2212 f12 ),\n\n(48)\n\nf2 (x) = 1 \u2212 (1 \u2212 f21 ) \u22c6 (1 \u2212 f22 ).\nf11 (x)\n\nf12 (x)\n\n(49)\n\u22122x\n\n= e\nand\n=\nAs an example, assume that\nf21 (x) = f22 (x) = e\u2212x . With Theorem 6, we have the lower\nbound f1 (x) = e\u22122x and the upper bound f2 (x) = 2e\u2212x/2 .\nBut, by applying Lemma 5, we can get new lower bound\nf1 (x) = (1 + 2x)e\u22122x and new upper bound f2 (x) =\n\n(1 + x)e\u2212x. It is easy to verify that the new bounds are tighter\nas shown in Fig. 1.\nVIII. R ELATED W ORK\nWith the increasing importance of greening computing, QoS\nand performance evaluation of network systems with uncertain\nenergy supply have attracted much attention. Many performance modeling approaches have been developed, which\ncould be divided into two main categories, deterministic and\nstochastic approaches.\nIn the deterministic group, Zafer [23] et al. use deterministic\nnetwork calculus to model traffic arrival and traffic departure.\nThey use a power-rate function to link the traffic departure\nrate and energy consumption rate. By considering the special\nfeatures of specific power-rate functions, they formulate and\nsolve the optimal transmission scheduling problem under the\ngiven energy constraints. Their work only focuses on singlenode analysis and assumes that traffic arrivals and service\nrates are deterministic. Kansal et al. [11] propose a so-termed\nharvesting theory to help energy management of a sensor\nnode and determine the performance levels that the sensor\nnode can support. The basic idea of the harvesting theory\nis to use a leaky bucket model to represent energy supply\nand energy depletion. Moser et al. [15] describe energy-aware\nscheduling and prove the conditions for a scheduling algorithm\nto be optimal in a system whose energy storage is replenished\npredictably.\nIn the stochastic group, Markov chain models have been\nused extensively. Susu et al. [20] use a discrete-time Markov\nchain in which states represent different energy levels. Some\nwork [16] uses a Markov chain model to capture the influence\nof clouds and wind on solar radiation intensity. Relevant to\nstochastic energy modeling, there are many efforts to predict\na stochastic energy supply. Lu et al. [14] assess three prediction techniques: regression analysis, moving average, and\nexponential smoothing. Recas et al. [18] propose a weatherconditioned moving average (WCMA) model, which adapts to\nlong-term seasonal changes and short-term sudden weather\nchanges. Moser et al. [15] introduce energy variability curves\nto predict the power provided by a harvesting unit.\nWe develop our analytical framework based on stochastic\nnetwork calculus [2], [6], [9], [10]. Unlike deterministic network calculus [1], [12], which searches for the worst-case performance bounds, stochastic network calculus tries to derive\ntighter performance bounds, but with a small probability that\nthe bounds may not hold true. Since most renewable energy\n\n\f8\n\nsources, such as solar and wind energy, are not deterministic,\nstochastic network calculus is a good fit for the performance\nevaluation of systems using renewable energy. Nevertheless,\ntraditional stochastic network calculus was not originally\ntargeted at modeling such systems. Substantial work is thus\nrequired to extend this useful theory.\nRecent interesting work by Wang et al. [22] uses stochastic\nnetwork calculus to evaluate the reliability of the power grid\nwith respect to renewable energy. Their energy supply and\ndemand models are a subset of the models we present in\nSection III. Their work shows a good example of how to tailor\nour models for a specific application. Another fundamental\ndifference is that Wang et al. define the energy supply and\nenergy demand as two de-coupled random processes, while in\nour work energy discharging is inherently coupled with energy\ncharging.\nFinally, related to analytical frameworks for performance\nmodeling, there is a large body of research on energy-aware\nscheduling algorithms. For example, Niyato et al. [16] investigate the impact of different sleep and wake-up strategies\non data communication among solar-powered wireless nodes.\nIn [21], Vigorito et al. propose an adaptive duty-cycling\nalgorithm that ensures operational power levels at wireless\nsensor nodes regardless of changing environmental conditions.\nIn [7], Gorlatova et al. measure the energy availability in\nindoor environment and based on the measurement results\nthey develop algorithms to determine energy allocation in\nsystems with predictable energy inputs and in systems where\nenergy inputs are stochastic. In the stochastic model, they\nassume that energy inputs are i.i.d. random variables. Unlike\nthe above work, our analytical framework is generic and\nuses only abstract notations on energy charging/discharging\namount, traffic arrival amount, etc. As such, all the above\nwork could be treated as a special case of our more general\nframework in which the abstract functions are replaced with\nconcrete ones for specific applications.\nIX. C ONCLUSION AND F UTURE W ORK\nThe application of renewable energy poses many challenging questions when it comes to a QoS guarantee for\nIT infrastructure. Particularly, the strong call for a generic\nanalytical tool for the performance modeling and evaluation of\nsuch systems remains unanswered. We, in this paper, develop\nsuch a theory using a stochastic network calculus [2], [6],\n[9], [10] approach. We enrich the existing stochastic network\ncalculus theory to make it useful for evaluating systems with\na stochastic energy supply. We introduce new models to\ncapture the dynamics in the energy charging and discharging\nprocesses, and derive new analytical results to provide fundamental performance bounds, which could be used to guide\nthe energy management and the design of task scheduling\nalgorithms.\nThis paper mainly focuses on the introduction of a theoretical framework. Along the line, we envisage many future\nresearch topics, including (1) the application of energy charging/discharging models in different applications (e.g., [20],\n[22]), (2) analyzing the service model of different scheduling\nstrategies (e.g., [15]), and (3) network reliability analysis (e.g.,\nnetwork-wide energy outage analysis).\n\nACKNOWLEDGMENT\nKui Wu and Dimitri Marinakis were supported by the\nNatural Sciences and Engineering Research Council of Canada\n(NSERC). Yuming Jiang was supported by the Centre for\nQuantifiable Quality of Service (Q2S) in Communication\nSystems, Centre of Excellence, which is appointed by the\nResearch Council of Norway, and funded by the Research\nCouncil, NTNU and UNINETT.\nR EFERENCES\n[1] C.-S. Chang. Performance Guarantees in Communication Networks.\nSpringer-Verlag, 2000.\n[2] F. Ciucu, A. Burchard, and J. Liebeherr. A network service curve\napproach for the stochastic analysis of networks. SIGMETRICS05, pages\n279\u2013290, June 2005.\n[3] F. Ciucu, A. Burchard, and J. Liebeherr. Scaling properties of statistical\nend-to-end bounds in the network calculus. IEEE Trans. Information\nTheory, 52(6):2300\u20132312, June 2006.\n[4] R. L. Cruz. A calculus for network delay, part I: network elements in\nisolation. IEEE Trans. Information Theory, 37(1):114\u2013131, Jan. 1991.\n[5] W. Feng. Green Computing: Large-Scale Energy Efficiency. CRC Press,\n2011.\n[6] M. Fidler. An end-to-end probabilistic network calculus with moment\ngenerating functions. In IEEE 14th International Workshop on Quality\nof Services (IWQoS), pages 261\u2013270, 2006.\n[7] M. Gorlatova, A. Wallwater, and G. Zussman. Networking low-power\nenergy harvesting devices: Measurements and algorithms. In Proc. of\nIEEE Infocom, 2011.\n[8] W. Hu, N. Bulusu, C. Chou, A. Taylor, V. Tran, and S. Jha. Design and\nevaluation of a hybrid sensor network for cane-toad monitoring. ACM\nTransactions on Sensor Networks, 5(1), 2009.\n[9] Y. Jiang. A basic stochastic network calculus. In Proceedings of ACM\nSigcomm 06, pages 123\u2013134, Pisa, Italy, September 2006.\n[10] Y. Jiang. Stochastic Network Calculus. Springer, 2008.\n[11] A. Kansal, J. Hsu, S. Zahedi, and M. Srivastava. Power management\nin energy harvesting sensor networks. ACM Transactions on Embedded\nComputing Systems (TECS), 6(4):32, 2007.\n[12] J.-Y. Le Boudec and P. Thiran. Network Calculus: A Theory of\nDeterministic Queuing Systems for the Internet. Springer-Verlag, 2001.\n[13] C. Li, A. Burchard, and J. Liebeherr. A network calculus with effective\nbandwidth. IEEE/ACM Transactions on Networking, 15(6):1142\u20131453,\nDecember 2007.\n[14] J. Lu, S. Liu, Q. Wu, and Q. Qiu. Accurate modeling and prediction\nof energy availability in energy harvesting real-time embedded systems.\nIn International Green Computing Conference, pages 469\u2013476. IEEE,\n2010.\n[15] C. Moser, D. Brunelli, L. Thiele, and L. Benini. Real-time scheduling\nfor energy harvesting sensor nodes. Real-Time Systems, 37(3):233\u2013260,\n2007.\n[16] D. Niyato, E. Hossain, and A. Fallahi. Sleep and wakeup strategies in\nsolar-powered wireless sensor/mesh networks: Performance analysis and\noptimization. IEEE Transactions on Mobile Computing, pages 221\u2013236,\n2007.\n[17] A. Papoulis and S. U. Pillai. Probability, random variables and\nstochastic processes. MacGraw Hill, 2002.\n[18] J. Recas, C. Bergonzini, D. Atienza, and T. Rosing. HOLLOWS: A\npower-aware task scheduler for energy harvesting sensor nodes. Journal\nof Intelligent Material Systems and Structures, 21:1300\u20131332, 2010.\n[19] S. Roundy, D. Steingart, L. Frechette, P. Wright, and J. Rabaey. Power\nsources for wireless sensor networks. In Wireless Sensor Networks,\nvolume 2920 of Lecture Notes in Computer Science, pages 1\u201317.\nSpringer Berlin / Heidelberg, 2004.\n[20] A. Susu, A. Acquaviva, D. Atienza, and G. De Micheli. Stochastic\nmodeling and analysis for environmentally powered wireless sensor\nnodes. In 6th International Symposium on Modeling and Optimization\nin Mobile, Ad Hoc, and Wireless Networks and Workshops, 2008., pages\n125\u2013134. IEEE, 2008.\n[21] C. Vigorito, D. Ganesan, and A. Barto. Adaptive control of duty cycling\nin energy-harvesting wireless sensor networks. In Sensor, Mesh and Ad\nHoc Communications and Networks, 2007. SECON'07. 4th Annual IEEE\nCommunications Society Conference on, pages 21\u201330. IEEE, 2007.\n[22] K. Wang, S. Low, and C. Lin. How stochastic network calculus concepts\nhelp green the power grid. In Second IEEE international conference on\nSmartGridComm, 2011.\n\n\f9\n\n[23] M. Zafer and E. Modiano. A calculus approach to energy-efficient data\ntransmission with quality-of-service constraints. IEEE/ACM Transactions on Networking, 17(3):898\u2013911, 2009.\n\n\u2022\n\nA PPENDIX\nA. Proof of Lemma 1\nProof: The proof of (11) could be found at [9]. We only\nprove (12). For any y \u2265 x \u2265 0,\n{X + Y \u2264 y} \u2229 {X > x} \u2229 {Y > y \u2212 x} = \u2205,\n\nf2 (t \u2212 s1 ) \u2264 f3 (t).\n\n(50)\n\ninf {f1 (s)+f2 (t\u2212s)\u2227f3 (t)} = f1 (s2 )+f2 (t\u2212s2 )\u2227f3 (t).\n\n0\u2264s\u2264t\n\n(60)\nWe have\n\n(51)\n\nf1 (s2 ) + f2 (t \u2212 s2 ) \u2227 f3 (t) \u2264 f1 (s1 ) + f2 (t \u2212 s1 ) \u2227 f3 (t)\n=f1 (s1 ) + f2 (t \u2212 s1 ).\n(61)\n\nand hence\nP rob{X + Y > y} \u2265 P rob{{X > x} \u2229 {Y > y \u2212 x}}\n\u22651 \u2212 P rob{X \u2264 x} \u2212 P rob{Y \u2264 y \u2212 x}\n=P rob{X > x} + P rob{Y > y \u2212 x} \u2212 1.\n(52)\n\n\u2022\n\nSince the above inequality holds for all y \u2265 x \u2265 0, we get\nP rob{X + Y > y} \u2265 sup {P rob{X > x}\n\nIn the above, the first inequality is due to (60), and the\nsecond equality is due to (59).\nCase 2: f1 (s1 ) + f2 (t \u2212 s1 ) > f3 (t). The right hand side\nof Inequality (57) equals f3 (t). We also have f1 (0) +\nf2 (t \u2212 0) \u2265 f1 (s1 ) + f2 (t \u2212 s1 ) due to (58). Therefore,\nf2 (t) \u2265 f1 (s1 ) + f2 (t \u2212 s1 ) > f3 (t),\n\ny\u2265x\u22650\n\n+ P rob{Y > y \u2212 x}} \u2212 1,\n\n(59)\n\nWe need to show that the left hand side of Inequality (57)\nis no larger than f1 (s1 ) + f2 (t \u2212 s1 ). For the given t \u2265 0,\nthere exists a s2 (0 \u2264 s2 \u2264 t) such that\n\nwhere \u2205 denotes the null set. We thus have\n{X + Y > y} \u2283 ({X > x} \u2229 {Y > y \u2212 x})\n\nCase 1: f1 (s1 ) + f2 (t \u2212 s1 ) \u2264 f3 (t). The right hand\nside of Inequality (57) equals f1 (s1 ) + f2 (t \u2212 s1 ). Since\nf1 \u2208 F and f1 (0) = 0, we have f1 (s1 ) \u2265 0. Therefore,\n\n(53)\n\nand\n\nwhich is\n\ninf {f1 (s) + f2 (t \u2212 s) \u2227 f3 (t)} \u2264 f1 (0) + f2 (t) \u2227 f3 (t)\n\n \u0304 F\u0304Y (y) \u2212 1 \u2265 f1 \u2297g\n \u0304 1 (y) \u2212 1.\nF\u0304Z (y) \u2265 F\u0304X \u2297\n\n0\u2264s\u2264t\n\n(54)\n\n= f3 (t)\n(62)\n\nB. Proof of Lemma 2\nProof: By definitions of the \u2297 and \u2227 operations, we need\nto prove that\ninf {f1 (s)+f2 \u2227f3 (t\u2212s)} \u2264 inf {f1 (s)+f2 (t\u2212s)}\u2227f3 (t).\n\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n(55)\nSince f3 \u2208 F , we have\ninf {f1 (s)+f2 \u2227f3 (t\u2212s)} \u2264 inf {f1 (s)+f2 (t\u2212s)\u2227f3 (t)}.\n\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n(56)\n\nIn conclusion, Inequality (57) is true for both cases. The\nlemma is proved.\nC. Proof of Lemma 3\nProof: To evaluate the value of X1 \u2227 X4 \u2212 X2 \u2227 X3 , we\nhave:\n\u2022 Case 1: X1 \u2264 X4 and X2 \u2265 X3 . We have X1 = X2 =\nX3 = X4 , because X1 \u2265 X2 \u2265 0 and X3 \u2265 X4 \u2265 0.\nThus (24) holds.\n\u2022 Case 2: X1 \u2264 X4 and X2 \u2264 X3 . We have\n\nWe therefore only need to prove that\n\nX1 \u2227 X4 \u2212 X2 \u2227 X3 = X1 \u2212 X2 \u2264 X1 \u2212 X2 + X3 \u2212 X4 .\n\ninf {f1 (s)+f2 (t\u2212s)\u2227f3 (t)} \u2264 inf {f1 (s)+f2 (t\u2212s)}\u2227f3 (t).\n\n0\u2264s\u2264t\n\n0\u2264s\u2264t\n\n\u2022\n\n(57)\nFirst, for any given t \u2265 0, there exists a s1 (0 \u2264 s1 \u2264 t), such\nthat\ninf {f1 (s) + f2 (t \u2212 s)} = f1 (s1 ) + f2 (t \u2212 s1 ).\n\n0\u2264s\u2264t\n\nX1 \u2227 X4 \u2212 X2 \u2227 X3 = X4 \u2212 X3 \u2264 0.\n\n(58)\n\nIn addition, when t is given, f3 (t) is a constant.\nWe next prove that Inequality (57) holds true for the\nfollowing two exclusive cases:\n\nCase 3: X1 \u2265 X4 and X2 \u2265 X3 . We have\n\n\u2022\n\nInequality (24) holds since the right side is no less than\n0.\nCase 4: X1 \u2265 X4 and X2 \u2264 X3 . We have\nX1 \u2227 X4 \u2212 X2 \u2227 X3 \u2264 X1 \u2212 X2 \u2264 X1 \u2212 X2 + X3 \u2212 X4 .\n\nThe lemma is proved since the above list covers all possible\nscenarios.\n\n\f10\n\nD. Proof of Lemma 5\nProof: The proof of (46) could be found at [17]. We only\nprove (47).\nFor independent non-negative random variables, X and Y ,\nwe have \u2200x \u2265 0,\nZ x\nFZ (x) =\nFX (x \u2212 y)dFY (y).\n0\n\nNote that FX , FY , f \u03041 , \u1e211 are wide-sense increasing, FX \u2264 f \u03041\n\nand FY \u2264 \u1e211 . Hence, we have\nZ x\nZ x\nf \u03041 (x \u2212 y)dFY (y)\nFZ (x) =\nFX (x \u2212 y)dFY (y) \u2264\n0\n0\nZ x\n=\nFY (x \u2212 y)df \u03041 (y)\nZ0 x\n\u1e211 (x \u2212 y)df \u03041 (y) = f \u03041 \u22c6 \u1e211 (x).\n(63)\n\u2264\n0\n\nNote that the third equality holds because Stieltjes convolution\noperation is commutative. Inequality (47) is thus proved since\nF\u0304Z (x) = 1 \u2212 FZ (x).\n\n\f"}