{"id": "http://arxiv.org/abs/math/0605002v2", "guidislink": true, "updated": "2008-03-31T22:06:42Z", "updated_parsed": [2008, 3, 31, 22, 6, 42, 0, 91, 0], "published": "2006-04-28T21:42:00Z", "published_parsed": [2006, 4, 28, 21, 42, 0, 4, 118, 0], "title": "Tug-of-war and the infinity Laplacian", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0605536%2Cmath%2F0605212%2Cmath%2F0605301%2Cmath%2F0605079%2Cmath%2F0605326%2Cmath%2F0605579%2Cmath%2F0605026%2Cmath%2F0605498%2Cmath%2F0605650%2Cmath%2F0605451%2Cmath%2F0605575%2Cmath%2F0605552%2Cmath%2F0605749%2Cmath%2F0605589%2Cmath%2F0605429%2Cmath%2F0605120%2Cmath%2F0605010%2Cmath%2F0605194%2Cmath%2F0605480%2Cmath%2F0605334%2Cmath%2F0605585%2Cmath%2F0605096%2Cmath%2F0605438%2Cmath%2F0605594%2Cmath%2F0605042%2Cmath%2F0605694%2Cmath%2F0605490%2Cmath%2F0605356%2Cmath%2F0605314%2Cmath%2F0605761%2Cmath%2F0605121%2Cmath%2F0605108%2Cmath%2F0605762%2Cmath%2F0605555%2Cmath%2F0605041%2Cmath%2F0605236%2Cmath%2F0605023%2Cmath%2F0605152%2Cmath%2F0605273%2Cmath%2F0605787%2Cmath%2F0605349%2Cmath%2F0605743%2Cmath%2F0605573%2Cmath%2F0605099%2Cmath%2F0605629%2Cmath%2F0605396%2Cmath%2F0605775%2Cmath%2F0605580%2Cmath%2F0605430%2Cmath%2F0605370%2Cmath%2F0605668%2Cmath%2F0605412%2Cmath%2F0605608%2Cmath%2F0605089%2Cmath%2F0605435%2Cmath%2F0605002%2Cmath%2F0605080%2Cmath%2F0605055%2Cmath%2F0605450%2Cmath%2F0605711%2Cmath%2F0605574%2Cmath%2F0605576%2Cmath%2F0605330%2Cmath%2F0605298%2Cmath%2F0605514%2Cmath%2F0605050%2Cmath%2F0605670%2Cmath%2F0605477%2Cmath%2F0605071%2Cmath%2F0605474%2Cmath%2F0605291%2Cmath%2F0605266%2Cmath%2F0605767%2Cmath%2F0605176%2Cmath%2F0605745%2Cmath%2F0605165%2Cmath%2F0605561%2Cmath%2F0605255%2Cmath%2F0605143%2Cmath%2F0605605%2Cmath%2F0605285%2Cmath%2F0605777%2Cmath%2F0605485%2Cmath%2F0605517%2Cmath%2F0605069%2Cmath%2F0605590%2Cmath%2F0605462%2Cmath%2F0605681%2Cmath%2F0605174%2Cmath%2F0605619%2Cmath%2F0605237%2Cmath%2F0605636%2Cmath%2F0605227%2Cmath%2F0605377%2Cmath%2F0605316%2Cmath%2F0605358%2Cmath%2F0605786%2Cmath%2F0605398%2Cmath%2F0605242%2Cmath%2F0605467%2Cmath%2F0605543&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Tug-of-war and the infinity Laplacian"}, "summary": "We prove that every bounded Lipschitz function F on a subset Y of a length\nspace X admits a tautest extension to X, i.e., a unique Lipschitz extension u\nfor which Lip_U u = Lip_{boundary of U} u for all open subsets U of X that do\nnot intersect Y.\n  This was previously known only for bounded domains R^n, in which case u is\ninfinity harmonic, that is, a viscosity solution to Delta_infty u = 0. We also\nprove the first general uniqueness results for Delta_infty u = g on bounded\nsubsets of R^n (when g is uniformly continuous and bounded away from zero), and\nanalogous results for bounded length spaces.\n  The proofs rely on a new game-theoretic description of u. Let u^epsilon(x) be\nthe value of the following two-player zero-sum game, called tug-of-war: fix\nx_0=x \\in X minus Y. At the kth turn, the players toss a coin and the winner\nchooses an x_k with d(x_k, x_{k-1})< epsilon. The game ends when x_k is in Y,\nand player one's payoff is\n  F(x_k) - (epsilon^2/2) sum_{i=0}^{k-1} g(x_i)\n  We show that the u^\\epsilon converge uniformly to u as epsilon tends to zero.\nEven for bounded domains in R^n, the game theoretic description of\ninfinity-harmonic functions yields new intuition and estimates; for instance,\nwe prove power law bounds for infinity-harmonic functions in the unit disk with\nboundary values supported in a delta-neighborhood of a Cantor set on the unit\ncircle.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0605536%2Cmath%2F0605212%2Cmath%2F0605301%2Cmath%2F0605079%2Cmath%2F0605326%2Cmath%2F0605579%2Cmath%2F0605026%2Cmath%2F0605498%2Cmath%2F0605650%2Cmath%2F0605451%2Cmath%2F0605575%2Cmath%2F0605552%2Cmath%2F0605749%2Cmath%2F0605589%2Cmath%2F0605429%2Cmath%2F0605120%2Cmath%2F0605010%2Cmath%2F0605194%2Cmath%2F0605480%2Cmath%2F0605334%2Cmath%2F0605585%2Cmath%2F0605096%2Cmath%2F0605438%2Cmath%2F0605594%2Cmath%2F0605042%2Cmath%2F0605694%2Cmath%2F0605490%2Cmath%2F0605356%2Cmath%2F0605314%2Cmath%2F0605761%2Cmath%2F0605121%2Cmath%2F0605108%2Cmath%2F0605762%2Cmath%2F0605555%2Cmath%2F0605041%2Cmath%2F0605236%2Cmath%2F0605023%2Cmath%2F0605152%2Cmath%2F0605273%2Cmath%2F0605787%2Cmath%2F0605349%2Cmath%2F0605743%2Cmath%2F0605573%2Cmath%2F0605099%2Cmath%2F0605629%2Cmath%2F0605396%2Cmath%2F0605775%2Cmath%2F0605580%2Cmath%2F0605430%2Cmath%2F0605370%2Cmath%2F0605668%2Cmath%2F0605412%2Cmath%2F0605608%2Cmath%2F0605089%2Cmath%2F0605435%2Cmath%2F0605002%2Cmath%2F0605080%2Cmath%2F0605055%2Cmath%2F0605450%2Cmath%2F0605711%2Cmath%2F0605574%2Cmath%2F0605576%2Cmath%2F0605330%2Cmath%2F0605298%2Cmath%2F0605514%2Cmath%2F0605050%2Cmath%2F0605670%2Cmath%2F0605477%2Cmath%2F0605071%2Cmath%2F0605474%2Cmath%2F0605291%2Cmath%2F0605266%2Cmath%2F0605767%2Cmath%2F0605176%2Cmath%2F0605745%2Cmath%2F0605165%2Cmath%2F0605561%2Cmath%2F0605255%2Cmath%2F0605143%2Cmath%2F0605605%2Cmath%2F0605285%2Cmath%2F0605777%2Cmath%2F0605485%2Cmath%2F0605517%2Cmath%2F0605069%2Cmath%2F0605590%2Cmath%2F0605462%2Cmath%2F0605681%2Cmath%2F0605174%2Cmath%2F0605619%2Cmath%2F0605237%2Cmath%2F0605636%2Cmath%2F0605227%2Cmath%2F0605377%2Cmath%2F0605316%2Cmath%2F0605358%2Cmath%2F0605786%2Cmath%2F0605398%2Cmath%2F0605242%2Cmath%2F0605467%2Cmath%2F0605543&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We prove that every bounded Lipschitz function F on a subset Y of a length\nspace X admits a tautest extension to X, i.e., a unique Lipschitz extension u\nfor which Lip_U u = Lip_{boundary of U} u for all open subsets U of X that do\nnot intersect Y.\n  This was previously known only for bounded domains R^n, in which case u is\ninfinity harmonic, that is, a viscosity solution to Delta_infty u = 0. We also\nprove the first general uniqueness results for Delta_infty u = g on bounded\nsubsets of R^n (when g is uniformly continuous and bounded away from zero), and\nanalogous results for bounded length spaces.\n  The proofs rely on a new game-theoretic description of u. Let u^epsilon(x) be\nthe value of the following two-player zero-sum game, called tug-of-war: fix\nx_0=x \\in X minus Y. At the kth turn, the players toss a coin and the winner\nchooses an x_k with d(x_k, x_{k-1})< epsilon. The game ends when x_k is in Y,\nand player one's payoff is\n  F(x_k) - (epsilon^2/2) sum_{i=0}^{k-1} g(x_i)\n  We show that the u^\\epsilon converge uniformly to u as epsilon tends to zero.\nEven for bounded domains in R^n, the game theoretic description of\ninfinity-harmonic functions yields new intuition and estimates; for instance,\nwe prove power law bounds for infinity-harmonic functions in the unit disk with\nboundary values supported in a delta-neighborhood of a Cantor set on the unit\ncircle."}, "authors": ["Yuval Peres", "Oded Schramm", "Scott Sheffield", "David B. Wilson"], "author_detail": {"name": "David B. Wilson"}, "author": "David B. Wilson", "links": [{"title": "doi", "href": "http://dx.doi.org/10.1090/S0894-0347-08-00606-1", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/math/0605002v2", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0605002v2", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "44 pages, 4 figures", "arxiv_primary_category": {"term": "math.AP", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.AP", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.MG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.OC", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "91A15, 91A24, 35J70, 54E35, 49N70", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0605002v2", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0605002v2", "journal_reference": "Journal of the American Mathematical Society 22(1):167--210, 2009", "doi": "10.1090/S0894-0347-08-00606-1", "fulltext": "JOURNAL OF THE\nAMERICAN MATHEMATICAL SOCIETY\nVolume 00, Number 0, Pages 000\u2013000\nS 0894-0347(XX)0000-0\n\narXiv:math/0605002v2 [math.AP] 31 Mar 2008\n\nTUG-OF-WAR AND THE INFINITY LAPLACIAN\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\n1. Introduction and preliminaries\n1.1. Overview. We consider a class of zero-sum two-player stochastic games called\ntug-of-war and use them to prove that every bounded real-valued Lipschitz function F on a subset Y of a length space X admits a unique absolutely minimal\n(AM) extension to X, i.e., a unique Lipschitz extension u : X \u2192 R for which\nLipU u = Lip\u2202U u for all open U \u2282 X r Y . We present an example that shows\nthis is not generally true when F is merely Lipschitz and positive. (Recall that a\nmetric space (X, d) is a length space if for all x, y \u2208 X, the distance d(x, y) is the\ninfimum of the lengths of continuous paths in X that connect x to y. Length spaces\nare more general than geodesic spaces, where the infima need to be achieved.)\nWhen X is the closure of a bounded domain U \u2282 Rn and Y is its boundary, a\nLipschitz extension u of F is AM if and only it is infinity harmonic in the interior\nof X r Y , i.e., it is a viscosity solution (defined below) to \u2206\u221e u = 0, where \u2206\u221e\nis the so-called infinity Laplacian\n(1.1)\n\n\u2206\u221e u = |\u2207u|\u22122\n\nX\n\nu xi u xi xj u xj\n\ni,j\n\n(informally, this is the second derivative of u in the direction of the gradient of\nu). Aronsson proved this equivalence for smooth u in 1967 and Jensen proved the\ngeneral statement in 1993 [1, 13]. Our analysis of tug-of-war also shows that in this\nsetting \u2206\u221e u = g has a unique viscosity solution (extending F ) when g : U \u2192 R is\ncontinuous and inf g > 0 or sup g < 0, but not necessarily when g assumes values of\nboth signs. We note that in the study of the homogenous equation \u2206\u221e u = 0, the\nnormalizing factor |\u2207u|\u22122 in (1.1) is sometimes omitted; however, it is important\nto include it in the nonhomogenous equation. Observe that with the normalization,\n\u2206\u221e coincides with the ordinary Laplacian \u2206 in the one-dimensional case.\nUnlike the ordinary Laplacian or the p-Laplacian for p < \u221e, the infinity Laplacian can be defined on any length space with no additional structure (such as a\nmeasure or a canonical Markov semigroup)-that is, we will see that viscosity solutions to \u2206\u221e u = g are well-defined in this generality. We will establish the above\nstated uniqueness of solutions u to \u2206\u221e u = g in the setting of length spaces.\nOriginally, we were motivated not by the infinity Laplacian but by random turn\nHex [22] and its generalizations, which led us to consider the tug-of-war game. As\nReceived by the editors July 8, 2006, in revised form March 31, 2008.\n2000 Mathematics Subject Classification. 91A15, 91A24, 35J70, 54E35, 49N70.\nKey words and phrases. infinity Laplacian, absolutely minimal Lipschitz extension, tug-of-war.\nResearch of Y.P. and S.S. supported in part by NSF grants DMS-0244479 and DMS-0104073.\nc 2008 American Mathematical Society\n\n1\n\n\f2\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nwe later learned, tug-of-war games have been considered by Lazarus, Loeb, Propp\nand Ullman in [16] (see also [15]).\nTug-of-war on a metric space is very natural and conceivably applicable (like\ndifferential game theory) to economic and political modeling.\nThe intuition provided by thinking of strategies for tug-of-war yields new results\neven in the classical setting of domains in Rn . For instance, in Section 4 we show\nthat if u is infinity-harmonic in the unit disk and its boundary values are in [0, 1]\nand supported on a \u03b4-neighborhood of the ternary Cantor set on the unit circle,\nthen u(0) < \u03b4 \u03b2 for some \u03b2 > 0.\nBefore precisely stating our main results, we need several definitions.\n1.2. Random turn games and values. We consider two-player, zero-sum randomturn games, which are defined by the following parameters: a set X of states of\nthe game, two directed transition graphs EI , EII with vertex set X, a nonempty\nset Y \u2282 X of terminal states (a.k.a. absorbing states), a terminal payoff\nfunction F : Y \u2192 R, a running payoff function f : X r Y \u2192 R, and an initial\nstate x0 \u2208 X.\nGame play is as follows: a token is initially placed at position x0 . At the k th\nstep of the game, a fair coin is tossed, and the player who wins the toss may move\nthe token to any xk for which (xk\u22121 , xk ) is a directed edge in her transition graph.\nPk\u22121\nThe game ends the first time xk \u2208 Y , and player I's payoff is F (xk ) + i=0 f (xi ).\nPlayer I seeks to maximize this payoff, and since the game is zero-sum, player II\nseeks to minimize it.\nWe will use the term tug-of-war (on the graph with edges E) to describe\nthe game in which E := EI = EII (i.e., players have identical move options) and E\nis undirected (i.e., all moves are reversible). Generally, our results pertain only to\nthe undirected setting. Occasionally, we will also mention some counterexamples\nshowing that the corresponding results do not hold in the directed case.\nIn the most conventional version of tug-of-war on a graph, Y is a union of \"target\nsets\" Y I and Y II , there is no running payoff (f = 0) and F is identically 1 on Y I ,\nidentically 0 on Y II . Players then try to \"tug\" the game token to their respective\ntargets (and away from their opponent's targets) and the game ends when a target\nis reached.\nA strategy for a player is a way of choosing the player's next move as a function\nof all previously played moves and all previous coin tosses. It is a map from the\nset of partially played games to moves (or in the case of a random strategy, a\nprobability distribution on moves). Normally, one would think of a good strategy\nas being Markovian, i.e., as a map from the current state to the next move, but it\nis useful to allow more general strategies that take into account the history.\nGiven two strategies SI , SII , let F\u2212 (SI , SII ) and F+ (SI , SII ) be the expected total\npayoff (including the running payoffs received) at the termination of the game - if\nthe game terminates with probability one and this expectation exists in [\u2212\u221e, \u221e];\notherwise, let F\u2212 (SI , SII ) = \u2212\u221e and F+ (SI , SII ) = +\u221e.\nThe value of the game for player I is defined as supSI inf SII F\u2212 (SI , SII ). The\nvalue for player II is inf SII supSI F+ (SI , SII ). We use the expressions uI (x) and\nuII (x) to denote the values for players I and II, respectively, as a function of the\nstarting state x of the game.\nNote that if player I cannot force the game to end almost surely, then uI = \u2212\u221e,\nand if player II cannot force the game to end almost surely, then uII = \u221e. Clearly,\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n3\n\nuI (x) \u2264 uII (x). When uI (x) = uII (x), we say that the game has a value, given by\nu(x) := uI (x) = uII (x).\nOur definition of value for player I penalizes player I severely for not forcing the\ngame to terminate with probability one, awarding \u2212\u221e in this case.\n(As an alternative definition, one could define F\u2212 , and hence player I's value, by\nassigning payoffs to all of the non-terminating sequences x0 , x1 , x2 , . . .. If the payoff\nfunction for the non-terminating games is a zero-sum Borel-measurable function of\nthe infinite sequence, then player I's value is equal to player II's value in great\ngenerality [17]; see also [20] for more on stochastic games. The existence of a value\nby our strong definition implies the existence and equality of the values defined by\nthese alternative definitions.)\nConsidering the two possibilities for the first coin toss yields the following lemma,\na variant of which appears in [16].\nLemma 1.1. The function u = uI satisfies the equation\n(1.2)\n\n1\nu(x) =\n2\n\nsup\n\nu(y) +\n\ny:(x,y)\u2208E1\n\ninf\n\ny:(x,y)\u2208E2\n\n!\n\nu(y)\n\n+ f (x)\n\nfor every non-terminal state x \u2208 X rY for which the right-hand-side is well-defined,\nand uI (x) = \u2212\u221e when the right-hand-side is of the form 21 (\u221e + (\u2212\u221e)) + f (x). The\nanalogous statement holds for uII , except that uII (x) = +\u221e when the right-handside of (1.2) is of the form 12 (\u221e + (\u2212\u221e)) + f (x).\nWhen E = E1 = E2 , the operator\n\u2206\u221e u(x) :=\n\nsup\ny:(x,y)\u2208E\n\nu(y) +\n\ninf\n\ny:(x,y)\u2208E\n\nu(y) \u2212 2u(x)\n\nis called the (discrete) infinity Laplacian. A function u is infinity harmonic\nif (1.2) holds and f (x) = 0 at all non-terminal x \u2208 X r Y . When u is finite, this\nis equivalent to \u2206\u221e u = 0. However, it will be convenient to adopt the convention\nthat u is infinity harmonic at x if u(x) = +\u221e (resp. \u2212\u221e) and the right hand side\nin (1.2) is also +\u221e (resp. \u2212\u221e). Similarly, it will be convenient to say \"u is a\nsolution to \u2206\u221e u = \u22122 f \" at x if u(x) = +\u221e (resp. \u2212\u221e) and the right hand side\nin (1.2) is also +\u221e (resp. \u2212\u221e).\nIn a tug-of-war game, it is natural to guess that the value u = uI = uII exists\nand is the unique solution to\n\u2206\u221e u(x) = \u22122f,\n\nand also that (at least when E is locally finite) player I's optimal strategy will be to\nalways move to the vertex that maximizes u(x), and player II's optimal strategy will\nbe to always move to the vertex that minimizes u(x). This is easy to prove when\nE is undirected and finite and f is everywhere positive or everywhere negative.\nSubtleties arise in more general cases (X infinite, E directed, F unbounded, f\nhaving values of both signs, etc.)\nOur first theorem addresses the question of the existence of a value.\nTheorem 1.2. A tug-of-war game with parameters X, E, Y, F, f has a value whenever the following hold:\n(1) Either f = 0 everywhere or inf f > 0.\n(2) inf F > \u2212\u221e.\n(3) E is undirected.\n\n\f4\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nCounterexamples exist when any one of the three criteria is removed. In Section 5\n(a section devoted to counterexamples) we give an example of a tug-of-war game\nwithout a value, where E is undirected, F = 0, and the running payoff satisfies\nf > 0 but inf f = 0.\nThe case where f = 0, F is bounded, and (X, E) is locally finite was proved\nearlier in [15]. That paper discusses an (essentially non-random) game in which\nthe two players bid for the right to choose the next move. That game, called the\nRichman game, has the same value as tug-of-war with f = 0 where F takes the\nvalues 0 and 1. Additionally, a simple and efficient algorithm for calculating the\nvalue when f = 0 and (X, E) is finite is presented there.\n1.3. Tug-of-war on a metric space. Consider now the special case that (X, d)\nis a metric space, Y \u2282 X, and Lipschitz functions F : Y \u2192 R and f : X r Y \u2192 R\nare given. Let E\u03b5 be the edge-set in which x \u223c y if and only if d(x, y) < \u03b5 and let\nu\u03b5 be the value (if it exists) of the game played on E\u03b5 with terminal payoff F and\nrunning payoff normalized to be \u03b52 f .\nIn other words, u\u03b5 (x) is the value of the following two-player zero-sum game,\ncalled \u03b5-tug-of-war: fix x0 = x \u2208 X r Y . At the k th turn, the players toss a coin\nand the winner chooses an xk with d(xk , xk\u22121 ) < \u03b5. The game ends when xk \u2208 Y ,\nPk\u22121\nand player I's payoff is F (xk ) + \u03b52 i=0 f (xi ).\nWhen the limit u := lim\u03b5\u21920 u\u03b5 exists pointwise, we call u the continuum value\n(or just \"value\") of the quintuple (X, d, Y, F, f ). We define the continuum value\nfor player I (or II) analogously.\nThe reader may wonder why we have chosen not to put an edge in E\u03b5 between\nx and y when d(x, y) = \u03b5 exactly. This choice has some technical implications.\nSpecifically, we will compare the \u03b5-game with the 2 \u03b5-game. If x, z are such that\nd(x, z) \u2264 2 \u03b5, then in a length-space it does not follow that there is a y such\nthat d(x, y) \u2264 \u03b5 and d(y, z) \u2264 \u03b5. However, it does follow if you replace the weak\ninequalities with strong inequalities throughout.\nWe prove the following:\nTheorem 1.3. Suppose X is a length space, Y \u2282 X is non-empty, F : Y \u2192 R is\nbounded below and has an extension to a uniformly continuous function on X, and\neither f : X r Y \u2192 R satisfies f = 0 or all three of the following hold: inf |f | >\n0, f is uniformly continuous, and X has finite diameter. Then the continuum\nvalue u exists and is a uniformly continuous function extending F . Furthermore,\nku \u2212 u\u03b5 k\u221e \u2192 0 as \u03b5 \u0581 0. If F is Lipschitz, then so is u. If F and f are Lipschitz,\nthen ku \u2212 u\u03b5 k\u221e = O(\u03b5).\nThe above condition that F : Y \u2192 R extends to a uniformly continuous function\non X is equivalent to having F uniformly continuous on Y and \"Lipschitz on large\nscales,\" as we prove in Lemma 3.9 below.\nWe will see in Section 5.1 that this fails in general when f > 0 but inf f =\n0. When f assumes values of both signs, it fails even when X is a closed disk\nin R2 , Y is its boundary and F = 0. In Section 5.3 we show by means of an\nexample that in such circumstances it may happen that u\u03b5I 6= u\u03b5II and moreover,\nlim inf \u03b5\u05810 ku\u03b5I \u2212 u\u03b5II k\u221e > 0.\n1.4. Absolutely minimal Lipschitz extensions. Given a metric space (X, d),\na subset Y \u2282 X and a function u : X \u2192 R, we write LipY u = supx,y\u2208Y |u(y) \u2212\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n5\n\nu(x)|/d(x, y) and Lip u = LipX u. Thus u is Lipschitz iff Lip u < \u221e. Given F :\nY \u2192 R, we say that u : X \u2192 R is a minimal extension of F if LipX u = LipY F\nand u(y) = F (y) for all y \u2208 Y .\nIt is well known that for any metric space X, any Lipschitz F on a subset Y\nof X admits a minimal extension. The largest and smallest minimal extensions\n(introduced by McShane [18] and Whitney [24] in the 1930's) are respectively\ninf [F (y) + LipY F d(x, y)]\n\ny\u2208Y\n\nand\n\nsup [F (y) \u2212 LipY F d(x, y)] .\n\ny\u2208Y\n\nWe say u is an absolutely minimal (AM) extension of F if Lip u < \u221e and\nLipU u = Lip\u2202U u for every open set U \u2282 X r Y . We say that u is AM on U if it is\ndefined on U and is an AM extension of its restriction to \u2202U . AM extensions were\nfirst introduced by Aronsson in 1967 [1] and have applications in engineering and\nimage processing (see [4] for a recent survey).\nWe prove the following:\nTheorem 1.4. Let X be a length space and let F : Y \u2192 R be Lipschitz, where\n\u2205 =\n6 Y \u2282 X. If inf F > \u2212\u221e, then the continuum value function u described in\nTheorem 1.3 (with f = 0) is an AM extension of F . If F is also bounded, then u\nis the unique AM extension of F .\nWe present in the counterexample section, Section 5, an example in which F is\nLipschitz, non-negative, and unbounded, and although the continuum value is an\nAM extension, it is not the only AM extension.\nPrior to our work, the existence of AM extensions in the above settings was\nknown only for separable length spaces [14] (see also [19]). The uniqueness in\nTheorem 1.4 was known only in the case that X is the closure of a bounded domain\nU \u2282 Rn and Y = \u2202U . (To deduce this case from Theorem 1.4, one needs to\nreplace X by the smallest closed ball containing U , say.) Three uniqueness proofs\nin this setting have been published, by Jensen [13], by Barles and Busca [6], and\nby Aronsson, Crandall, and Juutinen [4]. The third proof generalizes from the\nEuclidean norm to uniformly convex norms.\nOur proof applies to more general spaces because it invokes no outside theorems\nfrom analysis (which assume existence of a local Euclidean geometry, a measure,\na notion of twice differentiability, etc.), and relies only on the structure of X as a\nlength space.\nAs noted in [4], AM extensions do not generally exist on metric spaces that\nare not length spaces. (For example, if X is the L-shaped region {0} \u00d7 [0, 1] \u222a\n[0, 1] \u00d7 {0} \u2282 R2 , with the Euclidean metric, and Y = {(0, 1), (1, 0)}, then no nonconstant F : Y \u2192 R has an AM extension. Indeed, suppose that u : X \u2192 R is\nan AM extension of F : Y \u2192 R. Let a := u(0, 0), b := u(0, 1) and c := u(1, 0).\nThen, considering U = {0} \u00d7 (0, 1), it follows that u(0, s) = a + s (b \u2212 a). Likewise,\nu(s, 0) = a + s (c \u2212 a). Now taking U\u01eb := {0} \u00d7 [0, 1) \u222a [0, \u01eb) \u00d7 {0}, we see that\nlim\u03b5\u05810 LipU\u03b5 u = |b \u2212 a|. Hence |c \u2212 a| \u2264 |b \u2212 a|. By symmetry, |c \u2212 a| = |b \u2212 a|.\nSince F is assumed\u221ato \u0001be \u221a\nnonconstant, b 6= c, and hence c \u2212 a = a \u2212 b. Then\nu(0, s) \u2212 u(s, 0) / 2s = 2 |b \u2212 a|, which contradicts lim\u03b5\u05810 LipU\u03b5 u = |b \u2212 a|.)\nOne property that makes length spaces special is that the Lipschitz norm is\ndetermined locally. More precisely, if W \u2282 X is closed, then either LipW u =\n\n\f6\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nLip\u2202W u or for every \u03b4 > 0\nn |u(x) \u2212 u(y)|\no\nsup\n: x, y \u2208 W, 0 < d(x, y) < \u03b4 = LipW u .\nd(x, y)\n\nThe definition of AM is inspired by the notion that if u is the \"tautest possible\"\nLipschitz extension of F , it should be tautest possible on any open V \u2282 X r Y ,\ngiven the values of u on \u2202V and ignoring the rest of the metric space. Without\nlocality, the rest of the metric space cannot be ignored (since long-distance effects\nmay change the global Lipschitz constant), and the definition of AM is less natural.\nAnother important property of length spaces is that the graph distance metric on\nE\u03b5 scaled by \u03b5 approximates the original metric, namely, it is within \u03b5 of d(*, *).\n1.5. Infinity Laplacian on Rn . The continuum version of the infinity Laplacian\nis defined for C 2 functions u on domains U \u2282 Rn by\nX\nu xi u xi xj u xj .\n\u2206\u221e u = |\u2207u|\u22122\ni,j\n\nT\n\nThis is the same as \u03b7 H\u03b7, where H is the Hessian of u and \u03b7 = \u2207u/|\u2207u|. Informally, \u2206\u221e u is the second derivative of u in the direction of the gradient of u. If\n\u2207u(x) = 0 then, \u2206\u221e u(x) is undefined; however, we adopt the convention that if\nthe second derivative of u(x) happens to be the same in every direction (i.e, the\nmatrix {uxi xj } is \u03bb times the identity), then \u2206\u221e u(x) = \u03bb, which is the second\nderivative in any direction. (As mentioned above, some texts on infinity harmonic\nfunctions define \u2206\u221e without the normalizing factor |\u2207u|\u22122 . When discussing viscosity solutions to \u2206\u221e u = 0, the two definitions are equivalent. The fact that the\nnormalized version is sometimes undefined when \u2207u = 0 turns out not to matter\nbecause it is always well-defined at x when \u03c6 is a cone function, i.e., it has the\nform a|x \u2212 z| + b for a, b \u2208 R and z \u2208 Rn with z 6= x, and viscosity solutions can\nbe defined via comparison with cones, see Section 1.6.) As in the discrete setting,\nu is infinity harmonic if \u2206\u221e u = 0.\nWhile discrete infinity-harmonic functions are a recent concept, introduced in\nfinite-difference schemes for approximating continuous infinity harmonic functions\n[21], related notions of value for stochastic games are of course much older. The\ncontinuous infinity Laplacian appeared first in the work of Aronsson [1] and has\nbeen very thoroughly studied [4]. Key motivations for studying this operator are\nthe following:\n(1) AM extensions: Aronsson proved that C 2 extensions u on domains U \u2282\nRn (of functions F on \u2202U ) are infinity harmonic if and only if they are AM.\n(2) p-harmonic functions: As noted by Aronsson [1], the infinity Laplacian is\nthe formal limit, as p \u2192 \u221e of the (properly normalized)\nR p-Laplacians. Recall that p-harmonic functions, i.e. minimizers u of |\u2207u(x)|p dx subject\nto boundary conditions, solve the Euler-Lagrange equation\n\u2207 * (|\u2207u|p\u22122 \u2207u) = 0,\n\nwhich can be rewritten\n\n|\u2207u|p\u22122 (\u2206u + (p \u2212 2)\u2206\u221e u) = 0,\n\nwhere \u2206 is the ordinary Laplacian. Dividing by |\u2207u|p\u22122 , we see that (at\nleast when |\u2207u| =\n6 0) p-harmonic functions satisfy \u2206p u = 0, where \u2206p :=\n\u2206\u221e + (p \u2212 2)\u22121 \u2206; the second term vanishes in the large p limit. It is not\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n7\n\ntoo hard to see that as p tends to infinity, the Lipschitz norm of any limit\nof the p-harmonic functions extending F will be Lip\u2202U F ; so it is natural\nto guess (and was proved in [7]) that as p tends to infinity the p-harmonic\nextensions of F converge to a limit that is both absolutely minimal and a\nviscosity solution to \u2206\u221e u = 0.\nIn the above setting, Aronsson also proved that there always exists an AM extension, and that in the planar case U \u2282 R2 , there exists at most one C 2 infinity\nharmonic extension; however C 2 infinity harmonic extensions do not always exist\n[2].\nTo define the infinity Laplacian in the non-C 2 setting requires us to consider\nweak solutions; the right notion here is that of viscosity solution, as introduced\nby Crandall and Lions (1983) [11]. Start by observing that if u and v are C 2\nfunctions, u(x) = v(x), and v \u2265 u in a neighborhood of x, then v \u2212 u has a local\nminimum at x, whence \u2206\u221e v(x) \u2265 \u2206\u221e u(x) (if both sides of this inequality are\ndefined). This comparison principle (which has analogs for more general degenerate\nelliptic PDEs [5]) suggests that if u is not C 2 , in order to define \u2206\u221e u(x) we want\nto compare it to C 2 functions \u03c6 for which \u2206\u221e \u03c6(x) is defined. Let S(x) be the\nset of real valued functions \u03c6 defined and C 2 in a neighborhood of x for which\n\u2206\u221e \u03c6(x) has been defined; that is, either \u2207\u03c6(x) 6= 0 or \u2207\u03c6(x) = 0 and the limit\n\u2032\n)\u2212\u03c6(x)\nexists.\n\u2206\u221e \u03c6(x) := limx\u2032 \u2192x 2 \u03c6(x\n|x\u2032 \u2212x|2\nDefinition. Let X be a domain in Rn and let u : X \u2192 R be continuous. Set\n(1.3)\n\n\u2206+\n\u221e u(x) = inf{\u2206\u221e \u03c6(x) : \u03c6 \u2208 S(x) and x is a local minimum of \u03c6 \u2212 u} .\n\n2\nThus u satisfies \u2206+\n\u221e (u) \u2265 g in a domain X, iff every \u03c6 \u2208 C such that \u03c6 \u2212 u has\n+\na local minimum at some x \u2208 X satisfies \u2206\u221e \u03c6(x) \u2265 g(x). In this case u is called\na viscosity subsolution of \u2206\u221e (*) = g. Note that if \u03c6 \u2208 C 2 , then \u2206+\n\u221e \u03c6 = \u2206\u221e \u03c6\nwherever \u2207\u03c6 6= 0.\nSimilarly, let\n\n(1.4) \u2206\u2212\n\u221e u(x) = sup{\u2206\u221e \u03c6(x) : \u03c6 \u2208 S(x) and x is a local maximum of \u03c6 \u2212 u} .\nand call u a viscosity supersolution of \u2206\u221e (*) = g iff \u2206\u2212\n\u221e u \u2264 g in X.\n+\nFinally, u is a viscosity solution of \u2206\u221e (*) = g if \u2206\u2212\nu\n\u221e \u2264 g \u2264 \u2206\u221e u in X (i.e.,\nu is both a supersolution and a subsolution).\nHere is a little caveat. At present, we do not know how to show that \u2206\u221e u = g\nin the viscosity sense determines g. For example, if u is Lipschitz, g1 and g2 are\ncontinuous, and \u2206\u221e u = gj holds for j = 1, 2 (in the viscosity sense), how does one\nprove that g1 = g2 ?\nThe following result of Jensen (alluded to above) is now well known [1, 13, 4]:\nIf X is a domain in Rn and u : X \u2192 R continuous, then LipU u = Lip\u2202U u < \u221e for\nevery bounded open set U \u2282 U \u2282 X (i.e., u is AM) if and only if u is a viscosity\nsolution to \u2206\u221e u = 0 in X.\nLet A \u2282 Y \u2282 X, where A is closed, Y 6= \u2205 and X is a length space. If x \u2208 X,\none can define the \u221e-harmonic measure of A from x as the infimum of u(x)\nover all functions u : X \u2192 [0, \u221e) that are Lipschitz on X, AM in X r Y and satisfy\n(x,Y,X)\nu \u2265 1 on A. This quantity will be denoted by \u03c9\u221e (A) = \u03c9\u221e\n(A). In Section 4\nwe prove\n\n\f8\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nTheorem 1.5. Let X be the unit ball in Rn , n > 1, let Y = \u2202X, let x be the\ncenter of the ball, and for each \u03b4 > 0 let A\u03b4 \u2282 Y be a spherical cap of radius \u03b4 (of\ndimension n \u2212 1). Then\nc \u03b4 1/3 \u2264 \u03c9\u221e (A\u03b4 ) \u2264 C \u03b4 1/3 ,\n\nwhere c, C > 0 are absolute constants (which do not depend on n).\nNumerical calculations [21] had suggested that in the setting of the theorem\n\u03c9\u221e (A\u03b4 ) tends to 0 as \u03b4 \u2192 0, but this was only recently proved [12], and the proof\ndid not yield any quantitative information on the rate of decay. In contrast to our\nother theorems in the paper, the proof of this theorem does not use tug-of-war.\nThe primary tool is comparison with a specific AM function in R2 r {0} with decay\nr\u22121/3 discovered by Aronsson [3].\n1.6. Quadratic comparison on length spaces. To motivate the next definition,\nobserve that for continuous functions u : R \u2192 R, the inequality \u2206+\n\u221e u \u2265 0 reduces to\nconvexity. The definition of convexity requiring a function to lie below its chords has\nan analog, comparison with cones, which characterizes infinity-harmonic functions.\nCall the function \u03c6(y) = b |y \u2212 z| + c a cone based at z \u2208 Rn . For an open U \u2282 Rn ,\nsay that a continuous u : U \u2192 R satisfies comparison with cones from above\non U if for every open W \u2282 W \u2282 U for every z \u2208 Rn r W , and for every cone\n\u03c6 based at z such that the inequality u \u2264 \u03c6 holds on \u2202W , the same inequality is\nvalid throughout W . Comparison with cones from below is defined similarly\nusing the inequality u \u2265 \u03c6.\nJensen [13] proved that viscosity solutions to \u2206\u221e u = 0 for domains in Rn satisfy comparison with cones (from above and below), and Crandall, Evans, and\nGariepy [9] proved that a function on Rn is absolutely minimal in a bounded domain U if and only if it satisfies comparison with cones in U .\nChampion and De Pascale [8] adapted this definition to length spaces, where\ncones are replaced by functions of the form \u03c6(x) = b d(x, z) + c where b > 0. Their\nprecise definition is as follows. Let U be an open subset of a length-space X and let\nu : U \u2192 R be continuous. Then u is said to satisfy comparison with distance\nfunctions from above on U if for every open W \u2282 U , for every z \u2208 X r W\nfor every b \u2265 0 and for every c \u2208 R if u(x) \u2264 b d(x, z) + c holds on \u2202W , then it\nalso holds in W . The function u is said to satisfy comparison with distance\nfunctions from below if \u2212u satisfies comparison with distance functions from\nabove. Finally, u satisfies comparison with distance functions if it satisfies\ncomparison with distance functions from above and from below.\nThe following result from [8] will be used in the proof of Theorem 1.4:\nLemma 1.6 ([8]). Let U be an open subset of a length space. A continuous u :\nU \u2192 R satisfies comparison with distance functions in U if and only if it is AM in\nU.\nTo study the inhomogenous equation \u2206\u221e u = g, because u will in general have\nnon-zero second derivative (in its gradient direction), it is natural to extend these\ndefinitions to comparison with functions that have a quadratic term.\nDefinitions. Let Q(r) = ar2 + br + c with r, a, b, c \u2208 R and let X be a length\nspace.\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n9\n\n\u2022 Let z \u2208 X. We call the function \u03c6(x) = Q(d(x, z)) a quadratic distance\nfunction (centered at z).\n\u2022 We say a quadratic distance function \u03c6(x) = Q(d(x, z)) is \u22c6-increasing\n(in distance from z) on an open set V \u2282 X if either (1) z \u2208\n/ V and for\nevery x \u2208 V , we have Q\u2032 (d(x, z)) > 0, or (2) z \u2208 V and b = 0 and a > 0.\nSimilarly, we say a quadratic distance function \u03c6 is \u22c6-decreasing on V if\n\u2212\u03c6 is \u22c6-increasing on V .\n\u2022 If u : U \u2192 R is a continuous function defined on an open set U in a length\nspace X, we say that u satisfies g-quadratic comparison on U if the\nfollowing two conditions hold:\n(1) g-quadratic comparison from above: For every open V \u2282 V \u2282 U\nand \u22c6-increasing quadratic distance function \u03c6 on V with quadratic\nterm a \u2264 inf y\u2208V g(y)\n2 , the inequality \u03c6 \u2265 u on \u2202V implies \u03c6 \u2265 u on V .\n(2) g-quadratic comparison from below: For every open V \u2282 V \u2282 U\nand \u22c6-decreasing quadratic distance function \u03c6 on V with quadratic\nterm a \u2265 supy\u2208V g(y)\n2 , the inequality \u03c6 \u2264 u on \u2202V implies \u03c6 \u2264 u on\nV.\nThe following theorem is proved in Section 6.\nTheorem 1.7. Let u be a real-valued continuous function on a bounded domain\nU in Rn , and suppose that g is a continuous function on U . Then u satisfies gquadratic comparison on U if and only if u is a viscosity solution to \u2206\u221e u = g in\nU.\nThis equivalence motivates the study of functions satisfying quadratic comparison. Note that satisfying \u2206\u221e u(x) = g(x) in the viscosity sense depends only on\nthe local behavior of u near x. We may use Theorem 1.7 to extend the definition\nof \u2206\u221e to length spaces; saying that \u2206\u221e u = g on an open subset U of a length\nspace if and only if every x \u2208 U has a neighborhood V \u2282 U on which u satisfies\ng-quadratic comparison. We warn the reader, however, that even for length spaces\nX contained within R, there can be solutions to \u2206\u221e u = 0 that do not satisfy\ncomparison with distance functions, (or 0-quadratic comparison, for that matter):\nfor example, X = U = (0, 1) and u(x) = x. The point here is that when we take\nV \u2282 (0, 1) and compare u with some function \u03c6 on \u2202V , the \"appropriate\" notion\nof the boundary \u2202V is the boundary in R, not in X.\nThe continuum value of the tug-of-war game sometimes gives a construction of\na function satisfying g-quadratic comparison. We prove:\nTheorem 1.8. Suppose X is a length space, Y \u2282 X is non-empty, F : Y \u2192 R is\nuniformly continuous and bounded, and either f : X r Y \u2192 R satisfies f = 0 or all\nthree of the following hold: inf |f | > 0, f is uniformly continuous, and X has finite\ndiameter. Then the continuum value u is the unique continuous function satisfying\n(\u22122f )-quadratic comparison on X r Y and u = F on Y . Moreover, if \u0169 : X \u2192 R\nis continuous, satisfies \u0169 \u2265 F on Y and (\u22122f )-quadratic comparison from below on\nX r Y , then \u0169 \u2265 u throughout X.\nPutting these last two theorems together, we obtain\nCorollary 1.9. Suppose U \u2282 Rn is a bounded open set, F : \u2202U \u2192 R is uniformly\ncontinuous, and f : U \u2192 R satisfies either f = 0 or else inf f > 0 and f is\nuniformly continuous. Then there is a unique continuous function u : U \u2192 R that\n\n\f10\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nis a viscosity solution to \u2206\u221e u = \u22122f on U and satisfies u = F on \u2202U . This unique\nsolution is the continuum value of tug-of-war on (U , d, \u2202U, F, f ).\nIt is easy to verify that F indeed satisfies the assumptions in Theorem 1.8. In\norder to deduce the Corollary, we may take the length space X as a ball in Rn\nwhich contains U and extend F to X r U , say. Alternatively, we may consider U\nwith its intrinsic metric and lift F to the completion of U .\nWe present in Section 5 an example showing that the corollary may fail if f\nis permitted to take values of both signs. Specifically, the example describes two\nfunctions u1 , u2 defined in the closed unit disk in R2 and having boundary values\nidentically zero on the unit circle such that with some Lipschitz function g we have\n\u2206\u221e uj = g for j = 1, 2 (in the viscosity sense), while u1 6= u2 .\n\nThe plan of the paper is as follows. Section 2 discusses the discrete tug-of-war\non graphs and proves Theorem 1.2, and Section 3 deals with tug-of-war on length\nspaces and proves Theorems 1.3, 1.4 and 1.8. Section 4 is devoted to estimates of\n\u221e-harmonic measure. In Section 5, we present a few counter-examples showing\nthat some of the assumptions in the theorems we prove are necessary. Section 6 is\ndevoted to the proof of Theorem 1.7. Section 7 presents some heuristic argument\ndescribing what the limiting trajectories of some \u01eb-tug-of-war games on domains\nin Rn may look like and states a question regarding the length of the game. We\nconclude with additional open problems in Section 8.\n2. Discrete game value existence\n2.1. Tug-of-war on graphs without running payoffs. In this section, we will\ngenerally assume E = EI = EII is undirected and connected and f = 0.\nThough we will not use this fact, it is interesting to point out that in the case\nwhere E is finite, there is a simple algorithm from [15] which calculates the value u\nof the game and proceeds as follows. Assuming the value u(v) is already calculated\nat some set V \u2032 \u2283 Y of vertices, find a path v0 , v1 , . . . , vk , k > 1, with interior vertices\n\u0001\nv1 , . . . , vk\u22121 \u2208 X rV \u2032 and endpoints v0 , v\u0001k \u2208 V \u2032 which maximizes u(vk )\u2212u(v0 ) /k\nand set u(vi ) = u(v0 ) + i u(vk ) \u2212 u(v0 ) /k for i = 1, 2, . . . , k \u2212 1. Repeat as long\nas V \u2032 6= X.\nRecall that uI is the value function for player I.\n\nLemma 2.1. Suppose that inf Y F > \u2212\u221e and f = 0. Then uI is the smallest\n\u221e-harmonic function bounded below on X that extends F . More generally, if v is\nan \u221e-harmonic function which is bounded from below on X and v \u2265 F on Y , then\nv \u2265 uI on X.\nSimilarly, if F is bounded above on Y , then uII is the largest \u221e-harmonic function\nbounded above on X that extends F .\nProof. Player I could always try to move closer to some specific point y \u2208 Y . Since\nin almost every infinite sequence of fair coin tosses there will be a time when the\nnumber of tails exceeds the number of heads by d(x0 , y), this ensures that the game\nterminates a.s., and we have uI \u2265 inf Y F > \u2212\u221e. Suppose that v \u2265 F on Y and\nv is \u221e-harmonic on X. Given \u03b4 > 0, consider an arbitrary strategy for player I\nand let II play a strategy that at step k (if II wins the coin toss), selects a state\nwhere v(*) is within \u03b42\u2212k of its infimum among the states II could move to. We\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n11\n\nFigure 1. A graph for which the obvious tug-of-war strategy of\nmaximizing/minimizing u does poorly.\nwill show that the expected payoff for player I is at most v(x0 ) + \u03b4. We may\nassume the game terminates a.s. at a time \u03c4 < \u221e. Let {xj }j\u22650 denote the random\nsequence of states encountered in the game. Since v is \u221e-harmonic, the sequence\nMk = v(xk\u2227\u03c4 ) + \u03b42\u2212k is a supermartingale. Optional sampling and Fatou's lemma\nimply that v(x0 ) + \u03b4 = M0 \u2265 E[M\u03c4 ] \u2265 E[F (x\u03c4 )]. Thus uI \u2264 v. By Lemma 1.1, this\ncompletes the proof.\n\u0003\nNow, we prove the first part of Theorem 1.2: When the graph (X, E) is locally\nfinite and Y is finite, this was proven in [15, Thm. 17].\nTheorem 2.2. Suppose that (X, E) is connected, and Y 6= \u2205. If F is bounded\nbelow (or above) on Y and f = 0, then uI = uII , so the game has a value.\nBefore we prove this, we discuss several counterexamples that occur when the\nconditions of the theorem are not met. First, this theorem can fail if E is directed.\nA trivial counterexample is when X is finite and there is no directed path from the\ninitial state to Y .\nIf X is infinite and E is directed, then there are counterexamples to Theorem 2.2\neven when every vertex lies on a directed path towards a terminal state. For example, suppose X = N and Y = {0}, with F (0) = 0. If E consists of directed edges of\nthe form (n, n \u2212 1) and (n, n + 2), then II may play so that with positive probability\nthe game never terminates, and hence the value for player I is by definition \u2212\u221e.\nEven in the undirected case, a game may not have a value if F is not bounded\neither from above or below. The reader may check that if X is the integer lattice\nZ2 and the terminal states are the x-axis with F ((x, 0)) = x, then the players'\nvalue functions are given by uI ((x, y)) = x \u2212 |y| and uII ((x, y)) = x + |y|. (Roughly\nspeaking, this is because, in order to force the game to end in a finite amount of\ntime, player I has to \"give up\" |y| opportunities to move to the right.) Observe\nalso that in this case any linear function which agrees with F on the x-axis is\n\u221e-harmonic.\nAs a final remark before proving this theorem, let us consider the obvious strategy\nfor the two players, namely for player I to always maximize u on her turn and for II\nto always minimize u on her turn. Even when E is (undirected and) locally finite\nand the payoff function satisfies 0 \u2264 F \u2264 1, these obvious strategies need not be\noptimal.\nFigure 1, where X \u2282 R2 is given by\n\b Consider, e.g., the game shown in\nj\nX = v(k, j) : j = 1, 2, . . . ; k = 0, 1, . . . , 2 , v(k, j) = (2\u2212j k, 1 \u2212 2\u2212j+1 ), and E\nconsists of edges of the form {v(k, j), v(k + 1, j)} and {v(k, j), v(2k, j + 1)}. The\n\n\f12\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nterminal states are on the left and right edges of the square, and the payoff is 1 on\nthe left and 0 on the right. Clearly the function u(v(k, j)) = 1\u2212k/2j (the Euclidean\ndistance from the right edge of the square) is infinity-harmonic, and by Corollary 2.3\nbelow, we have uI = u = uII . The obvious strategy for player I is to always move\nleft, and for II it is to always move right. Suppose however that player I always\npulls left and player II always pulls up. It is easy to check that the probability\nthat the game ever terminates when starting from v(k, j) is at most 2/(k + 2) (this\nfunction is a supermartingale under the corresponding Markov chain). Therefore\nthe game continues forever with positive probability, resulting in a payoff of \u2212\u221e to\nplayer I. Thus, a near-optimal strategy for player I must be able to force the game\nto end, and must be prepared to make moves which do not maximize u. (This is a\nwell known phenomenon, not particular to tug-of-war.)\nProof of Theorem 2.2. If F is bounded above but not below, then we may exchange the roles of players I and II and negate F to reduce to the case where\nF is bounded below. Since uI \u2264 uII always holds, we just need to show that\nuII \u2264 uI . Since player I could always pull towards a point in Y and thereby ensure\nthat the game terminates, we have uI \u2265 inf Y F > \u2212\u221e. Let u = uI and write\n\u03b4(x) = supy:y\u223cx |u(y) \u2212 u(x)|. Let x0 , x1 , . . . be the sequence of positions of the\ngame. For ease of exposition, we begin by assuming that E is locally finite (so\nthat the suprema and infima in the definition of the \u221e-Laplacian definition are\nachieved) and that \u03b4(x0 ) > 0; later we will remove these assumptions.\nTo motivate the following argument, we make a few observations. In order to\nprove that uII \u2264 uI , we need to show that player II can guarantee that the game\nterminates while also making sure that the expected payoff is not much larger than\nu(x0 ). These are two different goals, and it is not a priori clear how to combine\nthem. To resolve this difficulty, observe that \u03b4(xj ) is non-decreasing in j if players I\nand II adopt the strategies of maximizing (respectively, minimizing) u at every step.\nAs we will later see, this implies that the game terminates a.s. under these strategies.\nOn the other hand, if player I deviates from this strategy and thereby reduces \u03b4(xj ),\nthen perhaps player II can spend some turns playing suboptimally with respect to\nu in order to increase \u03b4. Let X0 := {x \u2208 X : \u03b4(x) \u2265 \u03b4(x0 )} \u222a Y . For n = 0, 1, 2, . . .\nlet jn = max{j \u2264 n : xj \u2208 X0 } and vn = xjn , which is the last position in X0 up to\ntime n. We will shortly describe a strategy for II based on the idea of backtracking\nto X0 when not in X0 . If vn 6= xn , we may define a backtracking move from xn\nas any move to a neighbor yn of xn that is closer to vn than xn in the subgraph\nGn \u2282 (X, E) spanned by the vertices xjn , xjn +1 , . . . , xn . Here, \"closer\" refers to\nthe graph metric of Gn . When II plays the backtracking strategy, she backtracks\nwhenever not in X0 and plays to a neighbor minimizing uI when in X0 .\nNow consider the game evolving under any strategy for player I and the backtracking strategy for II. Let dn be the distance from xn to vn in the subgraph Gn .\nSet\nmn := u(vn ) + \u03b4(x0 ) dn .\nIt is clear that u(xn ) \u2264 mn , because there is a path of length dn from xn to vn in Gn\nand the change in u across any edge in this path is less than \u03b4(x0 ), by the definition\nof X0 . It is easy to verify that mn is a supermartingale, as follows. If xn \u2208 X0 , and\nplayer I plays, then mn+1 \u2264 u(xn ) + \u03b4(xn ) = mn + \u03b4(xn ), while if II gets the turn\nthen mn+1 = u(xn ) \u2212 \u03b4(xn ). If xn \u2208\n/ X0 and II plays, then mn+1 = mn \u2212 \u03b4(x0 ). If\nxn \u2208\n/ X0 and player I plays not into X0 , then mn+1 \u2264 mn + \u03b4(x0 ). The last case to\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n13\n\nconsider is that xn \u2208\n/ X0 and player I plays into a vertex in X0 . In such a situation,\nmn+1 = u(xn+1 ) \u2264 u(xn ) + \u03b4(xn ) \u2264 mn + \u03b4(x0 ) .\n\nThus, indeed, mn is a supermartingale (bounded below). Let \u03c4 denote the first\ntime a terminal state is reached (so \u03c4 = \u221e if the game does not terminate). By\nthe martingale convergence theorem, the limit limn\u2192\u221e mn\u2227\u03c4 exists. But when\nplayer II plays we have mn+1 \u2264 mn \u2212 \u03b4(x0 ). Therefore, the game must terminate\nwith probability 1. The expected outcome of the game thus played is at most\nm0 = u(x0 ). Consequently, uII \u2264 u, which completes the proof in the case where\nE is locally finite and \u03b4(x0 ) > 0.\nNext, what if E is not locally finite, so that suprema and infima might not be\nachieved? In this case, we fix a small \u03b7 > 0, and use the same strategy as above\nexcept that if xn \u2208 X0 and II gets the turn, she moves to a neighbor at which u\nis at most \u03b72\u2212n\u22121 larger than its infimum value among neighbors of xn . In this\ncase, mn + \u03b7 2\u2212n is a supermartingale, and hence the expected payoff is at most\nu(x0 ) + \u03b7. Since this can be done for any \u03b7 > 0, we again have that uII \u2264 u.\nFinally, suppose that \u03b4(x0 ) = 0. Let y \u2208 Y , and let player II pull toward y\nuntil the first time a vertex x\u22170 with \u03b4(x\u22170 ) > 0 or x\u22170 \u2208 Y is reached. After that, II\ncontinues as above. Since u(x0 ) = u(x\u22170 ), this completes the proof.\n\u0003\nCorollary 2.3. If E is connected, Y 6= \u2205 and sup |F | < \u221e, then u = uI = uII is\nthe unique bounded \u221e-harmonic function agreeing with F on Y .\nProof. This is an immediate consequence of Lemma 2.1, the remark that follows it,\nand Theorem 2.2.\n\u0003\nIf E = {(n, n + 1) : n = 0, 1, 2, . . . }, Y = {0} and F (0) = 0, then \u0169(n) = n is an\nexample of an (unbounded) \u221e-harmonic function that is different from u.\n2.2. Tug-of-war on graphs with running payoffs. Suppose now that f 6= 0.\nThen the analog of Theorem 2.2 does not hold without additional assumptions.\nFor a simple counterexample, suppose that E is a triangle with self loops at its\nvertices (i.e., a player may opt to remain in the same position), that the vertex v0\nis a terminal vertex with final payoff F (v0 ) = 0, and the running payoff is given by\nf (v1 ) = \u22121 and f (v2 ) = 1. Then the function given by u(v0 ) = 0, u(v1 ) = a \u2212 1,\nu(v2 ) = a + 1 is a solution to \u2206\u221e u = \u22122f provided \u22121 \u2264 a \u2264 1. The reader\nmay check that uI is the smallest of these functions and uII is the largest. The gap\nof 2 between uI and uII appears because a player would have to give up a move\n(sacrificing one) in order to force the game to end. This is analogous to the Z2\nexample given in \u00a72.1. Both players are earning payoffs in the interior of the game,\nand moving to a terminal vertex costs a player a turn.\nOne way around this is to assume that f is either uniformly positive or uniformly\nnegative, as in the following analog of Theorem 2.2. We now prove the second half\nof Theorem 1.2:\nTheorem 2.4. Suppose that E is connected and Y 6= \u2205. Assume that F is bounded\nbelow and inf f > 0. Then uI = uII . If, additionally, f and F are bounded above,\nthen any bounded solution \u0169 to \u2206\u221e \u0169 = \u22122f with the given boundary conditions is\nequal to u.\nProof. By considering a strategy for player I that always pulls toward a specific\nterminal state y, we see that inf X uI \u2265 inf Y F . By Lemma 1.1, \u2206\u221e uI = \u22122f on\n\n\f14\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nX r Y . Let \u0169 be any solution to \u2206\u221e \u0169 = \u22122f on X r Y that is bounded below on\nX and has the given boundary values on Y .\nClaim: uII \u2264 \u0169. In proving this, we may assume without loss of generality that\nG r Y is connected, where G is the graph (X, E). Then if \u0169 = \u221e at some vertex in\nX r Y , we also have \u0169 = \u221e throughout X r Y , in which case the claim is obvious.\nThus, assume that \u0169 is finite on X r Y . Fix \u03b4 \u2208 (0, inf f ) and let II use the strategy\nthat at step k, if the current state is xk\u22121 and II wins the coin toss, selects a state\nxk with \u0169(xk ) < inf z:z\u223cxk\u22121 \u0169(z) + 2\u2212k \u03b4. Then for any strategy chosen by player I,\nPk\u22121\nthe sequence Mk = \u0169(xk ) + 2\u2212k \u03b4 + j=0 f (xj ) is a supermartingale bounded from\nbelow, which must converge a.s. to a finite limit. Since inf f > 0, this also forces\nthe game to terminate a.s. Let \u03c4 denote the termination time. Then\n\u03c4\n\u22121\n\u0011\n\u0010\nX\nf (xj ) .\n\u0169(x0 ) + \u03b4 = M0 \u2265 E(M\u03c4 ) \u2265 E \u0169(x\u03c4 ) +\nj=0\n\nThus this strategy for II shows that uII (x0 ) \u2264 \u0169(x0 ) + \u03b4. Since \u03b4 > 0 is arbitrary,\nthis verifies the claim. In particular, uII \u2264 uI in X, so uII = uI .\nNow suppose that sup F < \u221e and sup f < \u221e, and \u0169 is a bounded solution to\n\u2206\u221e \u0169 = \u22122f with the given boundary values. By the claim above, \u0169 \u2265 uII = uI .\nOn the other hand, player I can play to maximize or nearly maximize \u0169 in every\nmove. Under such a strategy, he guarantees that by turn k the expected payoff is\nat least \u0169(x0 ) \u2212 E[Q(k)] \u2212 \u03b5, where Q(k) is 0 if the game has terminated by time\nk and \u0169(xk ) otherwise. If the expected number of moves played is infinite, the\nexpected payoff is infinite. Otherwise, limk E[Q(k)] = 0, since \u0169 is bounded. Thus,\nuII = uI \u2265 \u0169 in any case.\n\u0003\n3. Continuum value of tug-of-war on a length space\n3.1. Preliminaries and outline. In this section, we will prove Theorem 1.3, Theorem 1.8 and Theorem 1.4. Throughout this section, we assume (X, d, Y, F, f ) denotes a tug-of-war game, i.e., X is a length space with distance function d, Y \u2282 X\nis a nonempty set of terminal states, F : Y \u2192 R is the final payoff function, and\nf : X r Y \u2192 R is the running payoff function. We let xk denote the game state at\ntime k in \u03b5-tug-of-war.\nIt is natural to ask for a continuous-time version of tug-of-war on a length space.\nPrecisely and rigorously defining such a game (which would presumably involve\nreplacing coin tosses with white noise, making sense of what a continuum no-lookahead strategy means, etc.) is a technical challenge we will not undertake in this\npaper (though we include some discussion of the small-\u03b5 limiting trajectory of \u03b5\ntug-of-war in the finite-dimensional Euclidean case in Section 7). But we can make\nsense of the continuum game's value function u0 by showing that the value function\nu\u03b5 for the \u03b5-step tug-of-war game converges as \u03b5 \u2192 0.\nThe value functions u\u03b5 do not satisfy any nice monotonicity properties as \u03b5 \u2192\n0. In the next subsection we define two modified versions of tug-of-war whose\nvalues closely approximate u\u03b5 , and which do satisfy a monotonicity property along\n\u2212n\nsequences of the form \u03b52\u2212n , allowing us to conclude that limn u\u03b52 exists. Then\nwe show that any such limit is a bounded below viscosity solution to \u2206\u221e u = \u22122f ,\nand that any viscosity solution bounded below is an upper bound on such a limit,\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n15\n\nso that any two such limits must be equal, which will allow us to prove that the\ncontinuum limit u0 = lim\u03b5 u\u03b5 exists.\nBecause the players can move the game state almost as far as \u03b5, either player can\nensure that d(xk , y) is \"almost a supermartingale\" up until the time that xk = y.\nWhen doing calculations it is more convenient to instead work with a related metric\nd\u03b5 defined by\nd\u03b5 (x, y) := \u03b5 \u00d7 (min # steps from x to y using steps of length < \u03b5)\n(\n0\nx=y\n=\n\u03b5 + \u03b5\u230ad(x, y)/\u03b5\u230b x 6= y\n\nSince d\u03b5 is the graph distance scaled by \u03b5, it is in fact a metric, and either player\nmay choose to make d\u03b5 (xk , y) a supermartingale up until the time xk = y.\n3.2. II-favored tug-of-war and dyadic limits. We define a game called IIfavored \u03b5-tug-of-war that is designed to give a lower bound on player I's expected\npayoff. It is related to ordinary \u03b5-step tug-of-war, but II is given additional options,\nand player I's running payoffs are slightly smaller. At the (i + 1)st step, player I\nchooses a point z in B\u03b5 (xi ) and a coin is tossed. If player I wins the coin toss, the\ngame position moves to a point, of player II's choice, in (B2\u03b5 (z) \u2229 Y ) \u222a {z}. (If\nd(z, Y ) \u2265 2\u03b5, this means simply moving to z.) If II wins, then the game position\nmoves to a point in B2\u03b5 (z) of II's choice. The game ends at the first time \u03c4 for\nwhich x\u03c4 \u2208 Y . Player I's payoff is then \u2212\u221e if the game never terminates, and\notherwise it is\n\u03c4\nX\ninf f (y) + F (x\u03c4 )\n(3.1)\n\u03b52\ni=1\n\ny\u2208B2\u03b5 (zi )\n\nwhere zi is the point that player I targets on the ith turn, and f (y) is defined to be\nzero if y \u2208 Y . We let v \u03b5 be the value for player I for this game. Given a strategy\nfor player II in the ordinary \u03b5-game, player II can easily mimic this strategy in the\nII-favored \u03b5-game and do at least as well, so v \u03b5 \u2264 u\u03b5I .\nLet w\u03b5 be the value for player II of I-favored \u03b5-tug-of-war, defined analogously\nbut with the roles of player I and player II reversed (i.e., at each move, II selects\nthe target less than \u03b5 units away, instead of player I, etc., and the inf in the running\npayoff term in Equation (3.1) is replaced with a sup, and games that never terminate\nhave payoff +\u221e). For any \u03b5 > 0 we have\nv \u03b5 \u2264 u\u03b5I \u2264 u\u03b5II \u2264 w\u03b5 .\nLemma 3.1. For any \u03b5 > 0,\nv 2\u03b5 \u2264 v \u03b5 \u2264 u\u03b5I \u2264 u\u03b5II \u2264 w\u03b5 \u2264 w2\u03b5 .\n\nProof. We have already noted that v \u03b5 \u2264 u\u03b5I \u2264 u\u03b5II \u2264 w\u03b5 . We will prove that\nv 2\u03b5 \u2264 v \u03b5 ; the inequality w\u03b5 \u2264 w2\u03b5 follows by symmetry. Consider a strategy SI2\u03b5\nfor II-favored 2\u03b5-tug-of-war. We define a strategy SI\u03b5 for player I for the II-favored\n\u03b5 game that mimics SI2\u03b5 as follows. Whenever strategy SI2\u03b5 would choose a target\npoint z, player I \"aims\" for z for one \"round,\" which we define to be the time until\none of the players has won the coin toss two more times than the other player. By\n\"aiming for z\" we mean that player I picks a target point that, in the metric d\u03b5 ,\nis \u03b5 units closer to z than the current point. With probability 1/2, player I gets\ntwo surplus moves before II, and then the game position reaches z (or a point in\n\n\f16\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nY \u2229 B4\u03b5 (z)) before the game position exits B4\u03b5 (z). If player II gets two surplus\nmoves before player I, then the game position will be in B4\u03b5 (z). (See Figure 2.)\nThe expected number of moves in this round of the II-favored \u03b5 game is 4; and the\n\n4\u03b5\n\nz\u0303\nz\n\n<\u03b5\n\n<\u03b5\n\nx\n\n2\u03b5\n\nFigure 2. At the end of the round, player I reaches the target\nz (or a point in Y \u2229 B4\u03b5 (z)) with probability at least 1/2, and\notherwise the state still remains within B4\u03b5 (z). During the first\nstep of the round, when player I has target z\u0303, the running payoff\nis the infimum of f over B2\u03b5 (z\u0303) \u2282 B4\u03b5 (z), and during any step of\nthe round the infimum is over a subset of B4\u03b5 (z).\nrunning payoff at each move is an \u03b52 times the infimum over a ball of radius 2\u03b5 that\nis a subset of B4\u03b5 (z) (as opposed to (2\u03b5)2 times the infimum over the whole ball).\nHence strategy SI\u03b5 guarantees for the II-favored \u03b5 game an expected total payoff\nthat is at least as large as what SI2\u03b5 guarantees for the II-favored 2\u03b5 game.\n\u0003\n\u221e\n\n\u2212n\n\nThus v \u03b5 converges along dyadic sequences: v \u03b5/2 := limn\u2192\u221e v \u03b52\nexists. A\npriori the subsequential limit could depend upon the choice of the dyadic sequence,\ni.e., the initial \u03b5.\nThe same argument can be used to show that v k\u03b5 \u2264 v \u03b5 for positive integers k.\n3.3. Comparing favored and ordinary tug-of-war. We continue with a preliminary bound on how far apart v \u03b5 and w\u03b5 can be. Let Lip\u03b5Y F denote the Lipschitz\nconstant of F with respect to the restriction of the metric d\u03b5 to Y . Since d \u2264 d\u03b5 ,\nthe Lipschitz constant LipY F of F with respect to d upper bounds Lip\u03b5Y F .\nLemma 3.2. Let \u03b5 > 0. Suppose that Lip\u03b5Y F < \u221e and either\n(1) f = 0 everywhere, or\n(2) |f | is bounded above and X has finite diameter.\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n17\n\nThen for each x \u2208 X and y \u2208 Y ,\n\n\u0001\nv \u03b5 (x) \u2265 F (y) \u2212 2 \u03b5 Lip\u03b5Y F \u2212 Lip\u03b5Y F + 2 (\u03b5 + diamX) sup |f | d\u03b5 (x, y).\n\nSuch an expected payoff is guaranteed for player I if he adopts a pull towards y\nstrategy, which at each move attempts to reduce d\u03b5 (xt , y). Similarly a pull towards\ny strategy for II gives,\n\u0001\nw\u03b5 (x) \u2264 F (y) + 2 \u03b5 Lip\u03b5Y F + Lip\u03b5Y F + 2 (\u03b5 + diamX) sup |f | d\u03b5 (x, y).\n\nProof. Let player I use a pull towards y strategy. Let \u03c4 be the time at which Y\nis reached, which will be finite a.s. The distance d\u03b5 (xk , y) is a supermartingale,\nexcept possibly at the last step, where player II may have moved the game state\nto a terminal point up to a distance of 2\u03b5 from the target, even if player I wins the\ncoin\nThus E[d\u03b5 (x\u03c4 , y)] < d\u03b5 (x, y) + 2\u03b5, whence E[F (x\u03c4 )] \u2265 F (y) \u2212 d\u03b5 (x, y) +\n\u0001 toss.\n\u03b5\n2\u03b5 LipY F . If f = 0, then this implies v \u03b5 (x) \u2265 F (y) \u2212 (d\u03b5 (x, y) + 2\u03b5)Lip\u03b5Y F . If\nf 6= 0 and X has finite diameter, then the expected number of steps before the game\nterminates is at most the expected time that a simple random walk on the interval\nof integers [0, 1 + \u230adiam(X)/\u03b5\u230b] (with a self-loop added at the right endpoint) takes\n\u0001\nto reach 0 when started at j := d\u03b5 (x, y)/\u03b5, i.e., at most j 3 + 2 \u230adiam(X)/\u03b5\u230b \u2212 j .\nHence\n\u03c4X\n\u22121\ni\nh\n\u03b52 f (xi )\nE F (x\u03c4 ) +\ni=0\n\n\u0001\n\u0001\n\u2265 F (y) \u2212 d\u03b5 (x, y) + 2 \u03b5 Lip\u03b5Y F + j 3 + 2 \u230adiam(X)/\u03b5\u230b \u2212 j \u03b52 min(0, inf f )\n\u0001\n\u0001\n\u2265 F (y) \u2212 d\u03b5 (x, y) + 2 \u03b5 Lip\u03b5Y F \u2212 d\u03b5 (x, y) 2 \u03b5 + 2 diam(X) sup |f |.\n\nThis gives the desired lower bound on v \u03b5 (x). The symmetric argument gives the\nupper bound for w\u03b5 (x).\n\u0003\nNext, we show that the lower bound v \u03b5 on u\u03b5I is a good lower bound.\nLemma 3.3. Suppose F is Lipschitz, and either\n(1) f = 0 everywhere, or\n(2) f is uniformly continuous, X has finite diameter and inf |f | > 0.\nThen ku\u03b5I \u2212 v \u03b5 k\u221e \u2192 0 as \u03b5 \u2192 0. If f is also Lipschitz, then ku\u03b5I \u2212 v \u03b5 k\u221e = O(\u03b5).\nNote that since X is assumed to be a length space, the assumptions imply that\nsign(f ) is constant and sup |f | < \u221e.\n\nProof. In order to prove that u\u03b5I is not much larger than v \u03b5 , consider a strategy SI\nfor player I in ordinary \u03b5-tug-of-war, which achieves an expected payoff of at least\nu\u03b5I \u2212 \u03b5 against any strategy for player II. We shortly describe a modified strategy SIF\nfor player I playing the II-favored game, which does almost as well as SI does in the\nordinary game. To motivate SIF , observe that a turn in the II-favored \u03b5-tug-of-war\ncan alternatively be described as follows. Suppose that the position at the end of\nthe previous turn is x. First, player I gets to make a move to an arbitrary point\nz satisfying d(x, z) < \u03b5. Then a coin is tossed. If player II wins the toss, she gets\nto make two steps from z, each of distance less than \u03b5. Otherwise, II gets to move\nto an arbitrary point in B2\u03b5 (z) \u2229 Y , but only if the latter set is nonempty. This\ncompletes the turn. The strategy SIF is based on the idea that after a win in the\ncoin toss by II, player I may use his move to reverse one of the two steps executed\nby II (provided Y has not been reached).\n\n\f18\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nAs strategy SIF is playing the II-favored game against player II, it keeps track of\na virtual ordinary game. At the outset, the II-favored game is in state xF\n0 , as is the\nvirtual game. As long as the virtual and the favored game have not ended, each\nturn in the favored game corresponds to a turn in the virtual game, and the virtual\ngame uses the same coin tosses as the favored game. In each such turn t, the target\nztF for player I in the favored game is the current state xt in the ordinary game. If\nplayer I wins the coin toss, then the new game state xF\nt+1 in the favored game is his\nF\ncurrent target zt , which is the state of the virtual game xt , and the new state of\nthe virtual game xt+1 is chosen according to strategy SI applied to the history of\nthe virtual game. If player II wins the toss and chooses the new state of the favored\nF\ngame to be xF\nt+1 , where necessarily d(xt+1 , xt ) < 2 \u03b5, then in the virtual game the\nvirtual player II chooses the new state xt+1 as some point satisfying d(xt+1 , xt ) < \u03b5\nF\nand d(xt+1 , xF\nt+1 ) < \u03b5. Induction shows that d(xt , xt ) < \u03b5 as long as both games\nare running, and thus the described moves are all legal.\nIf at some time the virtual game has terminated, but the favored game has not,\nwe let player I continue playing the favored game by always pulling towards the\nfinal state of the virtual game. If the favored game has terminated, for the sake of\ncomparison, we continue the virtual game, but this time let player II pull towards\nthe final state of the favored game and let player I continue using strategy SI .\nLet \u03c4 F be the time at which the favored game has ended, and let \u03c4 be the time\nat which the ordinary virtual game has ended. By Lemma 3.2, if \u03c4 < \u03c4 F , then\nthe conditioned expectation of the remaining running payoffs and final payoff to\nplayer I in the favored game after time \u03c4 , given what happened up to time \u03c4 , is\nat least F (x\u03c4 ) \u2212 O(\u03b5) (here the implicit constant may depend on diamX, LipY F\nand sup |f |). Likewise, u\u03b5I \u2264 w\u03b5 from Lemma 3.1 and the second inequality from\nLemma 3.2 show that if \u03c4 F < \u03c4 , then the conditioned expectation of the remaining\nrunning and final payoffs in the virtual game is at most F (xF\n) + O(\u03b5).\n\u03c4F\n\b\nSet \u03bb = \u03bb\u03b5 := sup |f (x) \u2212 f (x\u2032 )| : x, x\u2032 \u2208 X r Y, d(x, x\u2032 ) < 2 \u03b5 . Then \u03bb = O(\u03b5)\nif f is Lipschitz and lim\u03b5\u21920 \u03bb\u03b5 = 0 if f is uniformly continuous. At each time\nt < \u03c4 \u2227 \u03c4 F , since ztF = xt , the running payoff in the virtual game and in the favored\ngame differ by at most \u03b52 \u03bb. Lemmas 3.1 and 3.2 show that there is a constant C,\nwhich may depend on X, Y, f and F , but not on \u03b5, such that \u2212C \u2264 v \u03b5 \u2264 u\u03b5I \u2264 C.\nThus, in the case where sup f < 0, since SI guarantees a payoff of at least u\u03b5I (x0 )\u2212\u03b5,\nwe have E[\u03c4 F \u2227 \u03c4 ] = O(\u03b5\u22122 ). Assume that player II plays the II-favored game (up\nF\nto time \u03c4 \u2227 \u03c4 F ) using a strategy SII\nsuch that the expected payoff to player I\nF\nwho uses SI is at most v\u03b5 + \u03b5. Then, in the case where inf f > 0, we will have\nE[\u03c4 \u2227\u03c4 F ] = O(\u03b5\u22122 ), again. There is a strategy SII for player II in the ordinary game,\nwhich corresponds to the play of player II in the virtual game when player I uses SI\nF\nin the favored game. (The description of the virtual\nand SIF and player II uses SII\ngame defines SII for some game histories, and we may take an arbitrary extension\nof this partial strategy to all possible game histories.) The above shows that the\nexpected payoff for player I in the ordinary game when player I uses SI and player II\nuses SII differs from the expected payoff for player I in the favored game when\nF\nplayer I uses SIF and player II uses SII\nby at most O(\u03b5) + \u03bb \u03b52 E[\u03c4 \u2227 \u03c4 F ] \u2264 O(\u03b5 + \u03bb).\n\u03b5\n\u03b5\n\u03b5\nThus uI \u2264 v + O(\u03b5 + \u03bb). Since uI \u2265 v \u03b5 , the proof is now complete.\n\u0003\n\u2212n\n\nHence under the assumption of Lemma 3.3, limn\u2192\u221e uI\u03b52\n\n\u221e\n\n= v \u03b5/2 .\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n19\n\n3.4. Dyadic limits satisfy quadratic comparison. We start by showing that\nu\u03b5I almost satisfies (\u22122f )-quadratic comparison from above.\nLemma 3.4. Let \u03b5 > 0, let V be an open subset of X r Y and write V\u03b5 = {x :\nB\u03b5 (x) \u2282 V }. Suppose that \u03c6(x) = Q(d(x, z)) is a quadratic distance function that\nis \u22c6-increasing on V , where Q(r) = ar2 + br + c satisfies\na \u2264 \u2212 sup f (x).\n\n(3.2)\n\nx\u2208V\u03b5\n\nAlso suppose that supV\u03b5 f \u2265 0 or diam(V ) < \u221e. If the value function u\u03b5I for player I\nin \u03b5-tug-of-war satisfies u\u03b5I \u2264 \u03c6 on V \\V\u03b5 , then u\u03b5I \u2264 \u03c6 on V\u03b5 .\nProof. Fix some \u03b4 > 0. Consider the strategy for player II that from a state\nxk\u22121 \u2208 V\u03b5 at distance r = d(xk\u22121 , z) from z pulls to state z (if r < \u03b5) or else\nmoves to reduce the distance to z by \"almost\" \u03b5 units, enough to ensure that\nQ(d(xk , z)) < Q(r \u2212 \u03b5) + \u03b42\u2212k . If r < \u03b5, then z \u2208 V whence Q(t) = at2 + c with\na \u2265 0. In this case, if II wins the toss, then xk = z, whence \u03c6(xk ) = Q(0) \u2264 Q(r\u2212\u03b5).\nThus for all r \u2265 0, regardless of what strategy player I adopts,\n\nQ(r + \u03b5) + Q(r \u2212 \u03b5)\n= Q(r) + a \u03b52 = \u03c6(xk\u22121 ) + a \u03b52 .\n2\nSetting \u03c4 := inf{k : xk \u2208\n/ V\u03b5 }, we conclude that Mk := \u03c6(xk\u2227\u03c4 ) \u2212 a \u03b52 (k \u2227 \u03c4 ) + \u03b4 2\u2212k\nis a supermartingale.\nSuppose that player I uses a strategy with expected payoff larger than \u2212\u221e. (If\nthere is no such strategy, the assertion of the Lemma is obvious.) Then \u03c4 < \u221e a.s.\nWe claim that\nE[\u03c6(xk ) | xk\u22121 ] \u2212 \u03b42\u2212k\u22121 \u2264\n\nE[M\u03c4 ] \u2264 M0 .\n\n(3.3)\n\nClearly this holds if \u03c4 is replaced by \u03c4 \u2227 k. To pass to the limit as k \u2192 \u221e, consider\ntwo cases.\n\u2022 If a \u2264 0, then since \u03c6 is \u22c6-increasing on V , it is also bounded from below on\nV . Consequently, Mk is a supermartingale bounded below, so (3.3) holds.\n\u2022 If a > 0, then supV\u03b5 f < 0, by (3.2). By assumption therefore diamV <\n\u221e, which implies supV |\u03c6| < \u221e. If E[\u03c4 ] = \u221e, we get E[M\u03c4 ] = \u2212\u221e,\nand hence (3.3) holds. On the other hand, if E[\u03c4 ] < \u221e, then dominated\nconvergence gives (3.3).\nSince u\u03b5I (x\u03c4 ) \u2264 \u03c6(x\u03c4 ), we deduce that\n\u03c4X\n\u22121\nh\ni (3.2)\nf (xt ) \u2264 sup E[M\u03c4 ] \u2264 M0 = \u03c6(x0 ) + \u03b4 .\nu\u03b5I (x0 ) \u2264 sup E \u03c6(x\u03c4 ) +\nSI\n\nt=0\n\nSI\n\nwhere SI runs over all possible strategies for player I with expected payoff larger\nthan \u2212\u221e. Since \u03b4 > 0 was arbitrary, the proof is now complete.\n\u0003\nIn order for u\u03b5I to satisfy (\u22122f )-quadratic comparison (from above), we would\nlike to know that if u\u03b5I \u2264 \u03c6 on the boundary of an open set, then this (almost)\nholds in a neighborhood of the boundary, so that we can apply the above lemma.\nTo do this we prove a uniform Lipschitz lemma:\nLemma 3.5 (Uniform Lipschitz). Suppose that F is Lipschitz, and either\n(1) f = 0 everywhere, or\n(2) |f | is bounded above and X has finite diameter.\n\n\f20\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nThen for each \u03b5 \u2208 (0, diamX), u\u03b5I and u\u03b5II are Lipschitz on X w.r.t. the metric d\u03b5\nwith Lipschitz constant depending only on diamX, sup |f | and LipY F .\n\nProof. By symmetry, it suffices to prove this for u\u03b5I . Set L := 3 Lip\u03b5Y F +4 diamX sup |f |.\nLet x, y \u2208 X be distinct. If x, y \u2208 Y , then u\u03b5I (x) \u2212 u\u03b5I (y) = F (x) \u2212 F (y) \u2264\nLip\u03b5Y F d\u03b5 (x, y). If x \u2208 X r Y and y \u2208 Y , Lemmas 3.2 and 3.1 give\n(3.4)\n\nu\u03b5I (x) \u2212 u\u03b5I (y) = u\u03b5I (x) \u2212 F (y) \u2264 L d\u03b5 (x, y) ,\n\u2217\n\n\u2217\n\nx \u2208 X r Y,\n\ny\u2208Y .\n\nNow suppose x, y \u2208 X r Y . Set Y = Y \u222a {y}, F = F on Y and F (y) = u\u03b5I (y).\nThen, clearly, the value of u\u03b5I (x) for the game where Y is replaced by Y \u2217 and\nF is replaced by F \u2217 is the same as for the original game. By (3.4), we have\nLip\u03b5Y \u2217 (F \u2217 ) \u2264 L. Consequently, (3.4) gives\n\u0001\nu\u03b5I (x)\u2212u\u03b5I (y) = u\u03b5I (x)\u2212F \u2217 (y) \u2264 3 L+2 (\u03b5+diamX) sup |f | d\u03b5 (x, y) \u2264 4 L d\u03b5 (x, y) ,\nwhich completes the proof.\n\n\u2217\n\n\u0003\n\nLemma 3.6. Suppose F is Lipschitz and inf F > \u2212\u221e, and either (1) f = 0\nidentically or else (2) inf f > 0, f is uniformly continuous, and X has finite diam\u221e\n\u2212n\neter. Then the subsequential limit v \u03b5/2 = limn\u2192\u221e v \u03b52 satisfies (\u22122f )-quadratic\ncomparison on X r Y .\nProof. By Theorems 2.2 and 2.4, u\u03b5I = u\u03b5II , so from Lemma 3.3 we have kw\u03b5 \u2212\n\u2212n\n\u221e\nv \u03b5 k\u221e \u2192 0 as \u03b5 \u2192 0. Thus limn\u2192\u221e w\u03b52 = v \u03b5/2 .\nNote that the hypotheses imply that |f | is bounded. Consider an open V \u2282\nX r Y and an \u22c6-increasing quadratic distance function \u03c6 on V with quadratic term\n\u221e\n\u221e\na \u2264 \u2212 supy\u2208V f (y), such that \u03c6 \u2265 v \u03b5/2 on \u2202V . We must show that \u03c6 \u2265 v \u03b5/2 on\n\u2212n\nV . Since kw\u03b5 \u2212 v \u03b5 k\u221e \u2192 0, we have by Lemma 3.1 that v \u03b52 converges uniformly\n\u221e\n\u2212n\nto v \u03b5/2 . So for any \u03b4 > 0, if n \u2208 N is large enough, then v \u03b52\n\u2264 \u03c6 + \u03b4 on\n\u2202V . Note also that \u03c6 is necessarily uniformly continuous on V . (If diamV < \u221e\nor a = 0, this is clear. Otherwise, f = 0 and a < 0. However, a < 0 implies\nthat diamV < \u221e, since \u03c6 is \u22c6-increasing on V .) Hence, by the uniform Lipschitz\n\u2212n\nlemma 3.5, uI\u03b52 \u2264 \u03c6 + 2 \u03b4 on V r V\u03b52\u2212n for all sufficiently large n \u2208 N, where\n\u2212n\nwe use the notations of Lemma 3.4. By that lemma uI\u03b52 \u2264 \u03c6 + 2 \u03b4 on all of V .\n\u221e\nLetting n \u2192 \u221e and \u03b4 \u2192 0 shows that v \u03b5/2 satisfies (\u22122f )-quadratic comparison\nfrom above.\nTo prove quadratic comparison from below, note that the only assumptions which\nare not symmetric under exchanging the roles of the players are inf F > \u2212\u221e and\n\u221e\n\u221e\ninf f > 0. However, we only used these assumptions to prove w\u03b5/2 = v \u03b5/2 .\nConsequently, comparison from below follows by symmetry.\n\u0003\n3.5. Convergence.\nLemma 3.7. Suppose that v is continuous and satisfies (\u22122f )-quadratic comparison from below on X r Y , and that f is locally bounded below. Let \u03b4 > 0. Then in\nII-favored \u03b5-tug-of-war, when player I (using any strategy) targets point zi on step\ni, player II may play to make Mt\u2227\u03c4\u03b5 a supermartingale, where\nMt := v(xt ) + \u03b52\n\nt\nX\ni=1\n\nand \u03c4\u03b5 := inf{t : d(xt , Y ) < 3 \u03b5}.\n\ninf\n\ny\u2208B2\u03b5 (zi )\n\nf (y) + \u03b42\u2212t\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n21\n\nProof. Let z = zt be the point that player I has targeted at time t. Assume that\nt < \u03c4\u03b5 . We define the following:\n(1) \u03b1 := inf{f (x) : x \u2208 B2\u03b5 (z)},\n(2) A := inf{v(x) : x \u2208 B2\u03b5 (z)} (the infimum value of v that II can guarantee\nif II wins the coin toss),\n+ \u03b1 \u03b52 , and\n(3) \u03b2 := v(z)+A\n2\n2\n\n(4) Q(r) := \u2212\u03b1r2 + A\u2212v(z)+4\u03b1\u03b5\nr + v(z) (Q(0) = v(z), Q(2\u03b5) = A, Q(\u03b5) = \u03b2,\n2\u03b5\nand Q\u2032\u2032 = \u22122\u03b1).\n\u0002\n\u0003\n\u2212t\nPlayer II can play\n\u0002 so that E v(xt ) zt and\n\u0003 all prior events \u2264 (v(z) + A)/2 + \u03b42 ,\ni.e., so that E Mt zt and prior events \u2212 Mt\u22121 \u2264 \u03b2 \u2212 v(xt\u22121 ). We will show\nthat whenever d(x, z) < \u03b5 we have v(x) \u2265 \u03b2, and then it will follow that M is a\nsupermartingale. There are two cases to check, depending on whether \u03b1 > 0 or\n\u03b1 \u2264 0:\nSuppose \u03b1 \u2264 0. Note that A \u2264 v(z). If v(z) = A, the inequality v(x) \u2265 \u03b2 on\nB\u03b5 (z) follows from \u03b1 \u2264 0 and the definition of \u03b2. Assume therefore that v(z) > A.\nThen Q\u2032 (\u03b5) = (A \u2212 v(z))/(2\u03b5) < 0. Thus Q is decreasing on [0, \u03b5]. Let r0 \u2208 [\u03b5, 2 \u03b5]\nbe the point where Q attains its minimum in [\u03b5, 2 \u03b5]. Then Q \u0001is decreasing on [0, r0 ].\nSet V := Br0 (z) r {z}. We have v(z) = Q(0) = Q \u0001d(z, z) and for x \u2208 \u2202Br0 (z)\u0001\nwe have v(x) \u2265 A = Q(2 \u03b5) \u2265 Q(r0 ) = Q d(x, z) . Thus, v(x) \u2265 Q d(x, z)\nfor x \u2208 \u2202V . Since v satisfies (\u22122f )-quadratic comparison\nfrom below, and Q\u2032\u2032 =\n\u0001\n\u22122 \u03b1 \u2265 supx\u2208V \u22122 f (x), we get v(x)\n\u0001 \u2265 Q d(x, z) for x \u2208 V . In particular, for\nx \u2208 B\u03b5 (z) one has v(x) \u2265 Q d(x, z) \u2265 Q(\u03b5) = \u03b2.\nNow suppose \u03b1 > 0. The function L0 (x) = \u2212\u03b1 d(x, z)2 + \u03b1(2 \u03b5)2 + A is a lower\nbound for v on \u2202B2\u03b5 (z), and hence applying (\u22122f )-quadratic comparison in B2\u03b5 (z)\nwith L0 (*) gives v(z) \u2265 L0 (z) = A + 4 \u03b1 \u03b52 . Therefore, Q\u2032 (0) = (A \u2212 v(z) +\n4\u03b1\u03b52 )/(2\u03b5) \u2264 0, which together with Q\u2032\u2032 < 0 implies that Q is decreasing on [0, 2\u03b5].\nBy applying (\u22122f )-quadratic comparison on B2\u03b5 (z) r {z} we see that for x \u2208 B\u03b5 (z)\nwe have v(x) \u2265 Q(d(x, z)) \u2265 Q(\u03b5) = \u03b2.\n\u0003\nLemma 3.8. Suppose that F is Lipschitz, and either\n(1) f = 0 everywhere, or\n(2) |f | is bounded above and X has finite diameter.\nAlso suppose that v : X \u2192 R is continuous, satisfies (\u22122f )-quadratic comparison\nfrom below on X r Y , v \u2265 F on Y , and inf v > \u2212\u221e. Then v \u03b5 \u2264 v for all \u03b5.\nProof. The idea is for player II to make the M defined in Lemma 3.7 a supermartingale, but we need to pick a stopping time \u03c4 such that E[M\u03c4 ] \u2264 M0 while\nv \u03b5 (x\u03c4 ) is unlikely to be much larger than v(x\u03c4 ). Let W := {x \u2208 X : d(x, Y ) \u2265 3 \u03b5}\nand let \u03c4\u03b5 be defined as in Lemma 3.7; that is \u03c4\u03b5 := inf{t \u2208 N : xt \u2208\n/ W }. Set\n\u03bb\u03b5 := supXrW (v \u03b5 \u2212 v), and let \u03b4 > 0. We first show\n(3.5)\n\nv \u03b5 \u2264 v + \u03bb\u03b5 + \u03b4 .\n\nIn the case that f = 0, the supermartingale M is bounded below, so we can\nchoose \u03c4 = \u03c4\u03b5 . Player I is compelled to ensure \u03c4 < \u221e. Conditional on the game\nup to time \u03c4 , player I cannot guarantee a conditional expected payoff better than\nv \u03b5 (x\u03c4 ) + \u03b4 2\u2212\u03c4 \u2264 M\u03c4 + \u03bb\u03b5 . Since E[M\u03c4 ] \u2264 M0 = v(x0 ) + \u03b4, we get (3.5), as desired.\nIn the case f 6= 0, we let \u03c4n := \u03c4\u03b5 \u2227 n, where n \u2208 N. Then E[M\u03c4n ] \u2264 M0 . Note\nthat sup v \u03b5 < \u221e, follows from diamX < \u221e, v \u03b5 \u2264 u\u03b5I and Lemma 3.5. Suppose\n\n\f22\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nplayer II makes M a supermartingale up until time \u03c4n . Given play until time \u03c4n ,\nplayer II may make sure that the conditional expected payoff to player I is at most\n\u03c4n\nX\ninf f (y) .\n\u03b4 2\u2212\u03c4n + v \u03b5 (x\u03c4n ) + \u03b52\ni=1\n\ny\u2208B2\u03b5 (zi )\n\nTaking expectation and separating into cases in which x\u03c4n \u2208 W or not, we get\n\u03c4n\ni\nh\nX\n\u0001\ninf f (y) +\u03bb\u03b5 +\u03b4 2\u2212\u03c4n +Pr[x\u03c4n \u2208 W ] sup v \u03b5 (x)\u2212v(x) .\nv \u03b5 (x0 ) \u2264 E v(x\u03c4n )+\u03b52\ni=1\n\ny\u2208B2\u03b5 (zi )\n\nW\n\nSince E[M\u03c4n ] \u2264 M0 = v(x0 ) + \u03b4, this gives\n\n\u0001\nv \u03b5 (x0 ) \u2264 v(x0 ) + \u03b4 + \u03bb\u03b5 + Pr[x\u03c4n \u2208 W ] sup v \u03b5 (x) \u2212 v(x) .\nW\n\nThe first term above is < E[M\u03c4n ] \u2264 M0 = v(x0 ) + \u03b4, independent of n. Player I\nis compelled to play a strategy that ensures \u03c4\u221e is finite a.s., since otherwise the\npayoff is \u2212\u221e < v(x). With such a strategy, Pr[x\u03c4n \u2208 W ] \u2192 0 as n \u2192 \u221e, and\nsince v is bounded below and sup v \u03b5 < \u221e, the last summand tends to 0 as n \u2192 \u221e.\nThus, we get (3.5) in this case as well.\nNext, we show that lim sup\u03b5\u05810 \u03bb\u03b5 \u2264 0. Let y \u2208 Y , and set Q(r) = a r2 + b r + c,\nwhere a := sup |f\u0001|, b < b\u2217 := \u22122 sup |f | diamX \u2212 LipF , and c := F (y). Let\n\u03c6(x) := Q d(x, y) . Then \u03c6(y \u2032 ) \u2264 F (y \u2032 ) \u2264 v(y \u2032 ) for y \u2032 \u2208 Y . Since v satisfies\ncomparison from below and \u03c6 is \u22c6-decreasing, we get v(x) \u2265 \u03c6(x) on X. Thus,\nif x \u2208 B3\u03b5 (y), then v(x) \u2265 F (y) + b\u2217 d(x, y) \u2265 F (y) + 3 b\u2217 \u03b5. In conjunction with\nLemma 3.5, this implies that lim sup\u03b5\u05810 \u03bb\u03b5 \u2264 0. Choosing \u03b4 = \u03b5 and taking \u03b5 to 0\ntherefore gives in (3.5) lim sup\u03b5\u05810 v \u03b5 \u2264 v. However, the inequality v 2\u03b5 \u2264 v \u03b5 from\n\u2032\nLemma 3.1 implies v \u03b5 \u2264 lim sup\u03b5\u2032 \u05810 v \u03b5 \u2264 v, completing the proof.\n\u0003\nProof of Theorem 1.3. First, suppose that F is Lipschitz. Let \u03b5, \u03b5\u2032 > 0. Let v :=\n\u2212n\n\u2032 \u2212n\nlimn\u2192\u221e v \u03b52\nand v \u2032 := limn\u2192\u221e v \u03b5 2 . We know that these limits exist from\nLemma 3.1. Lemma 3.3 tells us that ku\u03b5I \u2212 v \u03b5 k\u221e \u2192 0 as \u03b5 \u2192 0. Since the\nassumptions of that Lemma are player-symmetric, we likewise get ku\u03b5II \u2212w\u03b5 k\u221e \u2192 0.\nFrom Theorems 2.2 and 2.4 (possibly with the roles of the players interchanged) we\nknow that u\u03b5I = u\u03b5II , and hence the above gives kv \u03b5 \u2212 w\u03b5 k\u221e \u2192 0. By Lemma 3.1,\nv \u03b5 \u2264 v \u2264 w\u03b5 and v \u03b5 \u2264 u\u03b5I \u2264 w\u03b5 , and so we conclude that kv \u03b5 \u2212 vk\u221e \u2192 0 and\nku\u03b5I \u2212 vk\u221e \u2192 0. Note that the assumptions imply that sup |f | < \u221e. Therefore,\nfrom Lemma 3.5 and ku\u03b5I \u2212 vk\u221e \u2192 0 we conclude that v is Lipschitz. Precisely\nthe same argument gives kv \u03b5 \u2212 vk\u221e = O(\u03b5) if f is also assumed to be Lipschitz,\n\u2032\nand similar estimates also hold for kv \u03b5 \u2212 v \u2032 k\u221e . Note that the assumptions imply\nthat F is bounded if f 6= 0. Lemma 3.6 (applied possibly with the roles of the\nplayers reversed) tells us that v \u2032 satisfies (\u22122f )-quadratic comparison on X r Y .\nClearly inf v \u2032 > \u2212\u221e. (If f = 0 identically, then inf v \u2032 \u2265 inf F , while if diamX < \u221e,\nwe may use the fact that v \u2032 is Lipschitz.) Thus, Lemma 3.8 implies that v \u03b5 \u2264 v \u2032 .\nConsequently, v \u2264 v \u2032 . By symmetry v \u2032 \u2264 v, and hence v = v \u2032 . This completes the\nproof in the case where F is Lipschitz.\nUsing the result of Lemma 3.9 below, we know that for every \u03b4 > 0 there is a\nLipschitz F\u03b4 : Y \u2192 R such that kF \u2212 F\u03b4 k\u221e < \u03b4. Then the Lipschitz case applies\nto the functions F\u03b4 \u00b1 \u03b4 in place of F . Since the game value u\u03b5 for F is bounded\nbetween the corresponding value with F\u03b4 + \u03b4 and F\u03b4 \u2212 \u03b4, and the latter two values\ndiffer by 2\u03b4, the result easily follows.\n\u0003\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n23\n\nLemma 3.9. Let X be a length space, and let F : Y \u2192 R be defined on a nonempty\nsubset Y \u2282 X. The following conditions are equivalent:\n\n(1) F is uniformly continuous and sup{(F (y)\u2212F (y \u2032 ))/ max{1, d(y, y \u2032 )} : y, y \u2032 \u2208\nY } < \u221e.\n(2) F extends to a uniformly continuous function on X.\n(3) There is a sequence of Lipschitz functions on Y tending to F in k * k\u221e .\n\b\nProof. We start by assuming 1 and proving\n2. Let \u03c6(\u03b4) := sup F (y) \u2212 F (y \u2032 ) :\n\b\nd(y, y \u2032 ) \u2264 \u03b4, y, y \u2032 \u2208 Y , and \u03c6\u0303(t) := sup t \u03c6(\u03b4)/\u03b4 : \u03b4 \u2265 t . We now show that\nlimt\u05810 \u03c6\u0303(t) = 0. Let \u03b5 > 0, and let \u03b4\u03b5 > 0 satisfy \u03c6(\u03b4\u03b5 ) < \u03b5. Such a \u03b4\u03b5 exists\nbecause F is uniformly continuous. Condition 1 implies that M := sup{\u03c6(\u03b4)/\u03b4 :\n\u03b4 \u2265 \u03b4\u03b5 } < \u221e. For t < (\u03b5/M ) \u2227 \u03b4\u03b5 , we have\n\b\n\b\n\u03c6\u0303(t) = sup t \u03c6(\u03b4)/\u03b4 : \u03b4\u03b5 \u2265 \u03b4 \u2265 t \u2228 sup t \u03c6(\u03b4)/\u03b4 : \u03b4 > \u03b4\u03b5 \u2264 \u03c6(\u03b4\u03b5 ) \u2228 (t M ) \u2264 \u03b5 ,\n\nwhich proves that limt\u05810 \u03c6\u0303(t) = 0. Two other\u0001 immediate properties\nof \u03c6\u0303 which\n\u0001\nwe will use are that F (y) \u2212 F (y \u2032 ) \u2264 \u03c6 d(y, y \u2032 ) \u2264 \u03c6\u0303 d(y, y \u2032 ) holds for y, y \u2032 \u2208 Y\nand \u03c6\u0303(s t) \u2265 s \u03c6\u0303(t) when s \u2208 [0, 1] and t \u2265 0. It follows that \u03c6\u0303 is subadditive:\n\u03c6\u0303(a) + \u03c6\u0303(b) \u2265 a \u03c6\u0303(a + b)/(a + b) +\n\b b \u03c6\u0303(a + b)/(a + b) = \u03c6\u0303(a + b) for a, b \u2265 0.\nNow for x \u2208 X set u(x) := inf F (y) + \u03c6\u0303(d(y, x)) : y \u2208 Y . Then u = F on Y .\nWe now prove\n\u0001\n(3.6)\nu(x) \u2212 u(x\u2032 ) \u2264 \u03c6\u0303 d(x, x\u2032 )\nfor x, x\u2032 \u2208 X. Indeed, let y \u2032 \u2208 Y . Then\n\u0001\n\u0001\n\u0001\nu(x) \u2212 F (y \u2032 ) \u2212 \u03c6\u0303 d(y \u2032 , x\u2032 ) \u2264 F (y \u2032 ) + \u03c6\u0303 d(y \u2032 , x) \u2212 F (y \u2032 ) \u2212 \u03c6\u0303 d(y \u2032 , x\u2032 )\n\u0001\n\u0001\n= \u03c6\u0303 d(y \u2032 , x) \u2212 \u03c6\u0303 d(y \u2032 , x\u2032 ) .\nConsequently, subadditivity and monotonicity of \u03c6\u0303 gives\n\u0001\n\u0001\n\u0001\nu(x) \u2212 F (y \u2032 ) \u2212 \u03c6\u0303 d(y \u2032 , x\u2032 ) \u2264 \u03c6\u0303 d(x, y \u2032 ) \u2212 d(x\u2032 , y \u2032 ) \u2264 \u03c6\u0303 d(x, x\u2032 ) .\n\nTaking the supremum over all y \u2032 \u2208 Y then implies (3.6). Therefore, u is uniformly\ncontinuous and 2 holds.\n\nWe now assume 2 and prove 3. Let u : X \u2192 R be a uniformly continuous\nextension of F to X. It clearly suffices to approximate\nu by Lipschitz functions\n\b\non X in k * k\u221e . For x \u2208 X let uL (x) := inf u(x\u2032 ) + L d(x, x\u2032 ) : x\u2032 \u2208 X . The\nsame argument which was used above \b\nto prove (3.6) now shows that Lip(uL ) \u2264 L.\nClearly, uL (x) \u2264 u(x). Let \u03c6(t) := sup u(x) \u2212 u(x\u2032 ) : d(x, x\u2032 ) \u2264 t for t \u2265 0. Since\nX is a length space, \u03c6 is subadditive. Let t > 0 and k := \u230ad(x, x\u2032 )/t\u230b. Then\n\u0001\n\u0001\nu(x) \u2212 u(x\u2032 ) \u2212 L d(x, x\u2032 ) \u2264 \u03c6 d(x, x\u2032 ) \u2212 L d(x, x\u2032 ) \u2264 \u03c6 (k + 1) t \u2212 L k t .\n\nTaking the supremum over all x\u2032 and using the subadditivity of \u03c6 therefore gives\n\u0010\n\u0011\n\u0001\n\u0001\nu(x) \u2212 uL (x) \u2264 sup \u03c6 (k + 1) t \u2212 L k t \u2264 \u03c6(t) + sup k \u03c6(t) \u2212 L t .\nk\u2208N\n\nk\u2208N\n\nTherefore, u(x) \u2212 uL (x) \u2264 \u03c6(t) once L > \u03c6(t)/t. Since inf t>0 \u03c6(t) = 0 and uL \u2264\nu(x), this proves 3.\nThe passage from 3 to 1 is standard, and therefore omitted. This concludes the\nproof.\n\u0003\n\n\f24\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nProof of Theorem 1.8. Lemma 3.9 tells us that F extends to a uniformly continuous function on X and that it can be approximated in k * k\u221e by Lipschitz functions.\nWe know from Theorem 1.3 that the continuum value u exists and is uniformly\ncontinuous. Suppose first that F is Lipschitz. Lemma 3.6 (applied possibly with\nthe roles of the players reversed) says that u satisfies (\u22122f )-quadratic comparison\non X r Y . If F is not Lipschitz, we may deduce the same result by approximating\nF from below by Lipschitz functions and observing that a monotone nondecreasing k * k\u221e -limit of functions satisfying (\u22122f )-quadratic comparison from above also\nsatisfies (\u22122f )-quadratic comparison from above, and making the symmetric argument for comparison from below. Now suppose that \u0169 is as in the second part of the\ntheorem. This clearly implies inf \u0169 > \u2212\u221e. Now Lemma 3.8 gives u \u2264 \u0169 (again, we\nmay need to first approximate F by Lipschitz functions). The uniqueness follows\ndirectly.\n\u0003\nProof of Theorem 1.4. If x \u2208 X rY and y \u2208 Y , then from Lemma 3.2 it follows that\nu(x) \u2212 u(y) \u2264 LipY F d(x, y). Let U \u2282 X r Y be open and define F \u2217 (x) = u(x)\nfor x \u2208 Y \u222a \u2202U . It is clear that the continuum value u\u2217 of (X, d, Y \u222a \u2202U, F \u2217 , 0) is\nthe same as u, since any player may first play a strategy that is appropriate for the\n(X, d, Y \u222a \u2202U, F \u2217 , 0) game and once Y \u222a \u2202U is hit start playing a strategy that is\nappropriate for the original game. The above argument shows that u(x) \u2212 u(y) \u2264\nd(x, y) Lip\u2202U u if y \u2208 \u2202U and x \u2208 U . In particular, Lip\u2202U\u222a{x} u = Lip\u2202U u, which\nimplies LipU u = Lip\u2202U u; that is, u is AM in X r Y .\nNow suppose that u\u2217 : X \u2192 R is an AM extension of F and sup |F | < \u221e.\nLemma 1.6 tells us that u\u2217 satisfies comparison with distance functions. Observe\nthat the proof of Lemma 3.8 shows that in the case f = 0 we may replace the\nhypothesis that v satisfies 0-quadratic comparison from below on X r Y by the\nhypothesis that v satisfies comparison with distance functions from below (since\nonly comparisons with distance functions are used in this case). Thus, u \u2264 u\u2217 .\nSimilarly, u \u2265 u\u2217 , which implies the required uniqueness statement and completes\nthe proof.\n\u0003\n4. Harmonic measure for \u2206\u221e\nHere, we present a few estimates of the \u221e-harmonic measure \u03c9\u221e . Before proving\nTheorem 1.5, we consider the \u221e-harmonic of porous sets. Recall that a set S in\na metric space Z is \u03b1-porous if for every r \u2208 (0, diamZ) every ball of radius r\ncontains a ball of radius \u03b1 r that is disjoint from S. An example of a porous set\nis the ternary Cantor set in [0, 1]. We start with a general lemma in the setting of\nlength spaces.\nLemma 4.1. Suppose X is a length space and 0 \u2264 F \u2264 1 on the terminal states Y ,\nwhere F : Y \u2192 R is continuous. Let S := suppF . Suppose that for some integer k\nand positive constants \u03b50 , dmin and \u03b3 \u2208 (0, 1), for every x \u2208 X with d(x, S) \u2265 dmin ,\nthere is a sequence of points x = z0 , . . . , zk such that zk \u2208 Y , F (zk ) = 0, and\nd(zi , S) \u2265 2 d(zi , zi\u22121 ) + 2 \u03b50 + \u03b3 d(z0 , S)\n\nfor i = 1, . . . , k. Then the AM extension u of F satisfies\n\n0 \u2264 u(x) \u2264 (1 \u2212 2\u2212k )log\u03b3 (dmin /d(x,S)) .\n\nProof. We will obtain bounds on u\u03b5 (x) that are independent of \u03b5 (as long as \u03b5 \u2208\n(0, \u03b50 )), and these yield bounds on u(x). Since u\u03b5 \u2265 0, we need only give a good\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n25\n\nstrategy for player II to obtain an upper bound on u\u03b5 (x). The idea is for player II\nto always have a \"plan\" for reaching a terminal state at which F is 0 while staying\naway from the terminal states at which F is nonzero. A plan consists of a sequence\nof points z0 , z1 , . . . , zk , where z0 is the game state when the plan was formed,\nzk \u2208 Y , and F (zk ) = 0. As soon as the game state reaches zi , player II starts\npulling towards zi+1 . If player I is lucky and gets many moves, player II may have\nto give up on the plan and form a new plan. When tugging towards zi , we suppose\nthat player II gives up and forms a new plan as soon as d\u03b5 (xt , zi ) = 2d\u03b5 (zi , zi\u22121 ),\nand otherwise plays to ensure that d\u03b5 (xt , zi ) is a supermartingale. While tugging\ntowards zi , the plan will be aborted at that stage with probability at most 1/2, so\nwith probability at least 2\u2212k the plan is never aborted and succeeds in reaching zk .\nSuppose player II aborts the plan at time t while tugging towards zi , and forms\na new plan starting at z0\u2032 = xt . Then d(xt , zi ) \u2264 d\u03b5 (xt , zi ) = 2 d\u03b5 (zi , zi\u22121 ) \u2264\n2 d(zi , zi\u22121 ) + 2 \u03b5, so\nd(xt , S) \u2265 d(zi , S) \u2212 d(xt , zi ) \u2265 d(zi , S) \u2212 [2d(zi , zi\u22121 ) + 2\u03b5] \u2265 \u03b3 d(z0 , S),\nso the game state remains far from S. Since player II can always find a short plan\n(length at most k) when the distance from S is at least dmin , player I gets to S\nwith probability at most (1 \u2212 2\u2212k )\u2308log\u03b3 (dmin /d(x0 ,S))\u2309 , which yields the desired upper\nbound.\n\u0003\nThe reader may wish to check that the lemma implies lim\u03b4\u05810 \u03c9\u221e (A\u03b4 ) = 0 in the\nsetting of Theorem 1.5 (i.e., when X is the unit ball in Rn , n > 1, Y = \u2202X and A\u03b4\nis a spherical cap of radius \u03b4.)\nWe are now ready to state and prove an upper bound on the \u221e-harmonic measure\nof neighborhoods of porous sets.\nTheorem 4.2. Let X \u2282 Rn , n > 1, be the closed unit ball and let Y be its boundary,\nthe unit sphere. Let \u03b1 \u2208 (0, 1/2) and let \u03b4 > 0. Let S be an \u03b1-porous subset of Y ,\nand let S\u03b4 be the closure of the \u03b4-neighborhood of S. Then\nO(1)\n\n(0,Y,X)\n\u03c9\u221e\n(S\u03b4 ) \u2264 \u03b4 \u03b1\n\n.\n\nOf course, in the above, S is \u03b1-porous as a subset of Y . (Every subset of Y is\n(1/3)-porous as a subset of X.)\nProof. The plan is to use the lemma, of course. Let dmin := 2 \u03b4/\u03b1. Let z0 \u2208 X r Y ,\nand suppose that d0 := d(z0 , S) \u2265 dmin . Let y0 \u2208 Y be a closest point to z0 on Y .\nInside Bd0 (y0 ) \u2229 Y there is a point y1 such that B\u03b1d0 (y1 ) \u2229 S = \u2205. (See Figure 3.)\nTherefore, d(y1 , S\u03b4 ) \u2265 \u03b1 d0 \u2212 \u03b4 \u2265 \u03b1 d0 /2. We define the sequence zj inductively, as\nfollows. If d(zj , S\u03b4 ) \u2265 3 d(zj , Y ), then we take zj+1 to be any closest point to zj\non Y . Otherwise, let zj+1 be the point on the line segment from zj to y1 whose\ndistance from zj is d(zj , y1 )/10. It can be checked that after k = O(\u2212 log \u03b1) steps\nthe sequence hits Y r S and that the assumptions of the lemma hold with this k,\nwith \u03b3 = \u03b1/10 and with some \u03b50 > 0, independent of z0 . The theorem now easily\nfollows from the lemma.\n\u0003\nWe now proceed to study the \u221e-harmonic measure of spherical caps.\nProof of Theorem 1.5. It turns out to be more convenient to work with \u2212A\u03b4 =\n{\u2212y : y \u2208 A\u03b4 } in place of A\u03b4 . By an obvious comparison argument, it is sufficient\n\n\f26\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nz0\n\ny0\n\ny1\n\nFigure 3. The terminal states are the unit sphere, and the support of F is S\u03b4 , the \u03b4-neighborhood of a porous set on the unit\nsphere. From a starting point z0 , player II finds a point y1 on the\nsphere that is near the closest point y0 on the sphere but far from\nS\u03b4 . Player II then tugs towards y1 along a sequence of points, and\nthen when it gets much closer to the sphere than to S\u03b4 , it tugs\nstraight to the sphere.\n\nto estimate u(0) where u = u\u03b4 is the AM function in X r Y with boundary values\n\uf8f1\n\uf8f4\ny \u2208 \u2212A\u03b4 ,\n\uf8f21 ,\nF (y) := 0 ,\nd(y, \u2212A\u03b4 ) > \u03b4 ,\n\uf8f4\n\uf8f3\n\u22121\n1 \u2212 d(y, \u2212A\u03b4 ) \u03b4 , 0 < d(y, \u2212A\u03b4 ) \u2264 \u03b4 .\n\nThe function u is invariant under rotations of X preserving (1, 0, . . . , 0) \u2208 Rn .\nTherefore, u is also AM in R2 \u2229 X. Thus, we henceforth restrict to the case n = 2,\nwith no loss of generality.\nAronsson [3] constructed a family of viscosity solutions Gm to \u2206\u221e u = 0 in\n2\nR2 r {0} that are separable in polar coordinates: Gm (r, \u03b8) = rm /(2m\u22121) hm (\u03b8) (for\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n27\n\nm \u2208 Z). We are interested in the m = \u22121 solution, which may be written as\n\u00151/3\n\u0014\ncos \u03b8 (1 \u2212 | tan(\u03b8/2)|4/3 )2\nr\u22121/3 .\n(4.1)\nG=\n1 + | tan(\u03b8/2)|4/3 + | tan(\u03b8/2)|8/3\n\nObserve that when \u2212\u03c0/2 \u2264 \u03b8 \u2264 \u03c0/2 this solution is non-negative, and G \u2265 c r\u22121/3\nwhen \u03b8 \u2208 [\u2212\u03c0/4, \u03c0/4], say, where c > 0 is some fixed constant. Then F \u2264 O(1) G\u0303\u03b4 ,\nwhere\nG\u0303\u03b4 (x, y) = \u03b4 1/3 G(x + 1 + 2 \u03b4, y) .\nSince u(0) is monotone in F , and G\u0303\u03b4 satisfies \u2206\u221e G\u0303\u03b4 = 0, it follows that u(0) \u2264\nO(1) G\u0303\u03b4 (0) = O(\u03b4 1/3 ).\nWe now show that the bound u(0) = O(\u03b4 1/3 ) is tight. It is easy to see, using\ncomparison with a cone centered at (\u22121, 0), say, that u(\u22121+\u03b4/10, 0) > c > 0, where\nc is a constant that does not depend on \u03b4. Comparison with a cone centered at any\npoint z in the unit disk shows that u(z \u2032 ) \u2265 u(z)/2 if |z \u2212 z \u2032 | \u2264 (1 \u2212 |z|)/2. Using\nsuch estimates, it is easy to see that there is a constant c\u2032 > 0 such that u \u2265 c\u2032 on\nthe disk B of radius \u03b4 centered at q := (\u22121 + 2\u03b4, 0), provided that \u03b4 < 1/4, say.\nNow consider the function\n\u0001\nG\u2217\u03b4 (x, y) = c\u2032 \u03b4 1/3 G (x, y) \u2212 q .\n\nBy the choice of the constant c\u2032 , we have G\u2217\u03b4 \u2264 u on \u2202B, since G \u2264 r\u22121/3 in R2 r{0}.\nIf (r\u2032 , \u03b8\u2032 ) denote the polar coordinates centered at q, the center of B, and (r, \u03b8)\ndenote the standard polar coordinates centered at 0, then 2 |\u03b8\u2032 | \u2265 \u03c0 \u2212 |\u03b8 \u2212 \u03c0| when\nr = 1 and we choose \u03b8\u2032 \u2208 [\u2212\u03c0, \u03c0). Also, r\u2032 is bounded from below by\n\u0001 a constant\ntimes |\u03b8 \u2212 \u03c0| when \u03b8 \u2208 [0, 2\u03c0] and r = 1. Since |G| \u2264 O(1) (\u03c0/2) \u2212 |\u03b8| r\u22121/3 when\n\u03b8 \u2208 [\u2212\u03c0, \u03c0), it follows that on the unit circle\n\u0001\nG\u2217\u03b4 \u2264 O(1) (\u03c0/2) \u2212 |\u03b8\u2032 | (r\u2032 )\u22121/3 \u2264 O(1) \u03b4 1/3 |\u03b8 \u2212 \u03c0|2/3 \u2264 O(\u03b4 1/3 ) .\n\nTherefore G\u2217\u03b4 \u2212 O(\u03b4 1/3 ) \u2264 u on the boundary of the unit circle, as well as on \u2202B.\nConsequently, u \u2265 G\u2217\u03b4 \u2212 O(\u03b4 1/3 ) in the complement of B in the unit disk. This\nimplies that there is some r \u2208 (0, 1) such that u\u03b4 (\u2212r, 0) \u2265 \u03b4 \u22121/3 for all sufficiently\nsmall \u03b4. The required estimate u\u03b4 (0) \u2265 \u0398(\u03b4 \u22121/3 ) now follows by several applications\nof comparison with cones (the number of which depends on r), similar to the above\nargument estimating a lower bound for u on B.\n\u0003\nOne could also try to use Aronsson's other solutions Gm to bound \u221e-harmonic\nmeasure of certain sets in other domains. Also, Aronsson has some explicit solutions\nfor \u2206p u = 0, which may serve a similar purpose.\n5. Counterexamples\n5.1. Tug-of-war games with positive payoffs and no value. Here we give the\npromised counterexample showing that the hypothesis inf f > 0 in Theorem 1.2\ncannot be relaxed to f > 0. As we later point out, a similar construction works in\nthe continuum setting of length spaces.\nThe comb game is tug-of-war with running payoffs on an infinite graph shaped\nlike a comb, as shown in Figure 4. The comb is defined by an infinite sequence of\npositive integers l0 , l1 , l2 . . ., and has states (vertices) {(x, y) \u2208 Z2 : 0 \u2264 x and 0 \u2264\ny \u2264 lx }. The edges of the comb are of the form (x, y) \u223c (x, y + 1) and (x, 0) \u223c\n(x + 1, 0), giving the graph the shape of a comb, where the xth tooth of the comb\n\n\f28\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nhas length lx . The running payoff f (x, y) is 1/lx if y = 0 and zero otherwise. (Later\nwe will consider a variation where f > 0 everywhere.) The terminal states are the\nstates of the form (x, lx ), and the terminal payoff F is zero on all terminal states.\n\nFigure 4. A comb.\nLemma 5.1. For any comb (choice of the sequence {lx}), we have uI (0, 0) = 2.\nPt\u22121\nProof. First we argue that uI (0, 0) \u2265 2. Denote by \u03c8(t) :=\ni=0 f (xi , yi ) the\naccumulated running payoff. Fix a large B > 0 and equip player I with the following\nstrategy: at all times t < \u03c4 for which \u03c8(t) < B, player I pulls down if yt 6= 0, left\nif yt = 0 and xt 6= 0, and right if (xt , yt ) = (0, 0); if \u03c8(xt ) \u2265 B, then player I pulls\ntoward the closest terminal state. Define the termination time \u03c4 = inf{t : yt = lxt }\nand also the stopping time \u03c30 = inf{t : xt = 0} \u2227 \u03c4 . Fix any strategy for player II\nand observe that {xt\u2227\u03c30 }t\u22650 is a nonnegative supermartingale, which must converge\na.s.; therefore, from any initial state, \u03c30 < \u221e a.s.; therefore, the stopping time\n\u03c3 = inf{t : \u03c8(t) \u2265 B} \u2227 \u03c4 is almost surely finite, whence \u03c4 < \u221e a.s. as well.\nConsider the process\nMt = 2(1 \u2212 yt /lxt ) + \u03c8(t) .\nThen Mt\u2227\u03c3 is a submartingale. Note that if y\u03c3 = 0 then M\u03c3 = \u03c8(\u03c3)+2 and \u03c8(\u03c3) \u2265\nB, while if y\u03c3 > 0 then \u03c3 = \u03c4 and M\u03c3 = \u03c8(\u03c3). In any case, M\u03c3 \u2264 \u03c8(\u03c3)(1 + 2/B).\nThus by optional stopping,\n2\n2\n)E\u03c8(\u03c3) \u2264 (1 + )uI (0, 0).\nB\nB\nNext, to show that uI (0, 0) \u2264 2, suppose that player II adopts the strategy\nof always pulling up, and player I knows this and seeks to maximize her payoff.\nBecause player II always pulls up, Mt is a positive supermartingale, so Mt a.s.\nconverges to M\u221e , and by optional stopping,\n2 = M0 \u2264 EM\u03c3 \u2264 (1 +\n\n\u221e\n\u0002X\n\u0003\n2(1 \u2212 y0 /lx0 ) = M0 \u2265 E[M\u221e ] \u2265 E\nf (xt\u2032 , yt\u2032 ) .\nt\u2032 =0\n\nThis shows that by always pulling up, player II can force player I's expected payoff\n\u0003\nfrom (x0 , y0 ) = (0, 0) to be no more than 2(1 \u2212 y0 /lx0 ) = 2.\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n29\n\nRemark 5.2. Note that the strategy for player II of always pulling up does not necessarily force the game to end with probability one; this strategy alwaysPgives an upper\nbound on uI (0, 0), but it only yields an upper bound on uII (0, 0) if x\u22650 l\u22121\nx = \u221e,\nwhen the Borel-Cantelli Lemma ensures termination.\nP\u221e \u22121\nSuppose that the teeth of the comb are long, i.e.\n< \u221e, and that\nx=0 lx\nplayer I plays the strategy of always pulling down if yt > 0 and always pulling right\nif yt = 0. If player II plays the strategy of always pulling up, then we may calculate\nthe probability that the game terminates when started in state (x, 0). Either the\nstate goes to the terminal state of the tooth or goes to the base of the next tooth,\nand the latter probability is lx /(lx + 1).\nQ When the teeth of the comb are long,\nthe game lasts forever with probability x\u22650 lx /(lx + 1) > 0. If player II needs to\nensure that the game terminates, she will need to be prepared to sometimes pull\nleft instead of up, and this necessity will be costly for player II.\nLemma 5.3. For every s > 0 there is a suitable comb (choice of the sequence {lx })\nsuch that uII (0, 0) \u2265 s.\nProof. Let player I play the strategy of pulling down when y > 0 and pulling to the\nright when y = 0. We will estimate from below the expected payoff when player II\nplays any strategy which guarantees that the game terminates in finite time a.s.\nagainst the above strategy for player I. Let ax denote\nP\u221e the probability that the game\nterminates at the terminal state (x, lx ). Then x=0 ax = 1. For every x \u2208 N let\nLx , Ux and Rx denote the expected number of game transitions from (x, 0) to the\nleft, upwards and to the right, respectively (that is, to (x \u2212 1, 0), to (x, 1) and to\n(x + 1, 0), respectively).\nFirst, observe that\nU x \u2265 ax l x ,\nbecause every time that the game state arrives at (x, 1), with conditional probability\nat most 1/lx the game terminates at (x, lx ) before returning to (x, 0). Next, observe\nthat\nLx+1 \u2265 Rx \u2212 1 ,\nbecause the number of transitions from (x, 0) to (x + 1, 0) can exceed the number\nof transitions P\nfrom (x + 1, 0) to (x, 0) by at most one. (More precisely, we have\nLx+1 = Rx \u2212 j>x aj , but this will not be needed.) Finally, note that\nRx \u2265 Lx + Ux ,\n\nbecause player I always pulls right at (x, 0). (We set L0 := 0.)\nAn easy induction shows that the above relations imply\nx\nX\nRx \u2265\naj l j \u2212 x .\nj=0\n\nThe expected payoff E satisfies\n\u221e\n\u221e\nX\nX\nRx\nRx + Lx + Ux\n\u2265\n.\nE=\nl\nl\nx\nx=0 x\nx=0\n\nWe plug in the above lower bound on Rx to obtain\n\u221e\n\u221e\n\u221e\n\u0010X\nX\nlj \u0011 X x\n\u2212\n.\naj\nE\u2265\nl\nl\nx=0 x\nx=j x\nj=0\n\n\f30\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nP\n3\nSince\nx\u22650 ax = 1, the lemma follows if we choose lx = (c + x) with c > 0\nsufficiently large.\n\u0003\nNote that when player II always pulls up, for every vertex v in the comb there\nis a finite upper bound b(v) on the expected number of visits to v, which holds\nregardless of the strategy used by player I. Since in the proof of Lemma 5.1 player II\nalways pulls up, it follows that \u0001the value for playerPI is at most 3 even when f is\nreplaced by f (*) + q(*)/ b(*) + 1 , where q > 0 and v q(v) = 1. This modification\nwill certainly not decrease the value for player II. Therefore, in Theorem 1.2, the\nassumption inf f > 0 cannot be replaced by the assumption f > 0, even if F = 0\nthroughout Y .\nNote that we may convert the discrete comb graph to a continuous length space\nby adding line segments corresponding to edges in the comb. It is then easy to define\nthe corresponding continuous f and conclude that in Theorem 1.3 the assumption\ninf |f | > 0 cannot be relaxed to f > 0. The details are left to the reader.\n\nRemark 5.4. The dependence of uII (0, 0)P\non the growth of {lx } is somewhat surprising. If {lx } grows slowly enough so that x\u22650 l\u22121\nx = \u221e, then uII (0, 0) \u2264 2, because\n(as remarked above) the Borel-Cantelli lemma implies that the strategy of always\npulling up is guaranteed to terminate, and thus the proof of Lemma 5.1 applies.\nWe have seen that for some sequences {lx } of polynomial growth, uII (0, 0) can be\narbitrarily large. However, if {lx } grows rapidly enough so that lx+1 /lx \u2192 \u221e, then\nuII (0, 0) \u2264 2. This is immediate from the\nP following more general statement: for\nevery k > 0, we have uII (0, 0) \u2264 2 + 2lk j>k l\u22121\nj . To prove this, suppose player II\nadopts the strategy of always pulling left when xt > k and yt = 0 and up otherwise.\nLet \u03c8(t, k) denote the payoff accumulated for player I at points in [0, k] \u00d7 {0} up\nto time t. Then E\u03c8(t, k) \u2264 2, because\nft = 2(1 \u2212 yt ) + \u03c8(t, k)\nM\nlxt\n\nf0 = 2. Then we claim that\nis a positive supermartingale with M\nX\nE[\u03c8(t) \u2212 \u03c8(t, k)] \u2264 2lk\nl\u22121\nj .\nj>k\n\nFix j > k. Starting at (k, 0), the expected number of visits to (j, 0) before\nreturning to (k, 0) is at most 1 (by comparison to simple random walk). The\nexpected number of visits to (k, 0) is at most 2lk , since each time (xt , yt ) = (k, 0),\nthere is a chance of at least 1/(2lk ) of terminating at (k, lk ) without returning to\n(k, 0). Thus the expected accumulated payoff at (j, 0) is at most 2lk l\u22121\nj ; summing\nover j > k proves the claim.\n5.2. Positive Lipschitz function with multiple AM extensions. Here we\nshow that uniqueness in Theorem 1.4 may fail if F is unbounded, that is, we give\nan (X, Y, F ) (here f = 0) for which F is Lipschitz and positive and the continuum\nvalue is not the only AM extension of F .\nLet T be the rooted ternary tree, where each node has three direct descendants\nand every node but the root has one parent. Let X be the corresponding length\nspace, where we glue in a line segment of length 1 for every edge in T . For every\nnode v in T , we label the three edges leading to descendants of v by 1, \u22121 and \u2217.\n(One may interpret T as the set of finite stacks of cards, where each card has one\nof the three labels 1, \u22121, and \u2217.)\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n31\n\nWe define a function w on the nodes of T by induction on the distance from the\nroot. For any vertex v let k(v) be the number of edges on the simple path from the\nroot to v whose label is not \u2217. Set w(root) := 0. Next, if v is the parent of v \u2032 and\nthe edge from v to v \u2032 is labeled \u00b11, then w(v \u2032 ) = w(v) \u00b1 1, respectively. Finally, if\nthe edge from v to v \u2032 is labeled \u2217, let w(v \u2032 ) = w(v) + 1 \u2212 2\u2212k(v) , say. This defines\nw on the vertices of T . We define it on X by linear interpolation along the edges.\nLet V0 denote the set of nodes consisting of the root and all vertices v such\nthat the edge from v to its parent is not labeled \u2217. For each v \u2208 V0 let b(v) be\nsome large integer, whose value will be later specified, and let q(v) be the vertex\nat distance b(v) away from v along the (unique) infinite simple path starting at v\nwhich contains only edges labeled \u2217. Let Y1 = {q(v) : v \u2208 V0 } and let Y0 be the set\nof all nodes v such that w(v) \u2264 3/2. Set Y := Y0 \u222a Y1 .\nWe first claim that w is AM on X r Y . Indeed, let U be an open subset of\nX r Y . If U does not contain any tree node, then LipU w = Lip\u2202U w, because w\ninterpolates linearly inside the edges. Suppose now that v \u2208 U is a node. Let \u03b2\nbe the infinite path starting at v going always away from the root which uses only\nedges labeled \u22121. For each positive integer m let \u03b3m be the infinite path starting at\nv going always away from the root whose first m edges are labeled 1 and the rest are\nlabeled \u2217. Observe that \u03b3m meets Y1 and \u03b2 meets Y0 . Consequently, \u03b3m \u2229 \u2202U 6= \u2205\nand \u03b2 \u2229 \u2202U 6= \u2205. If x1 \u2208 \u03b3m \u2229 \u2202U and x0 \u2208 \u03b2 \u2229 \u2202U , then w(x1 ) \u2212 w(x0 ) \u2265\n(1 \u2212 2\u2212m ) d(x1 , x0 ) by the construction of w. Thus Lip\u2202U w \u2265 1. Since LipX w = 1,\nthis proves that w is AM on X r Y .\nNext, we consider the discrete tug-of-war game on the graph T where f = 0 and\nF is the restriction of w to Y . Let x0 , the starting position of the game, be the\nthird vertex on the infinite simple path from the root whose edges are all labeled\n1. We claim that the value uI for player I satisfies uI (x0 ) < w(x0 ). Before proving\nthis we explain the idea: at each step, player I has one or two moves that increase\nthe value of w by 1 (either moving away from the root along an edge with label 1\n- i.e., \"adding a 1 card to the deck\" - or moving towards the root along an edge\nlabeled \u22121 - i.e., \"removing a \u22121 card from the top of the deck\"), and similarly,\nplayer II has one or two moves that decrease the value of w by 1. Player I can thus\nmake w(xj ) a submartingale by always making moves of this type.\nThis does not force the game to terminate, however; in order to end the game\nfavorably by reaching a point in Y1 , player I must add a sequence of cards labeled\n\u2217 to the top of the deck. If player II adopts the strategy of always choosing the\nedge labeled \u22121 (\"adding a \u22121 card to the deck\"), then (provided that b(*) increases\nrapidly enough) the expected number of suboptimal moves that player I must make\n(by moving along an edge with label \u2217) to reach any particular element of Y1 is\nlarge enough to significantly decrease the total expected payoff for player I.\nWe proceed to prove that uI (x0 ) < w(x0 ). Let v0 be a vertex in V0 r Y , which\nis in the same connected component of T r Y as x0 . Let (v0 , v1 , . . . , vb(v0 ) ) be\nthe simple path from v0 to q(v0 ). We now abbreviate n = b(v0 ), h = w(v0 ) and\na = 1 \u2212 2\u2212k(v0 ) .\nLet player II use the naive strategy of always trying to move from the current\nstate along the edge labeled \u22121 going away from the root. For i \u2208 {0, 1, . . . , n}\nlet \u03c4i be the first time t such that xt = vi , and if no such t exists let \u03c4i = \u221e.\n(i)\n(As before xt is the game position at time t.) Let Mt = w(xt ) for t < \u03c4i and\n(i)\n(i)\nMt = w(vi\u22121 ) + 1 for t \u2265 \u03c4i . Then Mt is clearly a supermartingale, regardless\n\n\f32\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nof the strategy used by player I. Since the game terminates at time t if w(xt ) \u2264 1,\nthis implies that for i \u2208 N+\n\u0011\n\u0010\n\u0002\n\u0003\n1\n\u22121\nw(vi\u22121 )\n.\n= 1\u2212\n\u2264 exp\nPr \u03c4i < \u221e \u03c4i\u22121 < \u221e \u2264\nw(vi\u22121 ) + 1\nh + (i \u2212 1) a + 1\nh + (i \u2212 1) a + 1\nConsequently,\n\nn\nn\n\u0010 X\n\u0002\n\u0003\n\u0002\n\u0003 Y\nPr \u03c4i < \u221e \u03c4i\u22121 < \u221e \u2264 exp \u2212\nPr \u03c4n < \u221e \u2264\ni=1\n\n\u0010 Z\n\u2264 exp \u2212\n\n0\n\nTherefore\n\nn\n\n\u0011\n1\nh + (i \u2212 1) a + 1\ni=1\n\u0011\n\u0010 h + 1 \u00111/a\nds\n.\n=\nh+ 1 + sa\nan+ h+ 1\n\n\u0010\n\u0002\n\u0003\nPr \u03c4n < \u221e F (vn ) \u2264 (h + n a)\n\nh + 1 \u00111/a\n.\nan+ h+ 1\nSince a < 1, we can make this smaller than any required positive number by\nchoosing n = b(v0 ) sufficiently large. We may therefore choose the function b :\nV0 \u2192 N+ so that\nX \u0002\n\u0003\nPr game ends at v F (v) < 1/2 .\nv\u2208Y1\n\nSince F \u2264 3/2 on Y0 , this implies uI (x0 ) < 2 < 3 = w(x0 ).\nLet u\u2217 be the linear interpolation of uI to the edges. By Lemma 1.1 uI is\ndiscrete \u221e-harmonic. It follows that in the II-favored \u03b5-tug-of-war game, for every\n\u03b4 > 0 and \u03b5 \u2208 (0, 1/2) player II can play to make u\u2217 (xt ) + 2\u2212t \u03b4 a supermartingale.\nConsequently, Lemma 3.3 implies that the value of the continuum game is bounded\nby uI on the vertices. Since the continuum value is AM on X r Y , by Theorem 1.4,\nthis proves our claim that the assumption sup F < \u221e is necessary for uniqueness\nto follow in the setting of that theorem.\n5.3. Smooth f on a disk with no game value. The following example is a\ncontinuum analog of the triangle example at the beginning of Section 2.2.\nLet X be a closed disk in R2 , and let Y = \u2202X be its boundary. We now show\nthat for some smooth function f : X \u2192 R, the value u\u03b5I for player I and the value\nu\u03b5II for player II differ in \u03b5-tug-of-war with F = 0 on Y . Not only are the values\ndifferent, but the difference does not shrink to zero as \u03b5 \u0581 0. There is a lot of\nfreedom in the choice of the function f , but an essential property, at least for the\nproof, is that f is anti-symmetric about a line of symmetry of X.\nIt will be convenient to identify R2 with C, and use complex numbers to denote\npoints in R2 . Let f be a C \u221e function such that:\n(1) f \u2265 1 inside the disk |z \u2212 1| < 1/2,\n(2) 0 \u2264 f \u2264 2 in the right half plane Re z \u2265 0,\n(3) f = 0 in {z \u2208 C : Re z \u2265 0, |z \u2212 1| > 11/20}, and\n(4) f is anti-symmetric about the imaginary line.\nLet R > 2 be large, let X = {z : |z| \u2264 R}, Y = {z : |z| = R} and F = 0 on Y .\nConsider \u03b5 > 0 small. We want to show that for an appropriate choice of R, then\n(5.1)\n\nlim inf ku\u03b5I \u2212 u\u03b5II k\u221e > 0 .\n\u03b5\u05810\n\nIndeed, suppose that this is not the case. Let \u03b4 > 0 be small, and suppose that\nku\u03b5I \u2212 u\u03b5II k\u221e < \u03b4. Symmetry gives u\u03b5I (x + i y) = \u2212u\u03b5II (\u2212x + i y). The assumption\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n33\n\nku\u03b5I \u2212 u\u03b5IIk\u221e < \u03b4 therefore tells us that |u\u03b5I (x + i y) + u\u03b5I (\u2212x + i y)| < \u03b4. In particular,\n|u\u03b5I | < 2 \u03b4 on the imaginary axis. We now abbreviate w = u\u03b5I . Clearly w \u2265 \u2212\u03b4 on\n{z \u2208 X : Re z \u2265 0} and w \u2264 \u03b4 on {z \u2208 X : Re z \u2264 0}. By considering strategies\nwhich pull towards the imaginary axis and then using whatever strategy gives a\nvalue in [\u22122 \u03b4, 2 \u03b4] it is easy to see that |w| = O(1) (as usual, f = O(g) means that\nthere is some universal constant C such that f \u2264 C g) and that |w| \u2264 O(\u03b4 + \u03b5) in\n{z \u2208 X : | Re z| \u2264 2 \u03b5}, say. (See, e.g., the proof of Lemma 3.5.) It is then easy to\nsee that there is a constant c1 > 0, which does not depend on R and \u03b5 (as long as \u03b5\nis sufficiently small and R > 2, say) such that w \u2265 c1 on the disk |z \u2212 1| < 3/4 and\nw \u2264 \u2212c1 on the disk |z + 1| < 3/4. Since w is nearly anti-symmetric, it is enough to\nprove the first claim. Indeed, a strategy for player I which demonstrates this is one\nin which she pulls towards 1 until she accumulates a payoff of 1. If successful, she\nthen aims towards the boundary Y , but whether successful or not, whenever the\ngame position comes within distance \u03b5 of the imaginary axis, she changes strategy\nand adopts an arbitrary strategy that yields a payoff O(\u03b4 + \u03b5). We assume that \u03b4\nand \u03b5 are sufficiently small so that the O(\u03b4 + \u03b5) term is much smaller than c1 .\nIt now easily follows from Theorem 1.5 that |w(z)| \u2264 O(1) |z|\u22121/3 + O(\u03b4 + \u03b5).\nConsequently, there is some constant r1 > 2 such that |w| < c1 /10 on {z \u2208 X : |z| \u2265\nr1 }, provided that \u03b5 + \u03b4 is sufficiently small. Set L = c1 /(8 r1 ), and let ZL = ZL\u03b5\nbe the set of points z \u2208 X such that\nsup{w(z \u2032 ) : z \u2032 \u2208 Bz (\u03b5)} \u2212 inf{w(z \u2032 ) : z \u2032 \u2208 Bz (\u03b5)} > 2 L \u03b5 .\nSince |w| \u2264 c1 /10 on |z| = r1 and |w| \u2265 c1 on S := {|z \u2212 1| < 3/4} \u222a {|z + 1| < 3/4},\nit follows that every path in the graph (X, E\u03b5 ) from S to Y must intersect ZL . (We\nare assuming R > r1 .) Let Z\u0303L denote the union of ZL and all connected components\nof (X r ZL , E\u03b5 ) that are disjoint from Y .\nWe now claim that there is some r2 > r1 (which does not depend on \u03b5) such\nthat ZL \u2282 {|z| < r2 } and therefore Z\u0303L \u2282 {|z| < r2 }. Indeed, if z1 , z2 \u2208 X satisfy\n|z1 \u2212 z2 | < \u03b5 and |z1 | > 3 r1 , say, then the strategies for either player of pulling\ntowards z2 and only giving up when the current position is within distance \u03b5 of\n|z| = r1 show that\n|w(z1 ) \u2212 w(z2 )| \u2264\n\n\u03b5\n\u03b5\nsup{|w(z)| : |z| \u2265 r1 } \u2264\nc1 /10 .\n|z1 | \u2212 r1 \u2212 2 \u03b5\n|z1 | \u2212 r1 \u2212 2 \u03b5\n\nThis proves the existence of such an r2 .\nWe now let player II play a strategy very similar to the backtracking strategy\nshe used in the proof of Theorem 2.2, which we presently describe in detail. Let\nx0 , x1 , . . . denote the sequence of positions of the game. Assume that x0 \u2208 Z\u0303L .\nFor each t \u2208 N, let jt := max{j \u2208 N : j \u2264 t, xj \u2208 Z\u0303L }. Note that if jt < t, then\nxjt \u2208 ZL . By Lemma 1.1 inside {z \u2208 X : |z \u2212 1| \u2265 3/4, |z + 1| \u2265 3/4} the function\nw satisfies \u2206\u221e w = 0. If xt \u2208 Z\u0303L and player II gets the turn, she moves to some\n/ Z\u0303L\nz \u2208 Bxt (\u03b5) that satisfies w(z) < inf{w(z \u2032 ) : z \u2208 Bxt (\u03b5)} + \u03b4 2\u2212t\u22121 . While if xt \u2208\nand player II gets the turn, she moves to any neighbor z of xt that is closer (in the\ngraph metric) to xjt than xt in the subgraph Gt of (X, E\u03b5 ) spanned by the vertices\nxjt , xjt +1 , . . . , xt .\n\n\f34\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nNow consider the game evolving under any strategy for player I and the above\nstrategy for player II. Let dt be the graph-distance from xt to xjt in Gt . Set\nmt := w(xjt ) + dt \u03b5 L + \u03b4 2\u2212t +\n\nt\nX\n\nf (xk ) .\n\nk=0\n\nAs in the proof of Theorem 2.2, it is easy to verify that w(xt ) \u2264 mt and that mt is\na supermartingale.\nLet \u03c4 be the time in which the game stops; that is, \u03c4 := inf{t \u2208 N : xt \u2208 Y }.\nAssume that \u03c4 < \u221e a.s. Suppose that we could apply the optional stopping time\ntheorem. Then we would have\n\u0002\n\u0003\n\u0002 \u0003\nw(x0 ) \u2265 E m\u03c4 = E[w(xj\u03c4 ) + \u03b4 2\u2212\u03c4 ] + \u03b5 L E[d\u03c4 ] + E payoff .\nThus,\n\n\u0002\n\u0003\nE payoff \u2264 O(1) \u2212 \u03b5 L E[d\u03c4 ] .\n\nBut d\u03c4 \u2265 (R \u2212 r2 )/\u03b5, because the Euclidean distance from Y to Z\u0303L is at least\nR \u2212 r2 . Since w(x0 ) is at most the supremum of expected payoffs under the current\nstrategy for player II and an arbitrary strategy guaranteeing \u03c4 < \u221e for player I,\nwe obtain w(x0 ) \u2264 O(1) \u2212 R + r2 . This contradicts our previous conclusion that\nkwk\u221e = O(1), because we may choose r large.\nHow do we justify the application of the optional stopping time theorem? We\nslightly modify the strategy for player II. So far, our analysis utilized one advantage\nto player II in the calculation of w = u\u03b5I ; that is, that it is player I's responsibility to\nmake sure that \u03c4 < \u221e. Now we have to use the other advantage to player II, which\nis that player II gets to choose her strategy after knowing what player I's strategy\nis. Let t0 be the first time such that with the strategy which player I is using and\nthe above strategy for player II, the game terminates by time t0 with probability\nat least 1/2. The new strategy for player II is to play the above strategy until time\nt0 , and if the game lasts longer to use an arbitrary strategy which would guarantee\na conditioned expected future payoff of u\u03b5II (xt0 ) = O(1). We may certainly apply\nthe optional stopping time theorem at time \u03c4 \u2227 t0 . This does give a contradiction\nas above, because E[d\u03c4 \u2227t0 ] \u2265 (R \u2212 r2 )/(2 \u03b5), and the contradiction proves our\nclaim (5.1).\n5.4. Lipschitz g on unit disk with multiple solutions to \u2206\u221e u = g. Here we\nconstruct the counterexample showing that if we omit the assumption inf f > 0,\nin Corollary 1.9, then it may fail. In the example, X is the unit disk in R2 , Y\nis its boundary, F = 0 and f is Lipschitz and take values of both signs. The\nexample is motivated by and similar to the example of Section 5.3. However, since\nthe assumptions of Corollary 1.9 do not hold (obviously), we need to construct the\nsolutions u to \u2206\u221e u = g not by using tug-of-war, but by other means. In fact, we\nwill use a smoothing of Aronsson's function (4.1).\nThe following analytic-geometric lemma will replace the use of the backtracking\nstrategy for player II in Section 5.3. The following notation will be needed. For\nx \u2208 U and u : R \u2192 R let\nLipx u := inf{LipW u : x \u2208 W \u2282 U, W open} .\nLemma 5.5. Let X be a length space, and let F1 , F2 be bounded Lipschitz real\nvalued functions on a nonempty subset Y \u2282 X. Let u1 and u2 be the corresponding\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n35\n\nAM extensions to X r Y . Fix L > 0, and let ZL := {x \u2208 X : Lipx u1 > L}. Suppose\nthat F1 = F2 on ZL \u2229 Y , that LipY rZL F2 \u2264 L and\no\nn |F (y) \u2212 u (x)|\n2\n1\n: y \u2208 Y r ZL , x \u2208 ZL \u2264 L .\n(5.2)\nsup\nd(y, x)\nThen u1 = u2 in ZL .\n\nWe need a few simple observations before we begin the proof. Suppose that U\nis an open connected subset of a length space X, that X r U is nonempty, and\n \u0303 denote the set of all\nthat F : X r U \u2192 R is Lipschitz and bounded. Let \u2202U\npoints x \u2208 \u2202U such that there is a finite length path \u03b3 \u2282 X where \u03b3 \u2229 U 6= \u2205 and\n \u0303 and for two points x, y \u2208 U\u2217 let d\u2217 (x, y) = dU (x, y)\n\u03b3 r U = {x}. Set U\u2217 := U \u222a \u2202U\n\u2217\n \u0303 is finite.\nbe the infimum length of paths \u03b3 \u2282 U\u2217 joining x and y such that \u03b3 \u2229 \u2202U\nNote that (U\u2217 , d\u2217 ) is a length space. Also, since d\u2217 \u2265 d on U\u2217 \u00d7 U\u2217 , the restriction\n \u0303 is Lipschitz. Consequently, this restriction of F has an AM extension\nof F to \u2202U\nu : U\u2217 \u2192 R with respect to d\u2217 . We claim that this is also an AM extension of F\nwith respect to d.\nObserve that for any Lipschitz function w : V \u2192 R where V \u2282 X is open, we\nhave\n\u0010\n\u0011\n\u0001\nLipV w \u2264 sup Lipx w \u2228 Lip\u2202V w .\nx\u2208V\n\n(This can be verified by considering for every pair of distinct points x, y \u2208 V the\nrestriction of w to a nearly shortest path joining x and y in X.) Hence, to show\nthat u is AM with respect to d it is enough to prove that\n(5.3)\n\nsup Lipx w \u2264 Lip\u2202V w\n\nx\u2208V\n\nholds for arbitrary open V \u2282 U . Observe that for x \u2208 U we have Lipx w = Lip\u2217x w,\nwhere Lip\u2217 refers to d\u2217 . Since w is AM with respect to d\u2217 , we have Lip\u2217x w \u2264 Lip\u2217\u2202V w\nfor all x \u2208 V . Finally, Lip\u2217\u2202V w \u2264 Lip\u2202V w because d\u2217 \u2265 d on U\u2217 \u00d7 U\u2217 . This\nproves (5.3) and thereby shows that w is AM on U with respect to d. In particular,\nwe conclude that\n(5.4)\n\nLip\u2217U\u2217 w = Lip\u2217\u2202U\n \u0303 w\n\nfor the AM extension of F to U .\nProof of Lemma 5.5. First, it is clear that ZL is a closed set. Let\n(\nu1 (x) , x \u2208 ZL ,\nF\u2217 (x) =\nF2 (x) , x \u2208 Y r ZL ,\nand let w : X \u2192 R be the AM extension of F\u2217 to X r (Y \u222a ZL ). We claim that\nw is also an AM extension of F2 : Y \u2192 R to X r Y . Since uniqueness of AM\nextensions holds in this setting, this will imply w = u2 and complete the proof,\nbecause w = u1 on ZL .\nLet U be a connected component of X r ZL , and let d\u2217 = dU\n\u2217 denote the cor\u2217\n \u0303\nresponding metric on U \u222a \u2202U . Note that Lip\u2202U\n \u0303 u1 \u2264 L, since Lipx u1 \u2264 L for\nx \u2208 X r ZL . By (5.2) and the assumption LipY rZL F2 \u2264 L it follows that that\nLip\u2217\u2202U\u222a(Y\nF \u2264 L. Thus, we get Lipx w = Lip\u2217x w \u2264 L for x \u2208 U , which implies\n \u0303\n\u2229U) \u2217\nLipx w \u2264 L for x \u2208 X r ZL .\n\n\f36\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nNow let V \u2282 X r Y be open. In order to prove that w is AM, we need to\nestablish (5.3). Without loss of generality, we assume that V is connected. If\nV \u2229 ZL = \u2205, then (5.3) certainly holds, since w is AM in X r (ZL \u222a Y ).\nSuppose now that V \u2229 ZL 6= \u2205. Then L1 := LipV u1 > L, by the definition of ZL .\nSince u1 is AM, by (5.4) with u1 in place of w, V in place of U and dV\u2217 in place of\n \u0303\n \u0303\ndU\n\u2217 , there is a sequence of pairs (xj , yj ) in \u2202V and a sequence of paths \u03b3j \u2282 V \u222a \u2202V\nfrom xj to yj , respectively, such that xj 6= yj ,\n(5.5)\n\nlim\n\nj\u2192\u221e\n\n|u1 (xj ) \u2212 u1 (yj )|\n= L1 ,\nlength(\u03b3j )\n\n \u0303 is finite. For all sufficiently large j, |u1 (xj ) \u2212 u1 (yj )| > L length(\u03b3j ).\nand \u03b3j \u2229 \u2202V\nHence \u03b3j \u2229 ZL 6= \u2205. Let x\u2032j be the first point on \u03b3j that is in ZL and let yj\u2032 be\nthe last point on \u03b3j that is in ZL . Note that d(x\u2032j , xj )/ length(\u03b3j ) \u2192 0 as j \u2192 \u221e,\nbecause L < L1 = LipV u1 , (5.5) holds and |u(x\u2032j ) \u2212 u(xj )| \u2264 L d(x\u2032j , xj ). (If at\nsome significant proportion of the length of \u03b3j the function u does not change in\nspeed very close to L1 , it will not have enough distance to catch up.) Similarly,\nd(yj\u2032 , yj )/ length(\u03b3j ) \u2192 0. Since supx\u2208Z\n/ L Lipx w \u2264 L\n/ L Lipx u1 \u2264 L and supx\u2208Z\nand u1 = w on ZL , it follows that |u1 (xj ) \u2212 w(xj )| \u2264 2 L d(xj , x\u2032j ) and similarly\n|u1 (yj ) \u2212 w(yj )| \u2264 2 L d(yj , yj\u2032 ). Thus, |w(xj ) \u2212 w(yj )|/ length(\u03b3j ) \u2192 L1 , proving\nthat Lip\u2202V w \u2265 LipV w, as needed.\n\u0003\nOur example is based on smoothing two different modifications of Aronsson's \u221eharmonic function G from (4.1). For L > 0 let ZL be the set of points in R2 r {0}\nsuch that |\u2207G| > L. Define the inner an outer radii of ZL : RL := sup{|z| : z \u2208 ZL }\nand rL := inf{|z| : 0 6= z \u2208\n/ ZL }, and note that limL\u2192\u221e RL = 0, while rL > 0 for\nevery L > 0. Now fix some large L. Let u denote G restricted to the annulus\nAL := {z \u2208 R2 : rL /2 \u2264 |z| \u2264 1}. Let uj , j = 1, 2, denote the AM function on AL\nwhose boundary values are equal to u on the inner circle and are j on the outer\ncircle, respectively. Lemma 5.5 implies that u1 = u = u2 on AL \u2229 ZL (provided\nthat L was chosen sufficiently large). Shortly, we will show that there is a function\nv defined on the unit disk that agrees with u in AL and such that \u2206\u221e v = g (in the\nviscosity sense), where g is a Lipschitz function. Assuming this for the moment, we\ncan then define vj = uj \u2212 j in AL and vj = v \u2212 j inside the disk |z| < rL /2. Then\nv1 and v2 are both 0 on the unit circle, and both satisfy \u2206\u221e vj = g, providing the\nrequired example. It thus remains to prove\nLemma 5.6. For every r0 > 0 there are Lipschitz functions g, v : R2 \u2192 R such\nthat v agrees with G on |z| > r0 and \u2206\u221e v = g holds in the viscosity sense.\nProof. Let\na(\u03b8) :=\n\n\u0014\n\ncos \u03b8 (1 \u2212 | tan(\u03b8/2)|4/3 )2\n1 + | tan(\u03b8/2)|4/3 + | tan(\u03b8/2)|8/3\n\n\u00151/3\n\nbe the angle factor of G in (4.1). First, observe that a(\u03b8 + \u03c0) = \u2212a(\u03b8) and a(\u2212\u03b8) =\na(\u03b8). Next, note that a(\u03b8) > 0 when \u03b8 \u2208 (\u2212\u03c0/2, \u03c0/2). We now verify that a(\u03b8) is\nC \u221e in a neighborhood of \u03c0/2. Write\n\u0011\u22121/3 \u0010 1 \u2212 | tan(\u03b8/2)|4/3 \u00112/3\n\u0010\n.\na(\u03b8) = cos \u03b8 1 + | tan(\u03b8/2)|4/3 + | tan(\u03b8/2)|8/3\ncos \u03b8\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n37\n\nThe first two factors are real-analytic near \u03c0/2. Setting \u03c6 = | tan(\u03b8/2)|2 /3, which\nis real-analytic near \u03b8 = \u03c0/2, allows us to rewrite the last factor as\n\u0001\u22124/3 \u0010 1 \u2212 \u03c62 \u00112/3\n\u0001\u22124/3 \u0010 1 \u2212 | tan(\u03b8/2)|4/3 \u00112/3\n=\ncos\n(\u03b8/2)\ncos (\u03b8/2)\n1 \u2212 \u03c63\n1 \u2212 tan2 (\u03b8/2)\n\u0001\u22124/3 \u0010 1 + \u03c6 \u00112/3\n= cos (\u03b8/2)\n,\n1 + \u03c6 + \u03c62\n\nwhich is also real-analytic near \u03b8 = \u03c0/2. We conclude that a(\u03b8) is real-analytic at\nevery \u03b8 \u2208\n/ \u03c0 Z.\nIt is instructive to see that G is \u221e-harmonic in R2 r {0}. Verifying \u2206\u221e G = 0\naway from the real line can be done by differentiation. At points where \u03b8 = 0, r > 0,\nwe have \u2207G/|\u2207G| = (\u22121, 0). At such points \u2202x2 G = \u2202x2 r\u22121/3 = 4 r\u22127/3 /9, and\n\u22127/3\nindeed \u2206+\n/9 there. However,\n\u221eG = 4 r\n(5.6)\n\na(\u03b8) = 1 \u2212 16\u22121/3 \u03b84/3 \u2212 \u03b82 /6 + O(\u03b83 ) ,\n\nnear \u03b8 = 0. This implies that there is no C \u221e function u that satisfies u(r, 0) =\nG(r, 0) and u \u2264 G in a neighborhood of (r, 0). Thus, \u2206\u2212\n\u221e G = \u2212\u221e.\nWe return to the proof of the lemma, and first establish that the lemma holds\nwhen we only require that g be continuous, instead of Lipschitz. In this case, the\nfunction v may be written as\n\u0001\n(5.7)\nv(r, \u03b8) := \u03c6(r) \u03bb(r) a(\u03b8) + (1 \u2212 \u03bb(r)) cos \u03b8\n\nfor appropriately chosen functions \u03c6 and \u03bb. The functions \u03c6 and \u03bb will be C \u221e , will\nsatisfy \u03bb(r) = \u03c6(r) = 0 in a neighborhood of 0 and \u03c6(r) = r\u22121/3 , \u03bb(r) = 1 for all\nr \u2265 r0 /2. It follows that v is Lipschitz and that \u2206\u221e v is C \u221e away from the x-axis\nand in a neighborhood of 0. It remains to check the behavior of \u2206\u221e v at points on\nand close to the x-axis. Based on (5.6), we may estimate \u2206\u221e v for \u03b8 6= 0 close to 0\nand r > 0:\n4 \u03bb3 \u03c63\nP (r, \u03bb, \u03c6, \u03c6\u2032 , \u03bb\u2032 ) 2/3\n(5.8)\n\u2206\u221e v = \u03c6\u2032\u2032 \u2212\n+\n\u03b8\n+ O(\u03b8) ,\n4\n\u2032\n2\n81 r (\u03c6 )\nr6 (\u03c6\u2032 )4\n\nwhere P is some polynomial. Let r1 , r2 , r3 satisfy 0 < r3 < r2 < r1 < r0 /2. Choose\n\u03bb(r) as a C \u221e function that is 0 for r \u2264 r2 , is 1 for r \u2265 r1 , and is strictly monotone\nin [r2 , r1 ]. Choose \u03c6(r) as a C \u221e function that is 0 in [0, r3 ] and is r\u22121/3 for r \u2265 r2 .\nWhen r < r2 , \u03bb = 0, and hence \u2206\u221e v is C \u221e by (5.7). In the range r \u2208 [r2 , r1 ], we\nuse (5.8) to conclude that the limit as \u03b8 \u2192 0 of \u2206\u221e v exists.\nWe now argue that there is a continuous function g such that \u2206\u221e v = g in\nthe viscosity sense. Suppose that \u03b7 is a C 2 function defined in a small open set U\ncontaining the point z0 = (r, 0) such that the minimum of \u03b7\u2212v in U occurs at z0 . We\nwill now perturb \u03b7. For sufficiently small s1 > 0 the function \u03b71 (z) := \u03b7 +s1 |z \u2212z0 |2\nis a C 2 function defined in U and z0 is the unique minimum of \u03b71 \u2212 v in U . If\ns2 > 0 is chosen much smaller, then the function \u03b72 (z) = \u03b71 (z) + s2 y will still\nsatisfy that the infimum of \u03b72 \u2212 v is attained in U . Moreover, that infimum cannot\nbe attained on the x-axis, because s2 y is zero on the x-axis, \u2207y is not parallel\nto the x-axis, and \u2207v exists. Since s2 and s1 are arbitrarily small, we conclude\nthat \u2206\u221e \u03b7(z0 ) \u2265 limz \u2206\u221e v(z) as z tends to z0 through point not on the x-axis.\n\u2212\nThus, \u2206+\n\u221e v(z0 ) \u2265 limz \u2206\u221e v(z). Similarly, \u2206\u221e v(z0 ) \u2264 limz \u2206\u221e v(z). This proves\n\u2206\u221e v = g, where g is the continuous extension of \u2206\u221e v off the x-axis to the whole\nplane.\n\n\f38\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nIf we want g to be Lipschitz, we need to eliminate the \u03b82/3 term in (5.8). Define\n\u0001\na1 (\u03b8) := \u2212161/3 a(\u03b8) \u2212 cos \u03b8 \u2212 (1/12) sin2 2\u03b8 ,\na2 (\u03b8) := cos \u03b8 + (1/8) sin2 2\u03b8 ,\n\na3 (\u03b8) := (1/4) sin2 2\u03b8 .\nThen near \u03b8 = 0 we have\n\na1 (\u03b8) = \u03b84/3 + O(\u03b83 ) ,\na2 (\u03b8) = 1 + O(\u03b83 ) ,\na3 (\u03b8) = \u03b82 + O(\u03b83 ) .\n\nSet\n(5.9)\n\nv(r, \u03b8) := \u03bb1 (r) a1 (\u03b8) + \u03bb2 (r) a2 (\u03b8) + \u03bb3 (r) a3 (\u03b8) ,\n\nwhere \u03bb1 , \u03bb2 and \u03bb3 are to be chosen soon. A calculation shows that near \u03b8 = 0 we\nhave\n\u2206\u221e v = \u03bb\u2032\u20322 +\n\n64 \u03bb31\n+\n81 r4 (\u03bb\u20322 )2\n\n\u0001\n64 \u03bb41 \u2212 162 r4 \u03bb\u20321 (\u03bb\u20322 )3 + 27 r2 \u03bb1 (\u03bb\u20322 )2 3 r2 \u03bb\u2032\u20322 + 3 r \u03bb\u20322 \u2212 10 \u03bb3 2/3\n\u03b8 +O(\u03b8) .\n729 r6 (\u03bb\u20322 )4\nOf course, when \u03bb1 , \u03bb2 and \u03bb3 are chosen so that v = G, all the terms on the right\nhand side vanish. Our goal is to choose these functions so that the following holds:\n(1) for r \u2265 r0 we have v = G,\n(2) when r is sufficiently small, we have v = 0,\n(3) the \u03b82/3 term vanishes identically,\n(4) we don't have a blow up due to \u03bb\u20322 = 0, and finally\n(5) the functions \u03bbj are C \u221e , say.\nThis is not hard. Fix r1 , r2 , r3 , r4 such that 0 < r4 < r3 < r2 < r1 < r0 /2. For\nr > r1 , we choose the \u03bbj so that v = G. In particular, \u03bb2 = r\u22121/3 in this range.\nIn the range r \u2265 r3 we maintain \u03bb2 = r\u22121/3 . The function \u03bb1 is chosen so that\nthroughout [r3 , r2 ] we have \u03bb1 = \u03bb\u20322 , while \u03bb1 does not vanish in [r3 , r1 ]. This is\npossible, because \u03bb\u20322 < 0 for r \u2265 r3 and \u03bb1 = \u221216\u22121/3 < 0 at r = r1 . For every\nr \u2208 [r3 , r1 ], \u03bb3 (r) takes the unique value for which the \u03b82/3 term vanishes. Since \u03bb1\nand \u03bb\u20322 do not vanish in the interval, it is clear that such a choice for \u03bb3 is possible\nand \u03bb3 is C \u221e provided that \u03bb1 and \u03bb2 are. Throughout r < r2 we take \u03bb1 = \u03bb\u20322 .\nThis allows us to simplify the expression for \u2206\u221e v in this range, to obtain\n\u221216 \u03bb1\n\n270 r2 \u03bb3 \u2212 (64 + 81 r3 ) \u03bb\u20322 + 81 r4 \u03bb\u2032\u20322 2/3\n64 \u03bb\u20322\n+\n16\n\u03b8\n+ O(\u03b8) .\n81 r4\n729 r6\nNow the denominators cannot vanish before r = 0. Thus, \u03bb3 takes care to make\nthe \u03b82/3 term vanish while \u03bb2 evolves to become zero throughout r \u2264 r4 . This\ncompletes the proof.\n\u0003\n\u2206\u221e v = \u03bb\u2032\u20322 +\n\n6. Viscosity solutions and quadratic comparison in Rn\nIn this section we prove Theorem 1.7, which states that in bounded domains in\nEuclidean space Rn , u is a viscosity solution of \u2206\u221e u = g iff u satisfies g-quadratic\ncomparison. The following lemma will be useful in that proof. Let D2 \u03c6(x) denote\n\u0001i=1,...,n\nthe Hessian matrix \u2202i \u2202j \u03c6(x) j=1,...,n .\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n39\n\nLemma 6.1. Let \u03c6 be any real-valued function which is C 2 in a neighborhood of\nx0 \u2208 Rn and satisfies \u2207\u03c6(x0 ) 6= 0. Then for every \u03b4 > 0, there exist quadratic\ndistance functions \u03c61 and \u03c62 such that:\n(1) \u03c61 (x0 ) = \u03c6(x0 ) = \u03c62 (x0 ); \u2207\u03c61 (x0 ) = \u2207\u03c6(x0 ) = \u2207\u03c62 (x0 ).\n(2) 0 < |\u2206\u221e \u03c6i (x0 ) \u2212 \u2206\u221e \u03c6(x0 )| < \u03b4 for i \u2208 {1, 2}. Also, as quadratic forms,\nD2 \u03c62 (x0 ) strictly dominates D2 \u03c6(x0 ), which in turn strictly dominates\nD2 \u03c61 (x0 ).\ne of x0 .\n(3) Consequently, \u03c61 < \u03c6 < \u03c62 at all points x 6= x0 in a neighborhood U\n(4) \u03c61 and \u03c62 are centered at z1 and z2 , respectively, with 0 < |zi \u2212 x0 | < \u03b4 for\ni \u2208 {1, 2}.\n(5) In a neighborhood of x0 , the function \u03c61 is \u22c6-decreasing in the distance from\nz1 and \u03c62 is \u22c6-increasing in the distance from z2 .\nProof. We begin with preliminary calculations about the quadratic distance function \u03c6a,b (x) = a|x|2 + b|x|, centered at the origin. Fix some x 6= 0. Let v = x/|x|\nbe the unit vector in the x-direction and vO be any unit vector orthogonal to v.\nWrite M = M (x) = D2 \u03c6a,b (x).\nThen direct calculations show:\n(1)\n(2)\n(3)\n(4)\n(5)\n\n\u2207\u03c6a,b (x) = (2a|x| + b) v.\nv T M v = 2a.\nT\nvO\nM vO = 2a + b|x|\u22121 .\nT\nvO\nM v = 0.\n\u2206\u221e \u03c6a,b (x) = 2a whenever \u2207\u03c6a,b (x) 6= 0.\n\nOf course, it is enough to complete this calculation in dimension two when x = (1, 0)\nand a = 1 and deduce the general case by symmetry.\nWe now construct the \u03c62 described in the lemma (the construction of \u03c61 is\n\u2207\u03c6(x0 )\nfor some small value of \u03b3 > 0 (specified\nsimilar). We will take z2 = x0 \u2212 \u03b3 |\u2207\u03c6(x\n0 )|\nbelow) and write \u03c62 (x) = \u03c6a,b (x\u2212z2 )+c, where we first choose a to be an arbitrary\nreal with the property that 0 < 2a \u2212 \u2206\u221e \u03c6(x0 ) < \u03b4, we then choose b so that\n\u2207\u03c62 (x0 ) = \u2207\u03c6(x0 ) and we then choose c so that \u03c62 (x0 ) = \u03c6(x0 ). We must now\nshow that the \u03c62 thus constructed satisfies the requirements of the lemma.\nWe can compute b explicitly in terms of a, x0 , \u2207\u03c6(x0 ), \u03b3, and z2 using the\n\u2212z2\nrelation \u2207\u03c62 (x0 ) = (2a\u03b3 + b) |xx00 \u2212z\n= \u2207\u03c6(x0 ). As \u03b3 tends to zero, b tends to\n2|\n|\u2207\u03c6(x0 )|.\nThe description of D2 \u03c6a,b (x) given above implies that if v = (x0 \u2212 z2 )/|x0 \u2212 z2 |\nand vO is a unit vector orthogonal to v, and M = D2 \u03c6a,b (x0 ), then\n(1) v T M v = 2a.\nT\n(2) vO\nM vO = 2a + b\u03b3 \u22121 .\nT\n(3) vO M v = 0.\nT\nNote that \u03c7 := vO\nM vO = 2a + b\u03b3 \u22121 = \u03b3 \u22121 |\u2207\u03c6(x0 )| tends to \u221e as \u03b3 \u0581 0.\n\u2032\n2\nLet M := D \u03c6(x0 ). We claim that by choosing \u03b3 sufficiently small we can make\nsure that M dominates M \u2032 as a quadratic form (or any other fixed quadratic form\nsatisfying v T M \u2032 v < 2a, for that matter). Let C := sup{w0T M \u2032 w1 : w0 , w1 \u2208\nRn , |w0 | = |w1 | = 1} and a\u2032 := v T M \u2032 v/2 < a. If w \u2208 Rn is nonzero, we may write\nw = \u03b1 v + wO , where \u03b1 \u2208 R and wO is orthogonal to v. Then\n\nwT M \u2032 w \u2264 2 a\u2032 \u03b12 + 2 C \u03b1 |wO | + C |wO |2 .\n\n\f40\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\u2032\n\n2\n\u2032\n2\nOn the other hand wT M w = 2 a \u03b12 +\u03c7 |wO |2 . Since 2 C \u03b1 |wO | \u2264 a\u2212a\n2 \u03b1 +C |wO |\n\u2032\n\u2032\n\u2032\nfor some constant C = C (C, a, a ), the domination follows from lim\u03b3\u05810 \u03c7 = \u221e.\nThis constructs \u03c62 with the required properties. A similar construction applies to\n\u03c61 .\n\u0003\n\nProof of Theorem 1.7. Let x0 \u2208 U and suppose that u satisfies g-quadratic comparison in a neighborhood of x0 . Let \u03c6 be a C 2 real valued function defined in a\nneighborhood of x0 . Suppose that \u2207\u03c6(x0 ) 6= 0 and \u03c6\u2212u has a local minimum at x0 .\nThe above lemma implies that for every \u03b4 > 0 there is a quadratic distance function\n\u03c62 (x) = a |x \u2212 z|2 + b |x \u2212 z| such that \u03c62 (x) \u2212 \u03c6(x) > \u03c62 (x0 ) \u2212 \u03c6(x0 ) for all x 6= x0\nin some neighborhood of x0 , \u2206\u221e \u03c62 < \u2206\u221e \u03c6+\u03b4 and \u03c62 is \u22c6-increasing in a neighborhood of x0 . Since \u03c62 \u2212 u has a strict local minimum at x0 , it follows by g-quadratic\ncomparison that arbitrarily close to x0 there are points x for which a > g(x)/2. By\ncontinuity of g, this implies a \u2265 g(x0 )/2. That is, \u2206\u221e \u03c62 (x0 ) \u2265 g(x0 ). Since \u03b4 > 0\nwas arbitrary, this also implies \u2206\u221e \u03c6(x0 ) \u2265 g(x0 ).\nNow we remove the assumption that \u2207\u03c6(x0 ) 6= 0 and assume instead that \u03c6(x) =\na |x \u2212 x0 |2 + o(|x \u2212 x0 |2 ) as x \u2192 x0 . If a \u2265 0, we may take \u03c62 (x) = (a + \u03b4) |x \u2212 x0 |2 ,\nand the same argument as above gives \u2206\u221e \u03c6(x0 ) \u2265 g(x0 ). Now suppose a < 0 and\nlet \u03b4 \u2208 (0, |a|). In this case, we have to modify the argument, because \u03c62 is not\n\u22c6-increasing in a neighborhood of x0 . Recall that \u03c6 \u2212 u has a local minimum at\nx0 and \u03c62 \u2212 \u03c6 has a strict local minimum at x0 . Therefore, \u03c62 \u2212 u has a strict\nlocal minimum at x0 . Let r > 0 be sufficiently small so that \u03c62 (x) \u2212 u(x) >\n\u03c62 (x0 ) \u2212 u(x0 ) = \u2212u(x0 ) on {x \u2208 Rn : 0 < |x \u2212 x0 | \u2264 r}. By continuity, for\nevery \u03b7 \u2208 Rn with |\u03b7| sufficiently small \u03c62 (x + \u03b7) \u2212 u(x) > \u2212u(x0 ) for every\nx \u2208 \u2202Bx0 (r). Fix such an \u03b7 satisfying 0 < |\u03b7| < r, and let x\u2217 be a point in Bx0 (r)\nwhere \u03c62 (x + \u03b7) \u2212 u(x) attains its minimum. Since\n\b\n\u03c62 (x0 + \u03b7) \u2212 u(x0 ) < \u2212u(x0 ) \u2264 inf \u03c62 (x + \u03b7) \u2212 u(x) : x \u2208 \u2202Bx0 (r) ,\nit follows that x\u2217 \u2208\n/ \u2202Bx0 (r). On the other hand, x\u2217 6= x0 \u2212 \u03b7, because\n\u0001\n\u03c62 (x0 \u2212 \u03b7) + \u03b7 \u2212 u(x0 \u2212 \u03b7) = \u2212u(x0 \u2212 \u03b7) \u2265 \u2212\u03c62 (x0 \u2212 \u03b7) \u2212 u(x0 ) > \u2212u(x0 ) .\n\nTherefore, \u2207\u03c62 (x\u2217 ) 6= 0. The first case we have considered therefore gives g(x\u2217 ) \u2264\n\u2206\u221e \u03c62 (x\u2217 ) = 2 (a + \u03b4). Since \u03b4 \u2208 (0, |a|) was arbitrary, continuity gives g(x0 ) \u2264 2 a,\n\u2212\nas required. Thus, we conclude that \u2206+\n\u221e u \u2265 g. By symmetry, \u2206\u221e u \u2264 g, and hence\nu is a viscosity solution as claimed.\nThis completes the first half of the proposition. For the converse, suppose that\nu is a viscosity solution of \u2206\u221e u = g. Let W \u2282 W \u2282 U be open. Suppose that\n\u03c6(x) = a |x \u2212 z|2 + b |x \u2212 z| + c is a \u22c6-increasing quadratic distance function in\nW , \u03c6 > u on \u2202W and there is some x0 \u2208 W such that u(x0 ) > \u03c6(x0 ). For all\nsufficiently small \u03b4 > 0 we still have \u03c6\u03b4 (x) := \u03c6(x) \u2212 \u03b4 |x \u2212 z|2 > u on \u2202W . Let\nx\u2217 be a point in W where \u03c6\u03b4 (x) \u2212 u(x) attains its minimum. Note that x\u2217 \u2208\n/ \u2202W ,\nsince \u03c6\u03b4 (x0 ) \u2212 u(x0 ) \u2264 \u03c6(x0 ) \u2212 u(x0 ) < 0. Consequently, g(x\u2217 ) \u2264 \u2206+\n\u221e u(x\u2217 ) \u2264\n\u2206\u221e \u03c6\u03b4 (x\u2217 ) = 2 (a \u2212 \u03b4). Thus, 2 a > inf W g. Therefore, u satisfies g-quadratic\ncomparison on W , and the proof is complete.\n\u0003\n7. Limiting trajectory\n7.1. A general heuristic. For every \u03b5, when both players play optimally in \u03b5-tugof-war, the sequence {xk } of points visited is random. Do the laws of these random\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n41\n\nsequences, properly normalized, converge in some sense to the law of a random\ncontinuous path as \u03b5 tends to zero?\nWe give a complete answer in only a couple of simple cases. However, we can\nmore generally compute the limiting trajectory when u is C 2 in a domain contained\nin Rn and the players move to maximize/minimize u instead of u\u03b5 ; we suspect but\ncannot prove generally that the limiting behavior will be the same when the players\nuse u\u03b5 .\nConsider a point x0 in the domain at which \u2207u(x0 ) 6= 0. If \u03b5 is small enough,\nthen \u2207u 6= 0 throughout the closed ball B \u03b5 (x0 ), so the extrema of u on the closed\nball B \u03b5 (x0 ) lie on the surface of the ball. Then at any such extremum x, by the\nLagrange multipliers theorem, x \u2212 x0 = \u03bb\u2207u(x) for some real \u03bb = O(\u03b5). Since\nu is C 2 , we have \u2207u(x) = \u2207u(x0 ) + D2 u(x0 )(x \u2212 x0 ) + o(\u03b5), where D2 u(x0 ) =\n2\nT\n2\n(\u2202i \u2202j u(x0 ))i=1,...,n\nj=1,...,n . We define \u03b7 = \u2207u(x0 ), H = D u(x0 ), and c = \u03b7 H\u03b7/|\u03b7| .\nThen x \u2212 x0 = \u03bb(\u03b7 + H(x \u2212 x0 ) + o(\u03b5)), where \u03bb = O(\u03b5). If we solve this with small\n\u03bb, we find\nx \u2212 x0 = (I \u2212 \u03bbH)\u22121 \u03bb(\u03b7 + o(\u03b5)) = \u03bb\u03b7 + \u03bb2 H\u03b7 + o(\u03b52 ).\nThen \u03b52 = |x \u2212 x0 |2 = |\u03b7|2 \u03bb2 + 2c|\u03b7|2 \u03bb3 + o(\u03b53 ), and thus \u00b1\u03b5 = |\u03b7|\u03bb + c|\u03b7|\u03bb2 + o(\u03b52 ),\nand so \u03bb = \u00b1\u03b5/|\u03b7| \u2212 \u03b52 c/|\u03b7|2 + o(\u03b52 ). Hence,\nx \u2212 x0 = \u00b1\u03b5|\u03b7|\u22121 \u03b7 + \u03b52 |\u03b7|\u22122 (H \u2212 cI)\u03b7 + o(\u03b52 ).\nWhen u is C 2 and has nonzero gradient in a domain, this suggests the SDE:\n(7.1)\n\ndXt = r(Xt ) dBt + s(Xt ) dt ,\n\nwhere r(Xt ) = |\u2207u(Xt )|\u22121 \u2207u(Xt ) and s(Xt ) is equal to |\u2207u(Xt )|\u22122 D2 u(Xt )\u2207u(Xt )\nminus its projection onto \u2207u(Xt ) (so that r(Xt ) and s(Xt ) are always orthogonal).\nRt\nNow It\u00f4's formula implies that, as expected, u(Xt ) \u2212 21 s=0 \u2206\u221e u(Xs ) ds is a martingale. In particular, when u is infinity harmonic, u(Xt ) is a martingale.\nAll of the above analysis applies only when players make moves to optimize u-\ninstead of u\u03b5 , as they would do if they were playing optimally. This difference is\nwhat makes the calculation of the limiting trajectory a heuristic, except in a few\nspecial cases as described in the next subsection.\n7.2. Special cases. The above analysis does apply to optimally played games in\na couple of simple cases for which u = u\u03b5 . Let X = R2 and let Y \u2282 X be the\ncomplement of a bounded set. Then the following are infinity harmonic functions\nu which satisfy both \u2206\u221e u = 0 and \u2206\u03b5\u221e u = 0:\n(1) u(v) is the distance from v to a fixed convex set whose \u03b5-neighborhood is\ncontained in Y\n(2) u(v) is the argument of v on a 2 \u03b5-neighborhood of X r Y , and defined\narbitrarily elsewhere (here we assume that the 2 \u03b5-neighborhood of X r Y\ndoes not contain a simple closed curve surrounding 0, so that the argument\ncan be defined there).\n(Due to boundary errors the above need not hold when X r Y is a bounded domain\nand Y is its boundary.) In the first case, Xt is simply a Brownian motion along a\n(straight) gradient flow line of u. In the second case, Xt is a diffusion with drift in\nthe \u2212Xt direction and diffusion of constant magnitude orthogonal to Xt .\n\n\f42\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nCrandall and Evans [10] have explored the following question in some detail, and\nit has recently been answered affirmatively by Savin [23] when n = 2: Is every \u221eharmonic function on a domain in Rn everywhere differentiable? This question can\nbe rewritten as a question about the amount of variation of the optimal direction of\nthe first move (as a function of the starting point) in \u03b5 tug-of-war. An affirmative\nanswer might be a step towards a more complete analysis of the limiting game\ntrajectories when f = 0 and when u is not smooth, since it would at least ensure\nthat r(Xt ) is well-defined everywhere that the gradient is non-zero.\n8. Additional open problems\n(1) If U \u2282 Rn is open and bounded, F : \u2202U \u2192 R Lipschitz, g : U \u2192 R Lipschitz, is there a unique viscosity solution for \u2206\u221e u = g + c with boundary\nvalues given by F for generic c \u2208 R. Here, generic could mean in the sense\nof Baire category, or could mean almost every, or perhaps this is true except\nfor a countable set of c.\n(2) Does Theorem 1.8 continue to hold if F and f are merely continuous instead\nof uniformly continuous? Can the inf |f | > 0 requirement be replaced with\nf \u2265 0 (or f \u2264 0) when X has finite diameter? When solving \u2206\u221e u = g\non bounded domains in Rn , can the condition that g be continuous be\nreplaced with a natural weaker condition (e.g., semicontinuity or piecewise\ncontinuity)?\n(3) In Section 5.2 we gave a triple (X, Y, F ) with F positive and Lipschitz for\nwhich the continuum value of tug-of-war is not the unique AM extension\nof F .\nIs there an example where X is the closure of a connected open subset\nof Rn and Y is its boundary? In particular, let X be the set of points in R2\nabove the graph of the function |x|1+\u03b4 , let Y be the boundary of X in R2 ,\nand let F (x, y) = y on Y . Is y the only AM extension of F to X? What is\nthe value of the corresponding game? (Note added in revision: Changyou\nWang and Yifeng Yu (personal communication) have recently shown that\ny is the only AM extension of F to X. The proof turned out to be rather\nsimple.)\n(4) Suppose that u : U \u2192 R, is Lipschitz and g1 , g2 : U \u2192 R are continuous\non an open set U \u2282 Rn and that \u2206\u221e u = g1 as well as \u2206\u221e u = g2 , both in\nthe viscosity sense. Does it follow that g1 = g2 ? (Note added in revision:\nYifeng Yu [25] proved this in the case n = 2.)\nAcknowledgements\nWe thank Alan Hammond and G\u00e1bor Pete for useful discussions and the referee\nfor corrections to an earlier version.\nReferences\n1. Gunnar Aronsson, Extension of functions satisfying Lipschitz conditions, Ark. Mat. 6 (1967),\n551\u2013561. MR0217665 (36 #754)\n, On the partial differential equation u2x uxx + 2ux uy uxy + u2y uyy = 0, Ark. Mat. 7\n2.\n(1968), 395\u2013425. MR0237962 (38 #6239)\n3.\n, Construction of singular solutions to the p-harmonic equation and its limit equation\nfor p = \u221e, Manuscripta Math. 56 (1986), no. 2, 135\u2013158. MR850366 (87j:35070)\n\n\fTUG-OF-WAR AND THE INFINITY LAPLACIAN\n\n43\n\n4. Gunnar Aronsson, Michael G. Crandall, and Petri Juutinen, A tour of the theory of absolutely\nminimizing functions, Bull. Amer. Math. Soc. (N.S.) 41 (2004), no. 4, 439\u2013505 (electronic).\nMR2083637 (2005k:35159)\n5. M. Bardi, M. G. Crandall, L. C. Evans, H. M. Soner, and P. E. Souganidis, Viscosity solutions\nand applications, Lecture Notes in Mathematics, vol. 1660, Springer-Verlag, Berlin, 1997,\nLectures given at the 2nd C.I.M.E. Session held in Montecatini Terme, June 12\u201320, 1995,\nEdited by I. Capuzzo Dolcetta and P. L. Lions, Fondazione C.I.M.E.. [C.I.M.E. Foundation].\nMR1462698 (98b:35005)\n6. G. Barles and J\u00e9r\u00f4me Busca, Existence and comparison results for fully nonlinear degenerate\nelliptic equations without zeroth-order term, Comm. Partial Differential Equations 26 (2001),\nno. 11-12, 2323\u20132337. MR1876420 (2002k:35078)\n7. T. Bhattacharya, E. DiBenedetto, and J. Manfredi, Limits as p \u2192 \u221e of \u2206p up = f and related\nextremal problems, Rend. Sem. Mat. Univ. Politec. Torino 1989 (1991), no. Special issue on\ntopics in nonlinear PDEs, 15\u201368. MR1155453 (93a:35049)\n8. Thierry Champion and Luigi De Pascale, Principles of comparison with distance functions\nfor absolute minimizers, J. Convex Anal. 14 (2007), no. 3, 515\u2013541. MR2341302\n9. M. G. Crandall, L. C. Evans, and R. F. Gariepy, Optimal Lipschitz extensions and the\ninfinity Laplacian, Calc. Var. Partial Differential Equations 13 (2001), no. 2, 123\u2013139.\nMR1861094 (2002h:49048)\n10. Michael G. Crandall and L. C. Evans, A remark on infinity harmonic functions, Proceedings\nof the USA-Chile Workshop on Nonlinear Analysis (Vi\u00f1a del Mar-Valparaiso, 2000) (San\nMarcos, TX), Electron. J. Differ. Equ. Conf., vol. 6, Southwest Texas State Univ., 2001,\npp. 123\u2013129 (electronic). MR1804769 (2001j:35076)\n11. Michael G. Crandall and Pierre-Louis Lions, Viscosity solutions of Hamilton-Jacobi equations,\nTrans. Amer. Math. Soc. 277 (1983), no. 1, 1\u201342. MR690039 (85g:35029)\n12. Lawrence C. Evans and Yifeng Yu, Various properties of solutions of the infinityLaplacian equation, Comm. Partial Differential Equations 30 (2005), no. 7-9, 1401\u20131428.\nMR2180310 (2006g:35062)\n13. Robert Jensen, Uniqueness of Lipschitz extensions: minimizing the sup norm of the gradient,\nArch. Rational Mech. Anal. 123 (1993), no. 1, 51\u201374. MR1218686 (94g:35063)\n14. Petri Juutinen, Absolutely minimizing Lipschitz extensions on a metric space, Ann. Acad.\nSci. Fenn. Math. 27 (2002), no. 1, 57\u201367. MR1884349 (2002m:54020)\n15. Andrew J. Lazarus, Daniel E. Loeb, James G. Propp, Walter R. Stromquist, and Daniel H.\nUllman, Combinatorial games under auction play, Games Econom. Behav. 27 (1999), no. 2,\n229\u2013264. MR1685133 (2001f:91023)\n16. Andrew J. Lazarus, Daniel E. Loeb, James G. Propp, and Daniel Ullman, Richman games,\nGames of No Chance (Richard J. Nowakowski, ed.), MSRI Publications, vol. 29, Cambridge\nUniv. Press, Cambridge, 1996, pp. 439\u2013449. MR1427981 (97j:90101)\n17. Donald A. Martin, The determinacy of Blackwell games, J. Symbolic Logic 63 (1998), no. 4,\n1565\u20131581. MR1665779 (2000d:03118)\n18. E. J. McShane, Extension of range of functions, Bull. Amer. Math. Soc. 40 (1934), no. 12,\n837\u2013842.\n19. V. A. Mil\u2032 man, Absolutely minimal extensions of functions on metric spaces, Mat. Sb. 190\n(1999), no. 6, 83\u2013110. MR1719573 (2000j:41041)\n20. Abraham Neyman and Sylvain Sorin (eds.), Stochastic games and applications, NATO Science Series C: Mathematical and Physical Sciences, vol. 570, Dordrecht, Kluwer Academic\nPublishers, 2003. MR2032421 (2004h:91004)\n21. Adam M. Oberman, A convergent difference scheme for the infinity Laplacian: construction\nof absolutely minimizing Lipschitz extensions, Math. Comp. 74 (2005), no. 251, 1217\u20131230\n(electronic). MR2137000 (2006h:65165)\n22. Yuval Peres, Oded Schramm, Scott Sheffield, and David B. Wilson, Random-turn\nHex and other selection games, Amer. Math. Monthly 114 (2007), no. 5, 373\u2013387.\nMR2309980 (2008a:91039)\n23. Ovidiu Savin, C 1 regularity for infinity harmonic functions in two dimensions, Arch. Ration.\nMech. Anal. 176 (2005), no. 3, 351\u2013361. MR2185662 (2006i:35108)\n24. Hassler Whitney, Analytic extensions of differentiable functions defined in closed sets, Trans.\nAmer. Math. Soc. 36 (1934), no. 1, 63\u201389. MR1501735\n25. Yifeng Yu, Uniqueness of values of Aronsson operators and applications to \"tug-of-war\" game\ntheory, 2007, http://www.ma.utexas.edu/\u223c yifengyu/uofa2d.pdf.\n\n\f44\n\nYUVAL PERES, ODED SCHRAMM, SCOTT SHEFFIELD, AND DAVID B. WILSON\n\nMicrosoft Research; One Microsoft Way; Redmond, WA 98052\nDepartment of Statistics; 367 Evans Hall; University of California; Berkeley, CA 94720\nURL: http://research.microsoft.com/\u223c peres/\nMicrosoft Research; One Microsoft Way; Redmond, WA 98052\nURL: http://research.microsoft.com/\u223c schramm/\nMicrosoft Research; One Microsoft Way; Redmond, WA 98052\nDepartment of Statistics; 367 Evans Hall; University of California; Berkeley, CA 94720\nCurrent address: Courant Institute; 251 Mercer Street; New York, NY 10012\nURL: http://www.cims.nyu.edu/\u223c sheff/\nMicrosoft Research; One Microsoft Way; Redmond, WA 98052\nURL: http://dbwilson.com\n\n\f"}