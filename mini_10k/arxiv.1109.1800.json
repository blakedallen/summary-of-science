{"id": "http://arxiv.org/abs/1109.1800v1", "guidislink": true, "updated": "2011-09-08T18:44:20Z", "updated_parsed": [2011, 9, 8, 18, 44, 20, 3, 251, 0], "published": "2011-09-08T18:44:20Z", "published_parsed": [2011, 9, 8, 18, 44, 20, 3, 251, 0], "title": "Form discrete- to continuous-time ergodic theorems", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1109.2704%2C1109.6340%2C1109.2152%2C1109.5182%2C1109.0396%2C1109.0453%2C1109.0066%2C1109.0771%2C1109.1473%2C1109.5185%2C1109.0439%2C1109.5164%2C1109.3462%2C1109.3308%2C1109.3165%2C1109.4161%2C1109.0171%2C1109.6216%2C1109.4841%2C1109.1568%2C1109.0763%2C1109.6526%2C1109.6240%2C1109.6549%2C1109.6153%2C1109.6681%2C1109.6146%2C1109.1295%2C1109.4546%2C1109.5658%2C1109.4856%2C1109.0177%2C1109.4297%2C1109.1195%2C1109.0163%2C1109.5484%2C1109.2503%2C1109.1624%2C1109.6929%2C1109.2191%2C1109.0793%2C1109.0552%2C1109.0521%2C1109.2318%2C1109.3028%2C1109.0318%2C1109.6083%2C1109.2006%2C1109.0382%2C1109.5619%2C1109.4844%2C1109.3812%2C1109.2243%2C1109.6778%2C1109.3697%2C1109.0917%2C1109.4661%2C1109.2285%2C1109.3475%2C1109.1743%2C1109.1524%2C1109.5144%2C1109.0749%2C1109.4601%2C1109.2147%2C1109.5505%2C1109.1332%2C1109.3148%2C1109.0438%2C1109.2730%2C1109.2910%2C1109.4938%2C1109.4699%2C1109.2905%2C1109.1158%2C1109.6066%2C1109.1929%2C1109.4148%2C1109.4734%2C1109.6106%2C1109.5801%2C1109.0476%2C1109.2275%2C1109.4109%2C1109.1797%2C1109.0306%2C1109.1800%2C1109.0997%2C1109.2680%2C1109.0646%2C1109.4310%2C1109.1104%2C1109.5940%2C1109.1249%2C1109.0283%2C1109.0246%2C1109.1015%2C1109.5701%2C1109.1594%2C1109.1592%2C1109.4174&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Form discrete- to continuous-time ergodic theorems"}, "summary": "We introduce methods that allow to derive continuous-time versions of various\ndiscrete-time ergodic theorems. We then illustrate these methods by giving\nsimple proofs and refinements of some known results as well as establishing new\nresults of interest.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1109.2704%2C1109.6340%2C1109.2152%2C1109.5182%2C1109.0396%2C1109.0453%2C1109.0066%2C1109.0771%2C1109.1473%2C1109.5185%2C1109.0439%2C1109.5164%2C1109.3462%2C1109.3308%2C1109.3165%2C1109.4161%2C1109.0171%2C1109.6216%2C1109.4841%2C1109.1568%2C1109.0763%2C1109.6526%2C1109.6240%2C1109.6549%2C1109.6153%2C1109.6681%2C1109.6146%2C1109.1295%2C1109.4546%2C1109.5658%2C1109.4856%2C1109.0177%2C1109.4297%2C1109.1195%2C1109.0163%2C1109.5484%2C1109.2503%2C1109.1624%2C1109.6929%2C1109.2191%2C1109.0793%2C1109.0552%2C1109.0521%2C1109.2318%2C1109.3028%2C1109.0318%2C1109.6083%2C1109.2006%2C1109.0382%2C1109.5619%2C1109.4844%2C1109.3812%2C1109.2243%2C1109.6778%2C1109.3697%2C1109.0917%2C1109.4661%2C1109.2285%2C1109.3475%2C1109.1743%2C1109.1524%2C1109.5144%2C1109.0749%2C1109.4601%2C1109.2147%2C1109.5505%2C1109.1332%2C1109.3148%2C1109.0438%2C1109.2730%2C1109.2910%2C1109.4938%2C1109.4699%2C1109.2905%2C1109.1158%2C1109.6066%2C1109.1929%2C1109.4148%2C1109.4734%2C1109.6106%2C1109.5801%2C1109.0476%2C1109.2275%2C1109.4109%2C1109.1797%2C1109.0306%2C1109.1800%2C1109.0997%2C1109.2680%2C1109.0646%2C1109.4310%2C1109.1104%2C1109.5940%2C1109.1249%2C1109.0283%2C1109.0246%2C1109.1015%2C1109.5701%2C1109.1594%2C1109.1592%2C1109.4174&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We introduce methods that allow to derive continuous-time versions of various\ndiscrete-time ergodic theorems. We then illustrate these methods by giving\nsimple proofs and refinements of some known results as well as establishing new\nresults of interest."}, "authors": ["V. Bergelson", "A. Leibman", "C. G. Moreira"], "author_detail": {"name": "C. G. Moreira"}, "author": "C. G. Moreira", "links": [{"href": "http://arxiv.org/abs/1109.1800v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1109.1800v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.DS", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.DS", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "37A05 (Primary) 37A10 (Secondary)", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1109.1800v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1109.1800v1", "arxiv_comment": null, "journal_reference": null, "doi": null, "fulltext": "From discrete- to continuous-time ergodic theorems\nIn memory of Dan Rudolph\n\narXiv:1109.1800v1 [math.DS] 8 Sep 2011\n\nV. Bergelson, A. Leibman, and C. G. Moreira\nOctober 18, 2018\nAbstract\nWe introduce methods that allow to derive continuous-time versions of various\ndiscrete-time ergodic theorems. We then illustrate these methods by giving simple proofs\nand refinements of some known results as well as establishing new results of interest.\n\n0. Introduction\nThe goal of this paper is to introduce methods that allow one to obtain continuous-time versions of\nvarious discrete-time ergodic results. While the classical von Neumann's and Birkhoff's ergodic theorems\nwere dealing with continuous families of invertible measure preserving transformations, it was very soon\nobserved that ergodic theorems for Z-actions hold true as well, are somewhat easier to handle, and, moreover,\ncan be used as an auxiliary tool for the derivation of the corresponding continuous-time results. (See, for\nexample, the formulation of the so-called Birkhoff's fundamental lemma in [BiKo]. See also [Ko] and [H],\nSection 8.) Moreover, since not every measure preserving Z-action imbeds in a continuous measure preserving\nR-flow, and since there are various important classes of non-invertible measure-preserving transformations,\nit became, over the years, more fashionable to study ergodic theorems for measure preserving Z- and Nactions. Numerous multiple recurrence and convergence results obtained in the framework of the ergodic\nRamsey theory also focused (mainly due to combinatorial and number theoretical applications) on Z-actions\nand, more generally, actions of various discrete semigroups.\nThere are, however, questions in modern ergodic theory pertaining to measure preserving R-actions that\nnaturally present themselves and are connected with interesting applications but do not seem to easily follow\nfrom the corresponding results for Z-actions. To better explain our point, let us consider some examples.\nWe start with the R-version of the von Neumann's ergodic theorem ([vN]): if T t , t \u2208 R, is an ergodic\n1-parameter group of measure preserving transformations of a probability measure space (X, \u03bc), then for\nRb t\nR\n1\n(1)\nany f \u2208 L2 (X), limb\u2212a\u2192\u221e b\u2212a\nin L2 (X). An easy trick shows that this result\na T f dt = X f d\u03bc\nimmediately follows from the corresponding theorem for Z-actions, which says that if T is an invertible\nergodic measure preserving transformation of a probability measure space (X, \u03bc), then for any f \u2208 L2 (X),\nR\nPN\n1\n2\nn\nlimN \u2212M\u2192\u221e N \u2212M\nn=M+1 T f = X f d\u03bc in L (X). Indeed, all one has to do is to apply the Z-version of\nR1 t\nvon Neumann's theorem to the function f \u0303 = 0 T f dt and the transformation T 1 , utilizing the fact that,\nRa\nRb\nRb\nP[b]\u22121\nfor any a, b \u2208 R, a T t f dt = n=[a] T n f \u0303 \u2212 [a] T t f dt + [b] T t f dt. (The R-version of Birkhoff's pointwise\nergodic theorem can be derived from its Z-version in a similar way.) This argument is no longer applicable\nto \"multiple ergodic averages\"\nZ b\n1\n(0.1)\nT \u03b11 t f1 * . . . * T \u03b1r t fr dt,\nb\u2212a a\nwhere r \u2265 2, \u03b1i \u2208 R, and fi \u2208 L\u221e (X); however, it can be modified so that one is still able to show that the\naverages (0.1) converge in L2 -norm as b \u2212 a \u2212\u2192 \u221e as long as it is known that for arbitrarily small u > 0 the\n\nThe first two authors are partially supported by NSF grant DMS-0901106.\nRb\nHere and below, T t f (\u03c9 ) = f (T t \u03c9 ), t \u2208 R, \u03c9 \u2208 X, and the integral a T t f dt is understood in the sense of\nBochner.\n(1)\n\n1\n\n\fPN\n1\n\u03b11 un\naverages N \u2212M\nf1 *. . .*T \u03b1r un fr converge as N \u2212 M \u2212\u2192 \u221e. (See, for example, [Au1].) Indeed,\nn=M+1 T\ngiven \u03b5 > 0, find \u03b4 > 0 such that kT \u03b1i t f \u2212 f k < \u03b5 for all t \u2208 (0, \u03b4), where k * k = k * kL2 (X) ; then, assuming\nw.l.o.g. that sup |fi | \u2264 1, i = 1, . . . , r, we have, for any t \u2208 R, T \u03b1i t fi \u2212 T \u03b1i \u03b4[t/\u03b4] fi < \u03b5, i = 1, . . . , r, and so\nQr\nQ\n\u03b1i t\nfi \u2212 ri=1 T \u03b1i \u03b4[t/\u03b4] fi < r\u03b5. Hence,\ni=1 T\nlim sup\nb\u2212a\u2192\u221e\n\n1\nb\u2212a\n\nZ\n\nr\nbY\n\na i=1\n\nT \u03b1i t fi dt \u2212\n\n[b/\u03b4]\u22121 r\nX Y\n1\nT \u03b1i \u03b4n fi\n[b/\u03b4] \u2212 [a/\u03b4]\ni=1\nn=[a/\u03b4]\n\nr\nr\n\u0010 1 [b/\u03b4]\u22121\nY\nX Z (n+1)\u03b4 Y\n\u2264 lim sup\nT \u03b1i \u03b4n fi dt\nT \u03b1i t fi \u2212\nb\u2212a\u2192\u221e b \u2212 a\nn\u03b4\ni=1\ni=1\nn=[a/\u03b4]\nZ a\nZ b\nr\nr\n\u0011\nY\nY\n1\n1\n+\nT \u03b1i t fi dt +\nT \u03b1i t fi dt \u2264 r\u03b5.\nb \u2212 a [a/\u03b4]\u03b4 i=1\nb \u2212 a [b/\u03b4]\u03b4 i=1\n\nPN\nQr\n1\n\u03b1i \u03b4n\nSince limN \u2212M\u2192\u221e N \u2212M\nfi exists in L2 (X), and since \u03b5 is arbitrary, we get that\nn=M+1\ni=1 T\nR\nQ\nb\nr\n1\n\u03b1i t\nfi dt also exists.\nlimb\u2212a\u2192\u221e b\u2212a\ni=1 T\na\nR b p(t)\n1\nf dt,\nHowever, even this argument stops working if we consider, say, the \"polynomial averages\" b\u2212a\na T\nwhere p is a polynomial, or, more generally, the \"polynomial multiple averages\"\n1\nb\u2212a\n\nZ\n\nb\n\na\n\nT p1 (t) f1 * . . . * T pr (t) fr dt,\n\n(0.2)\n\nwhere pi are polynomials, since in this case the function \u03c6(t) = T p(t) f from R to L2 (X) is no longer uniformly\ncontinuous. The convergence of the corresponding discrete-time averages\n1\nN \u2212M\n\nN\nX\n\nn=M+1\n\nT p1 (n) f1 * . . . * T pr (n) fr ,\n\n(0.3)\n\nis known (see [HoK2] and [L3]), but to establish the convergence in L2 (X) of the averages (0.2) one either\nhas to go through all the main stages of the proof of the convegrence of averages (0.3) and verify the validity\nof the corresponding R-statements (see, for example, [P], where the existence of the non-uniform limits\nR\n1 b p1 (t)\nf1 * . . . * T pr (t) fr dt is established), or may try to find some alternative general method connecting\nb 0 T\nthe convergence of discrete- and of continuous-time averages. (Yet another approach to proving convergence\nof multiple polynomial averages, utilized in [Au2], is based on a \"change of variables\" trick and usage of\nR b Qk\np (t)\nequivalent methods of summation; this method allows one to treat expressions like 1b 0 j=1 Tj j,1 f1 *\nQk\np (t)\n. . . * j=1 Tj j,r fr dt, where Tj are commuting measure preserving transformations. However, this method\ngives no information about what the limits of such averages are, and, also, it is not clear whether it can be\nextended to obtain convergence of uniform averages (0.2).)\nAs another example where a passage from discrete to continuous setup is desirable but not apriori\nobvious let us mention the problem of the study of the distribution of values of generalized polynomials. A\ngeneralized polynomial is a function that is obtained from conventional polynomials of one or several variables\nby applying the operations of taking the integer part, addition and multiplication; for example, if pi (x) are\n\u0002\n\u0003\n\u0002\n\u00032\nconventional polynomials, then u(x) = [p1 (x)]p2 (x) + p3 (x) p4 (x) + p5 (x)[p6 (x)] p7 (x) is a generalized\npolynomial. It was shown in [BL] that the values of any bounded vector-valued generalized polynomial of\ninteger argument are well distributed on a piecewise polynomial surface, with respect to a natural measure on\nthis surface. The proof was based on the theorem on well-distribution of polynomial orbits on nilmanifolds;\nsince such a theorem for continuous polynomial flows on nilmanifolds was not known at the time of writing\n[BL], we could not prove that bounded generalized polynomials of continuous argument are well distributed\non piecewise polynomial surfaces. (See [BL], Theorem Bc . As a matter of fact, the problem of extending the\nresults from [BL] to the case of continuous parameter served as an impetus for the present paper.)\n2\n\n\fIn this paper we introduce two simple but quite general methods that allow one to deduce continuoustime ergodic theorems from their discrete-time couterparts. To deliver the zest of these methods we will\nformulate now two easy to state theorems. Let F (t) be a bounded measurable function from [0, \u221e) to a\nBanach space. (In our applications, F will usually be \"an ergodic expression\" that depends on a continuous\nparameter t and takes values in a functional space, say F (t) = T1t f1 * . . . * Tkt fk \u2208 L1 (X), t \u2208 [0, \u221e), where\nTi are 1-parameter groups of measure preserving transformations of a measure space X and fi \u2208 L\u221e (X)).\nPN \u22121\nProposition 0.1. (Additive method) If the limit limN \u2192\u221e N1 n=0 F (t + n) = At exists for a.e. t \u2208 [0, 1)\nR\nR\nb\n1\nthen the limit limN \u2192\u221e 1b 0 F (t) dt also exists, and equals 0 At dt.\nPN \u22121\nProposition 0.2. (Multiplicative method) If the limit limN \u2192\u221e N1 n=0 F (nt) = Lt exists for a.e. t \u2208 (0, 1),\nR\nb\nthen the limit L = limN \u2192\u221e 1b 0 F (t) dt also exists, and, moreover, Lt = L for a.e. t \u2208 (0, 1].\n\nEach of these \"methods\" has its pros and cons. The \"additive\" method is very easy to substantiate.\nHowever, it has the disadvatage that, being non-homogeneous, it \"desinchronizes\" the expression F (t), which\nmay be an obstacle for certain applications. Consider, for example, the expression F (t) = T1t f * . . . * Tkt f ,\nappearing in the formulation of the R-version of the ergodic Szemer\u00e9di theorem (see subsection 7.4 below).\nIn this case F (t + n) = T1n f1 * . . . * Tkn fk , where fi = Tit f , i = 1, . . . , k are, generally speaking, distinct\nfunctions, which complicates application of the \"discrete\" ergodic Szemer\u00e9di theorem. The \"multiplicative\nmethod\" is quite a bit harder to establish, but it preserves the \"structure\" of F (t): for F (t) = T1t f * . . . * Tkt f\nwe now have F (nt) = (T1t )n f * . . . * (Tkt )n f . An additional advantage of the multiplicative method is that it\nguarantees the equality of almost all \"discrete\" limits Lt , and therefore gives more information about the\n\"continuous\" limit L. (See Theorem 7.11 below.)\nWhen it comes to convergence on average, there are many types of it (uniform, strong Ces\u00e0ro, etc.)\nwhich naturally appear in various situations in classical analysis, number theory, and ergodic theory, and\nfor each of them one can provide a statement that connects discrete and continuous averages. We therefore\npresent several similar results; their proofs are based on similar ideas, but utilizing these ideas in diverse\nsituations we obtain a variety of useful theorems. Here is the descriptive list of various kinds of averaging\nschemes we will be dealing with. (In what follows V stands for an abstract Banach space.)\nP\n\u2022 One-parameter standard Ces\u00e0ro limits: The Ces\u00e0ro limit of a sequence (vn ) in V is limN \u2192\u221e N1 N\nn=1 vn ,\nR\n1 b\nand for a measurable function f : [0, \u221e) \u2212\u2192 V it is limb\u2192\u221e b 0 f (x) dx.\n1\n\u2022 One-parameter uniform Ces\u00e0ro limits: The uniform Ces\u00e0ro limit for a sequence (vn ) in V is limN \u2212M\u2192\u221e N \u2212M\nR\nPN\nb\n1\nn=M+1 vn , and for a measurable function f : [0, \u221e) \u2212\u2192 V it is limb\u2212a\u2192\u221e b\u2212a a f (x) dx.\n(The \"one-parameter averaging schemes\" above is, of course, a special case of the corresponding \"multiparameter schemes\" below, but we start with the one-parameter case to make our proofs more transparent.)\nQd\nAn Nd -sequence (vn ) in V is a mapping Nd \u2212\u2192 V , n 7\u2192 vn . For a parallelepiped P = i=1 [ai , bi ] \u2282 Rd\nQd\nwe define l(P ) = min1\u2264i\u2264d (bi \u2212 ai ) and w(P ) = i=1 (bi \u2212 ai ).\n1\n\u2022 Multiparameter standard Ces\u00e0ro limits: The Ces\u00e0ro limit of an Nd -sequence (vn ) in V is liml(P )\u2192\u221e w(P\n)\nR\nP\n1\nd\nv\n,\nand\nfor\na\nmeasurable\nfunction\nf\n:\n[0,\n\u221e)\n\u2212\u2192\nV\nit\nis\nlim\nf\n(x)\ndx,\nwhere,\nin\nboth\nd\nn\nl(P\n)\u2192\u221e\nn\u2208N \u2229P\nw(P ) P\nQ\ncases, P runs over the set of parallelepipeds of the form di=1 [0, bi ] in [0, \u221e)d .\n\u2022 Multiparameter\nof an Nd -sequence (vnR) in V is\nP uniform Ces\u00e0ro limits: The uniform Ces\u00e0ro limit\n1\n1\nd\nliml(P )\u2192\u221e w(P ) n\u2208Zd \u2229P vn , and for a measurable function f : [0, \u221e) \u2212\u2192 V it is liml(P )\u2192\u221e w(P\n) P f (x) dx,\nQd\nd\nwhere, in both cases, P runs over the set of parallelepipeds of the form i=1 [ai , bi ] in [0, \u221e) .\n\u2022 Two-sided (or, rather, all sided) standard and uniform Ces\u00e0ro limits: Instead of Nd -sequences, functions\non [0, \u221e)d , and parallelepipeds in [0, \u221e)d , we deal with Zd -sequences, functions on Rd , and parallelepipeds\nin Rd .\n\u2022 Limits ofQaverages along general F\u00f8lner sequences: Instead of averaging over parallelepipeds of the\nd\nd\nform P = i=1R[ai , bi ], we consider averages over elements of a general F\u00f8lner sequence (\u03a6N )\u221e\nN =1 in R ,\n1\nd\nlimN \u2192\u221e w(\u03a6N ) \u03a6N f (x) dx, where w stands for the Lebesgue measure on R .\n\u2022 Liminf and limsup versions for standard and uniform averages: When the limits above do not (or are\nnot known to) exist, but (vn ) is a real-valued sequence and f is a real-valued function, we consider the\ncorresponding liminfs and limsups.\n3\n\n\fPN \u22121\n\u2022 Lim-limsup versions: If the limits limN \u2192\u221e N1\nn=0 F (nt) do not, or are not known to exist, it may still\nP \u22121\nbe possible that for some L \u2208 V , limt\u21920+ lim supN \u2192\u221e N1 N\nn=0 F (nt) \u2212 L = 0; it turns out that this\nsuffices for the multiplicative method to work.\nAfter proving several versions of Propositions 0.1 and 0.2 corresponding to different averaging schemes,\nwe will apply them to re-prove some known and establish some new ergodic-theoretical results; here is a list\nof the applications that we obtain in Section 7:\n\u25e6 In section 7.1, we show that characteristic factors for averages of the form\n1\nw(\u03a6N )\n\nZ\n\n\u03a6N\n\nT p1 (t) f1 * . . . * T pr (t) fr dt,\n\n(0.4)\n\nwhere T t , t \u2208 R, is a continuous 1-parameter group of measure preserving transformations of a probability\nmeasure space X, pi are polynomials Rd \u2212\u2192 R, fi \u2208 L\u221e (X), and (\u03a6N ) is a F\u00f8lner sequence in Rd , are\nHost-Kra-Ziegler factors of X. (A non-uniform version of this result is obtained in [P].)\n\u25e6 In section 7.2, we prove that, for any d \u2208 N, a d-parameter polynomial flow on a nilmanifold X is well\ndistributed on a subnilmanifold of X. (This result is new and refines the fact that any such flow is uniformly\ndistributed in a subnilmanifold of X.)\n\u25e6 In section 7.3, we prove the convergence of averages (0.4). (This result is new, strengthening the results\nobtained in [P] and the one-parameter case of the results obtained in [Au2].) We also prove that the averages\nRb t\n1\nt\nb\u2212a a T1 f1 *. . .*Tr dt converge, where Ti are pairwise commuting measure preserving transformations. (This\nstrengthens the linear case of the results obrained in [Au2].)\n\u25e6 In section 7.4, we obtain a continuous-time version of the polynomial ergodic Szemer\u00e9di theorem.\n\u25e6 In section 7.5, we prove that the values of bounded vector-valued generalized polynomials are welldistributed on a piecewise polynomial surface. This establishes the continuous version of the well-distribution\nresult from [BL] that we discussed above.\n\u25e6 In section 7.6, we derive, from the corresponding discrete-time results in [F] and [BK], convergence of\nmultiple averages (0.2) with pi being functions of polynomial growth.\n\u25e6 Finally, in section 7.7, we apply our methods to obtain continuous-time theorems dealing with almost\neverywhere convergence of certain ergodic averages.\nAcknowledgment. We thank the referee for many useful comments and corrections.\n1. A Fatou lemma and a dominated convergence theorem\nThroughout Sections 1 \u2013 6, V stands for a separable Banach space. We will repeatedly use the following\nFatou-like lemma and its corollary:\nLemma 1.1. Let (X, \u03bc) be a finite measure Rspace and let R(fn ) be a sequence of uniformly bounded measurable\nfunctions from X to V . Then lim supn\u2192\u221e X fn d\u03bc \u2264 X lim supn\u2192\u221e kfn k d\u03bc.\n\nProof. Let M > 0 be such that kfn (x)k \u2264 M for all x \u2208 X and n \u2208 N, and let s(x) = lim supn\u2192\u221e kfn (x)k,\nx \u2208 X. Fix \u03b5 > 0.\b For each x \u2208 X let n(x) \u2208 N be such that kfnS\n(x)k < s(x) + \u03b5 for all n \u2265 n(x). For each\n\u221e\nn \u2208 N, let An = x \u2208 X : n(x) \u2264 n . Then A1 \u2286 A2 \u2286 . . . and n=1 An = X, so limn\u2192\u221e \u03bc(X \\ An ) = 0.\nLet N be such that \u03bc(X \\ AN ) < \u03b5. Then for any n \u2265 N ,\nZ\n\nX\n\nfn d\u03bc \u2264\n\nZ\n\nX\n\nkfn k d\u03bc =\n\nZ\n\nAN\n\nkfn k d\u03bc +\n\nSince this is true for any positive \u03b5,\nAs a corollary, we get:\n\nR\n\nX\n\nZ\n\nkfn k d\u03bc \u2264\n\nX\\AN\n\nfn d\u03bc \u2264\n\nR\n\nX\n\nZ\n\nAN\n\n(s + \u03b5) d\u03bc + M \u03b5 \u2264\n\nZ\n\ns d\u03bc + \u03b5(\u03bc(X) + M ).\n\nX\n\ns d\u03bc.\n\nLemma 1.2. Let (X, \u03bc) be a finite measure space. If a sequence (fn ) ofRuniformly bounded\nmeasurable\nR\nfunctions from X to V converges to a function f : X \u2212\u2192 V a.e. on X, then X fn d\u03bc \u2212\u2192 X f d\u03bc.\n4\n\n\fRemark. Of course, a more general dominated convergence theorem, where kfn k are not assumed to be\nbounded but only dominated by an integrable function, like in the case of real-valued functions, also holds,\nbut we will only need its special case given by Lemma 1.2.\n2. Additive method\nWhen a and b are positive real numbers, we define\n\nPb\n\nn>a vn =\n\n\u001aP\n\nn\u2208(a,b]\u2229N vn\n\nif a < b\n\n0 if a \u2265 b.\n\n2.1. Standard Ces\u00e0ro limits\nTheorem 2.1. Let f : [0, \u221e) \u2212\u2192 V be a bounded measurable function such that the limit\nb\n1X\nf (t + n)\nb\u2192\u221e b\nn>0\n\nAt = lim\n\nexists for a.e. t \u2208 [0, 1]. Then limb\u2192\u221e\n\n1\nb\n\nRb\n0\n\nf (x) dx also exists and is equal to\n\nR1\n0\n\nAt dt.\n\nProof. We may assume that the parameter b is integer. For any b \u2208 N we have\n1\nb\nSince for a.e. t \u2208 [0, 1],\n\n1\nb\n\nZ\n\nb\n\nf (x) dx =\n0\n\nPb\u22121\n\nn=0\n\nZ 1 X\nb\u22121 Z\nb\u22121\n1X 1\n1\nf (t + n) dt =\nf (t + n) dt.\nb n=0 0\n0 b n=0\n\nf (t + n) dt \u2212\u2192 At as b \u2192 \u221e, by Lemma 1.2,\n1\nb\u2192\u221e b\nlim\n\nZ\n\nb\n\nf (x) dx =\n\n0\n\nZ\n\n1\n\nAt dt.\n\n0\n\nRemark. Of course, in the formulation of Theorem 2.1 the interval [0, 1] and the expression f (t + n) can be\nreplaced by the interval [0, \u03b4] and the expression f (t + n\u03b4) for any positive \u03b4.\n2.2. Uniform Ces\u00e0ro limits\nTheorem 2.2. Let f : [0, \u221e) \u2212\u2192 V be a bounded measurable function such that the limit\nAt =\n\nexists for a.e. t \u2208 [0, 1]. Then limb\u2212a\u2192\u221e\n\nb\n1 X\nf (t + n)\nb\u2212a\u2192\u221e b \u2212 a\nn>a\n\n1\nb\u2212a\n\nlim\n\nRb\na\n\nf (x) dx also exists and is equal to\n\nR1\n0\n\nAt dt.\n\nProof. We may assume that the parameters a, b are integer. For any sequences (ak ), (bk ) of nonnegative\nintegers with bk \u2212 ak \u2212\u2192 +\u221e we have\n1\nb k \u2212 ak\n\nZ\n\nbk\n\nf (x) dx =\n\nak\n\nSince for a.e. t \u2208 [0, 1],\n\n1\nbk \u2212ak\n\nZ 1\nbX\nbX\nk \u22121 Z 1\nk \u22121\n1\n1\nf (t + n) dt =\nf (t + n) dt.\nbk \u2212 ak n=a 0\n0 bk \u2212 ak n=a\nk\n\nPbk \u22121\n\nn=ak\n\nk\n\nf (t + n) dt \u2212\u2192 At as k \u2192 \u221e, by Lemma 1.2,\n\n1\nlim\nk\u2192\u221e bk \u2212 ak\n\nZ\n\nbk\n\nf (x) dx =\n\nak\n\n5\n\nZ\n\n1\n\nAt dt.\n0\n\n\f2.3. Multiparameter standard Ces\u00e0ro limits\nLet d \u2208 N. We will call a mapping Nd \u2212\u2192 V , n 7\u2192 vn Nd -sequence in V . We write R+ for [0, \u221e). We\nwill now introduce notation that will allow us to formulate and prove the d-parameter versions of the above\ntheorems in complete analogy with the case d = 1.\nFor a, b \u2208 Rd+ , a = (a1 , . . . , ad ), b = (b1 , . . . , bd ), we write a \u2264 b if ai \u2264 bi for all i = 1, . . . , d\u0001 and\na < b if ai < bi for all i. Under\n\u0001 min(a, b) and max(a, b) we will understand min(a1 , b1 ), . . . , min(ad , bd ) and\nmax(a1 , b1 ), . . . , max(ad , bd ) respectively. For a = (a1 , . . . , ad ) \u2208 Rd+ and b = (b1 , . . . , bd ) \u2208 Rd+ , we define\n\u03b1\nab = (a1 b1 , . . . , ad bd ), and if b > 0, a/b = (a1 /b1 , . . . , ad /bd ), and b\u03b1 = (b\u03b1\n1 , . . . , bd ), \u03b1 \u2208 R.\nd\nFor a = (a1 , . . . , ad ) \u2208 R+ we define w(a) = a1 * * * ad and l(a) = min{a1 , . . . , ad }. Note that if a, b \u2208 Rd+\nand 0 < a \u2264 b, then w(a)/w(b) \u2264 l(a)/l(b).\n\b\n\b\nFor a, b \u2208 Rd+ , a \u2264 b, we define intervals [a, b] = x \u2208 Rd+ : a \u2264 x \u2264 b and (a, b] = x \u2208 Rd+ : a < x \u2264 b .\nP\nPb\nFor a, b \u2208 Rd+ , under\nn=a vn we will understand\nn\u2208Nd \u2229[a,b] vn if a \u2264 b and 0 otherwise, under\nRb\nP\nPb\nvn we will understand n\u2208Nd \u2229(a,b] vn if a \u2264 b and 0 otherwise, and under a v(x) dx we will understand\nn>a\nR\n[a,b] v(x) dx.\nFinally, for c \u2208 R+ , by c\u0304 we will denote (c, . . . , c) \u2208 Rd+ .\nTheorem 2.3. Let f : Rd+ \u2212\u2192 V be a bounded measurable function such that the limit\nb\n1 X\nf (t + n)\nl(b)\u2192\u221e w(b)\nn>0\n\nAt = lim\nexists for a.e. t \u2208 [0, 1]d. Then liml(b)\u2192\u221e\n\n1\nw(b)\n\nRb\n0\n\nf (x) dx also exists and is equal to\n\nR\n\n[0,1]d\n\nAt dt.\n\nProof. We may assume that b \u2208 Nd . Let (bk ) be a sequence in Nd with l(bk ) \u2192 \u221e as k \u2192 \u221e. For any\nk \u2208 N we have\nZ bk\nZ\nbk \u22121\u0304 Z\nbk \u22121\u0304\n1\n1 X\n1 X\nf (x) dx =\nf (t + n) dt =\nf (t + n) dt.\nw(bk ) 0\nw(bk ) n=0 [0,1]d\n[0,1]d w(bk ) n=0\nSince for a.e. t \u2208 [0, 1]d,\n\n1\nw(bk )\n\nPbk \u22121\u0304\n\nf (t + n) dt \u2212\u2192 At as k \u2192 \u221e, by Lemma 1.2,\nZ\nZ bk\n1\nlim\nf (x) dx =\nAt dt.\nk\u2192\u221e w(bk ) 0\n[0,1]d\n\nn=0\n\n2.4. Multiparameter uniform Ces\u00e0ro limits\nTheorem 2.4. Let f : Rd+ \u2212\u2192 V be a bounded measurable function such that the limit\nAt =\n\nb\nX\n1\nf (t + n)\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nexists for a.e. t \u2208 [0, 1]d. Then liml(b\u2212a)\u2192\u221e\n\nlim\n\n1\nw(b\u2212a)\n\nRb\na\n\nf (x) dx also exists and is equal to\n\nR\n\n[0,1]d\n\nAt dt.\n\nProof. We may assume that a, b \u2208 Nd . Let (ak ), (bk ) be sequences in Nd with ak < bk and l(bk \u2212 ak ) \u2192 \u221e\nas k \u2192 \u221e. For any k \u2208 N we have\nZ bk\nZ\nbX\nbX\nk \u22121\u0304 Z\nk \u22121\u0304\n1\n1\n1\nf (x) dx =\nf (t + n) dt =\nf (t + n) dt.\nw(bk \u2212 ak ) ak\nw(bk \u2212 ak ) n=a [0,1]d\n[0,1]d w(bk \u2212 ak ) n=a\nk\n\nd\n\nSince for a.e. t \u2208 [0, 1] ,\n\n1\nw(bk \u2212ak )\n\nk\n\nPbk \u22121\u0304\n\nf (t + n) dt \u2212\u2192 At as k \u2192 \u221e, by Lemma 1.2,\nZ\nZ bk\n1\nf (x) dx =\nAt dt.\nlim\nk\u2192\u221e w(bk \u2212 ak ) a\n[0,1]d\nk\nn=0\n\n6\n\n\f2.5. Liminf and limsup versions\nIn the case f is a real-valued function we may obtain similar results involving liminfs of limsups, even\nif the limits At do not exist:\nTheorem 2.5. If f : Rd+ \u2212\u2192 R is a bounded measurable function, then\n1\nlim inf\nl(b)\u2192\u221e w(b)\n\nZ\n\nb\n\n1\nw(b)\n\nZ\n\nb\n\n0\n\nb\n1 X\nf (t + n) dt.\n[0,1]d l(b)\u2192\u221e w(b) n>0\n\nf (x) dx \u2265\n\nZ\n\nlim inf\n\nf (x) dx \u2264\n\nZ\n\nlim sup\n\nand\nlim sup\nl(b)\u2192\u221e\n\n0\n\n[0,1]d l(b)\u2192\u221e\n\nb\n1 X\nf (t + n) dt.\nw(b) n>0\n\nProof. After adding a constant to f we may assume that f \u2265 0. We may also assume that b \u2208 Nd . Let (bk )\nbe a sequence in Nd with l(bk ) \u2192 \u221e as k \u2192 \u221e. For any k \u2208 N we have\n1\nw(bk )\n\nZ\n\nbk\n\nf (x) dx =\n\n0\n\nZ\nbk \u22121\u0304 Z\nbk \u22121\u0304\n1 X\n1 X\nf (t + n) dt.\nf (t + n) dt =\nw(bk ) n=0 [0,1]d\n[0,1]d w(bk ) n=0\n\nBy (the classical, real-valued) Fatou's theorem,\n\nlim inf\nk\u2192\u221e\n\n1\nw(bk )\n\nbk\n\nZ\n\n0\n\nf (x) dx \u2265\n\nZ\n\nlim inf\n\n[0,1]d k\u2192\u221e\n\nZ\nbk \u22121\u0304\nbk\n1 X\n1 X\nlim inf\nf (t + n) dt =\nf (t + n) dt.\nw(bk ) n=0\n[0,1]d k\u2192\u221e w(bk ) n>0\n\nAnd similarly,\nTheorem 2.6. If f : Rd+ \u2212\u2192 R is a bounded measurable function, then\n1\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\n1\nw(b\n\u2212 a)\nl(b\u2212a)\u2192\u221e\n\nZ\n\nb\n\nlim inf\n\na\n\nb\nX\n1\nf (t + n) dt.\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nf (x) dx \u2265\n\nZ\n\nf (x) dx \u2264\n\nZ\n\nlim inf\n\nand\nlim sup\n\na\n\nb\nX\n1\nf (t + n) dt.\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nlim sup\n\n3. Multiplicative method \u2013 the one-parameter case\n3.1. Standard Ces\u00e0ro limits\nTheorem 3.1. Let a bounded measurable function f : [0, \u221e) \u2212\u2192 V be such that for some c > 0, the limit\nPb\nLt = limb\u2192\u221e 1b n>0 f (nt) exists for a.e. t \u2208 [0, c]. Then Lt is a.e. constant, Lt = L \u2208 V a.e. on [0, c], and\nR\nb\nlimb\u2192\u221e 1b 0 f (x) dx exists and equals L.\n\nFollowing the referee's suggestion we will derive Theorem 3.1 from the following classical fact. The\nproof of this result which we provide for reader's convenience has an advantage of being easily extendible to\nmultiparameter case (Lemma 4.2 below).\n\nLemma 3.2. Let (vn ) be a sequence in V such that kvn+1 \u2212 vn k = O(1/n) and the Ces\u00e1ro limit L =\nPN\nlimN \u2192\u221e N1\nn=1 vn exists. Then limn\u2192\u221e vn = L.\n7\n\n\fPN\nProof. We may assume that L = 0, that is, limN \u2192\u221e N1 n=1 vn = 0. Assume that vn 6\u2192 0; let \u03b5 > 0 be\nsuch that for any N \u2208 N there exists n > N such that kvn k > \u03b5. Let \u03b1 > 0 be such that kvn+1 \u2212 vn k < \u03b1/n\nPM\n1\n\u03b52\n. Find N \u2208 N such that M\nfor all n; put \u03b4 = 16(1+\u03b5/2\u03b1)\u03b1\nn=1 vn < \u03b4 for all M > N . Find M > N such\nthat kvM k > \u03b5 and 1/M < \u03b5/4\u03b1. Let, by the Hahn-Banach theorem, \u03c6 \u2208 V \u2217 be such that |\u03c6(v)| \u2264 kvk for\nall v \u2208 V and \u03c6(vM ) = kvM k. Then for any n > M ,\n\u03c6(vn ) = \u03c6(vM ) +\n\nn\u22121\nX\n\nm=M\n\n\u03c6(vm+1 \u2212 vm ) \u2265 kvM k \u2212\n\nn\u22121\nX\n\nm=M\n\nkvm+1 \u2212 vm k > \u03b5 \u2212 (n \u2212 M )\n\n\u03b1\n,\nM\n\nwhich is \u2265 \u03b5/2 when (n\u2212M)\u03b1\n\u2264 2\u03b5 , that is, when M < n \u2264 M + \u03b5M/2\u03b1. Put K = M + \u230a\u03b5M/2\u03b1\u230b, then\nM\n\u03b5\n\u03c6(vn ) > 2 for n = M + 1, . . . , K. Thus\nK\nM\nK\nK\nK\n\u0011\n\u0011\n\u0011\n\u0011\nX\n1 X\n1\u0010 X\n1\u0010 \u0010 X\n1\u0010 X\n\u03c6\nvn \u2212\nvn \u2265\nvn \u2212 \u03b4M =\n\u03c6(vn ) \u2212 \u03b4M\nvn \u2265\nK n=1\nK\nK\nK\nn=1\nn=M+1\nn=M+1\nn=M+1\n\u0010\n\u0010\u0010\n\u0010\u0010 \u03b5\n\u0011\n\u0011\n\u0011\n\u0011\n\u03b5\n\u03b5M\n1\n1\n1 \u0011\u03b5\n1\n\u03b5\n(K \u2212 M ) \u2212 \u03b4M \u2265\n\u22121\n\u2212 \u03b4M \u2265\n\u2212\n\u2212\u03b4\n>\nK\n2\nM (1 + \u03b5/2\u03b1)\n2\u03b1\n2\n1 + \u03b5/2\u03b1 2\u03b1 M 2\n\u03b52\n\u2265\n\u2212 \u03b4 = \u03b4,\n(1 + \u03b5/2\u03b1)8\u03b1\n\nwhich contradicts the choice of N .\nProof of Theorem 3.1. Let vn =\n\n1\nnc\n\nR nc\n0\n\nf (x) dx, n \u2208 N. Then for any n,\n\nZ\nZ (n+1)c\n1 \u0011 nc\n1\ncn sup kf k c sup kf k\n1 \u0010 1\n\u2212\n+\n= O(1/n).\nf (x) dx +\nf (x) dx \u2264\nkvn+1 \u2212 vn k =\nc n+1 n 0\nn + 1 nc\ncn(n + 1)\nc(n + 1)\nAlso we have, for any N \u2208 N,\nZ nc\nZ\nZ\nN \u22121\nN \u22121\nN \u22121\nN \u22121\n1 X\n1 X 1\n1 X 1 c\n1 c 1 X\nvn =\nf (x) dx =\nf (nt) dt =\nf (nt) dt.\nN n=0\nN n=0 nc 0\nN n=0 c 0\nc 0 N n=0\nR\nP \u22121\n1 c\nf (nt) \u2212\u2192 Lt as N \u2212\u2192 \u221e for a.e. t \u2208 [0, c], by Lemma 1.2, N1 N\nn=0 vn \u2212\u2192 c 0 Lt dt.\nRc\nRb\nBy Lemma 3.2, vn \u2212\u2192 1c 0 Lt dt. On the other hand, limn\u2192\u221e vn = limb\u2192\u221e 1b 0 f (x) dx. So, L =\nR\nR\nb\nc\nlimb\u2192\u221e 1b 0 f (x) dx exists and equals 1c 0 Lt dt.\nRz\nRz\nNext, for any z \u2208 (0, c) we also have L = z1 0 Lt dt. So, for any z \u2208 [0, c], 0 Lt dt = zL, which implies\nthat Lt = L a.e. on [0, c].\n\nSince\n\n1\nN\n\nPN \u22121\nn=0\n\n3.2. Uniform Ces\u00e0ro limits\nTheorem 3.3. Let a bounded measurable function f : [0, \u221e) \u2212\u2192 V be such that for some c > 0, for a.e.\n1 Pb\nt \u2208 (0, c] the limit Lt = limb\u2212a\u2192\u221e b\u2212a\nn>a f (nt) exists. Then Lt is constant a.e. on (0, c], Lt = L \u2208 V for\nRb\n1\na.e. t \u2208 (0, c], and limb\u2212a\u2192\u221e b\u2212a a f (x) dx exists and equals L.\nPb\n1\nLemma 3.4. Let (vn ) be a bounded sequence in V such that limb\u2212a\u2192\u221e b\u2212a\nn>a vn = 0, let (bk ) be a\nsequence of positive real numbers with bk \u2192 \u221e, and let (\u03b1k ), (\u03b2k ) be sequences of real numbers such that\nP\u03b2k\n0 < \u03b2k \u2212 \u03b1k \u2264 bk for all k. Then limk\u2192\u221e b1k n>\u03b1\nvn = 0.\nk\nPb\n1\nProof. Assume that kvn k \u2264 1 for all n. Let \u03b5 > 0. Let B > 1 be such that b\u2212a\nn>a vn < \u03b5 whenever\nb \u2212 a > B. Let K be such that bk > (B + 1)/\u03b5 for all k > K. Then for any k > K, if \u03b2k \u2212 \u03b1k > B, then\nP\u03b2k\nP\u03b2k\nP\u03b2k\n\u03b2k \u2212\u03b1k +1\n1\n1\n1\n< \u03b5.\nn>\u03b1k vn \u2264 \u03b2k \u2212\u03b1k\nn>\u03b1k vn < \u03b5, and if \u03b2k \u2212 \u03b1k \u2264 B, then also bk\nn>\u03b1k vn \u2264\nbk\nbk\n8\n\n\fPb\nProof of Theorem 3.3. Since, in particular, Lt = limb\u2192\u221e 1b n>0 f (nt) for a.e. t \u2208 (0, c], we have Lt =\nconst = L for a.e. t \u2208 (0, c] by Theorem 3.1. Replacing f by f \u2212L, we may assume that L = 0. After replacing\nRb\nR b/n\nf (x) by f (cx/2), we assume that c = 2. Let a \u2265 0, b \u2265 a + 1. For any n \u2208 N, n1 a f (x) dx = a/n f (nt) dt.\nAdding these equalities for all n \u2208 (b/2, b], and taking into account that b/n < 2 for n > b/2, we get\nRb\nR 2 P\u03b2(a,b,t)\nPb\n1\n1\n\u03bb a f (x) dx = 0 n>\u03b1(a,b,t) f (nt) dt, where \u03bb =\nn>b/2 n \u2265 2 , and for every t \u2208 (0, 2], \u03b1(a, b, t) =\nmax{b/2, a/t} and \u03b2(a, b, t) = min{b, b/t}. Thus,\n1\nb\u2212a\n\nZ\n\nb\n\na\n\nf (x) dx \u2264 2\n\nZ\n\n2\n\n(3.1)\n\nfa,b (t) dt\n\n0\n\nP\u03b2(a,b,t)\n1\nwhere fa,b (t) = b\u2212a\nn>\u03b1(a,b,t) f (nt), t \u2208 (0, 2].\nWe will now show that the functions fa,b , for a \u2265 0, b \u2265 a + 1, are uniformly bounded. Let us assume\nthat supx\u2208(0,\u221e) kf (x)k \u2264 1. If a \u2264 b/2, then b \u2212 a \u2265 b/2, and since \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 b/2, for any\n1\n(b/2 + 1) \u2264 3. If a > b/2, then for any t \u2208 (0, 1/2] we have \u03b1(a, b, t) \u2265\nt \u2208 (0, 2] we have kfa,b (t)k \u2264 b/2\na/t \u2265 2a > b \u2265 \u03b2(a, b, t), so fa,b (t) = 0; and since, for any t \u2208 (0, 2], \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t, we have\n1\n((b \u2212 a)/t + 1) \u2264 3 for t \u2208 [1/2, 2].\nkfa,b (t)k \u2264 b\u2212a\nFor a.e. t \u2208 (0, 2], since \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t for all a \u2265 0, b \u2265 a + 1, by Lemma 3.4,\nlim fa,b (t) =\n\nb\u2212a\u2192\u221e\n\nHence, by Lemma 1.2,\n\nR2\n0\n\nt\n1\nlim\nt b\u2212a\u2192\u221e b \u2212 a\n\n\u03b2(a,b,t)\n\nX\n\nf (nt) = 0.\n\nn>\u03b1(a,b,t)\n\nfa,b (t) dt \u2212\u2192 0 as b \u2212 a \u2192 \u221e. So, by (3.1),\n\n1\nb\u2212a\n\nRb\na\n\nf (x) dx \u2212\u2192 0 as b \u2212 a \u2192 \u221e.\n\n3.3. Liminf and limsup versions for uniform averages\nIn the case f is a real-valued function and the limits Lt do not exist we have liminf/limsup versions of\nthe above theorems. We start with the uniform case:\nTheorem 3.5. For any bounded measurable function f : [0, \u221e) \u2212\u2192 R and any c > 0,\n1\nb\u2212a\u2192\u221e b \u2212 a\n\nZ\n\nb\n\n1\nb\u2212a\n\nZ\n\nb\n\nlim inf\n\na\n\n1\nc\n\nZ\n\nc\n\nf (x) dx \u2265\n\n1\nc\n\nZ\n\nc\n\nf (x) dx \u2264\n\nb\n1 X\nf (nt) dt\nb\u2212a\u2192\u221e b \u2212 a\nn>a\n\nlim inf\n\n0\n\nand\nlim sup\nb\u2212a\u2192\u221e\n\na\n\nlim sup\n0 b\u2212a\u2192\u221e\n\nb\n1 X\nf (nt) dt.\nb \u2212 a n>a\n\nRb\n1\nProof. We will only prove the first inequality. We may assume that f \u2265 0. Let L = lim inf b\u2212a\na f (x) dx;\nb\u2212a\u2192\u221e\nR\nbk\n1\nf (x) dx. We may\nfind a sequence of intervals [ak , bk ] with bk \u2212 ak \u2212\u2192 \u221e such that L = limk\u2192\u221e bk \u2212a\nak\nk\n\u221a\nassume that ak \u2212\u2192 \u221e (after replacing each ak by max{ak , bk }), and that bk /ak \u2212\u2192 1 (after replacing\neach interval [ak , bk ] by a suitable subinterval).\nFor any t > 0 we have\nbk /t\nb\nX\n1\n1 X\nf (nt),\nf (nt) \u2264 lim inf\nk\u2192\u221e bk /t \u2212 ak /t\nb\u2212a\u2192\u221e b \u2212 a\nn>a\n\nlim inf\n\nn>ak /t\n\nso\n1\nc\n\nZ\n\n0\n\nc\n\nZ\nbk /t\nb\nX\n1 c\n1 X\n1\nf (nt) dt.\nf (nt) dt \u2264\nlim inf\nb\u2212a\u2192\u221e b \u2212 a\nc 0 k\u2192\u221e bk /t \u2212 ak /t\nn>a\nlim inf\n\nn>ak /t\n\n9\n\n\fBy (the classical) Fatou's lemma we have\n1\nc\n\nZ\n\nc\n\nlim inf\nk\u2192\u221e\n\n0\n\nZ c\nbk /t\nbk /t\nX\nX\n1\n1\n1\nf (nt) dt \u2264 lim inf\nf (nt) dt,\nbk /t \u2212 ak /t\nc k\u2192\u221e 0 bk /t \u2212 ak /t\nn>ak /t\n\nn>ak /t\n\nand\n1\nlim inf\nc k\u2192\u221e\n\nZ\n\nc\n\n0\n\nZ c bX\nbk /t\nk /t\nX\n1\n1\n1\nf (nt) dt = lim inf\ntf (nt) dt\nbk /t \u2212 ak /t\nc k\u2192\u221e bk \u2212 ak 0\nn>ak /t\n\nn>ak /t\n\n\u2264\n\n1\n1\nlim inf\nc k\u2192\u221e bk \u2212 ak\n\nX Z\n\nn>ak /c\n\nbk /n\n\ntf (nt) dt.\nak /n\n\nFor every k \u2208 N, for each n we have\nZ bk /n\nZ bk\nZ bk\n1\n1\ntf (nt) dt = 2\nIn =\nf (x) dx\nxf (x) dx = 2 \u03b1k\nn ak\nn\nak /n\nak\nwith \u03b1k \u2208 [ak , bk ], so\nX\n\nZ\n\nIn = \u03b1k\n\nn>ak /c\n\nwhere sk =\nget\n\n1\nn>ak /c n2\n\nP\n\n1\nc\n\nRc\n\nlim inf 1\n0 b\u2212a\u2192\u221e b\u2212a\n\nPb\n\nX\n\nf (x) dx\nak\n\nn>ak /c\n\n1\n= \u03b1k sk\nn2\n\nZ\n\nbk\n\nf (x) dx,\n\nak\n\nsatisfies sk ak /c \u2212\u2192 1 as k \u2212\u2192 \u221e. Since, by our assumption, also \u03b1k /ak \u2212\u2192 1, we\n\n1\n1\nlim\nc k\u2192\u221e bk \u2212 ak\nSo,\n\nbk\n\nn>a\n\nbk /n\n\nX Z\n\nn>ak /c\n\nak /n\n\n\u03b1k sk\n1\ntf (nt) dt = lim\n*\nk\u2192\u221e\nc\nb k \u2212 ak\n\nZ\n\nbk\n\nf (x) dx = L.\n\nak\n\nf (nt) dt \u2264 L.\n\n3.4. Liminf and limsup versions for standard averages\nTheorem 3.6. For any bounded measurable function f : [0, \u221e) \u2212\u2192 R and any c > 0,\n1\nb\n\nZ\n\nb\n\n1\nlim sup\nb\u2192\u221e b\n\nZ\n\nb\n\nlim inf\nb\u2192\u221e\n\n0\n\n1\nc\n\nZ\n\nc\n\n1\nf (x) dx \u2264\nc\n\nZ\n\nc\n\nf (x) dx \u2265\n\nlim inf\n\nb\n1X\nf (nt) dt\nb n>0\n\nlim sup\n\nb\n1X\nf (nt) dt.\nb n>0\n\nb\u2192\u221e\n\n0\n\nand\n0\n\nb\u2192\u221e\n\n0\n\nR\n1 b\n\nProof. We may assume that f \u2265 0. Let L = lim inf b\u2192\u221e b 0 f (x) dx; choose a sequence (bk ), with bk \u2212\u2192 \u221e\nRb\nR bk\n1\nas k \u2212\u2192 \u221e, such that limk\u2192\u221e b1k 0 k f (x) dx = L. Then also limk\u2192\u221e bk \u2212a\nak f (x) dx = L, where ak =\nk\n\u221a\nbk , k \u2208 N. For all t > 0 we have\nlim inf\nb\u2192\u221e\n\nbk\nb\nb\nX\nX\n1X\n1\n1\n\u221a\nf (nt),\nf (nt) = lim inf\nf (nt) \u2264 lim inf\nb\u2192\u221e b \u2212\nk\u2192\u221e bk \u2212 ak\nb n>0\nb \u221a\nn>ak\nn> b\n\nand as in the proof of Theorem 3.5, by Fatou's lemma,\n1\nc\n\nZ\n\nc\n\nlim inf\n0\n\nk\u2192\u221e\n\nZ c bX\nbk\nk /t\nX\n1\n1\n1\nf (nt) dt \u2264 lim inf\ntf (nt) dt,\nbk \u2212 ak n>a\nc k\u2192\u221e bk \u2212 ak 0\nn>ak /t\n\nk\n\n10\n\n\fso it suffices to show that this last expression is \u2264 L.\n\u0003\n\u0002\n2/3\nFor every k \u2208 N put Mk = \u230abk \u230b and subdivide the interval ak , bk into Mk equal parts: put bk,j =\nak + j(bk \u2212 ak )/Mk , j = 0, . . . , Mk . As in the proof of Theorem 3.5, for any k and j we have\nbk,j\n\n1\n\u2212 bk,j\u22121\n\nbk,j /t\n\nc\n\nZ\n\nX\n\n0 n>b\nk,j\u22121 /t\n\nP\n\nwhere \u03b1k,j \u2208 [bk,j\u22121 , bk,j ] and sk,j =\nfor any k and any j we have\n\n\u03b1k,j sk,j\nbk,j \u2212 bk,j\u22121\n\ntf (nt) dt \u2264\n\n1\nn>bk,j\u22121 /c n2 .\n\nbk,j\n\nZ\n\nf (x) dx,\nt+\u03b4\nt\u22121\n\nSince the function \u03c6(t) =\n1/2\n\n\u03b1k,j sk,j <\n\n(3.2)\n\nbk,j\u22121\n\nwith \u03b4 > 0 is decreasing,\n\n2/3\n\nb + bk /\u230abk \u230b\nbk,j\nak + bk /Mk\n\u2264c\n= c k 1/2\n=: rk ,\n(bk,j\u22121 \u2212 1)/c\nak \u2212 1\nbk \u2212 1\n\nwhich tends to c as k \u2212\u2192 \u221e. Replacing \u03b1k,j sk,j by rk and taking the average of both sides of the inequality\n(3.2) for a fixed k and j = 1, . . . , Mk we get\n1\nb k \u2212 ak\n\nZ\n\nbk /t\n\nX\n\ntf (nt) dt <\n\n0 n>a /t\nk\n\nso\n1\n1\nlim inf\nc k\u2192\u221e bk \u2212 ak\n\nc\n\nZ\n\nc\n\nbk /t\n\nX\n\n0 n>a /t\nk\n\nrk\nb k \u2212 ak\n\nZ\n\nbk\n\nf (x) dx,\n\nak\n\nrk\nk\u2192\u221e c(bk \u2212 ak )\n\ntf (nt) dt \u2264 lim\n\nZ\n\nbk\n\nf (x) dx = L.\n\nak\n\n4. Multiplicative method \u2013 the multiparameter case\n4.1. Standard Ces\u00e0ro limits\nWe will use the notation introduced in subsection 2.3.\nTheorem 4.1. Let a bounded measurable function f : Rd+ \u2212\u2192 V be such that for some c \u2208 Rd+ , c > 0, the\n1 Pb\nlimit Lt = liml(b)\u2192\u221e w(b)\nn>0 f (nt) exists for a.e. t \u2208 [0, c]. Then Lt is a.e. constant, Lt = L \u2208 V a.e. on\nRb\n1\n[0, c], and liml(b)\u2192\u221e w(b) 0 f (x) dx exists and equals L.\nLet e1 = (1, 0, . . . , 0, 0), . . ., ed = (0, 0, . . . , 0, 1).\n\nP\n1\nLemma 4.2. Let (vn ) be an Nd -sequence in V such that the limit v = liml(N )\u2192\u221e w(N\nn\u2264N vn exists\n)\nd\nand for some \u03b1 > 0, for any n = (n1 , . . . , nd ) \u2208 N and for any i one has kvn+ei \u2212 vn k < \u03b1ni . Then\nliml(n)\u2192\u221e vn = v.\nP\n1\nProof. We may assume that v = 0, that is, liml(N )\u2192\u221e w(N\nn\u2264N vn = 0. Assume that vn 6\u2192 0 as l(n) \u2192 \u221e;\n)\nd\n\n\u03b5(\u03b5/4\u03b1d)\nlet \u03b5 > 0 be such that for any N \u2208 Nd there exists n > N such that kvn k > \u03b5. Put \u03b4 = 2(2d +1)(1+\u03b5/2\u03b1d)\nd.\nP\n1\nFind N \u2208 Nd such that w(M) n\u2264M vn < \u03b4 for all M > N . Find M = (M1 , . . . , Md ) > N , such that\nkvM k > \u03b5 and 1/Mi < \u03b5/4\u03b1d for all i. Let, by the Hahn-Banach theorem, \u03c6 \u2208 V \u2217 be such that |\u03c6(v)| \u2264 kvk\nfor all v \u2208 V and \u03c6(vM ) = kvM k. Then for any n = (n1 , . . . , nd ) > M ,\n\n\u03c6(vn ) = \u03c6(vM ) +\n\u2265 vM k \u2212\n\nd nX\ni \u22121\nX\n\ni=1 m=Mi\nn\u22121\nX\n\nm=M\n\n\u03c6 v(n1 ,...,ni\u22121 ,m+1,Mi+1 ,...,Md ) \u2212 v(n1 ,...,ni\u22121 ,m,Mi+1 ,...,Md )\n\n\u0001\n\nv(n1 ,...,ni\u22121 ,m+1,Mi+1 ,...,Md ) \u2212 v(n1 ,...,ni\u22121 ,m,Mi+1 ,...,Md )\n>\u03b5\u2212\n11\n\nd\nX\ni=1\n\n(ni \u2212 Mi )\n\n\u03b1\n,\nMi\n\n\f\u03b5\ni )\u03b1\nwhich is \u2265 \u03b5/2 when (ni \u2212M\nfor all i, that is, when Mi < ni \u2264 Mi + \u03b5Mi /2\u03b1d for all i. Put Ki =\n\u2264 2d\nMi\nMi + \u230a\u03b5Mi /2\u03b1d\u230b and K = (K1 , . . . , Kd ), then \u03c6(vn ) > 2\u03b5 for M \u2264 n \u2264 K and w(K) \u2264 w(M )(1 + \u03b5/2\u03b1d)d ,\nP\nQd\nw(K\u2212M ) \u2265 w(M ) i=1 (\u03b5/2\u03b1d\u22121/Mi) \u2265 w(M )(\u03b5/4\u03b1d)d . Now, we can represent n\u2264K vn as an alternating\nsum\nd\nK\n2X\n\u22121\u0010\n\u0011 X\nX\nX\nvn ,\nvn +\n\u00b1\nvn =\nj=1\n\nn\u2264K\n\nn\u2264Rj\n\nn>M\n\nwhere for each j, for every i, the ith entry of Rj is either equal to Mi or to Ki . (For d = 2, for instance,\nPK\nP\nP\nP\nP\nthe formula is n\u2264K vn =\nn\u2264(M1 ,M2 ) vn +\nn>M vn .) For each j,\nn\u2264(K1 ,M2 ) vn \u2212\nn\u2264(M1 ,K2 ) vn +\nP\nn\u2264Rj vn < w(Rj )\u03b4 \u2264 w(K)\u03b4, thus\nK\nK\n\u0011\n\u0010 X\n\u0011\n1 X\n1\n1\n1 \u0010 X\nvn \u2212 2d w(K)\u03b4 \u2265\n\u03c6\nvn \u2265\nvn \u2212 2d \u03b4 =\nw(K)\nw(K)\nw(K)\nw(K)\nn>M\n\nn\u2264K\n\nn=M+1\n\nK\nX\n\nn=M+1\n\n\u03c6(vn ) \u2212 2d \u03b4\n\n\u03b5\nw(M )(\u03b5/4\u03b1d)d\n\u03b5(\u03b5/4\u03b1d)d\nw(K \u2212 M ) \u03b5\n* \u2212 2d \u03b4 =\n\u2212 2d \u03b4 = \u03b4,\n* \u2212 2d \u03b4 \u2265\n>\nd\nw(K)\n2\nw(M )(1 + \u03b5/2\u03b1d) 2\n2(1 + \u03b5/2\u03b1d)d\nwhich contradicts the choice of N .\nProof of Theorem 4.1. Let vn =\ni \u2208 {1, . . . , d},\nkvn+ei \u2212 vn k =\n\n1\nw(nc)\n\nR nc\n0\n\nf (x) dx, n \u2208 Nd . Then for any n = (n1 , . . . , nd ) \u2208 Nd and any\n\nZ\nZ (n+ei )c\n1 \u0010\n1\n1 \u0011 nc\n1\n\u2212\nf (x) dx +\nf (x) dx\nw(c) w(n + ei ) w(n) 0\nw(n + ei ) nc\nw(c) sup kf k\nw(cn) sup kf k\n+\n= 2 sup kf k/(ni + 1).\n\u2264\nw(c)w(n)w(n + ei ) w(c)w(n + ei ))\n\nAlso we have, for any N \u2208 Nd ,\nZ nc\nZ c\nZ c\n1 X\n1 X 1\n1\n1\n1 X\n1 X\nvn =\nf (x) dx =\nf (nt) dt =\nf (nt) dt.\nw(N )\nw(N )\nw(nc) 0\nw(N )\nw(c) 0\nw(c) 0 w(N )\nn\u2264N\n\nn\u2264N\n\nn\u2264N\n\nn\u2264N\n\n1\n1\nSince w(N\nn\u2264N f (nt) \u2212\u2192 Lt as l(N ) \u2212\u2192 \u221e for a.e. t \u2208 [0, c], by Lemma 1.2, w(N )\nn\u2264N vn \u2212\u2192\n)\nR\nR\nRb\nc\nc\n1\n1\n1\nw(c) 0 Lt dt. By Lemma 4.2, vn \u2212\u2192 w(c) 0 Lt dt. On the other hand, liml(n)\u2192\u221e vn = liml(b)\u2192\u221e w(b) 0 f (x) dx.\nRb\nRc\n1\n1\nf (x) dx exists and equals w(c)\nLt dt.\nSo, L = liml(b)\u2192\u221e w(b)\n0\nRz 0\nRz\n1\nNext, for any z \u2208 (0, c), we also have L = w(z) 0 Lt dt. So, for any z \u2208 (0, c], 0 Lt dt = w(z)L, which\nimplies that Lt = L a.e. on [0, c].\n\nP\n\nP\n\n4.2. Uniform Ces\u00e0ro limits\nTheorem 4.3. Let a bounded measurable function f : Rd+ \u2212\u2192 V be such that for some c \u2208 Rd+ , c > 0, for\nPb\n1\na.e. t \u2208 (0, c] the limit Lt = limb\u2212a\u2192\u221e b\u2212a\nn>a f (nt) exists. Then Lt is constant a.e. on (0, c], Lt = L \u2208 V\nRb\n1\nfor a.e. t \u2208 (0, c], and limb\u2212a\u2192\u221e b\u2212a a f (x) dx exists and equals L.\nPb\n1\nLemma 4.4. Let (vn ) be a bounded Nd -sequence in V such that liml(b\u2212a)\u2192\u221e w(b\u2212a)\nn>a vn = 0, and\nd\nlet (bk ), (\u03b1k ) and (\u03b2k ) be sequences in R+ such that 0 < \u03b2k \u2212 \u03b1k \u2264 bk for all k and l(bk ) \u2192 \u221e. Then\nP\u03b2k\nlimk\u2192\u221e w(b1 k ) n>\u03b1\nvn = 0.\nk\nPb\n1\n< \u03b5\nProof. Assume that kvn k \u2264 1 for all n. Let \u03b5 > 0. Let B > 1 be such that w(b\u2212a)\nn>a vn\nwhenever l(b \u2212 a) > B. Let K be such that l(bk ) > (B + 1)/\u03b5 for all k > K. Then for any k > K, if\nP\u03b2k\nP\u03b2k\nvn \u2264 w(\u03b2k1\u2212\u03b1k ) n>\u03b1\nvn < \u03b5, and if l(\u03b2k \u2212 \u03b1k ) \u2264 B, then also\nl(\u03b2k \u2212 \u03b1k ) > B, then w(b1 k ) n>\u03b1\nk\nk\nP\u03b2k\nl(\u03b2k \u2212\u03b1k )+1\n1\n< \u03b5.\nn>\u03b1k vn \u2264\nw(bk )\nl(bk )\n12\n\n\f1 Pb\nProof of Theorem 4.3. Since, in particular, Lt = liml(b)\u2192\u221e w(b)\nn>0 f (nt) for a.e. t \u2208 (0, c], we have\nLt = const = L for a.e. t \u2208 (0, c] by Theorem 4.1. Replacing f by f \u2212 L, we may assume that L = 0. After\nRb\n1\nreplacing f (x) by f (cx/2), we assume that c = 2\u0304. Let a \u2265 0, b \u2265 a + 1. For any n \u2208 N, w(n)\na f (x) dx =\nR b/n\na/n f (nt) dt. Adding these equalities for all n \u2208 (b/2, b], and taking into account that b/n < 2\u0304 for n > b/2,\nRb\nR 2\u0304 P\u03b2(a,b,t)\nPb\n1\n1\nd\nwe get \u03bb a f (x) dx = 0 n>\u03b1(a,b,t) f (nt) dt, where \u03bb =\nn>b/2 w(n) \u2265 2d , and for every t \u2208 (0, 2] ,\n\u03b1(a, b, t) = max{b/2, a/t} and \u03b2(a, b, t) = min{b, b/t}. Thus,\n\n1\nw(b \u2212 a)\n\nZ\n\nb\na\n\nf (x) dx \u2264 2\n\nZ\n\n2\u0304\n\n(4.1)\n\nfa,b (t) dt\n\n0\n\nP\u03b2(a,b,t)\n1\nd\nwhere fa,b (t) = w(b\u2212a)\nn>\u03b1(a,b,t) f (nt), t \u2208 (0, 2] .\nWe will now show that the functions fa,b , for a \u2265 0, b \u2265 a + 1\u0304, are uniformly bounded. Let us assume\nthat supx\u2208(0,\u221e) kf (x)k \u2264 1. If a \u2264 b/2, then b \u2212 a \u2265 b/2, and since \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 b/2, for any\n1\nw(b/2 + 1\u0304) \u2264 3d . If a > b/2, then for any t \u2208 (0, 2]d with ti < 1/2\nt \u2208 (0, 2]d we have kfa,b (t)k \u2264 w(b/2)\nfor some i we have \u03b1(a, b, t)i \u2265 ai /ti \u2265 2ai > bi \u2265 \u03b2(a, b, t)i , so fa,b (t) = 0; and since, for any t \u2208 (0, 2]d ,\n1\n\u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t, we have kfa,b (t)k \u2264 w(b\u2212a)\nw((b \u2212 a)/t + 1\u0304) \u2264 3d for all t \u2208 [1/2, 2]d.\nd\nFor a.e. t \u2208 (0, 2] , since \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t for all a, b \u2208 Rd+ , b \u2265 a + 1\u0304, by Lemma 4.4,\nlim\n\nl(b\u2212a)\u2192\u221e\n\nHence, by Lemma 1.2,\nl(b \u2212 a) \u2192 \u221e.\n\nR 2\u0304\n0\n\nfa,b (t) =\n\n1\n1\nlim\nw(t) l(b\u2212a)\u2192\u221e w((b \u2212 a)/t)\n\n\u03b2(a,b,t)\n\nX\n\nf (nt) = 0.\n\nn>\u03b1(a,b,t)\n\nfa,b (t) dt \u2212\u2192 0 as l(b \u2212 a) \u2192 \u221e. So, by (4.1),\n\n1\nw(b\u2212a)\n\nRb\na\n\nf (x) dx \u2212\u2192 0 as\n\n4.3. Liminf and limsup versions for uniform limits\nTheorem 4.5. For any bounded measurable function f : Rd+ \u2212\u2192 R and any c \u2208 Rd+ , c > 0, one has\n1\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\n1\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\nlim inf\n\na\n\n1\nw(c)\n\nZ\n\nc\n\nf (x) dx \u2265\n\n1\nw(c)\n\nZ\n\nc\n\nf (x) dx \u2264\n\n0\n\nand\nlim sup\n\na\n\n0\n\nb\nX\n1\nf (nt) dt\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nlim inf\n\nb\nX\n1\nf (nt) dt.\nl(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nlim sup\n\nRb\n1\nw(b\u2212a)\na f (x) dx;\nl(b\u2212a)\u2192\u221e\nR\nb\nlimk\u2192\u221e w(bk1\u2212ak ) akk f (x) dx.\n\nProof. We will only prove the first inequality. We may assume that f \u2265 0. Let L = lim inf\n\nfind a sequence of intervals [ak , bk ] \u2282 Rd+ with l(bk \u2212 ak ) \u2212\u2192 \u221e such that L =\n\u221a\nWe may assume that l(ak ) \u2212\u2192 \u221e (after replacing each ak by max{ak , bk }), and that w(bk )/w(ak ) \u2212\u2192 1\n(after replacing each interval [ak , bk ] by a suitable subinterval).\nFor any t > 0 we have\nbk /t\nb\nX\nX\n1\n1\nf (nt),\nlim inf\nf (nt) \u2264 lim inf\nk\u2192\u221e w(bk /t \u2212 ak /t)\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\nn>ak /t\n\nso\n1\nw(c)\n\nZ\n\nc\n\nZ c\nbk /t\nb\nX\nX\n1\n1\n1\nf (nt) dt.\nf (nt) dt \u2264\nlim inf\nw(c) 0 k\u2192\u221e w(bk /t \u2212 ak /t)\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\nlim inf\n\n0\n\nn>ak /t\n\n13\n\n\fBy (the classical) Fatou's lemma we have\n1\nw(c)\n\nZ\n\nc\n\n1\nlim inf\nw(c) k\u2192\u221e\n\nZ\n\nc\n\n0\n\nZ c\nbk /t\nbk /t\nX\nX\n1\n1\n1\nf (nt) dt \u2264\nf (nt) dt,\nlim inf\nlim inf\nk\u2192\u221e w(bk /t \u2212 ak /t)\nw(c) k\u2192\u221e 0 w(bk /t \u2212 ak /t)\nn>ak /t\n\nn>ak /t\n\nand\n\n0\n\nZ c bX\nbk /t\nk /t\nX\n1\n1\n1\nf (nt) dt =\ntf (nt) dt\nlim inf\nw(bk /t \u2212 ak /t)\nw(c) k\u2192\u221e w(bk \u2212 ak ) 0\nn>ak /t\n\nn>ak /t\n\nX Z bk /n\n1\n1\n\u2264\nlim inf\ntf (nt) dt.\nw(c) k\u2192\u221e w(bk \u2212 ak )\nak /n\nn>ak /c\n\nFor every k \u2208 N, for each n we have\nIn =\n\nZ\n\nbk /n\n\nak /n\n\n1\ntf (nt) dt =\nw(n2 )\n\nZ\n\nbk\n\nak\n\n1\nw(\u03b1k )\nxf (x) dx =\nw(n2 )\n\nZ\n\nbk\n\nf (x) dx\n\nak\n\nwith \u03b1k \u2208 [ak , bk ], so\nX\n\nIn = w(\u03b1k )\n\nZ\n\nbk\n\nf (x) dx\n\nak\n\nn>ak /c\n\n1\n= w(\u03b1k )sk\nw(n2 )\n\nX\n\nn>ak /c\n\nP\n1\nwhere sk =\nn>ak /c w(n2 ) satisfies sk w(ak /c) \u2212\u2192 1 as k \u2212\u2192 \u221e.\nw(\u03b1k )/w(ak ) \u2212\u2192 1, we get\n\nZ\n\nbk\n\nf (x) dx,\n\nak\n\nSince, by our assumption, also\n\nZ bk\nX Z bk /n\n1\n1\nw(\u03b1k )sk\n1\nlim\n*\nf (x) dx = L.\ntf (nt) dt = lim\nk\u2192\u221e\nw(c) k\u2192\u221e w(bk \u2212 ak )\nw(c)\nw(bk \u2212 ak ) ak\nak /n\nn>ak /c\n\nSo,\n\n1\nw(c)\n\nRc\n\n1\nlim inf w(b\u2212a)\n0 l(b\u2212a)\u2192\u221e\n\nPb\n\nn>a\n\nf (nt) dt \u2264 L.\n\n4.4. Liminf and limsup versions for standard averages\nTheorem 4.6. For any bounded measurable function f : Rd+ \u2212\u2192 R and any c \u2208 Rd+ , c > 0, one has\n1\nlim inf\nl(b)\u2192\u221e w(b)\n\nZ\n\nb\n\n1\nw(b)\n\nZ\n\nb\n\n0\n\n1\nf (x) dx \u2265\nw(c)\n\nZ\n\nc\n\n1\nw(c)\n\nZ\n\nc\n\nb\n1 X\nf (nt) dt\nl(b)\u2192\u221e w(b)\nn>0\n\nlim inf\n\n0\n\nand\nlim sup\nl(b)\u2192\u221e\n\n0\n\nf (x) dx \u2264\n\n0\n\nlim sup\nl(b)\u2192\u221e\n\nb\n1 X\nf (nt) dt.\nw(b) n>0\n\nRb\nProof. We may assume that f \u2265 0. Let L = lim inf b\u2192\u221e 1b 0 f (x) dx; choose a sequence (bk ) in Rd+ , with\nRb\nRb\nl(bk ) \u2212\u2192 \u221e as k \u2212\u2192 \u221e, such that limk\u2192\u221e w(b1 k ) 0 k f (x) dx = L. Then also limk\u2192\u221e w(bk1\u2212ak ) akk f (x) dx =\n\u221a\nL, where ak = bk , k \u2208 N. For all t > 0 we have\nbk\nb\nb\nX\nX\n1 X\n1\n1\n\u221a\nf (nt) = lim inf\nf (nt) \u2264 lim inf\nf (nt),\nk\u2192\u221e w(bk \u2212 ak )\nl(b)\u2192\u221e w(b)\nl(b)\u2192\u221e w(b \u2212\nb) \u221a\nn>a\nn>0\n\nlim inf\n\nn> b\n\n14\n\nk\n\n\fand as in the proof of Theorem 4.5, by Fatou's lemma,\nZ c\nZ c bX\nbk\nk /t\nX\n1\n1\n1\n1\ntf (nt) dt,\nlim inf\nf (nt) dt \u2264\nlim inf\nw(c) 0 k\u2192\u221e w(bk \u2212 ak ) n>a\nw(c) k\u2192\u221e w(bk \u2212 ak ) 0\nn>ak /t\n\nk\n\nso it suffices to show that this last expression is \u2264 L.\n\u0003\n\u0002\n2/3\nFor every k \u2208 N put Mk = \u230abk \u230b and subdivide the interval ak , bk into w(Mk ) equal parts: put\nbk,j = ak + j(bk \u2212 ak )/Mk , j \u2208 ({0} \u222a N)d \u2229 [0, Mk ]. As in the proof of Theorem 4.5, for any k and j we have\nZ c bX\nZ bk,j\nk,j /t\n1\nw(\u03b1k,j )sk,j\ntf (nt) dt \u2264\nf (x) dx,\n(4.2)\nw(bk,j \u2212 bk,j\u22121 ) 0\nw(bk,j \u2212 bk,j\u22121 ) bk,j\u22121\nn>bk,j\u22121 /t\nP\n1\nwhere \u03b1k,j \u2208 [bk,j\u22121 , bk,j ] and sk,j = n>bk,j\u22121 /c w(n\n2 ) . For any k and any j,\n1/2\n\nw(\u03b1k,j )sk,j <\n\n2/3\n\nw(bk + bk /\u230abk \u230b)\nw(bk,j )\nw(ak + bk /Mk )\n\u2264 w(c)\n= w(c)\n=: rk ,\n1/2\nw(bk,j\u22121 \u2212 1\u0304)/w(c)\nw(ak \u2212 1\u0304)\nw(b \u2212 1\u0304)\nk\n\nwhich tends to w(c) as k \u2212\u2192 \u221e. Replacing w(\u03b1k,j )sk,j by rk and taking the average of both sides of the\ninequality (4.2) for a fixed k and j = 1, . . . , Mk we get\nZ c bX\nZ bk\nk /t\nrk\n1\ntf (nt) dt <\nf (x) dx,\nw(bk \u2212 ak ) 0\nw(bk \u2212 ak ) ak\nn>ak /t\n\nso\n1\n1\nlim inf\nw(c) k\u2192\u221e w(bk \u2212 ak )\n\nZ\n\nc\n\nbk /t\n\nX\n\n0 n>a /t\nk\n\nrk\nk\u2192\u221e w(c)w(bk \u2212 ak )\n\ntf (nt) dt \u2264 lim\n\nZ\n\nbk\n\nf (x) dx = L.\n\nak\n\n4.5. A lim-limsup version for standard averages\nPb\n1\nIt turns out that if the limits liml(b)\u2192\u221e w(b)\nn>0 f (nt), t > 0, do not exist, but, for some L \u2208 V , one\nP\nb\n1\nd\nhas limt\u21920+ lim supl(b)\u2192\u221e w(b)\nn>0 f (nt)\u2212L = 0, we still have the result. For a function h: (0, r) \u2212\u2192 V ,\n\nr > 0, we write ess-limt\u21920+ h(t) = h0 if for any \u03b5 > 0 there exists \u03b4 \u2208 Rd+ such that kh(t) \u2212 h0 k < \u03b5 for a.e.\nt \u2208 (0, \u03b4].\nTheorem 4.7. Let f : Rd+ \u2212\u2192 V be a bounded measurable function satisfying, for some L \u2208 V ,\nb\n1 X\ness-lim lim sup\nf (nt) \u2212 L = 0.\nt\u21920+ l(b)\u2192\u221e w(b)\nn>0\n\nThen liml(b)\u2192\u221e\n\n1\nw(b)\n\nRb\n0\n\nf (x) dx = L.\n\nLemma 4.8. Let (vn ) be a bounded Nd -sequence in V and let (bk ), (\u03b2k ) be sequences in Rd+ with 0 <\nP\u03b2k\nPb\n1\n\u03b2k \u2264 bk for all k and l(bk ) \u2192 \u221e. Then lim supk\u2192\u221e w(b1 k ) n>0\nvn \u2264 lim supl(b)\u2192\u221e w(b)\nn>0 vn , and\nP\u03b2k\nPb\n1\n1\nd\nlim supk\u2192\u221e w(bk ) n>bk /2 vn \u2264 2 lim supl(b)\u2192\u221e w(b) n>0 vn .\n1 Pb\nProof. Assume that kvn k \u2264 1 for all n. Let s = lim supl(b)\u2192\u221e w(b)\nn>0 vn . Let \u03b5 > 0, and let B > 1 be\nPb\n1\nsuch that w(b) n>0 vn < s + \u03b5 whenever l(b) > B. Let K be such that l(bk ) > B/\u03b5 for all k > K. Then\nP\u03b2k\nP\u03b2k\n1\nvn \u2264 w(\u03b2\nfor any k > K, if l(\u03b2k ) > B, then w(b1 k ) n>0\nn>0 vn < s + \u03b5, and if l(\u03b2k ) \u2264 B, then also\nk)\nP\u03b2k\nP\u03b2k\nl(\u03b2k )\nw(\u03b2k )\n1\n1\nn>0 vn \u2264 w(bk ) \u2264 l(bk ) < \u03b5 \u2264 s + \u03b5. So, lim supk\u2192\u221e w(bk )\nn>0 vn \u2264 s.\nw(bk )\nFor any S \u2286 {1, . . . , d} and a = (a1 , . . . , ad ), b = (b1 , . . . , bd ) \u2208 Rd , let \u03c3S (a, b) = (c1 , . . . , cd ) where\nPb\nfor each i, ci = ai if i \u2208 S and ci = bi if i 6\u2208 S. Then for any a, b \u2208 Rd+ with a \u2264 b we have n>a vn =\nP\u03c3S (a,b)\nP\nP\u03c3S (bk /2,\u03b2k )\n|S|\nvn . Since, for any S \u2286 {1, . . . , d}, lim supk\u2192\u221e w(b1 k ) n>0\nvn \u2264 s, we\nS\u2286{1,...,d} (\u22121)\nn>0\nP\u03b2k\n1\nalso get that lim supk\u2192\u221e w(bk ) n>bk /2 vn \u2264 2d s.\n15\n\n\fProof of Theorem 4.7. We may assume that L = 0. Fix \u03b5 > 0. Find \u03b4 \u2208 Rd+ , \u03b4 > 0, such\nPb\nthat lim supb\u2192\u221e 1b n>0 f (nt) < \u03b5 for a.e. t \u2208 [0, \u03b4], and define g(x) = f 2\u03b4 x), x \u2208 Rd+ . Then\nP\nb\nlim supb\u2192\u221e 1b n>0 g(nt) < \u03b5 for a.e. t \u2208 [0, 2]d .\nRb\nR b/n\n1\nLet b \u2208 Rd+ , b \u2265 1\u0304. For any n \u2208 Nd , w(n)\ng(x) dx = 0 g(nt) dt. Adding these equalities for all\n0\nRb\nR 2 P\u03b2(b,t)\nn \u2208 (b/2, b], and taking into account that b/n < 2\u0304 for n > b/2, we get \u03bb 0 g(x) dx = 0 n>b/2 g(nt) dt,\nP\n1\n\u2265 21d , and for every t \u2208 (0, 2]d , \u03b2(b, t) = min{b, b/t}. Thus,\nwhere \u03bb = bn>b/2 w(n)\n1\nw(b)\n\nZ\n\nb\n\ng(x) dx \u2264 2\n\n0\n\nd\n\nZ\n\n2\u0304\n\n1 P\u03b2(b,t)\nd\nwhere gb (t) = w(b)\nn>b/2 g(nt), t \u2208 (0, 2] .\nLet us assume that supx\u2208Rd kg(x)k = supx\u2208Rd kf (x)k \u2264 1.\n+\n\n+\n\n1\nw(b) w(\u03b2(b, t))\n\nd\n\n(4.3)\n\ngb (t) dt ,\n\n0\n\nThen for any b \u2265 1\u0304, for every\n\nt \u2208 (0, 2] we have kgb (t)k \u2264\n\u2264 1, so the functions gb are uniformly bounded. For a.e.\nd\nt \u2208 (0, 2] , since \u03b2(b, t) \u2264 b, by Lemma 4.8 we have lim supl(b)\u2192\u221e kgb (t)k \u2264 2d \u03b5. Hence, by Lemma 1.1,\nRb\nR 2\u0304\nlim supb\u2192\u221e 0 gb (t) dt \u2264 22d \u03b5. So, by (4.3), lim supb\u2192\u221e 1b 0 g(x) dx \u2264 23d \u03b5. Since for any b \u2208 R+ ,\nRb\nR b\u03b4/2\nRb\n1\n1\n1\nb > 0, we have w(b)\ng(x) dx = w(b\u03b4/2)\nf (x) dx, we get lim supl(b)\u2192\u221e w(b)\nf (x) dx \u2264 23d \u03b5. Since\n0\n0\n0\nR\nb\n1\nf (x) dx = 0.\nthis is true for any positive \u03b5, liml(b)\u2192\u221e w(b)\n0\n4.6. A lim-limsup version for uniform averages\nTheorem 4.9. Let f : Rd+ \u2212\u2192 V be a bounded measurable function satisfying, for some L \u2208 V ,\ness-lim lim sup\n\nt\u21920+ l(b\u2212a)\u2192\u221e\n\nThen liml(b\u2212a)\u2192\u221e\n\n1\nw(b\u2212a)\n\nRb\na\n\nb\nX\n1\nf (nt) \u2212 L = 0.\nw(b \u2212 a) n>a\n\nf (x) dx = L.\n\nLemma 4.10. Let (vn ) be a bounded Nd -sequence in V and let (bk ), (\u03b1k ), and (\u03b2k ) be sequences in\nP k\nRd+ such that 0 < \u03b2k \u2212 \u03b1k \u2264 bk for all k and l(bk ) \u2192 \u221e. Then lim supk\u2192\u221e w(b1 k ) \u03b2n>\u03b1\nvn \u2264\nk\nPb\n1\nlim supl(b\u2212a)\u2192\u221e w(b\u2212a) n>a vn .\nPb\n1\nProof. Assume that kvn k \u2264 1 for all n. Let s = lim supl(b\u2212a)\u2192\u221e w(b\u2212a)\nn>a vn . Let \u03b5 > 0. Let B > 1 be\nPb\n1\nsuch that w(b\u2212a) n>a vn < s+\u03b5 whenever l(b\u2212a) > B. Let K be such that l(bk ) > (B+1)/\u03b5 for all k > K.\nP\u03b2k\nP\u03b2k\nvn \u2264 w(\u03b2k1\u2212\u03b1k ) n>\u03b1\nvn < s + \u03b5, and if\nThen for any k > K, if l(\u03b2k \u2212 \u03b1k ) > B, then w(b1 k ) n>\u03b1\nk\nk\nP\u03b2k\nP\u03b2k\nl(\u03b2k \u2212\u03b1k )+1\n1\nl(\u03b2k \u2212\u03b1k ) \u2264 B, then also w(bk ) n>\u03b1k vn \u2264\n< \u03b5 \u2264 s+\u03b5. So, lim supk\u2192\u221e w(b1 k ) n>\u03b1\nvn \u2264 s.\nl(bk )\nk\nProof of Theorem 4.9. We may assume that L = 0. Fix \u03b5 > 0. Find \u03b4 \u2208 Rd+ , \u03b4 > 0 such that\n\u0001\nPb\n1\nlim supl(b\u2212a)\u2192\u221e w(b\u2212a)\n< \u03b5 for a.e. t \u2208 [0, \u03b4], and define g(x) = f 2\u03b4 x , x \u2208 Rd+ . Then\nn>a f (nt)\nPb\n1\nd\nlim supl(b\u2212a)\u2192\u221e w(b\u2212a)\nn>a g(nt) < \u03b5 for a.e. t \u2208 [0, 2] .\nRb\nR b/n\n1\nLet a, b \u2208 Rd+ , a \u2265 0, b \u2265 a + 1\u0304. For any n \u2208 Nd , w(n)\ng(x) dx = a/n g(nt) dt. Adding these\na\nRb\nequalities for all n \u2208 (b/2, b], and taking into account that b/n < 2\u0304 for n > b/2, we get \u03bb a g(x) dx =\nR 2\u0304 P\u03b2(a,b,t)\nPb\n1\n1\nd\nn>b/2 w(n) \u2265 2d , and for every t \u2208 (0, 2] , \u03b1(a, b, t) = max{b/2, a/t}\nn>\u03b1(a,b,t) g(nt) dt, where \u03bb =\n0\nand \u03b2(a, b, t) = min{b, b/t}. Thus,\n1\nw(b \u2212 a)\n\nZ\n\na\n\nb\n\ng(x) dx \u2264 2d\n16\n\nZ\n\n0\n\n2\u0304\n\nga,b (t) dt\n\n(4.4)\n\n\fP\u03b2(a,b,t)\n1\nd\nwhere ga,b (t) = w(b\u2212a)\nn>\u03b1(a,b,t) g(nt), t \u2208 (0, 2] .\nWe will now show that the functions ga,b , for a, b \u2208 Rd+ , b \u2265 a+ 1, are uniformly bounded. Let us assume\nthat supx\u2208Rd+ kg(x)k = supx\u2208Rd+ kf (x)k \u2264 1. If a \u2264 b/2, then b\u2212a \u2265 b/2, and since \u03b2(a, b, t)\u2212\u03b1(a, b, t) \u2264 b/2,\n\n1\nw(b/2 + 1\u0304) \u2264 3d . If a > b/2, then for any t = (t1 , . . . , td ) \u2208 (0, 2]d\nfor any t \u2208 (0, 2]d we have kga,b (t)k \u2264 w(b/2)\nwith ti < 1/2 for some i we have \u03b1(a, b, t)i \u2265 ai /ti \u2265 2ai > bi \u2265 \u03b2(a, b, t)i , so fa,b (t) = 0; and since, for\n1\nw((b \u2212 a)/t + 1\u0304) \u2264 3d for all\nany t \u2208 (0, 2]d , \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t, we have kfa,b (t)k \u2264 w(b\u2212a)\nt \u2208 [1/2, 2]d.\nFor a.e. t \u2208 (0, 2]d , since \u03b2(a, b, t) \u2212 \u03b1(a, b, t) \u2264 (b \u2212 a)/t for all a, b \u2208 Rd+ , b \u2265 a + 1\u0304, by Lemma 4.10,\n\n1\n1\nlim sup kga,b (t)k \u2264\nlim sup\nw(t)\nw((b\n\u2212\na)/t)\nl(b\u2212a)\u2192\u221e\nl(b\u2212a)\u2192\u221e\n\n\u03b2(a,b,t)\n\nX\n\ng(nt) <\n\nn>\u03b1(a,b,t)\n\n\u03b5\n.\nw(t)\n\nSince also lim supl(b\u2212a)\u2192\u221e kga,b (t)k \u2264 3d , we obtain that\nZ\n\n2\u0304\n\nlim sup kga,b (t)k dt \u2264\n\n0 l(b\u2212a)\u2192\u221e\n\nZ\n\n3d dt +\n\n[0,2]d \\[\u03b5,2]d\n\nZ\n\n[\u03b5,2]d\n\n\u03b5\ndt = c\u03b5 ,\nw(t)\n\nR 2\u0304\nwhere c\u03b5 \u2264 d\u03b52d\u22121 3d + \u03b5(log(2/\u03b5))d . Hence, by Lemma 1.1, lim supl(b\u2212a)\u2192\u221e 0 ga,b (t) dt \u2264 c\u03b5 . So,\nRb\nRb\n1\n1\nby (4.4), lim supl(b\u2212a)\u2192\u221e w(b\u2212a)\ng(x) dx \u2264 2d c\u03b5 . Since for any 0 < a < b, w(b\u2212a)\ng(x) dx =\na\na\nR\nR\nb\u03b4/2\nb\n1\n1\n\u2264 2d c\u03b5 . Since this is true for any\nw(b\u03b4/2\u2212a\u03b4/2) a\u03b4/2 f (x) dx, we get lim supl(b\u2212a)\u2192\u221e w(b\u2212a) a f (x) dx\nR\nb\n1\npositive \u03b5 and c\u03b5 \u2192 0 as \u03b5 \u2192 0+ , we obtain that liml(b\u2212a)\u2192\u221e w(b\u2212a)\na f (x) dx = 0.\n5. Two-sided limits and limits with respect to F\u00f8lner sequences\n5.1. Two-sided multiparameter limits\nWe will now pass from the (Nd , Rd+ ) setup to the (Zd , Rd ) setup. We adapt the notation introduced\nabove to this new situation: for a, b \u2208 Rd , a = (a1 , . . . , ad ), b = (b1 , . . . , bd ), we write a \u2264 b if ai \u2264 bi for all\ni = 1, . . . , d, and a < b if ai < bi for all i. When writing l(b) or w(b), we will always assume that b > 0. As\nRb\nR\nP\nPb\nbefore, under n>a vn we understand\nn\u2208Zd vn , and under a v(x) dx we understand a\u2264x\u2264b v(x) dx.\na<n\u2264b\n\nTheorem 2.3 clearly implies:\n\nTheorem 5.1. Let f : Rd \u2212\u2192 V be a bounded measurable function such that the limit\nb\nX\n1\nf (t + n)\nl(b)\u2192\u221e w(2b)\n\nAt = lim\n\nn>\u2212b\n\nexists for a.e. t \u2208 [0, 1]d. Then liml(b)\u2192\u221e\n\n1\nw(2b)\n\nRb\n\n\u2212b\n\nf (x) dx also exists and is equal to\n\nTheorem 2.4 can also be easily adapted to the Rd case:\n\nR\n\n[0,1]d\n\nAt dt.\n\nTheorem 5.2. Let f : Rd \u2212\u2192 V be a bounded measurable function such that the limit\nAt =\n\nb\nX\n1\nf (t + n)\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nexists for a.e. t \u2208 [0, 1]d. Then liml(b\u2212a)\u2192\u221e\n\nlim\n\n1\nw(b\u2212a)\n\nRb\na\n\nf (x) dx also exists and is equal to\n\nThe derivation of Theorem 5.2 from Theorem 2.4 is based on the following fact:\n17\n\nR\n\n[0,1]d\n\nAt dt.\n\n\fLemma 5.3. For any s = (s1 , . . . , sd ) \u2208 {+, \u2212}d = S, let Rds = Rs1 \u00d7 . . . \u00d7 Rsd . Let f : Rd \u2212\u2192 V be a\nRb\n1\nbounded function and let L be an element of V such that for any s \u2208 S, lim a,b\u2208Rs w(b\u2212a)\nf (x) dx = L.\na\nl(b\u2212a)\u2192\u221e\nRb\n1\nThen liml(b\u2212a)\u2192\u221e w(b\u2212a)\nf (x) dx = L.\na\n\nProof. We will assume that sup |f | \u2264 1 and that L = 0. Given \u03b5 > 0, find l \u2208 R such that\nRb\n1\nd\nw(b\u2212a) a f (x) dx < \u03b5 whenever a, b \u2208 Rs for some s \u2208 S and l(b \u2212 a) \u2265 l.\nNow let a, b \u2208 Rd , b > a and l(b \u2212 a) > l/\u03b5. Let a = (a1 , . . . , ad ) and b = (b1 , . . . , bd ). For each i\nsuch that ai < 0 < bi , partition the interval [ai , bi ] into subintervals [ai , 0] and [0, bi ], and thus partition\nthe d-dimensional interval [a, b] = {x : a \u2264 x \u2264 b} into \u2264 2d d-dimensional subintervals [pRj , qj ] such that\nqj\n1\nfor each j, [pj , qj ] \u2286 Rds for some s \u2208 S. Then, for each j, if l(qj \u2212 pj ) \u2265 l, then w(b\u2212a)\nf (x) dx \u2264\npj\nR\nR\nqj\nqj\nl(qj \u2212pj )\nw(qj \u2212pj )\nl\n1\n1\nw(qj \u2212pj ) pj f (x) dx < \u03b5, and if l(qj \u2212 pj ) < l, then w(b\u2212a) pj f (x) dx \u2264 w(b\u2212a) \u2264 l(b\u2212a) < l/\u03b5 = \u03b5;\nR\nR\nP\nb\nqj\n1\n1\nd\nso, w(b\u2212a)\nj w(b\u2212a) pj f (x) dx < 2 \u03b5.\na f (x) dx =\nIn the case f is a real-valued function, the same proof gives a stronger result:\n\nLemma 5.4. For any bounded measurable function f : Rd \u2212\u2192 R,\n\uf8f1\n\uf8fc\nZ b\nZ b\n\uf8f2\n\uf8fd\n1\n1\nf (x) dx = min\nlim inf\nf (x) dx\nlim inf\ns\u2208S \uf8f3 a,b\u2208Rs\n\uf8fe\nw(b \u2212 a) a\nl(b\u2212a)\u2192\u221e w(b \u2212 a) a\nl(b\u2212a)\u2192\u221e\n\nand\n\nlim sup\nl(b\u2212a)\u2192\u221e\n\n1\nw(b \u2212 a)\n\nb\n\nZ\n\nf (x) dx = max\ns\u2208S\n\na\n\n\uf8f1\n\uf8f4\n\uf8f2\n\uf8f4\n\uf8f3\n\nlim sup\na,b\u2208Rs\nl(b\u2212a)\u2192\u221e\n\n1\nw(b \u2212 a)\n\nZ\n\na\n\nb\n\n\uf8fc\n\uf8f4\n\uf8fd\nf (x) dx .\n\uf8f4\n\uf8fe\n\nLemma 5.4 allows us to derive the \"two-sided\" version of Theorems 2.5 and 2.6:\nTheorem 5.5. If f : Rd \u2212\u2192 R is a bounded measurable function, then\nb\n\n1\nl(b)\u2192\u221e w(2b)\n\nZ\n\n1\nlim sup\nl(b\u2212a)\u2192\u221e w(2b)\n\nZ\n\nlim inf\n\n\u2212b\n\nb\nX\n1\nf (t + n) dt\n[0,1]d l(b)\u2192\u221e w(2b)\n\nf (x) dx \u2265\n\nZ\n\nlim inf\n\nf (x) dx \u2264\n\nZ\n\nlim sup\n\nn>\u2212b\n\nand\nb\n\n\u2212b\n\n[0,1]d l(b)\u2192\u221e\n\nb\nX\n1\nf (t + n) dt.\nw(2b)\nn>\u2212b\n\nd\n\nTheorem 5.6. If f : R \u2212\u2192 R is a bounded measurable function, then\n1\nlim inf\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\n1\nlim sup\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\na\n\nb\nX\n1\nlim inf\nf (t + n) dt\nf (x) dx \u2265\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nZ\n\nand\na\n\nf (x) dx \u2264\n\nb\nX\n1\nf (t + n) dt.\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nZ\n\nlim sup\n\nFor a, b \u2208 Rd with a < 0 < b, let us call \"the interval\" (a, b) = {t \u2208 Rd : a < t < b} a P -neighborhood of\n0 in Rd , and for b \u2208 Rd+ with b > 0 let us call \"the interval\" [0, b) = {t \u2208 Rd+ : t < b} a P -neighborhood of 0\nin Rd+ .\nThe \"multiplicative\" theorems for Zd and Rd -actions take the following form:\nTheorem 5.7. Let a bounded measurable function fP\n: Rd \u2212\u2192 V be such that for some P-neighborhood of 0\nb\n1\nd\nin R , for a.e. t \u2208 P the limit Lt = liml(b)\u2192\u221e w(2b) n>\u2212b f (nt) exists. Then Lt = const = L a.e. on P\nR\nb\n1\nf (x) dx = L.\nand liml(b)\u2192\u221e w(2b)\n\u2212b\n18\n\n\fd\nTheorem 5.8. Let a bounded measurable function f : RP\n\u2212\u2192 V be such that for some P-neighborhood of 0\nb\n1\nd\nin R , for a.e. t \u2208 P the limit Lt = liml(b\u2212a)\u2192\u221e w(b\u2212a) n>a f (nt) exists. Then Lt = const = L a.e. on P\nR\nb\n1\nand liml(b\u2212a)\u2192\u221e w(b\u2212a)\na f (x) dx = L.\n\nTheorem 5.9. For any bounded measurable function f : Rd \u2212\u2192 R and any c \u2208 Rd+ , c > 0,\n1\nlim inf\nl(b)\u2192\u221e w(2b)\n\nZ\n\nb\n\n1\nw(2b)\n\nZ\n\nb\n\nZ\n\nc\n\nZ\n\nc\n\n1\nf (x) dx \u2265\nw(c)\n\u2212b\n\nb\nX\n1\nf (nt) dt\nl(b)\u2192\u221e w(2b)\n\nlim inf\n\n0\n\nn>\u2212b\n\nand\nlim sup\nl(b)\u2192\u221e\n\n\u2212b\n\nf (x) dx \u2264\n\n1\nw(c)\n\nlim sup\nl(b)\u2192\u221e\n\n0\n\nb\nX\n1\nf (nt) dt.\nw(2b)\nn>\u2212b\n\nTheorem 5.10. For any bounded measurable function f : Rd \u2212\u2192 R and any c \u2208 Rd+ , c > 0,\n1\nlim inf\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\n1\nlim sup\nw(b\n\u2212 a)\nl(b\u2212a)\u2192\u221e\n\nZ\n\nb\n\na\n\n1\nf (x) dx \u2265\nw(c)\n\nZ\n\nc\n\nb\nX\n1\nlim inf\nf (nt) dt\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\n1\nf (x) dx \u2264\nw(c)\n\nZ\n\nc\n\nb\nX\n1\nlim sup\nf (nt) dt.\nl(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\n0\n\nand\n\na\n\n0\n\nTheorem 5.11. Let f : Rd \u2212\u2192 V be a bounded measurable function satisfying\nb\nX\n1\ness-lim\nf (nt) = 0.\nlim sup\nt\u21920+ l(b)\u2192\u221e w(2b)\nn>\u2212b\n\nThen liml(b)\u2192\u221e\n\n1\nw(2b)\n\nRb\n\n\u2212b\n\nf (x) dx = 0.\n\nTheorem 5.12. Let f : Rd \u2212\u2192 V be a bounded measurable function satisfying, for some L \u2208 V ,\ness-lim lim sup\n\nt\u21920+ l(b\u2212a)\u2192\u221e\n\nThen liml(b\u2212a)\u2192\u221e\n\n1\nw(b\u2212a)\n\nRb\na\n\nb\nX\n1\nf (nt) \u2212 L = 0.\nw(b \u2212 a) n>a\n\nf (x) dx = L.\n\n5.2. Limits with respect to an arbitrary F\u00f8lner sequence\nLet us denote by w the standard Lebesgue measure on Rd (this agrees with the notation used in the\nprevious sections). A F\u00f8lner sequence in Rd is a sequence (\u03a6N )\u221e\nN =1 of subsets of finite mesure such that for\n\u25b3(\u03a6N +y))\n\u2212\u2192\n0\nas\nN\n\u2192\n\u221e.\nany y \u2208 Rd , w(\u03a6Nw(\u03a6\nN)\nLemma 5.13. Let f : Rd \u2212\u2192 V be a bounded measurable function with the property that liml(b\u2212a)\u2192\u221e\nRb\nR\n1\n1\nd\nw(b\u2212a) a f (x) dx = L \u2208 V . Then for any F\u00f8lner sequence (\u03a6N ) in R , limN \u2192\u221e w(\u03a6N ) \u03a6N f (x) dx = L.\n19\n\n\fProof.\nWe will assume that L = 0 and that sup |f | \u2264 1. Let\ninterval\n\b\nR \u03b5 > 0, and let Q be a d-dimensional\n1\nd\nx \u2208 Rd : 0 \u2264 x \u2264 c with l(c) large enough so that w(Q)\nf\n(x)\ndx\n<\n\u03b5\nfor\nany\ny\n\u2208\nR\n.\nLet\n(\u03a6\nN ) be\nQ+y\nd\na F\u00f8lner sequence in R . For any y \u2208 Q we have\nZ\nZ\nZ\nZ\n\u0011\n1\n1 \u0010\nf (x) dx \u2264\nf (x + y) dx \u2212\n2\u2265\nf (x) dx +\nf (x) dx\nw(\u03a6N ) \u03a6N\nw(\u03a6N )\n\u03a6N\n(\u03a6N +y)\\\u03a6N\n\u03a6N \\(\u03a6N +y)\nw(\u03a6N \u25b3(\u03a6N + y))\n\u2212\u2192 0 as N \u2192 \u221e.\n\u2264\nw(\u03a6N )\nSo, by Lemma 1.2,\n1\nw(Q)w(\u03a6N )\nBut\n\n1\nw(Q)w(\u03a6N )\n\n1\nw(Q)w(\u03a6N )\n\nR R\n\nQ \u03a6N\n\nZ Z\nQ\n\n\u03a6N\n\nZ \u0010Z\nQ\n\nf (x) dx dy =\n\nf (x + y) dx \u2212\n\n\u03a6N\n\n1\nw(\u03a6N )\n\nR\n\n\u03a6N\n\n=\n1\nw(\u03a6N )\n\nfor all N . Hence, lim supN \u2192\u221e\n\nR\n\n\u03a6N\n\n\u03a6N\n\n\u0011\nf (x) dx dy \u2212\u2192 0 as N \u2192 \u221e.\n\nf (x) dx for all N , whereas\n\n1\nw(\u03a6N )\n\nf (x + y) dx dy \u2264\n\nZ\n\nZ\n\n\u03a6N\n\n1\nw(Q)\nZ\n\n1\nw(\u03a6N )\n\nZ\n\nf (x + y) dy dx\nZ\nZ\n1\n1\n\u03b5 dx = \u03b5\nf (y) dy dx \u2264\nw(Q) Q\u2212x\nw(\u03a6N ) \u03a6N\nQ\n\n\u03a6N\n\nf (x) dx < \u03b5.\n\nLemma 5.13 allows to strengthen Theorems 5.2, 5.8, and 5.12:\nTheorem 5.14. Let f : Rd \u2212\u2192 V be a bounded measurable function such that the limit\nAt =\nexists for a.e. t \u2208 [0, 1]d.\nR\n[0,1]d At dt.\n\nb\nX\n1\nf (t + n)\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nlim\n\nThen for any F\u00f8lner sequence (\u03a6N ) in Rd , limN \u2192\u221e\n\n1\nw(\u03a6N )\n\nR\n\n\u03a6N\n\nf (x) dx =\n\nTheorem 5.15. Let f : Rd \u2212\u2192 V be a bounded measurable function\nsuch that for some P neighborhood P\nPb\n1\nf\n(nt)\nexists. Then Lt = const = L a.e.\nof 0 in Rd , for a.e. t \u2208 P the limit Lt = liml(b\u2212a)\u2192\u221e w(b\u2212a)\nRn>a\non P and for any F\u00f8lner sequence (\u03a6N ) in Rd , limN \u2192\u221e w(\u03a61 N ) \u03a6N f (x) dx = L.\nTheorem 5.16. Let f : Rd \u2212\u2192 V be a bounded measurable function satisfying, for some L \u2208 V ,\ness-lim lim sup\n\nt\u21920+ l(b\u2212a)\u2192\u221e\n\nb\nX\n1\nf (nt) \u2212 L = 0.\nw(b \u2212 a) n>a\n\nThen for any F\u00f8lner sequence (\u03a6N ) in Rd , limN \u2192\u221e\n\n1\nw(\u03a6N )\n\nR\n\n\u03a6N\n\nf (x) dx = L.\n\nIn the case f is a real-valued function we can get the following version of Lemma 5.13:\nLemma 5.17. For any bounded measurable function f : Rd \u2212\u2192 R, for any F\u00f8lner sequence (\u03a6N ) in Rd ,\nlim inf\nN \u2192\u221e\n\n1\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\n\nZ\n\nb\n\n1\nw(b\n\u2212 a)\nl(b\u2212a)\u2192\u221e\n\nZ\n\nb\n\n1\nw(\u03a6N )\n\nZ\n\nf (x) dx \u2265 lim inf\n\n1\nw(\u03a6N )\n\nZ\n\nf (x) dx \u2264 lim sup\n\n\u03a6N\n\nand\nlim sup\nN \u2192\u221e\n\n\u03a6N\n\nUsing Lemma 5.17, we may also strengthen Theorems 5.6 and 5.10:\n20\n\nf (x) dx\n\na\n\na\n\nf (x) dx.\n\n\fTheorem 5.18. For any bounded measurable function f : Rd \u2212\u2192 R and any F\u00f8lner sequence (\u03a6N ) in Rd ,\nlim inf\nN \u2192\u221e\n\nZ\n\nf (x) dx \u2265\n\nZ\n\n1\nw(\u03a6N )\n\nZ\n\nf (x) dx \u2264\n\nZ\n\n\u03a6N\n\nand\nlim sup\nN \u2192\u221e\n\nb\nX\n1\nf (t + n) dt.\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\n1\nw(\u03a6N )\n\n\u03a6N\n\nlim inf\n\nb\nX\n1\nf (t + n) dt.\n[0,1]d l(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nlim sup\n\nTheorem 5.19. For any bounded measurable function f : Rd \u2212\u2192 R, any c \u2208 Rd+ , c > 0, and any F\u00f8lner\nsequence (\u03a6N ) in Rd ,\nlim inf\nN \u2192\u221e\n\n1\nw(\u03a6N )\n\nZ\n\n1\nw(c)\n\nZ\n\nc\n\nf (x) dx \u2265\n\n1\nw(\u03a6N )\n\nZ\n\n1\nw(c)\n\nZ\n\nc\n\nf (x) dx \u2264\n\n\u03a6N\n\n0\n\nand\nlim sup\nN \u2192\u221e\n\n\u03a6N\n\nb\nX\n1\nf (nt) dt\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nlim inf\n\n0\n\nb\nX\n1\nf (nt) dt.\nl(b\u2212a)\u2192\u221e w(b \u2212 a) n>a\n\nlim sup\n\n6. Density of sets and convergence in density\nWe will now formulate some special cases of the theorems above. For a set S \u2286 Nd , the density\n1\nS \u2229 (0, b] , if it exists; for a measurable set S \u2286 Rd+ , the density of S is\nof S is D(S) = liml(b)\u2192\u221e w(b)\n1\nD(S) = liml(b)\u2192\u221e w(b) w(S \u2229 [0, b]), if it exists. (As before, w stands for the standard Lebesgue measure on\n\nRd ). The lower density D(S) and the upper density D(S) of a set S \u2286 Nd or S \u2286 Rd+ are defined as the\nlim inf and, respectively, the lim sup of the above expressions.\nTaking f = 1S in Theorems 2.5, 2.3 and in Theorems 4.6, 4.1, we get, respectively:\n\b\nTheorem 6.1. Let S be a measurable subset of Rd+ , and for each t \u2208 [0, 1]d let St = n \u2208 Nd : t + n \u2208 S .\nR\nR\nThen D(S) \u2265 [0,1]d D(St ) dt and D(S) \u2264 [0,1]d D(St ) dt. If D(St ) exists for a.e. t \u2208 [0, 1]d , then D(S) also\nR\nexists and equals [0,1]d D(St ) dt.\n\b\nTheorem 6.2. Let S be a measurable subset of Rd+ , and for each t \u2208 Rd+ let St = n \u2208 Nd : nt \u2208 S . Then\nR\nR\nfor any c \u2208 Rd+ , c > 0, one has D(S) \u2265 [0,c] D(St ) dt and D(S) \u2264 [0,c] D(St ) dt. If D(St ) exists for a.e. t in\na P-neighborhood P of 0 in Rd+ , then D(S(t)) = const = D for a.e. t \u2208 P and D(S) = D.\n\n1\nS \u2229 (a, b] , if it exists;\nThe uniform (or Banach) density of a set S \u2286 Nd is UD(S) = liml(b\u2212a)\u2192\u221e w(b\u2212a)\n1\nd\nfor a measurable set S \u2286 R+ the uniform density of S is UD(S) = liml(b\u2212a)\u2192\u221e w(b\u2212a) w(S \u2229 [a, b]), if it\nexists. (And it follows from (an Rd+ -version) of Lemma 5.13 that for S \u2286 Rd+ , if UD(S) exists, then for any\nF\u00f8lner sequence (\u03a6N ) in Rd+ , limN \u2192\u221e |\u03a61N | w(S \u2229 \u03a6N ) = UD(S).) The lower uniform density UD(S) and\n\nthe upper uniform density UD(S) of a set S \u2286 Nd or S \u2286 Rd+ is the lim inf and, respectively, the lim sup of\nthe above expressions.\nFrom Theorems 2.6, 2.4, 4.5, and Theorem 4.3 we get, respectively:\n\b\nTheorem 6.3. Let S be a measurable subset of Rd+ , and for each t \u2208 [0, 1]d let St = n \u2208 Nd : n + t \u2208 S .\nR\nR\nThen UD(S) \u2265 [0,1]d UD(St ) dt and UD(S) \u2264 [0,1]d UD(St ) dt. If UD(St ) exists for a.e. t \u2208 [0, 1]d , then\nR\nUD(S) also exists and equals [0,1]d UD(St ) dt.\n\b\nTheorem 6.4. Let S be a measurable subset of Rd+ , and for each t \u2208 Rd+ let St = n \u2208 Nd : nt \u2208 S . Then,\nR\nR\n1\n1\nfor any c \u2208 Rd+ , c > 0, one has D(S) \u2265 w(c)\n[0,c] D(St ) dt and D(S) \u2264 w(c) [0,c] D(St ) dt. If UD(St ) exists\nfor a.e. t in a P-neighborhood P of 0 in Rd+ , then UD(S(t)) = const = D in P and UD(S) = D.\n\nOf course, the \"two-sided\" versions of Theorems 6.1 \u2013 6.4, where one deals with Zd -sequences and functions\non Rd instead of Nd -sequences and functions on Rd+ , are also true.\n21\n\n\fWe will now bring two theorems that deal with limits in density instead of Ces\u00e0ro\n\b limits. We say that an\nNd -sequence (vn ) in V converges in density to L \u2208 V if for any \u03b5 > 0, the set S\u03b5 = n \u2208 Nd : kvn \u2212 Lk > \u03b5\nhas zero density, D(S\u03b5 ) = 0, and converges to L in uniform density if for any \u03b5 > 0, UD(S\u03b5 ) = 0. We\nsay that\nfunction f : Rd+ \u2212\u2192 V converges to L \u2208 V in density if for any \u03b5 > 0, the set\n\b a (measurable)\nd\nS\u03b5 = x \u2208 R+ : kf (x) \u2212 Lk > \u03b5 has zero density, D(S\u03b5 ) = 0, and converges to L in uniform density if for\nany \u03b5 > 0, UD(S\u03b5 ) = 0. Applying Theorems 6.1 \u2013 6.4 to the real-valued function kf (x) \u2212 Lk we obtain:\n\nTheorem 6.5. Let f : Rd+ \u2212\u2192 V be a bounded measurable function such that for some L \u2208 V , for a.e.\nt \u2208 [0, 1]d the Nd -sequence f (n + t), n \u2208 Nd , converges to L in density (respectively, in uniform density).\nThen f converges to L in density (respectively, in uniform density).\n\nTheorem 6.6. Let f : Rd+ \u2212\u2192 V be a bounded measurable function such that for some L \u2208 V , for a.e. t\nin a P-neighborhood of 0 in Rd+ the Nd -sequence f (nt), n \u2208 Nd , converges to L in density (respectively, in\nuniform density). Then f converges to L in density (respectively, in uniform density).\nOf course, the two-sided versions of Theorems 6.5 and 6.6 also hold.\n7. Applications\n7.1. Characteristic factors for multiple averages along polynomials\nLet X be a probability measure space; we will always assume that X is sufficiently regular so that L1 (X)\nis separable.\nLet G be a group of measure preserving transformations of X and let g1 (n), . . . , gr (n), n \u2208 Zd , be\n(d-parameter) sequences\nP of elements of G. A factor Z of the system (X, G) is said to be characteristic\nfor the averages |\u03a81N | n\u2208\u03a8N g1 (n)f1 * . . . * gr (n)fr , where (\u03a8N ) is a F\u00f8lner sequence in Zd , if for any\nf1 , . . . , fr \u2208 L\u221e (X),\n\u0011\n1 X \u0010\ng1 (n)f1 * . . . * gr (n)fr \u2212 g1 (n)E(f1 |Z) * . . . * gr (n)E(fr |Z) = 0\nlim\nN \u2192\u221e |\u03a8N |\nn\u2208\u03a8N\n\n1\n\nin L (X) (where E(f |Z) stands for theRconditional expectation of f with respect to Z). An analogous notion\ncan be introduced for averages w(\u03a61 N ) \u03a6N g1 (x)f1 * . . . * gr (x)fr dx, where g1 , . . . , gr are functions Rd \u2212\u2192 G\nand (\u03a6N ) is a F\u00f8lner sequence in Rd .\nLet T be an ergodic invertible measure preserving transformation of X.\nQ Host-Kra-Ziegler factor\nP The k-th\nZk (T ) of (X, T ) is the minimal characteristic factor for the averages |\u03a81N | n\u2208\u03a8N \u22056=\u03c3\u2286{0,...,k} T n\u03c3 f\u03c3 , where\nP\nn\u03c3 = i\u2208\u03c3 ni , and (\u03a8N ) are F\u00f8lner sequences in Zk+1 . Zk (T ) is the maximal factor of (X, T ) isomorphic to\na k-step pro-nilmanifold (an inverse limit of compact k-step nilmanifolds) on which T acts as a translation.\n(See [HoK1] and [Z].) The factors Zk (T ) turn out to be characteristic for any system of polynomial powers\nof T :\nTheorem 7.1. ([L3]) For any system of polynomials p1 , . . . , pr : Zd \u2212\u2192 Z there exists k \u2208 N such that for\nany measure preserving\ntransformation of a probability measure space X, Zk (T ) is a characteristic factor for\nP\nthe averages |\u03a61N | n\u2208\u03a6N T p1 (n) f1 * . . . * T pr (n) fr .\n\nIt is easy to see (see, for example, [FK]) that if S is another ergodic transformation of X commuting\nwith T then for all k, Zk (S) = Zk (T ). Thus, if T is a family of pairwise commuting ergodic transformations\nof X, we may denote by Zk (T ) the k-th Host-Kra-Ziegler factor of any (and so, of every) element of T . This\nallows one to generalize Theorem 7.1 in the following way:\nTheorem 7.2. ([J]) For any finite system of polynomials pi : Zd \u2212\u2192 Zc , i = 1, . . . , r, there exists k \u2208 N\nsuch that, given any totally ergodic (2) discrete c-parameter commutative group T m , m \u2208 Zc , of measure\npreserving transformations\nT of a probability measure space X, the factor Zk (T ) is characteristic for the\nP\naverages |\u03a81N | n\u2208\u03a8N T p1 (n) f1 * . . . * T pr (n) fr , where (\u03a8N ) are F\u00f8lner sequences in Zd .\n(2)\n\nA group G of measure preserving transformations of a measure space is totally ergodic if every nonidentical\nelement of G is totally ergodic\n\n22\n\n\fNow let T t , t \u2208 R, be a continuous 1-parameter group of measure preserving transformations of X\nand assume that it is ergodic on X. Then for almost all (actually, for all but countably many) t \u2208 R the\ntransformation T t is ergodic, so for any k, Zk (T t ) coinside for a.e. t; we will denote this factor by Zk (T ).\nWe can now prove the following fact (obtained in [P] for non-uniform averages).\nTheorem 7.3. For any system of polynomials p1 , . . . , pr : Rd \u2212\u2192 R there exists k \u2208 N such that for any\ncontinuous 1-parameter group T t , t \u2208 R, of measure preservingR transformations of a probability measure\nspace X, Zk (T ) is a characteristic factor for the averages w(\u03a61 N ) \u03a6N T p1 (x) f1 * . . . * T pr (x) fr dx.\n\nProof. Given polynomials p1 , . . . , pr on Rd , find monomials q\u03bb (x) = c\u03bb x\u03b1\u03bb , \u03bb = 1, . . . , \u039b, where c\u03bb \u2208 R and\n\u03b1\u03bb are multi-indices, that are Q-linearly independent\nP\u039b and such that each of the polynomials pi is a sum of\nthe monomials q\u03bb with integer coefficients, pi = \u03bb=1 bi,\u03bb q\u03bb , bi,\u03bb \u2208 Z. Then for any x \u2208 Rd , any n \u2208 Zd , and\nQ\u039b\n\u03b1\nbi,\u03bb n\u03b1\u03bb\nany i, T pi (nx) = \u03bb=1 Tx,\u03bb\nwhere Tx,\u03bb = T c\u03bbx \u03bb , and since T t is ergodic for a.e. t \u2208 R, the \u039b-parameter\ngroup generated by the transformations Tx,\u03bb , \u03bb = 1, . . . , \u039b, satisfies the assumptions of Theorem 7.2 for a.e.\nx \u2208 Rd . Find k which, by Theorem 7.2, corresponds to the polynomials bi,\u03bb n\u03b1\u03bb , i = 1, . . . , r, \u03bb = 1, . . . , \u039b,\nso that for a.e. x \u2208 Rd ,\n\u0011\n1 X \u0010 p1 (nx)\nT\nf1 * . . . * T pr (nx) fr \u2212 T p1 (nx) E(f1 |Zk (T )) * . . . * T pr (nx) E(fr |Zk (T )) = 0\nN \u2192\u221e |\u03a8N |\nlim\n\nn\u2208\u03a8N\n\nfor any F\u00f8lner sequence (\u03a8N ) in Zd . Then by Theorem 5.15,\n1\nN \u2192\u221e w(\u03a6N )\nlim\n\nZ\n\n\u03a6N\n\n\u0010\n\n\u0011\nT p1 (x) f1 * . . . * T pr (x) fr \u2212 T p1 (x) E(f1 |Zk (T )) * . . . * T pr (x) E(fr |Zk (T )) dx = 0\n\nfor any F\u00f8lner sequence (\u03a6N ) in Rd , which proves Theorem 7.3.\n7.2. Polynomial orbits on nilmanifolds\nLet X be a topological space with a probability Borel measure \u03bc. We say that a d-parameter sequence\ng(n), n \u2208 Zd , is well distributed\nwith respectR to \u03bc if for any h \u2208 C(X) and any F\u00f8lner sequence (\u03a8N ) in\nP\nZd one has limN \u2192\u221e |\u03a81N | n\u2208\u03a8N h(g(n)) = X h d\u03bc. We also say that a measurable function g(t), t \u2208 Rd ,\nin X is well distributed\nwith respect\nto \u03bc if for any h \u2208 C(X) and any F\u00f8lner sequence (\u03a6N ) in Rd ,\nR\nR\n1\nlimN \u2192\u221e w(\u03a6N ) \u03a6N h(g(t)) dt = X h d\u03bc.\nThe following proposition is an immediate corollary of Theorem 5.14, applied to the functions h\u25e6g,\nh \u2208 C(X).\nProposition 7.4. Let X be a topological space and let g: Rd \u2212\u2192 X be a function such that for a.e. t \u2208 [0, 1]d\nthe sequence g(n + t), n \u2208 Zd , is well distributed in X\nR with respect to a probability Borel measure \u03bct . Then\ng is well distributed with respect to the measure \u03bc = [0,1]d \u03bct dt.\nFrom Theorem 5.15 we get:\n\nProposition 7.5. Let X be a compact Hausdorff space for which C(X) is separable and let g: Rd \u2212\u2192 X\nbe a function such that for a.e. t in a P-neighborhood P of 0 in Rd+ the sequence g(nt), n \u2208 Zd , is well\ndistributed in X with respect to a probability Radon measure \u03bct . Then \u03bct = const = \u03bc for a.e. t \u2208 P and g\nis well distributed with respect to the measure \u03bc.\nProof. By Theorem 5.15, apllied to\nR the function h\u25e6g, for any h \u2208 C(X) we have \u03bct (h) = const = \u03bc(h)\nfor a.e. t \u2208 P and limN \u2192\u221e w(\u03a61 N ) \u03a6N h(g(t)) dt = \u03bc(h) for any F\u00f8lner sequence (\u03a6N ) in Rd . Excluding\nthose t for which \u03bct (h) 6= \u03bc(h) for all functions h from a fixed countable subset of C(X), we obtain that\n\u03bct = const = \u03bc for a.e. t \u2208 P and g is well distributed with respect to \u03bc. (The assumption that \u03bct are Radon\nmeasures allows us to identify them with continuous linear functionals on C(X).)\n23\n\n\fWe will apply these propositions in the following situation. Let X be a compact nilmanifold, that is,\na homogeneous space of a nilpotent Lie group G, and let g: Rd \u2212\u2192 X be a polynomial mapping, that is,\np (t)\np (t)\ng(t) = a11 . . . akk \u03c9, t \u2208 Rd , where a1 , . . . , ak \u2208 G, p1 , . . . , pk are polynomials Rd \u2212\u2192 R, and \u03c9 \u2208 X. Let\nY = {g(t), t \u2208 Rd }. It follows from a general result obtained in [Sh] that Y is a connected sub-nilmanifold of\nX (that is, a closed subset of X of the form H\u03c9 where H is a connected closed subgroup ofRG and \u03c9 \u2208 X), and\n1\ng is uniformly distributed in Y in the following sense: for any h \u2208 C(Y ), limR\u2192\u221e w(B\nh(g(t)) dw(t) =\nBR\nR)\nR\nd\nd\nh\nd\u03bc,\nwhere\nw\nis\nthe\nLebesgue\nmeasure\non\nR\n,\nB\n,\nR\n>\n0,\nis\nthe\nball\n{t\n\u2208\nR\n:\n|t|\n\u2264\nR},\nand\n\u03bc is the Haar\nR\nY\nmeasure on Y . We would like to have a stronger result which states that g is not only uniformly distributed,\nbut is well distributed in Y . A discrete analogue of this fact, which we will presently formulate, was obtained\nin [L2] and [L4], but before formulating it we need to introduce some terminology. We call a finite disjoint\nunion of connected subnilmanifolds of X a FU subnilmanifold. We say that an element \u03c9 \u2032 of X is rational\nwith respect to an element \u03c9 \u2208 X if \u03c9 \u2032 = a\u03c9 for some a \u2208 G such that am \u03c9 = \u03c9 for some m \u2208 N. We say\nthat a subnilmanifold Y of X is rational with respect to \u03c9 if Y contains an element \u03c9 \u2032 rational with respect\nto \u03c9. (Then such elements \u03c9 \u2032 are dense in Y .) Finally, we say that a FU subnilmanifold of X is rational\nwith respect to \u03c9 if all connected components of Y are subnilmanifolds rational with respect to \u03c9.\nProposition 7.6. (See [L2] and [L4].) Let g be a d-parameter polynomial sequence in X, that is, g(n) =\np (n)\np (n)\na11 . . . akk \u03c9 where a1 , . . . , ak \u2208 G, p1 , . . . , pk are polynomials Zd \u2212\u2192 R, and \u03c9 \u2208 X. Then the closure\nY = {g(n), n \u2208 Zd } of g is a FU subnilmanifold of X rational with respect to the point g(0). If Y is\nconnected, then the sequence g(n), n \u2208 Zd , is well distributed in Y (with respect to the Haar measure on Y ).\nWe may now use Theorem 5.15 or Theorem 5.14 to deduce from Proposition 7.6 its continuous analogue.\nWe will also need the following fact:\nProposition 7.7. ([L5], Theorem 2.1) Let M be a set and let \u03c6: Rd \u00d7 M \u2212\u2192 X be a mapping such that\nfor every m \u2208 M , \u03c6(*, m) is a polynomial mapping Rd \u2212\u2192 X, and there exists \u03c9 \u2208 X such that for each\nt \u2208 Rd the set Yt = \u03c6(t, M ) is a FU subnilmanifold of X rational with respect to \u03c9. Then there exists a\nFU subnilmanifold Y of X such that Yt \u2286 Y for all t \u2208 Rd and Yt = Y for a.e. t \u2208 Rd .\nNow let g: Rd \u2212\u2192 X be a polynomial mapping. By Proposition 7.6, the mapping \u03c6: Rd \u00d7 Zd \u2212\u2192 X\ndefined by \u03c6(t, n) = g(nt) satisfies the assumptions of Proposition 7.7 (with \u03c9 = g(0)), thus there exists\na FU subnilmanifold Y such that {g(nt), n \u2208 Zd } \u2286 Y for all t and = Y for a.e. t \u2208 Rd . But then\nY = {g(t), t \u2208 Rd }, and so Y is a connected subnilmanifold; by the second part of Proposition 7.6, the\nsequence g(nt), n \u2208 Zd , is well distributed in Y for a.e. t \u2208 Rd . Applying Proposition 7.5, we get:\nTheorem 7.8. Let X be a compact nilmanifold and g: Rd \u2212\u2192 X be a polynomial mapping. Then Y =\n{g(t), t \u2208 Rd } is a connected subnilmanifold of X and g(t) is well distributed in Y (with respect to the Haar\nmeasure in Y ).\n\nRemark. If we were only interested in proving the well distribution of g in a subnilmanifold Y , we could\navoid the usage of Proposition 7.7; we need it to show that g(t) \u2208 Y for all t.\n7.3. Convergence of multiple averages\nCombining Theorem 7.3 and Theorem 7.8, we can now get the following theorem:\nTheorem 7.9. Let T t , t \u2208 R, be a continuous 1-parameter group of measure preserving transformations of\na probability measure space X, and let p1 , . . . , pr be polynomials Rd \u2212\u2192 R. Then for any f1 , . . . , fr \u2208 L\u221e (X)\nand any F\u00f8lner sequence (\u03a6N ) in Rd the limit\nZ\n1\nT p1 (x) f1 * . . . * T pr (x) fr dx\nlim\nN \u2192\u221e w(\u03a6N ) \u03a6\nN\nexists in L1 -norm.\n(In [P] a version of Theorem 7.9 was obtained for \"standard\" Ces\u00e0ro averages (that is, for the case \u03a6N =\nQd\ni=1 [0, bi,N ], N \u2208 N, with bi,N \u2212\u2192 \u221e as N \u2212\u2192 \u221e for all i = 1, . . . , d). In [Au2], a multidimensional (that\nis, for T : Rd \u2212\u2192 Rc with c \u2265 1) version of this result was obtained, again, for the standard Ces\u00e0ro averages.)\n24\n\n\fProof. We may assume that T is ergodic. Applying Theorem 7.3 we can then replace (X, T ) by a pronilmanifold Zk (T ). Now, given the functions f1 , . . . , fr \u2208 L\u221e (X), we can approximate them in L1 -norm by\nfunctions that come from a factor Y of Zk (T ) which is a nilmanifold, and replace Zk (T ) by Y and T by a\nnilrotation a on it. Next, we note that it is enough to assume that f1 , . . . , fr are continuous functions on Y .\np (x)\nThen an application of Theorem 7.8 to the polynomial flow (ap1 (x) y, . . . , ar r y), x \u2208 RdR, on the nilmanifold\nr\nr\nY and the function f1 (y1 ) * . . . * fr (yr ) \u2208 C(Y ) proves that the limit limN \u2192\u221e w(\u03a61 N ) \u03a6N f1 (ap1 (t) y) * . . . *\nfr (apr (t) y)dt exists for all y \u2208 Y , and so, in L1 (Y ).\n\nAnother way to prove Theorem 7.9 is to deduce it, with the help of either Theorem 5.14 or Theorem 5.15,\nfrom the following discrete-time theorem:\nTheorem 7.10. ([J]) For any totally ergodic discrete c-parameter commutative group T m , m \u2208 Zc , of\nmeasure preserving transformations of a probability measure space X, any finite system of polynomials\npi : Zd \u2212\u2192 Zc , i = 1, . . . , r, any f1 , . . . , fr \u2208 L\u221e (X), and any F\u00f8lner sequence (\u03a8N ) in Zd , the limit\n1 X p1 (n)\nT\nf1 * . . . * T pr (n) fr\nN \u2192\u221e |\u03a8N |\nlim\n\nn\u2208\u03a8N\n\nexists in L1 -norm.\nApplying Theorem 5.15, we obtain from Theorem 7.10 the following refinement of Theorem 7.9:\nTheorem 7.11. Under the assumptions of Theorem 7.9,\n1\nlim\nN \u2192\u221e w(\u03a6N )\n\nZ\n\n\u03a6N\n\nX\n1\nT p1 (nt) f1 * . . . * T pr (nt) fr\nN \u2192\u221e |\u03a8N |\n\nT p1 (x) f1 * . . . * T pr (x) fr dx = lim\n\nn\u2208\u03a8N\n\nfor a.e. t \u2208 Rd and any F\u00f8lner sequences (\u03a6N ) in Rd and (\u03a8N ) in Zd .\nAs for the actions of several commuting operators, the following \"linear\" result has been recently obtained:\nTheorem 7.12. ([Au1]; see also [Ho1]) Let T1 , . . . , Tr be pairwise commuting measure preserving transformations of a probability measure space X. Then for any f1 , . . . , fr \u2208 L\u221e (X) the limit\nb\nX\n1\nT1n f1 * . . . * Trn fr\nb\u2212a\u2192\u221e b \u2212 a\nn=a+1\n\nlim\n\nexists in L1 -norm.\nApplying either Theorem 5.15 we obtain:\nTheorem 7.13. Let T1t , . . . , Trt , t \u2208 R, be pairwise commuting continuous 1-parameter groups of measure\npreserving transformations of a probability measure space X. Then for any f1 , . . . , fr \u2208 L\u221e (X) the limit\n1\nb\u2212a\u2192\u221e b \u2212 a\nlim\n\nexists in L1 -norm, and equals limb\u2212a\u2192\u221e\n\n1\nb\u2212a\n\nPb\n\nZ\n\na\n\nb\n\nT1x f1 * . . . * Trxfr dx\n\nn=a+1\n\nT1nt f1 * . . . * Trnt fr for a.e. t \u2208 R.\n\n7.4. The polynomial Szemer\u00e9di theorem\nThe \"multiparameter multidimensional polynomial ergodic Szemer\u00e9di theorem\" says:\n25\n\n\fTheorem 7.14. (See [BM] or [BLM].) Let T m , m \u2208 Zc , be a discrete c-parameter commutative group of\nmeasure preserving transformations of a probability measure space (X, \u03bc), let pi : Zd \u2212\u2192 Zc , i = 1, . . . , r, be\na system of polynomials with pi (0) = 0 for all i, and let A \u2286 X, \u03bc(A) > 0. Then for any F\u00f8lner sequence\n(\u03a8N ) in Zd ,\n\u0001\n1 X\nlim inf\n\u03bc T p1 (n) (A) \u2229 . . . \u2229 T pr (n) (A) > 0.\nN \u2192\u221e |\u03a8N |\nn\u2208\u03a8N\n\n\u0001\nP\nSince the convergence of the averages limN \u2192\u221e |\u03a81N | n\u2208\u03a8N \u03bc T p1 (n) (A) \u2229 . . . \u2229 T pr (n) (A) is unknown,\nwe cannot apply Theorem 5.14 or Theorem 5.15 to get a continuous-time version of Theorem 7.14; however\nit can be obtained with the help of either Theorem 5.18 or Theorem 5.19:\nTheorem 7.15. Let T t , t \u2208 Rc , be a c-parameter commutative group of measure preserving transformations\nof a probability measure space (X, \u03bc), let pi : Rd \u2212\u2192 Rc , i = 1, . . . , r, be a system of polynomials with pi (0) = 0\nfor all i, and let A \u2286 X, \u03bc(A) > 0. Then for any F\u00f8lner sequence (\u03a6N ) in Rd ,\nlim inf\nN \u2192\u221e\n\n1\nw(\u03a6N )\n\nZ\n\n\u03a6N\n\n\u0001\n\u03bc T p1 (x) (A) \u2229 . . . \u2229 T pr (x) (A) dx > 0.\n\nQk\np (n)\nA (d-parameter) polynomial sequence in a group G is a sequence of the form g(n) = j=1 vj j , where\nvj are elements of G and pj are integer-valued polynomials on Zd . Theorem 7.14 was extended in [L1] to\nthe nilpotent set-up:\nTheorem 7.16. Let G be a nilpotent group of measure preserving transformations of a probability measure\nspace (X, \u03bc), let gi : Zd \u2212\u2192 G, i = 1, . . . , r, be a system of d-parameter polynomial sequences in G with\ngi (0) = 1G for all i, and let A \u2286 X, \u03bc(A) > 0. Then\nb\nX\n\u0001\n1\n\u03bc (g1 (n))(A) \u2229 . . . \u2229 (gr (n))(A) > 0.\nl(b\u2212a)\u2192\u221e w(b \u2212 a)\nn>a\n\nlim inf\n\nIf G a connected nilpotent Lie group, then for any v \u2208 G there exists a one-parameter subgroup v t ,\nt \u2208 R, of G such that v 1 = v; this allows one to define v t for all t \u2208 R. Let us call a polynomial mapping\nQk\np (x)\ng: Rd \u2212\u2192 G a mapping of the form g(x) = j=1 vj j , where vj are elements of G and pj are polynomials\non Rd . Applying one of Theorems 5.18 or 5.19, we get the following \"continuous-time nilpotent polynomial\nSzemer\u00e9di theorem\":\nTheorem 7.17. Let G be a nilpotent Lie group of measure preserving transformations of a probability\nmeasure space (X, \u03bc), let gi : Rd \u2212\u2192 G, i = 1, . . . , r, be a system of polynomial mappings with gi (0) = 1G for\nall i, and let A \u2286 X, \u03bc(A) > 0. Then for any F\u00f8lner sequence (\u03a6N ) in Rd ,\nlim inf\nN \u2192\u221e\n\n1\nw(\u03a6N )\n\nZ\n\n\u03a6N\n\n\u0001\n\u03bc (g1 (x))(A) \u2229 . . . \u2229 (gr (x))(A) dx > 0.\n\n7.5. Distribution of values of generalized polynomials\nAnother application of Theorem 7.8 is a sharpening of the results from [BL] about the distribution\nof values of bounded generalized polynomials. Recall that a generalized polynomial is a function from Rd\nor from Zd to R that is constructed from conventional polynomals by applying the operaions of addition,\nmultiplication, and taking the integer part. We call a function u: Rd \u2212\u2192 Rc a generalized polynomial\nmapping if all components of u are generalized polynomials. Under a piecewise polynomial surface S \u2286 Rc\nwe understand the image S = S(Q) of the cube Q = [0, 1]s where S is a piecewise polynomial mapping, which\nSl\nmeans that Q can partitioned into a finite union Q = i=1 Qi of subsets so that for each i, Qi is defined\nby a system of polynomial inequalities and S |Qi is a polynomial mapping. We endow S with the measure\n\u03bcS = S\u2217 (w), the push-forward of the standard Lebesgue measure w on Q. In [BL], the following theorem\nwas proved:\n26\n\n\fTheorem 7.18. ([BL]) Let u: Zd \u2212\u2192 Rc be a bounded generalized polynomial mapping. Then the sequence\nu(n), n \u2208 Zd is well distributed with respect to \u03bcS on a piecewise polynomial surface S \u2282 Rc .\n\b\n(Note that it is not claimed in this theorem that u(n) \u2208 S for all n; it follows however that the set n :\nu(n) 6\u2208 S has zero uniform density in Zd .)\nApplying Proposition 7.5, we may now obtain the R-version of Theorem 7.18:\nTheorem 7.19. Any bounded generalized polynomial mapping u: Rd \u2212\u2192 Rc is well distributed on a piecewise\npolynomial surface S \u2282 Rc .\nAn application of the spectral theorem gives, as a corollary, the following proposition:\nProposition 7.20. Let U t , t \u2208 Rc , be a continuous c-parameter group of unitary operators on a Hilbert\nspace H, and let u: Rd \u2212\u2192 Rc be a generalizedR polynomial mapping. Then for any v \u2208 H and any F\u00f8lner\nsequence (\u03a6N ) in Rd , the limit limN \u2192\u221e w(\u03a61 N ) \u03a6N U g(x) v dx exists.\n7.6. Ergodic theorems along functions from Hardy fields\nWe will now deal with a situation where our \"uniform Ces\u00e1ro theorems\" are not applicable, but the\n\"standard Ces\u00e0ro\" Theorem 3.1 is; namely, we will deal with multiple ergodic averages along (not necessarily)\npolynomial functions of polynomial growth. Such averages for functions of integer argument were considered\nin [BK] and [F].\nTo state the results obtained in [BK] we first need to introduce some notation:\nT is the set of real-valued C \u221e functions g defined on intervals [a, \u221e), a \u2208 R, such that a finite\nlimx\u2192+\u221e xg (j+1) (x)/g (j) (x) exists for all j \u2208 N and there exists an integer i \u2265 0 and \u03b1 \u2208 (i, i + 1] such that\nlimx\u2192+\u221e xg \u2032 (x)/g(x) = \u03b1 and limx\u2192+\u221e g (i+1) (x) = 0;\nP is the set of real-valued C \u221e functions g defined on intervals [a, \u221e), a \u2208 R such that for some integer\ni \u2265 0 a finite nonzero limx\u2192+\u221e g (i+1) (x) exists and limx\u2192+\u221e xj g (i+j+1) (x) = 0 for all j \u2208 N;\nG = T \u222a P;\nL is the Hardy field of logarithmico-exponential functions, that is, the minimal field of real-valued\nfunctions defined on intervals [a, \u221e), a \u2208 R, that contains polynomials and is closed under the operations of\ntaking exponent and logarithm-of-modulus;\nfor \u03b1 > 0, G(\u03b1) is the set of functions g \u2208 G with limx\u2192+\u221e xg \u2032 (x)/g(x) = \u03b1, T (\u03b1) is the set of functions\ng \u2208 T with limx\u2192+\u221e xg \u2032 (x)/g(x) = \u03b1, and for any G \u2286 G, G(\u03b1) = G \u2229 G(\u03b1);\na finite family G \u2282 G with g1 \u2212 g2 \u2208 G for all g1 , g2 \u2208 G is said to have R-property if for any \u03b1 > 0, any\n(l)\ng1 , g2 \u2208 (G(\u03b1) \u222a (G(\u03b1) \u2212 G(\u03b1))) \\ {0}, any integer l \u2265 0 and \u03b2 \u2208 (0, \u03b1) such that g1 , g2 \u2208 T (\u03b2), a finite\n([\u03b2]+l+1)\n([\u03b2]+1)\nnonzero limx\u2192+\u221e g1\n(x)/g2\n(x) exists.\nThe following theorem was proved in [BK]:\nTheorem 7.21. ([BK]) Let g1 , . . . , gr \u2208 G be such that gi \u2212 gj \u2208 G for all i 6= j, and also either g1 , . . . , gr \u2208 L\nor the family {g1 , . . . , gr } has the R-property. Then for any invertible weakly mixing transformation T of a\n\u221e\n[g1 (n)]\nprobability measure space (X, \u03bc) and any\nf1 * . . . * T [gr (n)] fr ,\nQrf1 , R. . . , fr \u2208 L (X), the sequence Fn = T\nn \u2208 N, tends in density in L1 -norm to i=1 fi d\u03bc.\nPN\nThe statement \"Fn tends in density in L1 -norm\" means that limN \u2192\u221e N1 n=1 T [g1 (n)] f1 *. . .*T [gr (n)] fr \u2212\nQr R\nfi d\u03bc L1 (X) = 0. From this and Theorem 3.1 we get that, under the assumptions of Theorem 7.21,\ni=1\nRb\nQr R\nlimb\u2192\u221e 1b 0 T [g1 (x)] f1 * . . . * T [gr (x)] fr dx \u2212 i=1 fi d\u03bc L1 (X) dx = 0, that is, the function Fx = T [g1 (x)] f1 *\nR\nQ\n. . . * T [gr (x)] fr , x \u2208 [0, \u221e), (whose range is in L1 (X)) tends in density in L1 -norm to ri=1 fi d\u03bc. Hence,\nwe obtain:\nTheorem 7.22. Let g1 , . . . , gr \u2208 G be such that gi \u2212 gj \u2208 G for all i 6= j, and also either g1 , . . . , gr \u2208 L\nor the family {g1 , . . . , gr } has the R-property. Then for any invertible weakly mixing transformation T of a\nprobability measure space (X, \u03bc) and any f1Q\n, . . . , Rfr \u2208 L\u221e (X), the function Fx = T [g1 (x)] f1 * . . . * T [gr (x)] fr ,\nr\n1\nx \u2208 [0, \u221e), tends in density in L -norm to i=1 fi d\u03bc.\n27\n\n\fActually, one can eliminate the brackets appearing in the exponents\nQr R in the expression for Fx . Indeed,\nput Gx = T g1 (x) f1 * . . . * T gr (x) fr , x \u2208 [0, \u221e), and let L = i=1 fi d\u03bc. Assume that kfi k \u2264 1 for\nall i. Fix any \u03b5 > 0 and for each i = 1, . . . , r choose functions gi,j \u2208 L\u221e (X), j = 1, . . . , k, that form\nan \u03b5-net in the (compact) set {T t fi , t \u2208 [0, 1]} \u2282 L1 (X). For any J = (j1 , . . . , jr ) \u2208 {1, . . . , k}r the\nfunction (FJ )x = T [g1 (x)] f1,j1 . . . T [gr (x)] fr,jr tends in density to L, and for any x \u2208 [0, \u221e) there exists\nJ = (j1 , . . . , jr ) \u2208 {1, . . . , k}r such that kT gi (x) fi \u2212 T [gi (x)] fi,ji k = kT {gi (x)} fi \u2212 fi,ji k < \u03b5 for all i and so,\nPN\n2r\nkGx \u2212 (FJ )x k < 22r \u03b5. This implies that lim supN \u2192\u221e N1\n1 kGx \u2212 Lk < 2 \u03b5. Since this holds for any\npositive \u03b5, we see that Gx also tends in density to L. So, we have the following result:\nTheorem 7.23. Let g1 , . . . , gr \u2208 G be such that gi \u2212gj \u2208 G for all i 6= j, and also either g1 , . . . , gr \u2208 L or the\nfamily {g1 , . . . , gr } has the R-property. Then for any weakly mixing continuous 1-parameter group T t , t \u2208 R,\nof measure preserving transformations of a probability measure space (X, \u03bc) and any Q\nf1 , . .R. , fr \u2208 L\u221e (X),\nr\ng1 (x)\ngr (x)\n1\nthe function Gx = T\nf1 * . . . * T\nfr , x \u2208 [0, \u221e), tends in density in L -norm to i=1 fi d\u03bc.\nAnother paper dealing with multiple-ergodic averages along non-polynomial functions of polynomial\ngrowth is [F]. Let H denote the union of all Hardy fields of real-valued functions.\nTheorem 7.24. ([F]) Let g \u2208 H satisfy limx\u2192+\u221e g(x)/xj = 0 for some j \u2208 N, and assume that one\nof the following is true: either limx\u2192+\u221e (g(x) \u2212 cp(x))/ log x = \u221e for all c \u2208 R and p \u2208 Z[x]; or\nlimx\u2192+\u221e (g(x) \u2212 cp(x)) = d for some c, d \u2208 R and p \u2208 Z[x]; or (g(x) \u2212 x/m)/ log x is bounded on [2, \u221e)\nfor some m \u2208 Z. Then\nPN for any invertible measure preserving transformation of a probability measure\nspace X, limN \u2192\u221e N1 n=1 T [g(n)] f1 * T 2[g(n)] f2 * . . . * T r[g(n)] fr exists in L1 (X) for any r \u2208 N and any\nf1 , . . . , fr \u2208 L\u221e (X).\nTheorem 7.25. ([F]) Let g1 , . . . , gr \u2208 L be logarithmico-exponential functions satisfying limx\u2192+\u221e gi (x)/xki +1\n= limx\u2192+\u221e xki +\u03b5i /gi (x) = 0 for some integer ki \u2265 0 and \u03b5i > 0, i = 1, . . . , r, and limx\u2192+\u221e gi (x)/gj (x) = 0\nor \u221e for any i 6= j. Then for any\nPNinvertible ergodic measure preserving\nQr Rtransformation1 of a probability measure space X, limN \u2192\u221e N1 n=1 T [g1 (n)] f1 * . . . * T [gr (n)] fr =\ni=1 X fi d\u03bc in L (X) for any\nf1 , . . . , fr \u2208 L\u221e (X).\nFrom this and Theorem 3.1 we get\nTheorem 7.26. Let g \u2208 H satisfy limx\u2192+\u221e g(x)/xj = 0 for some j \u2208 N, and assume that one of the\nfollowing is true: either limx\u2192+\u221e (g(x) \u2212 cp(x))/ log x = \u221e for all c \u2208 R and p \u2208 Z[x]; or limx\u2192+\u221e (g(x) \u2212\ncp(x)) = d for some c, d \u2208 R and p \u2208 Z[x]; or (g(x)\u2212x/m)/ log x is bounded on [2, \u221e) for some m \u2208 Z. Then\nRb\nfor any invertible measure preserving transformation of a probability measure space X, limb\u2192\u221e 1b 0 T [g(x)] f1 *\nT 2[g(x)] f2 * . . . * T r[g(x)]fr dx exists in L1 (X) for any r \u2208 N and any f1 , . . . , fr \u2208 L\u221e (X).\nTheorem 7.27. Let g1 , . . . , gr \u2208 L be logarithmico-exponential functions satisfying limx\u2192+\u221e gi (x)/xki +1 =\nlimx\u2192+\u221e xki +\u03b5i /gi (x) = 0 for some integer ki \u2265 0 and \u03b5i > 0, i = 1, . . . , r, and limx\u2192+\u221e gi (x)/gj (x) = 0 or\n\u221e for any i 6= j. Then for any invertible ergodic measure preserving transformation of a probability measure\nRb\nQr R\nspace X, limb\u2192\u221e 1b 0 T [g1 (x)] f1 * . . . * T [gr (x)] fr dx = i=1 X fi d\u03bc in L1 (X) for any f1 , . . . , fr \u2208 L\u221e (X).\n7.7. Pointwise ergodic theorems\nHere are two theorems of Bourgain dealing with the pointwise convergence:\nTheorem 7.28. ([Bo1]) Let T be a measure preserving transformation of a probability measure space X.\nPN\nn\n2n\nf2 , N \u2208 N, converges a.e..\nThen for any f1 , f2 \u2208 L2 (X), the sequence N1\nn=1 T f1 * T\n\nTheorem 7.29. ([Bo2]) Let T1 , . . . , Tr be commuting invertible measure preserving transformations of a\nprobability measure space X. Then for any f \u2208 L2 (X) and any polynomials p1 , . . . , pr : Z \u2212\u2192 Z, the sequence\nPN Qr\npi (n) \u0001\n1\nf , N \u2208 N, converges a.e..\ni=1 Ti\nn=1\nN\nWe now have:\n\n28\n\n\fTheorem 7.30. Let T t , t \u2208 R, be a continuous action of the semigroup [0, \u221e) by measure preserving\nRb\ntransformations on a probability measure space X. Then for any f1 , f2 \u2208 L2 (X), limb\u2192\u221e 1b 0 T t f1 * T 2t f2 dt\nexists a.e..\nPN\nnt\n2nt\nProof. By Theorem 7.28, for every t \u2208 R, the sequence N1\nn=1 T f1 (\u03c9) * T\n\b f2 (\u03c9), N \u2208 N, converges for\na.e. \u03c9 \u2208 X; let St \u2282 X be the set of points \u03c9 for which this is not so. Then (t, \u03c9) : \u03c9 \u2208 St is a null-subset\nPN\nof R \u00d7 X, thus for a.e. \u03c9 \u2208 X, the limit limN \u2192\u221e N1 n=1 T nt f1 (\u03c9) * T 2nt f2 (\u03c9) exists for a.e. t \u2208 R. By (the\nR\nb\nscalar version of) Theorem 3.1, the limit limb\u2192\u221e 1b 0 T t f1 (\u03c9) * T 2t f2 (\u03c9) dt exists for a.e. \u03c9 \u2208 X.\nIn the same way, from Theorem 7.29 we get:\n\nTheorem 7.31. Let T t , t \u2208 Rc , be a continuous c-parameter group of measure preserving transformations of a probability measure space X. Then for any f \u2208 L2 (X) and any polynomial p: R \u2212\u2192 Rc ,\nRb\nlimb\u2192\u221e 1b 0 T p(t) f dt exists a.e..\nHere are two more pointwise theorems, established by Assani:\n\nTheorem 7.32. ([A]) Let T be a weakly mixing measure preserving transformation of a probability measure\nspace X, let (P, S) be the Pinsker factor of (X, T ), and assume that the spectrum of S is singular. Then for\nR\nPN\nQ\nn\nrn\nfr , N \u2208 N, converges to ri=1 fi d\u03bc a.e. on\nany f1 , . . . , fr \u2208 L\u221e (X), the sequence N1\nn=1 T f1 * . . . * T\nX.\nTheorem 7.33. ([A]) Let T be a weakly mixing measure preserving transformation of a probability measure\nspace X, let (P, S) be the Pinsker factor of (X, T ), let L \u2286 L2 (P ) be the space of functions on P whose\nspectral measure under the action of S is absolutely continuous with respect to the Lebesgue measure. For\nany function f \u2208 L2 (X) let f\u02c6 denote the projection of E(f |P ) to L. Then for any f1 , f2 , f3 \u2208 L\u221e (X),\nN\nN\n\u00101 X\n\u0011\n1 X n\u02c6\nT n f1 * T 2n f2 * T 3n f3 \u2212\nT f1 * T 2n f\u02c62 * T 3n f\u02c63 = 0 a.e.\nN \u2192\u221e N\nN n=1\nn=1\n\nlim\n\nLet T t , t \u2208 R, be a continuous action of R by measure preserving transformations on a measure space\nX. Then, with the help of either Theorem 2.1 or Theorem 3.1, repeating (the first two phrases from) the\nproof of Theorem 7.30, and taking into account that (i) if T is weakly mixing then T t is weakly mixing for\nall t 6= 0; (ii) the Pinsker algebra of T is the Pinsker algebra of T t for all t 6= 0; and (iii) if the spectrum of T\nis singular (respectively, absolutely continuous), then the spectrum of T t is singular (respectively, absolutely\ncontinuous) for all t 6= 0; we obtain:\nTheorem 7.34. Let T be a continuous action of R on a probability measure space X by weakly mixing\nmeasure preserving transformations, let (P, S) be the Pinsker factor of (X, T ), and assume that the spectrum\nRb\nQr R\nof S is singular. Then for any f1 , . . . , fr \u2208 L\u221e (X) one has limb\u2192\u221e 1b 0 T t f1 * . . . * T rt fr dt = i=1 fi d\u03bc\na.e..\nTheorem 7.35. Let T be a continuos action of R on a probability measure space X by weakly mixing\nmeasure preserving transformations let (P, S) be the Pinsker factor of (X, T ), let L \u2286 L2 (P ) be the space\nof functions on P whose spectral measure under the action of S is absolutely continuous with respect to the\nLebesgue measure. For any function f \u2208 L2 (X) let f\u02c6 denote the projection of E(f |P ) to L. Then for any\nf1 , f2 , f3 \u2208 L\u221e (X),\nZ\n\u0011\n\u00101 Z b\n1 b t\u02c6\nt\n2t\n2t\nT f1 * T f2 * T f3 dt \u2212\nT f1 * T 2t f\u02c62 * T 3t f\u02c63 dt = 0 a.e.\nlim\nb\u2192\u221e b 0\nb 0\nBibliography\n[A]\n\nI. Assani, Multiple recurrence and almost sure convegrence for weakly mixing dynamical systems, Israel\nJournal of Math 163 (1998), 111-124.\n\n[Au1]\n\nT. Austin, On the norm convergence of nonconventional ergodic averages, Ergodic Theory and Dynamical\nSystems 30 (2010), no. 2, 321-338.\n\n29\n\n\f[Au2]\n\nT. Austin, Norm convergence of continuous-time polynomial multiple ergodic averages, preprint.\n\n[BK]\n\nV. Bergelson and I. H\u00e5land Knutson, Weak mixing implies weak mixing of higher orders along tempered\nfunctions, Ergodic Theory and Dynamical Systems 29 (2009), 1375-1416.\n\n[BL]\n\nV. Bergelson and A. Leibman, Distribution of values of bounded generalized polynomials, Acta Mathematica\n198 (2007), 155-230.\n\n[BLM]\n\nV. Bergelson, A. Leibman, and R. McCutcheon, Polynomial Szemeredi theorem for countable modules over\nintegral domains and finite fields, Journal d'Analyse Mathematique 95 (2005), 243-296.\n\n[BLLe]\n\nV. Bergelson, A. Leibman, and E. Lesigne, Intersective polynomials and the polynomial Szemer\u00e9di theorem,\nAdvances in Mathematics 219 (2008), no. 1, 369-388.\n\n[BM]\n\nV. Bergelson and R. McCutcheon, An ergodic IP polynomial Szemeredi theorem, Memoirs of AMS 146\n(2000), viii+106pp.\n\n[BiKo]\n\nG.D. Birkhoff and B.O. Koopman, Recent contributions to the ergodic theory, Proceedings of the National\nAcademy of Sciences of the USA 18 (1932), 279282.\n\n[Bo1]\n\nJ. Bourgain, Double recurrence and almost sure convergence, Journal f\u00fcr die Reine Angewandte Mathematik\n404 (1990), 140-161.\n\n[Bo2]\n\nJ. Bourgain, On the maximal ergodic theorem for certain subsets of the integers, Israel Journal of Mathematics 61 (1988), no. 1, 39-72.\n\n[F]\n\nN. Frantzikinakis, Multiple recurrence and convergence for Hardy sequences of polynomial growth, Journal\nd'Analyse Mathematique 112 (2010), 79-135.\n\n[FK]\n\nN. Frantzikinakis and B. Kra, Convergence of multiple ergodic averages for some commuting transformations,\nErgodic Theory and Dynamical Systems 25 (2005), no. 3, 799-809.\n\n[H]\n\nE. Hopf, Ergodentheorie, Springer, Berlin, 1937Multiple recurrence theorem for measure preserving actions\nof a nilpotent group, Geometric and Functional Analysis 8 (1998), 853-931.\n\n[Ho1]\n\nB. Host, Ergodic seminorms for commuting transformations and applications, Studia Mathematica 195\n(2009), 31-49.\n\n[HoK1] B. Host and B. Kra, Non-conventional ergodic averages and nilmanifolds, Annals of Mathematics 161 (2005),\nno. 1, 397-488.\n[HoK2] B. Host and B. Kra, Convergence of polynomial ergodic averages, Israel Journal of Mathematics 149 (2005),\n1-19.\n[J]\n\nM. Johnson, Convergence of polynomial ergodic averages of several variables for some commuting transformations, Illinois Journal of Mathematics 53 (2009), no. 3, 865-882.\n\n[Ko]\n\nA.N. Kolmogorov, A simplified proof of the Birkhoff-Khinchin ergodic theorem, Uspekhi Mat. Nauk (1938),\nno. 5, 52-56.\n\n[L1]\n\nA. Leibman, Multiple recurrence theorem for measure preserving actions of a nilpotent group, Geometric\nand Functional Analysis 8 (1998), 853-931.\n\n[L2]\n\nA. Leibman, Pointwise convergence of ergodic averages for polynomial actions of Zd by translations on a\nnilmanifold, Ergodic Theory and Dynamical Systems 25 (2005), 215-225.\n\n[L3]\n\nA. Leibman, Convergence of multiple ergodic averages along polynomials of several variables, Israel Journal\nof Mathematics 146 (2005), 303\u2013322.\n\n[L4]\n\nA. Leibman, Rational sub-nilmanifolds of a compact nilmanifold, Ergodic Theory and Dynamical Systems\n26 (2006), 787-798.\n\n[L5]\n\nA. Leibman, Orbits on a nilmanifold under the action of a polynomial sequences of translations, Ergodic\nTheory and Dynamical Systems 27 (2007), 1239-1252.\n\n[vN]\n\nJ. von Neumann, Physical applications of the ergodic hypothesis, Proceedings of the National Academy of\nSciences of the USA 18 (1932), no. 3 263-266.\n\n[P]\n\nA. Potts, Multiple ergodic averages for flows and an application, preprint. (arXiv:0910.3687)\n\n[Sh]\n\nN. Shah, Limit distributions of polynomial trajectories on homogeneous spaces, Duke Mathematical Journal\n75 (1994), no. 3, 711-732.\n\n[Z]\n\nT. Ziegler, Universal characteristic factors and Furstenberg averages, Journal of AMS 20 (2007), no. 1,\n\n30\n\n\f53-97.\n\n31\n\n\f"}