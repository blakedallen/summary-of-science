{"id": "http://arxiv.org/abs/1101.4912v2", "guidislink": true, "updated": "2012-03-23T02:31:42Z", "updated_parsed": [2012, 3, 23, 2, 31, 42, 4, 83, 0], "published": "2011-01-25T19:55:10Z", "published_parsed": [2011, 1, 25, 19, 55, 10, 1, 25, 0], "title": "Quantum affine algebras, canonical bases and $q$-deformation of\n  arithmetical functions", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1101.1792%2C1101.0923%2C1101.0773%2C1101.3855%2C1101.4414%2C1101.2171%2C1101.5366%2C1101.4646%2C1101.3066%2C1101.5629%2C1101.2356%2C1101.3838%2C1101.5635%2C1101.4155%2C1101.5620%2C1101.5932%2C1101.0981%2C1101.0832%2C1101.4201%2C1101.1391%2C1101.3441%2C1101.3849%2C1101.5364%2C1101.4522%2C1101.5828%2C1101.0090%2C1101.5094%2C1101.5133%2C1101.2110%2C1101.3254%2C1101.0575%2C1101.0099%2C1101.0938%2C1101.1504%2C1101.2218%2C1101.4950%2C1101.4653%2C1101.4912%2C1101.5769%2C1101.4212%2C1101.5638%2C1101.3091%2C1101.5368%2C1101.3447%2C1101.0925%2C1101.0247%2C1101.1558%2C1101.2693%2C1101.0437%2C1101.2860%2C1101.5419%2C1101.1384%2C1101.4199%2C1101.1165%2C1101.5751%2C1101.5993%2C1101.0381%2C1101.5780%2C1101.4475%2C1101.4837%2C1101.4614%2C1101.2650%2C1101.3829%2C1101.0892%2C1101.1609%2C1101.1187%2C1101.3397%2C1101.3808%2C1101.0800%2C1101.0298%2C1101.1337%2C1101.4261%2C1101.3870%2C1101.2136%2C1101.4286%2C1101.1243%2C1101.4741%2C1101.3473%2C1101.5634%2C1101.0352%2C1101.1345%2C1101.1121%2C1101.4964%2C1101.4909%2C1101.5095%2C1101.3987%2C1101.3334%2C1101.2628%2C1101.2172%2C1101.5942%2C1101.0259%2C1101.3134%2C1101.2805%2C1101.1480%2C1101.3378%2C1101.3105%2C1101.3761%2C1101.2378%2C1101.1745%2C1101.1134%2C1101.2837&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Quantum affine algebras, canonical bases and $q$-deformation of\n  arithmetical functions"}, "summary": "In this paper, we obtain affine analogues of Gindikin-Karpelevich formula and\nCasselman-Shalika formula as sums over Kashiwara-Lusztig's canonical bases.\nSuggested by these formulas, we define natural $q$-deformation of arithmetical\nfunctions such as (multi-)partition function and Ramanujan $\\tau$-function, and\nprove various identities among them. In some examples, we recover classical\nidentities by taking limits. We also consider $q$-deformation of Kostant's\nfunction and study certain $q$-polynomials whose special values are weight\nmultiplicities.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1101.1792%2C1101.0923%2C1101.0773%2C1101.3855%2C1101.4414%2C1101.2171%2C1101.5366%2C1101.4646%2C1101.3066%2C1101.5629%2C1101.2356%2C1101.3838%2C1101.5635%2C1101.4155%2C1101.5620%2C1101.5932%2C1101.0981%2C1101.0832%2C1101.4201%2C1101.1391%2C1101.3441%2C1101.3849%2C1101.5364%2C1101.4522%2C1101.5828%2C1101.0090%2C1101.5094%2C1101.5133%2C1101.2110%2C1101.3254%2C1101.0575%2C1101.0099%2C1101.0938%2C1101.1504%2C1101.2218%2C1101.4950%2C1101.4653%2C1101.4912%2C1101.5769%2C1101.4212%2C1101.5638%2C1101.3091%2C1101.5368%2C1101.3447%2C1101.0925%2C1101.0247%2C1101.1558%2C1101.2693%2C1101.0437%2C1101.2860%2C1101.5419%2C1101.1384%2C1101.4199%2C1101.1165%2C1101.5751%2C1101.5993%2C1101.0381%2C1101.5780%2C1101.4475%2C1101.4837%2C1101.4614%2C1101.2650%2C1101.3829%2C1101.0892%2C1101.1609%2C1101.1187%2C1101.3397%2C1101.3808%2C1101.0800%2C1101.0298%2C1101.1337%2C1101.4261%2C1101.3870%2C1101.2136%2C1101.4286%2C1101.1243%2C1101.4741%2C1101.3473%2C1101.5634%2C1101.0352%2C1101.1345%2C1101.1121%2C1101.4964%2C1101.4909%2C1101.5095%2C1101.3987%2C1101.3334%2C1101.2628%2C1101.2172%2C1101.5942%2C1101.0259%2C1101.3134%2C1101.2805%2C1101.1480%2C1101.3378%2C1101.3105%2C1101.3761%2C1101.2378%2C1101.1745%2C1101.1134%2C1101.2837&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "In this paper, we obtain affine analogues of Gindikin-Karpelevich formula and\nCasselman-Shalika formula as sums over Kashiwara-Lusztig's canonical bases.\nSuggested by these formulas, we define natural $q$-deformation of arithmetical\nfunctions such as (multi-)partition function and Ramanujan $\\tau$-function, and\nprove various identities among them. In some examples, we recover classical\nidentities by taking limits. We also consider $q$-deformation of Kostant's\nfunction and study certain $q$-polynomials whose special values are weight\nmultiplicities."}, "authors": ["Henry H. Kim", "Kyu-Hwan Lee"], "author_detail": {"name": "Kyu-Hwan Lee"}, "author": "Kyu-Hwan Lee", "links": [{"href": "http://arxiv.org/abs/1101.4912v2", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1101.4912v2", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.RT", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.RT", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.QA", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1101.4912v2", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1101.4912v2", "arxiv_comment": null, "journal_reference": null, "doi": null, "fulltext": "arXiv:1101.4912v2 [math.RT] 23 Mar 2012\n\nQUANTUM AFFINE ALGEBRAS, CANONICAL BASES AND\nq-DEFORMATION OF ARITHMETICAL FUNCTIONS\nHENRY H. KIM\u22c6 AND KYU-HWAN LEE\nAbstract. In this paper, we obtain affine analogues of Gindikin-Karpelevich formula and CasselmanShalika formula as sums over Kashiwara-Lusztig's canonical bases. Suggested by these formulas,\nwe define natural q-deformation of arithmetical functions such as (multi-)partition function and\nRamanujan \u03c4 -function, and prove various identities among them. In some examples, we recover\nclassical identities by taking limits. We also consider q-deformation of Kostant's function and\nstudy certain q-polynomials whose special values are weight multiplicities.\n\nIntroduction\nThis paper is a continuation of [16]. The classical Gindikin-Karpelevich formula and CasselmanShalika formula express certain integrals of spherical functions over maximal unipotent subgroups\nof p-adic groups as products over all positive roots. In [16], we expressed the products over positive roots as sums over Kashiwara-Lusztig's canonical bases ([17, 18]). That idea first appeared\nin the papers [10, 21] from the context of Weyl group multiple Dirichlet series [8, 9]. (See also\n[5, 6, 7].) Let G be a split reductive p-adic group, \u03c7 be an unramified character of T , the maximal torus, and f 0 be the standard spherical vector corresponding to \u03c7. Let z be the element of\nLT\n\n\u2282 L G, the L-group of G, corresponding to \u03c7 by the Satake isomorphism. Then\nZ\nY 1 \u2212 q \u22121 z\u03b1\nX\nf 0 (n) dn =\n=\n(0.1)\n(1 \u2212 q \u22121 )d(\u03c6i (b)) zwt(b) ,\n\u03b1\n1\n\u2212\nz\nN\u2212 (F )\nb\u2208B\n\u03b1\u2208\u2206+\nZ\nY\nf 0 (n)\u03c8\u03bb (n) dn = \u03c7(V (\u03bb))\n(0.2)\n(1 \u2212 q \u22121 z\u03b1 )\nN\u2212 (F )\n\n\u03b1\u2208\u2206+\n\n= (\u2212t)M z2\u03c1 \u03c7(V (\u03bb))\n\nY\n\n(1 \u2212 t\u22121 z\u2212\u03b1 )\n\n\u03b1\u2208\u2206+\n\n= (\u2212t)M z\u03c1\n\nX\n\nb\u2032 \u2297b\u2208B\u03bb \u2297B\u03c1\n\n2000 Mathematics Subject Classification. Primary 17B37; Secondary 05E10.\n\u22c6\n\npartially supported by an NSERC grant.\n1\n\n\u2032\n\nG\u03c1 (b; t)zwt(b \u2297b) ,\n\n\f2\n\nHENRY KIM AND KYU-HWAN LEE\n\nwhere \u2206+ is the set of positive roots, B is the canonical basis, B\u03bb is the crystal basis with highest\nweight \u03bb, and we set M = |\u2206+ | and t = q \u22121 . Notice that the tensor product of crystal bases\nbehaves well in the Casselman-Shalika formula.\nIn the affine Kac-Moody groups, A. Braverman, D. Kazhdan and M. Patnaik calculated the\nintegral (0.1) in [4], and obtained a formula of the form\n\n(0.3)\n\nZ\n\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1\nf (n) dn = A\n,\n1 \u2212 z\u03b1\nN\u2212 (F )\n+\n0\n\n\u03b1\u2208\u2206\n\nwhere A is a certain correction factor. When the underlying finite simple Lie algebra gcl is\nsimply-laced of rank n, A is given by\nn Y\n\u221e\nY\n1 \u2212 q \u2212di zj\u03b4\n,\n1 \u2212 q \u2212di \u22121 zj\u03b4\ni=1 j=1\n\nwhere di 's are the exponents of gcl , and \u03b4 is the minimal positive imaginary root.\nIn this paper, we use the explicit description of the canonical basis due to Beck, Chari, Pressley\nand Nakajima ([2], [3]) to write the right hand side of (0.3) as a sum over the canonical basis.\nMoreover, we obtain the generalization of (0.2). Namely, we prove (Theorem 1.16 and Corollary\n2.13)\n(0.4)\n(0.5)\n\nX\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1\n=\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) ,\n\u03b1\n1\n\u2212\nz\nb\u2208B\n\u03b1\u2208\u2206+\nY\nX\n\u2032\n\u03c7(V (\u03bb))z\u03c1\n(1 \u2212 q \u22121 z\u2212\u03b1 )mult \u03b1 =\nG\u03c1 (b; q) zwt(b \u2297b) ,\n\u03b1\u2208\u2206+\n\nb\u2032 \u2297b\u2208B\u03bb \u2297B\u03c1\n\nwhere B is the canonical basis of U+ (the positive part of the quantum affine algebra), and B\u03bb is\nthe crystal basis with highest weight \u03bb. Here z is a formal variable. We also write the correction\nfactor A as a sum over a canonical basis in the case when gcl is simply-laced. We first prove\n(0.4) by induction, and deduce (0.5) from (0.4) and Weyl-Kac character formula. In the course\nof proof, we see that (0.5) can be considered as a q-deformation of Weyl-Kac character formula.\nIn the development of Weyl group multiple Dirichlet series ([5, 6, 7, 8, 9]), one of the main\nproblems has been how to define the local coefficient (or p-part). Various combinatorial methods\nhave been adopted to define the coefficient. In particular, the string parametrization (or BZLpath) of a crystal graph was used in [9]. In our previous paper [16], the q-polynomial H\u03bb+\u03c1 (\u03bc; q)\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n3\n\nwas defined using the generating series:\n(0.6)\n\nX\n\nH\u03bb (\u03bc; q)z\u03bb\u2212\u03bc =\n\nX\n\n(\u22121)l(w)\n\nw\u2208W\n\n\u03bc\u2208Q+\n\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) zw\u03bb\u2212wt(b) .\n\nb\u2208B\n\nThis definition works for all the finite root systems in a uniform way, and is essentially the same\nas the local coefficient in the non-metaplectic case that was introduced in the work [12] of Chinta\nand Gunnells on the construction of Weyl group multiple Dirichlet series.\nIn this paper, we define the polynomial H\u03bb+\u03c1 (\u03bc; q) \u2208 Z[q \u22121 ] for affine cases using the same\nformula. That is to say, the definition (0.6) works for affine cases as well. Moreover, we show that\nthe polynomial H\u03bb+\u03c1 (\u03bc; q) has many remarkable, representation-theoretic properties; its constant\nterm is the multiplicity of the weight \u03bb \u2212 \u03bc in V (\u03bb), and the value at q = \u22121 is the multiplicity\nof the weight \u03bb + \u03c1 \u2212 \u03bc in the tensor product V (\u03bb) \u2297 V (\u03c1). See Corollary 2.10. It is also related\nto Kazhdan-Lusztig polynomials when g is of finite type (Corollary 3.30).\nOur construction also has connections to deformations of Kostant's partition function. When\nq = \u22121 and \u03bb is a strictly dominant weight, the Casselman-Shalika formula (0.5) gives a formula\nfor multiplicity of the weight \u03bd in the tensor product V (\u03bb \u2212 \u03c1) \u2297 V (\u03c1) in terms of q-deformation\nof Kostant partition function, generalizing the result of [13, Theorem 1] to affine Kac-Moody\nalgebras (See (3.24)). More precisely, we define Kq\u221e (\u03bc), in a similar way as in [13], by\nX\n\nKq\u221e (\u03bc)z\u03bc\n\n\u03bc\u2208Q+\n\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1\n=\n.\n1 \u2212 z\u03b1\n+\n\u03b1\u2208\u2206\n\nNote that when q = \u221e, Kq\u221e (\u03bc) is the classical Kostant partition function. Then we have\n\ndim (V (\u03bb \u2212 \u03c1) \u2297 V (\u03c1))\u03bd =\n\nX\n\n\u221e\n(\u22121)l(w) K\u22121\n(w\u03bb \u2212 \u03bd).\n\nw\u2208W\n\nAnother application is deformation of arithmetical functions. Since the set of positive roots\nis infinite, the left-hand sides of (0.4) and (0.5) become infinite products. It leads to natural\nq-deformation of arithmetical functions such as multi-partition functions and Fourier coefficients\nof modular forms. We indicate one example here.\nWe define \u01ebq,n (k) as\n\u221e\nY\n\n(1 \u2212 q \u22121 tk )n =\n\nk=1\n\n\u221e\nX\nk=0\n\n\u01ebq,n (k)tk .\n\n\f4\n\nHENRY KIM AND KYU-HWAN LEE\n\nNote that \u01eb1,n (k) is a classical arithmetic function related to modular forms. For example, we\nhave \u01eb1,24 (k) = \u03c4 (k + 1), where \u03c4 (k) is the Ramanujan \u03c4 -function. Thus the function \u01ebq,n (k)\nshould be considered as a q-deformation of the function \u01eb1,n (k).\nFor a multi-partition p = (\u03c1(1) , . . . , \u03c1(n) ) \u2208 P(n), we define\npq,n (k) =\n\nX\n\n(1 \u2212 q \u22121 )d(p) ,\n\nk \u2265 1,\n\np\u2208P(n)\n|p|=k\n\nand set pq,n (0) = 1. Here |p| is the weight of the multi-partition and the number d(p) is defined\nin Section 1. Notice that if q \u2192 \u221e and k > 0, the function p\u221e,n (k) is nothing but the multipartition function with n-components. In particular, p\u221e,1 (k) = p(k), the usual partition function.\nHence we can think of pq,n (k) as a q-deformation of the multi-partition function.\nIt turned out that there are interesting relations among these q-deformations. We prove (Proposition 3.8)\n\u01ebq,n (k) =\n\nk\nX\n\n\u01eb1,n (r)pq,n (k \u2212 r),\n\nr=0\n\nwhich yields an infinite family of q-polynomial identities. We also obtain \"classical\" identities by\ntaking limits. When n = 24 and q \u2192 \u221e, the identity becomes a well-known recurrence formula\nfor the Ramanujan \u03c4 -function:\n0=\n\nk\nX\n\n\u03c4 (r + 1)p\u221e,24 (k \u2212 r).\n\nr=0\n\nIn fact, we prove another family of identities (Proposition 3.13) and obtain an intriguing\ncharacterization of the function \u01ebq,n (k). In Example 3.14, by taking q = 1, we write \u03c4 (k + 1) as\n(1)\n\na sum of certain numbers arising from the structure of the affine Lie algebra of type A4 . To be\nprecise, we have\n\u03c4 (k + 1) = lim\n\nq\u21921\n\nX\n\n\u03bc\u2208Q+,cl\n\n.\nH\u03c1 (k\u03b10 + \u03bc; q) (1 \u2212 q \u22121 )10 ,\n\nwhere Q+,cl is the classical nonnegative root lattice of type A4 .\nAcknowledgments. We would like to thank M. Patnaik for explaining his results [4]. We also\nthank A. Ram, P. Gunnells, S. Friedberg and B. Brubaker for their useful comments on this\npaper. Finally, we thank Seok-Jin Kang and G. Benkart for their interest in this work.\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n5\n\n1. Gindikin-Karpelevich Formula\nLet g be an untwisted affine Kac-Moody algebra over C. We denote by I = {0, 1, . . . , n} the\nset of indices for simple roots. Let W be the Weyl group. We keep almost all the notations in\nSections 2 and 3 of [3]. However, we use v for the parameter of a quantum group and reserve q\nfor another parameter. Whenever there is a discrepancy in notations, we will make it clear.\nWe fix h = (. . . , i\u22121 , i0 , i1 , . . . ) as in Section 3.1 in [3]. Then for any integers m < k, the\nproduct sim sim+1 * * * sik \u2208 W is a reduced expression, so is the product sik sik\u22121 * * * sim \u2208 W . We\nset\n\uf8f1\n\uf8f2si si * * * si (\u03b1i )\n0\n\u22121\nk+1\nk\n\u03b2k =\n\uf8f3s s * * * s\n(\u03b1 )\ni1 i2\n\nand define\n\nR(k) = {\u03b20 , \u03b2\u22121 , . . . , \u03b2k } for k \u2264 0\n\nik\u22121\n\nik\n\nand\n\nif k \u2264 0,\nif k > 0,\n\nR(k) = {\u03b21 , \u03b22 , . . . , \u03b2k } for k > 0.\n\n\u2032\u2032\n\nLet Ti = Ti,1 be the automorphism of U as in Section 37.1.3. of [20], and let\nc+ = (c0 , c\u22121 , c\u22122 , . . . ) \u2208 NZ\u22640\n\nand\n\nc\u2212 = (c1 , c2 , . . . ) \u2208 NZ>0\n\nbe functions (or sequences) that are almost everywhere zero. We denote by C> (resp. by C< )\nthe set of such functions c+ (resp. c\u2212 ). Then we define\n\u0010\n\u0011\n\u0010\n\u0011\n(c )\n(c\u22121 )\n(c\u22122 )\n\u22121 \u22121\nEc+ = Ei0 0 Ti\u22121\nE\nT\nT\nE\n***\ni\u22121\ni0\ni\u22121\ni\u22122\n0\nand\n\nWe set\n\n\u0010\n\u0011\n\u0010\n\u0011\n(c )\n(c )\n(c )\nEc\u2212 = * * * Ti1 Ti2 Ei3 3 Ti1 Ei2 2 Ei1 1 .\n\uf8f1\n\uf8f2{Ec : cm = 0 for m < k}\n+\nB(k) =\n\uf8f3{E : c = 0 for m > k}\nc\u2212\nm\n\nfor k \u2264 0,\nfor k > 0.\n\nWe denote by B the Kashiwara-Lusztig's canonical bases for U+ , the positive part of the\nquantum affine algebra.\nProposition 1.1. [2, 3] For each Ec+ \u2208 B(k), k \u2264 0 (resp. Ec\u2212 \u2208 B(k), k > 0), there exists a\nunique b \u2208 B such that\n(1.2)\n\nb \u2261 Ec+ (resp. Ec\u2212 )\n\nmod v \u22121 Z[v \u22121 ].\n\n\f6\n\nHENRY KIM AND KYU-HWAN LEE\n\nWe denote by B(k) the subset of B corresponding to B(k) as in the above theorem. Then we\ndefine the map \u03c6 : B(k) \u2192 C> for k \u2264 0 (resp. C< for k > 0) to be b 7\u2192 c+ (resp. c\u2212 ) such that\nthe condition (1.2) holds. For an element c+ = (c0 , c\u22121 , . . . ) \u2208 C> (resp. c\u2212 = (c1 , c2 , . . . ) \u2208 C> ),\nwe define d(c+ ) (resp. d(c\u2212 )) to be the number of nonzero ci 's.\nProposition 1.3. For each k \u2208 Z, we have\nX\nY 1 \u2212 q \u22121 z\u03b1\n=\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) .\n(1.4)\n1 \u2212 z\u03b1\nb\u2208B(k)\n\n\u03b1\u2208R(k)\n\nProof. First we assume k > 0 and use induction on k. If k = 1, then the identity (1.4) is easily\nverified. Now, using an induction argument, we obtain\n\uf8f6\n\uf8eb\nY 1 \u2212 q \u22121 z\u03b1\nY 1 \u2212 q \u22121 z\u03b1 1 \u2212 q \u22121 z\u03b2k\n\uf8f8\n= \uf8ed\n1 \u2212 z\u03b1\n1 \u2212 z\u03b1\n1 \u2212 z\u03b2k\n\u03b1\u2208R(k)\n\u03b1\u2208R(k\u22121)\n\uf8f6\uf8eb\n\uf8eb\n\uf8f6\nX\nX\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) \uf8f8 \uf8ed1 +\n(1 \u2212 q \u22121 )zj\u03b2k \uf8f8\n= \uf8ed\nj\u22651\n\nb\u2208B(k\u22121)\n\nX\n\n=\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) +\n\nX\n\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b))+1 zwt(b)+j\u03b2k .\n\nj\u22651 b\u2208B(k\u22121)\n\nb\u2208B(k\u22121)\n\nOn the other hand, since b\u2032 \u2208 B(k) satisfies\n\u0011\n\u0010\n(j)\nmod v \u22121 Z[v \u22121 ]\nb\u2032 \u2261 b Ti1 Ti2 * * * Tik Ek\n\nfor unique b \u2208 B(k \u2212 1) and j \u2265 0, we can write B(k) as a disjoint union\n[\nB(k) =\n{b\u2032 \u2208 B(k) | \u03c6(b\u2032 ) = (c1 , . . . , ck\u22121 , j, 0, 0, . . . ), ci \u2208 N}.\nj\u22650\n\nNow it is clear that\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b)\n\nb\u2208B(k)\n\n=\n\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) +\n\nX\n\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b))+1 zwt(b)+j\u03b2k .\n\nj\u22651 b\u2208B(k\u22121)\n\nb\u2208B(k\u22121)\n\nThis completes the proof of the case k > 0.\nThe case k \u2264 0 can be proved in a similar way through a downward induction.\nWe set\nR> =\n\n[\n\nk\u22640\n\nR(k)\n\nand\n\nR< =\n\n[\n\nk>0\n\nR(k).\n\n\u0003\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n7\n\nSimilarly, we put\nB> =\n\n[\n\nand\n\nB(k)\n\nB< =\n\nk\u22640\n\n[\n\nB(k).\n\nk>0\n\nCorollary 1.5. We have\nX\nY 1 \u2212 q \u22121 z\u03b1\n=\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) .\n\u03b1\n1\u2212z\n\n(1.6)\n\nb\u2208B>\n\n\u03b1\u2208R>\n\nThe same identity is true if R> and B> are replaced with R< and B< , respectively.\nLet c0 = (\u03c1(1) , \u03c1(2) , . . . , \u03c1(n) ) be a multi-partition with n components, i.e. each component \u03c1(i)\nis a partition. We denote by P(n) the set of all multi-partitions with n components. Let Sc0 be\ndefined as in [3] (p. 352) and set\nB0 = {Sc0 | c0 \u2208 P(n)}.\nProposition 1.7. [2, 3] For each Sc0 \u2208 B0 , there exists a unique b \u2208 B such that\n(1.8)\n\nb \u2261 Sc0\n\nmod v \u22121 Z[v \u22121 ].\n\nWe denote by B0 the subset of B corresponding to B0 . Using the same notation \u03c6 as we used\nfor B(k), we define a function \u03c6 : B0 \u2192 P(n), b 7\u2192 c0 , such that the condition (1.8) is satisfied.\nFor a partition p = (1m1 2m2 * * * r mr * * * ), we define\nd(p) = #{r | mr 6= 0}\n\nand\n\n|p| = m1 + 2m2 + 3m3 + * * * .\n\nThen for a multi-partition c0 = (\u03c1(1) , \u03c1(2) , . . . , \u03c1(n) ) \u2208 P(n), we set\nd(c0 ) = d(\u03c1(1) ) + d(\u03c1(2) ) + * + d(\u03c1(n) ).\nWe obtain from the definition of Sc0 that if \u03c6(b) = c0 then\nwt(b) = |c0 |\u03b4,\nwhere |c0 | = |\u03c1(1) | + * * * + |\u03c1(n) | is the weight of the multi-partition c0 .\nProposition 1.9. We have\n\u0013n\n\u221e \u0012\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1 Y\nX\n1 \u2212 q \u22121 zk\u03b4\n(1.10)\n=\n=\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) ,\n\u03b1\nk\u03b4\n1\n\u2212\nz\n1\n\u2212\nz\n+\n\u03b1\u2208\u2206im\n\nk=1\n\nwhere \u2206+\nim is the set of positive imaginary roots of g.\n\nb\u2208B0\n\n\f8\n\nHENRY KIM AND KYU-HWAN LEE\n\nProof. The first equality follows from the facts \u2206+\nim = {\u03b4, 2\u03b4, 3\u03b4, . . . } and mult(k\u03b4) = n for all\nk = 1, 2, . . . . Now we consider the second equality and assume n = 1. Then we have\n\uf8f6\n\uf8eb\n\u0013 Y\n\u221e\n\u221e \u0012\n\u221e\nY\nX\n1 \u2212 q \u22121 zk\u03b4\n\uf8ed1 +\n(1 \u2212 q \u22121 )zjk\u03b4 \uf8f8 .\n=\n(1.11)\n1 \u2212 zk\u03b4\nj=1\n\nk=1\n\nk=1\n\nWe consider the generating function of the partition function p(m):\n\n(1.12)\n\n\u221e\nX\n\np(m)zm\u03b4 =\n\nm=0\n\n\u221e\nY\n\nk=1\n\n\uf8eb\n\n\uf8ed1 +\n\n\u221e\nX\nj=1\n\n\uf8f6\n\n(1) |\u03b4\n\nX\n\nzjk\u03b4 \uf8f8 =\n\nz|\u03c1\n\nX\n\n=\n\nzwt(b) .\n\nb\u2208B0\n\n\u03c1(1) \u2208P(1)\n\nComparing (1.11) and (1.12), we see that if we expand the product in the right-hand side of\n(1) |\u03b4\n\n(1.11) into a sum, the coefficient of z|\u03c1\n\nwill be a power of (1 \u2212 q \u22121 ) and that the exponent of\n\n(1 \u2212 q \u22121 ) is exactly the number d(\u03c1(1) ). Therefore, we obtain\n\u0013\n\u221e \u0012\nY\n1 \u2212 q \u22121 zk\u03b4\n1\u2212\n\nk=1\n\nzk\u03b4\n\n(1) )\n\nX\n\n=\n\n(1 \u2212 q \u22121 )d(\u03c1\n\n(1) |\u03b4\n\nz|\u03c1\n\n\u03c1(1) \u2208P(1)\n\nX\n\n=\n\n(1 \u2212 q \u22121 )d(b) zwt(b) .\n\nb\u2208B0\n\nNext we assume that n = 2. Then we have\n\u00132\n\u221e \u0012\nY\n1 \u2212 q \u22121 zk\u03b4\n\nk=1\n\n\uf8eb\n\n= \uf8ed\n\n1 \u2212 zk\u03b4\n\nX\n\nd(\u03c1(1) )\n\n|\u03c1(1) |\u03b4\n\n(1 \u2212 q \u22121 )\n\nz\n\n\u03c1(1) \u2208P(1)\n\n=\n\nX\n\n\uf8f6\uf8eb\n\uf8f8\uf8ed\n\nX\n\nd(\u03c1(2) )\n\n(1 \u2212 q \u22121 )\n\n\u03c1(2) \u2208P(1)\n\n(1) )+d(\u03c1(2) )\n\n(1 \u2212 q \u22121 )d(\u03c1\n\n(1)\n(2)\nz(|\u03c1 |+|\u03c1 |)\u03b4\n\n|\u03c1(2) |\u03b4\n\nz\n\n\uf8f6\n\uf8f8\n\n(\u03c1(1) ,\u03c1(2) )\u2208P(2)\n\n=\n\nX\n\n(1 \u2212 q \u22121 )d(b) zwt(b) .\n\nb\u2208B0\n\nIt is now clear that this argument naturally generalizes to the case n > 2.\n\n\u0003\n\nLet us consider the correction factor A in (0.3). We will make a modification of the formula\n(1.10) to write A as a sum over B0 in the case when the underlying classical Lie algebra gcl is\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n9\n\nsimply-laced. For a partition p = (1m1 2m2 * * * ) and di \u2208 N, we define\n\uf8f1\n\u221e\n\uf8f2(1 \u2212 q)q \u2212(di +1)mj if mj 6= 0,\nY\nQdi (p, j).\nQdi (p, j) =\nand Qdi (p) =\n\uf8f31\nif m = 0,\nj=1\n\nj\n\nFor a multi-partition p = (\u03c1(1) , . . . , \u03c1(n) ) and di \u2208 N, i = 1, . . . , n, we define\nQd1 ,...,dn (p) =\n\nn\nY\n\nQdi (\u03c1(i) ).\n\ni=1\n\nThen we obtain the following.\nCorollary 1.13. Assume that gcl is simply-laced. Then we have\n\u221e\nn Y\nY\nX\n1 \u2212 q \u2212di zj\u03b4\nA=\n=\nQ(\u03c6(b))zwt(b) ,\n1 \u2212 q \u2212di \u22121 zj\u03b4\ni=1 j=1\n\nb\u2208B0\n\nwhere di 's are the exponents of gcl and we write Q(p) = Qd1 ,...,dn (p).\nProof. The first equality is a result in [4]. The second equality can be obtained using a similar\nargument as in the proof of Proposition 1.9.\n\n\u0003\n\nLet C = C> \u00d7 P(n) \u00d7 C< as in [3].\nTheorem 1.14. [2, 3] There is a bijection between the sets B and C such that for each c =\n(c+ , c0 , c\u2212 ) \u2208 C , there exists a unique b \u2208 B such that\n(1.15)\n\nb \u2261 Ec+ Sc0 Ec\u2212\n\nmod v \u22121 Z[v \u22121 ].\n\nThen we naturally extend the function \u03c6 to a bijection of B onto C and the number d(c) is\nalso defined by d(c) = d(c+ ) + d(c0 ) + d(c\u2212 ) for each c \u2208 C .\nTheorem 1.16. We have\n(1.17)\n\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1 X\n=\n(1 \u2212 q \u22121 )d(\u03c6(b)) zwt(b) .\n\u03b1\n1\n\u2212\nz\n+\n\n\u03b1\u2208\u2206\n\nb\u2208B\n\n+\n+\n+\nProof. Recall that \u2206+ = \u2206+\nre \u222a \u2206im , \u2206re = R> \u222a R< and mult \u03b1 = 1 for \u03b1 \u2208 \u2206re . Then the\n\nidentity of the theorem follows from Corollary 1.5, Proposition 1.9 and Theorem 1.14.\n\n\u0003\n\n\f10\n\nHENRY KIM AND KYU-HWAN LEE\n\n2. Casselman-Shalika Formula\nFor the functions c+ = (c0 , c\u22121 , c\u22122 , . . . ) \u2208 C> and c\u2212 = (c1 , c2 , . . . ) \u2208 C< , we define\n|c+ | = c0 + c\u22121 + c\u22122 + * * *\n\nand\n\n|c\u2212 | = c1 + c2 + * * * .\n\nFor a multi-partition c0 = (\u03c1(1) , \u03c1(2) , . . . , \u03c1(n) ) \u2208 P(n), we set |c0 | = |\u03c1(1) | + * * * + |\u03c1(n) |, as we did\nin the previous section.\nUsing similar arguments in the previous section, we obtain the following identities.\nProposition 2.1.\n(1) We have for each k \u2208 Z,\nY\n\n(1 \u2212 q \u22121 z\u03b1 )\u22121 =\n\n\u03b1\u2208R(k)\n\nX\n\nq \u2212|\u03c6(b)| zwt(b) .\n\nb\u2208B(k)\n\n(2)\nY\n\nX\n\n(1 \u2212 q \u22121 z\u03b1 )\u22121 =\n\nq \u2212|\u03c6(b)| zwt(b) .\n\nb\u2208B>\n\n\u03b1\u2208R>\n\nThe same identity is true if R> and B> are replaced with R< and B< , respectively.\n(3)\nY\n\n1 \u2212 q \u22121 z\u03b1\n\n\u03b1\u2208\u2206+\nim\n\n\u0001\u2212mult \u03b1\n\n=\n\n\u221e \u0010\nY\n\n1 \u2212 q \u22121 zk\u03b4\n\nk=1\n\n\u0011\u2212n\n\n=\n\nX\n\nq \u2212|\u03c6(b)| zwt(b) .\n\nb\u2208B0\n\n(4)\nY\n\n1 \u2212 q \u22121 z\u03b1\n\n\u03b1\u2208\u2206+\n\n\u0001\u2212mult \u03b1\n\n=\n\nX\n\nq \u2212|\u03c6(b)| zwt(b) .\n\nb\u2208B\n\nLet P+ = {\u03bb \u2208 P |hhi , \u03bbi \u2265 0 for all i \u2208 I}. Recall that the irreducible g-module V (\u03bb) is\nintegrable if and only if \u03bb \u2208 P+ ([14], Lemma 10.1).\nDefinition 2.2. Let \u03bb \u2208 P+ . We define H\u03bb (*; q) : Q+ \u2192 Z[q \u22121 ] using the generating series\nX\nX\nX\nH\u03bb (\u03bc; q)z\u03bb\u2212\u03bc =\n(\u22121)l(w)\n(1 \u2212 q \u22121 )d(\u03c6(b)) zw\u03bb\u2212wt(b)\nw\u2208W\n\n\u03bc\u2208Q+\n\n=\n\nX\n\nb\u2208B\n\n(\u22121)l(w) zw\u03bb\n\nw\u2208W\n\n!\n\nX\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) z\u2212wt(b)\n\nb\u2208B\n\nand we write\n\u03c7q (V (\u03bb)) =\n\nX\n\n\u03bc\u2208Q+\n\nH\u03bb (\u03bc; q) z\u03bb\u2212\u03bc .\n\n!\n\n,\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n11\n\nWe denote by \u03c7(V (\u03bb)) the usual character of V (\u03bb). We have the element d \u2208 h such that\n\u03b10 (d) = 1 and \u03b1j (d) = 0, j \u2208 I \\ {0}. We define \u03c1 \u2208 h\u2217 as in [14, chapter 6] by \u03c1(hj ) = 1, j \u2208 I\nand \u03c1(d) = 0. By the Weyl-Kac character formula,\nX\n(\u22121)l(w) zw(\u03bb+\u03c1)\u2212\u03c1\nw\u2208W\n\nY\n\n= \u03c7(V (\u03bb)).\n\n(1 \u2212 z\u2212\u03b1 )mult \u03b1\n\n\u03b1\u2208\u2206+\n\nIn particular, if \u03bb = 0, then\nX\n\nY\n\n(\u22121)l(w) zw\u03c1 = z\u03c1\n\n(1 \u2212 z\u2212\u03b1 )mult \u03b1 .\n\n\u03b1\u2208\u2206+\n\nw\u2208W\n\nBy Theorem 1.16,\nX\n\nY \u0012 1 \u2212 q \u22121 z\u2212\u03b1 \u0013mult \u03b1\n.\n1 \u2212 z\u2212\u03b1\n+\n\n(1 \u2212 q \u22121 )d(\u03c6(b)) z\u2212wt(b) =\n\nb\u2208B\n\n\u03b1\u2208\u2206\n\nThus we obtain\nX\n\n\u03c7q (V (\u03c1)) =\n\nl(w) w\u03c1\n\n(\u22121)\n\nz\n\nw\u2208W\n\u03c1\n\n= z\n\nY\n\n!\n\n(1 \u2212 z\n\n)\n\n= z\n\nY\n\n(1 \u2212 q\n\n\u22121 d(\u03c6(b)) \u2212wt(b)\n\n)\n\nz\n\nb\u2208B\n\n\u2212\u03b1 mult \u03b1\n\n\u03b1\u2208\u2206+\n\u03c1\n\nX\n\n!\n\nY \u0012 1 \u2212 q \u22121 z\u2212\u03b1 \u0013mult \u03b1\n1 \u2212 z\u2212\u03b1\n+\n\n\u03b1\u2208\u2206\n\n(1 \u2212 q\n\n\u22121 \u2212\u03b1 mult \u03b1\n\nz\n\n)\n\n.\n\n\u03b1\u2208\u2206+\n\nTherefore we have proved the following.\n\n(2.3)\n\n\u03c7q (V (\u03c1)) = z\u03c1\n\nY\n\n(1 \u2212 q \u22121 z\u2212\u03b1 )mult \u03b1 .\n\n\u03b1\u2208\u2206+\n\nWhen q = \u22121 in (2.3), we have the following identity by [14, Exercise 10.1].\nLemma 2.4.\n\u03c7\u22121 (V (\u03c1)) = z\u03c1\n\nY\n\n(1 + z\u2212\u03b1 )mult \u03b1 = \u03c7(V (\u03c1)).\n\n\u03b1\u2208\u2206+\n\nRemark 2.5. By Definition 2.2,\nY\nX\nH\u03c1 (\u03bc; \u22121)z\u03c1\u2212\u03bc = z\u03c1\n(1 + z\u2212\u03b1 )mult \u03b1 .\n\u03c7\u22121 (V (\u03c1)) =\n\u03bc\u2208Q+\n\n\u03b1\u2208\u2206+\n\n\f12\n\nHENRY KIM AND KYU-HWAN LEE\n\nTherefore, if H\u03c1 (\u03bc; \u22121) 6= 0, \u03c1 \u2212 \u03bc must be a weight of V (\u03c1) and H\u03c1 (\u03bc; \u22121) is the multiplicity of\n\u03c1 \u2212 \u03bc in V (\u03c1).\nNow we have the following proposition which is an affine analogue of the Casselman-Shalika\nformula.\nProposition 2.6.\n(2.7)\n\n\u03c7q (V (\u03bb + \u03c1)) = \u03c7(V (\u03bb))\u03c7q (V (\u03c1)).\n\nProof. By Definition 2.2 and Theorem 1.16,\n\u03c7q (V (\u03bb + \u03c1)) =\n\nX\n\nl(w) w(\u03bb+\u03c1)\n\n(\u22121)\n\nw\u2208W\n\nz\n\n!\n\nY \u0012 1 \u2212 q \u22121 z\u2212\u03b1 \u0013mult \u03b1\n.\n1 \u2212 z\u2212\u03b1\n+\n\n\u03b1\u2208\u2206\n\nBy the Weyl-Kac character formula and (2.3), the right hand side is \u03c7(V (\u03bb))\u03c7q (V (\u03c1)).\n\n\u0003\n\nRemark 2.8. When q = 1, we see that \u03c71 (V (\u03bb + \u03c1))z\u2212\u03c1 is the numerator of the Weyl-Kac\ncharacter formula. Hence we can think of (2.7) as a q-deformation of Weyl-Kac character formula.\nAt special values of q, the formal sum \u03c7q (V (\u03bb+ \u03c1)) becomes characters of some representations\nas you can see in the following corollary.\nCorollary 2.9.\n(1) When q = \u221e, we have\n\u03c7\u221e (V (\u03bb + \u03c1)) = z\u03c1 \u03c7(V (\u03bb)).\nHence we may consider \u03c7q (V (\u03bb + \u03c1))z\u2212\u03c1 as a q-deformation of \u03c7(V (\u03bb)).\n(2) When q = \u22121, we obtain\n\u03c7\u22121 (V (\u03bb + \u03c1)) = \u03c7(V (\u03bb))\u03c7(V (\u03c1)) = \u03c7(V (\u03bb) \u2297 V (\u03c1)).\nProof. (1) The identity is true since \u03c7\u221e (V (\u03c1)) = z\u03c1 . (2) By putting q = \u22121 in (2.7), the identity\nfollows from Lemma 2.4.\nWe also obtain representation-theoretic meaning of special values of H\u03bb+\u03c1 (\u03bc; q).\nCorollary 2.10.\n(1) The value H\u03bb+\u03c1 (\u03bc; \u221e) is the multiplicity of the weight \u03bb \u2212 \u03bc in V (\u03bb).\n\n\u0003\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n13\n\n(2) The value H\u03bb+\u03c1 (\u03bc; \u22121) is the multiplicity of the weight \u03bb + \u03c1 \u2212 \u03bc in the tensor product\nV (\u03bb) \u2297 V (\u03c1).\nProof. (1) By Definition 2.2 and from Corollary 2.9 (1), we have\nX\nH\u03bb+\u03c1 (\u03bc; \u221e)z\u03bb\u2212\u03bc = z\u2212\u03c1 \u03c7\u221e (V (\u03bb + \u03c1)) = \u03c7(V (\u03bb)).\n\u03bc\u2208Q+\n\nThis proves the part (1).\n(2) We obtain from Corollary 2.9 (2)\nX\nH\u03bb+\u03c1 (\u03bc; \u22121)z\u03bb+\u03c1\u2212\u03bc = \u03c7(V (\u03bb) \u2297 V (\u03c1)),\n\u03c7\u22121 (V (\u03bb + \u03c1)) =\n\u03bc\u2208Q+\n\nwhich proves the part (2).\n\n\u0003\n\nBefore we further investigate the implication of the Casselman-Shalika formula (2.7), we need\nthe following lemma.\nLemma 2.11. Assume that \u03bb1 , \u03bb2 \u2208 P+ . Then the set of weights of V (\u03bb1 ) \u2297 V (\u03bb2 ) is the same\nas that of V (\u03bb1 + \u03bb2 ).\nProof. Suppose that \u03bb1 , \u03bb2 \u2208 P+ . Let V (\u03bb1 ) and V (\u03bb2 ) be the integrable highest weight modules\nwith highest weights \u03bb1 and \u03bb2 , respectively. By [14, p. 211], V (\u03bb1 + \u03bb2 ) occurs in V (\u03bb1 ) \u2297 V (\u03bb2 )\nwith multiplicity one. Hence it is enough to prove that any weight of V (\u03bb1 ) \u2297 V (\u03bb2 ) is a weight\nof V (\u03bb1 + \u03bb2 ).\nIf V1 and V2 are modules in the category O, then the weight space of (V1 \u2297 V2 )\u03bc for \u03bc \u2208 h\u2217 , is\ngiven by\n(V1 \u2297 V2 )\u03bc =\n\nX\n\n(V1 )\u03bd \u2297 (V2 )\u03bc\u2212\u03bd .\n\n\u03bd\u2208h\u2217\n\nHence weights of V (\u03bb1 ) \u2297 V (\u03bb2 ) are of the form \u03bc1 + \u03bc2 , where \u03bc1 and \u03bc2 are weights of V (\u03bb1 )\nand V (\u03bb2 ), respectively. Furthermore, since V (\u03bb1 ) \u2297 V (\u03bb2 ) is completely reducible, a weight\n\u03bc1 + \u03bc2 of V (\u03bb1 ) \u2297 V (\u03bb2 ) is a weight of the module V (\u03bb) for some \u03bb \u2208 P+ , that appears in the\ndecomposition of V (\u03bb1 ) \u2297 V (\u03bb2 ).\nIt follows from Corollary 10.1 in [14] that we can choose w \u2208 W such that w(\u03bc1 + \u03bc2 ) \u2208 P+ .\nThen, by Proposition 11.2 in [14], we need only to show that w(\u03bc1 + \u03bc2 ) is nondegenerate with\nrespect to \u03bb1 +\u03bb2 . By Lemma 11.2 in [14], w\u03bc1 and w\u03bc2 are nondegenerate with respect to \u03bb1 and\n\u03bb2 , respectively. Now, from the definition of nondegeneracy [14, p.190], we see that w\u03bc1 + w\u03bc2\nis nondegenerate with respect to \u03bb1 + \u03bb2 .\n\n\u0003\n\n\f14\n\nHENRY KIM AND KYU-HWAN LEE\n\nNow we use crystal bases, namely, bases at v = 0, since they behave nicely under tensor\nproducts. Let B\u03bb be the crystal basis associated to a dominant integral weight \u03bb \u2208 P+ . We\nchoose G\u03c1 (*; q) : B\u03c1 \u2192 Z[q \u22121 ] by assigning any element of Z[q \u22121 ] to each b \u2208 B\u03c1 so that\nX\nG\u03c1 (b; q).\n(2.12)\nH\u03c1 (\u03bc; q) =\nb\u2208B\u03c1\nwt(b)=\u03c1\u2212\u03bc\n\nBy Remark 2.5, it is enough to consider \u03bc \u2208 Q+ such that \u03c1 \u2212 \u03bc is a weight of b \u2208 B\u03c1 .\nUsing the function G\u03c1 (*; q), we can rewrite Casselman-Shalika formula in Proposition 2.6 in a\nfamiliar form:\nCorollary 2.13.\n(2.14)\nX\n\nH\u03bb+\u03c1 (\u03bc; q) z\u03bb+\u03c1\u2212\u03bc = \u03c7(V (\u03bb))z\u03c1\n\nY\n\n(1 \u2212 q \u22121 z\u2212\u03b1 )mult \u03b1 =\n\n\u2032\n\nG\u03c1 (b; q) zwt(b \u2297b) .\n\nb\u2032 \u2297b\u2208B\u03bb \u2297B\u03c1\n\n\u03b1\u2208\u2206+\n\n\u03bc\u2208Q+\n\nX\n\nProof. The first equality is obvious from (2.3) and Proposition 2.6. For the second equality, we\nobtain\n\u03c7(V (\u03bb))z\u03c1\n\nY\n\n(1 \u2212 q \u22121 z\u2212\u03b1 )mult \u03b1 = \u03c7(V (\u03bb))\u03c7q (V (\u03c1))\n\n\u03b1\u2208\u2206+\n\n\uf8eb\n\n= \uf8ed\n\n=\n\nX\n\nb\u2032 \u2208B\u03bb\n\nX\n\n\u2032\n\n\uf8f6\uf8eb\n\nzwt(b ) \uf8f8 \uf8ed\n\nX\n\n\u03bc\u2208Q+\n\n\uf8f6\n\n\uf8eb\n\nH\u03c1 (\u03bc; q) z\u03c1\u2212\u03bc \uf8f8 = \uf8ed\n\u2032\n\nG\u03c1 (b; q) zwt(b \u2297b) .\n\nX\n\nb\u2032 \u2208B\u03bb\n\n\u2032\n\n\uf8f6\uf8eb\n\nzwt(b ) \uf8f8 \uf8ed\n\nX\n\nb\u2208B\u03c1\n\n\uf8f6\n\nG\u03c1 (b; q)zwt(b) \uf8f8\n\nb\u2032 \u2297b\u2208B\u03bb \u2297B\u03c1\n\n\u0003\nThe following proposition provides useful information on H\u03bb+\u03c1 (\u03bc; q) \u2208 Z[q \u22121 ].\nProposition 2.15. Assume that \u03bb \u2208 P+ . Then we have H\u03bb+\u03c1 (\u03bc; q) is a nonzero polynomial if\nand only if \u03bb + \u03c1 \u2212 \u03bc is a weight of V (\u03bb + \u03c1).\nProof. We obtain from (2.14) that if H\u03bb+\u03c1 (\u03bc; q) 6= 0 then \u03bb + \u03c1 \u2212 \u03bc is a weight of V (\u03bb) \u2297 V (\u03c1).\nThen \u03bb + \u03c1 \u2212 \u03bc is a weight of V (\u03bb + \u03c1) by Lemma 2.11. Conversely, assume that \u03bb + \u03c1 \u2212 \u03bc is a\nweight of V (\u03bb + \u03c1), so a weight of V (\u03bb) \u2297 V (\u03c1). By Corollary 2.9 (2),\nX\n\u2032\nH\u03bb+\u03c1 (\u03bc\u2032 ; \u22121)z\u03bb+\u03c1\u2212\u03bc = \u03c7(V (\u03bb) \u2297 V (\u03c1)).\n\u03bc\u2032 \u2208Q+\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n15\n\nSince \u03bb + \u03c1 \u2212 \u03bc is a weight of V (\u03bb) \u2297 V (\u03c1), the coefficient H\u03bb+\u03c1 (\u03bc; \u22121) 6= 0. Then H\u03bb+\u03c1 (\u03bc; q) is\na nonzero polynomial.\n\n\u0003\n\n3. Applications\nWe give several applications of our formulas to q-deformation of (multi-)partition functions\nand modular forms, and Kostant's function and multiplicity formula. We also obtain formulas\nfor H\u03bb (\u03bc; q).\n3.1. multi-partition functions and modular forms. We will write P = P(1). For a partition\np = (1m1 2m2 * * * r mr * * * ) \u2208 P, we define\n\n\u03baq (p) =\n\n\uf8f1\nP\n\uf8f2(\u2212q \u22121 ) mr\n\nif mr = 0 or 1 for all r,\n\n\uf8f30\n\nWe define for k \u2265 1\n\notherwise.\n\n\u01ebq (k) =\n\nX\n\n\u03baq (p),\n\np\u2208P\n|p|=k\n\nand set \u01ebq (0) = 1. For example, we have \u01ebq (5) = 2q \u22122 \u2212 q \u22121 and \u01ebq (6) = \u2212q \u22123 + 2q \u22122 \u2212 q \u22121 .\nFrom the definitions, we have\n\u221e\nY\n\n(1 \u2212 q\n\n\u22121 k\n\nt ) =1+\n\nX\n\n\u03baq (p)t\n\n|p|\n\n=1+\n\np\u2208P\n\nk=1\n\n\u221e\nX\n\n\u01ebq (k)tk .\n\nk=1\n\nThen it follows from Euler's Pentagonal Number Theorem that when q = 1, we have\n\n(3.1)\n\nWe also define for k \u2265 1\n\n\u01eb1 (k) =\n\n\uf8f1\n\uf8f2(\u22121)m\n\uf8f30\n\npq (k) =\n\nX\n\nif k = 21 m(3m \u00b1 1),\notherwise.\n\n(1 \u2212 q \u22121 )d(p) ,\n\np\u2208P\n|p|=k\n\nwhere d(p) is the same as in the previous sections, and we set pq (0) = 1. Note that if k > 0,\np\u221e (k) = p(k). Hence we can think of pq (k) as a q-deformation of the partition function.\n\n\f16\n\nHENRY KIM AND KYU-HWAN LEE\n\nProposition 3.2. If k > 0, then\n(3.3)\n\n\u01ebq (k) \u2212 pq (k) =\n\n\u221e\nX\n\n\u001b\n\u001a\n1\n1\n(\u22121)\npq (k \u2212 m(3m \u2212 1)) + pq (k \u2212 m(3m + 1)) ,\n2\n2\nm\n\nm=1\n\nwhere we define pq (M ) = 0 for all negative integer M .\nProof. We put n = 1 in Proposition 1.9 and obtain\n\uf8eb\n\uf8f6\n\u221e\n\u221e\nY\nX\nY\n(1 \u2212 zk\u03b4 ).\n(1 \u2212 q \u22121 )d(p) z|p|\u03b4 \uf8f8\n(1 \u2212 q \u22121 zk\u03b4 ) = \uf8ed\nk=1\n\nk=1\n\np\u2208P\n\nAfter the change of variables z\u03b4 = t, we obtain\n1+\n\n\u221e\nX\n\n\u01ebq (k)tk =\n\nk=1\n\n\u221e\nY\n\n(1 \u2212 q \u22121 tk )\n\nk=1\n\n\uf8eb\n\n= \uf8ed\n=\n\nX\n\n(1 \u2212 q\n\np\u2208P\n\n1+\n\n\u221e\nX\n\n\uf8f6\n\n\u22121 d(p) |p| \uf8f8\n\n)\n\npq (k)tk\n\nk=1\n\nt\n\n!\n\n\u221e\nY\n\n(1 \u2212 tk )\n\nk=1\n\n1+\n\n\u221e\nX\n\nn\n\n(\u22121)m t\n\nm=1\n\n1\nm(3m\u22121)\n2\n\n+t\n\n1\nm(3m+1)\n2\n\no\n\n!\n\n,\n\nwhere we use the definition of pq (k) and (3.1) in the last equality. We obtain the identity (3.3)\nby expanding the product and equating the coefficient of tk with \u01ebq (k).\n\n\u0003\n\nAs a corollary of the proof of Proposition 3.2, we obtain the following.\nCorollary 3.4. Let (a; q)n =\n\nQn\u22121\n\nk=0 (1\n\n\u2212 aq k ). Then\n\n\u221e\nX\n(q \u22121 ; t)n\n\nn=0\n\n(t; t)n\n\ntn =\n\n\u221e\nX\n\npq (k)tk .\n\nk=0\n\nProof. By the q-binomial theorem,\n\u221e\nY\n\n(1 \u2212 q\n\n\u22121 k\n\nt )=\n\n\u221e\nX\n(q \u22121 ; t)n\n\nn=0\n\nk=1\n\n(t; t)n\n\nt\n\nn\n\n!\n\n\u221e\nY\n\n(1 \u2212 tk ).\n\nk=1\n\nComparing this with the identity in the proof of Proposition 3.2, we obtain the result.\nRemark 3.5. When q \u2192 \u221e, we have\n\u221e\nX\n\nn=0\n\n\u221e\nX\nX\ntn\np(n)tn .\n=\nt|p| =\n(t; t)n\n\nThis is a special case of [1, Corollary 2.2].\n\np\u2208P\n\nn=0\n\n\u0003\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n17\n\nWe generalize Proposition 3.2 to the case of multi-partitions. For a multi-partition p =\n(\u03c1(1) , . . . , \u03c1(n) ) \u2208 P(n), we define\n\u03baq (p) =\n\nn\nY\n\n\u03baq (\u03c1(i) ),\n\ni=1\n\nand for k \u2265 1\n(3.6)\n\n\u01ebq,n (k) =\n\nX\n\n\u03baq (p),\n\np\u2208P(n)\n|p|=k\n\nand set \u01ebq,n (0) = 1. From the definitions, we have\n\u221e\nY\n\n(1 \u2212 q \u22121 tk )n = 1 +\n\nk=1\n\nX\n\n\u03baq (p)t|p| =\n\np\u2208P(n)\n\n\u221e\nX\n\n\u01ebq,n (k)tk .\n\nk=0\n\nOne can see that if k > 0, we have \u01eb\u221e,n (k) = 0.\nRemark 3.7. Note that \u01eb1,n (k) is a classical arithmetic function related to modular forms. For\nexample, we have \u01eb1,24 (k) = \u03c4 (k + 1), where \u03c4 (k) is the Ramanujan \u03c4 -function. Thus the function\n\u01ebq,n (k) should be considered as a q-deformation of the function \u01eb1,n (k).\nWe also define for k \u2265 1\npq,n (k) =\n\nX\n\n(1 \u2212 q \u22121 )d(p) ,\n\np\u2208P(n)\n|p|=k\n\nand set pq,n (0) = 1. Notice that if k > 0, the function p\u221e,n (k) is nothing but the multi-partition\nfunction with n-components. Hence we can think of pq,n (k) as a q-deformation of the multipartition function.\nProposition 3.8. If k > 0, then\n(3.9)\n\n\u01ebq,n (k) =\n\nk\nX\n\n\u01eb1,n (r)pq,n (k \u2212 r).\n\nr=0\n\nProof. We obtain from Proposition 1.9\n\uf8eb\n\uf8f6\n\u221e\n\u221e\nX\nY\nY\n\u22121 d(p) |p|\u03b4 \uf8f8\n\u22121 k\u03b4 n\n\uf8ed\n(1 \u2212 q )\nz\n(1 \u2212 zk\u03b4 )n .\n(1 \u2212 q z ) =\nk=1\n\np\u2208P(n)\n\nk=1\n\n\f18\n\nHENRY KIM AND KYU-HWAN LEE\n\nAfter the change of variables z\u03b4 = t, we obtain from the definitions\n\u221e\nX\nk=0\n\n\uf8eb\n\n\u01ebq,n (k)tk = \uf8ed\n\nX\n\np\u2208P(n)\n\n\u221e\nX\n\n=\n\n\uf8f6\n\n(1 \u2212 q \u22121 )d(p) t|p| \uf8f8\n\npq,n (r)t\n\nr=0\n\nr\n\n\u221e\nX\n\n!\n\n\u221e\nY\n\n(1 \u2212 tk )n\n\nk=1\n\n\u01eb1,n (s)t\n\ns\n\ns=0\n\n!\n\n.\n\nNow the identity (3.9) is clear.\n\n\u0003\n\nBy taking q \u2192 \u221e, we obtain the following identity\n\n0=\n\nk\nX\n\n\u01eb1,n (r)p\u221e,n (k \u2212 r),\n\nk > 0,\n\nr=0\n\nwhere p\u221e,n (k) is the multi-partition function with n-components. This classical identity is also\na consequence of the following identities:\n\u221e\nY\n\n(1 \u2212 tk )n =\n\nk=1\n\n\u221e\nX\n\n\u01eb1,n (k)tk\n\nand\n\nk=0\n\n\u221e\nY\n\n(1 \u2212 tk )\u2212n =\n\nk=1\n\n\u221e\nX\n\np\u221e,n (k)tk .\n\nk=0\n\n(1)\n\nExample 3.10. When the affine Kac-Moody algebra g is of type X24 , X = A, B, C or D, we\nhave\n\u01ebq,24 (k) =\n\nk\nX\n\n\u03c4 (r + 1)pq,24 (k \u2212 r)\n\nr=0\n\nand\n0=\n\nk\nX\n\n\u03c4 (r + 1)p\u221e,24 (k \u2212 r),\n\nr=0\n\nwhere \u03c4 (k) is the Ramanujan \u03c4 -function. If k = 2, the first identity becomes\n\u01ebq,24 (2) = \u03c4 (1)pq,24 (2) + \u03c4 (2)pq,24 (1) + \u03c4 (3)pq,24 (0).\nThrough some computations, we obtain\n\u01ebq,24 (2) = 276q \u22122 \u2212 24q \u22121 .\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n19\n\nOn the other hand, we have\n\u03c4 (1)pq,24 (2) + \u03c4 (2)pq,24 (1) + \u03c4 (3)pq,24 (0)\n= pq,24 (2) \u2212 24pq,24 (1) + 252\n= {276(1 \u2212 q \u22121 )2 + 48(1 \u2212 q \u22121 )} \u2212 24 * 24(1 \u2212 q \u22121 ) + 252\n= 276(1 \u2212 q \u22121 )2 \u2212 528(1 \u2212 q \u22121 ) + 252\n= 276q \u22122 \u2212 24q \u22121 = \u01ebq,24 (2).\nWe also see that\n\u03c4 (1)p\u221e,24 (2) + \u03c4 (2)p\u221e,24 (1) + \u03c4 (3)p\u221e,24 (0) = 324 \u2212 24 * 24 + 252 = 0.\nNow we consider the whole set of positive roots, not just the set of imaginary positive roots,\nand obtain interesting identities. We begin with the identity (2.3). Recalling the description of\nthe set of positive roots, we obtain\nY\nX\n(1 \u2212 q \u22121 z\u2212\u03b1 )mult \u03b1\nH\u03c1 (\u03bc; q)z\u2212\u03bc = z\u2212\u03c1 \u03c7q (V (\u03c1)) =\n\u03b1\u2208\u2206+\n\n\u03bc\u2208Q+\n\n(3.11)\n\n\uf8eb\n\n= \uf8ed\n\n\u221e\nY\n\nY\n\n(1 \u2212 q \u22121 z\u2212k\u03b4 )n\n\n\u03b1\u2208\u2206cl\n\nk=1\n\n\uf8f6\n\n(1 \u2212 q \u22121 z\u03b1\u2212k\u03b4 )\uf8f8\n\nY\n\n(1 \u2212 q \u22121 z\u2212\u03b1 ),\n\n\u03b1\u2208\u2206+\ncl\n\nwhere \u2206cl is the set of classical roots.\nP\nLet Z = { \u03b1\u2208Q+ c\u03b1 z\u2212\u03b1 | c\u03b1 \u2208 C} be the set of (infinite) formal sums. Recall that we have\n\nthe element d \u2208 h such that \u03b10 (d) = 1 and \u03b1j (d) = 0, j \u2208 I \\ {0}. Let hZ be the Z-span of\n{h0 , h1 , . . . , hn , d}. We define the evaluation map EVt : Z \u00d7 hZ \u2192 C[[t]] by\n!\nX\nX\n\u2212\u03b1\nc\u03b1 z , s =\nc\u03b1 t\u03b1(s) ,\ns \u2208 hZ .\nEVt\n\u03b1\n\n\u03b1\n\nThen we see that EVt (*, d) is the same as the basic specialization in [14, p.219] with q replaced\n\nby t. We apply EVt (*, d) to (3.11) and obtain\n(3.12)\n\n+\n\n(1 \u2212 q \u22121 )|\u2206cl |\n\n\u221e\nY\n\n(1 \u2212 q \u22121 tk )dim gcl =\n\nk=1\n\n\u221e\nX\nk=0\n\n\uf8eb\n\uf8ed\n\nX\n\n\u03bc\u2208Q+,cl\n\n\uf8f6\n\nH\u03c1 (k\u03b10 + \u03bc; q)\uf8f8 tk ,\n\nwhere gcl is the finite-dimensional simple Lie algebra corresponding to g, and Q+,cl is the Z\u22650 span of {\u03b11 , . . . , \u03b1n }. We write |\u2206+\ncl | = r and dim gcl = N so that N = 2r + n. By comparing\nQ\u221e\nP\nk\n(3.12) with the identity k=1 (1 \u2212 q \u22121 tk )n = \u221e\nk=0 \u01ebq,n (k)t , we obtain:\n\n\f20\n\nHENRY KIM AND KYU-HWAN LEE\n\nProposition 3.13.\nX\n\n\u01ebq,N (k) =\n\n\u03bc\u2208Q+,cl\n\n.\nH\u03c1 (k\u03b10 + \u03bc; q) (1 \u2212 q \u22121 )r .\n\nBy Definition 2.2, \u01ebq,N (k) is a power series in q \u22121 in the above formula. However, one can see\nfrom (3.6) that \u01ebq,N (k) is actually a polynomial in q \u22121 .\n(1)\n\nExample 3.14. We take g to be of type A4 . Then the classical Lie algebra gcl is of type A4 ,\nand r = |\u2206+\ncl | = 10 and N = dim gcl = 24. Taking the limit q \u2192 1, we obtain\n.\nX\nH\u03c1 (k\u03b10 + \u03bc; q) (1 \u2212 q \u22121 )10 .\n\u03c4 (k + 1) = lim\nq\u21921\n\nTherefore the sum\n\nP\n\n\u03bc\u2208Q+,cl\n\n\u03bc\u2208Q+,cl\n\nH\u03c1 (k\u03b10 +\u03bc; q) is always divisible by (1\u2212q \u22121 )10 . However, the famous\n\nLehmer's conjecture predicts that the sum is never divisible by (1 \u2212 q \u22121 )11 .\n3.2. Kostant's function and the polynomial H\u03bb (\u03bc; q). In this subsection, let g be a finitedimensional simple Lie algebra (finite type) or an untwisted affine Kac-Moody algebra (affine\ntype).\nDefinition 3.15. We define the functions Kq\u221e (\u03bc) and Kq1 (\u03bc) by\nX\n\nKq\u221e (\u03bc)z\u03bc =\n\n\u03bc\u2208Q+\n\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1 X\n=\n(1 \u2212 q \u22121 )d(\u03c6(b) zwt(b)\n1 \u2212 z\u03b1\n\n\u03b1\u2208\u2206+\n\nb\u2208G\n\nand\nX\n\n\u03bc\u2208Q+\n\nKq1 (\u03bc)z\u03bc =\n\nY\n\n1 \u2212 q \u22121 z\u03b1\n\n\u03b1\u2208\u2206+\n\nWe set Kq\u221e (\u03bc) = Kq1 (\u03bc) = 0 if \u03bc 6\u2208 Q+ .\n\n\u0001\u2212mult \u03b1\n\n=\n\nX\n\nq \u2212|\u03c6(b)| zwt(b) .\n\nb\u2208G\n\nRemark 3.16.\n\u221e (\u03bc) with q = \u221e and K 1 (\u03bc) with q = 1 are equal to the classi(1) Note that both K\u221e\n1\n\ncal Kostant's partition function K(\u03bc). Hence both of them can be considered as qdeformation of Kostant's function.\n(2) The function Kq1 (\u03bc) was introduced by Lusztig [19] for finite types. See also S. Kato's\npaper [15]. On the other hand, the function Kq\u221e (\u03bc) for finite types can be found in the\nwork of Guillemin and Rassart [13].\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n21\n\nWe obtain from the Casselman-Shalika formula (Proposition 2.6)\nX\nz\u2212\u03bb \u03c7(V (\u03bb)) =\n(dim V (\u03bb)\u03bb\u2212\u03b2 )z\u2212\u03b2\n\u03b2\u2208Q+\n\n= z\u2212\u03bb\u2212\u03c1 \u03c7q (V (\u03bb + \u03c1))\n\nY\n\n(1 \u2212 q \u22121 z \u2212\u03b1 )\u2212mult \u03b1\n\n\u03b1\u2208\u2206+\n\n\uf8eb\n\n= \uf8ed\n\nX\n\n\u03bc\u2208Q+\n\n\uf8f6\uf8eb\n\nH\u03bb+\u03c1 (\u03bc; q)z\u2212\u03bc \uf8f8 \uf8ed\n\nX\n\n\u03bd\u2208Q+\n\n\uf8f6\n\nKq1 (\u03bd)z\u2212\u03bd \uf8f8 .\n\nTherefore, we have a q-deformation of the Kostant's multiplicity formula:\nProposition 3.17.\ndim V (\u03bb)\u03bb\u2212\u03b2 =\n\nX\n\nH\u03bb+\u03c1 (\u03bc; q)Kq1 (\u03b2 \u2212 \u03bc).\n\n\u03bc\u2208Q+\n\nIn order to see that this is indeed a q-deformation of the Kostant's multiplicity formula, we\nneed to determine the value of H\u03bb+\u03c1 (\u03bc; 1).\nLemma 3.18. We have\nH\u03bb+\u03c1 (\u03bc; 1) =\n\n\uf8f1\n\uf8f2(\u22121)l(w)\n\uf8f3\n\nif w \u25e6 \u03bb = \u2212\u03bc for some w \u2208 W,\n\n0\n\notherwise,\n\nwhere we define w \u25e6 \u03bb = w(\u03bb + \u03c1) \u2212 \u03bb \u2212 \u03c1 for w \u2208 W and \u03bb \u2208 P+ .\nNote that such an element w \u2208 W is unique if it exists, so there is no ambiguity in the assertion.\nProof. From Definition 2.2, we obtain\nX\nX\nH\u03bb+\u03c1 (\u03bc; 1)z\u03bb+\u03c1\u2212\u03bc =\n(\u22121)l(w) zw(\u03bb+\u03c1) .\nw\u2208W\n\n\u03bc\u2208Q+\n\nThe condition \u03bb + \u03c1 \u2212 \u03bc = w(\u03bb + \u03c1) is equivalent to w \u25e6 \u03bb = \u2212\u03bc. It completes the proof.\n\n\u0003\n\nNow we take q = 1 in Proposition 3.17 and use Lemma 3.18 to obtain the classical Kostant's\nmultiplicity formula\ndim V (\u03bb)\u03bb\u2212\u03b2 =\n\nX\n\n(\u22121)l(w) K(w \u25e6 \u03bb + \u03b2).\n\nw\u2208W\n\nNote that the sum is actually a finite sum. Indeed, we have w \u25e6 \u03bb < 0 for each w \u2208 W and\nw \u25e6 \u03bb + \u03b2 \u2265 0 only for finitely many w \u2208 W for fixed \u03bb \u2208 P+ and \u03b2 \u2208 Q+ . For the same reason,\nthe sum in (3.23) below is also a finite sum.\n\n\f22\n\nHENRY KIM AND KYU-HWAN LEE\n\nRemark 3.19. We have obtained in the previous section (Corollary 2.10)\n(3.20)\n\nH\u03bb+\u03c1 (\u03bc; \u221e) = dim V (\u03bb)\u03bb\u2212\u03bc ,\n\n(3.21)\n\nH\u03bb+\u03c1 (\u03bc; \u22121) = dim(V (\u03bb) \u2297 V (\u03c1))\u03bb+\u03c1\u2212\u03bc .\n\nWhen g is of finite type, we defined H\u03bb (\u03bc; q) in [16] as in Definition 2.2, and we can prove the\nanalogous results.\nWe derive a formula for H\u03bb+\u03c1 (\u03bc; q) in the following proposition.\nProposition 3.22.\n(3.23)\n\nX\n\nH\u03bb+\u03c1 (\u03bc; q) =\n\n(\u22121)l(w) Kq\u221e (w \u25e6 \u03bb + \u03bc).\n\nw\u2208W\n\nProof. We have from the definitions\n\u03c7q (V (\u03bb + \u03c1)) =\n\nX\n\nH\u03bb+\u03c1 (\u03bc; q)z\u03bb+\u03c1\u2212\u03bc\n\n\u03bc\u2208Q+\n\n=\n\nX\n\nw\u2208W\n\n\uf8f6\n!\uf8eb\nX\nKq\u221e (\u03bd)z\u2212\u03bd \uf8f8 .\n(\u22121)l(w) zw(\u03bb+\u03c1) \uf8ed\n\u03bd\u2208Q+\n\nThe identity in the proposition follows from expanding the product and comparing the coefficients.\n\u0003\nIf we take the limit q \u2192 \u221e in (3.23), we have from (3.20)\nX\ndim V (\u03bb)\u03bb\u2212\u03bc =\n(\u22121)l(w) K(w \u25e6 \u03bb + \u03bc),\nw\u2208W\n\nwhich is again the classical Kostant's multiplicity formula.\nIf we take q = \u22121 in (3.23), we obtain from (3.21)\nX\n\u221e\n(3.24)\ndim(V (\u03bb) \u2297 V (\u03c1))\u03bb+\u03c1\u2212\u03bc =\n(\u22121)l(w) K\u22121\n(w \u25e6 \u03bb + \u03bc).\nw\u2208W\n\nThis is a generalization of the formula in Theorem 1 of [13] to the affine case.\n(1)\n\nExample 3.25. Assume that g is of type A1 . We write \u03bc = m\u03b10 + n\u03b11 = (m, n) \u2208 Q+ and set\n\u03bb = 0 in (3.23). Through standard computation, we obtain that\n\u001b\n\u001a\nk(k \u2212 1)\nk(k + 1)\n,n \u2212\n) k\u2208Z .\n{w\u03c1 + \u03bc \u2212 \u03c1 | w \u2208 W } = (m \u2212\n2\n2\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n23\n\nThus we have\nX\n\nH\u03c1 (m, n; q) =\n\n(\u22121)k Kq\u221e (m \u2212\n\nk\u2208Z\n\nk(k \u2212 1)\nk(k + 1)\n,n \u2212\n).\n2\n2\n\nBy taking the limit q \u2192 \u221e, we obtain for (m, n) 6= (0, 0)\n0=\n\nX\nk(k + 1)\nk(k \u2212 1)\n(\u22121)k K(m \u2212\n,n \u2212\n).\n2\n2\nk\u2208Z\n\nIn this case, K(m, n) counts the number of vector partitions of (m, n) into parts of the forms\n(a, a), (a \u2212 1, a) or (a, a \u2212 1). Then one can see that we have obtained (3.9) on p.148 in [11].\nWe further investigate properties of the function H\u03bb (\u03bc; q). From the definitions of Kq\u221e (\u03bc) and\nKq1 (\u03bc), we have\n\uf8f6\n\uf8f6\uf8eb\n\uf8eb\nX\nX\n\uf8ed\nKq1 (\u03bd)z\u03bd \uf8f8 =\nKq\u221e (\u03bc)z\u03bc \uf8f8 \uf8ed\n\u03bc\u2208Q+\n\nY \u0012 1 \u2212 q \u22121 z\u03b1 \u0013mult \u03b1 Y\n\u0001\u2212mult \u03b1\n1 \u2212 q \u22121 z\u03b1\n\u03b1\n1\u2212z\n\u03b1\u2208\u2206+\n\u03b1\u2208\u2206+\nX\nY\nK(\u03b2)z\u03b2 ,\n(1 \u2212 z\u03b1 )\u2212mult \u03b1 =\n=\n\n\u03bd\u2208Q+\n\n\u03b2\u2208Q+\n\n\u03b1\u2208\u2206+\n\nwhere K(\u03b2) is the classical Kostant's function. Thus we have\nX\n\n(3.26)\n\nKq\u221e (\u03bc)Kq1 (\u03b2 \u2212 \u03bc) = K(\u03b2),\n\n\u03bc\u2208Q+\n\nand we obtain, for \u03b2 > 0,\n(3.27)\n\nKq\u221e (\u03b2) = K(\u03b2) \u2212 Kq1 (\u03b2) \u2212\n\nX\n\nKq\u221e (\u03bd)Kq1 (\u03b2 \u2212 \u03bd),\n\n0<\u03bd<\u03b2\n\nand Kq\u221e (0) = Kq1 (0) = K(0) = 1.\nThen we obtain from Proposition 3.22\nH\u03bb+\u03c1 (\u03bc; q) = H\u03bb+\u03c1 (\u03bc; 1) +\n\nX\n\n(\u22121)l(w) K(w \u25e6 \u03bb + \u03bc) \u2212\n\nw\u2208W\n\nX\n\n(\u22121)l(w) Kq1 (w \u25e6 \u03bb + \u03bc)\n\nw\u2208W\n\n\u2212\n\nX\n\nw\u2208W\nw\u25e6\u03bb+\u03bc>0\n\n(\u22121)l(w)\n\nX\n\nKq\u221e (\u03bd)Kq1 (w \u25e6 \u03bb + \u03bc \u2212 \u03bd),\n\n0<\u03bd<w\u25e6\u03bb+\u03bc\n\nwhere H\u03bb+\u03c1 (\u03bc; 1) plays the role of correction term for the case w \u25e6 \u03bb + \u03bc = 0. See Lemma 3.18 for\nthe value of H\u03bb+\u03c1 (\u03bc; 1). Also we used the fact that K(\u03b2) = Kq1 (\u03b2) = Kq\u221e (\u03b2) = 0 unless \u03b2 \u2265 0.\nNow we apply the classical Kostant formula and get the following proposition.\n\n\f24\n\nHENRY KIM AND KYU-HWAN LEE\n\nProposition 3.28. Assume that \u03bb \u2208 P+ and \u03bc \u2208 Q+ . Then we have\nX\nH\u03bb+\u03c1 (\u03bc; q) = H\u03bb+\u03c1 (\u03bc; 1) + dim V (\u03bb)\u03bb\u2212\u03bc \u2212\n(\u22121)l(w) Kq1 (w \u25e6 \u03bb + \u03bc)\nw\u2208W\n\n\u2212\n\nX\n\nX\n\n(\u22121)l(w)\n\nKq\u221e (\u03bd)Kq1 (w \u25e6 \u03bb + \u03bc \u2212 \u03bd).\n\n0<\u03bd<w\u25e6\u03bb+\u03bc\n\nw\u2208W\nw\u25e6\u03bb+\u03bc>0\n\nFor the rest of this section, we assume that g is of finite type. We denote by \u03c1\u2228 the element of\nh defined by h\u03b1i , \u03c1\u2228 i = 1 for all the simple roots \u03b1i . The following identity was conjectured by\nLusztig [19] and proved by S. Kato [15].\nProposition 3.29. For \u03bb \u2208 P+ and \u03bc \u2208 Q+ , we have\nX\n\u2228\n(\u22121)l(w) Kq1 (w \u25e6 \u03bb + \u03bc) = q \u2212h\u03bc,\u03c1 i Pw\u03bb\u2212\u03bc ,w\u03bb (q),\nw\u2208W\n\nwhere w\u03bd is the element in the affine Weyl group \u0174 corresponding to \u03bd \u2208 P+ and Pw\u03bb\u2212\u03bc ,w\u03bb (q) is\nthe Kazhdan-Lusztig polynomial.\nHence we obtain from Proposition 3.28:\nCorollary 3.30.\n\u2228\n\nH\u03bb+\u03c1 (\u03bc; q) = H\u03bb+\u03c1 (\u03bc; 1) + dim V (\u03bb)\u03bb\u2212\u03bc \u2212 q \u2212h\u03bc,\u03c1 i Pw\u03bb\u2212\u03bc ,w\u03bb (q)\nX\nX\n\u2212\n(\u22121)l(w)\nw\u2208W\nw\u25e6\u03bb+\u03bc>0\n\nKq\u221e (\u03bd)Kq1 (w \u25e6 \u03bb + \u03bc \u2212 \u03bd).\n\n0<\u03bd<w\u25e6\u03bb+\u03bc\n\nSetting q = 1, and noting that K1\u221e (\u03b2) = 0 if \u03b2 > 0, we see the famous property of the\nKazhdan-Lusztig polynomial: dim V (\u03bb)\u03bb\u2212\u03bc = Pw\u03bb\u2212\u03bc ,w\u03bb (1).\n\nReferences\n[1] G. E. Andrews, The theory of partitions, Encyclopedia of Mathematics and its Applications, Vol. 2, AddisonWesley Publishing Co., Reading, Mass.-London-Amsterdam, 1976.\n[2] J. Beck, V. Chari and A. Pressley, An algebraic characterization of the affine canonical basis, Duke Math. J.\n99 (1999), no. 3, 455\u2013487.\n[3] J. Beck and H. Nakajima, Crystal bases and two-sided cells of quantum affine algebras, Duke Math. J. 123\n(2004), no. 2, 335\u2013402.\n[4] A. Braverman, D. Kazhdan and M. Patnaik, The Iwahori-Hecke algebra for an affine Kac-Moody group, in\npreparation.\n\n\fQUANTUM AFFINE ALGEBRAS AND q-DEFORMATION OF ARITHMETICAL FUNCTIONS\n\n25\n\n[5] B. Brubaker, D. Bump, G. Chinta, S. Friedberg and J. Hoffstein, Weyl group multiple Dirichlet series. I,\nMultiple Dirichlet series, automorphic forms, and analytic number theory, 91\u2013114, Proc. Sympos. Pure Math.,\n75, Amer. Math. Soc., Providence, RI, 2006.\n[6] B. Brubaker, D. Bump, S. Friedberg and J. Hoffstein, Weyl group multiple Dirichlet series. III. Eisenstein\nseries and twisted unstable Ar , Ann. of Math. (2) 166 (2007), no. 1, 293\u2013316.\n[7] B. Brubaker, D. Bump and S. Friedberg, Weyl group multiple Dirichlet series. II. The stable case, Invent.\nMath. 165 (2006), no. 2, 325\u2013355.\n, Weyl Group Multiple Dirichlet Series: Type A Combinatorial Theory, to appear as a volume in Annals\n\n[8]\n\nof Mathematics Studies, Princeton University Press.\n[9]\n\n, Weyl group multiple Dirichlet series, Eisenstein series and crystal bases, to appear in Ann. of Math.\n\n[10] D. Bump and M. Nakasuji, Integration on p-adic groups and crystal bases, to appear in Proc. Amer. Math.\nSoc.\n[11] L. Carlitz, Generating functions and partition problems, Proc. Sympos. Pure Math., Vol. VIII pp. 144\u2013169,\n1965, Amer. Math. Soc., Providence, R.I.\n[12] G. Chinta and P. Gunnells, Constructing Weyl group multiple Dirichlet series, J. Amer. Math. Soc. 23 (2010),\nno. 1, 189\u2013215.\n[13] V. Guillemin and E. Rassart, Signature quantization and representations of compact Lie groups, Proc. Natl.\nAcad. Sci. USA 101 (2004), no. 30, 10884\u201310889.\n[14] V. G. Kac, Infinite-dimensional Lie algebras, Third edition, Cambridge University Press, Cambridge, 1990.\n[15] S. Kato, Spherical functions and a q-analogue of Kostant's weight multiplicity formula, Invent. Math. 66\n(1982), no. 3, 461\u2013468.\n[16] H. H. Kim and K.-H. Lee, Representation theory of p-adic groups and canonical bases, submitted.\n[17] M. Kashiwara, On crystal bases of the q-analogue of universal enveloping algebras, Duke Math. J. 63 (1991),\nno. 2, 465\u2013516.\n[18] G. Lusztig, Canonical bases arising from quantized enveloping algebras, J. Amer. Math. Soc. 3 (1990), no. 2,\n447\u2013498.\n, Singularities, character formulas, and a q-analog of weight multiplicities, Analysis and topology on\n\n[19]\n\nsingular spaces, II, III (Luminy, 1981), 208\u2013229, Ast\u00e9risque, 101-102, Soc. Math. France, Paris, 1983.\n[20]\n\n, Introduction to quantum groups, Progress in Mathematics 110, Birkh\u00e4user Boston, Inc., Boston, MA,\n1993.\n\n[21] P. J. McNamara, Metaplectic Whittaker functions and crystal bases, to appear in Duke Math. J.\nDepartment of Mathematics, University of Toronto, Toronto, ON M5S 2E4, CANADA\nE-mail address: henrykim@math.toronto.edu\nDepartment of Mathematics, University of Connecticut, Storrs, CT 06269, U.S.A.\nE-mail address: khlee@math.uconn.edu\n\n\f"}