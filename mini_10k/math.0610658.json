{"id": "http://arxiv.org/abs/math/0610658v1", "guidislink": true, "updated": "2006-10-22T08:16:11Z", "updated_parsed": [2006, 10, 22, 8, 16, 11, 6, 295, 0], "published": "2006-10-22T08:16:11Z", "published_parsed": [2006, 10, 22, 8, 16, 11, 6, 295, 0], "title": "Projectivity of Hopf algebras over subalgebras with semilocal central\n  localizations", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0610644%2Cmath%2F0610044%2Cmath%2F0610951%2Cmath%2F0610040%2Cmath%2F0610074%2Cmath%2F0610108%2Cmath%2F0610480%2Cmath%2F0610349%2Cmath%2F0610042%2Cmath%2F0610897%2Cmath%2F0610612%2Cmath%2F0610550%2Cmath%2F0610902%2Cmath%2F0610666%2Cmath%2F0610865%2Cmath%2F0610682%2Cmath%2F0610955%2Cmath%2F0610076%2Cmath%2F0610798%2Cmath%2F0610201%2Cmath%2F0610826%2Cmath%2F0610966%2Cmath%2F0610120%2Cmath%2F0610528%2Cmath%2F0610233%2Cmath%2F0610604%2Cmath%2F0610848%2Cmath%2F0610973%2Cmath%2F0610500%2Cmath%2F0610410%2Cmath%2F0610471%2Cmath%2F0610293%2Cmath%2F0610570%2Cmath%2F0610308%2Cmath%2F0610452%2Cmath%2F0610985%2Cmath%2F0610325%2Cmath%2F0610380%2Cmath%2F0610847%2Cmath%2F0610974%2Cmath%2F0610298%2Cmath%2F0610814%2Cmath%2F0610970%2Cmath%2F0610231%2Cmath%2F0610339%2Cmath%2F0610115%2Cmath%2F0610416%2Cmath%2F0610572%2Cmath%2F0610658%2Cmath%2F0610216%2Cmath%2F0610422%2Cmath%2F0610723%2Cmath%2F0610548%2Cmath%2F0610804%2Cmath%2F0610839%2Cmath%2F0610899%2Cmath%2F0610745%2Cmath%2F0610821%2Cmath%2F0610643%2Cmath%2F0610608%2Cmath%2F0610485%2Cmath%2F0610226%2Cmath%2F0610097%2Cmath%2F0610795%2Cmath%2F0610499%2Cmath%2F0610611%2Cmath%2F0610510%2Cmath%2F0610245%2Cmath%2F0610571%2Cmath%2F0610398%2Cmath%2F0610240%2Cmath%2F0610869%2Cmath%2F0610406%2Cmath%2F0610177%2Cmath%2F0610968%2Cmath%2F0610061%2Cmath%2F0610918%2Cmath%2F0610127%2Cmath%2F0610048%2Cmath%2F0610690%2Cmath%2F0610580%2Cmath%2F0610200%2Cmath%2F0610075%2Cmath%2F0610946%2Cmath%2F0610083%2Cmath%2F0610938%2Cmath%2F0610711%2Cmath%2F0610193%2Cmath%2F0610290%2Cmath%2F0610107%2Cmath%2F0610314%2Cmath%2F0610182%2Cmath%2F0610058%2Cmath%2F0610208%2Cmath%2F0610464%2Cmath%2F0610372%2Cmath%2F0610808%2Cmath%2F0610365%2Cmath%2F0610150%2Cmath%2F0610880%2Cmath%2F0610224&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Projectivity of Hopf algebras over subalgebras with semilocal central\n  localizations"}, "summary": "Some new results on the module structure of Hopf algebras over a certain\nclass of Hopf subalgebras and right coideal subalgebras are proved.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0610644%2Cmath%2F0610044%2Cmath%2F0610951%2Cmath%2F0610040%2Cmath%2F0610074%2Cmath%2F0610108%2Cmath%2F0610480%2Cmath%2F0610349%2Cmath%2F0610042%2Cmath%2F0610897%2Cmath%2F0610612%2Cmath%2F0610550%2Cmath%2F0610902%2Cmath%2F0610666%2Cmath%2F0610865%2Cmath%2F0610682%2Cmath%2F0610955%2Cmath%2F0610076%2Cmath%2F0610798%2Cmath%2F0610201%2Cmath%2F0610826%2Cmath%2F0610966%2Cmath%2F0610120%2Cmath%2F0610528%2Cmath%2F0610233%2Cmath%2F0610604%2Cmath%2F0610848%2Cmath%2F0610973%2Cmath%2F0610500%2Cmath%2F0610410%2Cmath%2F0610471%2Cmath%2F0610293%2Cmath%2F0610570%2Cmath%2F0610308%2Cmath%2F0610452%2Cmath%2F0610985%2Cmath%2F0610325%2Cmath%2F0610380%2Cmath%2F0610847%2Cmath%2F0610974%2Cmath%2F0610298%2Cmath%2F0610814%2Cmath%2F0610970%2Cmath%2F0610231%2Cmath%2F0610339%2Cmath%2F0610115%2Cmath%2F0610416%2Cmath%2F0610572%2Cmath%2F0610658%2Cmath%2F0610216%2Cmath%2F0610422%2Cmath%2F0610723%2Cmath%2F0610548%2Cmath%2F0610804%2Cmath%2F0610839%2Cmath%2F0610899%2Cmath%2F0610745%2Cmath%2F0610821%2Cmath%2F0610643%2Cmath%2F0610608%2Cmath%2F0610485%2Cmath%2F0610226%2Cmath%2F0610097%2Cmath%2F0610795%2Cmath%2F0610499%2Cmath%2F0610611%2Cmath%2F0610510%2Cmath%2F0610245%2Cmath%2F0610571%2Cmath%2F0610398%2Cmath%2F0610240%2Cmath%2F0610869%2Cmath%2F0610406%2Cmath%2F0610177%2Cmath%2F0610968%2Cmath%2F0610061%2Cmath%2F0610918%2Cmath%2F0610127%2Cmath%2F0610048%2Cmath%2F0610690%2Cmath%2F0610580%2Cmath%2F0610200%2Cmath%2F0610075%2Cmath%2F0610946%2Cmath%2F0610083%2Cmath%2F0610938%2Cmath%2F0610711%2Cmath%2F0610193%2Cmath%2F0610290%2Cmath%2F0610107%2Cmath%2F0610314%2Cmath%2F0610182%2Cmath%2F0610058%2Cmath%2F0610208%2Cmath%2F0610464%2Cmath%2F0610372%2Cmath%2F0610808%2Cmath%2F0610365%2Cmath%2F0610150%2Cmath%2F0610880%2Cmath%2F0610224&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Some new results on the module structure of Hopf algebras over a certain\nclass of Hopf subalgebras and right coideal subalgebras are proved."}, "authors": ["S. Skryabin"], "author_detail": {"name": "S. Skryabin"}, "author": "S. Skryabin", "arxiv_comment": "plain tex, 31pp", "links": [{"href": "http://arxiv.org/abs/math/0610658v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0610658v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.RA", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.RA", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0610658v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0610658v1", "journal_reference": null, "doi": null, "fulltext": "arXiv:math/0610658v1 [math.RA] 22 Oct 2006\n\nProjectivity of Hopf algebras over subalgebras\nwith semilocal central localizations\nSerge Skryabin\nChebotarev Research Institute, Universitetskaya St. 17, 420008 Kazan, Russia\nE-mail: Serge.Skryabin@ksu.ru\n\nIntroduction\nLet H be a Hopf algebra over a field k and A a right coideal subalgebra of H, that\nis, A is a subalgebra satisfying \u2206(A) \u2282 A \u2297 H where \u2206 is the comultiplication in H.\nIn case when H is finitely generated commutative, the right coideal subalgebras are\nintimately related to the homogeneous spaces for the corresponding group scheme.\nThe purpose of this paper is to extend the class of pairs A, H for which H is proved to\nbe either projective or flat as a module over A. As is known the faithful flatness over\nHopf subalgebras may be lacking in general. Examples given by Schauenburg [26]\nuse some extremely big Hopf algebras coming from a universal construction of [31].\nPositive results can be expected therefore only under some finiteness assumptions.\nA Hopf algebra is called residually finite dimensional [19] if its ideals of finite\ncodimension have zero intersection. Many important classes of Hopf algebras are\nresidually finite dimensional. Among them are the finitely generated commutative\nHopf algebras, the universal enveloping algebras of finite dimensional Lie algebras,\nand also Hopf algebras related to quantum groups.\nWe say that a ring R has semilocal localizations with respect to a central subring\nZ if for each maximal ideal m of Z the localization Rm of R at the multiplicatively\nclosed set Z r m is a semilocal ring whose Jacobson radical contains mRm . For\ninstance, this property is satisfied for any ring module-finite over a central subring.\nFor each ring R let MR and R M denote the categories of right and left R-modules,\nrespectively.\nTheorem 0.1. Let H be a residually finite dimensional Hopf algebra, and let A be\na Hopf subalgebra having semilocal localizations with respect to a central subring Z.\nThen H is a projective generator in MA and in A M.\nTheorem 0.2. Let A \u2282 B \u2282 H where H is a residually finite dimensional Hopf\nalgebra, B is a Hopf subalgebra, and A is a right coideal subalgebra having semilocal\nlocalizations with respect to a central subring Z. Suppose B is right module-finite\nover A and the antipode of B is bijective. Then H is a projective generator in MA .\nIn both theorems we encounter projective modules of a very special kind. In fact\nH \u2297A Am is a free Am -module for any maximal ideal m of Z. When dim H < \u221e,\nTheorem 0.2 applies to an arbitrary right coideal subalgebra A since we may take\nZ = k. In this case H is a free A-module, which generalizes the Nichols-Zoeller\n1\n\n\ffreeness theorem [22]. The investigation of the freeness over right coideal subalgebras\nin the finite dimensional case was initiated in [13], [17], and the full solution was\nobtained in [28].\nOver coideal subalgebras one can expect a Hopf algebra to be a flat module\nrather than faithfully flat or projective. If H = k[G] is the function algebra of an\naffine group scheme G of finite type over k then for any group subscheme K of G\nthe function algebra A = k[K \\G] on the right homogeneous space K \\G is a right\ncoideal subalgebra of H. There are many cases where K \\G is quasiaffine, and so\nK \\G may be identified with an open subscheme U of the affine scheme Spec A.\nSince the canonical morphism G \u2192 K \\G is flat, H is always flat over A. However,\nthe faithful flatness and projectivity are obtained precisely when U = Spec A, i.e.,\nwhen K \\G is affine.\nTheorem 0.3. Let A \u2282 B \u2282 H where H is a directed union of residually finite\ndimensional Hopf subalgebras, B is any Hopf subalgebra, and A is a right coideal\nsubalgebra contained in the center of B. Then H is flat in MA . If A is a Hopf\nsubalgebra then H is a projective generator in MA and in A M.\nAny commutative Hopf algebra H is a directed union of finitely generated Hopf\nsubalgebras, and those are residually finite dimensional. In this case Theorem 0.3\napplies to an arbitrary right coideal subalgebra A; we recover the projectivity result\nof Takeuchi [32] and the flatness result of Masuoka and Wigner [18]. Our result is\nnew even when A is a central Hopf subalgebra of H. An interesting known example\nis the quantized function algebra at a root of unity; this Hopf algebra contains the\nordinary function algebra of a semisimple algebraic group in its center. Projectivity\nwas proved in this case by De Concini and Lyubashenko [10]; they needed detailed\ninformation about quantized function algebras.\nSeveral related results are known where H is not assumed to be residually finite\ndimensional, but there are restrictions of a different kind. As was established by\nSchneider [27], any left or right noetherian Hopf algebra is a faithfully flat module over central Hopf subalgebras. More recently Wu and Zhang [33] discovered\nthat the projectivity holds for finite extensions of finitely generated PI Hopf algebras under certain finiteness assumptions about injective or projective dimensions.\nOf a somewhat different flavor are results for pointed Hopf algebras [14], [24] or\nHopf algebras with cocommutative coradical [16] which impose a restriction on the\ncoalgebra structure rather than the algebra structure.\nAs was emphasized in [28], it is natural to investigate projectivity in the more\ngeneral settings where A is assumed to be a (right) H-comodule algebra. Such an\nalgebra A has a right H-comodule structure given by an algebra homomorphism\n\u03c1A : A \u2192 A\u2297H. With A one associates the category of right Hopf modules MH\nA [11],\n[32]. The objects of MH\nhave\nstructures\nof\na\nright\nA-module\nand\na\nright\nH-comodule\nA\nsuch that the comodule structure map \u03c1M : M \u2192 M \u2297H becomes an MA -morphism\nif we let A operate on M \u2297 H via \u03c1A . When A and H are commutative, MH\nA is\nequivalent to the category of G-linearized quasicoherent sheaves on Spec A, where\nG is the group scheme corresponding to H. As usual we use the term \"H-costable\"\nin the sense \"stable under the coaction of H\".\nProblem 1. Let A be an H-simple H-comodule algebra, i.e., A has no H-costable\nideals other than 0 and A. For what classes of algebras is every nonzero object of\nMH\nA a projective generator in MA ?\n2\n\n\fWhen H = k is the trivial Hopf algebra, the H-simplicity of A means that A is\nsimple, and the question asks whether all right A-modules are projective. Certainly,\nthis holds if and only if A is artinian. In general Problem 1 is meaningful under\nthe assumption that A has a simple artinian factor ring. This is automatic for\nsubalgebras of H since the counit \u03b5 : H \u2192 k makes k into a factor algebra of any\nsubalgebra. In order to treat flatness we want to weaken the assumption about the\nH-simplicity of A.\nProblem 2. Let A be an H-costable subalgebra of an H-comodule algebra B. Suppose that IB = B for each nonzero H-costable ideal I of A. For what classes of\nalgebras is every object of MH\nB flat in MA ?\nThere is a dual formulation for (left) H-module algebras. Here A is an algebra\nwhich has a left H-module structure compatible with the multiplication; MH\nA is\nreplaced with the category H MA whose objects have a right A-module structure\nand a compatible left H-module structure. Working with module algebras gives\nsome advantage since in this case the coalgebra structure on H is important, and\nwe can use the family of finite dimensional subcoalgebras. In fact we are only able\nto approach Problems 1 and 2 for H-comodule algebras by making a reduction to\nsimilar questions for module algebras over the finite dual H \u25e6 of H. The correct\ncorrespondence between the H-comodule structure and the H \u25e6 -module structure is\navailable when H is residually finite dimensional. This explains why this kind of\nrestriction on H appears in Theorems 0.1\u20130.3.\nAn object M \u2208 H MA is called A-finite if M is finitely generated as an A-module;\nM is locally A-finite if M is a directed union of A-finite subobjects. Theorem 5.6\nprovides a projectivity result for locally A-finite objects of H MA assuming that A\nhas semilocal localizations with respect to a central subring. This unifies the cases\nof commutative algebras and semilocal ones considered in [28].\nThe short proof of the previous result proposed in [28] for the case of commutative A and cocommutative H is based on three properties of the Fitting ideals\nof a finitely generated A-module M : (1) these ideals contain enough information\nto recognize projective modules of constant rank, (2) they behave functorially with\nrespect to the change of ring, (3) they are stable under a compatible action of H.\nThe definition of the Fitting ideals involves computing determinants, so it does not\ngeneralize to noncommutative rings.\nIn section 1 of the present article we introduce certain ideals Ir (M ) of a ring R\nfor any rational number r \u2265 0 and a finitely generated right R-module M imposing\nsome assumptions about the localizations Rm at the maximal ideals of a central\nsubring of R. There are analogs, though less satisfactory, of the three properties\nmentioned above. When R = A is an H-module algebra with semilocal central\nlocalizations and M \u2208 H MA , the ideals Ir (M ) are not H-stable in general. Our\nexpectation is that the normalized rank rP (M ) at a maximal ideal P of A is determined by those rational values r for which P contains the smallest H-stable ideal\nJr (M ) of A such that Ir (M ) \u2282 Jr (M ). When this holds, rP (M ) = rQ (M ) for any\npair P, Q of maximal ideals of A containing the same H-stable ideals. This property\ncan be viewed as the H-invariance of the rank function P 7\u2192 rP (M ) defined on the\nmaximal spectrum Max A of A. We are able to prove it only under some technical\nrestrictions. As a result, we gain less control over the situation in those cases where\nA is not H-simple. This leads to more restrictive assumptions about A when dealing\nwith flatness.\n3\n\n\fWe will use standard notation from the theory of Hopf algebras [19], [30]. For\neach ring R denote by Jac(R) the Jacobson radical of R, by Max R and Spec R the\nmaximal and prime spectra of R. A ring R is semilocal if R/ Jac(R) is artinian;\na semilocal ring with a single maximal ideal is quasilocal. A semilocal ring R is\nsemiprimary if Jac(R) is nilpotent; a semiprimary ring with a single maximal ideal\nis primary. Denote by Z+ the semigroup of positive integers.\n1. Construction of ideals\nLet R be a ring. If M \u2208 MR is generated by elements e1 , . . . , en , we denote by\nIe1 ,...,en the ideal of R generated by all elements of R which occur as a coefficient\nin a zero linear combination e1 x1 + * * * + en xn = 0 with x1 , . . . , xn \u2208 R.\nLemma 1.1. Suppose that e1 , . . . , en generate M \u2208 MR . If \u03c6 : R \u2192 R\u2032 is a ring\nhomomorphism and e\u2032i = ei \u2297 1 \u2208 M \u2297R R\u2032 , then Ie\u20321 ,...,e\u2032n = R\u2032 \u03c6(Ie1 ,...,en )R\u2032 .\nProof. Let \u03b8 : Rn \u2192 M be the epimorphism in MR sending the standard generators\nof the free module Rn to e1 , . . . , en . For i = 1, . . . , n denote by \u03c0i P\n: Rn \u2192 R the\nprojection onto the ith summand. The ideal Ie1 ,...,en is generated by \u03c0i (K) where\nK = Ker \u03b8. Tensoring with R\u2032 , we get an exact sequence of R\u2032 -modules\n\u03b8\u2297id\n\n\u03b1\u2297id\n\nK \u2297R R\u2032 \u2212\u2212\u2212\u2192 Rn \u2297R R\u2032 \u2212\u2212\u2212\u2192 M \u2297R R\u2032 \u2192 0\nwhere \u03b1 : K \u2192 Rn is the inclusion map. We have an isomorphism Rn \u2297R R\u2032 \u223c\n= R\u2032n\nn\n\u2032\n\u2032\nwith \u03c0i \u2297 id : R \u2297R R \u2192 R giving the projection onto\nHence\nP the ith summand.\nIe\u20321 ,...,e\u2032n coincides with the ideal of R\u2032 generated by\n(\u03c0i \u2297 id)(K \u2032 ) where K \u2032 =\nKer(\u03b8 \u2297 id). Since K \u2032 is equal to the image of \u03b1 \u2297 id, the conclusion is clear. \u0003\nRecall that R is said to be weakly finite if for each integer n > 0 every generating\nset for the free right R-module Rn containing exactly n elements is a basis for Rn ;\nequivalently, every R-module epimorphism Rn \u2192 Rn is an isomorphism. This can\nalso be reformulated in terms of invertibility of n \u00d7 n-matrices with entries in R.\nLemma 1.2. Suppose that all factor rings of R are weakly finite. If e1 , . . . , en and\ne\u20321 , . . . , e\u2032n are two systems of generators for M having the same number of elements\nthen Ie\u20321 ,...,e\u2032n = Ie1 ,...,en .\nProof. This follows from [28, Lemma 2.3]. By that lemma Ie\u20321 ,...,e\u2032n \u2282 Ie1 ,...,en since\nR/Ie1 ,...,en is weakly n-finite. The opposite inclusion holds by symmetry. \u0003\nIf R has weakly finite factor rings and M is n-generated then we put\nIn (M ) = Ie1 ,...,en\nwhere e1 , . . . , en is any set of n generators for M . By Lemma 1.2 the above ideal\ndoes not depend on the choice of a generating set. The ideals Ir (M ) are thus defined\nfor all integers r \u2265 \u03bc(M ) where \u03bc(M ) denotes the minimal number of generators\nfor M . When M = 0 we put \u03bc(M ) = 0 and I0 (M ) = 0 for consistency reasons.\nWe do not indicate the base ring explicitly in the notation for Ir (M ). Given a\nring homomorphism R \u2192 R\u2032 , let Ir (M \u2297R R\u2032 ) be the ideal of R\u2032 corresponding to\nthe induced R\u2032 -module M \u2297R R\u2032 (when defined). Especially, this convention will be\nin force when R\u2032 is either a factor ring or an Ore localization of R.\n4\n\n\fLemma 1.3. Suppose that R, R\u2032 are two rings with weakly finite factor rings,\n\u03c6 : R \u2192 R\u2032 a homomorphism and M , N two finitely generated right R-modules.\n(i) Ir (M ) = R for all integers r > \u03bc(M ).\n(ii) M \u223c\n= Rn if and only if M is n-generated with In (M ) = 0.\n(iii) Ir+s (M \u2295 N ) = Ir (M ) + Is (N ) for all integers r \u2265 \u03bc(M ) and s \u2265 \u03bc(N ).\n(iv) Irt (M t ) = Ir (M ) for all integers r \u2265 \u03bc(M ) and t > 0.\n\u0001\n(v) Ir (M \u2297R R\u2032 ) = R\u2032 \u03c6 Ir (M ) R\u2032 for all integers r \u2265 \u03bc(M ).\nProof. (i) If r > \u03bc(M ) then M can be generated by r \u2212 1 elements, say e1 , . . . , er\u22121 .\nAdding another element er = 0, we get a set of r generators for M . Now Ir (M ) =\nIe1 ,...,er . However, 1 \u2208 Ie1 ,...,er since 1 is a coefficient in the relation er = 0.\n(ii) Let M be generated by e1 , . . . , en . Clearly, e1 , . . . , en is a basis for M if and\nonly if Ie1 ,...,en = 0.\n(iii) Let us identify M and N with submodules of M \u2295 N . Pick generating sets\ne1 , . . . , erP\n, e\u20321 , . . . , e\u2032s\ne1 , . . . , er for M and e\u20321 , . . . , e\u2032s for N . Then the r + s elementsP\ngenerate M \u2295 N . Given xP\nys \u2208 R, the equality\nei xi + e\u2032j yj = 0\n1 , . . . , xr , y1 , . . . ,P\n\u2032\nholds if and only if both\nei xi = 0 and\nej yj = 0. Hence\nIe1 ,...,er ,e\u20321 ,...,e\u2032s = Ie1 ,...,er + Ie\u20321 ,...,e\u2032s .\n(iv) This follows from (iii) by induction on t.\n(v) This is a restatement of Lemma 1.1. \u0003\nSuppose that M \u2208 MR is finitely generated and r \u2265 0 is a rational number. The\nset {l \u2208 Z+ | rl \u2265 \u03bc(M l )} is closed under addition since \u03bc(M l+t ) \u2264 \u03bc(M l ) + \u03bc(M t )\nfor all l, t \u2208 Z+ . If the inequality rl \u2265 \u03bc(M l ) holds for at least one l then we can\nfind such an l with the property that rl \u2208 Z, replacing l with a suitable multiple if\nnecessary. We put then\nIr (M ) = Irl (M l ),\nwhich does not depend on the choice of an l with the above properties. In fact, if\nt \u2208 Z+ also satisfies rt \u2208 Z and rt \u2265 \u03bc(M t ) then Irl (M l ) = Irlt (M lt ) = Irt (M t )\nby (iv) of Lemma 1.3. If r \u2208 Z and r \u2265 \u03bc(M ) then the initial definition of Ir (M )\nagrees with the newer one since l = 1 satisfies the required properties.\nWe say that r is M -admissible if rl \u2265 \u03bc(M l ) for some l \u2208 Z+ . We have defined\nthe ideals Ir (M ) for all M -admissible rational numbers. All statements in the next\nlemma immediately reduce to the corresponding statements in Lemma 1.3.\nLemma 1.4. Retaining the assumptions about R, R\u2032 , \u03c6, M , N as in Lemma 1.3,\nlet r \u2208 Q be M -admissible and s \u2208 Q be N -admissible.\n(i) Ir (M ) = R whenever rl > \u03bc(M l ) for some l \u2208 Z+ .\n(ii) M l \u223c\n= Rn for integers l > 0, n \u2265 0 if and only if n \u2265 \u03bc(M l ) and In/l (M ) = 0.\n(iii) Ir+s (M \u2295 N ) = Ir (M ) + Is (N ).\n(iv) Irt (M t ) = Ir (M ) for all t \u2208 Z+ .\n\u0001\n(v) Ir (M \u2297R R\u2032 ) = R\u2032 \u03c6 Ir (M ) R\u2032 .\nPart (v) of this lemma is valid in a slightly more general situation where R is\nnot assumed to have weakly finite factor rings.\n5\n\n\fLemma 1.5. Suppose that r \u2208 Q is M -admissible. Then R has an ideal K such\nthat Ir (M \u2297R R\u2032 ) = R\u2032 \u03c6(K)R\u2032 for any homomorphism \u03c6 : R \u2192 R\u2032 into a ring R\u2032\nwith weakly finite factor rings.\nProof. There exists l \u2208 Z+ such that n = rl \u2208 Z and n \u2265 \u03bc(M l ). Then M l is\ngenerated by n elements, say e1 , . . . , en . Take K = Ie1 ,...,en . For any \u03c6 satisfying\nthe hypotheses the R\u2032 -module M l \u2297R R\u2032 is generated by e\u20321 , . . . , e\u2032n where e\u2032i = ei \u2297 1\nfor each i. Lemma 1.1 yields Ir (M \u2297R R\u2032 ) = In (M l \u2297R R\u2032 ) = Ie\u20321 ,...,e\u2032n = R\u2032 \u03c6(K)R\u2032 .\n\u0003\nIf M \u2208 MR is finitely generated and P \u2208 Max R is such that R/P is simple\nartinian, then we put\nlength M/M P\nrP (M ) =\nlength R/P\nwhere length stands for the composition series length in MR .\nIf R is semilocal then the set Max R is finite and coincides with the set of\nprimitive ideals of R. For each P \u2208 Max R the ring R/P is simple artinian, so that\nrP (M ) is defined. Recall that any semilocal ring is weakly finite. Moreover, all factor\nrings of such a ring are themselves semilocal, hence weakly finite.\nLemma 1.6. Suppose R is semilocal, M \u2208 MR is finitely generated and r \u2208 Q.\n(i) \u03bc(M ) = min{n \u2208 Z | n \u2265 rP (M ) for all P \u2208 Max R}.\n(ii) r is M -admissible if and only if r \u2265 rP (M ) for all P \u2208 Max R.\nQ\nProof. (i) Let J = Jac(R). We have M/MJ \u223c\n= P \u2208Max R M/M P since R/J is\nsemisimple artinian. It follows from Nakayama's Lemma that M is n-generated if\nand only if so is M/M P for each P . Since every R/P -module is isomorphic to\na direct sum of copies of the simple module, M/M P is an epimorphic image of\n(R/P )n if and only if length M/M P \u2264 length (R/P )n , which can be rewritten as\nrP (M ) \u2264 n.\n(ii) Put m = max{rP (M ) | P \u2208 Max R}. It was proved in (i) that \u03bc(M l ) is equal\nto the smallest integer n such that n \u2265 rP (M l ) = rP (M )l for all P , i.e., n \u2265 ml.\nThus rl \u2265 \u03bc(M l ) implies r \u2265 m. If r = m then the required inequality holds for\nany l \u2208 Z+ such that ml \u2208 Z. \u0003\nLet Z \u2282 R be a central subring. Denote by Rz and Rp , respectively, the localizations of R at the multiplicatively closed subsets {z i | i = 0, 1, . . .} and Z r p\nwhere z \u2208 Z is any element and p a prime ideal of Z. Similarly, Mz and Mp will\ndenote the respective localizations of M \u2208 MR . If M is finitely generated, then Mz\nis a finitely generated Rz -module and Mp a finitely generated Rp -module. For each\nrational number r \u2265 0 put\nTr (M ) = {z \u2208 Z | r is Mz -admissible},\ner (M ) = {p \u2208 Spec Z | r is Mp -admissible},\nU\n\nUr (M ) = {m \u2208 Max Z | r is Mm -admissible}.\nThe open subsets D(z) = {p \u2208 Spec Z | z \u2208\n/ p} with z \u2208 Z give a basis for the\ntopology on Spec Z. If p \u2208 D(z) then Rp is a localization of Rz and Mp \u223c\n= Mz \u2297Rz Rp ,\nl\nl\ne\nwhence \u03bc(Mp ) \u2264 \u03bc(Mz ) for each l \u2208 Z+ . It follows that D(z) \u2282 Ur (M ) whenever\nz \u2208 Tr (M ).\n6\n\n\fer (M ) is contained in D(z) for some z \u2208 Tr (M ). Hence\nLemma 1.7. Any p \u2208 U\ner (M ) is open in Spec Z and Ur (M ) = U\ner (M ) \u2229 Max Z is open in Max Z.\nU\n\nProof. Let l > 0 be an integer such that n = rl \u2208 Z and n \u2265 \u03bc(Mpl ). We can find n\nelements e1 , . . . , en \u2208 M l whose images in Mpl generate the latter Rp -module. For\neach x \u2208 M l there exists z \u2208 Z r p such that xz is an R-linear combination of\ne1 , . . . , en . As M l is finitely generated, we can find a z which fulfills the required\nproperty for all x simultaneously. Then the Rz -module Mzl is generated by the images of e1 , . . . , en , whence n \u2265 \u03bc(Mzl ). Thus z \u2208 Tr (M ) and D(z) is a neighborhood\ner (M ). \u0003\nof p contained in U\n\nLemma 1.8. Suppose that mRm \u2282 Jac(Rm ) for each m \u2208 Max Z. Then any finite\nsubset X \u2282 Ur (M ) is contained in D(z) for some z \u2208 Tr (M ).\n\nl\nProof. We can find l \u2208 Z+ such that n = rl \u2208 Z and n \u2265 \u03bc(Mm\n) for all m \u2208 X.\nl\nl\n\u223c\nSince Mm /Mm m = M/M m, we have n \u2265 \u03bc(M /M m) for m \u2208 X. Since\nQ m+n=Z\nfor any pair of distinct ideals m, n \u2208 X, the canonical map M l \u2192 m\u2208X M l /M l m\nis surjective by Chinese Remainder Theorem. There exist e1 , . . . , en \u2208 M l whose\ncosets modulo m generate the R-module M l/M l m for each m \u2208 X. Then for each\nl\nl\nl\nm \u2208 X the images of e1 , . . . , en in Mm\ngenerate the Rm -module Mm\nmodulo Mm\nm;\nl\nby Nakayama's Lemma Mm is generated by those images.\nFor x \u2208 M l denote by ax the ideal of Z consisting of those elements z \u2208 Z for\nl\nwhich xz lies in the submodule N of M l generated\nby e1 , . . . , en . Since Nm = Mm\n,\nS\nwe have ax 6\u2282 m for any m \u2208 X; hence ax 6\u2282 m\u2208X m [4, Ch. II, \u00a71, Prop. 2]. So\nthere exists z \u2208 Z which lies in none of the ideals from X and satisfies xz \u2208 N .\nAs M l is finitely generated, we can find a z which fulfills that property for all x\nsimultaneously. We obtain z \u2208 Tr (M ) and X \u2282 D(z). \u0003\n\nFurther on in this section we make the following assumption:\n(A) Rm has weakly finite factor rings and mRm \u2282 Jac(Rm ) for each m \u2208 Max Z.\nQ\nSince R is embedded in m\u2208Max Z Rm , the weak finiteness of R follows from the\nweak finiteness of all localizations Rm . This observation, applied to the factor rings\nof R, shows that R has weakly finite factor rings provided that so do all rings Rm .\nLet M \u2208 MR be finitely generated and r \u2208 Q. When r is M -admissible, we have\nUr (M ) = Max Z and Ir (Mm ) = Ir (M )Rm for all m \u2208 Max Z by Lemma 1.4(v).\nEvery ideal of R is completely determined by its extensions to the rings Rm . In\nparticular, Ir (M ) consists precisely of those elements a \u2208 R whose image am in Rm\nbelongs to Ir (Mm ) for each m \u2208 Max Z.\nWe now extend the range of r in the definition of Ir (M ) to arbitrary nonnegative\nvalues. The ideal Ir (Mm ) of Rm has already been defined when m \u2208 Ur (M ). Put\nIr (M ) = {a \u2208 R | am \u2208 Ir (Mm ) for each m \u2208 Ur (M )}.\nClearly Ir (M ) is an ideal of R. If Ur (M ) = \u2205 then Ir (M ) = R.\nLemma 1.9. If Ur (M ) is quasicompact, then Ir (M )Rm = Ir (Mm ) for m \u2208 Ur (M ).\nProof. The ideals of Rm are extensions of ideals of R. Fixing m, we have to show\nthat for each a \u2208 R with am \u2208 Ir (Mm ) there exists s \u2208 Z r m such that as \u2208 Ir (M ),\ni.e., an sn \u2208 Ir (Mn ) for all n \u2208 Ur (M ).\n7\n\n\fSuppose that m \u2208 D(z) where z \u2208 Tr (M ). As r is Mz -admissible, Lemma 1.5 can\nbe applied to the Rz -module Mz . Let K be the ideal of Rz given by that lemma. For\neach n \u2208 D(z) \u2229 Max Z the ring Rn is a localization of Rz , whence Ir (Mn ) = KRn\nby Lemma 1.5. Applying this formula with m = n, we deduce that az tz \u2208 K for a\nsuitable t \u2208 Z r m where az , tz denote the images of a, t in Rz . Passing now to Rn ,\nwe see that an tn \u2208 Ir (Mn ) for any n as above.\nGiven an arbitrary n \u2208 Ur (M ), there exists z \u2208 Tr (M ) such that {m, n} \u2282 D(z)\nby Lemma 1.8. Hence Ur (M ) is covered by the open subsets D(z) with z \u2208 Tr (M ),\nz \u2208\n/ m. Since Ur (M ) is quasicompact, we have Ur (M ) \u2282 D(z1 ) \u222a * * * \u222a D(zn ) for\nsome elements z1 , ..., zn \u2208 Tr (M ) such that m \u2208 D(zi ) for each i = 1, . . . , n. We\nhave seen that for each i there exists ti \u2208 Z r m such that an (ti )n \u2208 Ir (Mn ) for all\nn \u2208 D(zi ) \u2229 Max Z. Now s = t1 * * * tn is the desired element. \u0003\nRemark. The topological space Max Z is always quasicompact. Hence Lemma 1.9\napplies for any r with Ur (M ) = Max Z. If Max Z is noetherian (e.g., if Z/ Jac(Z)\nis noetherian), then every open subset of Max Z is quasicompact. In this case any\nnonnegative value of r is legitimate.\nLemma 1.10. Let \u03c6 : R \u2192 R\u2032 be a ring homomorphism where R satisfies (A),\nwhile R\u2032 has weakly finite factor rings. Suppose that Ur (M ) is quasicompact and\n\u2032\nthere exists\n) such that \u03c6(z)\n\u0001 \u2032 is invertible in R for each\nS a finite subset X \u2282 Ur (M\n\u2032\n\u2032\nz \u2208 Z r m\u2208X m. Then Ir (M \u2297R R ) = R \u03c6 Ir (M ) R .\nProof. By Lemma 1.8 there exists z \u2208 Tr (M ) such that X \u2282 D(z), so that z lies in\nnone of the ideals m \u2208 X. Since \u03c6(z) is invertible, \u03c6 extends to a homomorphism\n\u03c8 : Rz \u2192 R\u2032 . Recall that r is Mz -admissible by the definition of Tr (M ). Let K\nbe the ideal of Rz given by Lemma 1.5, when applied to the Rz -module Mz . Then\nIr (M \u2297R R\u2032 ) = R\u2032 \u03c8(K)R\u2032 , and also Ir (Mm ) = KRm for each m \u2208 X as in the\nproof of Lemma 1.9. Thus the two ideals K and Ir (M )Rz of Rz have the same\nextensionSto each ring Rm with m \u2208 X. Given any a \u2208 K, there exists therefore\ns \u2208 Z r m\u2208X m such that asz \u2208 Ir (M )Rz where sz denotes the image of s \u0001in Rz .\nSince \u03c8(s\u0001z ) = \u03c6(s) is invertible in R\u2032 , we deduce that \u03c8(a) \u2208 \u03c8 Ir (M )Rz R\u2032 =\n\u2032\n\u03c6 Ir (M ) R\u2032 . Similarly, given\n\u0001 \u2032 any a \u2208 Ir (M ), we prove that \u03c6(a) \u2208 \u03c8(K)R . Hence\n\u2032\n\u2032\n\u2032\nR \u03c8(K)R = R \u03c6 Ir (M ) R , and we are done. \u0003\nRemark. Lemma 1.10 will be used in the special case where \u03c6 is the canonical\nhomomorphism onto a factor ring R\u2032 of R. Suppose that R\u2032 has finitely many\nmaximal ideals and \u03c6\u22121 (P ) \u2229 Z \u2208 Ur (M ) for each P \u2208 Max R\u2032 . Take\nX = {\u03c6\u22121 (P ) \u2229 Z | P \u2208 Max R\u2032 }.\nIf z \u2208 Z, then \u03c6(z)R\u2032 is an ideal of R\u2032 ; hence either \u03c6(z)R\u2032 = R\u2032 or \u03c6(z)R\u2032 is\ncontained in some P \u2208 Max R\u2032 . In the former case \u03c6(z) is invertible, while in the\nlatter case z \u2208 m for some m \u2208 X. When Ur (M ) is quasicompact and R\u2032 has weakly\nfinite factor rings, the hypotheses of Lemma 1.10 are satisfied.\nNote that Ur (M ) \u2282 Us (M ) whenever r, s \u2208 Q satisfy 0 \u2264 r \u2264 s. Put\n\u03bb(M ) = inf{r \u2208 Q | Ur (M ) = Max Z}.\nLemma 1.11. Suppose R satisfies (A), M is finitely generated and r \u2208 Q, r \u2265 0.\n8\n\n\f(i) Ir (M ) = R whenever r > \u03bb(M ).\n(ii) If Ur (M ) is quasicompact and Ir (M ) = 0 then for each m \u2208 Ur (M ) there exist\nn\nl \u223c\nin MRm .\nintegers l > 0 and n \u2265 0 such that r = n/l and Mm\n= Rm\n(iii) Irt (M t ) = Ir (M ) for all t \u2208 Z+ .\nProof. (i) Pick any s \u2208 Q such that \u03bb(M ) < s < r. Then Us (M ) = Max Z. For each\nl\nm \u2208 Max Z there exists l \u2208 Z+ such that rl > sl \u2265 \u03bc(Mm\n); Lemma 1.4(i) shows\nthat Ir (Mm ) = Rm . The conclusion is now immediate from the definition of Ir (M ).\nl\n(ii) If m \u2208 Ur (M ), then there exists l \u2208 Z+ such that n = rl \u2208 Z and n \u2265 \u03bc(Mm\n).\nBy Lemma 1.9 Ir (Mm ) = 0. Now we may apply Lemma 1.4(ii).\nt\n(iii) Note that Urt (M t ) = Ur (M ) by a straightforward check and Irt (Mm\n) =\nIr (Mm ) for each m \u2208 Ur (M ) by Lemma 1.4(iv). \u0003\nl \u223c\nn\nRemark. If the ring Rm is semilocal, then the isomorphism Mm\nin (ii)\n= Rm\nholds for any pair of integers l > 0 and n \u2265 0 such that r = n/l.\n\n2. Rings with semilocal central localizations\nWe will assume throughout the whole section that R has semilocal localizations\nwith respect to a central subring Z. Thus\nRm is semilocal and mRm \u2282 Jac(Rm ) for each m \u2208 Max Z.\nNote that R satisfies assumption (A) from section 1. Any factor ring R\u2032 of R has\nsemilocal localizations with respect to the image of Z in R\u2032 . In this section several\nproperties of the ring R will be stated for future use. Some of those are more or less\nknown.\nLemma 2.1. For any right primitive ideal P of R the ring R/P is simple artinian\nand P \u2229 Z \u2208 Max Z. Given m \u2208 Max Z, there are finitely many elements in the set\nMaxm R = {P \u2208 Max R | P \u2229 Z = m}.\nThe maximal ideals of Rm are precisely the ideals Pm = Rm P with P \u2208 Maxm R.\nProof. Let P be the annihilator of a simple right R-module V . Since 1 \u2208\n/ P , there\nexists m \u2208 Max Z such that P \u2229 Z \u2282 m. The transformation zV of V afforded by an\nelement z \u2208 Z is an MR -endomorphism. Hence the image and the kernel of zV are\nsubmodules of V . If z \u2208\n/ m, then V z 6= 0, whence V z = V and Ker zV = 0 by the\nsimplicity of V . In other words, zV is invertible for any z \u2208 Z r m. We may now\nregard V as a simple Rm -module. The condition mRm \u2282 Jac(Rm ) entails V m = 0,\ni.e., m \u2282 P . The maximality of m yields P \u2229 Z = m. Now P/mR is a right primitive\nideal of the factor ring R/mR \u223c\n= Rm /mRm . The latter is semilocal since so is Rm .\nHence R/mR has finitely many primitive ideals, and the factor algebra by any of\nthose is simple artinian.\nIf P is any ideal of R such that m \u2282 P for some m \u2208 Max Z, then Rm /Pm \u223c\n=\n(R/P )m \u223c\n= R/P ; in this case Pm \u2208 Max Rm if and only if P \u2208 Maxm R. Any ideal P \u2032\nof Rm coincides with Pm where P is the preimage of P \u2032 in R; if P \u2032 \u2208 Max Rm , then\nJac(Rm ) \u2282 P \u2032 , and the assumption about Rm yields m \u2282 P , so that P \u2208 Maxm R.\n\u0003\nSuppose further that M is a finitely generated right R-module.\n9\n\n\fLemma 2.2. If M a = M for some ideal a of Z then there exists a \u2208 a such that\nM (1 \u2212 a) = 0. In particular, a = Z whenever M is faithful.\nProof. For each m \u2208 Max Z the right Rm -module Mm is finitely generated and\nMm = Mm a. If a \u2282 m, then aRm \u2282 Jac(Rm ), which forces Mm = 0 by Nakayama's\nLemma. In this case any element of M is annihilated by some element in Z rm; since\nM is finitely generated over R and Z is in the center of R there exists z \u2208 Z r m\nsuch that M z = 0. Denote by b the annihilator of M in Z. We conclude that a + b\ncannot be contained in any maximal ideal of Z, whence a + b = Z. It follows that\n1 \u2212 a \u2208 b for some a \u2208 a. If M is faithful, we must have a = 1. \u0003\nLemma 2.3. For any r \u2208 Q, r \u2265 0, we have\nUr (M ) = {m \u2208 Max Z | rP (M ) \u2264 r for all P \u2208 Maxm R}.\nProof. Let m \u2208 Max Z. Lemma 1.6(ii) together with Lemma 2.1 and the definition\nof Ur (M ) in section 1 show that m \u2208 Ur (M ) if and only if rPm (Mm ) \u2264 r for all\nP \u2208 Maxm R. Since the image of Z r m in R/P consists of invertible elements, we\nhave Rm /Pm \u223c\n= M/M P , whence rPm (Mm ) = rP (M ). \u0003\n= R/P and Mm /Mm Pm \u223c\nLemma 2.4. The supremum r(M ) = sup{rP (M ) | P \u2208 Max R} is attained at some\nmaximal ideal of R.\nProof. Note that Max Z 6= Us (M ) for any s \u2208 Q such that 0 \u2264 s < r(M ). Indeed, if\nP \u2208 Max R satisfies rP (M ) > s, then P \u2229 Z is a maximal ideal of Z lying outside\nof Us (M ) by Lemma 2.3. Since Max Z is quasicompact and each Us (M ) is open in\nMax Z, we get\n[\nUs (M ).\nMax Z 6=\n0\u2264s<r(M)\n\nPick m \u2208 Max Z contained in none of the subsets Us (M ) with s < r(M ). Next, in\nthe finite set Maxm R pick P with the maximum value of rP (M ). By Lemma 2.3\nrP (M ) > s for any s \u2208 Q with s < r(M ). Hence rP (M ) = r(M ). \u0003\nLemma 2.5. Let K be an ideal of R such that R/K is semilocal, and let r = n/l for\nsome integers n \u2265 0, l > 0. Suppose that Ur (M ) is quasicompact and rQ (M ) \u2264 r\nfor each Q \u2208 Max R such that there exists P \u2208 Max R satisfying P \u2283 K and\nP \u2229 Z = Q \u2229 Z. Then:\n(i) Ir (M/M K) coincides with the image of Ir (M ) in R/K.\n(ii) Ir (M ) \u2282 K if and only if (M/M K)l \u223c\n= (R/K)n in MR .\n(iii) If Ir (M ) \u2282 K then rP (M ) = r for each P \u2208 Max R with P \u2283 K.\nProof. If m = P \u2229 Z where P \u2208 Max R, P \u2283 K, then we have rQ (M ) \u2264 r for\nall Q \u2208 Maxm R by the hypothesis; hence m \u2208 Ur (M ) according to Lemma 2.3.\nThe Remark following Lemma 1.10 now proves (i). Since rP (M )l \u2264 n for each\nP \u2208 Max R with P \u2283 K, the R/K-module (M/M K)l is n-generated by Lemma\n1.6. Hence (ii) follows from (i) and Lemma 1.4(ii). If (M/M K)l \u223c\n= (R/K)n , then\nn\nl \u223c\n(M/M P ) = (R/P ) for any P \u2208 Max R with P \u2283 K; the comparison of lengths of\nthe two modules appearing in the latter isomorphism yields (iii). \u0003\nn\nin MRm\nLemma 2.6. Suppose that there is an integer n \u2265 0 such that Mm \u223c\n= Rm\nfor each m \u2208 Max Z. Then M is projective; M is a generator in MR provided\nM 6= 0. For each m \u2208 Max Z there exists z \u2208 Z r m such that Mz \u223c\n= Rzn in MRz .\n10\n\n\fProof. We first prove that M is finitely presented. Consider any MR -epimorphism\n\u03c6 : Rm \u2192 M with kernel K. We have to check that K is finitely generated. For\neach m \u2208 Max Z the localization \u03c6m of \u03c6 at m gives rise to an exact sequence of\nm\nRm -modules 0 \u2192 Km \u2192 Rm\n\u2192 Mm \u2192 0. Since Mm is free, the sequence splits, and\nm\u2212n\nn\nm \u223c\nby the cancellation\nso Rm = Km \u2295 Rm . It follows that m \u2265 n and Km \u223c\n= Rm\nproperty for projective modules over a semilocal ring [2, Ch. IV, (1.4)].\nFor any fixed m we can pick m elements v1 , . . . , vm \u2208 Rm with the property that\nvn+1 , . . . , vm \u2208 K, the images of vn+1 , . . . , vm in Km give a basis for Km over Rm ,\nm\nand the images of v1 , . . . , vn in Rm\ngive a basis for a complementary summand.\n\u2032\nLet K and N be the submodules of Rm generated by vn+1 , . . . , vm and v1 , . . . , vn ,\nm\n\u2032\nrespectively. Since Rm\n= Km\n+Nm , there exists z \u2208 Z rm such that Rm z \u2282 K \u2032 +N .\nFor any n \u2208 Max Z with z \u2208\n/ n we have Rnm = Kn\u2032 + Nn . Since K \u2032 \u2282 K, it follows\nthat \u03c6n (Nn ) = Mn . The Rn -module Nn is generated by n elements. Since the ring\nRn is weakly finite and Mn \u223c\n= Rnn , the images of those elements in Mn are a basis\nfor Mn over Rn . In other words, \u03c6n induces an isomorphism of Nn onto Mn . Hence\nKn \u2229 Nn = 0, and therefore Kn = Kn\u2032 .\nDenote by U the collection of all open subsets U of Max Z with the property\nthat there exists a finitely generated submodule L \u2282 K, depending on U , such that\nKn = Ln for all n \u2208 U . We have just proved that each m \u2208 Max Z has an open\nneighborhood contained in U. It is also clear that U \u222a U \u2032 \u2208 U whenever U, U \u2032 \u2208 U.\nSince the space Max Z is quasicompact, we conclude that Max Z \u2208 U. This means\nthat there exists a finitely generated submodule L \u2282 K such that Kn = Ln for all\nn \u2208 Max Z. But then K = L. Thus M is finitely presented, as claimed.\nFor any fixed m we can find an MR -morphism \u03c8 : Rn \u2192 M whose localization\nn\nRm \u2192 Mm is an isomorphism. Since M is finitely generated, there exists s \u2208 Z r m\nsuch that the MRs -morphism \u03c8s : Rsn \u2192 Ms induced by \u03c8 is surjective. Since the\nRs -module Ms is finitely presented, Ker \u03c8s is finitely generated. Then Ker \u03c8s is\nannihilated by some element z \u2208 Z r m. We may assume that Zz is a localization\nof Zs , in which case \u03c8s induces an isomorphism Rzn \u2192 Mz .\nFor V \u2208 MR and m \u2208 Max Z the canonical map\nHomR (M, V ) \u2297Z Zm \u2192 HomRm (Mm , Vm )\nis bijective by [2, Ch. III, (4.5)]. Let now \u03be : HomR (M, V ) \u2192 HomR (M, W ) be the\nmap induced by an MR -epimorphism V \u2192 W . Since Mm is projective in MRm ,\nthe map \u03be \u2297 id : HomR (M, V ) \u2297Z Zm \u2192 HomR (M, W ) \u2297Z Zm is surjective for each\nm, but then \u03be is itself surjective. This proves that M is projective in MR .\nSuppose that M 6= 0. Then n 6= 0, and\nP so Mm 6= 0 for each m \u2208 Max Z. Denote\nby T the trace ideal of M . Thus T =\nf (M ) where f runs over HomR (M, R).\nSince HomRm (Mm , Rm ) \u223c\n= HomR (M, R) \u2297Z Zm , the trace ideal of the Rm -module\nMm coincides with Tm . It follows that Tm = Rm since Mm is free. As this is valid\nfor each m, we get T = R. This means that M is a generator. \u0003\nLemma 2.7. Let P \u2208 Spec R and m \u2208 Max Z. If P \u2229 Z \u2282 m then P \u2282 Q for some\nQ \u2208 Maxm R.\nProof. The hypothesis implies that 1 \u2208\n/ Pm . So Pm is contained in a maximal ideal\nof Rm , that is, an ideal Qm for some Q \u2208 Maxm R. Then P \u2282 Q. \u0003\nRecall that a Jacobson ring is a ring in which every prime ideal is an intersection\nof primitive ideals.\n11\n\n\fLemma 2.8. Let P \u2208 Spec R and p = P \u2229 Z. Suppose that Z is a Jacobson ring\nand Rp /pRp is an artinian ring. Then for any z \u2208 Z r p the intersection K of all\nideals Q \u2208 Max R such that P \u2282 Q and z \u2208\n/ Q coincides with P .\nProof. Clearly P \u2282 K. In view of Lemma 2.7 K \u2229 Z coincides with the intersection\nb of all ideals m \u2208 Max Z such that p \u2282 m and z \u2208\n/ m. Since Z is a Jacobson ring,\nwe have p = a \u2229 b where a denotes the intersection of all ideals m \u2208 Max Z such\nthat p \u2282 m and z \u2208 m. In particular, ab \u2282 p. Since z \u2208 a, we have a 6\u2282 p; hence\nb \u2282 p because p is prime. We conclude that K \u2229 Z = p.\nLet R\u2032 = Rp /Pp \u223c\n= R/P \u2297Z Zp . Since R/P is a prime ring, its central subring\nZ/p contains no zero divisors of R/P other than 0. Hence R/P is embedded into\nR\u2032 . The ring R\u2032 , as a homomorphic image of Rp /pRp , is artinian. Each nonzero\nideal of R\u2032 intersects R/P nontrivially. It follows that R\u2032 is prime, in which case\nR\u2032 is actually simple. If the ideal K \u2032 of R\u2032 generated by the image of K contained\n1, K/P would have a nonzero intersection with Z/p, which is impossible. We must\nhave K \u2032 = 0, which entails K/P = 0, i.e., K = P . \u0003\nRemark. If R is module-finite over Z, then Rp /pRp is a finite dimensional algebra\nover a field, so that the artinian hypothesis in Lemma 2.8 is fulfilled. In this case\npRp \u2282 Jac(Rp ) by [1, Corollary to Lemma 2] or [9, Lemma 3.1], which implies that\nRp is semilocal.\nIt is well-known that the Jacobson property goes up from Z to R in the modulefinite case. The first result of this kind, due to Curtis [9, Th. 4.3], assumed ACC\non Z-submodules of R. Subsequently several generalizations have been found, e.g.\n[8], [23], [25]. Under previous assumptions Rz is module-finite over Zz and Zz is\nJacobson by [4, Ch. V, \u00a73, Th. 3]; so Rz is Jacobson for any z \u2208 Z. This reduces to\nthe conclusion of Lemma 2.8.\n3. Semilocal factor algebras of module algebras\nSuppose that H is a Hopf algebra and A a left H-module algebra over the ground\nfield k. The compatibility of the H-module structure with the algebra structure on\nA is expressed by means of the identities\nX\nh1A = \u03b5(h)1A ,\nh(ab) =\n(h(1) a)(h(2) b)\nwhere h \u2208 H, a, b \u2208 A, and 1A is the unity element of A. For an ideal I of A and a\nsubcoalgebra C of H put\nIC = {a \u2208 A | Ca \u2282 I}.\nClearly IC is also an ideal of A. In particular, IH is the largest H-stable ideal of A\ncontained in I. If C, C \u2032 are two subcoalgebras with C \u2282 C \u2032 then IC \u2283 IC \u2032 .\nOur subsequent arguments require the factor algebras A/IC to be semilocal. We\nwish to know the cases in which this property of A/IC can be established.\nWe always consider Hom(C, A/I) equipped with the convolution multiplication.\nFor a \u2208 A define \u00e3 \u2208 Hom(C, A/I) by the rule\n\u00e3(c) = ca + I,\n\nc \u2208 C.\n\nThe map \u03c4 : A \u2192 Hom(C, A/I) given by the assignment a 7\u2192 \u00e3 is a homomorphism\nof algebras and Ker \u03c4 = IC . The inclusion k \u0592\u2192 A/I allows us to identify the dual\nalgebra C \u2217 of C with a subalgebra of Hom(C, A/I).\n12\n\n\fLemma 3.1. If dim C < \u221e, then Hom(C, A/I) = \u03c4 (A)C \u2217 and so Hom(C, A/I) is\nleft module-finite over \u03c4 (A).\nProof. The verification is straightforward. In case I = 0 the statement is contained\nin [29, Lemma 2.1(iv)]. The general case is immediate since the canonical projection\nA \u2192 A/I induces a surjective algebra homomorphism Hom(C, A) \u2192 Hom(C, A/I).\n\u0003\nRemark. It is probably not true that Hom(C, A/I) is right module-finite over\n\u03c4 (A) in case of Hopf algebras whose antipode is not bijective. This is essentially the\nreason for our use of left side conditions in this section.\nLemma 3.2. If C and A/I are finite dimensional, then so too is A/IC .\nThis is clear since A/IC is embedded into Hom(C, A/I).\nLemma 3.3. Let T be a ring left module-finite over a subring R. Suppose that R is\neither (a) left noetherian or (b) left module-finite over a commutative subring R\u2032 .\nIf T is left artinian (semiprimary, semilocal), then so too is R.\nProof. (i) If T is left artinian then R is left artinian by Bj\u00f6rk's results. In case (a)\n[3, Cor. 0.2] applies. In case (b) T is left module-finite over R\u2032 ; so R\u2032 is artinian\nby [3, Th. 3.3]. Then T has finite length as an R\u2032 -module with respect to left\nmultiplications, and the same holds for R.\n(ii) Suppose that T is semiprimary and J = Jac(T ). Part (i) shows that the\nsubring R/(J \u2229 R) of the artinian ring T /J is left artinian. Since J \u2229 R is a nilpotent\nideal of R, it is clear that R is semiprimary.\n(iii) A result of Camps and Dicks [6] says that a subring of a semilocal ring is\nitself semilocal provided that the subring is full, that is, each non-invertible element\nof the subring is not invertible in the ambient ring. We will check that R is a full\nsubring of T ; it will follow then that R is semilocal whenever so is T . Let x \u2208 R\nbe invertible in T . We have to show that x\u22121 \u2208 R. In case (a) T is a noetherian\nR-module on the left side. Hence the chain of submodules R \u2282 Rx\u22121 \u2282 Rx\u22122 \u2282 * * *\nis ultimately constant, i.e., x\u2212n \u2208 Rx1\u2212n for some n > 0. Multiplying by xn\u22121\nproves the claim.\nIn case (b) T is a finitely generated R\u2032 -module on the left side. The right multiplication by x\u22121 defines an endomorphism\nf of that module. Since R\u2032 is commutative,\nPn\u22121\nn\ni\nf satisfies an equation f = i=0 ci f for some n > 0 and c0 , . . . , cn\u22121 \u2208 R\u2032 . Then\nPn\u22121\n\u2212i\nwe have tx\u2212n =\nfor all t \u2208 T . Substituting t = 1, we deduce that\ni=0 ci tx\nP\nn\u22121\n\u2212n\n\u2032 \u2212i\n1\u2212n\nx \u2208 i=0 R x \u2282 Rx\n, which leads to the desired conclusion. \u0003\nLemma 3.4. Suppose that dim C < \u221e and A is either left noetherian or left modulefinite over a commutative subring. If A/I is left artinian (semiprimary, semilocal),\nthen so too is A/IC .\nProof. We take T = Hom(C, A/I) and R = \u03c4 (A). By Lemma 3.1 T is left modulefinite over R. Let us identify T with the algebra C \u2217 \u2297 A/I by means of the canonical\nisomorphism. Thus T is left module-finite over the subring 1 \u2297 A/I isomorphic\nto A/I. If A/I is left artinian, so is T . Since the finite dimensional subalgebra\nC \u2217 \u2297 1 centralizers 1 \u2297 A/I, the ideal J = C \u2217 \u2297 Jac(A/I) of T is contained in the\nJacobson radical of T [15, Prop. 5.7]. If A/I is semilocal, then T /J is artinian, and\nit follows that T is semilocal. If A/I is semiprimary then J is nilpotent; hence T is\n13\n\n\fsemiprimary. Since A/IC \u223c\n= \u03c4 (A), an application of Lemma 3.3 yields all conclusions\nof Lemma 3.4. \u0003\nRemark. The conclusion of Lemma 3.4 can be rephrased in the language of [20,\nDef. 3.4] as follows: the action of H on A is F -continuous where F is the filter\nconsisting of those ideals I of A for which A/I is left artinian in one case, semiprimary in the second and semilocal in the third. Another result of this kind will be\npresented in Lemma 3.6.\nLemma 3.5. Let Z \u2282 R \u2282 T be a tower of rings where Z is central in R, the ring\nR has semilocal localizations with respect to Z and T is left module-finite over R.\nIf T is semilocal then R is semilocal. If T is semiprimary then so too is Z; if also\nall rings Rm /mRm with m \u2208 Max Z are semiprimary then R is semiprimary.\nProof. Note that the version of Lemma 2.2 for left R-modules is also valid since\nwe may replace R with the opposite ring. Take M = T regarded as an R-module\nwith respect to left multiplications. Lemma 2.2 shows that the equality aT = T\nfor a \u2208 Z implies aZ = Z. In other words, a\u22121 \u2208 Z whenever a is invertible in\nT . So Z is a full subring of T , and the Camps-Dicks Theorem ensures that Z is\nsemilocal (cf. the proof of Lemma 3.3). Since the set Max Z is finite, by Lemma 2.1\nR has finitely many right primitive factor algebras R/P , and each of those is simple\nartinian. Hence R is semilocal.\nSuppose that T is semiprimary. Since J = Jac(T ) is nilpotent, the ring R (resp.,\nZ) is semiprimary if and only if so is R/(R \u2229 J) (resp., Z/(Z \u2229 J)). Passing to the\ntower of rings Z/(Z \u2229 J) \u2282 R/(R \u2229 J) \u2282 T /J, we may assume that T is artinian.\nGiven a \u2208 Z, there exists an integer n > 0 such that an T = an+1 T . Now an T is a\nfinitely generated left R-submodule of T since aR = Ra. Applying Lemma 2.2 with\nM = an T and a = aZ, we deduce that (1\u2212b)an T = 0 for some b \u2208 aZ. If a \u2208 Jac(Z),\nthen 1 \u2212 b is invertible, whence an T = 0, i.e., an = 0. This shows that Jac(Z) is nil.\nSince nil subrings of artinian rings are nilpotent, Jac(Z) is nilpotent. This means\nthat Z is semiprimary. Since Z is commutative, Z is the finite direct product\nQ of\nlocal rings Zm , m \u2208 Max Z, with nilpotent maximal ideals mZm . Then R \u223c\n= Rm\nand mRm is a nilpotent ideal of Rm for each m. If Rm /mRm is semiprimary, so too\nis Rm . When all rings Rm are semiprimary, R is semiprimary. \u0003\nLemma 3.6. Suppose that dim C < \u221e and A has semilocal localizations with respect\nto a central subring Z.\n(i) If A/I is semilocal then A/IC is semilocal.\n(ii) If A/I is semiprimary then Z/(Z \u2229 IC ) is semiprimary.\n(iii) If A/I and all rings Am /mAm are semiprimary then A/IC is semiprimary.\nProof. We apply Lemma 3.5 to the tower \u03c4 (Z) \u2282 \u03c4 (A) \u2282 Hom(C, A/I). As pointed\nout in the proof of Lemma 3.4, Hom(C, A/I) is semilocal (semiprimary) whenever\nso is A/I. \u0003\n4. The orbit relation on the maximal spectrum\nWe continue to assume that A is an H-module algebra. For P, Q \u2208 Max A define\nP \u2264H Q if PC \u2282 Q for some finite dimensional subcoalgebra C \u2282 H. Here PC\ndenotes the ideal of A defined in section 3.\n14\n\n\fLemma 4.1. The relation \u2264H is reflexive and transitive.\nProof. If C = k, then PC = P . Since P \u2282 P , we get P \u2264H P . Suppose that\nP, P \u2032 , P \u2032\u2032 \u2208 Max A satisfy P \u2264H P \u2032 and P \u2032 \u2264H P \u2032\u2032 . Then PC \u2282 P \u2032 and PC\u2032 \u2032 \u2282 P \u2032\u2032\nfor some finite dimensional subcoalgebras C, C \u2032 \u2282 H. Note that CC \u2032 is also a finite\ndimensional subcoalgebra of H. If a \u2208 PCC \u2032 , that is, CC \u2032 a \u2282 P , then C \u2032 a \u2282 PC \u2282\nP \u2032 , whence a \u2208 PC\u2032 \u2032 \u2282 P \u2032\u2032 . This shows that PCC \u2032 \u2282 P \u2032\u2032 , and therefore P \u2264H P \u2032\u2032 .\n\u0003\nIf H = kG is a group algebra, then any finite dimensional\nsubcoalgebra C of H is\nT\nspanned by a finite subset, say X, of G. Clearly PC = g\u2208X g \u22121 (P ). If Q \u2208 Max A\ncontains PC , then Q contains the product of the ideals g \u22121 (P ), g \u2208 X, taken in\nany order; since Q is prime, Q \u2283 g \u22121 (P ) for some g \u2208 X. The maximality of P\nensures then that Q = g \u22121 (P ). Thus P \u2264H Q if and only if P and Q lie in the same\nG-orbit.\nThe previous example suggests that \u2264H may also be symmetric, that is, an\nequivalence relation on Max A in general. It is not clear whether this is always true.\nWe will be able to provide a confirmation in several cases. When the relation \u2264H\nis symmetric, we call it the H-orbit equivalence relation.\nNote that PH coincides with the intersection of the family of ideals PC with C\na finite dimensional subcoalgebra. It follows that PH \u2282 QH whenever P \u2264H Q.\nIf P \u2264H Q and Q \u2264H P then PH = QH , that is, P and Q belong to the same\nH-stratum, in the language of [5]. In general the H-stratification defines a coarser\nequivalence relation.\nThe proof of the next lemma uses essentially the same argument as given by\nChin [7, Lemma 2.2] in the case where H is finite dimensional and pointed; it was\nfurther generalized by Montgomery and Schneider [21, Th. 3.7].\nLemma 4.2. Suppose that H \u2032 is a Hopf subalgebra of H containing the coradical of\nH. Then for P, Q \u2208 Max A one has P \u2264H Q if and only if P \u2264H \u2032 Q. The relation\n\u2264H is symmetric if and only if so is \u2264H \u2032 .\nProof. Suppose that C is a finite dimensional subcoalgebra of H and C0 denotes the\ncoradical of C. Consider the coradical filtration C0 \u2282 C1 \u2282 * * * of C. As dim C < \u221e,\nwe have Cn = C for some n. Let P \u2208 Max A. We will prove by induction on i \u2265 0\nthat PCi+1\n\u2282 PCi . For i = 0 this is clear. Suppose that the claim is valid for some\n0\ni \u2265 0 and c \u2208 Ci+1 . Since \u2206(c) \u2208 C0 \u2297 C + C \u2297 Ci , we deduce\nc(PCi+2\n)\u2282\n0\n\nX\n\nc(1) (PC0 ) * c(2) (PCi+1\n) \u2282 P,\n0\n\n(c)\n\nshowing that PCi+2\n\u2282 PCi+1 . In particular, PCn+1\n\u2282 PC . It follows that for Q \u2208 Max A\n0\n0\nthe inclusions PC \u2282 Q and PC0 \u2282 Q are equivalent to each other. Since C0 \u2282 H \u2032 ,\nwe conclude that P \u2264H Q if and only if P \u2264H \u2032 Q. \u0003\nCorollary 4.3. If H is pointed with the group G of grouplike elements then P \u2264H Q\nfor P, Q \u2208 Max A if and only if P and Q lie in the same G-orbit.\nProof. In this case the coradical of H coincides with the group algebra kG.\nProposition 4.4. If A is right artinian then \u2264H is symmetric.\n15\n\n\u0003\n\n\fProof. If C and C \u2032 are two finite dimensional subcoalgebras of H, so also is C + C \u2032 ,\nand PC+C \u2032 = PC \u2229 PC \u2032 . Since A satisfies DCC on right ideals, the set of ideals PC\nwith C a finite dimensional subcoalgebra of H, contains a smallest element which\nhas to coincide with PH . Hence for P, Q \u2208 Max A one has P \u2264H Q if and only if\nPH \u2282 Q. The right artinian H-module algebra A/PH has a maximal ideal P/PH\nwhich contains no nonzero H-stable ideals of A/PH . By [29, Lemma 4.2] A/PH is\nH-simple. If PH \u2282 Q, then QH is an H-stable ideal of A containing PH , and we\nmust have QH = PH . The inclusion QH \u2282 P entails Q \u2264H P . \u0003\nProposition 4.5. Suppose that X \u2282 Max A is a subset such that for each P \u2208 X\nand each finite dimensional subcoalgebra C of H the factor ring A/PC is semiprimary and each maximal ideal of A containing PC lies in X. If either (a) dim H < \u221e\nor (b) H is generated by a family H of Hopf subalgebras such that the relation \u2264H \u2032\nis symmetric on X for each H \u2032 \u2208 H, then the relation \u2264H is symmetric on X.\nProof. In case (a) PH is the smallest element in the set of ideals PC with C a finite\ndimensional subcoalgebra. Hence for P, Q \u2208 Max A one has P \u2264H Q if and only\nif PH \u2282 Q. The H-module algebra A/PH is semiprimary by the hypothesis. Its\nmaximal ideal P/PH contains no nonzero H-stable ideals of A/PH . It follows that\nA/PH is H-semiprime, i.e., A/PH has no nonzero H-stable nilpotent ideals. By [29,\nTh. 0.3 and Lemma 4.2] A/PH is H-simple. Then the inclusion PH \u2282 Q implies\nPH = QH , and so Q \u2264H P .\nAssume now that H satisfies condition (b). Denote by C the collection of subcoalgebras C of H such that dim C < \u221e and for any pair P, Q \u2208 X satisfying PC \u2282 Q\none has Q \u2264H P . By the hypothesis C contains all finite dimensional subcoalgebras\nof any H \u2032 \u2208 H.\nWe claim that C +C \u2032 \u2208 C and CC \u2032 \u2208 C whenever C, C \u2032 are both from C. Suppose\nthat P, Q \u2208 X are such that PC+C \u2032 \u2282 Q. Since PC+C \u2032 = PC \u2229 PC \u2032 \u2283 PC PC \u2032 and Q\nis a prime ideal, we have either PC \u2282 Q or PC \u2032 \u2282 Q, whence Q \u2264H P . This proves\nthe first inclusion in our claim.\nWe also have to show that Q \u2264H P whenever P, Q \u2208 X satisfy PCC \u2032 \u2282 Q. Denote\nby Y the set of maximal ideals of A containing PC . By the hypothesis Y \u2282 X, and Y\nis finite since A/PC is semiprimary. If J denotes the intersection of all ideals from\nY , then J/PC coincides with the Jacobson radical of A/PC , which is nilpotent.\nIt follows that there exists a finite sequence Q1 , . . . , Qn of ideals from Y (with\nrepetitions allowed) such that Q1 * * * Qn \u2282 PC . If a1 , . . . , an \u2208 A are any elements\nsuch that C \u2032 ai \u2282 Qi for each i = 1, . . . , n, then C \u2032 (a1 * * * an ) \u2282 Q1 * * * Qn \u2282 PC , and\nthen CC \u2032 (a1 * * * an ) \u2282 P . This shows that (Q1 )C \u2032 * * * (Qn )C \u2032 \u2282 PCC \u2032 \u2282 Q. Since Q\nis prime, we must have (Qi )C \u2032 \u2282 Q for at least one i. The inclusions C \u2032 , C \u2208 C imply\nthat Q \u2264H Qi and Qi \u2264H P . The transitivity of the relation \u2264H entails Q \u2264H P ,\nas required.\nIt is clear now that the union U of all coalgebras from C is a subalgebra of H. If\nH \u2032 \u2208 H then H \u2032 \u2282 U since H \u2032 is the union of its finite dimensional subcoalgebras.\nSince H is generated by H, we get U = H. Each finite dimensional subcoalgebra C\nof H is contained therefore in some C \u2032 \u2208 C; since PC \u2283 PC \u2032 for any P \u2208 X, it is\nclear that C \u2208 C. Thus Q \u2264H P whenever P, Q \u2208 X satisfy PC \u2282 Q. \u0003\nThere is a different interpretation of the relation P \u2264H Q in terms of certain\noperations with modules. Denote by MH the category of right H-comodules. Given\nU \u2208 MH and V \u2208 MA , we define right A-module structures on vector spaces U \u2297 V\n16\n\n\fand Hom(U, V ) by the rules\n(u \u2297 v)a =\n(\u03b7a)(u) =\n\nX\n\nX\n\n\u0001\nu(0) \u2297 v (Su(1) )a ,\n\u03b7(u(0) )(u(1) a)\n\nwhere u \u2208 U , v \u2208 V , a \u2208 A, \u03b7 \u2208 Hom(U, V ) and S : H \u2192 H is the antipode (see\n\u2217\n[29, section 1]). If dim\nPU < \u221e then U is a right H-comodule with structure map\n\u2217\n\u2217\nU \u2192 U \u2297 H, \u03be 7\u2192\n\u03be(0) \u2297 \u03be(1) , such that\nX\n\n\u03be(0) (u)\u03be(1) =\n\nX\n\n\u03be(u(0) )Su(1)\n\nfor all u \u2208 U . Note that the evaluation map ev : U \u2217 \u2297 U \u2192 k is an MH -morphism\nprovided k has the trivial comodule structure.\nLemma 4.6. Let U \u2208 MH and V, W \u2208 MA .\n\u0001\n(i) HomA (U \u2297 V, W ) \u223c\n= HomA V, Hom(U, W ) .\n(ii) If dim U < \u221e then U \u2297 V \u223c\n= Hom(U \u2217, V ) in MA .\nProof. (i) This is the isomorphism from [29, Lemma 1.1]. It is\u0001 induced by the canonical linear bijection Hom(U \u2297 V, W ) \u223c\n= Hom \u0001V, Hom(U, W ) .\n\u0001\n(ii) We obtain HomA U \u2217 \u2297 (U \u2297 V ), V \u223c\n= HomA U \u2297 V, Hom(U \u2217, V ) as a\nspecial case of (i). The canonical map \u03c6 : U \u2297 V \u2192 Hom(U \u2217, V ) corresponds to the\ncomposite\nev\u2297id\nU \u2217 \u2297 (U \u2297 V ) \u223c\n= V.\n= (U \u2217 \u2297 U ) \u2297 V \u2212\u2212\u2212\u2212\u2192 k \u2297 V \u223c\nSince the latter is an MA -morphism by functoriality, so too is \u03c6. The assumption\ndim U < \u221e entails the bijectivity of \u03c6. Thus \u03c6 is an isomorphism in MA . \u0003\nLemma 4.7. Suppose that A/P and A/Q are simple artinian. Let V and W be\nsimple right A-modules whose annihilators coincide with P and Q, respectively.\n(i) P \u2264H Q if and only if W is a subfactor of the right A-module Hom(U, V ) for\nsome finite dimensional U \u2208 MH .\n(ii) If W is a submodule of Hom(U, V ) then both P \u2264H Q and Q \u2264H P hold.\n(iii) If W is a factor module of Hom(U, V ) and the antipode of H is bijective then\nP \u2264H Q and Q \u2264H P too.\nProof. (i) There is an isomorphism A/P \u223c\n= V n in MA for some integer n > 0. Suppose that there exists a finite dimensional subcoalgebra C of H such that PC \u2282 Q.\nWe may regard C as a right H-comodule with respect to the comultiplication. The\nright A-module structure on Hom(C, A/P ) derives from the algebra homomorphism\n\u03c4 : A \u2192 Hom(C, A/P ) defined in section 3. Since Ker \u03c4 = PC , the factor algebra\nA/PC is embedded in Hom(C, A/P ). As W is a simple A/PC -module, W is a subfactor of Hom(C, A/P ) as a right A-module. The latter module is the direct sum of\nn copies of Hom(C, V ). Hence W is a subfactor of Hom(C, V ).\nConversely, suppose that W is a subfactor of Hom(U, V ) for some finite dimensional U \u2208 MH . Since H is an injective cogenerator in MH , there exists a\nmonomorphism \u03c6 : U \u2192 H m in MH for some integer m > 0. Then \u03c6(U ) \u2282 C m for\na suitable finite dimensional subcoalgebra C \u2282 H. Hence Hom(U, V ) is a homomorphic image of the right A-module Hom(C m , V ). It follows that W is a subfactor of\n17\n\n\fHom(C, V ), and also of Hom(C, A/P ). Using again the equality Ker \u03c4 = PC from\nthe previous paragraph, we deduce that PC annihilates W , whence PC \u2282 Q.\n(ii) If there exists an MA -monomorphism W \u2192 Hom(U, V ) then there also\nexists a nonzero MA -morphism U \u2297 W \u2192 V by Lemma 4.6(i). The latter has\nto be surjective since V is simple. Lemma 4.6(ii) shows that V is a subfactor of\nHom(U \u2217, W ), whence Q \u2264H P by part (i).\n(iii) Suppose that the antipode is bijective. Then any U \u2208 MH , dim U < \u221e,\nis isomorphic to (U \u2032 )\u2217 for some finite dimensional U \u2032 \u2208 MH . By Lemma 4.6(ii)\nHom(U, V ) \u223c\n= U \u2032 \u2297 V . If there exists an MA -epimorphism Hom(U, V ) \u2192 W then\nthere also exists a nonzero MA -morphism V \u2192 Hom(U \u2032 , W ) by Lemma 4.6(i). In\nthis case V is isomorphic with a submodule of Hom(U \u2032 , W ), whence Q \u2264H P . \u0003\nRemark. We may regard MA as a right module category over the tensor category (MH )op , opposite to MH , with respect to the bifunctor (V, U ) 7\u2192 Hom(U, V ).\nLemma 4.7 shows that \u2264H corresponds to a certain relation on the set of isomorphism classes of simple right A-modules defined in purely categorical terms. In case\nof an arbitrary left module category M over a finite tensor category C such a relation was introduced by Etingof and Ostrik [12, Lemma 3.8]. It was proved there\nthat this relation is symmetric under the assumption that C has projective covers\nand P \u2297 X is projective in M for any projective object P \u2208 C and any object\nX \u2208 M. The second condition is rather nontrivial to verify.\nLemma 4.8. Suppose that A has semilocal localizations with respect to a central\nsubring Z. Given P, Q \u2208 Max A with P \u2264H Q, let n = Q \u2229 Z. If either (a) An /nAn\nis semiprimary or (b) the antipode of H is bijective, then there exists Q\u2032 \u2208 Maxn A\nsatisfying P \u2264H Q\u2032 and Q\u2032 \u2264H P .\nProof. Recall from Lemma 2.1 that both rings A/P and A/Q are simple artinian.\nLet V and W be as in Lemma 4.7. Then W is a subfactor of the right A-module\nM = Hom(U, V ) for some finite dimensional U \u2208 MH . Denoting by \u03c1 : U \u2192 U \u2297 H\nthe comodule structure map, we have \u03c1(U ) \u2282 U \u2297 C for some finite dimensional\nsubcoalgebra C \u2282 H. Since V P = 0, it is immediate from the definition of the Amodule structure on M that PC annihilates M . Put a = PC \u2229 Z. The commutative\nring Z/a is semiprimary by Lemma\n3.6; it is therefore a finite direct product of\nQ\nfinite set of those\nprimary rings. Then A/aA \u223c\n= m\u2208X Am /aAm where X is the Q\nm \u2208 Max Z for which a \u2282 m. Since M a = 0, we have M \u223c\n= m\u2208X Mm , and A\noperates in Mm via the projection onto Am /aAm . Then W is a subfactor of Mm for\nsome m \u2208 X. Since W n = 0, while all elements of Z r m are invertible on W , we\nmust have n \u2282 m. As n \u2208 Max Z by Lemma 2.1, this yields n = m, showing that\nn \u2208 X and Mn 6= 0.\nSuppose that (a) holds. The primary ring Zn /aZn has a nilpotent maximal ideal\ngenerated by n. Hence nAn /aAn is a nilpotent ideal of An /aAn , and it follows that\nAn /aAn is semiprimary. Since Mn is a nonzero right An /aAn -module, it contains\na simple submodule, say W \u2032 . Denote by Q\u2032 the annihilator of W \u2032 in A. As W \u2032 is\na simple submodule of M , Lemma 4.7(ii) yields P \u2264H Q\u2032 and Q\u2032 \u2264H P . Since\nW \u2032 n = 0, we get Q\u2032 \u2229 Z = n.\nSuppose now that (b) holds. Then U \u223c\n= (U \u2032 )\u2217 for some U \u2032 \u2208 MH, dim U \u2032 < \u221e.\n\u2032\n\u223c\nBy Lemma 4.6 M = U \u2297 V , so M is finitely generated in MA according to [29,\nLemma 1.1]. The direct summand Mn of M is also finitely generated in MA . Then\nMn has a simple factor module, call it W \u2032 . We now complete the proof similarly to\n18\n\n\fcase (a), but using Lemma 4.7(iii) instead.\n\n\u0003\n\nWe say that A has quasilocal localizations with respect to a central subring Z if\nAm is quasilocal and mAm \u2282 Jac(Am ) for each m \u2208 Max Z.\nProposition 4.9. Suppose that A has quasilocal localizations with respect to Z. If\neither all rings Am /mAm , m \u2208 Max Z, are primary or the antipode of H is bijective\nthen the relation \u2264H is symmetric on Max A.\nProof. Since An is quasilocal for any n \u2208 Max Z, there is a single ideal in Maxn A.\nHence Q\u2032 = Q in the notation of Lemma 4.8. \u0003\nCorollary 4.10. If A is commutative then \u2264H is symmetric on Max A.\nProof. The hypotheses of Proposition 4.9 are satisfied if we take Z = A.\n\n\u0003\n\n5. Projectivity result for module algebras\nLet A be an H-module algebra and M \u2208 H MA . The compatibility of the two\nmodule structures on M is expressed as\nX\nh(va) =\n(h(1) v)(h(2) a)\nfor h \u2208 H, v \u2208 M, a \u2208 A.\nLemma 5.1. Suppose that C is a subcoalgebra of H and I an ideal of A such that\nA/I is weakly finite. If M/M I \u223c\n= (A/I)n in MA and the A-module M/M IC is\n\u223c\nn-generated, then M/M IC = (A/IC )n in MA .\nProof. We will regard Hom(C, M/M I) as a right Hom(C, A/I)-module by means of\nthe convolution action. If \u03be : C \u2192 A/I and \u03b7 : C \u2192 M/M I are linear maps, then\nX\n(\u03b7\u03be)(c) =\n\u03b7(c(1) )\u03be(c(2) ),\nc \u2208 C.\nFor each ideal J of A denote by \u03c0J : M \u2192 M/M J the canonical projection. Define\nm\u0302, m\u0303 \u2208 Hom(C, M/M I) for each m \u2208 M by the rules\nm\u0302(c) = \u03b5(c)\u03c0I (m),\n\nm\u0303(c) = \u03c0I (cm)\n\nPick e1 , . . . , en \u2208 M such that \u03c0I (e1 ), . . . , \u03c0I (en ) are a basis for the A/I-module\nM/M I. Given \u03b7 \u2208 Hom(C, M/M\nthere are uniquely determined \u03be1 , . . . , \u03ben \u2208\nPI),\nn\nHom(C, A/I)Psuch that \u03b7(c) =\ni=1 \u03c0I (ei )\u03bei (c) for all c \u2208 C, which is equivan\nlent to \u03b7 = i=1 \u00eai \u03bei . Hence \u00ea1 , . . . , \u00ean are a basis for the Hom(C, A/I)-module\nHom(C, M/M I).\nPick any elements v1 , . . . , vn generating M modulo M IC . Given m \u2208 M , there\nexist \u03b61 , . . . , \u03b6n \u2208 Hom(H, A) such that\nS(h)m \u2261\n\nn\nX\n\nvi \u03b6i (h) (mod M IC )\n\ni=1\n\nfor all h \u2208 H. Note that C(M IC ) \u2282 M I = Ker \u03c0I . Taking c \u2208 C, we get\n\u03b5(c)m =\n\nX\n\nc(1) S(c(2))m \u2261\n\nX\n\nc(1)\n\n\u2261\n\n\u0001\nvi \u03b6i (c(2))\n\ni=1\n\n(c)\n\n(c)\n\nn\nX\n\nn X\nX\ni=1 (c)\n\n19\n\n\u0001\n(c(1) vi ) c(2) \u03b6i (c(3)) (mod M I),\n\n\fPn P\nand applying \u03c0I , we deduce m\u0302(c) = i=1 (c) \u1e7di (c(1) )\u03b8i (c(2) ) where the \u03b8i 's are\nP\nlinear maps C \u2192 A/I defined by the formula \u03b8i (c) = (c) c(1) \u03b6i (c(2))+I. This shows\nPn\nthat m\u0302 = i=1 \u1e7di \u03b8i . In particular, the submodule of Hom(C, M/M I) generated by\n\u1e7d1 , . . . , \u1e7dn contains \u00ea1 , . . . , \u00ean . So \u1e7d1 , . . . , \u1e7dn generate the whole Hom(C, M/M I).\nSince the algebra Hom(C, A/I) is weakly finite [28, Lemma 7.1], \u1e7d1 , . . . , \u1e7dn are in\nfact a basis for Hom(C, M/M I) over Hom(C, A/I).\nPn\nSuppose that x1 , . . . , xn \u2208 A are any elements such that i=1 vi xi \u2208 M IC . Then\nn X\nX\ni=1 (c)\n\n(c(1) vi )(c(2) xi ) = c\n\nn\nX\n\n\u0001\nvi xi \u2208 C(M IC ) \u2282 M I\n\ni=1\n\nPn\nfor all c \u2208 C. Applying \u03c0I , we rewrite this as i=1 \u1e7di x\u0303i = 0 where x\u0303i \u2208 Hom(C, A/I)\nis defined as in section 3, i.e., x\u0303i (c) = cxi + I for c \u2208 C. We must have x\u0303i = 0, i.e.,\nxi \u2208 IC for each i = 1, . . . , n. Hence \u03c0IC (v1 ), . . . , \u03c0IC (vn ) are linearly independent\nover A/IC . \u0003\nFurther on we assume that A has semilocal localizations with respect to a central\nsubring Z. For a nonnegative r \u2208 Q and a finitely generated right A-module M the\nopen subsets Ur (M ) \u2282 Max Z and the ideals Ir (M ) of A were defined in section\n1. When M \u2208 H MA , we use the same notation ignoring the H-module structure.\nDenote by Jr (M ) the smallest H-stable ideal of A containing Ir (M ).\nLemma 5.2. Let r = rP (M ) where P \u2208 Max A and M \u2208 H MA is an A-finite\nobject. Suppose that rQ (M ) \u2264 r for each Q \u2208 Max A such that P \u2264H Q. Let\nr = n/l for some integers l > 0, n \u2265 0. Then:\n(i) rQ (M ) = r for each Q \u2208 Max A with P \u2264H Q.\n(ii) (M/M PC )l \u223c\n= (A/PC )n in MA for subcoalgebras C of H with dim C < \u221e.\nProof. The ring A/P is simple artinian by Lemma 2.1. Then (M/M P )l \u223c\n= (A/P )n\nin MA since the two A/P -modules here have equal lengths. Let C be given as in\n(ii). According to Lemma 3.6 A/PC is a semilocal ring. Since rQ (M )l \u2264 rl = n\nfor any Q \u2208 Max A with PC \u2282 Q, it follows from Lemma 1.6(i) that the A/PC module (M/M PC )l is n-generated. Now Lemma 5.1 applied to M l \u2208 H MA yields\nthe isomorphism in (ii). Then (M/M Q)l \u223c\n= (A/Q)n , and so rQ (M ) = r, for any\nQ \u2208 Max A with PC \u2282 Q. As this holds for all finite dimensional subcoalgebras C,\nwe deduce (i). \u0003\nLemma 5.3. Let r = rP (M ) where P \u2208 Max A and M \u2208 H MA is an A-finite\nobject. Suppose that Ur (M ) is quasicompact and rQ (M ) \u2264 r for each Q \u2208 Max A\nsuch that Q \u2229 Z = Q\u2032 \u2229 Z for some Q\u2032 \u2208 Max A with P \u2264H Q\u2032 . Then Jr (M ) \u2282 P .\nProof. The isomorphism in Lemma 5.2(ii) enables us to apply Lemma 2.5(ii) with\nR = A and K = PC . We conclude that Ir (M ) \u2282 PC for each finite dimensional\nsubcoalgebra C of H, whence Ir (M ) \u2282 PH . Since PH is an H-stable ideal of A, it\nfollows that Jr (M ) \u2282 PH \u2282 P . \u0003\nRecall from Lemma 2.4 that r(M ) = sup{rP (M ) | P \u2208 Max A}.\nProposition 5.4. Given any A-finite object M \u2208 H MA and P \u2208 Max A one has\nrP (M ) = r(M ) if and only if P \u2283 Jr(M) (M ). Moreover, Jr(M) (M ) 6= A.\n20\n\n\fProof. Let r = r(M ). We have rQ (M ) \u2264 r for all Q \u2208 Max A. So by Lemma 2.3\nUr (M ) = Max Z, which is a quasicompact space. If rP (M ) = r then P satisfies the\nhypothesis of Lemma 5.3, whence Jr (M ) \u2282 P . Conversely, if Jr (M ) \u2282 P , then also\nIr (M ) \u2282 P , whence rP (M ) = r by Lemma 2.5(iii) (where we take R = A, K = P ).\nLemma 2.4 says that rP (M ) = r for at least one P \u2208 Max A. Hence Jr (M ) 6= A.\n\u0003\nCorollary 5.5. Suppose that M \u2208 H MA is an A-finite object and A has a maximal\nideal P such that rP (M ) = r(M ) and P contains no nonzero H-stable ideals of A.\nLet r(M ) = n/l for some integers n \u2265 0, l > 0. Then:\n(i) rQ (M ) = r(M ) for all Q \u2208 Max A.\n(ii) M is projective in MA ; M is a generator in MA provided M 6= 0.\n(iii) Mpl \u223c\n= Anp in MAp for each p \u2208 Spec Z.\nProof. Let r = r(M ). Since Jr (M ) is an H-stable ideal of A contained in P , we\nget Jr (M ) = 0; so Ir (M ) = 0 too. Then Jr (M ) \u2282 Q for any Q \u2208 Max A, whence\nl \u223c\n(i) holds by Proposition 5.4. Since Ur (M ) = Max Z, we have Mm\n= Anm for any\nm \u2208 Max Z by Proposition 1.11(ii). If p \u2208 Spec Z, then p \u2282 m for some m \u2208 Max Z.\nSince Ap is a localization of Am , we have Mp \u223c\n= Mm \u2297Am Ap , whence (iii). Note\nthat M is projective or a generator in MA if and only if so is M l . Hence Lemma\n2.6 applied to M l establishes (ii). \u0003\nTheorem 5.6. Suppose that A is an H-simple H-module algebra which has semilocal localizations with respect to a central subring Z. Let M be any locally A-finite\nobject of H MA . Put l = gcd{length A/Q | Q \u2208 Max A}. Then:\n(i) M is projective in MA ; M is a generator in MA provided M 6= 0.\n(ii) Mpl is a free Ap -module for each p \u2208 Spec Z.\n(iii) If M is not A-finite then Mp is a free Ap -module for each p \u2208 Spec Z.\nProof. If M is A-finite, then there exists P \u2208 Max A with rP (M ) = r(M ) by Lemma\n2.4. We may now apply Corollary 5.5. For each Q \u2208 Max A we have r(M ) = rQ (M ),\nwhence r(M ) * length(A/Q) \u2208 Z. It follows that r(M )l \u2208 Z, and so Corollary 5.5\nestablishes both (i) and (ii).\nSuppose further that M is not A-finite. The family F of all H MA -subobjects\nof M clearly satisfies condition (a) of Lemma 5.7 below. If N \u2208 F and N 6= M\nthen, since M is locally A-finite, there exists a nonzero A-finite subobject F \u2282 M\nsuch that F 6\u2282 N . We have N \u2032 = N + F \u2208 F and N is properly contained in\nN \u2032 . Furthermore, N \u2032 /N \u223c\n= F/(F \u2229 N ) is an A-finite object of H MA ; as we have\nproved already, N \u2032 /N is projective in MA . Thus condition (b) of Lemma 5.7 is also\nfulfilled, and (i) follows.\nLet m \u2208 Max Z. If N \u2208 F and N 6= M then M/N is a generator in MA by (i).\nIn this case (M/N )m is a generator in MAm , whence Nm 6= Mm . In particular, this\nholds for any A-finite subobject of M since M is not A-finite. As a consequence, the\nAm -module Mm cannot be finitely generated. The freeness of Mm now follows from\nLemma 5.8 which we apply by considering the family of submodules Nm of Mm\nwith N \u2208 F . If p \u2208 Spec Z, then Mp \u223c\n= Mm \u2297Am Ap for any m \u2208 Max Z containing\np. This proves (iii). \u0003\nLemma 5.7. Let R be any ring. A right R-module M has to be projective provided\nthat there exists a family F of submodules of M satisfying\n21\n\n\f(a) {0} \u2208 F and the union of every chain in F is again in F ,\n(b) each N \u2208 F , N 6= M , is properly contained in some N \u2032 \u2208 F such that N \u2032 /N is\nprojective in MR .\nIf at least one N \u2208 F is a generator of MR then M is a generator too.\nProof. Let \u03be : V \u2192 W be any epimorphism and \u03c6 : M \u2192 W any morphism in MR .\nBy Zorn's Lemma there exist a maximal element in the set X of all pairs (N, \u03c8)\nwhere N \u2208 F and \u03c8 : N \u2192 V is an MR -morphism such that \u03be \u25e6 \u03c8 = \u03c6|N . If N ,\nN \u2032 are as in (b), then N \u2032 = N \u2295 G for some projective submodule G; it is then\nclear that any \u03c8 occurring as a component of (N, \u03c8) \u2208 X can be extended to an\nMR -morphism \u03c8 \u2032 : N \u2032 \u2192 V with the property that (N \u2032 , \u03c8 \u2032 ) \u2208 X. Therefore every\nmaximal element of X has to be (M, \u03c8) where \u03c8 : M \u2192 V is an MR -morphism\nsatisfying \u03be\u25e6\u03c8 = \u03c6. This proves that M is projective. Moreover, the R-module M/N\nis projective for each N \u2208 F since the family of submodules N \u2032 /N with N \u2032 \u2208 F\nand N \u2032 \u2283 N satisfies (a) and (b). Hence each N \u2208 F is a direct summand of M ,\nand the final assertion of the lemma is clear. \u0003\nLemma 5.8. Let R be a semilocal ring. A right R-module M is necessarily free as\nlong as M is not finitely generated and there is a family F of submodules satisfying\n(a) {0} \u2208 F and the union of every chain in F is again in F ,\n(b) each N \u2208 F, N 6= M , is properly contained in some N \u2032 \u2208 F such that (N \u2032 /N )l\nis a finitely generated free R-module for some l \u2208 Z+ .\nThis is a restatement of [28, Lemma 2.5].\nLemma 5.9. Let M \u2208 H MA be an A-finite object. Suppose that M 6= 0 and A is\nnot H-simple. Then A has a nonzero H-stable ideal I such that M I 6= M .\nProof. Suppose that M I = M for each nonzero H-stable ideal I of A. Since M 6= 0,\nwe have r(M ) > 0. If P is any maximal ideal of A for which rP (M ) = r(M ),\nthen M P 6= M , and therefore P cannot contain nonzero H-stable ideals of A. Now\nCorollary 5.5 shows that M is a generator in MA . Then M I 6= M for each proper\nideal I of A. It follows that A cannot have H-stable ideals other than 0 and A, i.e.\nA is H-simple. \u0003\n6. Local projectivity and flatness\nHere we consider an H-module algebra A which is not H-simple, but there is\na prime ideal of A containing no nonzero H-stable ideals. We want to look at the\nlocalizations Mp at a single prime of Z. In contrast to Theorem 5.6 we are able to\nprove the projectivity of Mp only under additional restrictions.\nProposition 6.1. Let A be an H-module algebra which has semilocal localizations\nwith respect to Z. Suppose that Max Z is noetherian and either all rings Am /mAm ,\nm \u2208 Max Z, are semiprimary or the antipode of H is bijective. Let M \u2208 H MA be an\nA-finite object whose rank function Q 7\u2192 rQ (M ) is constant on each fibre Maxm A,\nm \u2208 Max Z. Let r \u2208 Q and P \u2208 Max A. Then:\n(i) rP (M ) = r if and only if P \u2283 Jr (M ) and P 6\u2283 Js (M ) for any s > r.\n(ii) rQ (M ) = rP (M ) for each Q \u2208 Max A satisfying P \u2264H Q.\nAssuming that P contains no nonzero H-stable ideals of A and rP (M ) = n/l\nfor some integers n \u2265 0, l > 0, we also have:\n22\n\n\f(iii) rQ (M ) \u2265 rP (M ) for all Q \u2208 Max A.\n(iv) Mnl \u223c\n= Ann in MAn for any n \u2208 Max Z such that rQ (M ) = rP (M ) on Maxn A.\nS\nProof. Since Max Z is noetherian, for any real x > 0 the open subset s<x Us (M )\nis quasicompact. Hence there exists t \u2208 Q, t < x, such that Us (M ) = Ut (M ) for\neach s \u2208 Q satisfying t < s < x. Given Q \u2208 Max A and n = Q \u2229 Z, we have, by\nLemma 2.3, n \u2208 Us (M ) if and only if rQ (M ) \u2264 s since the rank function of M is\nconstant on Maxn A. It follows that rQ (M ) \u2264 t whenever rQ (M ) < x.\nThe previous argument shows that for any subset X \u2282 Max A there exists P \u2032 \u2208\nX such that rQ (M ) \u2264 rP \u2032 (M ) for all Q \u2208 X. For, if we let x = sup{rQ (M ) | Q \u2208 X}\nand take P \u2032 with rP \u2032 (M ) sufficiently close to x, we must have rP \u2032 (M ) = x.\nNow choose P \u2032 as above in the subset X = {Q \u2208 Max A | P \u2264H Q}. Denote\nx = rP \u2032 (M ). We have P \u2264H P \u2032 . If Q \u2208 Max A satisfies P \u2032 \u2264H Q, then also\nP \u2264H Q, i.e., Q \u2208 X. By the assumption on the rank function of M we get\nrQ\u2032 (M ) = rQ (M ) \u2264 x for any Q\u2032 \u2208 Max A with Q\u2032 \u2229 Z = Q \u2229 Z. Thus P \u2032 satisfies\nthe hypotheses of Lemmas 5.2, 5.3. We deduce that Jx (M ) \u2282 P \u2032 and rQ (M ) = x\nfor any Q \u2208 Max A with P \u2032 \u2264H Q.\nBy Lemma 4.8 there exists P \u2032\u2032 \u2208 Max A such that P \u2032\u2032 \u2229 Z = P \u2032 \u2229 Z, while both\nP \u2264H P \u2032\u2032 and P \u2032\u2032 \u2264H P hold. The first condition on P \u2032\u2032 shows that rP \u2032\u2032 (M ) = x,\nwhile the second condition gives P \u2032\u2032 \u2208 X. But then we may replace P \u2032 with P \u2032\u2032\nand conclude that rQ (M ) = x for any Q \u2208 Max A with P \u2032\u2032 \u2264H Q. In particular,\nrP (M ) = x. Now we may replace P \u2032 with P . The earlier conclusions about P \u2032 yield\n(ii) and verify the inclusion Jx (M ) \u2282 P .\nIf s \u2208 Q is such that rP (M ) < s then rQ (M ) < s for all Q \u2208 Maxm A where\nm = P \u2229 Z. Lemma 2.5(iii) applied with R = A, K = P shows that Is (M ) 6\u2282 P ;\nthen also Js (M ) 6\u2282 P for such s. But we have checked already that Js (M ) \u2282 P for\ns = rP (M ). The last two statements are equivalent to (i).\nSuppose that P contains no nonzero H-stable ideals of A. Then Jx (M ) = 0. By\n(i) applied to an arbitrary Q \u2208 Max A, the inclusion Jx (M ) \u2282 Q yields rQ (M ) \u2265 x,\nproving (iii). If n is as in (iv), then n \u2208 Ux (M ). Since Ix (M ) = 0, Lemma 1.11(ii)\nverifies (iv). \u0003\nProposition 6.2. Let A be an H-module algebra, module-finite over a central subring Z such that Z is a Jacobson ring with a noetherian space Max Z. Suppose\nthat P \u2208 Spec A contains no nonzero H-stable ideals of A. Let M \u2208 H MA be an\nA-finite object whose rank function Q 7\u2192 rQ (M ) is constant on each fibre Maxm A,\nm \u2208 Max Z. Put m = inf{rQ (M ) | Q \u2208 Max A}, and let m = n/l for some integers\nn \u2265 0, l > 0. Then there exists z \u2208 Z, z \u2208\n/ P, such that:\n(i) rQ (M ) = m for each Q \u2208 Max A with z \u2208\n/ Q.\nl \u223c n\nl \u223c n\n/ q.\n(ii) Mz = Az in MAz ; hence Mq = Aq in MAq for each q \u2208 Spec Z with z \u2208\nProof. Let p = P \u2229 Z; clearly p \u2208 Spec Z. As we pointed out in the Remark at\ner (M ) if and only if\nthe end of section 2, Ap is semilocal. For r \u2208 Q we have p \u2208 U\n\u2032\n\u2032\nrQ (Mp ) \u2264 r for all Q \u2208 Max Ap (this follows from Lemma 1.6 and the definition\ner (M )). Hence there exists the smallest r with the previous property, namely\nof U\nr = max{rQ\u2032 (Mp ) | Q\u2032 \u2208 Max Ap }. We will assume that r is this number.\ner (M ) is an open neighborhood of p in Spec Z, there exists a basic open\nSince U\ner (M ) for some z \u2208 Z r p. We choose such a z. If Q is a maximal\nsubset D(z) \u2282 U\n23\n\n\fideal of A with z \u2208\n/ Q, then Q \u2208 Maxn A where n \u2208 D(z) \u2229 Max Z \u2282 Ur (M ), so that\nrQ (M ) \u2264 r.\nT\nBy Lemma 2.8 there exists a subset X \u2282 Max A such that P = Q\u2208X Q and\nz\u2208\n/ Q for each Q \u2208 X. Suppose that Q \u2208 X and n = Q \u2229 Z. Since P \u2282 Q, we have\nes (M ) is an open neighbourhood\np \u2282 n. If s = rQ (M ), then n \u2208 Us (M ), and so U\nes (M ), which yields s \u2265 r by the choice of r.\nof n in Spec Z. It follows that p \u2208 U\nSince the opposite inequality has been established, we conclude that rQ (M ) = r.\nNow Jr (M ) \u2282 Q by Proposition 6.1(i).\nIt follows that Jr (M ) \u2282 P . Since P contains no nonzero H-stable ideals, we get\nJr (M ) = 0. Then Ir (M ) = 0 too. Thus Jr (M ) \u2282 Q for any Q \u2208 Max A; Proposition\n6.1(i) ensures that rQ (M ) \u2265 r. Note that Ur (M ) 6= \u2205 since X 6= \u2205. It follows that\nm = r, and the previous inequalities prove (i).\nLemma 1.11(ii) shows that Mnl \u223c\n= Ann when n \u2208 Ur (M ). Since Z is a Jacobson\nring and its localization Zz at z is a finitely generated Z-algebra, every maximal\nideal of Zz contracts to a maximal ideal of Z [4, Ch. V, \u00a73, Th. 3]. Thus the maximal\nideals of Zz are of the form nZz with n \u2208 Max Z, z \u2208\n/ n. We know that n \u2208 Ur (M )\nfor any such n. It follows that Az has semilocal localizations with respect to Zz\nand the right Az -modules Mzl and Anz have isomorphic localizations at all maximal\nideals of Zz . Thus we may apply Lemma 2.6 to the Az -module Mzl . Replacing z\nwith a suitable element z \u2032 such that Zz\u2032 is a localization of Zz , we prove (ii). \u0003\nA restriction on the rank function is a serious deficiency of Propositions 6.1, 6.2.\nThis restriction is void in the case where all sets Maxm A are singletons.\nTheorem 6.3. Let A be an H-module algebra, module-finite over a central subring\nZ such that Z is a Jacobson ring with a noetherian space Max Z and each maximal\nideal of Z is contained in a single maximal ideal of A. Suppose that P \u2208 Spec A\ncontains no nonzero H-stable ideals of A. Denote p = P \u2229 Z and\nl = gcd{length Ap /Q\u2032 | Q\u2032 \u2208 Max Ap }.\nThen Mpl is a free Ap -module for any locally A-finite M \u2208 H MA .\n\u2032\n\nProof. When M is A-finite, we may apply Proposition 6.2. The Ap -module Mpl\nis free for some l\u2032 \u2208 Z+ . Hence r = rQ\u2032 (Mp ) does not depend on Q\u2032 \u2208 Max Ap .\n\u2032\nSince Ap is semilocal, Mpl is free in MAp for any l\u2032 \u2208 Z+ such that rl\u2032 \u2208 Z. Since\nr * length Ap /Q\u2032 \u2208 Z for any Q\u2032 \u2208 Max Ap , we have rl \u2208 Z, whence the conclusion.\nSuppose that M is not A-finite. If N , N \u2032 are any two H MA -subobjects of M\nsuch that N \u2032 /N is A-finite then (Np\u2032 /Np )l is a free Ap -module. If the Ap -module Mp\nis finitely generated, then Mp = Np for some A-finite subobject, and the conclusion\nis clear. Otherwise we apply Lemma 5.8 by considering the family of submodules\nNp of Mp with N running through all H MA -subobjects of M . \u0003\nTheorem 6.4. Let B be any H-module algebra, A an H-stable subalgebra contained\nin the center of B. Suppose that A is a Jacobson ring with a noetherian space Max A\nand IB = B for each nonzero H-stable ideal I of A. Then each locally A-finite object\nM \u2208 H MB is flat in MA .\nProof. Given a monomorphism \u03c6 : V \u2192 W in MA , denote by K the kernel of the\nmap id \u2297 \u03c6 : M \u2297A V \u2192 M \u2297A W . Since the latter map may be regarded as an\nMB -morphism, K is a B-module. Suppose that x \u2208 K is a nonzero element. Denote\n24\n\n\fby a the annihilator of x in A. Then x is annihilated by the ideal aB of B, and\ntherefore aB 6= B. There exists Q \u2208 Max B such that aB \u2282 Q. Now p = Q \u2229 A is a\nprime ideal of A and a \u2282 p. Since pB 6= B, none of the nonzero H-stable ideals of\nA can be contained in p. Since A is commutative, we may apply Theorem 6.3 with\nZ = A and P = p. We deduce that Mp is projective in MAp , which implies that\nthe map\nid \u2297 \u03c6 \u2297 id : M \u2297A V \u2297A Ap \u2192 M \u2297A W \u2297A Ap\nis injective. On the other hand, the kernel of this map coincides with K \u2297A Ap since\nAp is flat in MA . Thus K \u2297A Ap = 0. Then x is annihilated by an element in Z r p,\ni.e. a 6\u2282 p. This contradiction shows that K = 0. \u0003\n7. Dualization to comodule algebras\nLet H be a bialgebra and A a right H-comodule algebra. An object of MH\nA\nwill be called A-finite if it is finitely generated in MA . An arbitrary object M is a\ndirected union of its A-finite subobjects. Indeed, any finite subset of M is contained\nin a finite dimensional H-subcomodule; the A-submodule generated by the latter is\nan A-finite subobject.\nLemma 7.1. Each object of MH\nA is flat (resp. projective) in MA provided that this\nis true for all A-finite objects. Each nonzero object of MH\nA is a projective generator\nin MA provided that this is true for all nonzero A-finite objects.\nProof. Since tensor products commute with filtered direct limits, the flat part of\nthe lemma follows from the fact that each M \u2208 MH\nA is a directed union of A-finite\nsubobjects. The projective part follows from Lemma 5.7 in which we take F to be\nthe family of all subobjects of M . \u0003\nLet H \u2032 be a second bialgebra, A\u2032 an H \u2032 -comodule algebra. Given a homomorphism of bialgebras \u03c6 : H \u2032 \u2192 H, we may view A\u2032 as an H-comodule algebra. Suppose that we are given also a map A\u2032 \u2192 A which is a homomor\u2032\nphism of H-comodule algebras. In this case there is a functor MH\nMH\nA which\nA\u2032\n\u2032\nH\nH\ntakes an object N \u2208 MA\u2032 to N \u2297A\u2032 A \u2208 MA on which the comodule structure\nN \u2297A\u2032 A \u2192 (N \u2297A\u2032 A) \u2297 H is given by the rule\nX\nv \u2297 a 7\u2192\n(v(0) \u2297 a(0) ) \u2297 \u03c6(v(1) )a(1)\nwhere v \u2208 N , a \u2208 A. It is easy to check that this map is well-defined. In the special\ncase where H \u2032 = H and A\u2032 = k with the trivial comodule structure, we obtain an\nobject V \u2297 A \u2208 MH\nA for each right H-comodule V .\nWe next make several observations concerning direct limits of comodule algebras. Suppose that H = lim Hi , the direct limit of an inductive family H = (Hi )\n\u2212\u2212\u2192\nof bialgebras indexed by a directed set I. An H-compatible inductive family of comodule algebras F = (Ai ) is a collection containing for each i \u2208 I an Hi -comodule\nalgebra Ai and for each pair i, j \u2208 I with i \u2264 j a homomorphism of Hj -comodule\nalgebras Ai \u2192 Aj ; these maps are requested to obey the usual rules of inductive\nsystems. If such an F is given, A = lim Ai becomes an H-comodule algebra in a nat\u2212\u2212\u2192\n\nural way. We mention below several properties of the category MH\nA under previous\nassumptions.\nHi\nWe say that M \u2208 MH\nA is F -induced if there exists i \u2208 I and N \u2208 MAi such that\nH\nthe class of all A-finite objects of MH\nM\u223c\n= N \u2297Ai A. Denote by FA\nA isomorphic to\ni\nN \u2297Ai A for some i \u2208 I and an Ai -finite N \u2208 MH\n.\nAi\n25\n\n\f\u2032\nLemma 7.2. If M \u2208 MH\nA is an F -induced object and M any A-finite subobject,\n\u2032\n\u2032\nH\nH\nthen M/M is F -induced. In this case M/M \u2208 FA whenever M \u2208 FA\n.\n\nProof. Let M \u223c\n= N \u2297Ai A for some i \u2208 I and N \u2208 MH\nAi . Put J = {j \u2208 I | i \u2264 j}. For\neach j \u2208 J denote Nj = N \u2297Ai Aj , and let Mj be the image of the canonical map\n\u03c6j : Nj \u2192 M . We thus obtain a directed family of vector subspaces of\nS M indexed\nby J. Since A is covered by the images of Aj , j \u2208 J, we have M = j\u2208J Mj . By\nthe hypothesis M \u2032 is generated in MA by a finite subset. The latter is contained in\na finite dimensional H-subcomodule V \u2282 M \u2032 , and we then have M \u2032 = V A. There\nexists j \u2208 J such that V \u2282 Mj . We may view \u03c6j as an MH -morphism. Hence\nthere exists a finite dimensional H-subcomodule W of Nj such that \u03c6j (W ) = V .\nLet \u03c1j : Nj \u2192 Nj \u2297 Hj be the Hj -comodule structure map. We must have\n\u03c1j (W ) \u2282 W \u2297 Hj + Nj \u2297 Ker(Hj \u2192 H).\nThen \u03c1j (W ) \u2282 W \u2297 Hj + Nj \u2297 U for some finite dimensional subspace in the kernel\nof Hj \u2192 H. Now U vanishes in Ht for some t \u2208 J, t \u2265 j. If we denote by W \u2032 the\nimage of W in Nt , then W \u2032 is an Ht -subcomodule of Nt satisfying \u03c6t (W \u2032 ) = V . The\nt\nmap W \u2032 \u2297 At \u2192 Nt afforded by the At -module structure is a morphism in MH\nAt ;\nhence its cokernel K is an object of that category. Tensoring with A, we obtain an\nexact sequence\n(W \u2032 \u2297 At ) \u2297At A \u2192 Nt \u2297At A \u223c\n= M \u2192 K \u2297 At A \u2192 0\n\u2032\nin MH\nA . By construction the image of the first map coincides with M . It follows\n\u2032 \u223c\nthat M/M = K \u2297At A is an F -induced object. Note that K is At -finite whenever\nN is Ai -finite. \u0003\n\nLemma 7.3. Every A-finite object M \u2208 MH\nA is isomorphic to a factor object of an\nH\nobject from FA\n.\nProof. There exists a finite dimensional H-subcomodule V \u2282 M such that M = V A.\nThe map V \u2297 A \u2192 M afforded by the A-module structure is then an epimorphism\nin MH\nA . So it remains to prove the conclusion of the lemma for the object V \u2297 A.\nSince H is an injective cogenerator in MH , we can embed V as a subcomodule in\nH n for some integer n > 0. For each i \u2208 I let \u03c6i : Hin \u2192 H n denote the canonical\nmap. Then V is contained in the image of \u03c6j for some j \u2208 I. Since \u03c6j may be\nregarded as an MH -morphism, there exists a finite dimensional H-subcomodule\nW \u2282 Hjn such that \u03c6j (W ) = V . As in the proof of previous lemma we can find\nt \u2208 I, t \u2265 j, such that the image W \u2032 of W in Htn is an Ht -subcomodule. The map\nW \u2032 \u2192 V obtained by restriction of \u03c6t is an epimorphism in MH ; it gives rise to\n\u2032\n\u2032\n\u223c\nan epimorphism W \u2032 \u2297 A \u2192 V \u2297 A in MH\nA . Since W \u2297 A = (W \u2297 At ) \u2297At A and\nHt\n\u2032\n\u2032\nH\nW \u2297 At is an At -finite object of MAt , we have W \u2297 A \u2208 FA . \u0003\nLemma 7.4. Suppose A has a homomorphism into a nonzero artinian ring R and\nH\nH\ncontains\nis a projective generator in MA . Then FA\neach nonzero object from FA\nH\nall A-finite objects of MA .\nH\nthe R-module N \u2297A R is finitely generated, and we denote\nProof. For each N \u2208 FA\nby l(N ) its length. If N 6= 0, then N is a projective generator in MA ; in this case\nN \u2297A R is a projective generator in MR , whence N \u2297A R 6= 0, i.e. l(N ) > 0.\n\n26\n\n\fH\nIf M \u2208 MH\nA is A-finite, Lemma 7.3 ensures the existence of an MA -epimorphism\nH\n\u03c6 : F \u2192 M with F \u2208 FA . If M is projective in MA , then \u03c6 splits in MA , and\nH\ntherefore Ker \u03c6 is an A-finite object of MH\nA . In this case M \u2208 FA by Lemma 7.2.\nH\n\u2032\nH\nSuppose now that M \u2208 FA and M is any A-finite MA -subobject of M . By\nH\nLemma 7.2 M/M \u2032 \u2208 FA\n. By the hypothesis M and M/M \u2032 are both projective in\n\u2032\nH\nMA . Then so is M too. This implies M \u2032 \u2208 FA\nas we have observed above. Since\n\u2032\n\u2032\nthe exact sequence 0 \u2192 M \u2192 M \u2192 M/M \u2192 0 splits in MA , it remains exact after\ntensoring with R, whence l(M ) = l(M \u2032 ) + l(M/M \u2032). If M \u2032 6= M then l(M/M \u2032 ) > 0,\nin which case l(M \u2032 ) < l(M ).\nGiven another A-finite subobject M \u2032\u2032 of M properly containing M \u2032 , we have\nH\nthen l(M \u2032 ) < l(M \u2032\u2032 ) since M \u2032\u2032 is also in FA\n. It is now clear that M satisfies ACC\non A-finite subobjects. But every subobject of M is a directed union of A-finite\nH\nones; hence it is itself A-finite. So, according to Lemma 7.2, the class FA\nis closed\nunder factor objects, and we are done. \u0003\n\nFor the ring R appearing in the next lemma we say that a finitely generated\nprojective R-module G has constant rank if rP (G), as defined in section 1, does not\ndepend on P \u2208 Max R; we denote by r(G) this common value. If G 6= 0, then G has\na simple factor module annihilated by some P , and therefore r(G) = rP (G) > 0. If\nG\u223c\n= G\u2032 \u2295G\u2032\u2032 in MR , then rP (G) = rP (G\u2032 )+rP (G\u2032\u2032 ) for all P ; hence G\u2032\u2032 has constant\nrank whenever so do both G and G\u2032 . In this case r(G\u2032 ) < r(G) unless G\u2032\u2032 = 0. There\nare only finitely many possible values of r(G\u2032 ) when G\u2032 runs through the direct\nsummands of G having constant rank; indeed, r(G\u2032 ) < r(G) and r(G\u2032 )l \u2208 Z for\nany G\u2032 where l is the greatest common divisor of the lengths of the simple artinian\nfactor rings of R. It follows that G satisfies ACC on direct summands of constant\nrank.\nLemma 7.5. Let A \u2192 R be a homomorphism into a ring R all whose right primitive\nH\nfactor rings are artinian. Suppose that for each F \u2208 FA\nthe R-module F \u2297A R\nis projective of constant rank. Then for each A-finite N \u2208 MH\nA there exists an\nH\nepimorphism \u03be : F \u2192 N in MH\nsuch\nthat\nF\n\u2208\nF\nand\nthe\nmap\nF\n\u2297A R \u2192 N \u2297A R\nA\nA\ninduced by \u03be is an isomorphism in MR .\nH\nProof. Let M \u2208 FA\n. By the hypothesis M \u2297A R is a projective R-module of constant\nrank. For each MH\nA -subobject K \u2282 M denote by TK the image of the canonical\nH\nmap K \u2297A R \u2192 M \u2297A R. If M \u2032 \u2282 M is an A-finite subobject, then M/M \u2032 \u2208 FA\n\u2032\nby Lemma 7.2. In this case M/M \u2297A R is a projective R-module of constant rank,\nand it follows from the exact sequence\n\nM \u2032 \u2297A R \u2192 M \u2297A R \u2192 M/M \u2032 \u2297A R \u2192 0\nthat so too is TM \u2032 . As a consequence, M \u2297A R satisfies ACC on submodules of the\nform TM \u2032 with M \u2032 as above.SAn arbitrary subobject K \u2282 M is a directed union\nof A-finite ones. Then TK = TK \u2032 where K \u2032 runs through the A-finite subobjects\nof K, and it follows that TK = TK \u2032 for some K \u2032 of this type. Then the canonical\nprojection \u03be : M/K \u2032 \u2192 M/K induces an isomorphism after tensoring with R.\nThus for N = M/K we have the desired conclusion with F = M/K \u2032 . Lemma 7.3\ncompletes the proof. \u0003\nProposition 7.6. Let H = lim Hi and A = lim Ai as before.\n\u2212\u2212\u2192\n\n\u2212\u2212\u2192\n\n27\n\n\fHi\n(i) All objects of MH\nA are flat in MA provided that for each i all objects of MAi\nare flat in MAi .\n\n(ii) Suppose that A has a homomorphism into a nonzero artinian ring R. If for\ni\neach i all nonzero objects of MH\nAi are projective generators in MAi then all\nH\nnonzero objects of MA are projective generators in MA .\n(iii) Let A \u2192 R be a ring homomorphism where R is a ring all whose right primitive\ni\nfactor rings are artinian. Suppose that for each i and each Ai -finite N \u2208 MH\nAi\nthe R-module N \u2297Ai R is projective of constant rank. Then M \u2297A R is projective\nin MR for any M \u2208 MH\nA ; if M is A-finite then M \u2297A R has constant rank.\nProof. (i) Since N \u2297Ai A is flat in MA whenever N is flat in MAi , the hypothesis\nimplies that every F -induced object of MH\nA is flat in MA . An arbitrary A-finite\nH\nH\nobject L \u2208 MH\nA is isomorphic to M/K where M \u2208 FA and K is an MA -subobject\n\u2032\n\u2032\n\u223c\nof M . We have L = lim M/K where K ranges over all A-finite subobjects of K.\n\u2212\u2212\u2192\n\nH\nBy Lemma 7.2 M/K \u2032 \u2208 FA\nfor each K \u2032 . Thus L is a direct limit of flat A-modules;\nthen L is flat in MA . Lemma 7.1 completes the proof.\n(ii) The hypothesis implies that all nonzero F -induced objects of MH\nA are projective generators in MA . Lemma 7.4 shows that the same conclusion holds for all\nA-finite objects, and Lemma 7.1 establishes this for arbitrary objects.\nH\n(iii) Here M \u2297A R is a projective R-module of constant rank for each M \u2208 FA\n.\nH\nBy Lemma 7.5 the same holds for each A-finite object of MA . In order to extend\nthis to arbitrary objects we have to repeat the proof of [28, Th. 1.2] given in case\nof commutative algebras. The proof is easier under the assumption that R is flat in\nA M. In this case we can apply Lemma 5.7 to the family of submodules N \u2297A R of\nM \u2297A R where N runs through all MH\n\u0003\nA -subobjects of M .\n\nRecall that the finite dual H \u25e6 of H is a subalgebra of H \u2217 consisting of all linear\nfunctions vanishing on an ideal of finite codimension in H. There is a comultiplication on H \u25e6 dual to the multiplication on H. Moreover, H \u25e6 is a Hopf algebra\nwhenever so is H. As explained in [30], MH is equivalent to the category of rational left H \u2217 -modules. This gives a functor MH\nH \u25e6 M. If A is a right H-comodule\nalgebra, then A is a left H \u25e6 -module algebra with respect to the corresponding module structure; then we obtain a functor MH\nH \u25e6 MA . Moreover, all objects in the\nA\nimage of that functor are locally A-finite.\nIf H is residually finite dimensional, then H \u25e6 is dense in H \u2217 ; it follows that the\nsubcomodules of any U \u2208 MH coincide with the submodules of the corresponding\nH \u25e6 -module. In this case the H-costable ideals of an H-comodule algebra A coincide\nwith the H \u25e6 -stable ideals, and A is an H-simple H-comodule algebra if and only if\nA is an H \u25e6 -simple H \u25e6 -module algebra.\nIt is easy now to translate the results from the preceding sections to the context\nof comodule algebras. The next result is the comodule version of Theorem 5.6.\nTheorem 7.7. Let M \u2208 MH\nA where H is a residually finite dimensional Hopf\nalgebra and A is an H-simple H-comodule algebra which has semilocal localizations\nwith respect to a central subring Z. Put l = gcd{length A/Q | Q \u2208 Max A}. Then:\n(i) M is projective in MA ; M is a generator in MA provided M 6= 0.\n(ii) Mpl is a free Ap -module for each p \u2208 Spec Z.\n(iii) If M is not A-finite then Mp is a free Ap -module for each p \u2208 Spec Z.\n28\n\n\fIn case of commutative comodule algebras we can weaken the assumption about\nthe Hopf algebra H.\nTheorem 7.8. Suppose H is a directed union of residually finite dimensional Hopf\nsubalgebras and A is a commutative H-comodule algebra. If p \u2208 Spec A contains no\nnonzero H-costable ideals of A then Mp is a free Ap -module for any M \u2208 MH\nA.\nProof. If H is residually finite dimensional and A is finitely generated, the conclusion\nfollows from Theorem 6.3 since in this case Z = A is a noetherian Jacobson ring. In\ngeneral there is a directed family G of residually finite dimensional Hopf subalgebras\nof H whose union coincides with H. Let I be the set of all pairs (A\u2032 , H \u2032 ) where\nH \u2032 \u2208 G and A\u2032 is a finitely generated subalgebra of A such that \u03c1A (A\u2032 ) \u2282 A\u2032 \u2297 H \u2032 .\nGiven two pairs (A1 , H1 ) and (A2 , H2 ) from I, there exists H3 \u2208 G containing both\nH1 and H2 ; clearly (A1 A2 , H3 ) \u2208 I. This shows that I is directed by inclusion.\nFor (A\u2032 , H \u2032 ) \u2208 I we may regard A\u2032 as an H \u2032 -comodule algebra. Any H \u2032 -costable\nideal of A\u2032 extends to an H-costable ideal of A. It follows then that the prime ideal\np\u2032 = p \u2229 A\u2032 of A\u2032 contains no nonzero H \u2032 -costable ideals of A\u2032 . Hence N \u2297A\u2032 A\u2032p\u2032\n\u2032\n\u2032\nis a free A\u2032p\u2032 -module for any N \u2208 MH\nA\u2032 ; since the homomorphism A \u2192 Ap factors\n\u2032\nthrough Ap\u2032 , the Ap -module N \u2297A\u2032 Ap is also free. The assignment (A\u2032 , H \u2032 ) 7\u2192 H \u2032\ndefines an inductive family H of Hopf algebras indexed by I. The direct limit of H is\nequal to H. The assignment (A\u2032 , H \u2032 ) 7\u2192 A\u2032 defines an H-compatible inductive family\nF of comodule algebras. If V is any H-subcomodule of A with dim V < \u221e, then\n\u03c1A (V ) \u2282 V \u2297 H \u2032 for some H \u2032 \u2208 G; denoting by A\u2032 the subalgebra of A generated by\nV , we have (A\u2032 , H \u2032 ) \u2208 I. Since A is covered by its finite dimensional subcomodules,\nthe direct limit of F equals A.\nIt remains to apply Proposition 7.6(iii) with R = Ap . Since the ring Ap is local,\nall projective Ap -modules are free by Kaplansky's Theorem. \u0003\nTheorem 7.8 implies the next result whose proof follows that of Theorem 6.4.\nTheorem 7.9. Let H be a directed union of residually finite dimensional Hopf\nsubalgebras, B an H-comodule algebra, and A an H-costable subalgebra contained\nin the center of B. Suppose that IB = B for each nonzero H-costable ideal I of A.\nThen each object M \u2208 MH\nB is flat in MA .\nIn conclusion we will deduce all results stated in the introduction. The structure\ntheorem for objects of MH\nH [30, Th. 4.1.1] shows that any Hopf algebra H is a\n.\nIf\nA\nis a Hopf subalgebra of H, then A is simple in MA\nsimple object of MH\nA , and\nH\nH\ntherefore simple in MA . In this case A is an H-simple H-comodule algebra.\nIf A is a right coideal subalgebra of H, then IH = H for each H-costable\nideal I 6= 0 of A since IH is an MH\nH -subobject of H. Furthermore, the opposite\nmultiplication makes Aop into a right coideal subalgebra of the bialgebra H op . If the\nantipode of H is bijective, H op is actually a Hopf algebra. The previous argument\napplied to Aop , H op yields HI = H for each nonzero H-costable ideal I of A.\nTheorem 7.10. Let H be a residually finite dimensional Hopf algebra, A be a Hopf\nsubalgebra having semilocal localizations with respect to a central subring Z. Then\neach nonzero object M \u2208 MH\nA is a projective generator in MA and Mp is a free\nAp -module for any p \u2208 Spec Z.\nProof. We apply Theorem 7.7 in which l = 1 since k is a factor algebra of A.\n29\n\n\u0003\n\n\fIn particular, H is a projective generator in MA . We may change both the\nmultiplication and comultiplication in A and H to the opposite ones, obtaining\nanother pair of Hopf algebras Aop,cop \u2282 H op,cop. Theorem 7.10 applied to the latter\nshows that H is a projective generator in A M. Thus Theorem 0.1 is proved.\nTheorem 7.11. Let A \u2282 B \u2282 H where H is a residually finite dimensional Hopf algebra, B is a Hopf subalgebra, and A is a right coideal subalgebra which has semilocal\nlocalizations with respect to a central subring Z. Suppose that B is right modulefinite over A and the antipode of B is bijective. Then each nonzero object M \u2208 MH\nA\nis a projective generator in MA and Mp is a free Ap -module for any p \u2208 Spec Z.\nProof. We have BI = B for each nonzero H-costable ideal I of A. Hence we may\napply Lemma 5.9 regarding M = B as an A-finite object of H \u25e6 MA . It follows that\nA is an H-simple H-comodule algebra. Again Theorem 7.7 applies. \u0003\nTheorem 7.12. Let A \u2282 B \u2282 H where H is a directed union of residually finite\ndimensional Hopf subalgebras, B is any Hopf subalgebra, and A is a right coideal\nsubalgebra contained in the center of B. Then:\n(i) Mp is a free Ap -module for each M \u2208 MH\nA and p \u2208 Spec A with pB 6= B.\n(ii) Each object of MH\nis\nflat\nin\nM\n.\nA\nB\nProof. Since \u2206(A) \u2282 (A \u2297 H) \u2229 (B \u2297 B) = A \u2297 B, we may regard A as a right\ncoideal subalgebra of B. Furthermore, an ideal I of A is H-costable if and only if\nit is B-costable. It follows that IB = B for each nonzero H-costable ideal I of A.\nIn particular, p \u2208 Spec A cannot contain nonzero H-costable ideals of A whenever\npB 6= B. The two conclusions are therefore consequences of Theorems 7.8, 7.9. \u0003\nTheorem 7.13. Let A be a commutative Hopf subalgebra of a Hopf algebra H\nwhich is a directed union of residually finite dimensional Hopf subalgebras. Then\neach nonzero object of MH\nA is a projective generator in MA .\nProof. If H is residually finite dimensional then the conclusion is a special case of\nTheorem 7.10. In general we apply this to each residually finite dimensional Hopf\nsubalgebra H \u2032 of H and the right coideal subalgebra A \u2229 H \u2032 of H \u2032 . Proposition\n7.6(ii) completes the proof. \u0003\nRemark. If A is contained in the center of H then Theorem 7.13 can be proved\nby first observing that H is faithfully flat in MA and then using [32, Th. 5].\nReferences\n1. G. Azumaya, On maximally central algebras, Nagoya Math. J. 2 (1951) 119\u2013150.\n2. H. Bass, Algebraic K-theory, Benjamin, 1968.\n3. J.-E. Bj\u00f6rk, Noetherian and Artinian chain conditions of associative rings, Arch. Math.\n24 (1973) 366\u2013378.\n4. N. Bourbaki, Commutative Algebra, Springer, 1989.\n5. K.A. Brown and K.R. Goodearl, Lectures on Algebraic Quantum Groups, Birkh\u00e4user,\n2002.\n6. R. Camps and W. Dicks, On semilocal rings, Isr. J. Math. 81 (1993) 203\u2013211.\n7. W. Chin, Spectra of smash products, Isr. J. Math. 72 (1990) 84\u201398.\n8. B. Cortzen and L.W. Small, Finite extensions of rings, Proc. Amer. Math. Soc. 103\n(1988) 1058\u20131062.\n9. C.W. Curtis, Noncommutative extensions of Hilbert rings, Proc. Amer. Math. Soc. 4\n(1953) 945\u2013955.\n\n30\n\n\f10. C. De Concini and V. Lyubashenko, Quantum function algebra at roots of 1, Adv.\nMath. 108 (1994) 205\u2013262.\n11. Y. Doi, On the structure of relative Hopf modules, Comm. Algebra 11 (1983) 243\u2013255.\n12. P. Etingof and V. Ostrik, Finite tensor categories, Moscow Math. J. 4 (2004) 627\u2013654.\n13. K. Hoffmann, Coidealunteralgebren in endlich dimensionalen Hopfalgebren, Dissertation, Univ. M\u00fcnchen, 1991.\n14. V.K. Kharchenko, PBW-bases of coideal subalgebras and a freeness theorem, Preprint.\n15. T.-Y. Lam, A First Course in Noncommutative Rings, Graduate Texts in Mathematics,\nVol. 131, Springer, 1991.\n16. A. Masuoka, On Hopf algebras with cocommutative coradicals, J. Algebra 144 (1991)\n451\u2013466.\n17. A. Masuoka, Freeness of Hopf algebras over coideal subalgebras, Comm. Algebra 20\n(1992) 1353\u20131373.\n18. A. Masuoka and D. Wigner, Faithful flatness of Hopf algebras, J. Algebra 170 (1994)\n156\u2013164.\n19. S. Montgomery, Hopf algebras and Their Actions on Rings, CBMS Regional Conference\nSeries in Mathematics, Vol. 82, American Mathematical Society, 1993.\n20. S. Montgomery and H.-J. Schneider, Hopf crossed products, rings of quotients, and\nprime ideals, Adv. Math. 112 (1995) 1\u201355.\n21. S. Montgomery and H.-J. Schneider, Prime ideals in Hopf Galois extensions, Isr.\nJ. Math. 112 (1999) 187\u2013235.\n22. W.D. Nichols and M.B. Zoeller, A Hopf algebra freeness theorem, Amer. J. Math. 111\n(1989) 381\u2013385.\n23. C. Procesi, Non commutative Jacobson-rings, Ann. Scuola Norm. Sup. Pisa 21 (1967)\n281\u2013290.\n24. D.E. Radford, Pointed Hopf algebras are free over Hopf subalgebras, J. Algebra 45\n(1977) 266\u2013273.\n25. J.C. Robson and L.W. Small, Liberal extensions, Proc. London Math. Soc. 42 (1981)\n87\u2013103.\n26. P. Schauenburg, Faithful flatness over Hopf subalgebras: counterexamples, in \"Interactions between ring theory and representations of algebras\", Lect. Notes Pure Appl.\nMath., Vol. 210, Marcel Dekker, 2000, pp. 331\u2013344.\n27. H.-J. Schneider, Some remarks on exact sequences of quantum groups, Comm. Algebra\n21 (1993) 3337\u20133357.\n28. S. Skryabin, Projectivity and freeness over comodule algebras, to appear in Trans. Amer.\nMath. Soc.\n29. S. Skryabin and F. Van Oystaeyen, The Goldie Theorem for H-semiprime algebras,\nJ. Algebra 305 (2006) 292\u2013320.\n30. M.E. Sweedler, Hopf Algebras, Benjamin, 1969.\n31. M. Takeuchi, Free Hopf algebras generated by coalgebras, J. Math. Soc. Japan 23 (1971)\n561\u2013582.\n32. M. Takeuchi, Relative Hopf modules-equivalences and freeness criteria, J. Algebra 60\n(1979) 452\u2013471.\n33. Q.-S. Wu and J.J. Zhang, Noetherian PI Hopf algebras are Gorenstein, Trans. Amer.\nMath. Soc. 355 (2003) 1043\u20131066.\n\n31\n\n\f"}