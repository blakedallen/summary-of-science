{"id": "http://arxiv.org/abs/1202.2287v2", "guidislink": true, "updated": "2012-02-27T20:49:09Z", "updated_parsed": [2012, 2, 27, 20, 49, 9, 0, 58, 0], "published": "2012-02-10T15:46:29Z", "published_parsed": [2012, 2, 10, 15, 46, 29, 4, 41, 0], "title": "QRB-Domains and the Probabilistic Powerdomain", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1202.5870%2C1202.2110%2C1202.1641%2C1202.4655%2C1202.0567%2C1202.6672%2C1202.6600%2C1202.6565%2C1202.2204%2C1202.1513%2C1202.2591%2C1202.5036%2C1202.4694%2C1202.2565%2C1202.0284%2C1202.5098%2C1202.2877%2C1202.3539%2C1202.5333%2C1202.0382%2C1202.5642%2C1202.3300%2C1202.3521%2C1202.5054%2C1202.3318%2C1202.1740%2C1202.0463%2C1202.3565%2C1202.4798%2C1202.5407%2C1202.2571%2C1202.3890%2C1202.1063%2C1202.1449%2C1202.3193%2C1202.1620%2C1202.5805%2C1202.1854%2C1202.6339%2C1202.5420%2C1202.3341%2C1202.0928%2C1202.0674%2C1202.6214%2C1202.4396%2C1202.1897%2C1202.5335%2C1202.1631%2C1202.5833%2C1202.3781%2C1202.5693%2C1202.4780%2C1202.1919%2C1202.1907%2C1202.0278%2C1202.0934%2C1202.5959%2C1202.0422%2C1202.2287%2C1202.5128%2C1202.2800%2C1202.4635%2C1202.5967%2C1202.2092%2C1202.0601%2C1202.2757%2C1202.2824%2C1202.4070%2C1202.0846%2C1202.6112%2C1202.0654%2C1202.1138%2C1202.5471%2C1202.0368%2C1202.3084%2C1202.1551%2C1202.3023%2C1202.4826%2C1202.6181%2C1202.1314%2C1202.3815%2C1202.3919%2C1202.3365%2C1202.6022%2C1202.5188%2C1202.3281%2C1202.0478%2C1202.4939%2C1202.2046%2C1202.1940%2C1202.1906%2C1202.5107%2C1202.4266%2C1202.2777%2C1202.1272%2C1202.4772%2C1202.2068%2C1202.6008%2C1202.5575%2C1202.4783%2C1202.6032&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "QRB-Domains and the Probabilistic Powerdomain"}, "summary": "Is there any Cartesian-closed category of continuous domains that would be\nclosed under Jones and Plotkin's probabilistic powerdomain construction? This\nis a major open problem in the area of denotational semantics of probabilistic\nhigher-order languages. We relax the question, and look for quasi-continuous\ndcpos instead. We introduce a natural class of such quasi-continuous dcpos, the\nomega-QRB-domains. We show that they form a category omega-QRB with pleasing\nproperties: omega-QRB is closed under the probabilistic powerdomain functor,\nunder finite products, under taking bilimits of expanding sequences, under\nretracts, and even under so-called quasi-retracts. But... omega-QRB is not\nCartesian closed. We conclude by showing that the QRB domains are just one half\nof an FS-domain, merely lacking control.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1202.5870%2C1202.2110%2C1202.1641%2C1202.4655%2C1202.0567%2C1202.6672%2C1202.6600%2C1202.6565%2C1202.2204%2C1202.1513%2C1202.2591%2C1202.5036%2C1202.4694%2C1202.2565%2C1202.0284%2C1202.5098%2C1202.2877%2C1202.3539%2C1202.5333%2C1202.0382%2C1202.5642%2C1202.3300%2C1202.3521%2C1202.5054%2C1202.3318%2C1202.1740%2C1202.0463%2C1202.3565%2C1202.4798%2C1202.5407%2C1202.2571%2C1202.3890%2C1202.1063%2C1202.1449%2C1202.3193%2C1202.1620%2C1202.5805%2C1202.1854%2C1202.6339%2C1202.5420%2C1202.3341%2C1202.0928%2C1202.0674%2C1202.6214%2C1202.4396%2C1202.1897%2C1202.5335%2C1202.1631%2C1202.5833%2C1202.3781%2C1202.5693%2C1202.4780%2C1202.1919%2C1202.1907%2C1202.0278%2C1202.0934%2C1202.5959%2C1202.0422%2C1202.2287%2C1202.5128%2C1202.2800%2C1202.4635%2C1202.5967%2C1202.2092%2C1202.0601%2C1202.2757%2C1202.2824%2C1202.4070%2C1202.0846%2C1202.6112%2C1202.0654%2C1202.1138%2C1202.5471%2C1202.0368%2C1202.3084%2C1202.1551%2C1202.3023%2C1202.4826%2C1202.6181%2C1202.1314%2C1202.3815%2C1202.3919%2C1202.3365%2C1202.6022%2C1202.5188%2C1202.3281%2C1202.0478%2C1202.4939%2C1202.2046%2C1202.1940%2C1202.1906%2C1202.5107%2C1202.4266%2C1202.2777%2C1202.1272%2C1202.4772%2C1202.2068%2C1202.6008%2C1202.5575%2C1202.4783%2C1202.6032&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Is there any Cartesian-closed category of continuous domains that would be\nclosed under Jones and Plotkin's probabilistic powerdomain construction? This\nis a major open problem in the area of denotational semantics of probabilistic\nhigher-order languages. We relax the question, and look for quasi-continuous\ndcpos instead. We introduce a natural class of such quasi-continuous dcpos, the\nomega-QRB-domains. We show that they form a category omega-QRB with pleasing\nproperties: omega-QRB is closed under the probabilistic powerdomain functor,\nunder finite products, under taking bilimits of expanding sequences, under\nretracts, and even under so-called quasi-retracts. But... omega-QRB is not\nCartesian closed. We conclude by showing that the QRB domains are just one half\nof an FS-domain, merely lacking control."}, "authors": ["Jean Goubault-Larrecq"], "author_detail": {"name": "Jean Goubault-Larrecq"}, "author": "Jean Goubault-Larrecq", "links": [{"title": "doi", "href": "http://dx.doi.org/10.2168/LMCS-8(1:14)2012", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/1202.2287v2", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1202.2287v2", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "32 pages, 7 figures. An extended abstract already appeared in Proc.\n  25th Annual IEEE Symposium on Logic in Computer Science (LICS'10)", "arxiv_primary_category": {"term": "cs.PL", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "cs.PL", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "D.3.1, F.1.2, F.3.2", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1202.2287v2", "affiliation": "LSV, ENS Cachan, CNRS, INRIA", "arxiv_url": "http://arxiv.org/abs/1202.2287v2", "journal_reference": "Logical Methods in Computer Science, Volume 8, Issue 1 (February\n  29, 2012) lmcs:956", "doi": "10.2168/LMCS-8(1:14)2012", "fulltext": "Logical Methods in Computer Science\nVol. 8 (1:14) 2012, pp. 1\u201333\nwww.lmcs-online.org\n\nSubmitted\nPublished\n\nJan. 27, 2011\nFeb. 29, 2012\n\nQRB-DOMAINS AND THE PROBABILISTIC POWERDOMAIN \u2217\nJEAN GOUBAULT-LARRECQ\nLSV, ENS Cachan, CNRS, INRIA, France\ne-mail address: goubault@lsv.ens-cachan.fr\nAbstract. Is there any Cartesian-closed category of continuous domains that would be\nclosed under Jones and Plotkin's probabilistic powerdomain construction? This is a major\nopen problem in the area of denotational semantics of probabilistic higher-order languages.\nWe relax the question, and look for quasi-continuous dcpos instead. We introduce a natural\nclass of such quasi-continuous dcpos, the omega-QRB-domains. We show that they form\na category omega-QRB with pleasing properties: omega-QRB is closed under the probabilistic powerdomain functor, under finite products, under taking bilimits of expanding\nsequences, under retracts, and even under so-called quasi-retracts. But. . . omega-QRB is\nnot Cartesian closed. We conclude by showing that the QRB domains are just one half of\nan FS-domain, merely lacking control.\n\n1. Introduction\n1.1. The Jung-Tix Problem. A famous open problem in denotational semantics is whether\nthe probabilistic powerdomain V1 (X) of an FS-domain X is again an FS-domain [JT98],\nand similarly with RB-domains in lieu of FS-domains. V1 (X) (resp. V\u22641 (X)) is the dcpo\nof all continuous probability (resp., subprobability) valuations over X: this construction\nwas introduced by Jones and Plotkin to give a denotational semantics to higher-order probabilistic languages [JP89].\nMore generally, is there a category of nice enough dcpos that would be Cartesian-closed\nand closed under V1 ? We call this the Jung-Tix problem. By \"nice enough\", we mean nice\nenough to do any serious mathematics with, e.g., to establish definability or full abstraction\nresults in extensional models of higher-order, probabilistic languages. It is traditional to\nequate \"nice enough\" with \"continuous\", and this is justified by the rich theory of continuous\ndomains [GHK+ 03].\nHowever, quasi-continuous dcpos (see [GLS83], or [GHK+ 03, III-3]) generalize continuous dcpos and are almost as well-behaved. We propose to widen the scope of the problem,\nand ask for a category of quasi-continuous dcpos that would be closed under V1 . We show\nthat, by mimicking the construction of RB-domains [AJ94], with some flavor of \"quasi\",\n1998 ACM Subject Classification: D.3.1, F.1.2, F.3.2.\nKey words and phrases: Domain theory, quasi-continuous domains, probabilistic powerdomain.\n\u2217\nAn extended abstract already appeared in Proc. 25th Annual IEEE Symposium on Logic in Computer\nScience (LICS'10).\n\nl\n\nLOGICAL METHODS\nIN COMPUTER SCIENCE\n\nc\nDOI:10.2168/LMCS-8 (1:14) 2012\n\nCC\n\nJ. Goubault-Larrecq\nCreative Commons\n\n\f2\n\nJ. GOUBAULT-LARRECQ\n\n\u22a4\nHere, X = a\n\n\u22a5\n\nb\n\nLegend:\nEach valuation\nis drawn just as X itself,\nwith blobs on each\nx \u2208 X, indicative\nof the weight of x\n( = 0,\n= 31 ,\n= 23 , = 1).\nE.g.,\n\n= 31 \u03b4a + 23 \u03b4\u22a4\n\nFigure 1: Part of the Hasse Diagram of V1 (X)\nwe obtain a category \u03c9QRB of so-called \u03c9QRB-domains that not only has many desired,\nnice mathematical properties (e.g., it is closed under taking bilimits of expanding sequences,\nand every \u03c9QRB-domain is stably compact), but is also closed under V1 .\nWe failed to solve the Jung-Tix problem: \u03c9QRB is indeed not Cartesian-closed. In spite\nof this, we believe our contribution to bring some progress towards settling the question,\nand at least to understand the structure of V1 (X) better. To appreciate this, recall what\nis currently known about V1 . There are two landmark results: V1 (X) is a continuous dcpo\nas soon as X is ([Eda95], building on Jones [JP89]), and V1 (X) is stably compact (with\nits weak topology) whenever X is [JT98, AMJK04]. Since then, no significant progress has\nbeen made. When it comes to solving the Jung-Tix problem, we must realize that there\nis little choice: the only known Cartesian-closed categories of (pointed) continuous dcpos\nthat may suit our needs are RB and FS [JT98]. I.e., all other known Cartesian-closed\ncategories of continuous dcpos, e.g., bc-domains or L-domains, are not closed under V1 .\nNext, we must recognize that little is known about the (sub)probabilistic powerdomain of\nan RB or FS-domain. In trying to show that either RB or FS was closed under V1 , Jung\nand Tix [JT98] only managed to show that the subprobabilistic powerdomain V\u22641 (X) of a\nfinite tree X was an RB-domain, and that the subprobabilistic powerdomain of a reversed\nfinite tree was an FS-domain. This is still far from the goal.\nIn fact, we do not know whether V1 (X) is an RB-domain when X is even the simple\nposet {\u22a5, a, b, \u22a4} (a and b incomparable, \u22a5 \u2264 a, b \u2264 \u22a4, see Figure 1, right)-but it is\nan FS-domain. For a more complex (arbitrarily chosen) example, take X to be the finite\npointed poset of Figure 2 (i): then V1 (X) and V\u22641 (X) are continuous and stably compact,\nbut not known to be RB-domains or FS-domains (and they are much harder to visualize,\ntoo).\nNo progress seems to have been made on the question since Jung and Tix' 1998 attempt.\nAs part of our results, we show that for every finite pointed poset X, e.g. Figure 2 (i),\nV1 (X) is a continuous \u03c9QRB-domain. This is also one of the basic results that we then\nleverage to show that V1 (X) is an \u03c9QRB-domain for any \u03c9QRB-domain, in particular\nevery RB-domain, not just every finite pointed poset, X.\n\n\fQRB-DOMAINS\n\ng\n\nh\n\n\u03c9\n\nj\n\nd\n\ne\n\na\n\nb\n\ni\n\n3\n\n(0, \u03c9)\n\n(1, \u03c9)\n\n(0, 2)\n(0, 1)\n(0, 0)\n\n(1, 2)\n(1, 1)\n(1, 0)\n\nf\nc\n\n\u22a5\n(i) A finite poset\n\n(0, 2)\n(0, 1)\n(0, 0)\n\n(1, 2)\n(1, 1)\n(1, 0)\n\n(ii) The non-continuous dcpo N2\n\n(iii) N\u03c9 + N\u03c9\n\nFigure 2: Poset Examples\nOne may obtain some intuition as to why this should be so, and at the same time give\nan idea of what (\u03c9)QRB-domains are. Let X be a finite pointed poset. In attempting\nto show that V1 (X) is an RB-domain, we are led to study the so-called deflations f :\nV1 (X) \u2192 V1 (X), i.e., the continuous maps f with finite range such that f (\u03bd) \u2264 \u03bd for\nevery continuous probability valuation \u03bd on X, and we must try to find deflations f such\nthat f (\u03bd) is as close as one desires to \u03bd. All natural definitions of f fail to be continuous,\nand in fact to be monotonic. (E.g., Graham's construction [Gra88] is not monotonic, see\nJung and Tix.) Looking for maps f such that f (\u03bd) is instead a finite, non-empty set of\nvaluations below \u03bd shows more promise-the monotonicity requirements are slightly more\nrelaxed. Such a set-valued function is what we call a quasi-deflation below. For example,\none may think of fixing N \u2265 1 (N = 3 in Figure 1), and mapping \u03bd to the collection of\nall valuations \u03bd \u2032 below \u03bd such that the measure of any subset is a multiple of 1/N , keeping\nonly those \u03bd \u2032 that are maximal. (Pick them from the left of Figure 1, in our example.) This\nstill does not provide anything monotonic, but we managed to show that one can indeed\napproximate every element \u03bd of V1 (X), continuously in \u03bd, using quasi-deflations. The proof\nis non-trivial, and rests on deep properties relating QRB-domains and quasi-retractions,\nall notions that we define and study.\n1.2. Outline. We introduce most of the required notions in Section 2. Since we shall only\nstart studying the probabilistic powerdomain in Section 6, we shall refrain from defining\nvaluations, probabilities, and related concepts until then.\nWe introduce QRB-domains in Section 3. They are defined just as RB-domains are,\nonly with a flavor of \"quasi\", i.e., replacing approximating elements by approximating\nsets of elements. We establish their main properties there, in particular that they are\nquasi-continuous, stably compact, and Lawson-compact. Much as RB-domains are also\ncharacterized as the retracts of bifinite domains, we show that, up to a few details, the\nQRB-domains are the quasi-retracts of bifinite domains in Section 4. This allows us to\nparenthesize QRB as quasi-(retract of bifinite domain) or as (quasi-retract) of bifinite\ndomain. Quasi-retractions are an essential concept in the study of QRB-domains, and we\nintroduce them here, as well as the related notion of quasi-projections-images by proper\nmaps.\nWe also show that the category of countably-based QRB-domains is closed under finite\nproducts (easy) and taking bilimits of expanding sequences (hard, but similar to the case\nof RB-domains) in Section 5.\nThe core of the paper is Section 6, where we show that the category \u03c9QRB of countablybased QRB-domains is closed under the probabilistic powerdomain construction. This\n\n\f4\n\nJ. GOUBAULT-LARRECQ\n\ncapitalizes on all previous sections, and will follow from a variant of Jung and Tix' result\nthat V1 (X) is an RB-domain whenever X is a finite tree, and applying suitable quasiprojections and bilimits. The key result will then be Theorem 6.5, which shows that for\nany quasi-projection Y of a stably compact space X, V1 (Y ) is again a quasi-projection of\nV1 (X), again up to a few details.\nWe conclude in Section 7.\n1.3. Other Related Work. Instead of solving the Jung-Tix problem, one may try to circumvent it. One of the most successful such attempts led to the discovery of qcb-spaces\n[BSS07] and to compactly generated countably-based monotone convergence spaces [BSS06],\nas Cartesian-closed categories of topological spaces where a reasonable amount of semantics can be done. This provides exciting new perspectives. The category of qcb-spaces\naccommodates two probabilistic powerdomains [BS09]. The observationally induced one is\nessentially V1 (X) (with the weak topology), but differs from the one obtained as a free\nalgebra.\n2. Preliminaries\nWe refer to [AJ94, GHK+ 03, Mis98] for background material. A poset X is a set with a\npartial ordering \u2264. Let \u2193 A be the downward closure {x \u2208 X | \u2203y \u2208 A * x \u2264 y}; we write \u2193 x\nfor \u2193{x}, when x \u2208 X. The upward closures \u2191 A, \u2191 x are defined similarly. When x \u2264 y, x\nis below y and y is above x. X is pointed iff it has a least element \u22a5. A dcpo is a poset X\nwhere every directed family (xi )i\u2208I has a least upper bound supi\u2208I xi ; directedness means\nthat I 6= \u2205 and for every i, i\u2032 \u2208 I, there is an i\u2032\u2032 \u2208 I such that xi , xi\u2032 \u2264 xi\u2032\u2032 .\nEvery poset, and more generally each preordered set X comes with a topology, whose\nopens U are the upward closed subsets such that, for every directed family (xi )i\u2208I that has\na least upper bound in U , xi \u2208 U for some i \u2208 I. This is the Scott topology. When we see a\nposet or dcpo X as a topological space, we will implicitly assume the latter, unless marked\notherwise.\nThere is a deep connection between order and topology. Given any topological space X,\nits specialization preorder \u2264 is defined by x \u2264 y iff every open containing x also contains y.\nX is T0 iff \u2264 is an ordering, i.e., x \u2264 y and y \u2264 x imply x = y. The specialization preorder\nof a dcpo X (with ordering \u2264, and equipped with its Scott topology), is the original ordering\n\u2264.\nA subset A of a topological space X is saturated iff it is the intersection of all opens\nU containing A. Equivalently, A is upward closed in the specialization preorder [Mis98,\nRemark after Definition 4.34]. So we can, and shall often prove inclusions A \u2286 B where B\nis upward closed by showing that every open U containing B also contains A.\nA map f : X \u2192 Y between topological spaces is continuous iff f \u22121 (V ) is open for every\nopen subset V of Y . Every continuous map is monotonic with respect to the underlying\nspecialization preorders. When X and Y are preordered sets, it is equivalent to require f\nto be Scott-continuous, i.e., to be monotonic and to preserve existing directed least upper\nbounds. A homeomorphism is a bijective continuous map whose inverse is also continuous.\nGiven a set X, and a family B of subsets of X, there is a smallest topology containing\nB: then B is a subbase of the topology, and its elements are the subbasic opens. To show\nthat f : X \u2192 Y is continuous, it is enough to show that the inverse image of every subbasic\n\n\fQRB-DOMAINS\n\n5\n\nopen of Y is open in X. A subbase B is a base if and only if every open is a union of\nelements of B. This is the case, for example, if B is closed under finite intersections.\nThe interior int(A) of a subset A of a topological space X is the largest open contained\nin A. A is a neighborhood of x if and only if x \u2208 int(A), and a neighborhood of a subset\nB if and only if B \u2286 int(A). A subset Q of a topological space X is compact iff one can\nextract a finite subcover from every open cover of Q. The important ones are the saturated\ncompacts. X is locally compact iff for each open U and each x \u2208 U , there is a compact\nsaturated subset Q such that x \u2208 int(Q) and Q \u2286 U . In any locally compact space, we\nhave the following interpolation property: whenever Q is a compact subset of some open\nU , then there is a compact saturated subset Q1 such that Q \u2286 int(Q1 ) \u2286 Q1 \u2286 U .\nX is sober iff every irreducible closed subset is the closure of a unique point; in the\npresence of local compactness (and when X is T0 ), it is equivalent to require that X be\nwell-filtered [GHK+ 03, Theorem II-1.21], i.e., to require that, for every open U , for every\nT\nfiltered family (Qi )i\u2208I of saturated compacts such that \u2193i\u2208I Qi \u2286 U , Qi \u2286 U for some i \u2208 I\nalready. We say that the family is filtered iff it is directed in the \u2287 ordering, and make it\nS\nexplicit by using \u2193 as superscript. (Symmetrically, we write \u2191 for directed unions.)\nGiven a topological space X, let Q(X) be the collection of all non-empty compact\nsaturated subsets Q of X. There are two prominent topologies one can put on Q(X). The\nupper Vietoris topology has a subbase of opens of the form \u2737U , U open in X, where we write\n\u2737U for the collection of compact saturated subsets Q\u2032 included in U . We shall write QV (X)\nfor the space Q(X) with the upper Vietoris topology, and call it the Smyth powerspace. The\nspecialization ordering of QV (X) is reverse inclusion \u2287. On the other hand, we shall reserve\nthe notation Q\u03c3 (X) for the Smyth powerdomain of X, which is equipped with the Scott\ntopology of \u2287 instead. When X is well-filtered, Q(X) is a dcpo, with least upper bounds\nof directed families computed as filtered intersections, and \u2737U is Scott-open for every open\nsubset U of X, i.e., the Scott topology is finer than the upper Vietoris topology. When X\nis locally compact and sober (in particular, well-filtered), the two topologies coincide, and\nQ\u03c3 (X) is then a continuous dcpo (see below), where Q \u226a Q\u2032 iff Q\u2032 \u2286 int(Q) [GHK+ 03,\nProposition I-1.24.2]. Schalk [Sch93, Chapter 7] provides a deep study of these spaces.\nFor every finite subset E of a topological space X, E is compact and \u2191 E is saturated\ncompact in X. We call finitary compact those subsets of the form \u2191 E with E finite, and let\nFin(X) be the subset of Q(X) consisting of the non-empty finitary compacts. Fin(X) can\nbe topologized with the subspace topology from QV (X), in which case we obtain a space\nwe write FinV (X), or with the Scott topology of reverse inclusion \u2287, yielding a space that\nwe write Fin\u03c3 (X).\nGiven any poset X, any finite subset E of X, and any element x of X, we write E \u2264 x\niff x \u2208 \u2191 E, i.e., iff there is a y \u2208 E such that y \u2264 x. Given any upward closed subset\nU of X, we shall write U \u00ce x iff for every directed family (xi )i\u2208I that has a least upper\nbound above x, then xi is in U for some i \u2208 I. Then a finite set E approximates x iff\n\u2191 E \u00ce x. This is usually written E \u226a x in the literature. We shall also write y \u226a x, when\ny \u2208 X, as shorthand for \u2191 y \u00ce x. This is the more familiar way-below relation, and a poset\nis continuous if and only if the set \u2193\u2193x of all elements y such that y \u226a x is directed and has\nx as least upper bound. One should be aware that \u2191 E \u00ce x means that the elements of E\napproximate x collectively, while none in particular may approximate x individually. E.g.,\nin the poset N2 (Figure 2 (ii)), the sets {(0, m), (1, n)} approximate \u03c9, for all m, n \u2208 N;\nbut (0, m) 6\u226a \u03c9, (1, n) 6\u226a \u03c9.\n\n\f6\n\nJ. GOUBAULT-LARRECQ\n\nIt may be helpful to realize that Fin(X) can also be presented in the following equivalent\nway. Given two finitary compacts \u2191 E and \u2191 E \u2032 , \u2191 E \u2287 \u2191 E \u2032 if and only if for every x\u2032 \u2208 E \u2032 ,\nthere is an x \u2208 E such that x \u2264 x\u2032 , and then we write E \u2264\u266f E \u2032 : this is the so-called Smyth\npreorder . Then we can equate the finitary compacts \u2191 E with the equivalence classes of\nfinite subsets E, up to the equivalence \u2261 defined by E \u2261 E \u2032 iff \u2191 E = \u2191 E \u2032 iff E \u2264\u266f E \u2032\nand E \u2032 \u2264\u266f E, declare that Fin(X) is the set of equivalence classes of non-empty finite sets,\nordered by \u2264\u266f . But the approach based on finitary compacts is mathematically smoother.\nAmong the Cartesian-closed categories of continuous dcpos, one finds in particular\nthe B-domains (a.k.a., the bifinite domains), the RB-domains, i.e., the retracts of bifinite domains [AJ94, Section 4.2.1], and the FS-domains [AJ94, Section 4.2.2][GHK+ 03,\nSection II.2]. There are several equivalent definitions of the first two.\nFor our purposes, an RB-domain is a pointed dcpo X with a directed family (fi )i\u2208I\nof deflations such that supi\u2208I fi = idX [AJ94, Exercise 4.3.11(9)]. A deflation f on X is\na continuous map from X to X such that f (x) \u2264 x for every x \u2208 X, and that has finite\nimage. We order deflations, as well as all maps with codomain a poset, pointwise: i.e.,\nf \u2264 g iff f (x) \u2264 g(x) for every x \u2208 X; knowing this, directed families and least upper\nbounds of deflations make sense. Every RB-domain is a continuous dcpo, and fi (x) \u226a x\nfor every i \u2208 I and every x \u2208 X.\nA B-domain is defined similarly, except the deflations fi are now required to be idempotent, i.e., fi \u25e6 fi = fi [AJ94, Theorem 4.2.6]. This implies that fi (x) \u226a fi (x), i.e., that\nall the elements fi (x) are finite; hence all bifinite domains are also algebraic. Every bifinite\ndomain is an RB-domain. Conversely, the RB-domains are exactly the retracts of bifinite\ndomains: we shall define what this means and extend this in Section 4.\nAn FS-domain is defined similarly again, except the functions fi are no longer deflations, but continuous functions that are finitely separated from idX . That is, we now\nrequire that there is a finite set Mi such that for every x \u2208 X, there is an m \u2208 Mi such that\nfi (x) \u2264 m \u2264 x. We say that Mi is finitely separating for fi on X.\nEvery deflation is finitely separated from idX : take Mi to be the image of fi . The\nconverse fails. E.g., for every \u01eb > 0, the function x 7\u2192 max(x \u2212 \u01eb, 0) is finitely separated\nfrom the identity on [0, 1], but is not a deflation [JT98, Section 3.2]. Every RB-domain is\nan FS-domain. The converse is not known.\nA quasi-continuous dcpo X (see [GLS83] or [GHK+ 03, Definition III-3.2]) is a dcpo\nsuch that, for every x \u2208 X, the collection of all \u2191 E \u2208 Fin(X) that approximate\nx (\u2191 E \u00ce x)\nT\nis directed (w.r.t. \u2287) and their least upper bound in Q(X) is \u2191 x, i.e., \u2191 E\u2208Fin(X) \u2191 E = \u2191 x.\n\u2191 E\u00cex\n\nThe theory of quasi-continuous dcpos is less well explored than that of continuous dcpos, but\nquasi-continuous dcpos retain many of the properties of the latter. (Every continuous dcpo\nis quasi-continuous, but not conversely. A counterexample is given by N2 , see Figure 2 (ii).)\nEvery quasi-continuous dcpo X is locally compact and sober in its Scott topology [GHK+ 03,\nIII-3.7]. In a quasi-continuous dcpo X, for every \u2191 E \u2208 Fin(X), the set \u2191\u2191E defined as\n{x \u2208 X | \u2191 E \u00ce x}, is open, and equals the interior int(\u2191 E) [GHK+ 03, III-3.6(ii)]; every\nopen U is the union of all the subsets \u2191\u2191E with \u2191 E \u2208 Fin(X) contained in U [GHK+ 03,\nIII-5.6]; and for every compact saturated subset Q and every open subset U containing Q,\nthere is a finitary compact subset \u2191 E of X such that Q \u2286 \u2191\u2191E and \u2191 E \u2286 U [GHK+ 03,\nT\nIII-5.7]. In particular, Q = \u2193\n\u2191 E. Another consequence is interpolation:\n\u2191E\n\u2191 E\u2208Fin(X), Q\u2286\u2191\nwriting \u2191 E \u00ce \u2191 E \u2032 for \u2191 E \u00ce y for every y in E \u2032 (equivalently, \u2191 E \u2032 \u2286 \u2191\u2191E), if \u2191 E \u00ce x in a\n\n\fQRB-DOMAINS\n\n7\n\nquasi-continuous dcpo X, for some \u2191 E \u2208 Fin(X), and x \u2208 X, then \u2191 E \u00ce \u2191 E \u2032 \u00ce x for some\n\u2191 E \u2032 \u2208 Fin(X).\nT\nIf X is a quasi-continuous dcpo, the formula Q = \u2193\n\u2191 E, valid for every\n\u2191E\n\u2191 E\u2208Fin(X), Q\u2286\u2191\nQ \u2208 Q(X), shows that Q is the filtered intersection of its finitary compact neighborhoods,\nequivalently the directed least upper bound of those non-empty finitary compacts \u2191 E (E \u2208\nFin(X)) that are way-below Q. In other words, the finitary compacts form a basis of Q(X).\n3. QRB-Domains\nWe model QRB-domains after RB-domains, replacing single approximating elements fi (x),\nwhere fi is a deflation, by finite subsets, as in quasi-continuous dcpos.\nDefinition 3.1 (QRB-Domain). A quasi-deflation on a poset X is a continuous map\n\u03c6 : X \u2192 Fin\u03c3 (X) such that x \u2208 \u03c6(x) for every x \u2208 X, and im \u03c6 = {\u03c6(x) | x \u2208 X} is finite.\nA QRB-domain is a pointed dcpo X with a generating family of quasi-deflations, i.e.,\nT\na directed family of quasi-deflations (\u03c6i )i\u2208I with \u2191 x = \u2193i\u2208I \u03c6i (x) for each x \u2208 X.\nWe order quasi-deflations pointwise, i.e., \u03c6 \u2264 \u03c8 iff \u03c6(x) \u2287 \u03c8(x) for every x \u2208 X. Above,\nT\nT\nwe write \u2193 instead of to stress the fact that the family (\u03c6i (x))i\u2208I of which we are taking\nthe intersection is filtered, i.e., for any two i, i\u2032 \u2208 I, there is an i\u2032\u2032 \u2208 I such that \u03c6i\u2032\u2032 (x) is\ncontained in both \u03c6i (x) and \u03c6i\u2032 (x). It is equivalent to say that (\u03c6i (x))i\u2208I is directed in the\n\u2287 ordering of Fin(X).\nOne can see the finitary compacts \u03c6i (x) as being smaller and smaller upward closed sets\nT\ncontaining x. The intersection \u2193i\u2208I \u03c6i (x) is then just the least upper bound of (\u03c6i (x))i\u2208I\nin the Smyth powerdomain Q(X). On the other hand, X embeds into QV (X) by equating\nT\nx \u2208 X with \u2191 x \u2208 Q(X). Modulo this identification, the condition \u2191 x = \u2193i\u2208I \u03c6i (x) requires\nthat x is the least upper bound of (\u03c6i (x))i\u2208I in Q(X).\nThat \u03c6 is continuous means that \u03c6 is monotonic (x \u2264 y implies \u03c6(x) \u2287 \u03c6(y)), and that\nT\nfor every directed family (xj )j\u2208J of elements of X, \u03c6(supj\u2208J xj ) is equal to \u2193i\u2208I \u03c6(xj )-this\nimplies that the latter is finitary compact, in particular.\nProposition 3.2. Every RB-domain is a QRB-domain.\nProof. Given a directed family of deflations (fi (x))i\u2208I , define \u03c6i (x) as \u2191 fi (x). If fi \u2264 fj ,\nT\nthen \u03c6i (x) \u2287 \u03c6j (x) for every x \u2208 X, so (\u03c6i )i\u2208I is directed. Also, \u2193i\u2208I \u03c6i (x) is the set of\nupper bounds of (fi (x))i\u2208I , of which the least is x. So this set is exactly \u2191 x.\nWe shall improve on this in Theorem 7.3, which implies that not only the RB-domains,\nbut all FS-domains, are QRB-domains.\nFor any deflation f , and more generally whenever f is finitely separated from the\nidentity, f (x) is way-below x [GHK+ 03, Lemma II-2.16]. Similarly:\nLemma 3.3. Let X be a poset, and \u03c6 be a quasi-deflation on X. For every x \u2208 X,\n\u03c6(x) \u00ce x.\nProof. Let (xj )j\u2208J be a directed family having a least upper bound above x. Since \u03c6 is\nT\ncontinuous, \u2193j\u2208J \u03c6(xj ) \u2286 \u03c6(x). But since im \u03c6 is finite, there are only finitely many sets\n\u03c6(xj ), j \u2208 J. So \u03c6(xj ) \u2286 \u03c6(x) for some j \u2208 J. Since xj \u2208 \u03c6(xj ), xj \u2208 \u03c6(x).\n\n\f8\n\nJ. GOUBAULT-LARRECQ\n\nCorollary 3.4. Every QRB-domain is quasi-continuous.\nIn general, QRB-domains are not continuous. E.g., N2 (Figure 2 (ii)) is not continuous.\nHowever, N2 is a QRB-domain: for all i, j \u2208 N, take \u03c6ij (\u03c9) = \u2191{(0, i), (1, j)}, \u03c6ij (0, m) =\n\u2191{(0, min(m, i)), (1, j)}, \u03c6ij (1, m) = \u2191{(0, i), (1, min(m, j))}. Then (\u03c6ij )i,j\u2208N is the desired\ndirected family of quasi-deflations.\nRB-domains, and more generally FS-domains, are not just continuous domains, they\nare stably compact, i.e., locally compact, sober, compact and coherent (see, e.g., [AJ94,\nTheorem 4.2.18]). We say that a topological space is coherent iff the intersection of any\ntwo compact saturated subsets is compact (and saturated). In a stably compact space,\nthe intersection of any family of compact saturated subsets is compact. We show that\nQRB-domains are stably compact as well.\nSince every quasi-continuous dcpo is locally compact and sober [GHK+ 03, Proposition III-3.7], and also compact since pointed, only coherence remains to be shown. For this,\nwe need the following consequence of Rudin's Lemma, a finitary form of well-filteredness:\nProposition 3.5 ([GHK+ 03, Corollary III-3.4]). Let X be a dcpo, (\u2191 Ei )i\u2208I be a directed\nT\nfamily in Fin(X). For every open subset U of X, if \u2193i\u2208I \u2191 Ei \u2286 U , then \u2191 Ei \u2286 U for some\ni \u2208 I.\nIt follows that, if X is a dcpo, then the Scott topology on Fin(X) is finer than the\nupper Vietoris topology. Indeed, this reduces to showing that Fin(X) \u2229 \u2737U is Scott-open in\nFin(X), for every open subset U of X. And this is Proposition 3.5, plus the easily checked\nfact that \u2737U is upward closed in \u2287.\nCorollary 3.6. Let X be a dcpo. The Scott topology is finer than the upper Vietoris topology\non Fin(X), and coincides with it whenever X is quasi-continuous.\nProof. It remains to show that, if X is a quasi-continuous dcpo, then every Scott-open U\nof Fin(X) is open in the upper Vietoris topology. Let \u2191 E \u2208 Fin(X) be in U . It suffices to\nshow that there is an open subset U of X such that \u2191 E \u2208 \u2737U \u2286 U . Write E = {x1 , . . . , xn }.\nFor each i, 1 \u2264 i \u2264 n, \u2191 xi is the filtered intersection of all finitary compacts \u2191 Ei \u00ce xi .\nThe unions \u2191 E1 \u222a . . . \u222a \u2191 En = \u2191(E1 \u222a . . . \u222a En ), with \u2191 E1 \u00ce x1 , . . . , \u2191 En \u00ce xn , also form\na directed family in Fin(X), and their intersection is \u2191 E. So there are finitary compacts\n\u2191 E1 \u00ce x1 , . . . , \u2191 En \u00ce xn whose union is in U . Since \u2191 Ei \u00ce xi for each i, each xi is in\n\u2191Ei , so \u2191 E \u2208 \u2737U with U = \u2191\u2191E1 \u222a . . . \u222a \u2191\u2191En . Moreover, \u2737U \u2286 U : for each\nthe Scott-open \u2191\n\u2032\n\u2191 E \u2208 \u2737U , \u2191 E \u2032 is included in U \u2286 \u2191 E1 \u222a . . . \u2191 En ; since \u2191 E1 \u222a . . . \u2191 En is in U and U is\nupward-closed in \u2287, \u2191 E \u2032 is in U .\nSchalk [Sch93, Chapter 7] proved that QV defines a monad on the category of topology\nspaces (see [Mog91] for an introduction to monads and their importance in programming\nlanguage semantics). This means first that there is a unit map \u03b7X -here, \u03b7X maps x \u2208 X\n\u22121\n(\u2737U ) = U . That QV is a monad also\nto \u2191 x \u2208 QV (X), and this is continuous because \u03b7X\nmeans that every continuous map h : X \u2192 QV (Y ) has an extension S\nh\u2020 : QV (X) \u2192 QV (Y ),\n\u2020\n\u2020\n\u2020\ni.e., h is continuous and h \u25e6 \u03b7X = h. This is defined by h (Q) = x\u2208Q h(x) in our case.\n\u22121\n\nAgain, h\u2020 is continuous, because h\u2020 (\u2737U ) = \u2737h\u22121 (\u2737U ). And the monad laws are satisfied:\n\u2020\n\u03b7X\n= idQV (X) , h\u2020 \u25e6 \u03b7X = h, and (g \u2020 \u25e6 h)\u2020 = g\u2020 \u25e6 h\u2020 . One should be careful here: QV is a\nmonad, but Q\u03c3 is not a monad, except on specific subcategories, e.g., sober locally compact\nspaces X, where Q\u03c3 (X) = QV (X) anyway.\nThe continuity claims in the following lemma are then obvious.\n\n\fQRB-DOMAINS\n\n9\n\nLemma 3.7. Let X, Y be topological spaces. Given any continuous map \u03c8 : X \u2192 FinV (Y ),\nits extension \u03c8 \u2020 restricts to a continuous map \u03c8 \u2020 : FinV (X) \u2192 FinV (Y ). If im \u03c8 is finite,\nthen \u03c8 \u2020 maps QV (X) continuously into FinV (Y ).\nProof. In each case, one only needs to show that \u03c8 \u2020 maps relevant compacts toSfinitary compacts. In the first case, for every finitary compact \u2191 E \u2208 Fin(X), \u03c8 \u2020 (\u2191 E) = x\u2208\u2191 E \u03c8(x) =\nS\n(because \u03c8 is monotonic), and this is finitary compact. In the second case,\nx\u2208E \u03c8(x)\nS\n\u2020\n\u03c8 (Q) = x\u2208Q \u03c8(x) is a finite union of finitary compacts since im \u03c8 is finite.\nOne would also like \u03c8 \u2020 to be continuous from Q\u03c3 (X) to Fin\u03c3 (Y ), in the face of the\nimportance of the Scott topology. This is a consequence of the above when X is sober and\nlocally compact, and Y is a quasi-continuous dcpo, since Q\u03c3 (X) = QV (X) and Fin\u03c3 (Y ) =\nFinV (Y ) in this case. However, one can also prove this in a more general setting, using the\nfollowing observation. For each topological space Z, write Z\u03c3 for Z with the Scott topology\nof its specialization preorder. For short, we shall call quasi monotone convergence space\nany space Z such that the (Scott) topology on Z\u03c3 is finer than that of Z, i.e., such that\nevery open subset of Z is open is Scott-open. This is a slight relaxation of the notion of\nmonotone convergence space, i.e., of a quasi monotone convergence space that is a dcpo\nin its specialization preorder [GHK+ 03, Definition II-3.12]. E.g., every sober space is a\nmonotone convergence space, and in particular a quasi monotone convergence space.\nLemma 3.8. Let Z be a quasi monotone convergence space and Z \u2032 be a topological space.\nEvery continuous map f : Z \u2192 Z \u2032 is Scott-continuous, i.e., continuous from Z\u03c3 to Z\u03c3\u2032 .\nProof. Since f is continuous, it is monotonic with respect to the underlying specialization\npreorders. Let (zi )i\u2208I be any directed family of elements of Z, with least upper bound\nz. Certainly f (z) is an upper bound of (f (zi ))i\u2208I . Let us show that, for any other upper\nbound z \u2032 , f (z) \u2264 z \u2032 . It is enough to show that every open neighborhood V of f (z) contains\nz \u2032 . Since f (z) \u2208 V , z is in the open subset f \u22121 (V ), which is Scott-open by assumption, so\nzi \u2208 f \u22121 (V ) for some i \u2208 I. It follows that f (zi ) is in V , hence also z \u2032 since V is upward\nclosed.\nWhen X is sober and locally compact, the topology of Q\u03c3 (X) coincides with that\nof QV (X). In particular, Z = QV (X) is a quasi-monotone convergence space. Taking\nZ \u2032 = QV (Y ) in Lemma 3.8, one obtains the following corollary.\nCorollary 3.9. Let X be a sober, locally compact space, and Y be a topological space. Every\ncontinuous map from QV (X) to QV (Y ) is also Scott-continuous from Q(X) to Q(Y ).\nSimilarly, with Z \u2032 = FinV (Y ):\nCorollary 3.10. Let Y be a topological space, Z be a quasi monotone convergence space.\nEvery continuous map from Z to FinV (Y ) is Scott-continuous, i.e., continuous from Z\u03c3 to\nFin\u03c3 (Y ).\nLemma 3.11. Let X be a QRB-domain, and (\u03c6i )i\u2208I a generating family of quasi-deflations.\nS\nFor every open subset U of X, \u2191i\u2208I \u03c6\u22121\ni (\u2737U ) = U .\n\n\u22121\nProof. The union is directed, since \u03c6\u22121\ni (\u2737U ) \u2286 \u03c6i\u2032 (\u2737U ) whenever \u03c6i is pointwise below\n\u03c6i\u2032 , i.e., when \u03c6i (x) \u2287 \u03c6i\u2032 (x) for all x \u2208 X. For every i \u2208 I, \u03c6\u22121\ni (\u2737U ) \u2286 U : every element x\nof \u03c6\u22121\n(\u2737U\n)\nis\nindeed\nsuch\nthat\nx\n\u2208\n\u03c6\n(x)\n\u2286\nU\n.\nConversely,\nwe\nclaim that every element x of\ni\ni\n\n\f10\n\nJ. GOUBAULT-LARRECQ\n\nU is in \u03c6\u22121\ni (\u2737U ) for some i \u2208 I. Indeed, \u2191 x \u2286 U , so\n\u03c6i (x) \u2286 U for some i \u2208 I, i.e., \u03c6i (x) \u2208 \u2737U .\n\nT\n\ni\u2208I\n\n\u2191 \u03c6i (x) \u2286 U . By Proposition 3.5,\n\nLemma 3.12. Let X be a QRB-domain, and (\u03c6i )i\u2208I a generating family of quasi-deflations.\nT\nFor every compact saturated subset Q of X, Q = \u2193i\u2208I \u03c6\u2020i (Q).\nT\nProof. Since x \u2208 \u03c6i (x) for every x, \u03c6\u2020i (Q) contains Q for every i \u2208 I. So Q \u2286 \u2193i\u2208I \u03c6\u2020i (Q).\nConversely, since Q is saturated, it is enough to show that every open U containing Q also\nS\nT\ncontains \u2193i\u2208I \u03c6\u2020i (Q). Since Q \u2286 U , by Lemma 3.11, Q \u2286 \u2191i\u2208I \u03c6\u22121\ni (\u2737U ). By compactness,\n\u22121\nQ \u2286 \u03c6i (\u2737U ) for some i \u2208 I, i.e., for every x \u2208 Q, \u03c6i (x) \u2286 U . So \u03c6\u2020i (Q) \u2286 U .\nProposition 3.13. For every QRB-domain X, Q(X) is an RB-domain.\nProof. Assume X is a QRB-domain, with generating family of quasi-deflations (\u03c6i )i\u2208I . The\nfamily (\u03c6\u2020i )i\u2208I is directed, since if \u03c6i is below \u03c6j , i.e., if \u03c6i (x) \u2287 \u03c6j (x) for every x \u2208 X, then\nS\nS\n\u03c6\u2020i (Q) = x\u2208Q \u03c6i (x) \u2287 x\u2208Q \u03c6j (x) = \u03c6\u2020j (Q). Since X is quasi-continuous (Corollary 3.4), it\n\nis sober and locally compact. So Corollary 3.9 applies, showing that \u03c6\u2020i is Scott-continuous\nfrom Q(X) to Q(X). Lemma 3.12 states that the least upper bound of (\u03c6\u2020i )i\u2208I is the identity\non Q(X). Clearly, \u03c6\u2020i has finite image. So Q(X) is an RB-domain.\nTheorem 3.14. Every QRB-domain is stably compact.\n\nProof. Let X be a QRB-domain, with generating family of quasi-deflations (\u03c6i )i\u2208I . We\nclaim that, given any two compact saturated subsets Q and Q\u2032 of X, Q\u2229Q\u2032 is again compact\nsaturated. This is obvious if Q\u2229Q\u2032 is empty. Otherwise, writing \u2191Y y for the upward closure\nof an element y of a poset Y , \u2191Q(X) Q\u2229\u2191Q(X) Q\u2032 is an intersection of two finitary compacts in\nQV (X). Since X is a quasi-continuous dcpo by Corollary 3.4, X is sober and locally compact,\nso QV (X) = Q\u03c3 (X). Moreover, Q(X) is an RB-domain (Proposition 3.13), so QV (X) is\ncoherent. Therefore \u2191Q(X) Q\u2229\u2191Q(X) Q\u2032 is compact saturated in QV (X). It is also non-empty:\npick x \u2208 Q \u2229 Q\u2032 , then \u2191X x is in \u2191Q(X) Q \u2229 \u2191Q(X) Q\u2032 . So \u2191Q(X) Q \u2229 \u2191Q(X) Q\u2032 is in Q(QV (X)).\nNow there is a (continuous) map \u03bcX : QV (QV (X)) \u2192 QV (X) defined as id\u2020QV (X) -this is\nthe so-called multiplication of the monad-and \u03bcX (\u2191Q(X) Q \u2229 \u2191Q(X) Q\u2032 ) is then an element\nof Q(X), i.e., a compact subset of X. We now observe that \u03bcX (\u2191Q(X) Q \u2229 \u2191Q(X) Q\u2032 ) =\nS\n\u2032\u2032\n\u2032\nQ\u2032\u2032 \u2208Q(X) Q is equal to Q \u2229 Q : the left to right inclusion is obvious, and conversely every\nQ\u2032\u2032 \u2286Q,Q\u2032\n\nx \u2208 Q \u2229 Q\u2032 defines an element Q\u2032\u2032 = \u2191X x of Q(X) that is included in Q and Q\u2032 . So Q \u2229 Q\u2032\nis compact saturated. We conclude that X is coherent.\nX is compact since pointed, and also locally compact and sober, as a quasi-continuous\ndcpo, hence stably compact.\nThe Lawson topology is the smallest topology containing both the Scott-opens and the\ncomplements of all finitary compacts \u2191 E \u2208 Fin(X). When X is a quasi-continuous dcpo,\nsince \u2191 E is compact saturated and every non-empty compact saturated subset is a filtered\nintersection of such sets \u2191 E, the Lawson topology coincides with the patch topology, i.e., the\nsmallest topology containing the original Scott topology and all complements of compact\nsaturated subsets. Every stably compact space is patch-compact, i.e., compact in its patch\ntopology [GHK+ 03, Section VI-6]. So:\nCorollary 3.15. Every QRB-domain is Lawson-compact.\n\n\fQRB-DOMAINS\n\n11\n\nIn the sequel, we shall need some form of countability:\nDefinition 3.16. An \u03c9QRB-domain is a QRB-domain with a countable generating family\nof quasi-deflations.\nProposition 3.17. A pointed dcpo X is an \u03c9QRB-domain iff there is a generating sequence of quasi-deflations (\u03c6i )i\u2208N , i.e., for every i, i\u2032 \u2208 N, i \u2264 i\u2032 , \u03c6i (x) \u2287 \u03c6i\u2032 (x) for every\nT\nx \u2208 X, and \u2191 x = \u2193i\u2208N \u03c6i (x) for every x \u2208 X.\nProof. Let X be an \u03c9QRB-domain, and (\u03c8j )j\u2208N be a countable generating family of quasideflations. Build a sequence (ji )i\u2208N by letting j0 = 0, and ji+1 be any j \u2208 N such that \u03c8j\nis above \u03c8i and \u03c8ji , by directedness. Then let \u03c6i = \u03c8ji for every i \u2208 N. By construction,\nwhenever i \u2264 i\u2032 , \u03c6i is below \u03c6i+1 . And for every i \u2208 N, \u03c8i is below \u03c6i = \u03c8ji , so \u2191 x =\nT\u2193\ni\u2208N \u03c6i (x) for every x \u2208 X. So (\u03c6i )i\u2208N is the desired sequence.\nRecall that a topological space is countably-based if and only if it has a countable\nsubbase, or equivalently, a countable base.\nProposition 3.18. A QRB-domain X is an \u03c9QRB-domain iff it is countably-based.\nProof. Only if: let (\u03c6i )i\u2208N be a generating sequence of quasi-deflations on X. For\ni \u2208 N,\nSneach\ni\nenumerate im \u03c6i as {\u2191 Ei1 , . . . , \u2191 Eini } \u2286 Fin(X), and let Ei be the finite set j=1 Eij . We\nclaim that the countably many subsets int(\u03c6i (y)), y \u2208 Ej , i, j \u2208 N, form a base of the\ntopology.\nIt is enough to show that, for every open U and every element x \u2208 U , x \u2208 int(\u03c6i (y)) for\nT\nsome y \u2208 Ej , i, j \u2208 N, such that \u03c6i (y) \u2286 U : since \u2191 x = \u2193j\u2208N \u03c6j (x) \u2286 U , use Proposition 3.5\nto find j \u2208 N such that \u03c6j (x) \u2286 U . Since x \u2208 \u03c6j (x) and \u03c6j (x) = \u2191 Ejk for some k, there\nis a y \u2208 Ejk \u2286 Ej such that y \u2264 x, and y \u2208 U . Repeating the argument on y, we find\ni \u2208 N such that \u03c6i (y) \u2286 U . By Lemma 3.3, \u03c6i (y) \u00ce y, i.e., y is in int(\u03c6i (y)) since X is\nquasi-continuous. Since y \u2264 x, x is in int(\u03c6i (y)).\nIf: let (\u03c6i )i\u2208I be a generating family of quasi-deflations on X, and assume that the\ntopology of X has a countable base {Uk | k \u2208 N}. Assume without loss of generality that\nUk 6= \u2205 for every k \u2208 N. For every pair l, k \u2208 N such that Ul \u2286 \u2191 E \u2286 Uk for some\nfinite set E, pick one such finite set and call it Elk . One can enumerate all such pairs\nT\nas lm , km , m \u2208 N. By Lemma 3.12, \u2193i\u2208I \u03c6\u2020i (\u2191 Elm km ) = \u2191 Elm km . By Proposition 3.5,\n\u03c6\u2020i (\u2191 Elm km ) \u2286 Ukm for some i \u2208 I: pick such an i and call it im . By directedness, we\nmay also assume that \u03c6im is also above \u03c6in , 0 \u2264 n < m. Define \u03c8m as \u03c6im . This yields a\nnon-decreasing sequence of quasi-deflations (\u03c8m )m\u2208N .\nT\nWe claim that it is generating. On one hand, \u2191 x \u2286 \u2193k\u2208N \u03c8k (x) since each \u03c8k is a\nquasi-deflation. Conversely, every open neighborhood U of x contains some Uk , k \u2208 N,\nT\nwith x \u2208 Uk . Then \u2191 x = \u2193i\u2208I \u03c6i (x) \u2286 Uk , so \u03c6i (x) \u2286 Uk for some i \u2208 I. Write \u03c6i (x)\nas \u2191 E, where E is finite. By Lemma 3.3, \u03c6i (x) \u00ce x, so x \u2208 \u2191\u2191E \u2286 \u2191 E \u2286 Uk . As\n\u2191\u2191E is open, x \u2208 Ul \u2286 \u2191\u2191E for some l \u2208 N. In particular, Ul \u2286 \u2191 E \u2286 Uk . So l, k\n\u2020\nis a pair of the form lm , km . By definition \u03c8m\n(\u2191 Elk ) \u2286 Uk . Since x \u2208 Ul \u2286 \u2191 Elk ,\n\u2020\n\u2020\n\u03c8m (x) = \u03c8m\n(\u2191 x) \u2286 \u03c8m\n(\u2191 Elk ) \u2286 Uk \u2286 U . So every open neighborhood U of x contains\nT\nT\n\u03c8m (x) for some m \u2208 N, hence \u2193m\u2208N \u03c8m (x). So \u2193m\u2208N \u03c8m (x) \u2286 \u2191 x, whence the equality.\n\n\f12\n\nJ. GOUBAULT-LARRECQ\n\nX\n\u03c2(y)\nx\nr \u22121 (\u2191 y)\n\n\u03c2\n\nr\n\nY\n\ny = r(x)\n\nFigure 3: A quasi-retraction\n4. Quasi-Retracts of Bifinite Domains\nThe RB-domains can be characterized as the retracts of bifinite domains. Recall that a\nretraction of X onto Y is a continuous map r : X \u2192 Y such that there is continuous map\ns : Y \u2192 X (the section) with r(s(y)) = y for every y \u2208 Y .\nWe shall show that (\u03c9)QRB-domains are not just closed under retractions, but under\na more relaxed notion that we shall call quasi-retractions. More precisely, our aim in this\nsection is to show that the \u03c9QRB-domains are exactly the quasi-retracts of bifinite domains,\nup to some details.\nFor each continuous r : X \u2192 Y , define Qr : QV (X) \u2192 QV (Y ) by Qr(Q) = \u2191{r(x) |\nx \u2208 Q}. Qr is continuous, since Qr \u22121 (\u2737V ) = \u2737r \u22121 (V ) for every open V . This is the\naction of the QV functor of the Smyth powerspace monad [Sch93, Chapter 7], equivalently\nQr = (\u03b7Y \u25e6 r)\u2020 .\nDefinition 4.1 (Quasi-retract). A quasi-retraction r : X \u2192 Y of X onto Y is a continuous\nmap such that there is a continuous map \u03c2 : Y \u2192 QV (X) (the quasi-section) such that\nQr(\u03c2(y)) = \u2191 y for every y \u2208 Y .\nA topological space Y is a quasi-retract of X iff there is a quasi-retraction of X onto\nY.\nIn diagram notation, we require the bottom right triangle to commute, but not the top\nleft triangle-what the puncture + indicates; the outer square always commutes:\nr\n\n/Y\nss\ns\ns\ns\n\u03b7X\n\u03b7Y\ns\u03c2 s\ns\ns\n\u000f ys\n\u000f\n/ QV (Y )\nQV (X)\n\nX\n\n(4.1)\n\n+\n\nQr\n\nWhile a section s : Y \u2192 X picks an element s(y) in the inverse image r \u22121 (y), continuously, a\nquasi-section is only required to pick a non-empty compact saturated collection of elements\nfrom r \u22121 (\u2191 y) meeting r \u22121 (y) (see Figure 3), continuously again.\nEvery retraction r (with section s) defines a canonical quasi-retraction: let \u03c2(y) = \u2191 s(y),\nthen Qr(\u03c2(y)) = \u2191{r(z) | s(y) \u2264 z} = \u2191 r(s(y)) = \u2191 y.\nThe converse fails. For example, N2 is a quasi-retract of N\u03c9 + N\u03c9 (see Figure 2 (iii)):\nr maps both (0, \u03c9) and (1, \u03c9) to \u03c9 \u2208 N2 , and \u03c2(y) = r \u22121 (\u2191 y) for every y. But Y is not a\n\n\fQRB-DOMAINS\n\n13\n\nretract of X: X is a continuous dcpo, and every retract of a continuous dcpo is again one;\nrecall that N2 is not continuous.\nEvery quasi-retraction r : X \u2192 Y induces a continuous map \u03b7Y \u25e6r : X \u2192 QV (Y ), which\nis then a retraction in the Kleisli category C Q . A retraction in a category is a morphism\nr : X \u2192 Y such that there is a section morphism s : Y \u2192 X, i.e., one with r \u25e6 s = idY . It\nis easy to see that the quasi-retractions are exactly those continuous maps r : X \u2192 Y such\nthat \u03b7Y \u25e6 r is a retraction in C Q .\nLemma 4.2. Every quasi-retraction r : X \u2192 Y onto a T0 space Y is surjective. More\nprecisely, if \u03c2 is a matching quasi-section, then every element y \u2208 Y is of the form r(x) for\nsome x \u2208 \u03c2(y).\nProof. For every y \u2208 Y , \u2191 y = Qr(\u03c2(y)). Since y \u2208 Qr(\u03c2(y)), r(x) \u2264 y for some x \u2208 \u03c2(y).\nBut r(x) is then in Qr(\u03c2(y)) = \u2191 y, so y \u2264 r(x). Therefore y = r(x).\nThe following is reminiscent of the fact that every retract of a stably compact space\nis again stably compact [Law87, Proposition, bottom of p.153, and subsequent discussion]:\nwe shall show that any T0 quasi-retract of a stably compact space is stably compact. We\nstart with compactness.\nLemma 4.3. Every T0 quasi-retract Y of a compact space Y is compact.\nProof. The image of a compact set by a continuous map is compact. Now apply Lemma 4.2.\nLemma 4.4. Any quasi-retract Y of a well-filtered space X is well-filtered.\nProof. Let r : X \u2192 Y be the quasi-retraction, with quasi-section \u03c2 : Y \u2192 QV (X).\nLet (Qi )i\u2208I be a filtered family of compact saturated subsets of Y , and assume that\nT\u2193\n\u2032\n\u2020\nis compact saturated, and\ni\u2208I Qi \u2286 V , where V is open in Y . Let Qi = \u03c2 (Qi ). This T\n\u2020\nforms a directed\nfamily, since \u03c2 is monotonic. We claim that i\u2208I Q\u2032i \u2286 r \u22121 (V ). Indeed,\nT\n\u2032\nevery x \u2208 i\u2208I Qi is such that, for every i \u2208 I, there is a yi \u2208 Qi such that x \u2208 \u03c2(yi ); then\nT\nr(x) \u2208 Qr(\u03c2(yi )) = \u2191 yi , so r(x) \u2208 Qi , for every i \u2208 I. Since \u2193i\u2208I Qi \u2286 V , r(x) is in V ,\nwhence the claim.\nSince X is well-filtered, Q\u2032i \u2286 r \u22121 (V ) for some i \u2208 I. Then, for every y \u2208 Qi , \u03c2(y) \u2286\n\u03c2 \u2020 (Qi ) = Q\u2032i \u2286 r \u22121 (V ), so y \u2208 Qr(\u03c2(y)) \u2286 Qr(r \u22121 (V )) \u2286 V . So Qi \u2286 V .\nLemma 4.5. Any T0 quasi-retract Y of a coherent space X is coherent.\nProof. Let r : X \u2192 Y be the quasi-retraction, with quasi-section \u03c2 : Y \u2192 QV (X).\nWe use the fact that Qr \u25e6 \u03c2 \u2020 is the identity on QV (Y ). This is a well-known identity on\nmonads: by the monad law (g\u2020 \u25e6 h)\u2020 = g\u2020 \u25e6 h\u2020 , and since Qr = (\u03b7Y \u25e6 r)\u2020 , Qr \u25e6 \u03c2 \u2020 = (Qr \u25e6 \u03c2)\u2020 ,\nand this is \u03b7Y\u2020 = idQV (Y ) by the first monad law.\nLet Q1 , Q2 be two compact saturated subsets of Y . Then \u03c2 \u2020 (Q1 ) \u2229 \u03c2 \u2020 (Q2 ) is compact\nsaturated in X, using the fact that X is coherent. So Qr(\u03c2 \u2020 (Q1 ) \u2229 \u03c2 \u2020 (Q2 )) is compact\nsaturated in Y . We claim that Qr(\u03c2 \u2020 (Q1 ) \u2229 \u03c2 \u2020 (Q2 )) = Q1 \u2229 Q2 , which will finish the proof.\nIn one direction, every element y of Q1 \u2229 Q2 is in Qr(\u03c2 \u2020 (Q1 ) \u2229 \u03c2 \u2020 (Q2 )): by Lemma 4.2, pick\nx \u2208 \u03c2(y) such that y = r(x), and observe that x \u2208 \u03c2 \u2020 (Q1 ) (indeed x \u2208 \u03c2(y), where y \u2208 Q1 )\nand x \u2208 \u03c2 \u2020 (Q2 ). In the other direction, Qr(\u03c2 \u2020 (Q1 ) \u2229 \u03c2 \u2020 (Q2 )) \u2286 Qr(\u03c2 \u2020 (Q1 )) \u2229 Qr(\u03c2 \u2020 (Q2 )) =\nQ1 \u2229 Q2 , since Qr \u25e6 \u03c2 \u2020 is the identity on Q(Y ).\n\n\f14\n\nJ. GOUBAULT-LARRECQ\n\nLemma 4.6. Any quasi-retract Y of a locally compact space X is locally compact.\nProof. Let r : X \u2192 Y be the quasi-retraction, with quasi-section \u03c2 : Y \u2192 QV (X). Let y be\nany point of Y , and V be an open neighborhood of y. Since y \u2208 V , Qr(\u03c2(y)) = \u2191 y \u2286 V ,\nso \u03c2(y) \u2286 r \u22121 (V ). Observe that \u03c2(y) is compact saturated and r \u22121 (V ) is open in X. Use\ninterpolation in the locally compact space X: there is a compact saturated subset Q1 such\nthat \u03c2(y) \u2286 int(Q1 ) \u2286 Q1 \u2286 r \u22121 (V ).\nIn particular, \u03c2(y) \u2208 \u2737int(Q1 ), so y is in the open subset \u03c2 \u22121 (\u2737int(Q1 )). The latter\nis included in the compact subset Qr(Q1 ), since every element y \u2032 of it is such that \u03c2(y \u2032 ) \u2286\nint(Q1 ) \u2286 Q1 , hence \u2191 y \u2032 = Qr(\u03c2(y \u2032 )) \u2286 Qr(Q1 ). In particular, y is in the interior of\nQr(Q1 ). Finally, since Q1 \u2286 r \u22121 (V ), Qr(Q1 ) \u2286 V .\nProposition 4.7. Every T0 quasi-retract Y of a stably compact space X is stably compact.\nProof. Y is T0 by assumption, and locally compact, well-filtered, compact, and coherent by\nLemma 4.3, Lemma 4.4, Lemma 4.5, and Lemma 4.6. In the presence of local compactness,\nit is equivalent to require sobriety or to require the space to be T0 and well-filtered [GHK+ 03,\nTheorem II-1.21].\nCall a space X locally finitary if and only if for every x \u2208 X and every open neighborhood U of x, there is a finitary compact \u2191 E such that x \u2208 int(\u2191 E) and \u2191 E \u2286 U . This is the\nsame definition as for local compactness, replacing compact saturated subsets by finitary\ncompacts. The interpolation property of locally compact spaces refines to the following: In\na locally finitary space X, if Q is compact saturated and included in some open subset U ,\nthen there is a finitary compact \u2191 E such that Q \u2286 int(\u2191 E) and \u2191 E \u2286 U . The proof is as\nfor interpolation in locally compact spaces: for each x \u2208 Q, pick a finitary compact \u2191 Ex\nsuch that x \u2208 int(\u2191 Ex ) and \u2191 Ex \u2286 U . (int(\u2191 Ex ))x\u2208Q is an open cover of Q. Since Q is\ncompact, it has a finite subcover \u2191 E1 , . . . , \u2191 En . Then take E = E1 \u222a . . . \u222a En .\nWe observe right away the following analog of Lemma 4.6.\nLemma 4.8. Any quasi-retract Y of a locally finitary space X is locally finitary.\nProof. As in the proof of Lemma 4.6, let y \u2208 Y and V be an open neighborhood of y. By\ninterpolation between Q = \u03c2(y) and U = r \u22121 (V ) in the locally finitary space X, we find a\nfinitary compact subset Q1 = \u2191 E1 of X such that \u03c2(y) \u2286 int(Q1 ) \u2286 Q1 \u2286 r \u22121 (V ). The rest\nof the proof is as for Lemma 4.6, only noticing that Qr(Q1 ) = \u2191 r(E1 ) is finitary compact.\nThe importance of locally finitary spaces lies in the following result: see Banaschewski\n[Ban77], or the equivalence between Items (6) and (11) in Lawson [Law85, Theorem 2]. See\nalso Isbell [Isb75] for the notion of locally finitary space, up to change of names.\nProposition 4.9. The locally finitary sober spaces are exactly the quasi-continuous dcpos\nin their Scott topology.\nWe use this, in particular, in the following proposition.\nProposition 4.10. Every T0 quasi-retract of an (\u03c9)QRB-domain is an (\u03c9)QRB-domain.\nProof. Let X be a QRB-domain, Y be a T0 space, r : X \u2192 Y be a quasi-retraction, and\n\u03c2 : Y \u2192 QV (X) be a matching quasi-section. We first note that Y is stably compact, by\nProposition 4.7, using the fact that X is itself stably compact (Theorem 3.14). So Y is sober.\nBy Proposition 4.9, X is locally finitary, so Y is, too, by Lemma 4.8. By Proposition 4.9\nagain, Y is a quasi-continuous dcpo, and its topology is the Scott topology.\n\n\fQRB-DOMAINS\n\n15\n\nNote that Y is pointed. Letting \u22a5 be the least element of X, r(\u22a5) is the least element\nof Y : for every y \u2208 Y , pick some x \u2208 X such that r(x) = y by Lemma 4.2, then r(\u22a5) \u2264\nr(x) = y.\nFor each quasi-deflation \u03c6 on X, \u03c6 is continuous from X to FinV (X): indeed it is\ncontinuous from X to Fin\u03c3 (X) and Fin\u03c3 (X) = FinV (X) by Corollary 3.6, since X is quasicontinuous (Corollary 3.4). So \u03c6\u2020 makes sense. Let \u03c6\nb : Y \u2192 FinV (Y ) map y to Qr(\u03c6\u2020 (\u03c2(y)));\n\u03c6(y)\nb\nis in Fin(Y ) because \u03c6\u2020 (\u03c2(y)) \u2208 Fin(X) (Lemma 3.7, second part), and Qr(\u2191 E) =\n\u2191{r(z) | z \u2208 E} is finitary compact for every finite set E.\nExplicitly, \u03c6(y)\nb\n= \u2191{r(z) | \u2203x \u2208 \u03c2(y) * z \u2208 \u03c6(x)}.\nFor every open subset V of Y , \u03c6\nb\u22121 (\u2737V ) is the set of all y \u2208 Y such that for every\nx \u2208 \u03c2(y), for every z \u2208 \u03c6(x), r(z) \u2208 V . I.e., for every x \u2208 \u03c2(y), \u03c6(x) \u2286 r \u22121 (V ), that\nis, \u03c2(y) \u2286 \u03c6\u22121 (\u2737r \u22121 (V )). So \u03c6\nb\u22121 (\u2737V ) = \u03c2 \u22121 (\u2737\u03c6\u22121 (\u2737r \u22121 (V ))). Since the latter is open,\nand the sets \u2737V form a subbase of the topology of QV (Y ), \u03c6\nb is continuous from Y to\nFinV (Y ). Since Y is a quasi-continuous dcpo and its topology is Scott, by Corollary 3.6\nFin\u03c3 (Y ) = FinV (Y ), so \u03c6\nb is also Scott-continuous from Y to Fin(Y ). (Alternatively, apply\nCorollary 3.10.)\nWe claim that y \u2208 \u03c6(y)\nb\nfor every y \u2208 Y . Since Qr(\u03c2(y)) = \u2191 y, y \u2208 Qr(\u03c2(y)), so there\nis an x \u2208 \u03c2(y) such that r(x) \u2264 y. Now x \u2208 \u03c6(x), so taking z = x in the definition of \u03c6(y),\nb\ny is in \u03c6(y).\nb\nLet now (\u03c6i )i\u2208I be a generating family of quasi-deflations on X. Clearly, if \u03c6i is below\n\u03c6j , then \u03c6\nbi is below \u03c6\nbj , so (\u03c6\nbi )i\u2208I is directed.\nT\nIt remains to show that \u2193i\u2208I \u03c6\nbi (y) = \u2191 y for every y \u2208 Y . Since y \u2208 \u03c6\nbi (y), it remains\nT\nT\u2193\nbi (y).\nbi (y) \u2286 \u2191 y: we show that every open V containing y contains \u2193i\u2208I \u03c6\nto show i\u2208I \u03c6\nSince y \u2208 V and Qr(\u03c2(y)) = \u2191 y, Qr(\u03c2(y)) \u2286 V , so \u03c2(y) \u2208 Qr \u22121 (\u2737V ) = \u2737r \u22121 (V ), i.e.,\nS\n\u22121\n\u22121\n\u03c2(y) \u2286 r \u22121 (V ). By Lemma 3.11, \u2191i\u2208I \u03c6\u22121\ni (\u2737r (V )) = r (V ). Since \u03c2(y) is compact,\n\u22121\n\u22121\n\u22121\n\u22121 (V ))), which is equal\n\u03c2(y) \u2286 \u03c6i (\u2737r (V )) for some i \u2208 I. So y is in \u03c2 (\u2737\u03c6\u22121\ni (\u2737r T\nto \u03c6\nb\u22121\nbi (y), hence \u2193i\u2208I \u03c6\nbi (y). So Y is a\ni (\u2737V ) (see above). It follows that V contains \u03c6\nQRB-domain.\nThe case of \u03c9QRB-domains is similar, where now (\u03c6i )i\u2208N is a generating sequence of\nquasi-deflations.\nLater, we shall need a refinement of the notion of quasi-retraction, which is to the latter\nas projections are to retractions. Recall that a projection is a retraction r : X \u2192 Y , with\nsection s, such that additionally s \u25e6 r \u2264 idX . Similarly, it is tempting to define a quasiprojection as a quasi-retraction (with quasi-section \u03c2) such that x \u2208 \u03c2(r(x)) for every x \u2208 X.\nIf r is a retraction, with section s, and we see r as a quasi-retraction in the canonical way,\ndefining \u03c2(y) as \u2191 s(y), then the quasi-projection condition x \u2208 \u03c2(r(x)) is equivalent to the\nprojection condition (s \u25e6 r)(x) \u2264 x.\nThe point x shown in Figure 3 satisfies the condition x \u2208 \u03c2(r(x)): x is in the gray area\n\u03c2(y), where y = r(x). However, Lemma 4.11 below shows that r is not a quasi-projection:\nfor this to be the case, the gray area \u03c2(y) should fill the whole of r \u22121 (\u2191 y).\nThere is no need to invent a new term, though: Lemma 4.11 shows that quasi-projections\nare nothing else than proper surjective maps. A map r : X \u2192 Y is proper if and only if it\nis continuous, \u2193 r(F ) is closed in Y for every closed subset F of X, and r \u22121 (\u2191 y) is compact\nin X for every element y of Y [GHK+ 03, Lemma VI-6.21 (i)].\n\n\f16\n\nJ. GOUBAULT-LARRECQ\n\nLemma 4.11. Let X be a topological space, and Y be a T0 topological space. For a map\nr : X \u2192 Y , the following two conditions are equivalent:\n(1) r is a quasi-retraction, with matching quasi-section \u03c2 : Y \u2192 QV (X), such that additionally x \u2208 \u03c2(r(x)) for every x \u2208 X;\n(2) r is proper and surjective.\nThen the quasi-section \u03c2 in (1) is unique, and it is defined by \u03c2(y) = r \u22121 (\u2191 y).\nProof. We first prove the following fact, which will serve in both directions of proof: (\u2217)\nassume \u03c2(y) = r \u22121 (\u2191 y) for every y \u2208 Y , then for every open subset U of X, the complement\nof \u03c2 \u22121 (\u2737U ) in Y is \u2193 r(F ), where F is the complement of U in X. Indeed, the complement\nof \u03c2 \u22121 (\u2737U ) is the set of elements y \u2208 Y such that \u03c2(y) is not included in U , i.e., such that\nthere is an x \u2208 \u03c2(y) that is not in U , i.e., in F . Since \u03c2(y) = r \u22121 (\u2191 y), this is the set of\nelements y such that there is an x \u2208 F such that y \u2264 r(x), namely, \u2193 r(F ).\nAssume r is a quasi-retraction, and \u03c2 is a matching quasi-section such that x \u2208 \u03c2(r(x))\nfor every x \u2208 X. We have seen that r is surjective (Lemma 4.2).\nSince Qr(\u03c2(y)) = \u2191 y, every element x of \u03c2(y) is such that r(x) is in \u2191 y, so \u03c2(y) \u2286\nr \u22121 (\u2191 y). Conversely, for every x \u2208 r \u22121 (\u2191 y), i.e., if y \u2264 r(x), then \u03c2(y) \u2287 \u03c2(r(x)) since\n\u03c2 is monotonic. We have assumed that x was in \u03c2(r(x)), so x \u2208 \u03c2(y). It follows that\n\u03c2(y) = r \u22121 (\u2191 y), which proves the last claim in the Lemma.\nIt also follows that r \u22121 (\u2191 y) is compact in X. And, using (\u2217), for every closed subset F\nof X, with complement U , \u2193 r(F ) is the complement of \u03c2 \u22121 (\u2737(U )), which is open since \u03c2 is\ncontinuous, so \u2193 r(F ) is closed. Therefore r is proper.\nConversely, assume that r is proper and surjective. Define \u03c2(y) as r \u22121 (\u2191 y). Since r is\nsurjective, \u03c2(y) is non-empty. It is saturated, i.e., upward closed, because r is monotonic.\nSince r \u22121 (\u2191 y) is compact, \u03c2(y) is an element of Q(Y ). For every open subset U of X, with\ncomplement F , \u03c2 \u22121 (\u2737U ) is the complement of \u2193 r(F ) by (\u2217), hence is open since r is proper.\nSo \u03c2 is continuous.\nThe equation Qr(\u03c2(y)) = \u2191 y follows from Qr(\u03c2(y)) = \u2191{r(x) | x \u2208 r \u22121 (\u2191 y)} and the\nfact that r is surjective. It is clear that x is in \u03c2(r(x)) = r \u22121 (\u2191 r(x)) for every x \u2208 X.\nLet us turn to bifinite domains, or rather to their countably-based variant. Countability\nwill be needed in a few crucial places.\nA pointed dcpo X is an \u03c9B-domain (a.k.a. an SFP-domain) iff there is a non-decreasing\nsequence of idempotent deflations (fi )i\u2208N such that, for every x \u2208 X, x = supi\u2208N fi (x). I.e.,\nan \u03c9B-domain is just like a B-domain, except that we take a non-decreasing sequence, not\na general directed family of idempotent deflations.\nThe key lemma to prove Theorem 4.13 below is the following refinement of Rudin's\nLemma [GHK+ 03, III-3.3]. Note that Rudin's Lemma would only secure the existence of a\ndirected family Z whose least upper bound is y, and which intersects each Ei0 ; but Z may\nintersect each Ei0 in more than one element yi . We pick exactly one element yi in each Ei0 ,\nand for this countability seems to be needed.\nLemma 4.12. Let Y be a dcpo, y \u2208 Y , and (\u2191 Ei0 )i\u2208N a non-decreasing sequence in Fin(Y )\nT\n(w.r.t. \u2287) such that \u2191 y = \u2193i\u2208N \u2191 Ei0 . There is a non-decreasing sequence (yi )i\u2208N in Y such\nthat yi \u2208 Ei0 for every i \u2208 N, and supi\u2208N yi = y.\nProof. Let Ei = Ei0 \u2229 \u2193 y for every i \u2208 N. (Ei )i\u2208N is a non-decreasing sequence in Fin(Y )\nT\nsuch that y \u2208 \u2193i\u2208N \u2191 Ei , and Ei \u2286 \u2193 y.\n\n\fQRB-DOMAINS\n\n17\n\nBuild a tree as follows. Informally, there is a root node, all (non-root) nodes at distance\ni \u2265 1 from the root node are labeled by some element of Ei\u22121 , and each such node N ,\nlabeled yi\u22121 , say, has as many successors as there are elements yi in Ei such that yi\u22121 \u2264 yi .\nFormally, one can define the nodes as being the sequences y0 , y1 , . . . , yi\u22121 , i \u2208 N, where\ny0 \u2208 E0 , y1 \u2208 E1 , . . . , yi\u22121 \u2208 Ei\u22121 , and y0 \u2264 y1 \u2264 . . . \u2264 yi\u22121 . Such a node is labeled yi\u22121\n(if i \u2265 1), and its successors are all the sequences y0 , y1 , . . . , yi\u22121 , yi with yi chosen in Ei ,\nand above yi\u22121 if i \u2265 1.\nThis tree has arbitrarily long branches (paths from the root). Indeed, for every i \u2208 N,\npick an element yi \u2208 Ei -this is possible since y \u2208 \u2191 Ei , hence Ei is non-empty-, then an\nelement yi\u22121 \u2208 Ei\u22121 below yi -since \u2191 Ei\u22121 \u2287 \u2191 Ei -, then an element yi\u22122 \u2208 Ei\u22122 below\nyi\u22121 , . . . , and finally an element y0 \u2208 E0 below y1 . This is a node at distance i + 1 from\nthe root.\nIt follows that the tree is infinite. It is finitely-branching, meaning that every node has\nonly finitely many successors-because Ei is finite. K\u0151nig's Lemma then states that this\ntree must have an infinite branch. Reading the labels on non-root nodes in this branch, we\nobtain an infinite sequence y0 \u2264 y1 \u2264 . . . \u2264 yi \u2264 . . . of elements yi \u2208 Ei , i \u2208 N. Clearly,\nT\nyi \u2208 Ei0 for each i \u2208 N. In particular, supi\u2208N yi \u2208 \u2193i\u2208N \u2191 Ei0 = \u2191 y, so y \u2264 supi\u2208N yi . Since\nEi \u2286 \u2193 y for every i \u2208 N, the converse inequality holds. So supi\u2208N yi = y.\nTheorem 4.13. The following are equivalent for a dcpo Y :\n(i): Y is an \u03c9QRB-domain;\n(ii): Y is a quasi-retract of an \u03c9B-domain;\n(iii): Y is the image of an \u03c9B-domain under a proper map.\nProof. (iii) \u21d2 (ii). Because any proper surjective map is a quasi-retraction (Lemma 4.11).\n(ii) \u21d2 (i). Write Y as a quasi-retract of an \u03c9B-domain X. X is trivially an \u03c9QRBdomain. Since Y , as a dcpo, is T0 , Proposition 4.10 applies, so Y is an \u03c9QRB-domain.\n(i) \u21d2 (iii). Let Y be an \u03c9QRB-domain, with generating sequence S\nof quasi-deflations\ni\n(\u03c6i )i\u2208N . Let im \u03c6i = {\u2191 Ei1 , . . . , \u2191 Eini }, and define Ei as the finite set nj=1\nEij , for each\ni \u2208 S\nN. Let X be the set of all non-decreasing sequences ~y = (yi )i\u2208N in Y such that\nyi \u2208 j\u2264i Ej , and yi \u2208 \u03c6i (supk\u2208N yk ). Order X componentwise. As in [Jun88, Theorem 4.9,\nTheorem 4.1], X is an \u03c9B-domain: for each i0 \u2208 N, consider the idempotent deflation fi0\ndefined by fi0 (~y ) = (ymin(i,i0 ) )i\u2208N . To show that this is well-defined, we must show that\nymin(i,i0 ) \u2208 \u03c6i (supk\u2208N ymin(k,i0 ) ), i.e., that ymin(i,i0 ) \u2208 \u03c6i (yi0 ). If i \u2264 i0 , then ymin(i,i0 ) = yi \u2208\n\u03c6i (supk\u2208N yk ) \u2286 \u03c6i (yi0 ) since ~\ny \u2208 X and \u03c6i is monotonic, else ymin(i,i0 ) = yi0 \u2208 \u03c6i (y0 ) since\n\u03c6i is a quasi-deflation. It is easy to see that fi0 is Scott-continuous.\nLet now r : X \u2192 Y map ~\ny to supi\u2208N yi . This is evidently Scott-continuous. For any\nfixed y \u2208 Y , apply Lemma 4.12 with \u2191 Ei0 = \u03c6i (y) to obtain a non-decreasing sequence\n~y = (yi )i\u2208N such that yi \u2208 \u03c6i (y) for every i \u2208 N and supi\u2208N yi = y: in particular, ~y is in Y ,\nand r(~y) = y. So r is surjective. Let us show that it is proper.\nTo this end, we first remark that r \u22121 (\u2191 y) = {~y \u2208 X | \u2200i \u2208 N * yi \u2208 \u03c6i (y)}. Indeed, if\n~y = (yi )i\u2208N is in r \u22121 (\u2191 y), then y \u2264 r(~y) = supk\u2208N yk , and since ~y \u2208 X, yi \u2208 \u03c6i (supk\u2208N yk ) \u2286\n\u03c6i (y), using the fact\nT that \u03c6i is monotonic. Conversely, if yi \u2208 \u03c6i (y) for every i \u2208 N, then\nr(~y ) = supi\u2208N yi \u2208 i\u2208N \u03c6i (y) = \u2191 y.\nThis remark makes it easier for us to show that r \u22121 (\u2191 y) is compact for every y \u2208 Y .\nFor each i0 \u2208 N, let Qi0 = {~y \u2208 X | \u2200i \u2264 i0 * yi \u2208 \u03c6i (y)}. Let Ki0 be the set of all elements\n~y of Qi0 such that yi = yi0 for every\nS i \u2265 i0 . Note that Ki0 is finite, (recall that each yi with\ni \u2264 i0 is taken from the finite set j\u2264i Ej ), and that Qi0 = \u2191 Ki0 . Indeed, for every ~y \u2208 Qi0 ,\n\n\f18\n\nJ. GOUBAULT-LARRECQ\n\nits image fi0 (~y ) by the idempotent deflation fi0 is in Ki0 , and is below ~y . So Qi0 is (finitary)\ncompact. Every \u03c9B-domain is stably compact [AJ94, Theorem 4.2.18], and anyT\nintersection\nof saturated compacts in a stably compact space is compact, so r \u22121 (\u2191 y) = i0 \u2208N Qi0 is\ncompact.\nLet us now show that \u2193 r(F ) is closed for every closed subset F of X. Consider a directed\nfamily (zj )j\u2208J of elements of \u2193 r(F ), and let z = supj\u2208J zj . Since zj \u2208 \u2193 r(F ), F intersects\nr \u22121 (\u2191 zj ). The family (r \u22121 (\u2191 zj ))j\u2208J is a filtered family of compact saturated subsets of X,\neach of which intersects the closed set F . Since X is an \u03c9B-domain, it is stably compact,\nT\nhence well-filtered: so \u2193j\u2208J r \u22121 (\u2191 zj ) intersects F . (Explicitly: if it did not, it would be\nincluded in the open complement U of F , hence some r \u22121 (\u2191 zj ) would be included in U ,\nT\ncontradicting the fact that it intersects F .) Let ~y be any element of \u2193j\u2208J r \u22121 (\u2191 zj ) \u2229 F .\nThen zj \u2264 r(~y ) for every j \u2208 J, so z = supj\u2208J zj \u2264 r(~y ), hence z \u2208 \u2193 r(F ).\n5. Products, Bilimits\nWe first show that finite products of QRB-domains are again QRB-domains.\nLemma 5.1. If (\u03c6i )i\u2208I (resp. (\u03c8j )j\u2208J ) is a generating family of quasi-deflations on X\n(resp. Y ), then (\u03c7ij )i\u2208I,j\u2208J is one on X \u00d7 Y , where \u03c7ij (x, y) = \u03c6i (x) \u00d7 \u03c8j (y).\nProof. Clearly, (x, y) \u2208 \u03c7ij (x, y), \u03c7ij (x, y) is finitary compact, and im \u03c7ij is finite. For all\nT\nT\ni, j, \u03c7ij is easily seen to be Scott-continuous, and \u2193i\u2208I, j\u2208J \u03c7ij (x, y) = \u2193i\u2208I, j\u2208J (\u03c6i (x) \u00d7\nT\nT\n\u03c8j (y)) = \u2193i\u2208I \u03c6i (x) \u00d7 \u2193j\u2208J \u03c8j (y) = \u2191 x \u00d7 \u2191 y = \u2191(x, y).\nSo:\nLemma 5.2. For any two (\u03c9)QRB-domains X, Y , X \u00d7 Y , with the product ordering, is\nan (\u03c9)QRB-domain.\nRecall that a retraction p : X \u2192 Y , with section e : Y \u2192 X, is a projection iff,\nadditionally, e(p(x)) \u2264 x for every x \u2208 X; then e is usually called an embedding, and is\ndetermined uniquely from p. An expanding system of dcpos is a family (Xi )i\u2208I , where I is\na directed poset (with ordering \u2264), with projection maps (pij )i,j\u2208I,i\u2264j where pij : Xj \u2192 Xi ,\npii = idXi , and pik = pij \u25e6 pjk whenever i \u2264 j \u2264 k [AJ94, Section 3.3.2]. This is nothing else\nthan a projective system of dcpos, where the connecting maps pij must be projections. If\neij : Xi \u2192 Xj is the associated embedding, then one checks that eii = idXi and eik = ejk \u25e6eij\nwhenever i \u2264 j \u2264 k, so that (Xi )i\u2208I together with (eij )i,j\u2208I,i\u2264j forms an inductive system\nof dcpos as well. In the category of dcpos, the projective limit of the former coincides with\nthe inductive limit of the latter (up to natural isomorphism), and is called the bilimit of the\nexpanding system of dcpos. We write this bilimit as limi\u2208I Xi , leaving the dependence\nQ on \u2264,\npij , eij , implicit. This can be built as the dcpo of all those elements ~x = (xi )i\u2208I \u2208 i\u2208I Xi\nsuch that pij (xj ) = xi for all i, j \u2208 I with i \u2264 j, with the componentwise ordering.\nGeneral bilimits of countably-based dcpos will fail to be countably-based in general, so\nwe shall restrict to bilimits of expanding sequences of dcpos [AJ94, Definition 3.3.6]: these\nare expanding systems of dcpos where the index poset I is N, with its usual ordering. To\nmake it clear what we are referring to, we shall call \u03c9-bilimit of spaces any bilimit of an\nexpanding sequence (not system) of spaces.\n\n\fQRB-DOMAINS\n\n19\n\nOne can appreciate bilimits by realizing that the B-domains are (up to isomorphism)\nthe bilimits of expanding systems of finite, pointed posets [AJ94, Theorem 4.2.7]. Similarly,\nthe \u03c9B-domains are the \u03c9-bilimits of expanding sequences of finite, pointed posets.\nBilimits are harder to deal with than products. But the difficulty was solved by Jung\n[Jun88, Section 4.1] in the case of RB-domains and deflations, and we proceed in a very\nsimilar way. We first recapitulate the notion of bilimit.\nConsider any set G of functions \u03c8 from X to Fin(X) such that \u03c8(x) \u2287 \u2191 x, i.e., x \u2208 \u03c8(x),\nfor every x \u2208 X. We say that G is qfs (for quasi-finitely separating) iff given any finitely\nmany pairs (\u2191 Ek , xk ) \u2208 Fin(X) \u00d7 X with \u2191 Ek \u00ce xk , 1 \u2264 k \u2264 n, there is a \u03c8 \u2208 G that\nseparates the pairs, i.e., such that \u2191 Ek \u2287 \u03c8(xk ) \u2287 \u2191 xk (equivalently, xk \u2208 \u03c8(xk ) \u2286 \u2191 Ek )\nfor every k, 1 \u2264 k \u2264 n.\nProposition 5.3. Let X be a poset. Then X is a QRB-domain iff X is a quasi-continuous\ndcpo and the set G of quasi-deflations on X is qfs.\nProof. If X is a QRB-domain, then let (\u2191 Ek , xk ) \u2208 Fin(X) \u00d7 X be such that \u2191 Ek \u00ce xk\nfor every k, 1 \u2264 k \u2264 n, and (\u03c6i )i\u2208I be a generating family of quasi-deflations. For each k,\nT\n1 \u2264 k \u2264 n, \u2191 xk = \u2193i\u2208I \u03c6i (xk ) \u2286 \u2191\u2191Ek , so by Proposition 3.5 there is an i \u2208 I such that\n\u03c6i (xk ) \u2286 \u2191\u2191Ek \u2286 \u2191 Ek . And we may pick the same i for every k, by directedness. So \u03c6i is\nthe desired \u03c8 \u2208 G.\nAlso, X is a quasi-continuous dcpo by Corollary 3.4.\nConversely, assume that X is a quasi-continuous dcpo and G is qfs. We show that\nH = {\u03c6\u2020 \u25e6 \u03c6 | \u03c6 \u2208 G} is a generating family of quasi-deflations. Using Corollary 3.6,\nFinV (X) = Fin\u03c3 (X). Write it Fin(X), for short. For each \u03c6 \u2208 G, \u03c6 is continuous from\nX to Fin(X), and \u03c6\u2020 is continuous from Fin(X) to Fin(X) Sby Lemma 3.7, so \u03c6\u2020 \u25e6 \u03c6 is\ncontinuous from X to Fin(X). Since x \u2208 \u03c6(x), x is also in x\u2032 \u2208\u03c6(x) \u03c6(x\u2032 ) = (\u03c6\u2020 \u25e6 \u03c6)(x).\nAlso, im(\u03c6\u2020 \u25e6 \u03c6) is finite, since all its elements are unions of elements of the finite set im \u03c6.\nSo \u03c6\u2020 \u25e6 \u03c6 is a quasi-deflation.\nLet usSshow that H is directed. Pick \u03c6 and \u03c6\u2032 from G. Let im \u03c6 =\nSn{\u2191 E1\u2032, . . . , \u2191 Em },\nm\n\u2032\n\u2032\n\u2032\n\u2032\nand E = i=1 Ei . Similarly, let im \u03c6 = {\u2191 E1 , . . . , \u2191 En } and E = j=1 Ej . For each\ny \u2208 E, \u03c6(y) \u00ce y by Lemma 3.3. Since X is quasi-continuous, use interpolation, and pick a\nfinitary compact \u2191 Ey such that \u03c6(y) \u00ce \u2191 Ey \u00ce y. Similarly, let \u2191 Ey\u2032 \u2032 be a finitary compact\nsuch that \u2191 Ey\u2032 \u2032 \u00ce y \u2032 and \u03c6\u2032 (y \u2032 ) \u00ce \u2191 Ey\u2032 \u2032 for each y \u2032 \u2208 E \u2032 .\nConsider the finite collection of all pairs (\u2191 Ey , y), (\u03c6(y), z), (\u2191 Ey\u2032 \u2032 , y \u2032 ), and (\u03c6\u2032 (y \u2032 ), z \u2032 ),\nwhere y \u2208 E, z \u2208 Ey , y \u2032 \u2208 E \u2032 , z \u2032 \u2208 Ey\u2032 . Since G is qfs, there is a \u03c8 \u2208 G such that\n\u2191 E \u2032\u2032 \u2287 \u03c8(x) \u2287 \u2191 x for all the above pairs (E \u2032\u2032 , x). In particular, looking at the pair (\u2191 Ey , y),\nwe get: (a) \u2191 Ey \u2287 \u03c8(y) for everySy \u2208 E. And S\nlooking at the pair (\u03c6(y), z), \u03c6(y) \u2287 \u03c8(z)\nfor all y \u2208 E, z \u2208 Ey . So \u03c6(y) \u2287 z\u2208Ey \u03c8(z) = z\u2208\u2191 Ey \u03c8(z) = \u03c8 \u2020 (\u2191 Ey ). We have proved:\nS\n(b) \u03c6(y) \u2287 \u03c8 \u2020 (\u2191 Ey ) for every y \u2208 E. Then, for every x \u2208 X, (\u03c6\u2020 \u25e6 \u03c6)(x) = y\u2208\u03c6(x) \u03c6(y) \u2287\nS\nS\n\u2020\n\u2020\n\u2020\n\u2020\n\u2020\n\u2020\ny\u2208\u03c6(x) \u03c8 (\u2191 Ey ) (by (b)) \u2287\ny\u2208\u03c6(x) (\u03c8 \u25e6 \u03c8)(y) (by (a)) = (\u03c8 \u25e6 \u03c8) (\u03c6(x)) \u2287 (\u03c8 \u25e6 \u03c8) (\u2191 x)\n(since \u03c6(x) \u2287 \u2191 x) = (\u03c8 \u2020 \u25e6 \u03c8)\u2020 (\u03b7X (x)) = (\u03c8 \u2020 \u25e6 \u03c8)(x) (by one of the monad laws). So \u03c6\u2020 \u25e6 \u03c6\n\u2032 \u2020 \u25e6 \u03c6\u2032 is below \u03c8 \u2020 \u25e6 \u03c8, so H is directed.\nis below \u03c8 \u2020 \u25e6 \u03c8. Similarly, \u03c6T\nFinally, we claim that \u03c6\u2208G (\u03c6\u2020 \u25e6 \u03c6)(x) = \u2191 x. In the \u2287 direction, this is because\n\u2020\n\u03c6 \u25e6 \u03c6 is a quasi-retraction. Conversely, let \u2191 E \u2208 Fin(X) be such that \u2191 E \u00ce x. By\ninterpolation, find \u2191 E \u2032 \u2208 Fin(X) such that \u2191 E \u00ce \u2191 E \u2032 \u00ce x. Since G is qfs, applied to\nthe pairs (\u2191 E \u2032 , x) and (\u2191 E, y) for each y \u2208 E \u2032 , there is an element \u03c6 \u2208 G such that\n\n\f20\n\nJ. GOUBAULT-LARRECQ\n\n\u2191 E \u2032 \u2287 \u03c6(x) and \u2191 E \u2287 \u03c6(y) for every y \u2208 E \u2032 . So \u2191 E \u2287 \u03c6\u2020 (\u2191 E \u2032 ) \u2287 (\u03c6\u2020 \u25e6 \u03c6)(x). So\nT\nT\u2193\n\u2020\n\u03c6\u2208G (\u03c6 \u25e6 \u03c6)(x) \u2286\n\u2191 E\u2208Fin(X), \u2191 E\u00cex \u2191 E = \u2191 x, as X is quasi-continuous.\nTheorem 5.4. Any (\u03c9-)bilimit of (\u03c9)QRB-domains is an (\u03c9)QRB-domain.\n\nProof. Let (Xi )i\u2208I be an expanding system of QRB-domains, with projections pij : Xj \u2192\nXi and embeddings eij : Xi \u2192 Xj , i \u2264 j. Let X = limi\u2208I Xi . There is a projection\npi : X \u2192 Xi , given by pi (~x) = xi (where ~x = (xi )i\u2208I ), and an embedding ei : Xi \u2192 X for\nevery i \u2208 I.\nWe observe that: (a) if \u2191 E \u00ce pi (~x) in Xi , then Qeij (\u2191 E) \u00ce pj (~x) for every j \u2265 i.\nIndeed, consider any directed family (yk )k\u2208K such that pj (~x) \u2264 supk\u2208K yk . Then pi (~x) =\npij (pj (~x)) \u2264 supk\u2208K pij (yk ), so for some k \u2208 K, there is a z \u2208 E with z \u2264 pij (yk ). Then\neij (z) \u2264 eij (pij (yk )) \u2264 yk . We conclude since eij (z) \u2208 Qeij (\u2191 E).\nWe now claim that the family D~x of all finitary compacts of the form Qei (\u2191 E), where\n\u2191 E \u2208 Fin(Xi ) and \u2191 E \u00ce pi (~x), i \u2208 I, is directed. Given Qei (\u2191 E) and Qej (\u2191 E \u2032 ) in D~x , find\nsome k \u2208 I such that i, j \u2264 k, by directedness. Then Qei (\u2191 E) = Qek (Qeik (\u2191 E)), and by (a)\nQeik (\u2191 E) \u00ce pk (~x), and similarly Qej (\u2191 E \u2032 ) = Qek (Qejk (\u2191 E \u2032 )), with Qejk (\u2191 E \u2032 ) \u00ce pk (~x).\nReplacing i by k, \u2191 E by the finitary compact Qeik (\u2191 E), j by k, and \u2191 E \u2032 by Qejk (\u2191 E \u2032 ) if\nnecessary, we can therefore simply assume that i = j. Since Xi is quasi-continuous, there\nis an E \u2032\u2032 \u2208 Fin(Xi ) such that \u2191 E, \u2191 E \u2032 \u00ce \u2191 E \u2032\u2032 \u00ce pi (~x), and then Qei (\u2191 E \u2032\u2032 ) is an element of\nDx above both Qei (\u2191 E) andTQei (\u2191 E \u2032 ).\nMoreover, we claim that Qei (\u2191 E)\u2208D~x Qei (\u2191 E) equals \u2191 ~x. That it contains ~x is obvious:\nwhenever \u2191 E \u00ce pi (~x), pick z \u2208 E with\nT z \u2264 pi (~x), so that ei (z) \u2264 ei (pi (~x)) \u2264 ~x, hence\n~x \u2208 Qei (\u2191 E). Conversely, every ~z \u2208 Qei (\u2191 E)\u2208D~x Qei (\u2191 E) must be such that zi = pi (~z ) \u2208\nT\nT\nT\nQpi ( \u2191 E\u00cepi (~x) Qei (\u2191 E)) \u2286 \u2191 E\u00cepi (~x) Qpi (Qei (\u2191 E)) = \u2191 E\u00cepi (~x) \u2191 E = \u2191 pi (~x) = \u2191 xi ,\nT\nsince Xi is quasi-continuous. As this holds for every i, ~x \u2264 ~z. So Qei (\u2191 E)\u2208D~x Qei (\u2191 E) \u2286\n\u2191 ~x.\nIn particular, X is a quasi-continuous dcpo.\nWe check that the set of quasi-deflations on X is qfs. Consider a finite collection of pairs\n~\n~ k \u00ce ~xk , 1 \u2264 k \u2264 n. Recall that \u2191 D\n~ k \u00ce ~xk can be rephrased\n(\u2191 Dk , ~xk ) \u2208 Fin(X)\u00d7X with \u2191 D\nT\n~ k . Since\nequivalently as: ~xk is in the open subset \u2191\u2191D\nxk , by\nQei (\u2191 E)\u2208D~xk Qei (\u2191 E) = \u2191 ~\n~ k , in particular above \u2191 D\n~ k.\nProposition 3.5, for each k, pick Qei (\u2191 Ek ) \u2208 D~xk included in \u2191\u2191D\n~ k \u2287 Qei (\u2191 Ek ).\nI.e., pick i \u2208 I and \u2191 Ek \u2208 Fin(Xi ) such that \u2191 Ek \u00ce pi (~xk ), and such that \u2191 D\n(We can pick the same i for every k, by directedness, as above.) Since Xi is a QRB-domain,\nand \u2191 Ek \u00ce pi (~xk ), using Proposition 3.5, there is a quasi-deflation \u03c6 on Xi such that\n\u03c6(pi (~xk )) \u2286 \u2191\u2191Ek . So \u03c6(pi (~xk )) \u2286 \u2191 Ek , for every k, 1 \u2264 k \u2264 n. Consider \u03c8 : X \u2192 Fin(X)\ndefined as Qei \u25e6\u03c6\u25e6pi . Qei , restricted to Fin(Xi ), takes its values in Fin(X), using Lemma 3.7\nand the fact that Qei = (\u03b7X \u25e6 ei )\u2020 . Moreover, \u03c8 is continuous from X to FinV (X), hence to\nFin\u03c3 (X) since X is quasi-continuous, by Corollary 3.6. For every ~x \u2208 X, pi (~x) \u2208 \u03c6(pi (~x)),\nsince \u03c6 is a quasi-deflation. Then ei (pi (~x)) is below ~x, and is in \u03c8(~x), so ~x \u2208 \u03c8(~x). So \u03c8 is\na quasi-deflation.\nMoreover, by construction, for each k, 1 \u2264 k \u2264 n, \u03c6(pi (~xk )) \u2286 \u2191 Ek , so \u03c8(~xk ) \u2286\n~ k , since \u2191 D\n~ k \u2287 Qei (\u2191 Ek ). So the set of quasi-deflations on X is\nQei (\u2191 Ek ), so \u03c8(~xk ) \u2286 \u2191 D\nqfs.\nBy Proposition 5.3, X is then a QRB-domain.\nTo deal with \u03c9-bilimits of \u03c9QRB-domains, observe that any bilimit of a countable expanding system (in particular, an expanding sequence) of countably-based quasi-continuous\n\n\fQRB-DOMAINS\n\n1\n\nV12 (X)\n\n1\n\n1\n\nV13 (X)\n\n21\n\n1\n\nV14 (X)\n\nV15 (X)\n\n1\n\nV16 (X)\n\nFigure 4: Discretizations of V1 (X), X = {\u22a5, a, b, \u22a4}\ndcpos is countably-based. Indeed, a countably based quasi-continuous dcpo Xi has a count\u2191Eik , \u2191 Eik \u2208 Fin(Xi ), k \u2208 N. The D~x construction above,\nable base of sets of the form \u2191\n~ \u2032 ik , where \u2191 E\n~ \u2032 ik = Qei (Eik ), i, k \u2208 N, form a,\nsuitably modified, shows that the sets \u2191\u2191E\nnecessarily countable, base of the topology on X. By Proposition 3.18, X is an \u03c9QRBdomain.\n6. The Probabilistic Powerdomain\nLet X be a fixed topological space, and let O(X) be the lattice of open subsets of X. A\ncontinuous valuation \u03bd on X [JP89] is a map from O(X) to R+ such that \u03bd(\u2205) = 0, which is\nmonotonic (\u03bd(U ) \u2264 \u03bd(V ) whenever U \u2286 V ), modular (\u03bd(U \u222aV )+\u03bd(U \u2229V ) = \u03bd(U )+\u03bd(V ) for\nS\nall opens U, V ), and continuous (\u03bd( \u2191i\u2208I Ui ) = supi\u2208I \u03bd(Ui ) for every directed family (Ui )i\u2208I\nof opens). A (sub)probability valuation \u03bd is additionally such that \u03bd is (sub)normalized,\ni.e., that \u03bd(X) = 1 (\u03bd(X) \u2264 1). Let V1 (X) (V\u22641 (X)) be the dcpo of all (sub)probability\nvaluations on X, ordered pointwise, i.e., \u03bd \u2264 \u03bd \u2032 iff \u03bd(U ) \u2264 \u03bd \u2032 (U ) for every open U . V1 (V\u22641 )\ndefines a endofunctor on the category of dcpos, and its action is defined on morphisms f\nby V1 f (\u03bd)(U ) = \u03bd(f \u22121 (U )).\nWe write \u03b4x for the Dirac valuation at x, a.k.a., the point mass at x. This is the\ncontinuous valuation such that \u03b4x (U ) = 1 if x \u2208 U , \u03b4x (U ) = 0 otherwise.\nThe probabilistic powerdomain construction V1 is an elusive one, and natural intuitions\nare often wrong. For example, one might imagine that if X has all binary least upper\nbounds, then so has V1 (X). This was dispelled by Jones and Plotkin [JP89]. Consider\nX = {\u22a5, a, b, \u22a4}, with a and b incomparable, \u22a5 below every element and \u22a4 above every\nelement (see Figure 1, right). Then the upper bounds of 12 \u03b4\u22a5 + 21 \u03b4a and 12 \u03b4\u22a5 + 21 \u03b4b in V1 (X)\nare the probability valuations of the form (1 \u2212 \u03b1a \u2212 \u03b1b \u2212 \u03b1\u22a4 )\u03b4\u22a5 + \u03b1a \u03b4a + \u03b1b \u03b4b + \u03b1\u22a4 \u03b4\u22a4 where\n\u03b1a + \u03b1\u22a4 \u2265 12 , \u03b1b + \u03b1\u22a4 \u2265 12 , and \u03b1a + \u03b1b + \u03b1\u22a4 \u2264 1. The minimal upper bounds are those of\nthe form \u03b1\u03b4\u22a5 + ( 12 \u2212 \u03b1)\u03b4a + ( 12 \u2212 \u03b1)\u03b4b + \u03b1\u03b4\u22a4 , \u03b1 \u2208 [0, 1]. So there is no unique least upper\nbound; in fact, there are uncountably many of them, even on this small example.\nIt is unknown whether V1 (X), with X = {\u22a5, a, b, \u22a4} is an RB-domain, although it is\nan FS-domain, as a consequence of [JT98, Theorem 17]. Again, some of the most natural\nideas one can have about V1 (X) are flawed. It seems obvious indeed that V1 (X) should be\n1\n\nthe bilimit of the sequence of finite posets V1n (X), defined as those probability valuations\n(1 \u2212 \u03b1a \u2212 \u03b1b \u2212 \u03b1\u22a4 )\u03b4\u22a5 + \u03b1a \u03b4a + \u03b1b \u03b4b + \u03b1\u22a4 \u03b4\u22a4 where \u03b1a , \u03b1b , \u03b1\u22a4 are integer multiples of n1 .\nSee Figure 4 for Hasse diagrams of a few of these posets, for n small.\nThat V1 (X) is such a bilimit is necessarily wrong, because any bilimit of finite posets\nis an \u03c9B-domain, hence is algebraic, but V1 (X) is not algebraic, since no element except\n\u03b4\u22a5 is finite.\n\n\f22\n\nJ. GOUBAULT-LARRECQ\n\n1\n3 \u03b4a\n\n+ 31 \u03b4b + 13 \u03b4\u22a4\n\nBest discretizations:\n\nFigure 5: Largest discretizations below \u03bd fail to be unique\nHowever, one may imagine to define (non-idempotent) deflations fn on V1 (X) directly,\n1\n\nwhich would send \u03bd \u2208 V1 (X) to some discretized probability valuation in V1n (X). However,\nall known attempts fail. A careful study of [JT98] will make this precise. Let us only note\nthat if we decide to define fn (\u03bd) through its values on open sets, typically letting fn (\u03bd)(U )\n\u03bd(U ),Pwe obtain a set\nbe the largest integer multiple of n1 that is zero-or-strictly-below\nP\nfunction that is not modular. If we decide to define fn ( x\u2208X \u03b1x \u03b4x ) as x\u2208X \u03b2x \u03b4x where\nfor each x 6= \u22a5 \u03b2x is the largest integer multiple of n1 that is zero-or-strictly-below \u03b1x , then\nfn is not monotonic. If we decide to define fn (\u03bd) as the largest probability valuation way1\n\nbelow \u03bd in V1n (X), we run into the problem that there is no unique such largest probability\nvaluation. For example, \u03bd = 31 \u03b4a + 13 \u03b4b + 13 \u03b4\u22a4 admits four largest probability valuations in\n1\n\nV13 (X) way-below it:\n\n1\n3 \u03b4\u22a5\n\n+ 32 \u03b4a , 13 \u03b4\u22a5 + 31 \u03b4a + 13 \u03b4b , 32 \u03b4\u22a5 + 31 \u03b4\u22a4 , and 13 \u03b4\u22a5 + 32 \u03b4b , see Figure 5.\n1\n\nObserve that the number of largest discretizations of \u03bd in V1n (X) is always finite,\nprovided X is finite. This was our original intuition that replacing deflations by quasideflations, hence moving from RB-domains to QRB-domains, might provide a nice enough\ncategory of domains that would be stable under the probabilistic powerdomain functor\nV1 . However, defining quasi-deflations directly, as hinted above, does not work either:\nmonotonicity fails again. This is where the characterization of QRB-domains as quasiretracts of bifinite domains (up to details we have already mentioned) will be decisive.\nIf Y is a retract of X, then V1 (Y ) is easily seen to be a retract of V1 (X), using the\nV1 endofunctor. We wish to show a similar result for quasi-retracts. We have not managed\nto do so. Instead we shall rely on the stronger assumptions that X is stably compact, that\nY is a quasi-projection of X, not just a quasi-retract (i.e., the image of X under a proper\nmap).\nMoreover, we shall need to replace the Scott topology on V1 (X) by the weak topology,\nwhich is the smallest one containing the subbasic opens [U > a], defined as {\u03bd \u2208 V1 (X) |\n\u03bd(U ) > a}, for each open subset U of X and a \u2208 R. When X is a continuous pointed dcpo,\nthe Kirch-Tix Theorem states that it coincides with the Scott topology (see [AMJK04], who\nattribute it to Tix [Tix95, Satz 4.10], who in turn attributes it to Kirch [Kir93, Satz 8.6]).\nHowever, the weak topology is better behaved in the general case. For example, writing\nR+\nfor\nR+ \u222a {+\u221e} with the Scott topology, and [X \u2192 R+\n\u03c3\n\u03c3 ]i for the space of all continuous\n+\nmaps from X to R\u03c3 with the Isbell topology, there is a natural homeomorphism between\n+\nthe space of linear continuous maps from [X \u2192 R+\n\u03c3 ]i to R\u03c3 and the space of of (extended,\ni.e., possibly taking the value +\u221e) continuous valuations on X, with the weak topology\n[Hec96, Theorem 8.1]. This is an analog of the Riesz Representation Theorem in measure\ntheory, of which one can find variants in [Tix95, Gou07b] among others, and which we shall\nuse silently in the proof of Theorem 6.5. Let V1 wk (X) be V1 (X) with its weak topology.\n\n\fQRB-DOMAINS\n\n23\n\nV1 wk defines an endofunctor on the category of topological spaces, by V1 wk (f )(\u03bd)(V ) =\n\u03bd(f \u22121 (V )), where f : X \u2192 Y , \u03bd \u2208 V1 wk (X), and V \u2208 O(Y ). That V1 wk (f ) is continuous for every continuous f , in particular, is obvious, since for every open subset V of Y ,\nV1 wk (f )\u22121 [V > a] = [f \u22121 (V ) > a].\nAs we have said above, we shall also require X to be stably compact. If this is so, then\nthe cocompact topology on X consists of all complements of compact saturated subsets.\nWrite X d , the de Groot dual of X, for X with its cocompact topology. Then X d is again\nstably compact, and X dd = X (see [AMJK04, Corollary 12] or [GHK+ 03, Corollary VI6.19]). The patch topology on X, mentioned earlier, is nothing else than the join of the two\ntopologies of X and X d .\nWrite X patch for X equipped with its patch topology. If X is stably compact, then\nX patch is not only compact Hausdorff, but the graph of the specialization preorder \u2264 of X\nis closed in X patch : one says that (X patch , \u2264) is a compact pospace. The study of compact\npospaces originates in Nachbin's classic work [Nac65]. Conversely, given a compact pospace\n(Z, \u0016), i.e., a compact space with a closed ordering \u0016 on it, the upwards topology on Z\nconsists of those open subsets of Z that are upward closed in \u0016. The space Z \u2191 , obtained\nas Z with the upwards topology, is then stably compact. Moreover, the two constructions\nare inverse of each other. (See [GHK+ 03, Section VI-6].)\nIf X and Y are stably compact, then f : X \u2192 Y is proper if and only if f : X patch \u2192\nY patch is continuous, and monotonic with respect to the specialization orderings of X and\nY [GHK+ 03, Proposition VI.6.23], i.e., if and only if f is a morphism of compact pospaces.\nNow, the structure of the cocompact topology on V1 wk (X), when X is stably compact,\nis as follows. For every continuous valuation \u03bd on X, following Tix [Tix95], define \u03bd \u2020 (Q) as\ninf U \u2208O(X),U \u2287Q \u03bd(U ), for every compact saturated subset Q of X. Define hQ \u2265 ai as the set\nof probability valuations \u03bd such that \u03bd \u2020 (Q) \u2265 a. The sets hQ \u2265 ai are compact saturated in\nV1 wk (X), and Proposition 6.8 of [Gou10] even states that they form a subbase of compact\nsaturated subsets. This means that the complements of the sets of the form hQ \u2265 ai, Q\ncompact saturated in X, a \u2208 R, form a base of the topology of V1 wk (X)d . A similar claim\nwas already stated in [Jun04, last lines].\nLemma 6.1. Let X, Y be stably compact spaces, and r be a proper surjective map from X\nto Y . Then V1 wk (r)(\u03bd)\u2020 (Q) = \u03bd \u2020 (r \u22121 (Q)), for every compact saturated subset Q of Y .\nProof. We must show that inf V \u2287Q \u03bd(r \u22121 (V )) = inf U \u2287r\u22121 (Q) \u03bd(U ), where V ranges over\nopens in Y and U over opens in X.\nFor every open V containing Q, U = r \u22121 (V ) is an open subset of X containing the\ncompact saturated subset r \u22121 (Q), so inf V \u2287Q \u03bd(r \u22121 (V )) \u2265 inf U \u2287r\u22121 (Q) \u03bd(U ).\nConversely, for every open U containing r \u22121 (Q), we shall build an open subset V containing Q such that r \u22121 (V ) \u2286 U . This will establish inf V \u2287Q \u03bd(r \u22121 (V )) \u2264 inf U \u2287r\u22121 (Q) \u03bd(U ),\nhence the equality.\nRecall from Lemma 4.11 that r forms a quasi-retraction, with a unique matching quasisection \u03c2 : Y \u2192 QV (X) such that x \u2208 \u03c2(r(x)) for every x \u2208 X, and such that \u03c2(y) = r \u22121 (\u2191 y)\nfor every y \u2208 Y . We let V = \u03c2 \u22121 (\u2737U ). Since r \u22121 (Q) \u2286 U , r \u22121 (Q) is in \u2737U . For every\ny \u2208 Q, \u03c2(y) = r \u22121 (\u2191 y) \u2286 r \u22121 (Q) is then also in \u2737U , so y is in \u03c2 \u22121 (\u2737U ) = V . So Q \u2286 V .\nOn the other hand, for every element x of r \u22121 (V ), r(x) is in V = \u03c2 \u22121 (\u2737U ), so \u03c2(r(x)) is in\n\u2737U . Then x \u2208 \u03c2(r(x)) \u2286 U . So r \u22121 (V ) \u2286 U , and we are done.\n\n\f24\n\nJ. GOUBAULT-LARRECQ\n\nSimilarly to the formula V1 wk (f )\u22121 [V > a] = [f \u22121 (V ) > a], which allowed us to\nconclude that V1 wk (f ) was continuous for every continuous f , we obtain:\nLemma 6.2. Let X, Y be stably compact spaces, and r be a proper surjective map from X\nto Y . Then V1 wk (r)\u22121 hQ \u2265 ai = hr \u22121 (Q) \u2265 ai for every compact saturated subset Q of Y ,\nand a \u2208 R.\nProof. Using Lemma 6.1, V1 wk (r)\u22121 hQ \u2265 ai = {\u03bd \u2208 V1 wk (X) | V1 wk (r)(\u03bd)\u2020 (Q) \u2265 a} =\n{\u03bd \u2208 V1 wk (X) | \u03bd \u2020 (r \u22121 (Q)) \u2265 a} = hr \u22121 (Q) \u2265 ai.\nProposition 6.3. Let X be a stably compact space, Y be a T0 space, and r be a proper\nsurjective map from X to Y . Then V1 wk (r) is a proper map from V1 wk (X) to V1 wk (X).\nProof. First, since r is proper and surjective, r is a quasi-retraction (Lemma 4.11), so Y\nis stably compact by Proposition 4.7. V1 wk (r) is continuous from V1 wk (X) to V1 wk (Y ).\nLemma 6.2 implies that V1 wk (r) is also continuous from V1 wk (X)patch to V1 wk (Y )patch : it\nsuffices to check that the inverse images of subbasic patch-open subsets, of the form [U > a]\nor whose complements are of the form hQ \u2265 ai, are patch-open. Also, V1 wk (r) is monotonic\nwith respect to the specialization orderings of V1 wk (X) and V1 wk (Y ), being continuous.\nSo V1 wk (r) is proper.\nLet us establish surjectivity. One possible proof goes as follows. Let M1 (Z) denote\nthe space of all Radon probability measures on the space Z. If X is stably compact,\nthen M1 (X patch ) is compact in the vague topology, and forms a compact pospace with the\nstochastic ordering, where \u03bc is below \u03bc\u2032 if and only if \u03bc(U ) \u2264 \u03bc\u2032 (U ) for every open subset U\nof X [AMJK04, Theorem 31]. By [AMJK04, Theorem 36], there is an isomorphism between\nV1 wk (X) and M\u21911 (X patch ).\nNow assume a second stably compact space Y . For two measurable spaces A and B, and\nf : A \u2192 B measurable, let M(f ) map the Radon measure \u03bc to its image measure, whose\nvalue on the Borel subset E of B is \u03bc(f \u22121 (E)). A standard result [Bou69, 2.4, Lemma 1]\nstates that for any two compact Hausdorff spaces A and B, if r is continuous surjective from\nA to B, then M(r) is surjective. The desired result follows, up to a few technical details,\nby taking A = X patch , B = Y patch , remembering that since r is proper from X to Y , it is\ncontinuous from X patch to Y patch .\nInstead of working out the-technically subtle but boring-technical details, let us\ngive a direct proof, similar to the above cited Lemma 1, 2.4 [Bou69]. Instead of using\nthe Hahn-Banach Theorem, we rest on the following Keimel Sandwich Theorem [Kei06,\nTheorem 8.2]: let C be a topological cone, q : C \u2192 R+\n\u03c3 be a continuous superlinear\n+\nmap, p : C \u2192 R\u03c3 be a sublinear map, and assume q \u2264 p; then there is a continuous\nlinear map \u039b : C \u2192 R+\n\u03c3 such that q \u2264 \u039b \u2264 p. Here, a cone is an additive commutative\nmonoid, with a scalar multiplication by elements of R+ satisfying a(x + y) = ax + ay,\n(a + b)x = ax + bx, (ab)x = a(bx), 1x = x, 0x = 0 for all a, b \u2208 R+ , x, y \u2208 C. A cone is\ntopological if and only if addition and multiplication are continuous. The continuous maps\nf : C \u2192 R+\n\u03c3 are sometimes called lower semi-continuous in the literature. Such a map is\nsuperlinear (resp., sublinear, linear ) if and only if f (ax) = af (x) for all a \u2208 R+ , x \u2208 C\nand f (x + y) \u2265 f (x) + f (y) for all x, y \u2208 C (resp., \u2264, =). It is easy to see that the space\n+\n[X \u2192 R+\n\u03c3 ] of all continuous maps from X to R\u03c3 , equipped with the obvious addition and\nscalar multiplication and with the Scott topology of the pointwise ordering, is a topological\ncone.\n\n\fQRB-DOMAINS\n\n25\n\nProposition 6.4. Let X, Y be stably compact spaces, and r be a proper surjective map\nfrom X to Y . Then V1 wk (r) is surjective.\nProof. Fix some continuous probability valuation \u03bd on Y . Let C be [X \u2192 R+\n\u03c3 ]. Since\nr is proper, it has an associated quasi-section \u03c2, with x \u2208 \u03c2(r(x)) for every x \u2208 X, by\nR\nLemma 4.11. Define q : C \u2192 R+\n\u03c3 by q(h) = y\u2208Y h\u2217 (\u03c2(y))d\u03bd, where h\u2217 (Q) = minx\u2208Q h(x),\n\nand integration of continuous maps from Y to R+\n\u03c3 is defined by a Choquet formula [Tix95,\nGou07a], or equivalently by Heckmann's general construction [Hec96].\nNote that h\u2217 (Q) is well-defined as min Qh(Q), since Qh(Q) is compact saturated hence\nof the form [a, +\u221e] for some a \u2208 R+\n\u03c3 -then h\u2217 (Q) = a. Moreover, h\u2217 is continuous from\n+\n\u22121\nQV (X) to R\u03c3 , because h\u2217 (a, +\u221e] = \u2737h\u22121 (a, +\u221e]. So h\u2217 \u25e6 \u03c2 is continuous, whence the\nintegral defining q makes sense. We now claim that the map h 7\u2192 h\u2217 is (Scott-)continuous.\nFirst, h 7\u2192 h\u2217 is clearly monotonic. Now let (hi )i\u2208I be a directed family in [X \u2192 R+\n\u03c3]\nwith a least upper bound h. By monotonicity, for every Q \u2208 Q(X), hi\u2217 (Q) \u2264 h\u2217 (Q), so\nsupi\u2208I hi\u2217 (Q) exists and is below h\u2217 (Q). Conversely, we must show that for every a \u2208 R+\nsuch that a < h\u2217 (Q), a < supi\u2208I hi\u2217 (Q). The elements Q \u2208 Q(X) such that a < h\u2217 (Q) are\nthose such that forSevery x \u2208 Q, there is an i \u2208 I such that hi (x) \u2208 (a, +\u221e), i.e., they are\nthe elements of \u2737 i\u2208I h\u22121\ni (a, +\u221e). Since \u2737 commutes with directed unions, if a < h\u2217 (Q)\nthen Q \u2208 \u2737h\u22121\n(a,\n+\u221e)\nfor\nsome i \u2208 I, i.e., hi\u2217 (Q) > a, and we are done. Since h 7\u2192 h\u2217 is\ni\ncontinuous, and since the Choquet integral is Scott-continuous in the integrated function\n(see [Tix95, Satz 4.4], or [Hec96, Theorem 7.1 (3)]), we obtain that q is (Scott-)continuous.\nFor every a \u2208 R+ , q(ah) = aq(h). Moreover, since (h1 +h2 )\u2217 \u2265 h1\u2217 +h2\u2217 , and integration\nis linear, q is superlinear.\nnR\no\n\u2032\nDefine p(h) as inf y\u2208Y h\u2032 (y)d\u03bd h\u2032 \u2208 [Y \u2192 R+\n\u03c3 ], h \u2264 h \u25e6 r . Clearly, p is sublinear.\nNotably,\nnR\n\u2032\n\u2032\n\u2032\np(h1 ) + p(h2 ) = inf\nh\u20321 \u2208 [Y \u2192 R+\n\u03c3 ], h1 \u2264 h1 \u25e6 r,\ny\u2208Y [h1 (y) + h2 (y)] d\u03bd\no\n\u2032\nh\u20322 \u2208 [Y \u2192 R+\n\u03c3 ], h2 \u2264 h2 \u25e6 r\nnR\no\n\u2032\n\u2265 inf y\u2208Y h\u2032 (y) d\u03bd h\u2032 \u2208 [Y \u2192 R+\n\u03c3 ], h1 + h2 \u2264 h \u25e6 r = p(h1 + h2 ).\nWhenever h \u2264 h\u2032 \u25e6 r, we claim that h\u2217 (\u03c2(y)) \u2264 h\u2032 (y). Indeed, since y = r(x) for some x \u2208 X\n\u2032\n\u2032\n(Lemma 4.2), and since x \u2208\nR \u03c2(r(x)) = \u03c2(y), hR\u2217 (\u03c2(y))\u2032 \u2264 h(x) \u2264 h (r(x)) = h (y). \u2032\nIt follows that q(h) = y\u2208Y h\u2217 (\u03c2(y))d\u03bd \u2264 y\u2208Y h (y)d\u03bd. By taking infs over h , q \u2264 p.\nSo Keimel's Sandwich Theorem applies. There is a continuous linear map \u039b : C \u2192\n+\nR\u03c3 such that q \u2264 \u039b \u2264 p. Define \u03bd0 : O(X) \u2192 R+\n\u03c3 by \u03bd0 (U ) = \u039b(\u03c7U ), where \u03c7U is\nthe characteristic function of U . Then \u03bd0 is a continuous valuation on X; in particular,\n\u03bd0 (U \u222a V ) + \u03bd0 (U \u2229 V ) = \u03bd0 (U ) + \u03bd0 (V ) because \u03c7U \u222aV + \u03c7U \u2229V = \u03c7U + \u03c7V .\nNow, given an open subset V of Y , take h = \u03c7r\u22121 (V ) . Then h\u2217 (Q) = 1 iff Q \u2286 r \u22121 (V ),\n\u22121\nso h\u2217 = \u03c7\u2737r\u22121 (V ) , and therefore h\u2217 (\u03c2(y))\nthat\nR = \u03c7\u2737r\u22121 (V ) (r (\u2191 y)) = \u03c7V (y), using the fact\n\u2032\nr is surjective. It follows that q(h) = y\u2208Y \u03c7V d\u03bd = \u03bd(V ). On the other hand, take h = \u03c7V\nR\nin the definition of p, and check that h \u2264 h\u2032 \u25e6 r. It follows that p(h) \u2264 y\u2208Y \u03c7V (y)d\u03bd =\n\u03bd(V ). Since q(h) \u2264 \u03bd0 (r \u22121 (V )) \u2264 p(h), \u03bd0 (r \u22121 (V )) = \u03bd(V ). This holds for every open\nsubset V of Y . In particular, taking V = Y , we obtain that \u03bd0 is a probability valuation:\n\u03bd0 (X) = \u03bd0 (r \u22121 (Y )) = \u03bd(Y ) = 1. And finally, that \u03bd0 (r \u22121 (V )) = \u03bd(V ) holds for every open\nV of Y means that \u03bd = V1 wk (\u03bd0 ).\n\n\f26\n\nJ. GOUBAULT-LARRECQ\n\nj\ng\n\ni\n\nh\nd\n\ne\na\n\nf\nb\n\nc\n\n\u22a5\nFigure 6: The path space of Figure 2 (i)\nPutting together Proposition 6.3 and Proposition 6.4, we obtain:\nTheorem 6.5 (Key Claim). Let X be a stably compact space, and Y be a T0 space. If\nr is a proper surjective map from X to Y , then V1 wk (r) is a proper surjective map from\nV1 wk (X) to V1 wk (X).\nIn particular, if Y is a quasi-projection of X, then V1 wk (Y ) is a quasi-projection of\nV1 wk (X).\nWe shall apply this theorem twice, and first, to finite pointed posets. Let < be the\nstrict part of \u2264.\nDefinition 6.6 (Path Space). Let Y be any finite pointed poset. Write y \u2192 y \u2032 iff y is\nimmediately below y \u2032 , i.e., y < y \u2032 and there is no z \u2208 Y such that y < z < y \u2032 . A path \u03c0 in\nY is any set {y0 , y1 , . . . , yn } \u2286 Y with y0 = \u22a5 \u2192 y1 \u2192 . . . \u2192 yn . The path space \u03a0(Y ) is\nthe set of paths in Y , ordered by \u2286.\nAlternatively, the ordering on paths y0 \u2192 y1 \u2192 . . . \u2192 yn is the prefix ordering on\nsequences y0 y1 . . . yn .\nNote that \u03a0(Y ) is always a finite tree, i.e., a finite pointed poset such that the downward\nclosure of a point is always totally ordered. Up to questions of finiteness, this is exactly\nhow we built a tree from an ordering in the proof of Lemma 4.12, by the way.\nWe observe that every finite pointed poset Y is a quasi-projection of its path space\n\u03a0(Y ).\nLemma 6.7. For every finite pointed poset Y , the map r : \u03a0(Y ) \u2192 Y defined by r(\u03c0) =\nmax \u03c0 is proper and surjective.\nProof. See Figure 6, which displays the path space of the space Y of Figure 2 (i). Each\ngray region is labeled with an element from Y , which is the image by r of every point in\nthe region; e.g., the top right, 5-element region is mapped to j in Y .\nFormally, let X = \u03a0(Y ), and define r : X \u2192 Y by r(\u03c0) = max \u03c0, i.e., r(y0 \u2192 y1 \u2192\n. . . \u2192 yn ) = yn . The map r is surjective, and monotonic. Since X and Y are finite, r is\nthen trivially proper.\nY is certainly not a retract of \u03a0(Y ) in general: it is, if and only if Y is a tree. Indeed,\nif Y is a tree, then Y is isomorphic to \u03a0(Y ), and conversely, every retract of a tree is a tree.\nFinite trees are very special. Jung and Tix proved that V\u22641 (T ) is an RB-domain\n[JT98, Theorem 13] for every finite tree T . They noted (comment after op.cit.) that\nV\u22641 (T ) is even a bc-domain in this case, i.e., a pointed continuous dcpo in which every\npair of elements with an upper bound has a least upper bound. It is well-known that every\n\n\fQRB-DOMAINS\n\n27\n\nbc-domain is an RB-domain: given any finite subset A of a basis B of a bc-domain X, the\nmap fA (x) = sup(A \u2229 \u2193\u2193x) is a deflation, the family of these deflations is directed, and their\nleast upper bound is the identity map.\nLemma 6.8. For every finite tree T , V1 (T ) is a countably-based bc-domain.\nProof. Since T is a finite tree, it is trivially a continuous pointed dcpo, so V1 (TP\n) is again\ncontinuous [Eda95,\nSection\n3].\nA\nbasis\nis\ngiven\nby\nthe\nvaluations\nof\nthe\nform\nt\u2208T at \u03b4t\nP\nwith at \u2208 [0, 1],\nt\u2208T at = 1 and each at rational. Since V1 (T ) has a countable basis\nB, its topology has a countable base consisting of the subsets \u2191\u2191b, b \u2208 B. So V1 (T ) is\ncountably-based.\nTo show that V1 (T ) is a bc-domain, we observe that every probability valuation \u03bd on\nT is entirely characterized by the values \u03bd(\u2191 t), t \u2208 T . Indeed, for every open subset U of T ,\nlet Min U be the (finite)\nP set of minimal elements of U ; the sets \u2191 t, t \u2208 Min U , are pairwise\ndisjoint, so \u03bd(U ) = t\u2208Min\nmap f : T \u2192 [0, 1] defined by f (t) = \u03bd(\u2191 t) satisfies\nP U \u03bd(\u2191 t). The\n\u2032\nf (\u22a5) = 1 and f (t) \u2265 t\u2032 \u2208T,t\u2192t\u2032 f (t ) for every t \u2208 T . Let us call such maps admissible.\nGiven any admissible mapP\nf , there is a unique probability\nP valuation \u03bd such that f (t) = \u03bd(\u2191 t)\nfor every t \u2208 T , namely t\u2208T at \u03b4t with at = f (t) \u2212 t\u2032 \u2208T,t\u2192t\u2032 f (t\u2032 ). So V1 (T ) is orderisomorphic to the poset of admissible maps, with the pointwise ordering. Therefore we only\nhave to show that any two admissible maps f1 , f2 below a third one f0 P\nhave a least upper\nbound f . As a least upper bound, f (t) must be above f1 (t), f2 (t), and t\u2032 \u2208T,t\u2192t\u2032 f (t\u2032 ), so\nP\ndefine f (t) by descending induction on t by f (t) = max(f1 (t), f2 (t), t\u2032 \u2208T,t\u2192t\u2032 f (t\u2032 )). (By\ndescending induction, we mean induction on the largest length n of a sequence t0 \u2192 t1 \u2192\n. . . \u2192 tn in T such that t0 = t.) This is admissible if and only if f (\u22a5) = 1, and in this\ncase will be the least upper bound of f1 , f2 . By definition f (\u22a5) \u2265 1. It is easy to see that\nf (t) \u2264 f0 (t) for every t, by descending induction on t: so f (\u22a5) \u2264 f0 (\u22a5) = 1, hence f is\nadmissible.\nWe retrieve the Jung-Tix result that V\u22641 (T ) is a bc-domain for every tree T : let T\u22a5\nbe T with an extra bottom element added below all elements of T , and apply Lemma 6.8\nto V1 (T\u22a5 ) \u223c\n= V\u22641 (T ).\nProposition 6.9. For every finite pointed poset Y , V1 (Y ) is a continuous \u03c9QRB-domain.\nProof. Y is trivially a continuous pointed dcpo. Then we know that V1 (Y ) is again continuous [Eda95, Section 3], and that V1 (Y ) = V1 wk (Y ) by the Kirch-Tix Theorem. Similarly for V1 (\u03a0(Y )). \u03a0(Y ) is clearly stably compact, since finite. By Theorem 6.5, using\nLemma 6.7, V1 (Y ) is the image of V1 (\u03a0(Y )) under some proper surjective map. But \u03a0(Y )\nis a tree, so V1 (\u03a0(Y )) is a countably-based bc-domain by Lemma 6.8, hence a countablybased RB-domain, hence an \u03c9QRB-domain, by Proposition 3.2 and Proposition 3.18. By\nProposition 4.10, V1 (Y ) must also be an \u03c9QRB-domain.\nWe can finally prove the main theorem of this paper.\nTheorem 6.10. The probabilistic powerdomain of any \u03c9QRB-domain is an \u03c9QRB-domain.\nProof. Let Y be an \u03c9QRB-domain. By Theorem 4.13, Y is the image of some \u03c9B-domain\nX = limi\u2208N Xi under some proper surjective map. Since V1 is a locally continuous functor\non the category of dcpos, (as mentioned in proof of [JT98, Lemma 11]), V1 (X) is also\na bilimit of the spaces V1 (Xi ), i \u2208 I. Each V1 (Xi ) is a continuous \u03c9QRB-domain by\n\n\f28\n\nJ. GOUBAULT-LARRECQ\n\n\u22a4\n\n(0, 3)\n\n(1, 3)\n\n(0, 2)\n\n(1, 2)\n\n(0, 1)\n\n(1, 1)\n\n(0, 0)\n\n(1, 0)\n\u22a5\n\nFigure 7: Plotkin's Domain T\nProposition 6.9, hence so is V1 (X), by Theorem 5.4 and since bilimits of continuous dcpos\nare continuous [AJ94, Theorem 3.3.11].\nSince X is bifinite, it is stably compact, (use, e.g., Theorem 3.14), and V1 (X) =\nV1 wk (X) because X is continuous and pointed, using the Kirch-Tix Theorem. So V1 wk (Y )\nis the image of V1 (X) under a proper surjective map, by Theorem 6.5. It is clear that\nV1 wk (Y ) is T0 , so by Proposition 4.10 V1 wk (Y )) is an \u03c9QRB-domain in its specialization\npreorder \u0016, and its topology must be the Scott topology of \u0016.\nBut it is easy to see that \u0016 is the usual ordering on V1 (Y ), i.e., \u03bd \u0016 \u03bd \u2032 iff \u03bd(U ) \u2264 \u03bd \u2032 (U )\nfor every open U of Y : note that if \u03bd \u0016 \u03bd \u2032 , then \u03bd \u2032 \u2208 [U > r] for every r < \u03bd(U ). So\nV1 wk (Y )) = V1 (Y ), and we conclude.\nUsing the fact that V1 (X) is continuous whenever X is continuous and pointed [Eda95,\nSection 3], it also follows:\nCorollary 6.11. The probabilistic powerdomain of any continuous \u03c9QRB-domain (in particular, every RB-domain) is again a continuous \u03c9QRB-domain.\n7. Conclusion, Failures and Perspectives\nWe have shown that the category \u03c9QRB of \u03c9QRB-domains and continuous maps is a\ncategory of quasi-continuous, stably compact dcpos that is closed, not only under finite\nproducts, bilimits of expanding sequences, retracts (and even quasi-retracts), but also under\nthe probabilistic powerdomain functor V1 . It is thus reasonably well-behaved.\nBut \u03c9QRB is not Cartesian-closed. Consider the space T of [AJ94, Figure 12], see\nFigure 7. This is an \u03c9QRB-domain: define the quasi-deflations \u03c6i , i \u2208 N, as mapping \u22a5\nto \u2191{\u22a5}, any element (j, n) to \u2191{(j, n)} if n < i, and any other element to \u2191{(0, i), (1, i)}.\nHowever, [T \u2192 T ] is not an \u03c9QRB-domain.\nAssume (\u03c6i )i\u2208N were a generating sequence of quasi-deflations on [T \u2192 T ]. For each\nfunction f : N \u2192 {0, 1}, there is a continuous map f\u02c6 : T \u2192 T that sends \u22a5 to \u22a5, \u22a4 to\n\n\fQRB-DOMAINS\n\n29\n\n\u22a4, (0, n) to (f (n), n) and (1, n) to (1 \u2212 f (n), n) (f\u02c6 exchanges (0, n) and (1, n) if f (n) = 1,\nleaves them unswapped if f (n) = 0). Write \u03c6i (f\u02c6) as \u2191 Ei,f , where Ei,f is finite.\nWe claim that: (\u2217) for each f : N \u2192 {0, 1}, there is an index i \u2208 N such that f\u02c6 \u2208 Ei,f . If\nthere were an element g of \u03c6i (f\u02c6) such that g(0, 0) = \u22a5, for infinitely many values of i \u2208 N,\nthen this would hold for every i; but the map sending \u22a5 and (0, 0) to \u22a5, and all other\nT\nelements to \u22a4 would be in i\u2208N \u03c6i (f\u02c6) = \u2191 f\u02c6, which is impossible. So, for i large enough,\nno element g of \u03c6i (f\u02c6) maps (0, 0) to \u22a5. Similarly, for i large enough, no element g of \u03c6i (f\u02c6)\nmaps (1, 0) to \u22a5. Since f\u02c6 \u2208 \u03c6i (f\u02c6), for i large enough we find g \u2208 Ei,f with g(0, 0) 6= \u22a5,\ng(1, 0) 6= \u22a5, and g \u2264 f\u02c6.\nWe check that g = f\u02c6. First, g(\u22a5) \u2264 f\u02c6(\u22a5) = \u22a5 so g(\u22a5) = f\u02c6(\u22a5). Next, g(0, 0) is an\nelement below f\u02c6(0, 0) = (f (0), 0) and different from \u22a5, and the only element satisfying this\nis f\u02c6(0, 0). Similarly, g(1, 0) = f\u02c6(1, 0). By induction on n \u2208 N, we show that g(j, n) = f\u02c6(j, n).\nAt rank n + 1, g(0, n + 1) is an element below f\u02c6(0, n + 1) = (f (n + 1), n + 1) and above both\ng(0, n) = f\u02c6(0, n) = (f (n), n) and g(1, n) = f\u02c6(1, n) = (1 \u2212 f (n), n). The only such element\nis (f (n + 1), n + 1) = f\u02c6(0, n + 1). Similarly, g(1, n + 1) = f\u02c6(1, n + 1). Finally, g(\u22a4) is an\nelement above all g(j, n), hence must equal \u22a4 = f\u02c6(\u22a4).\nSince g \u2208 Ei,f , and g = f\u02c6, Claim (\u2217) is proved.\n\u02c6\nHowever,\nSthere are uncountably many functions of the form f , and only countably many\nEi,f , since each set Ei,f is finite, and for each i \u2208 N, there are only\nelements of\ni\u2208N\nf :N\u2192{0,1}\n\nfinitely many distinct sets Ei,f with f : N \u2192 {0, 1}. We have reached a contradiction.\nSince exponentials in any full subcategory of the category of dcpos must be isomorphic\nto the ordinary continuous function space [Smy83], it follows:\nProposition 7.1. \u03c9QRB is not Cartesian-closed.\nThe above argument also shows that, although T is both continuous (even algebraic)\nand an \u03c9QRB-domain, T is not an RB-domain: so Corollary 6.11 is not enough to settle\nthe Jung-Tix problem in the positive either.\nOne might hope that countability would be the problem. However, we required countability in at least two places. The first one is Lemma 4.12, which would fail in case we\nallowed for directed families (Ei0 )i\u2208I instead of non-decreasing sequences. The second one\nis in the (i) \u21d2 (iii) direction of Theorem 4.13, where we need countability to obtain Y\nas a quasi-projection, and not just a quasi-retract. (This is similar to an open problem\nin the theory of RB-domains, see [Jun88, Remark after Theorem 4.9].) In turn, we need\nquasi-projections, not just quasi-retracts, in the Key Claim, Theorem 6.5.\nTo get around the Jung-Tix problem using our results, one might shift the focus towards the Kleisli category \u03c9QRBQ , for example. This is a full subcategory of Jung, Kegelmann and Moshier's pleasing category SCS \u2217 of stably compact spaces and closed relations\n[JKM01].\nOn the other hand, we would like to point out the following deep connection between\nQRB-domains and FS-domains.\nDefinition 7.2. A controlled quasi-deflation on a poset X is a pair of a Scott-continuous\nmap f : X \u2192 X and of a quasi-deflation \u03c6 : X \u2192 Fin(X) such that \u03c6(x) \u2286 \u2191 f (x) for every\nx \u2208 X. The map f is the control.\n\n\f30\n\nJ. GOUBAULT-LARRECQ\n\nA controlled QRB-domain is a pointed dcpo X with a generating family of controlled\nquasi-deflations, i.e., a directed family of controlled quasi-deflations (in the pointwise ordering) (fi , \u03c6i )i\u2208I such that x = supi\u2208I fi (x) for every x \u2208 X.\nSo a controlled quasi-deflation is a pair (f, \u03c6) with the property that \u2191 f (x) \u2287 \u03c6(x) \u2287 \u2191 x\nfor every x \u2208 X. Every controlled QRB-domain is a QRB-domain: given a generating\nT\nT\nfamily of controlled quasi-deflations (fi , \u03c6i )i\u2208I , \u2193i\u2208I \u03c6i (x) \u2286 \u2193i\u2208I \u2191 fi (x) = \u2191 supi\u2208I fi (x) =\nT\n\u2191 x, and the converse inclusion \u2191 x \u2286 \u2193i\u2208I \u03c6i (x) is obvious; so (\u03c6i )i\u2208I is a generating family\nof quasi-deflations.\nTheorem 7.3. The controlled QRB-domains are exactly the FS-domains, and hence form\na Cartesian-closed category.\nProof. If (fi , \u03c6i )i\u2208I is a generating family of controlled quasi-deflations on a pointed dcpo\nX,\nSni then fi is finitely separated from idX : indeed, let im \u03c6i = {Ei1 , . . . , Eini } and Mi =\nj=1 Eij , then for every x \u2208 X, since x \u2208 \u03c6i (x), there is a point m \u2208 Eij where \u2191 Eij = \u03c6i (x)\nsuch that m \u2264 x, and since \u2191 Eij \u2286 \u2191 fi (x), we have fi (x) \u2264 m; so Mi is a finitely separating\nset for fi on X.\nConversely, assume X is an FS-domain, and let (gi )i\u2208I be a directed family of continuous\nmaps, finitely separated from idX , and whose pointwise least upper bound is idX . Let\nfi = gi \u25e6 gi . By [Jun90, Lemma 2], fi is strongly finitely separated from idX , i.e., there is\na finite set Ei of pairs of elements m \u226a m\u2032 such that for every x \u2208 X, one can find a pair\n(m, m\u2032 ) \u2208 Ei such that fi (x) \u2264 m \u226a m\u2032 \u2264 x. Moreover, the pointwise least upper bound of\n(fi )i\u2208I is again idX .\nS\nFor each pair (m, m\u2032 ) \u2208 Ei with m \u226a m\u2032 , \u2191 m\u2032 \u2286 \u2191\u2191m \u2286 j\u2208I fj\u22121 (\u2191\u2191m). Indeed,\nfor every x \u2208 \u2191\u2191m, since x = supj\u2208I fj (x) and \u2191\u2191m is Scott-open, fj (x) \u2208 \u2191\u2191m for some\nj \u2208 I. Since \u2191 m\u2032 is compact, and the family (fj\u22121 (\u2191\u2191m))j\u2208I is directed, \u2191 m\u2032 \u2286 fj\u22121 (\u2191\u2191m)\nfor some j \u2208 I. By directedness again, we can take the same j for all pairs m \u226a m\u2032 in\n\u2191m) implies that whenever m\u2032 \u2264 x, then m \u226a fj (x). Using\nEi . But now \u2191 m\u2032 \u2286 fj\u22121 (\u2191\nthe separation property of Ei , for every x \u2208 X, one can find a pair (m, m\u2032 ) \u2208 Ei such\nthat fi (x) \u2264 m \u226a fj (x). In particular, letting Mi be the set of elements m such that\n(m, m\u2032 ) \u2208 Ei for some m\u2032 \u2208 X, fi is finitely separated from fj , with separating set Mi , with\nthe obvious meaning: for every x \u2208 X, there is an m \u2208 Mi such that fi (x) \u2264 m \u2264 fj (x). In\nthis case, we write fi \u227aMi fj .\nWe now define \u03c6i (x) as \u2191(Mi \u2229 \u2191 fi (x)). Since Mi is finite, \u03c6i is a map from X to\nFin(X). It is monotonic, and we claim it is Scott-continuous. Let (xk )k\u2208K be a directed\nfamily in\nk\u2208K xk ) = \u2191(Mi \u2229 \u2191 supk\u2208K fi (xk )) (since fi is continuous) =\nT X. Then \u03c6i (supT\n\u2191(Mi \u2229 k\u2208K \u2191 fi (xk )) = \u2191 k\u2208K (Mi \u2229 \u2191 fi (xk )). The latter intersection is an intersection\nof finite sets, hence there is a k \u2208 K such that \u03c6i (supk\u2208K xk ) = \u03c6i (xk ), from which Scottcontinuity is immediate.\nWe must now check that (\u03c6i )i\u2208I is directed. Given i, i\u2032 \u2208 I, one can find j, j \u2032 \u2208 I so\nthat fi \u227aMi fj and fi\u2032 \u227aMi\u2032 fj \u2032 . By directedness, there is an l \u2208 I such that fj , fj \u2032 \u2264 fl .\nWe claim that for every x \u2208 X, \u03c6i (x), \u03c6i\u2032 (x) \u2287 \u03c6l (x). For every y \u2208 \u03c6l (x), fl (x) \u2264 y. So\nfj (x) \u2264 y. Since fi \u227aMi fj , there is an element m \u2208 Mi such that fi (x) \u2264 m \u2264 fj (x) \u2264 y.\nSo m is in Mi \u2229 \u2191 fi (x), and below y, whence y \u2208 \u03c6i (x). Similarly, y is in \u03c6i\u2032 (x).\nFinally, x \u2208 \u03c6i (x) for every x \u2208 X: by definition, there is a pair (m, m\u2032 ) \u2208 Ei such\nT\nthat fi (x) \u2264 m \u226a m\u2032 \u2264 x; so m \u2208 Mi , m \u2208 \u2191 fi (x), and m is below x. And \u2193i\u2208I \u03c6i (x) \u2286\n\n\fQRB-DOMAINS\n\n31\n\nT\u2193\n\ni\u2208I \u2191 fi (x) = \u2191 x, while the converse inclusion is obvious. So (\u03c6i )i\u2208I is a generating family\nof quasi-deflations.\n\nDefining the controlled \u03c9QRB-domains as the \u03c9QRB-domains, except with sequences\nof controlled quasi-deflations instead of directed families, and similarly for the \u03c9FS-domains\n(a.k.a., the countably-based FS-domains, again a Cartesian-closed category [Jun90, Theorem 11]), we prove similarly:\nTheorem 7.4. The controlled \u03c9QRB-domains are exactly the \u03c9FS-domains, and hence\nform a Cartesian-closed category.\nUsing this last observation, Corollary 6.11 settles half of the conjecture that the probabilistic powerdomain of an \u03c9FS-domain would be an \u03c9FS-domain again. We are only\nlacking control.\nOpen Problems\n(1) Is countability necessary in Theorem 4.13? Precisely, can one show that the QRBdomains are exactly the quasi-retracts of B-domains? The main difficulty seems to lie\nin the fact that a non-countable analog of Lemma 4.12 is missing-and Rudin's Lemma\ndoes not quite give us what we need, as discussed before the statement of the lemma.\n(2) If Y is a quasi-retract of X, X is stably compact, and Y is T0 , then is V1 wk (Y ) a\nquasi-retract of V1 wk (X)? This would be the analog of Theorem 6.5, only with quasiretractions instead of quasi-projections.\n(3) Is stable compactness necessary to derive Theorem 6.5?\n(4) One way of trying to prove that the probabilistic powerdomain of an \u03c9FS-domain is\nagain an \u03c9FS-domain would be by inventing a new notion, say of good maps, and show\nthat the \u03c9FS-domains, or alternatively the controlled \u03c9QRB-domains, are exactly the\nimages under good maps of \u03c9B-domains. Good maps should intuitively be intermediate\nbetween projections and proper surjective maps, in the sense that every projection\nshould be good, and that every good map should be proper and surjective. Indeed\nsurjective proper maps preserve the QRB part, but not the control, while projections\npreserve too much, in the sense that not all \u03c9QRB-domains, only the \u03c9RB-domains,\nare retracts of \u03c9B-domains. Such a characterization of \u03c9FS-domains would be of\nindependent interest, too.\nAcknowledgment\nI would like to thank G. Plotkin for discussions, the anonymous referees at LICS'2010,\nand the anonymous referees of this paper, who offered counterexamples to conjectures, and\nnumerous simplifications and improvements in almost every part of the paper. I am greatly\nindebted to them.\n\n\f32\n\nJ. GOUBAULT-LARRECQ\n\nReferences\n[AJ94]\n\nSamson Abramsky and Achim Jung. Domain theory. In S. Abramsky, D. M. Gabbay, and T. S. E.\nMaibaum, editors, Handbook of Logic in Computer Science, volume 3, pages 1\u2013168. Oxford\nUniversity Press, 1994.\n[AMJK04] Mauricio Alvarez-Manilla, Achim Jung, and Klaus Keimel. The probabilistic powerdomain for\nstably compact spaces. Theoretical Computer Science, 328(3):221\u2013244, 2004.\n[Ban77]\nBernhard Banaschewski. Essential extensions of T0 -spaces. General Topology and Applications,\n7:233\u2013246, 1977.\n[Bou69]\nNicolas Bourbaki. Int\u00e9gration, volume IX. Diffusion CCLS, 1969.\n[BS09]\nIngo Battenfeld and Alex Simpson. Two probabilistic powerdomains in topological domain theory.\nDomains IX Workshop, Sussex, UK, September 2009.\n[BSS06]\nIngo Battenfeld, Matthias Schr\u00f6der, and Alex Simpson. Compactly generated domain theory.\nMath. Struct. Computer Science, 16:141\u2013161, 2006. Klaus Keimel Festschrift.\n[BSS07]\nIngo Battenfeld, Matthias Schr\u00f6der, and Alex Simpson. A convenient category of domains. Electronic Notes in Theoretical Computer Science, 172:69\u201399, 2007. Computation, Meaning and\nLogic, Articles dedicated to G. Plotkin.\n[Eda95]\nAbbas Edalat. Domain theory and integration. Theoretical Computer Science, 151:163\u2013193, 1995.\n[GHK+ 03] Gerhard Gierz, Karl Heinrich Hofmann, Klaus Keimel, Jimmie D. Lawson, Michael Mislove,\nand Dana S. Scott. Continuous lattices and domains. In Encyclopedia of Mathematics and its\nApplications, volume 93. Cambridge University Press, 2003.\n[GLS83]\nGerhard Gierz, Jimmie D. Lawson, and A. Stralka. Quasicontinuous posets. Houston Journal of\nMathematics, 9:191\u2013208, 1983.\n[Gou07a] Jean Goubault-Larrecq. Continuous capacities on continuous state spaces. In Lars Arge, Christian\nCachin, Tomasz Jurdzi\u0144ski, and Andrzej Tarlecki, editors, Proceedings of the 34th International\nColloquium on Automata, Languages and Programming (ICALP'07), pages 764\u2013776. SpringerVerlag LNCS 4596, July 2007.\n[Gou07b] Jean Goubault-Larrecq. Continuous previsions. In Jacques Duparc and Thomas A. Henzinger,\neditors, Proceedings of the 16th Annual EACSL Conference on Computer Science Logic (CSL'07),\npages 542\u2013557. Springer-Verlag LNCS 4646, September 2007.\n[Gou10]\nJean Goubault-Larrecq. De Groot duality and models of choice: Angels, demons, and nature.\nMathematical Structures in Computer Science, 20:169\u2013237, 2010.\n[Gra88]\nS. Graham. Closure properties of a probabilistic powerdomain construction. In M. Main,\nA. Melton, M. Mislove, and D. Schmidt, editors, 3rd MFPS Workshop, pages 213\u2013233. Springer\nVerlag LNCS 298, 1988.\n[Hec96]\nReinhold Heckmann. Spaces of valuations. In S. Andima, R. C. Flagg, G. Itzkowitz, Y. Kong,\nR. Kopperman, and P. Misra, editors, Papers on General Topology and Applications: 11th Summer Conference at the University of Southern Maine, volume 806 of Annals of the New York\nAcademy of Sciences, pages 174\u2013200, New York, USA, 1996.\n[Isb75]\nJohn R. Isbell. Meet-continuous lattices. Symposia Mathematica, 16:41\u201354, 1975. Convegno sulla\nTopologica Insiemsistica e Generale, INDAM, Roma, Marzo 1973.\n[JKM01] Achim Jung, Mathias Kegelmann, and M. Andrew Moshier. Stably compact spaces and closed\nrelations. In Proc. 17th Conference on Mathematical Foundations of Programming Semantics,\nAarhus, Denmark. Electronic Notes in Theoretical Computer Science, 2001.\n[JP89]\nClaire Jones and Gordon D. Plotkin. A probabilistic powerdomain of evaluations. In Proc. 4th\nIEEE Symposium on Logics in Computer Science (LICS'89), pages 186\u2013195. IEEE, 1989.\n[JT98]\nAchim Jung and Regina Tix. The troublesome probabilistic powerdomain. In A. Edalat, A. Jung,\nK. Keimel, and M. Kwiatkowska, editors, Proc. 3rd Workshop on Computation and Approximation. Electronic Notes in Theoretical Computer Science, 13:70\u201391, 1998.\n[Jun88]\nAchim Jung. Cartesian Closed Categories of Domains. PhD thesis, Technische Hochschule Darmstadt, July 1988.\n[Jun90]\nAchim Jung. The classification of continuous domains. In Proceedings of the Fifth Annual IEEE\nSymposium on Logic in Computer Science, pages 35\u201340. IEEE Computer Society Press, 1990.\n[Jun04]\nAchim Jung. Stably compact spaces and the probabilistic powerspace construction. In J. Desharnais and P. Panangaden, editors, Domain-theoretic Methods in Probabilistic Processes, volume 87\nof Electronic Lecture Notes in Computer Science. Elsevier, 2004. 15pp.\n\n\fQRB-DOMAINS\n\n[Kei06]\n\n[Kir93]\n[Law85]\n[Law87]\n\n[Mis98]\n[Mog91]\n[Nac65]\n\n[Sch93]\n[Smy83]\n[Tix95]\n\n33\n\nKlaus Keimel. Topological cones: Foundations for a domain-theoretical semantics combining\nprobability and nondeterminism. Electronic Notes in Theoretical Computer Science, 155:423\u2013\n443, 2006.\nOlaf Kirch. Bereiche und Bewertungen. Master's thesis, Technische Hochschule Darmstadt, June\n1993.\nJimmie D. Lawson. T0 -spaces and pointwise convergence. Topology and its Applications, 21:73\u201376,\n1985.\nJimmie D. Lawson. The versatile continuous order. In Michael G. Main, Austin Melton,\nMichael W. Mislove, and David A. Schmidt, editors, Proc. 3rd MFPS Workshop, pages 134\u2013\n160. Springer Verlag LNCS 298, 1987.\nMichael Mislove. Topology, domain theory and theoretical computer science. Topology and Its\nApplications, 89:3\u201359, 1998.\nEugenio Moggi. Notions of computation and monads. Information and Computation, 93:55\u201392,\n1991.\nLeopoldo Nachbin. Topology and Order. Van Nostrand, Princeton, NJ, 1965. Translated from\nthe 1950 monograph \"Topologia e Ordem\" (in Portuguese). Reprinted by Robert E. Kreiger\nPublishing Co. Huntington, NY, 1967, 1976.\nAndrea Schalk. Algebras for Generalized Power Constructions. PhD thesis, Technische\nHochschule Darmstadt, 1993.\nMichael B. Smyth. The largest cartesian closed category of domains. Theoretical Computer Science, 27:109\u2013119, 1983.\nRegina Tix. Stetige Bewertungen auf topologischen R\u00e4umen. Diplomarbeit, TH Darmstadt, June\n1995.\n\nThis work is licensed under the Creative Commons Attribution-NoDerivs License. To view\na copy of this license, visit http://creativecommons.org/licenses/by-nd/2.0/ or send a\nletter to Creative Commons, 171 Second St, Suite 300, San Francisco, CA 94105, USA, or\nEisenacher Strasse 2, 10777 Berlin, Germany\n\n\f"}