{"id": "http://arxiv.org/abs/hep-ph/0111252v1", "guidislink": true, "updated": "2001-11-21T01:22:05Z", "updated_parsed": [2001, 11, 21, 1, 22, 5, 2, 325, 0], "published": "2001-11-21T01:22:05Z", "published_parsed": [2001, 11, 21, 1, 22, 5, 2, 325, 0], "title": "Control System of the Bepcii", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=hep-ph%2F0111207%2Chep-ph%2F0111019%2Chep-ph%2F0111208%2Chep-ph%2F0111470%2Chep-ph%2F0111417%2Chep-ph%2F0111059%2Chep-ph%2F0111169%2Chep-ph%2F0111460%2Chep-ph%2F0111379%2Chep-ph%2F0111314%2Chep-ph%2F0111226%2Chep-ph%2F0111271%2Chep-ph%2F0111282%2Chep-ph%2F0111101%2Chep-ph%2F0111413%2Chep-ph%2F0111102%2Chep-ph%2F0111005%2Chep-ph%2F0111269%2Chep-ph%2F0111160%2Chep-ph%2F0111237%2Chep-ph%2F0111138%2Chep-ph%2F0111293%2Chep-ph%2F0111154%2Chep-ph%2F0111249%2Chep-ph%2F0111315%2Chep-ph%2F0111294%2Chep-ph%2F0111159%2Chep-ph%2F0111044%2Chep-ph%2F0111141%2Chep-ph%2F0111184%2Chep-ph%2F0111313%2Chep-ph%2F0111134%2Chep-ph%2F0111360%2Chep-ph%2F0111191%2Chep-ph%2F0111223%2Chep-ph%2F0111070%2Chep-ph%2F0111183%2Chep-ph%2F0111425%2Chep-ph%2F0111252%2Chep-ph%2F0111357%2Chep-ph%2F0111353%2Chep-ph%2F0111350%2Chep-ph%2F0111354%2Chep-ph%2F0111369%2Chep-ph%2F0111301%2Chep-ph%2F0111088%2Chep-ph%2F0111351%2Chep-ph%2F0111029%2Chep-ph%2F0111286%2Chep-ph%2F0111297%2Chep-ph%2F0111148%2Chep-ph%2F0111323%2Chep-ph%2F0111355%2Chep-ph%2F0111397%2Chep-ph%2F0111426%2Chep-ph%2F0111189%2Chep-ph%2F0111311%2Chep-ph%2F0111266%2Chep-ph%2F0111188%2Chep-ph%2F0111075%2Chep-ph%2F0111396%2Chep-ph%2F0111062%2Chep-ph%2F0111092%2Chep-ph%2F0111001%2Chep-ph%2F0111422%2Chep-ph%2F0111287%2Chep-ph%2F0111280%2Chep-ph%2F0111240%2Chep-ph%2F0111158%2Chep-ph%2F0111233%2Chep-ph%2F0111385%2Chep-ph%2F0111423%2Chep-ph%2F0111359%2Chep-ph%2F0111051%2Chep-ph%2F0111050%2Chep-ph%2F0111060%2Chep-ph%2F0111201%2Chep-ph%2F0111262%2Chep-ph%2F0111418%2Chep-ph%2F0111304%2Chep-ph%2F0111288%2Chep-ph%2F0111281%2Chep-ph%2F0111187%2Chep-ph%2F0111446%2Chep-ph%2F0111420%2Chep-ph%2F0111110%2Chep-ph%2F0111246%2Chep-ph%2F0111069%2Chep-ph%2F0111097%2Chep-ph%2F0111391%2Chep-ph%2F0111309%2Chep-ph%2F0111063%2Chep-ph%2F0111419%2Chep-ph%2F0111461%2Chep-ph%2F0111258%2Chep-ph%2F0111455%2Chep-ph%2F0111172%2Chep-ph%2F0111346%2Chep-ph%2F0111454%2Chep-ph%2F0111176%2Chep-ph%2F0111121&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Control System of the Bepcii"}, "summary": "Recently the Chinese Academy of Sciences has chosen BEPCII as the future\ndevelopment of the BEPC, i.e. upgrade of both the machine and detector. The\nluminosity of the machine is expected to increase to 1.0x1033cm-2s-1. The\nproject will be started at the beginning of 2002 and finished with in 3-4\nyears. The BEPC control system was built in 1987 and upgraded in 1994.\nAccording to the design of the BEPCII, a double ring schema will be adopted and\na number of new devices will be added in the system. The existing control\nsystem has to be upgraded. The BEPCII will be distributed architecture and\ndeveloped by EPICS. We are going to apply the standard hardware interfaces and\nmature technologies in the system. A number of VME IOCs will be added in the\nsystem and the feildbus, PLCs will be used as device control for some kind of\nequipment. We will keep the existing system in use, such as CAMAC modules and\nPC front-ends, and merge it into EPICS system. Recently the development of the\nprototype is in progress. This paper will describe the system design and\ndevelopment issues.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=hep-ph%2F0111207%2Chep-ph%2F0111019%2Chep-ph%2F0111208%2Chep-ph%2F0111470%2Chep-ph%2F0111417%2Chep-ph%2F0111059%2Chep-ph%2F0111169%2Chep-ph%2F0111460%2Chep-ph%2F0111379%2Chep-ph%2F0111314%2Chep-ph%2F0111226%2Chep-ph%2F0111271%2Chep-ph%2F0111282%2Chep-ph%2F0111101%2Chep-ph%2F0111413%2Chep-ph%2F0111102%2Chep-ph%2F0111005%2Chep-ph%2F0111269%2Chep-ph%2F0111160%2Chep-ph%2F0111237%2Chep-ph%2F0111138%2Chep-ph%2F0111293%2Chep-ph%2F0111154%2Chep-ph%2F0111249%2Chep-ph%2F0111315%2Chep-ph%2F0111294%2Chep-ph%2F0111159%2Chep-ph%2F0111044%2Chep-ph%2F0111141%2Chep-ph%2F0111184%2Chep-ph%2F0111313%2Chep-ph%2F0111134%2Chep-ph%2F0111360%2Chep-ph%2F0111191%2Chep-ph%2F0111223%2Chep-ph%2F0111070%2Chep-ph%2F0111183%2Chep-ph%2F0111425%2Chep-ph%2F0111252%2Chep-ph%2F0111357%2Chep-ph%2F0111353%2Chep-ph%2F0111350%2Chep-ph%2F0111354%2Chep-ph%2F0111369%2Chep-ph%2F0111301%2Chep-ph%2F0111088%2Chep-ph%2F0111351%2Chep-ph%2F0111029%2Chep-ph%2F0111286%2Chep-ph%2F0111297%2Chep-ph%2F0111148%2Chep-ph%2F0111323%2Chep-ph%2F0111355%2Chep-ph%2F0111397%2Chep-ph%2F0111426%2Chep-ph%2F0111189%2Chep-ph%2F0111311%2Chep-ph%2F0111266%2Chep-ph%2F0111188%2Chep-ph%2F0111075%2Chep-ph%2F0111396%2Chep-ph%2F0111062%2Chep-ph%2F0111092%2Chep-ph%2F0111001%2Chep-ph%2F0111422%2Chep-ph%2F0111287%2Chep-ph%2F0111280%2Chep-ph%2F0111240%2Chep-ph%2F0111158%2Chep-ph%2F0111233%2Chep-ph%2F0111385%2Chep-ph%2F0111423%2Chep-ph%2F0111359%2Chep-ph%2F0111051%2Chep-ph%2F0111050%2Chep-ph%2F0111060%2Chep-ph%2F0111201%2Chep-ph%2F0111262%2Chep-ph%2F0111418%2Chep-ph%2F0111304%2Chep-ph%2F0111288%2Chep-ph%2F0111281%2Chep-ph%2F0111187%2Chep-ph%2F0111446%2Chep-ph%2F0111420%2Chep-ph%2F0111110%2Chep-ph%2F0111246%2Chep-ph%2F0111069%2Chep-ph%2F0111097%2Chep-ph%2F0111391%2Chep-ph%2F0111309%2Chep-ph%2F0111063%2Chep-ph%2F0111419%2Chep-ph%2F0111461%2Chep-ph%2F0111258%2Chep-ph%2F0111455%2Chep-ph%2F0111172%2Chep-ph%2F0111346%2Chep-ph%2F0111454%2Chep-ph%2F0111176%2Chep-ph%2F0111121&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Recently the Chinese Academy of Sciences has chosen BEPCII as the future\ndevelopment of the BEPC, i.e. upgrade of both the machine and detector. The\nluminosity of the machine is expected to increase to 1.0x1033cm-2s-1. The\nproject will be started at the beginning of 2002 and finished with in 3-4\nyears. The BEPC control system was built in 1987 and upgraded in 1994.\nAccording to the design of the BEPCII, a double ring schema will be adopted and\na number of new devices will be added in the system. The existing control\nsystem has to be upgraded. The BEPCII will be distributed architecture and\ndeveloped by EPICS. We are going to apply the standard hardware interfaces and\nmature technologies in the system. A number of VME IOCs will be added in the\nsystem and the feildbus, PLCs will be used as device control for some kind of\nequipment. We will keep the existing system in use, such as CAMAC modules and\nPC front-ends, and merge it into EPICS system. Recently the development of the\nprototype is in progress. This paper will describe the system design and\ndevelopment issues."}, "authors": ["J. Zhao", "C. H. Wang", "X. C. Kong", "G. Lei", "S. F. Xu", "Q. Le"], "author_detail": {"name": "Q. Le"}, "author": "Q. Le", "arxiv_comment": "poster at ICALEPCS'01,3 pages,1 figure, 2 tables", "links": [{"href": "http://arxiv.org/abs/hep-ph/0111252v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/hep-ph/0111252v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "hep-ph", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "hep-ph", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/hep-ph/0111252v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/hep-ph/0111252v1", "journal_reference": "eConf C011127 (2001) WEAP006", "doi": null, "fulltext": "PSN#:WEAP006 at ICALEPCS'01\n\nCONTROL SYSTEM OF THE BEPCII\nJ. Zhao, C.H. Wang, X.C. Kong, G. Lei, S.F. Xu, Q. Le\nIHEP Beijing, 100039 P.R. China\nAbstract\nRecently the Chinese Academy of Sciences has\nchosen BEPCII as the future development of the BEPC,\ni.e. upgrade of both the machine and detector. The\nluminosity of the machine is expected to increase to\n1.0x1033cm-2s-1. The project will be started at the\nbeginning of 2002 and finished with in 3-4 years. The\nBEPC control system was built in 1987 and upgraded\nin 1994. According to the design of the BEPCII, a\ndouble ring schema will be adopted and a number of\nnew devices will be added in the system. The existing\ncontrol system has to be upgraded. The BEPCII will be\ndistributed architecture and developed by EPICS. We\nare going to apply the standard hardware interfaces and\nmature technologies in the system. A number of VME\nIOCs will be added in the system and the feildbus,\nPLCs will be used as device control for some kind of\nequipment. We will keep the existing system in use,\nsuch as CAMAC modules and PC front-ends, and\nmerge it into EPICS system. Recently the development\nof the prototype is in progress. This paper will describe\nthe system design and development issues.\n\n1 PROJECT OF BEPCII\nThe Beijing Electron Positron Collider (BEPC) was\nconstructed for both high energy physics and synchrotron radiation researches. BEPC accelerators consist of\na 202 m long electron-positron linac injector; a storage\nring with a circumference of 240.4 m, and in\nconnection with each other, 210 m transport lines.\nThere are two interaction points on the storage ring,\nand a detector, the Beijing Spectrometer. The Beijing\nSynchrotron Radiation Facility has 9 beamlines and 12\nexperimental stations. As an unique e+,e- collider\noperating in the t-charm region and the first SR source\nin China, the machine has been well operated for over\n10 years since it was put into operation in 1989.\nTo upgrade the BEPC, known as BEPCII, i.e.\nincreasing its luminosity to 1.0x1033cm-2s-1 with the\nmajor upgrades in both machine and the detector.\nRunning at the resonance peaks of J/y and y', the\nBEPCII could provide data samples of J/y and y\u02ca\nwith good statistics for many important physics.[1] To\nreach the goal of the higher luminosity, the double ring\nschema will be adopted and many new equipment will\nbe installed in the BEPCII, such as superconducting RF\ncavities, superconducting magnets, new BPMs and\n\nbeam feedback system. The design goal of the BEPCII\nis in table1.\nTable1 The design goal of the BEPCII\nBeam Energy range\n1- 2.8GeV\nBeam energy\n1.55 GeV\nBeam current\n1.116A\n1.0x1033 cm-2s-1\nLuminosity\n@1.55GeV\nInjection from linac\nFull energy injection\n250ma @ 2.5GeV\nDedicated SR operation\n150mA @ 2.8GeV\n\n2 CURRENT SYSTEM\nThe current control system of the BEPC was built in\n1987, which was transferred from SLAC New Spear\nsystem and upgraded in 1994. A VAX4500 computer\nwith the CAMAC hardware controls most of the\nequipment on the storage ring, such as the magnet\npower supplies, the RF cavities and the vacuum\nequipment. There are about 300 CAMAC modules and\n4,000 channels in the system. Several sub-control\nsystems are PC based system including the beam\ndiagnostic system, the injection power supply and the\nlinac system. Two VAX workstations serve as the\nconsole and all of the machines are connected with\n100Mbps Ethernet. On the software side, the system is\nan in-house made database driven system. And the\napplications for accelerator operation with its OPI are\nclosely linked to the real-time database. However, the\naccelerator commissioning model of the BEPCII is\ndifferent from BEPC, so the accelerator commissioning\nprograms have to be transferred and modified from\nother laboratories. In this case, the existing real-time\ndatabase does not match the new transferred\napplications and the old OPI written by FORTH\nlanguage will not be used in future. The control system\nhas to be upgraded.\nWhen the system upgrade, we will utilize the existing\nequipment of the system, such as the CAMAC modules\nand PC based subsystems. The standard hardware\ninterfaces should be applied in the system so that it\ncould be an open and standard system. With regard to\nthe software development environment, the EPICS will\nbe a good choice for it is a mature software package\n\n\f3 SYSTEM DEVELOPMENT\n3.1 Software Engineering\nProject management is very important for the\ndevelopment of a control system. The BEPCII control\nsystem has to be delivered on time and within the\nbudget and it should meet the requirement of\naccelerator physicists. The standard of software\nengineering will be used in the project, which is based\non software life cycle reference model. It includes\nseveral phases: the user requirement phase, system\nanalysis and software requirement analysis, system\ndesign, coding and testing, installation and put into\noperation. The documentation and review for the major\nphases will be done. A software tool \"Project 2000\"\nwill be used to manage the project BEPCII. And we are\ngoing to produce Chinese template of the documents\nfor the project management that will be used by our\nusers and developers.\nNow the user requirement phase is in progress. A\ndetailed system design will be delivered in next March,\nand a prototype of the control system will be built at\nsame time. From beginning of 2003 we will spend two\nyears for system construction, and one year for system\ninstallation. We hope the BEPCII will finish its'\ncommissioning in December of 2006.\n\n3.2 Development Tool\nTo develop a large scale control system, a SCADA\n(Supervisory Control and Data Acquisition) tool kit\nshould be used. Currently there are many commercial\nSCADA products in the world market and most of them\nare running on the PC and Windows NT platform,\nwhich mainly support PLC hardware. The EPICS can\nbe considered a non-commercial SCADA tool, which\nwas first developed by LANL and ANL and it is widely\nused in the accelerator area. We are going to integrate\nthe BEPCII control system by the EPICS after\nevaluating the commercial SCADA products and\nEPICS [2]. The benefit of using EPICS is that a lot of\napplications for accelerator commissioning could be\nshared, it strongly supports the VME hardware and it is\neasy to get technical support from many HEP institutes\nin the world, such as KEK-B, SLAC, APS, LANL and\nBESSYII. Some independent and slow control system\ncould be developed by a commercial SCADA product.\n\n4 SYSTEM ARCHITECTURE\nThe BEPCII control system will adopt a distributed\narchitecture, called \"standard model\". Logically, the\nsystem is structured with three levels, which are\n\npresentation layer, process control layer and device\ninterface layer [3].\nAs shown in Figure 1, several PCs, the cost-effective\nequipment, and SUN workstations will be used as\noperator console at the presentation layer with the\nEPICS/OPI, which is a friendly graphic man-machine\ninterface. There is a server machine in the top layer\ninstalling Oracle database, which provides data logging\nand analysis service, the accelerator commissioning\nsupport, and general computing resources.[4]\nconsole\n\nLAN\nVME IOC\n\nVME IOC\n\nVME IOC\n\nPCs\nEPICS/PCAS\n\nCAMAC\n\nField bus\n\nand widely used in the world. The cost-performance of\nthe system should be considered for the limited budget.\n\nI/O\nI/O\n\nFigure1 System architecture\nIn the process control layer, the PowerPC microprocessors running VxWorks operating system will be\nused as EPICS IOCs. In some existing subsystems the\nPCs are still used as the front-ends. The VAX4500\ncomputer will be eliminated. The majority real-time\ntasks will run on the front-ends and the raw data are\nstored in the IOC real-time database. The standard\n100Mbit/sec switch Ethernet with TCP/IP protocol is\nused as a LAN, which provides access to the distributed\ncomputers.\nThe device interface layer provides interface to the\nhardware, either as separate modules or as intelligent\ncontrollers. The fieldbuses will serve data exchange\nwith PLCs, intelligent controllers, and remote I/O\nmodules.\n\n5 SUBSYSTEMS\nThere are seven subsystems in current BEPC\ncontrol system: the magnet power supply system in the\nstorage ring and the transport lines, the radio frequency\nsystem, the vacuum system, the injection system, the\nbeam diagnostic system and the linac system.\nTo upgrade the control system and meet the\nrequirement of the BEPCII, the new parts of the system\nwill be built with EPICS and some existing parts should\nbe merged into the EPICS system. (See figure1)\nThe BEPC has a single ring and the BEPCII will\nadopt double ring schema to obtain higher luminosity.\nThe number of the magnet power supplies will be\nincreased on the storage ring (see Table2) and the\n\n\fsuperconducting RF cavities, new BPMs and beam\nfeedback system will be added in the BEPCII. These\nequipment will be controlled by tens EPICS IOCs\nwhich consists of VME crates, PowerPCs, DSPs and\nVME I/O modules.\nTable2 Number of magnet power supplies on SR\nPower supply for\nBending magnets\nQuadruple magnets\nCorrectors\nSuperconducting Mag.\nSextuple magnets\n\nBEPCII\n6\n144\n160\n10\n4\n\nBEPC\n1\n21\n64\n0\n4\n\nThe vacuum equipment and magnet power supplies\nof Linac accelerator will be controlled by PLCs and\nremote I/O modules, which are connected to the EPICS\nIOCs via feildbus. The ControlNet, CANbus are the\ncandidate of the feildbuses.[5]\nThere are several PCs for beam diagnostic system\nrunning applications developed by Labview. The\nEPICS/PCAS will be installed on these PCs to merge\nthe existing system to EPICS system.\nSome parts of the control system still use CAMAC\nI/O modules. We are going to add VME IOC in the\nlocal control area and connect the CAMAC system to\nEPICS system with VME-CAMAC interfaces.\nRegards some slow controls, such as cooling water\nsystem, we are going to develop the independent\nsystem with commercial SCADA products, because it\nsupports PLCs, various sensor and controllers with\nindustrial standards.[6]\n\n6 APPLICATIONS\nThere are two kinds of applications in the system.\nOne is application of device control; the other is\napplication for accelerator commissioning. For the\ndevice control, we have to configure our own IOC\ndatabase firstly. If need, there are some I/O drivers\nhave to be developed for the special hardware interface.\nThe graphic man-machine interface will be developed\nby EPICS tool DM2K. A lot of applications for device\ncontrol should be developed by EPICS tools or written\nwith C/C++, Tcl/tk or SNL language of EPICS. The\naccelerator commissioning software is considered to\ntransfer from other laboratories, such as KEK-B or\nPEP-II and it has to be modified based on the physical\nrequirement of the BEPCII.\n\n7 DATABASES\nThere are two kinds of database in the system, one is\na distributed real-time database running in EPICS IOCs\nto store raw data; the other is a relational database\nOracle, which will be installed on a server machine to\n\nstore static and dynamic data including system\nconfiguration data, machine parameters, historical and\nalarm data etc. And both of the two databases provide\nuser interface on the Web page and publish the running\ninformation. The first thing for us is to make signal\nnaming convention used in the databases and create the\ndatabase structures.\n\n8\n\nTIMING SYSTEM\n\nThe timing system is to synchronize all of the\nrelevant components in the accelerator of the BEPCII\ncomplex. Since the RF frequency of the BEPCII will be\nchanged from 200MHZ to about 500MHZ, so the\ncurrent timing system has to be upgraded. Except the\nhardware based fast timing system, the software based\ntiming system might be considered in some synchronization area.\n\n9 CONCLUSION\nThe project BEPCII will be started next year. In\norder to build the control system with EPICS and\ndevelop basic applications, a prototype system should\nbe created firstly. After making a great effort, we think\nthe upgraded system can meet the physical requirement\nof the BEPCII and it will be an advanced, flexible and\nreliable system.\n\n10 ACKNOWLEDGEMENT\nThe authors would like to thank all of the people and\nfriends who have given us a lot of helps and advices in\nthe system design stage.\n\nREFERENCES\n[1] \"Feasibility Study Report on BEPCII \", Edition1,\nIHEP April 2001\n[2] \"EPICS Release R3.14\", APS Argonne.\n[3] Tadahiko Katoh, \"Design and Construction Accelerator Control System\" KEKB control group, 28\nAug. 2000.\n[4] J.Zhao et al, \"Preliminary Design of the Control\nSystem for SSRF and BTCF\" ICALEPCS'97\np56 \u2013 p58, Nov. 1997 Beijing, China.\n[5] http://www.sns.bnl.gov/epics/cnet/\n[6] A. Daneels , W. Salte \"What is SCADA\"\nICALEPCS'99 p339-343 Oct. 1999 Trieste, Italy.\n\n\f"}