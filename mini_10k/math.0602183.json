{"id": "http://arxiv.org/abs/math/0602183v1", "guidislink": true, "updated": "2006-02-09T13:13:10Z", "updated_parsed": [2006, 2, 9, 13, 13, 10, 3, 40, 0], "published": "2006-02-09T13:13:10Z", "published_parsed": [2006, 2, 9, 13, 13, 10, 3, 40, 0], "title": "Why do partitions occur in Faa di Bruno's chain rule for higher\n  derivatives?", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0602299%2Cmath%2F0602099%2Cmath%2F0602183%2Cmath%2F0602115%2Cmath%2F0602108%2Cmath%2F0602053%2Cmath%2F0602524%2Cmath%2F0602244%2Cmath%2F0602425%2Cmath%2F0602201%2Cmath%2F0602276%2Cmath%2F0602011%2Cmath%2F0602173%2Cmath%2F0602030%2Cmath%2F0602321%2Cmath%2F0602461%2Cmath%2F0602389%2Cmath%2F0602047%2Cmath%2F0602324%2Cmath%2F0602253%2Cmath%2F0602113%2Cmath%2F0602449%2Cmath%2F0602344%2Cmath%2F0602033%2Cmath%2F0602432%2Cmath%2F0602193%2Cmath%2F0602251%2Cmath%2F0602624%2Cmath%2F0602520%2Cmath%2F0602309%2Cmath%2F0602155%2Cmath%2F0602278%2Cmath%2F0602355%2Cmath%2F0602611%2Cmath%2F0602220%2Cmath%2F0602620%2Cmath%2F0602143%2Cmath%2F0602060%2Cmath%2F0602376%2Cmath%2F0602408%2Cmath%2F0602110%2Cmath%2F0602167%2Cmath%2F0602555%2Cmath%2F0602442%2Cmath%2F0602105%2Cmath%2F0602275%2Cmath%2F0602660%2Cmath%2F0602270%2Cmath%2F0602602%2Cmath%2F0602294%2Cmath%2F0602335%2Cmath%2F0602005%2Cmath%2F0602088%2Cmath%2F0602518%2Cmath%2F0602256%2Cmath%2F0602658%2Cmath%2F0602451%2Cmath%2F0602364%2Cmath%2F0602056%2Cmath%2F0602647%2Cmath%2F0602015%2Cmath%2F0602501%2Cmath%2F0602214%2Cmath%2F0602054%2Cmath%2F0602463%2Cmath%2F0602613%2Cmath%2F0602487%2Cmath%2F0602259%2Cmath%2F0602094%2Cmath%2F0602038%2Cmath%2F0602204%2Cmath%2F0602223%2Cmath%2F0602243%2Cmath%2F0602612%2Cmath%2F0602468%2Cmath%2F0602109%2Cmath%2F0602248%2Cmath%2F0602286%2Cmath%2F0602171%2Cmath%2F0602597%2Cmath%2F0602416%2Cmath%2F0602158%2Cmath%2F0602414%2Cmath%2F0602529%2Cmath%2F0602419%2Cmath%2F0602039%2Cmath%2F0602404%2Cmath%2F0602180%2Cmath%2F0602140%2Cmath%2F0602636%2Cmath%2F0602505%2Cmath%2F0602326%2Cmath%2F0006123%2Cmath%2F0006105%2Cmath%2F0006037%2Cmath%2F0006026%2Cmath%2F0006057%2Cmath%2F0006141%2Cmath%2F0006191%2Cmath%2F0006235%2Cmath%2F0006150&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Why do partitions occur in Faa di Bruno's chain rule for higher\n  derivatives?"}, "summary": "It is well-known that the coefficients in Faa di Bruno's chain rule for\nhigher derivatives can be expressed via numeration of partitions. It turns out\nthat this has a natural form as a formula for the vector case. To this formula\ntwo proofs are presented, both \"explaining\" its form involving partitions: one\nas a purely algebraic fact, and one \"from first principles\" for the case of\nFrechet derivatives of mappings between Banach spaces.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0602299%2Cmath%2F0602099%2Cmath%2F0602183%2Cmath%2F0602115%2Cmath%2F0602108%2Cmath%2F0602053%2Cmath%2F0602524%2Cmath%2F0602244%2Cmath%2F0602425%2Cmath%2F0602201%2Cmath%2F0602276%2Cmath%2F0602011%2Cmath%2F0602173%2Cmath%2F0602030%2Cmath%2F0602321%2Cmath%2F0602461%2Cmath%2F0602389%2Cmath%2F0602047%2Cmath%2F0602324%2Cmath%2F0602253%2Cmath%2F0602113%2Cmath%2F0602449%2Cmath%2F0602344%2Cmath%2F0602033%2Cmath%2F0602432%2Cmath%2F0602193%2Cmath%2F0602251%2Cmath%2F0602624%2Cmath%2F0602520%2Cmath%2F0602309%2Cmath%2F0602155%2Cmath%2F0602278%2Cmath%2F0602355%2Cmath%2F0602611%2Cmath%2F0602220%2Cmath%2F0602620%2Cmath%2F0602143%2Cmath%2F0602060%2Cmath%2F0602376%2Cmath%2F0602408%2Cmath%2F0602110%2Cmath%2F0602167%2Cmath%2F0602555%2Cmath%2F0602442%2Cmath%2F0602105%2Cmath%2F0602275%2Cmath%2F0602660%2Cmath%2F0602270%2Cmath%2F0602602%2Cmath%2F0602294%2Cmath%2F0602335%2Cmath%2F0602005%2Cmath%2F0602088%2Cmath%2F0602518%2Cmath%2F0602256%2Cmath%2F0602658%2Cmath%2F0602451%2Cmath%2F0602364%2Cmath%2F0602056%2Cmath%2F0602647%2Cmath%2F0602015%2Cmath%2F0602501%2Cmath%2F0602214%2Cmath%2F0602054%2Cmath%2F0602463%2Cmath%2F0602613%2Cmath%2F0602487%2Cmath%2F0602259%2Cmath%2F0602094%2Cmath%2F0602038%2Cmath%2F0602204%2Cmath%2F0602223%2Cmath%2F0602243%2Cmath%2F0602612%2Cmath%2F0602468%2Cmath%2F0602109%2Cmath%2F0602248%2Cmath%2F0602286%2Cmath%2F0602171%2Cmath%2F0602597%2Cmath%2F0602416%2Cmath%2F0602158%2Cmath%2F0602414%2Cmath%2F0602529%2Cmath%2F0602419%2Cmath%2F0602039%2Cmath%2F0602404%2Cmath%2F0602180%2Cmath%2F0602140%2Cmath%2F0602636%2Cmath%2F0602505%2Cmath%2F0602326%2Cmath%2F0006123%2Cmath%2F0006105%2Cmath%2F0006037%2Cmath%2F0006026%2Cmath%2F0006057%2Cmath%2F0006141%2Cmath%2F0006191%2Cmath%2F0006235%2Cmath%2F0006150&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "It is well-known that the coefficients in Faa di Bruno's chain rule for\nhigher derivatives can be expressed via numeration of partitions. It turns out\nthat this has a natural form as a formula for the vector case. To this formula\ntwo proofs are presented, both \"explaining\" its form involving partitions: one\nas a purely algebraic fact, and one \"from first principles\" for the case of\nFrechet derivatives of mappings between Banach spaces."}, "authors": ["Eliahu Levy"], "author_detail": {"name": "Eliahu Levy"}, "author": "Eliahu Levy", "arxiv_comment": "10 pages", "links": [{"href": "http://arxiv.org/abs/math/0602183v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0602183v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.GM", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.GM", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.FA", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0602183v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0602183v1", "journal_reference": null, "doi": null, "fulltext": "arXiv:math/0602183v1 [math.GM] 9 Feb 2006\n\nWhy Do Partitions Occur in Fa\u00e0 di Bruno's Chain Rule\nFor Higher Derivatives?\nEliahu Levy\nDepartment of Mathematics\nTechnion \u2013 Israel Institute of Technology, Haifa 32000, Israel\nemail: eliahu@techunix.technion.ac.il\nAbstract\nIt is well known that the coefficients in Fa\u00e0 di Bruno's chain rule for n-th derivatives\nof functions of one variable can be expressed via counting of partitions. It turns out that\nthis has a natural form as a formula for the vector case. Viewed as a purely algebraic\nfact, it is briefly \"explained\" in the first part of this note why a proof for this formula\nleads to partitions. In the rest of the note a proof for this formula is presented \"from\nfirst principles\" for the case of n-th Fr\u00e9chet derivatives of mappings between Banach\nspaces. Again the proof \"explains\" why the formula has its form involving partitions.\n\n0\n\nIntroduction\n\nIf I is a finite set, |I| will denote its cardinality. N will denote the set of non-negative integers.\nP(I) is the power set of I.\nFa\u00e0 di Bruno's formula (see [J] for an excellent survey and bibiliography) gives a somewhat\ncomplicated expression for (g\u25e6f )(n) (x), f and g functions of one variable, in terms of derivatives\nup to order n of f at x and of g at f (x). The coefficients can be expressed using numeration\nof partitions of a set of n elements (see below).\nIt might seem that this settles the problem for mappings between multi-dimensional spaces\nX: the existence of the n-th derivative for the composite mapping follows from 1-st derivative\ntheorems, the n-th derivatives in the vector case being treated as iterated 1-st derivatives, and\nthe formula for it is obtained from Fa\u00e0 di Bruno's formula for one variable by composing with\nlinear mappings X \u2192 R or R \u2192 X. Moreover, since it is clear, by iterating the 1-st derivative\nchain rule, that (g \u25e6 f )(n) (x) is a certain polynomial in f (k) (x) and g (k) (f (x)), 1 \u2264 k \u2264 n, the\nproblem is only to find its form, a purely algebraic problem, and in this way it is treated in\nthe literature.\nIt turns out, however, that writing the formula for mappings between vector spaces gives\nit a very natural form, obscured by the particulars of the 1-dimensional case. This chain-rule\nformula for n-th derivatives of mappings between vector spaces is constructed in terms of\npartitions of a set I of cardinality n, as follows:\n1\n\n\f2\n\n0 INTRODUCTION\n\nD\n\n(g \u25e6 f )(n) (x),\n\nO\n\nE\n\nv =\ni\u2208I i\n\nX D\n\ng (|\u03c0|) (f (x)),\n\n\u03c0\u2208H(I)\n\nO\n\nS\u2208\u03c0\n\nD\n\nf (|S|) (x),\n\nO\n\nv\ni\u2208S i\n\nEE\n\n(3.1)\n\nWhere f : X \u2192 Y , g : Y \u2192 Z , X, Y , Z are vector spaces, x, vi \u2208 X, I is a set with n\nelements and H(I) is the set of partitions of I, i.e. H(I) is the subset of P(P(I)) consisting\nof all disjoint collections of subsets of I whose union is I and that do not contain the empty\nset. Thus, for example:\nH(\u2205) =\nH({1}) =\nH({1, 2}) =\nH({1, 2, 3}) =\n\n{\u2205}\n{{1}}\n{ {{1}, {2}} , {{1, 2}} }\n{ {{1}, {2}, {3}} , {{1}, {2, 3}} , {{2}, {1, 3}} , {{3}, {1, 2}} , {{1, 2, 3}} }\n\nFor the one-dimensional case X = Y = Z = the scalars it suffices to let vi = 1 and (3)\nreads:\nD\n\nE\n\n(g \u25e6 f )(n) (x), 1 =\n\nX D\n\ng (|\u03c0|) (f (x)),\n\n\u03c0\u2208H(I)\n\nO\n\nS\u2208\u03c0\n\nD\n\nf (|S|) (x), 1\n\nEE\n\n,\n\nthat is:\n(g \u25e6 f )(n) (x) =\n\nX\n\n\u03c0\u2208H(I)\n\ng (|\u03c0|) (f (x))\n\nY\n\nf (|S|) (x),\n\n(3.1\u2032 )\n\nS\u2208\u03c0\n\na form of Fa\u00e0 di Bruno's formula.\nIf (3.1) is viewed as a purely algebraic statement, one can deduce it in a straightforward,\nthough abstract, manner (see \u00a71), where the role of partitions is \"explained\".\nIn Theorem 1. in \u00a73, though, (3.1) is proved \"from basic principles\" for Fr\u00e9chet derivatives\nbetween Banach spaces. Once guessed, (3.1) can be proved in a straightforward manner using\ninduction. We have preferred to present a different proof which explains directly the form of\nthe formula. To this end the derivatives are treated via n-th iterated differences, i.e. alternating\nsigns sums over vertices of n-dimensional parallelepipeds, rather than iteratively. The formula\nis a consequence of an identity (Lemma 2) involving such sums. This identity and the proof\nare best expressed in the language of free linear spaces and free commutative algebras, which\nis therefore introduced. Also, this approach to the n-th derivative allows one to require just\ntheir existence in the strict sense (a definition is given in \u00a72) at the particular relevant points.\nA slight complication arises from the fact that the identity of Lemma 2 involves sums over\nparallelepipeds of dimensions higher than n, the order of the highest participating derivative.\nThis is dealt with using Lemma 1.\nIn Bourbaki, Vari\u00e9t\u00e9s ([B]) the linear space of point distributions of order \u2264 n at a point\nin a C (n) -manifold is defined and its properties stated. The fact that this is properly defined\nand is a functor may be proved using formula (3.1). Thus one may say that in spirit, (3.1)\nis present in [B].\n\n\f3\n\n1\n\nWhere Do Partitions Come From? \u2013 A Purely Algebraic Approach\n\nIn this section the scalars K may be any field. We insist on avoiding division by integers, thus\nthe scalar field may have any characteristic.\nLet us be abstract. The mappings will be between \"germs of n-manifolds at a point\", in\nshort n-germs, defined by their function algebra, namely A = An = K[[T1 , . . . , Tn ]] (formal\npower series), where the Tj are indeterminates. A has a linear topology, taking as basic\nneighborhoods at 0 the positive integer powers of the ideal consisting of the formal power\nseries without constant term. Smooth mappings f from the n-germ to the m-germ are defined\nby continuous homomorphisms \u03c6f : Am \u2192 An . (The \"actual\" m components of f as a\nmapping are the \"functions\" \u03c6f (Ti ), i = 1, . . . , m.) The continuity of \u03c6f means just that any\ncoefficient of \u03c6(F ) is only a function of a finite number of coefficients of F . Note that, by\nthe continuity, since in the linear topology of A Tik \u2192k\u2192\u221e 0 also (\u03c6f (Ti ))k \u2192k\u2192\u221e 0, hence\n\u03c6f (Ti ) have no constant term \u2013 indeed f (0) = 0.\nLet A\u2032 be the \"dual\", i.e. the K-vector space of continuous functionals \u03be : A \u2192 K, K\ngiven the discrete topology. Continuity again means that \u03be(F ) depends only on a finite set of\ncoefficients of F .\nThe multiplication on A induces a comultiplication \u2206 : A\u2032 \u2192 A\u2032 A\u2032 by\n(\u2206(\u03be))(F \u2297G) := \u03be(F G)\n\nF, G \u2208 A.\n\nN\n\n(1.1)\n\nThis comultiplication, with the counit \u03be 7\u2192 \u03be(1), turns A\u2032 into a (coassociative and cocommutative) coalgebra over K. A\u2032 contains the Dirac delta \u03b4 at 0, defined by \u03b4(F ) := the constant\nterm in F , which satisfies \u2206(\u03b4) = \u03b4\u2297\u03b4. We also have the primitive elements in A\u2032 , i.e. those\nsatisfying \u2206(\u03be) = \u03be\u2297\u03b4 + \u03b4\u2297\u03be, which means by (1.1) that the functional \u03be is a \"tangent vector\"\nat 0. Indeed, they constitute a vector space over K isomorphic to K n by the isomorphism\n\u03be 7\u2192 (\u03be(T1 ), . . . , \u03be(Tn )). Denote this \"tangent space\" of the n-germ by V = Vn . We identify a\n\"vector\" in V with the corresponding \"vector\" in K n .\nBut there is more structure: one may define the convolution of two elements \u03be, \u03b7 of A\u2032\n(giving an element of A\u2032 ), and the convolution of an element \u03be of A\u2032 and a F \u2208 A (giving an\nelement of A) by:\n(\u03be\u2217\u03b7)(F ) := \u03be(T 7\u2192 \u03b7(S 7\u2192 F (S+T )))\n\n\u03be\u2217F := (T 7\u2192 \u03be(S 7\u2192 F (S+T )))\n\nF \u2208 A. (1.2)\n\nThe first convolution makes A\u2032 also into an (associative and commutative) algebra, with unit\n\u03b4, which acts linearly on A by the second convolution. In particular, as one easily sees, the\nprimitive elements v \u2208 V act on A as the directional partial derivatives with direction v.\nIndeed, one may write:\nhF \u2032 , vi = v \u2217 F\n\nv(F ) = hF \u2032 (0), vi\n\nv \u2208 V , F \u2208 A.\n\nConvolutions of elements v in V will act, by convolution with members of A, as composition\nof the actions of the v, i.e. by higher-order differential operators. One finds that one may also\nwrite:\nD\nE\n(v1 \u2217 * * * \u2217 vk )(F ) = F (k) (0), v1 \u2297 * * * \u2297vk\nvi \u2208 V , F \u2208 A.\n(1.3)\n\n\f4\n\n1 WHERE DO PARTITIONS COME FROM? \u2013 ALGEBRAIC APPROACH\n\nIndeed:\nD\n\nE\n\nD\n\nE\n\nF (k) (0), v1 \u2297 * * * \u2297vk = F (k) , v1 \u2297 * * * \u2297vk |0 =\n\n= (v1 \u2217 * \u2217 vn \u2217 F )|0 = (v1 \u2217 * * * \u2217 vn \u2217 \u03b4)(F ) = (v1 \u2217 * * * \u2217 vn )(F )\nYet there is a difference between the comultiplication and the convolution multiplication:\nsince any smooth mapping f defines a homomorphism \u03c6f of the algebra A, it will induce a\ndual map on A\u2032 (which we again denote by \u03c6f ) which will preserve the comultiplication, i.e.\n\u03c6f (\u2206(\u03be)) = \u2206(\u03c6f (\u03be)), (Applying a mapping such as \u03c6f to the tensor product is understood\nfactorwise.) Thus, the coalgebra structure is an invariant of the manifold structure, so to\nspeak. On the other hand the convolution was defined in (1.2) using the additive structure\nof K n , so to speak, and a smooth mapping need preserve it only if it is linear. Nevertheless,\nusing the fact that the convolution in A\u2032 is, in a sense, the map A\u2032 \u2192 A\u2032 \u2297A\u2032 induced by the\nsmooth mapping K n \u00d7 K n \u2192 K n given by addition, one shows that convolution preserves the\ncomultiplication, hence A\u2032 is a bialgebra, (it turns out to be a Hopf algebra).\nThis can be used to compute \u2206 on \u2217i\u2208I vi , vi \u2208 V , I a finite set. (Recall that \u03b4 is the unit\nof convolution):\nX\n\n\u2206 (\u2217i\u2208I vi ) = \u2217i\u2208I \u2206(vi ) = \u2217i\u2208I (vi \u2297\u03b4 + \u03b4\u2297vi ) =\n\n\u0010\n\n\u0011\n\n(\u2217i\u2208S vi ) \u2297 \u2217i\u2208I\\S vi .\n\nS\u2282I\n\n(1.4)\n\nOne defines \u2206(3) : A\u2032 \u2192 A\u2032 \u2297A\u2032 \u2297A\u2032 by \u2206h(3) := (\u2206\u2297id\n) \u25e6 \u2206 = (id \u2297\u2206) \u25e6 \u2206 (the latter\ni\n(3)\nbeing equal by coassociativity), and one has \u2206 (\u03be) (F \u2297G\u2297H) = \u03be(F GH). Similarly for\n\u2206(n) , n \u2208 N. For v \u2208 V one has \u2206(3) v = v\u2297\u03b4\u2297\u03b4 + \u03b4\u2297v\u2297\u03b4 + \u03b4\u2297\u03b4\u2297v etc. In analogy to (1.4),\none has, for vi \u2208 V , I a finite set:\n\u2206(k) (\u2217i\u2208I vi ) =\n\nX\n\nI=disj.\n\nOk\n\nj=1\n\n\u222akj=1 Sj\n\n\u2217i\u2208Sj vi .\n\n(1.5)\n\nLet f be a smooth mapping from the n-germ to the m-germ. Applying (1.3) for F = fj =\n\u03c6f (Tj ) one obtains (recall that f (k) (0) is a linear map S k (Vn ) \u2192 Vm \u2013 for the notation S k (V )\nsee \u00a72.1):\n[\u03c6f (v1 \u2217 * * * \u2217 vk )] (Tj ) =\n\nhD\n\nf (k) (0), v1 \u2297 * * * \u2297vk\n\nEi\n\n(Tj ) =\n\nhD\n\nf (k) (0), v1 \u2297 * * * \u2297vk\n\nEi\n\nj\n\nvi \u2208 V\n\nj = 1, . . . , m.\n(1.6).\n\nWe claim that, for vi \u2208 V , I a finite set (for the notation H(I) see \u00a70):\n\u03c6f (\u2217i\u2208I vi ) =\n\nX\n\n\u03c0\u2208H(I)\n\nD\n\nE\n\n\u2217S\u2208\u03c0 f (|S|) (0), \u2297i\u2208S vi .\n\n(1.7)\n\nTo get (1.7), it suffices that both sides give the same value when applied to a monomial on\nthe Tj 's, that is, that applying \u2206(k) to both sides one obtains elements of the k-th tensor\npower of A\u2032 that give the same value when applied to tensors of Tj 's. But that follows in a\n\n\f5\nstraightforward (though somewhat clumsy) manner from (1.5) and (1.6) and the fact that \u03c6f\npreserves the comultiplication.\nNow (3.1) follows from (1.7) and (1.6): indeed, if f and g are smooth mappings, vi \u2208 V ,\nI a finite set and j = 1, . . . , n where n is the dimension of the image germ of g:\nhD\n\n(g \u25e6 f )(|I|) (0),\n\uf8ee\n\n\uf8eb\n\n= \uf8f0 \u03c6g \uf8ed\n\uf8ee\n\n=\uf8f0\n\nO\n\nX\n\nv\ni\u2208I i\n\n= [\u03c6g (\u03c6f (\u2217i\u2208I vi ))] (Tj ) =\n\nj\n\nD\n\n\u2217S\u2208\u03c0 f (|S|) (0),\n\n\u03c0\u2208H(I)\n\nX D\n\ng (|\u03c0|) (0),\n\n\u03c0\u2208H(I)\n\n2\n\nEi\n\nO\n\nS\u2208\u03c0\n\nD\n\nO\n\nv\ni\u2208S i\n\nf (|S|) (0),\n\nE\n\n\uf8f6\uf8f9\n\n\uf8f8\uf8fb (Tj )\n\nO\n\nv\ni\u2208S i\n\n=\n\nEE\n\n\uf8f9\n\uf8fb\n\nj\n\nPreliminaries to the Banach Space Approach\n\nLet X, Y , Z denote linear spaces over a field (the scalar field) \u2013 from \u00a73 on Banach spaces\nunless otherwise stated. The choice of R or C as scalar field is insignificant and will not be\nmentioned.\n\n2.1\n\nSymmetric Tensors\n\nWe consider the symmetric power S n (X) of X, defined as the quotient space of the n-fold\nN\n(algebraic) tensor product n X with respect to its subspace spanned by the elements\nx1 \u2297x2 \u2297 . . . \u2297xn \u2212 x\u03c3(1) \u2297x\u03c3(2) \u2297 . . . \u2297x\u03c3(n)\n\nwhere xi \u2208 X and \u03c3 is a permutation of {1, 2, . . . , n}. The image of a tensor x1 \u2297 . . . \u2297xn\nin S n (X) by the quotient map will still be denoted by x1 \u2297 . . . \u2297xn . Thus, (x1 , . . . , xn ) 7\u2192\nx1 \u2297 . . . \u2297xn \u2208 S n (X) is multilinear and symmetric and one may freely employ the notation\nN\ni\u2208I xi for a finite family (xi )i\u2208I .\nIn particular, S 0 (X) may be identified with the scalar field.\n\nn\nIn the direct sum S(X) := \u221e\n0 S (X), \u2297 is an associative and commutative multiplication. S(X) is called the symmetric algebra of X.\n\nL\n\nWhen X and Y are Banach spaces, the bounded linear operators T : S n (X) \u2192 Y , i.e.\nthose satisfying\nkT k := sup |hT , x1 \u2297 . . . \u2297xn i| < \u221e\nkxi k\u22641\n\nform, with the above norm, a Banach space, to be denoted by L(n) (X, Y ). Of course, this\nspace may be identified with the Banach space of bounded symmetric n-multilinear operators\nfrom X n to Y .\n\n\f6\n\n2 PRELIMINARIES TO THE BANACH SPACE APPROACH\n\n2.2\n\nThe n-th strict (Fr\u00e9chet) derivative\n\nIt may be defined, instead of iteratively, via n-th order differences (or, in other words, alternating signs sums over vertices of parallelepipeds), as follows:\nDefinition 1 Let X, Y be Banach spaces, U \u2282 X, f : U \u2192 Y , x \u2208 U o (the interior of U).\nLet n \u2208 N. We say that f has a (strict) n-th (Fr\u00e9chet) derivative at x, the derivative being\nthe element f (n) of L(n) (X, Y ), if f (n) satisfies, for a set I with |I| = n:\nX\n\n(\u22121)\n\n|I|\u2212|S|\n\nf v\u0304 +\n\nS\u2282I\n\nX\n\n!\n\nD\n\nvi = f\n\ni\u2208S\n\n(n)\n\n(x) ,\n\nO\n\nv\ni\u2208I i\n\nE\n\nY\n\n+ ov\u0304\u2192x,vi\u21920\n\nkvi k\n\ni\u2208I\n\n!\n\n(2.1)\n\nSuch an f (n) is necessarily unique, if it exists.\nDefined this way, f (n) (x) may exist even if previous derivatives fail to exist in a neighborhood of x or even at x itself (for example any non-continuous linear operator f has f (n) \u2261 0 ,\nn \u2265 2).\nNote that f (0) (x) = y means that f is continuous at x and f (x) = y.\nThe proof of the following fact is standard:\nFact: Suppose f (n) (x) exists for every x in an open U \u2282 X. Then:\n(i) f (n) : U \u2192 L(n) (X, Y ) is continuous\n(ii) If v\u0304 \u2208 U , vi \u2208 X are such that the \"parallelepiped\"\nn\n\nv\u0304 +\n\nX\n\no\n\nti vi : t = (t1 , . . . , tn ) \u2208 [0, 1]n \u2282 U\n\nthen (|I| = n):\nX\n\n(\u22121)|I|\u2212|S| f v\u0304 +\n\nS\u2282I\n\nX\n\n!\n\nvi =\n\ni\u2208I\n\nZ\n\nt\u2208[0,1]n\n\n*\n\nf (n) v\u0304 +\n\nX\n\nti vi\n\ni\u2208I\n\n!\n\nO\n\n,\n\nv\ni\u2208I i\n\n+\n\ndt\n\ndt being the n-dimensional Lebesgue measure.\n(iii) (consequence of (ii) ): If x \u2208 U , m \u2208 N then f (n) has a (strict) m-th derivative at x iff\nf has a (strict) m + n -th derivative at x and then:\nD\n\nf (n+m) (x),\n\nO\n\nE\n\nv =\n1\u2264i\u2264m+n i\n\n\u001c\u001c\u0010\n\nf (n)\n\n\u0011(m)\n\n(x),\n\nO\n\n\u001d O\n\nv ,\n1\u2264i\u2264m i\n\n\u001d\n\nv .\nm+1\u2264i\u2264m+n i\n\n(iii) implies that the above definition of f (n) (x) coincides with the iterative definition\nwhenever f (m) , m < n exist in a neighborhood of x.\n\n\f7\n\n3\n\nThe Chain Rule for the n-th Fr\u00e9chet Derivative\n\nTheorem 1. Let n \u2208 N , f : U \u2282 X \u2192 Y , g : V \u2282 Y \u2192 Z (X,Y ,Z Banach spaces)\nbe such that f (U) \u2282 V . Let x \u2208 U o (interior of U), be such that f (k) , 0 \u2264 k \u2264 n exist at\nx, f (x) \u2208 V and g (k) , 0 \u2264 k \u2264 n exist at f (x). Then (g \u25e6 f )(n) (x) exists and we have the\nformula (|I| = n):\nD\n\n(g \u25e6 f )(n) (x),\n\nO\n\nE\n\nv =\ni\u2208I i\n\nX D\n\ng (|\u03c0|) (f (x)),\n\n\u03c0\u2208H(I)\n\nO\n\nS\u2208\u03c0\n\nD\n\nf (|S|) (x),\n\nO\n\nv\ni\u2208S i\n\nEE\n\n(3.1)\n\nAll derivatives are in the sense of Definition 1.\nProof. Let us remark first, that if it is assumed that the derivatives of order < n exist\nin neighborhoods of x and f (x) and one employs the iterative definition, then (3.1) may\nbe proved by induction in a straightforward manner (assuming one guesses the formula in\nadvance). We shall rather give a proof that assumes existence of the derivatives only at x and\nf (x) using Definition 1, and moreover \"explains\" why (3.1) has its form.\nBefore we proceed with the proof, let us introduce the following auxiliary concepts and\nnotations:\nAssume, for the moment, that X is just a set. Denote by EX the free linear space with basis\ndenoted by (Ex)x\u2208X . In this way, E is a functor: for any sets X, Y and function f : X \u2192 Y\nwe have a linear function f E : EX \u2192 EY defined by f E (Ex) = E (f (x)). In case Y is a linear\nspace, one has also a linear f L : EX \u2192 Y defined by f L (Ex) = f (x).\nFor a linear space X, EX is a commutative algebra where Ex * Ey = E(x + y) , i.e. X is the\ngroup-algebra of the additive group X. It has the unit element 1 = E0. For linear f : X \u2192 Y ,\nf E is an algebra homomorphism preserving unit element.\nE may be iterated: for any set X we have the commutative algebra EEX.\nFor the case that X,Y ,Z are linear spaces and f : X \u2192 Y , g : Y \u2192 Z any functions, we\nhave the following formulas:\nf (x) = f L (Ex)\nL\n\nEf (x) = Ef (Ex) = f\n\n(3.2)\n\nLE\n\n(3.2\u2032 )\n\n(EEx)\n\ngf (x) = g L (Ef (x)) = g L f LE (EEx)\n\n(3.2\u2032\u2032 )\n\nNote that f LE is always an algebra homomorphism.\nLet us rewrite the left-hand side expression of (2.1) (definition 1) using these notations:\nP\nP\nP\n(\u22121)|I|\u2212|S| f (v\u0304 + i\u2208S vi ) = \u0011 S\u2282I (\u22121)|I|\u2212|S| f L (E (v\u0304 + i\u2208S\nS\u2282I \u0010\nQ\nQ\nP\n|I|\u2212|S|\nE v\u0304 i\u2208S Evi = f L (E v\u0304 i\u2208I (Evi \u2212 1)) .\n= fL\nS\u2282I (\u22121)\n\nP\n\nvi ))\n\nThus (2.1) takes the form:\nf\n\nL\n\nE v\u0304\n\nY\n\ni\u2208I\n\n!\n\nD\n\n(Evi \u2212 1) = f\n\n(n)\n\n(x),\n\nO\n\nv\ni\u2208I i\n\nE\n\n+ ov\u0304\u2192x,vi\u21920\n\nY\ni\u2208I\n\nkvi k\n\n!\n\n(3.3)\n\n\f8\n\n3 THE CHAIN RULE FOR THE N-TH FR\u00c9CHET DERIVATIVE\n\nLemma 1 If f (n) exists but one takes |I| > n, then for any J \u2282 I, |J| = n, the left hand-side\nQ\nof (3.3) is ov\u0304\u2192x,vi \u21920 ( i\u2208J kvi k).\nProof of Lemma 1.\nf L (E v\u0304\n\u0010\n\nQ\n\ni\u2208I\n\n\u0010\n\n(Evi \u2212 1)) = f L E v\u0304\n\nQ\n\ni\u2208I\\J\n\n(Evi \u2212 1)\n\ni\u2208J\u0011 (Evi\n\nQ\n\n\u0011\n\n\u2212 1) =\n\n= f L E v\u0304 S\u2282I\\J (\u22121)|I\\J|\u2212|S| i\u2208S Evi i\u2208J (Evi \u2212 1) =\nQ\nP\nP\n= S\u2282I\\J (\u22121)|I\\J|\u2212|S| f L (E (v\u0304 + i\u2208S vi ) i\u2208J (Evi \u2212 1))\nP\n\nQ\n\nQ\n\nBy (3.3) (note that |J| = n), the last expression is\n\uf8eb\n\uf8ed\n\nX\n\n(\u22121)\n\nS\u2282I\\J\n\n\uf8f6\n\n|I\\J|\u2212|S| \uf8f8\n\nD\n\nf\n\n(n)\n\n(x),\n\nO\n\nv\ni\u2208J i\n\nE\n\n+ ov\u0304\u2192x,vi \u21920\n\nY\n\nkvi k\n\ni\u2208J\n\n!\n\nAnd the lemma follows from the fact that the first term vanishes, since\nX\n\n(\u22121)|I\\J|\u2212|S| = (1 \u2212 1)|I\\J| = 0\n\nS\u2282I\\J\n\nbecause |I \\ J| > 0.\nQED\nNow (3.1) will follow, using (3.3), from the following identity which will be proved later:\nLemma 2 For any finite set I and vectors v\u0304, vi in a linear space X:\nX\n\n(\u22121)\n\n|I|\u2212|S|\n\nEE v\u0304 +\n\nS\u2282I\n\nX\ni\u2208S\n\n!\n\nX\n\nvi =\n\nEE v\u0304\n\n\"\n\nY\n\nE E v\u0304\n\nA\u2208\u03b1\n\n\u03b1\u2282P(I), \u222a\u03b1=I, \u2205\u2208\u03b1\n/\n\nY\n\n#\n\n(Evi \u2212 1) \u2212 1\n\ni\u2208A\n\n!\n\n(\u2217)\n\nProceeding with the proof of (3.1), one has, by (3.2), (3.2\u2032 ) and (3.2\u2032\u2032 ), using (\u2217):\nP\n|I|\u2212|S|\ng (f (v\u0304 + i\u2208I vi )) =\nS\u2282I (\u22121)\n\u0010P\n\u0011\nP\n|I|\u2212|S|\n= g L f LE\n(\u22121)\nEE\n(v\u0304\n+\nv\n)\n=\ni\ni\u2208S\n\u0011\n\u0010 S\u2282I\nQ\nQ\nL LE P\n(Ev\n\u2212\n1)]\n\u2212\n1)\n=\n(E\n[E\nv\u0304\nEE\nv\u0304\n=g f\ni\ni\u2208A\nA\u2208\u03b1\n\u03b1\u2282P(I), \u222a\u03b1=I,\n/\n\u0011\u0011\n\u0010\n\u0010 \u2205\u2208\u03b1\nQ\nQ\nP\nL\nEf (v\u0304) A\u2208\u03b1 Ef L [E v\u0304 i\u2208A (Evi \u2212 1)] \u2212 1 =\n= \u03b1\u2282P(I), \u222a\u03b1=I, \u2205\u2208\u03b1\n/ g\nP\n\nP\n\n\u03b1\u2282P(I), \u222a\u03b1=I, \u2205\u2208\u03b1\n/\n\nD\u03b1 .\n\nD\u03b1 is an expression of the form appearing in the left-hand side of (3.3), with f replaced\nQ\nby g, I by \u03b1 and the vectors v\u0304 and vi by w\u0304 = f (v\u0304) and wA = f L ((E v\u0304 i\u2208A (Evi \u2212 1)).\nSince f is continuous at x (having a strict 0-derivative) , w\u0304 \u2192 f (x) as v\u0304 \u2192 x. Also, for\n\u2205=\n6 A \u2282 I,\nwA = f L ((E v\u0304\n\nD\n\n|A|\n(x),\ni\u2208A (Evi \u2212 1)) = f\n\nQ\n\nN\n\nE\n\ni\u2208A vi + o (\n\nQ\n\ni\u2208A\n\nkvi k) = O (\n\nQ\n\ni\u2208A\n\nkvi k)\n\n\f9\nwhich tends to 0 as v\u0304 \u2192 x, vi \u2192 0.\nNow, since g is assumed having strict derivatives at f (x) up to order n , (3.3) and Lemma\n1 applied to g give:\nD\u03b1(=Dg L (E w\u0304 A\u2208\u03b1 (EwA \u2212 E1)) =\nQ\nQ\nN\ng (|\u03b1|) (f (x)), A\u2208\u03b1 wA + o ( A\u2208\u03b1 kwA k) = O ( A\u2208\u03b1 kwA k)\n=\nQ\no ( A\u2208J kwA k) for any J \u2282 \u03b1 with |J| = n,\nQ\n\nif |\u03b1| \u2264 n\nif |\u03b1| > n\n\n(3.4)\n\n(All O's and o's are for v\u0304 \u2192 x, vi \u2192 0).\nIn order to deal with the second case in (3.4), note that we have:\nLemma 3 If \u222a\u03b1 = I, then \u2203\u03b2 \u2282 \u03b1 such that \u222a\u03b2 = I and |\u03b2| \u2264 n.\n\nProof Just pick for each i \u2208 I an A \u2208 \u03b1 such that i \u2208 A and let \u03b2 be the set of A's picked.\nQED\nThus, if \u222a\u03b1 = I and |\u03b1| > n we can always find a J \u2282 \u03b1 with |J| = n, \u222aJ = I and\nQ\nQ\nD\u03b1 = o ( A\u2208J kwA k) = o ( i\u2208I kvi k). If \u222a\u03b1 = I and |\u03b1| \u2264 n but \u03b1 is not a partition, then\nQ\nQ\nD\u03b1 = O ( A\u2208\u03b1 kwA k) = o ( i\u2208I kvi k) , since the A's cover I with redundancy. So we are left\nwith the D\u03b1 's for \u03b1 \u2208 H(I), for which we have:\nD\n\nE\n\nD\u03b1 = g (|\u03b1|) (f (x)), A\u2208\u03b1 wA + o ( w\u2208A kwA k) =\niE\nE\nhD\nD\nQ\nQ\nN\nN\n= g (|\u03b1|) (f (x)), A\u2208\u03b1 f (|A|) (x), i\u2208A vi + o ( i\u2208A kvi k) + o ( i\u2208I kvi k) =\nN\n\nD\n\n= g (|\u03b1|) (f (x)),\n\nwhich implies (3.1).\n\nN\n\nA\u2208\u03b1\n\nD\n\nQ\n\nf (|A|) (x),\n\nN\n\ni\u2208A vi\n\nEE\n\n+o(\n\nQ\n\ni\u2208I\n\nkvi k)\n\nThe only thing left to be done is the:\nProof of Lemma 2 (i.e. of (\u2217)):\n(\u22121)|I|\u2212|S| EE (v\u0304 + i\u2208S vi ) =\nQ\n(\u22121)|I|\u2212|S| E (E v\u0304 i\u2208S Evi ) =\n=\nQ\n(\u22121)|I|\u2212|S| E [E v\u0304 i\u2208S (1 + (Evi \u2212 1))] =\n=\nP\nQ\n= S\u2282I (\u22121)|I|\u2212|S| E h[E v\u0304 A\u2282S i\u2208A (Evi \u2212 1)] =\ni\nQ\nP\nP\n= S\u2282I (\u22121)|I|\u2212|S| E E v\u0304 + A\u2282S, A6=\u2205 E v\u0304 i\u2208A (Evi \u2212 1) =\nP\nQ\nQ\n= S\u2282I (\u22121)|I|\u2212|S| EE v\u0304 A\u2282S, A6=\u2205 E (E v\u0304 i\u2208A (Evi \u2212 1)) =\nP\nQ\nQ\n= S\u2282I (\u22121)|I|\u2212|S| EE v\u0304 A\u2282S, A6=\u2205 [1 + (E [E v\u0304 i\u2208A (Evi \u2212 1)] \u2212 1)] =\nQ\nP\nQ\nP\nEE v\u0304 \u03b1\u2282P(S), \u2205\u2208\u03b1\n= S\u2282I (\u22121)|I|\u2212|S|\n/\nA\u2208\u03b1 (E [E v\u0304 i\u2208A (Evi \u2212 1)] \u2212 1) =\n\u0011\n\u0010\nQ\nQ\nP\nP\n|I|\u2212|S|\nEE v\u0304 A\u2208\u03b1 (E [E v\u0304 i\u2208A (Evi \u2212 1)] \u2212 1)\n= \u03b1\u2282P(I), \u2205\u2208\u03b1\n/\nS\u2282I, \u222a\u03b1\u2282S (\u22121)\n\nP\n\nP\n\nS\u2282I\n\nP\nPS\u2282I\nPS\u2282I\n\nand (\u2217) follows from the fact that for fixed \u03b1\nX\n\n(\u22121)\n\n|I|\u2212|S|\n\n= (1 \u2212 1)\n\nS\u2282I, \u222a\u03b1\u2282S\n\nQED\nThis completes the proof of Theorem 1.\n\n|I|\u2212|\u222a\u03b1|\n\n=\n\n(\n\n1 if \u222a \u03b1 = I\n.\n0 otherwise\n\n\f10\n\nREFERENCES\n\nReferences\n[B] Bourbaki N. Vari\u00e9t\u00e9s Diff\u00e9rentielles et Analytiques, Fascicule de r\u00e9sultats. Diffusion\nC.C.L.S. Paris, 1983.\n[J] Johnson, Warren P. The curious history of Fa\u00e0 di Bruno's formula, Amer. Math. Monthly,\n109, March 2002.\n\n\f"}