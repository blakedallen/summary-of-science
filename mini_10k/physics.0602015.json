{"id": "http://arxiv.org/abs/physics/0602015v1", "guidislink": true, "updated": "2006-02-02T12:02:40Z", "updated_parsed": [2006, 2, 2, 12, 2, 40, 3, 33, 0], "published": "2006-02-02T12:02:40Z", "published_parsed": [2006, 2, 2, 12, 2, 40, 3, 33, 0], "title": "Market efficiency and the long-memory of supply and demand: Is price\n  impact variable and permanent or fixed and temporary?", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=physics%2F0501136%2Cphysics%2F0501017%2Cphysics%2F0501023%2Cphysics%2F0501100%2Cphysics%2F0501099%2Cphysics%2F0501123%2Cphysics%2F0501116%2Cphysics%2F0501072%2Cphysics%2F0501107%2Cphysics%2F0501134%2Cphysics%2F0501150%2Cphysics%2F0501110%2Cphysics%2F0501093%2Cphysics%2F0501048%2Cphysics%2F0501073%2Cphysics%2F0501063%2Cphysics%2F0501024%2Cphysics%2F0501088%2Cphysics%2F0501003%2Cphysics%2F0501071%2Cphysics%2F0501055%2Cphysics%2F0501103%2Cphysics%2F0501009%2Cphysics%2F0501077%2Cphysics%2F0501046%2Cphysics%2F0501058%2Cphysics%2F0501152%2Cphysics%2F0501030%2Cphysics%2F0501066%2Cphysics%2F0501001%2Cphysics%2F0501129%2Cphysics%2F0501074%2Cphysics%2F0501018%2Cphysics%2F0501097%2Cphysics%2F0501067%2Cphysics%2F0501056%2Cphysics%2F0501165%2Cphysics%2F0501041%2Cphysics%2F0501015%2Cphysics%2F0501158%2Cphysics%2F0501051%2Cphysics%2F0501054%2Cphysics%2F0501141%2Cphysics%2F0501132%2Cphysics%2F0602110%2Cphysics%2F0602116%2Cphysics%2F0602073%2Cphysics%2F0602105%2Cphysics%2F0602086%2Cphysics%2F0602096%2Cphysics%2F0602108%2Cphysics%2F0602106%2Cphysics%2F0602144%2Cphysics%2F0602157%2Cphysics%2F0602015%2Cphysics%2F0602185%2Cphysics%2F0602079%2Cphysics%2F0602150%2Cphysics%2F0602131%2Cphysics%2F0602089%2Cphysics%2F0602160%2Cphysics%2F0602151%2Cphysics%2F0602077%2Cphysics%2F0602013%2Cphysics%2F0602042%2Cphysics%2F0602001%2Cphysics%2F0602067%2Cphysics%2F0602050%2Cphysics%2F0602007%2Cphysics%2F0602043%2Cphysics%2F0602127%2Cphysics%2F0602068%2Cphysics%2F0602101%2Cphysics%2F0602190%2Cphysics%2F0602139%2Cphysics%2F0602103%2Cphysics%2F0602167%2Cphysics%2F0602084%2Cphysics%2F0602023%2Cphysics%2F0602172%2Cphysics%2F0602028%2Cphysics%2F0602097%2Cphysics%2F0602004%2Cphysics%2F0602113%2Cphysics%2F0602137%2Cphysics%2F0602112%2Cphysics%2F0602130%2Cphysics%2F0602029%2Cphysics%2F0602074%2Cphysics%2F0602003%2Cphysics%2F0602126%2Cphysics%2F0602169%2Cphysics%2F0602158%2Cphysics%2F0602063%2Cphysics%2F0602111%2Cphysics%2F0602016%2Cphysics%2F0602094%2Cphysics%2F0602091%2Cphysics%2F0602052%2Cphysics%2F0602184%2Cphysics%2F0602161&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Market efficiency and the long-memory of supply and demand: Is price\n  impact variable and permanent or fixed and temporary?"}, "summary": "In this comment we discuss the problem of reconciling the linear efficiency\nof price returns with the long-memory of supply and demand. We present new\nevidence that shows that efficiency is maintained by a liquidity imbalance that\nco-moves with the imbalance of buyer vs. seller initiated transactions. For\nexample, during a period where there is an excess of buyer initiated\ntransactions, there is also more liquidity for buy orders than sell orders, so\nthat buy orders generate smaller and less frequent price responses than sell\norders. At the moment a buy order is placed the transaction sign imbalance\ntends to dominate, generating a price impact. However, the liquidity imbalance\nrapidly increases with time, so that after a small number of time steps it\ncancels all the inefficiency caused by the transaction sign imbalance, bounding\nthe price impact. While the view presented by Bouchaud et al. of a fixed and\ntemporary bare price impact is self-consistent and formally correct, we argue\nthat viewing this in terms of a variable but permanent price impact provides a\nsimpler and more natural view. This is in the spirit of the original conjecture\nof Lillo and Farmer, but generalized to allow for finite time lags in the build\nup of the liquidity imbalance after a transaction. We discuss the possible\nstrategic motivations that give rise to the liquidity imbalance and offer an\nalternative hypothesis. We also present some results that call into question\nthe statistical significance of large swings in expected price impact at long\ntimes.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=physics%2F0501136%2Cphysics%2F0501017%2Cphysics%2F0501023%2Cphysics%2F0501100%2Cphysics%2F0501099%2Cphysics%2F0501123%2Cphysics%2F0501116%2Cphysics%2F0501072%2Cphysics%2F0501107%2Cphysics%2F0501134%2Cphysics%2F0501150%2Cphysics%2F0501110%2Cphysics%2F0501093%2Cphysics%2F0501048%2Cphysics%2F0501073%2Cphysics%2F0501063%2Cphysics%2F0501024%2Cphysics%2F0501088%2Cphysics%2F0501003%2Cphysics%2F0501071%2Cphysics%2F0501055%2Cphysics%2F0501103%2Cphysics%2F0501009%2Cphysics%2F0501077%2Cphysics%2F0501046%2Cphysics%2F0501058%2Cphysics%2F0501152%2Cphysics%2F0501030%2Cphysics%2F0501066%2Cphysics%2F0501001%2Cphysics%2F0501129%2Cphysics%2F0501074%2Cphysics%2F0501018%2Cphysics%2F0501097%2Cphysics%2F0501067%2Cphysics%2F0501056%2Cphysics%2F0501165%2Cphysics%2F0501041%2Cphysics%2F0501015%2Cphysics%2F0501158%2Cphysics%2F0501051%2Cphysics%2F0501054%2Cphysics%2F0501141%2Cphysics%2F0501132%2Cphysics%2F0602110%2Cphysics%2F0602116%2Cphysics%2F0602073%2Cphysics%2F0602105%2Cphysics%2F0602086%2Cphysics%2F0602096%2Cphysics%2F0602108%2Cphysics%2F0602106%2Cphysics%2F0602144%2Cphysics%2F0602157%2Cphysics%2F0602015%2Cphysics%2F0602185%2Cphysics%2F0602079%2Cphysics%2F0602150%2Cphysics%2F0602131%2Cphysics%2F0602089%2Cphysics%2F0602160%2Cphysics%2F0602151%2Cphysics%2F0602077%2Cphysics%2F0602013%2Cphysics%2F0602042%2Cphysics%2F0602001%2Cphysics%2F0602067%2Cphysics%2F0602050%2Cphysics%2F0602007%2Cphysics%2F0602043%2Cphysics%2F0602127%2Cphysics%2F0602068%2Cphysics%2F0602101%2Cphysics%2F0602190%2Cphysics%2F0602139%2Cphysics%2F0602103%2Cphysics%2F0602167%2Cphysics%2F0602084%2Cphysics%2F0602023%2Cphysics%2F0602172%2Cphysics%2F0602028%2Cphysics%2F0602097%2Cphysics%2F0602004%2Cphysics%2F0602113%2Cphysics%2F0602137%2Cphysics%2F0602112%2Cphysics%2F0602130%2Cphysics%2F0602029%2Cphysics%2F0602074%2Cphysics%2F0602003%2Cphysics%2F0602126%2Cphysics%2F0602169%2Cphysics%2F0602158%2Cphysics%2F0602063%2Cphysics%2F0602111%2Cphysics%2F0602016%2Cphysics%2F0602094%2Cphysics%2F0602091%2Cphysics%2F0602052%2Cphysics%2F0602184%2Cphysics%2F0602161&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "In this comment we discuss the problem of reconciling the linear efficiency\nof price returns with the long-memory of supply and demand. We present new\nevidence that shows that efficiency is maintained by a liquidity imbalance that\nco-moves with the imbalance of buyer vs. seller initiated transactions. For\nexample, during a period where there is an excess of buyer initiated\ntransactions, there is also more liquidity for buy orders than sell orders, so\nthat buy orders generate smaller and less frequent price responses than sell\norders. At the moment a buy order is placed the transaction sign imbalance\ntends to dominate, generating a price impact. However, the liquidity imbalance\nrapidly increases with time, so that after a small number of time steps it\ncancels all the inefficiency caused by the transaction sign imbalance, bounding\nthe price impact. While the view presented by Bouchaud et al. of a fixed and\ntemporary bare price impact is self-consistent and formally correct, we argue\nthat viewing this in terms of a variable but permanent price impact provides a\nsimpler and more natural view. This is in the spirit of the original conjecture\nof Lillo and Farmer, but generalized to allow for finite time lags in the build\nup of the liquidity imbalance after a transaction. We discuss the possible\nstrategic motivations that give rise to the liquidity imbalance and offer an\nalternative hypothesis. We also present some results that call into question\nthe statistical significance of large swings in expected price impact at long\ntimes."}, "authors": ["J. Doyne Farmer", "Austin Gerig", "Fabrizio Lillo", "Szabolcs Mike"], "author_detail": {"name": "Szabolcs Mike"}, "author": "Szabolcs Mike", "arxiv_comment": "10 pages, 4 figures", "links": [{"href": "http://arxiv.org/abs/physics/0602015v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/physics/0602015v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "physics.soc-ph", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "physics.soc-ph", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "q-fin.TR", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/physics/0602015v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/physics/0602015v1", "journal_reference": null, "doi": null, "fulltext": "Market efficiency and the long-memory of supply and demand: Is\nprice impact variable and permanent or fixed and temporary?\nJ. Doyne Farmer,1 Austin Gerig,2, 1 Fabrizio Lillo,3, 1 and Szabolcs Mike1, 4\n\narXiv:physics/0602015v1 [physics.soc-ph] 2 Feb 2006\n\n1 Santa\n\nFe Institute, 1399 Hyde Park Road, Santa Fe, NM 87501\nof Physics, University of Illinois at Urbana-Champaign,\n1110 West Green Street, Urbana, IL, 61801\n3 Dipartimento di Fisica e Tecnologie Relative,\nviale delle Scienze I-90128, Palermo, Italy\n4 Budapest University of Technology and Economics,\nH-1111 Budapest, Budafoki \u00fat 8, Hungary\n\n2 Department\n\nIn this comment we discuss the problem of reconciling the linear efficiency of price\nreturns with the long-memory of supply and demand. We present new evidence that\nshows that efficiency is maintained by a liquidity imbalance that co-moves with the\nimbalance of buyer vs. seller initiated transactions. For example, during a period\nwhere there is an excess of buyer initiated transactions, there is also more liquidity\nfor buy orders than sell orders, so that buy orders generate smaller and less frequent\nprice responses than sell orders. At the moment a buy order is placed the transaction\nsign imbalance tends to dominate, generating a price impact. However, the liquidity\nimbalance rapidly increases with time, so that after a small number of time steps it\ncancels all the inefficiency caused by the transaction sign imbalance, bounding the\nprice impact. While the view presented by Bouchaud et al. of a fixed and temporary\nbare price impact is self-consistent and formally correct, we argue that viewing this\nin terms of a variable but permanent price impact provides a simpler and more\nnatural view. This is in the spirit of the original conjecture of Lillo and Farmer, but\ngeneralized to allow for finite time lags in the build up of the liquidity imbalance\nafter a transaction. We discuss the possible strategic motivations that give rise to\nthe liquidity imbalance and offer an alternative hypothesis. We also present some\nresults that call into question the statistical significance of large swings in expected\nprice impact at long times.\n\nVI. Concluding remarks\n\nContents\n\nI. Introduction\n\n1\n\nAcknowledgments\n\nReferences and Notes\nII. Time dependence of the liquidity imbalance3\n\nIII. Liquidity imbalance vs. quote reversion5\n\nI.\n\n9\n9\n9\n\nINTRODUCTION\n\nThe fact that supply and demand fluctuations have long-memory, which was indepenIV. Statistical significance of long time behavior6\ndently discovered by Bouchaud et al. (2004)\nand Lillo and Farmer (2004), raises an apparent paradox about compatibility with market\nV. Strategic interpretation\n7 efficiency. The adage that buying drives the\n\n\f2\nprice up and selling drives it down is one of\nthe least controversial statements in finance.\nThe long-memory of supply and demand implies that there are waves of buyer-initiated\nor seller-initiated transactions that are highly\npredictable using a simple linear algorithm.\nAll else being equal, this suggests that price\nmovements should also be highly predictable.\nHowever, from an empirical point of view it\nis clear that this is not the case \u2013 price movements are essentially uncorrelated. How can\nthese two facts be reconciled?\nThe two original papers on this subject\noffered two different views to resolve the efficiency paradox. In an interesting paper\nBouchaud et al. (2004) offered the view that\none can think in terms of a bare propagator\nG0 (t\u2032 \u2212 t|V, \u01eb) that describes the impact of a\nprice change caused by a transaction of volume V and sign \u01eb at time t as it is felt at\ntime t\u2032 . The total price impact can be computed by summing up the bare propagators\nassociated with each transaction. They also\nassume that the bare impact G0 is fixed, in\nthe sense that it only depends on the signed\nvolume of the transaction and the time delay, and does not depend on other market\nproperties, such as liquidity. Given these assumptions, it is clear that the bare propagator has to be temporary, in the sense that it\ndecays to zero as t\u2032 \u2212 t \u2192 \u221e. To see this\nthink about a buy order placed at time t,\nand for simplicity let \u03c4 = t\u2032 \u2212 t. because of\nthe long-memory, Pb (\u03c4 )/Ps (\u03c4 ) \u223c \u03c4 \u2212\u03b3 , where\n0 < \u03b3 < 1 is the exponent for the asymptotic\ndecay of the autocorrelation function, Pb (\u03c4 )\nis the probability of a buyer initiated transaction at time t+\u03c4 , and Ps (\u03c4 ) is the probability\nof a seller initiated transaction at time t + \u03c4\n(and both are averaged over t)1 . Under their\nassumptions, to cancel out the inefficiency\ncaused by the long-memory of transactions\n1\n\nthe sum of all the bare propagators has to go\nto zero. Approximating the sum as an integral and taking into account the time decay\nof the long memory implies that asymptotically G0 (\u03c4 ) decays as G0 \u223c \u03c4 (1\u2212\u03b3)/2 .\n\nAn alternate point of view was given by\nLillo and Farmer (2004), who suggested that\nthis apparent paradox can be explained in\nterms of permanent price impacts whose size\ndepends on liquidity, where liquidity is defined as the price response to a transaction\nof a given size. The liquidity for buying and\nselling can be different, so that two orders\nof the same size but opposite sign may generate different average price responses. This\npoint of view was motivated by related work\nthat suggests that liquidity fluctuations play\nan essential role in price formation (Farmer\net al 2004, Weber and Rosenow 2004, Farmer\nand Lillo 2004, Lillo and Farmer 2005b, Gillemot, Farmer, and Lillo 2005). This body of\nwork demonstrates that the price response\nto transactions of the same size is highly\nvariable, and that in price formation liquidity fluctuations dominate over fluctuations in\ntransaction size. Given that liquidity varies\nwith time by many orders of magnitude, it is\nnot surprising that there can be imbalances\nbetween the liquidity of buying and selling of\nless than a factor of two. As we will see, this\nis all that is needed to maintain efficiency.\n\nIn Section 2.2 of \"Random walks, liquidity molasses, and critical response in financial markets\", Bouchaud, Kockelkoren and\nPotters (2004), hereafter called BKP, criticize one of the results of Lillo and Farmer\n(2004). This may be confusing since this result only appeared in the version originally\nposted on the archive and does not appear\nat all in the final published paper. The error\nin the original version was in the interpretation of an empirical result that suggested\nthat it was possible to remove the excess\nIt is possible to make more accurate predictions by price impact by the immediate formation of\nmaking use of a longer time history, as done in Lillo a liquidity imbalance (we will explain what\nand Farmer, but to be consistent with Bouchaud we mean by \"immediate\" more precisely in\net al. we will only consider lags of length one.\na moment). Lillo and Farmer thank Marc\n\n\f3\nPotters, who as referee was kind enough to\npoint out the error (and later became a nonanonymous). The published version of Lillo\nand Farmer removed this error and added a\nsection showing that immediate liquidity imbalances are large, even if they are not large\nenough to fully explain the efficiency paradox\nall by themselves. The \"liquidity molasses\"\npaper of BKP2 reflects a significant evolution in point of view from the earlier paper of\nBouchaud et al., which emphasized the role\nof mean-reverting quote changes and did not\nsay much about liquidity imbalance. In contrast, Figures 7 and 12 of Lillo and Farmer\ndemonstrated that it is liquidity imbalance,\nrather than mean-reverting price quotes, that\nis the key to efficiency. This is echoed in\nFigure 11 of BKP. We demonstrate this even\nmore graphically here.\nIn this comment we summarize some new\nresults that resolve this controversy by explicitly demonstrating how the liquidity imbalance co-varies in time with the long-memory\nof supply and demand, which we will refer to\nas the \"transaction imbalance\" (defined more\nprecisely later). Because the liquidity imbalance is initially weaker than the transaction\nimbalance, there is a initially a nonzero price\nimpact to a transaction. However, the liquidity imbalance associated with a transaction grows, and after a short time \u03c4c becomes\nlarge enough to quench any further growth in\nthe price response. For \u03c4 > \u03c4c the liquidity\nimbalance roughly matches the transaction\nimbalance, and the price impact remains constant. Our explanation is thus based on the\nview that price impacts are permanent but\nrequire some time to build after a transaction. While this is consistent with the formalism introduced by Bouchaud et al (2004), we\nthink that our view is simpler and more natural. By introducing time dependence, this\n2\n\nThe only caveat is that in Section 2.4 BKP assume\nthat liquidity imbalances are due to price manipulation by market makers; in Section V we suggest\nan alternative hypothesis that might cause this.\n\nview contains elements of the original proposals of both Bouchaud et al. and Lillo and\nFarmer.\nWe now explain our new results in more\ndetail.\n\nII.\n\nTIME DEPENDENCE OF THE\nLIQUIDITY IMBALANCE\n\nSuppose a transaction of a known sign \u01eb\noccurs at time t, where \u01eb = +1 for a buyer\ninitiated transaction and \u01eb = \u22121 for a seller\ninitiated transaction. Here and throughout\nthis comment t is measured in transaction\ntime, updated by one unit whenever a transaction occurs. The size of the expected price\nimpact at time t + T can be written as3\nE[r(T )\u01eb] =\n\nT\nX\n\n\u2206r(\u03c4 )\u01eb\n\n\u03c4 =0\nT\nX\n\n= \u01eb\n\n(1)\n\n[P+ (\u03c4 )R+ (\u03c4 ) + P\u2212 (\u03c4 )R\u2212 (\u03c4 )].\n\n\u03c4 =0\n\n\u2206r(\u03c4 )\u01eb is the increment by which the size of\nthe expected price impact increases at time\nt + \u03c4 . Throughout we will assume that all\nprice changes are measured as midprice log\nreturns, i.e. changes in the logarithm of the\naverage of the best quotes for buying and selling. By summing the log return increments\n\u2206r(\u03c4 )\u01eb we have defined them to be permanent (though of course positive increments at\nearlier times might be cancelled by negative\nincrements at later times). P+ (\u03c4 ) is the expected probability for the transaction at time\nt + \u03c4 to have sign \u01eb and R+ is the expected\nlog return for transactions at time t + \u03c4 with\nsign \u01eb. P\u2212 and R\u2212 have similar definitions\nbut with sign \u2212\u01eb.\n3\n\nE[r(T )\u01eb] is essentially the same as the average response function R(l) of BKP. The only difference\nis that we use log-returns rather than price differences.\n\n\f4\nThe condition that the price impact increases at time t + \u03c4 is \u2206r(\u03c4 )\u01eb > 0, which\ncan alternatively be written\nP+ (\u03c4 )\n\u2212R\u2212 (\u03c4 )\n<\n.\nR+ (\u03c4 )\nP\u2212 (\u03c4 )\n\n(2)\n\nWe will call the term on the right, which\nreflects the predictability of the transaction\nsigns, the transaction imbalance. Similarly,\nwe will call the term on the left, which reflects the asymmetry of the expected price\nresponse to buyer vs. seller initiated transactions, the return imbalance.\nTo understand the factors that influence\nthe return imbalance it is useful to decompose the expected return \u2206r(\u03c4 ) from directly\nbefore the transaction at time t+\u03c4 to directly\nbefore the transaction at time t + \u03c4 + 1 as4\n\u2206r(\u03c4 ) = \u2206rM (\u03c4 ) + \u2206rQ (\u03c4 ).\n\n(3)\n\n\u2206rM (\u03c4 ) is the component of the return that\nis immediately caused by the receipt of the\norder that initiates the transaction, while\n\u2206rQ (\u03c4 ) is everything else, i.e. it includes\nall changes due to cancellations, or to limit\norders that do not cause immediate transactions. We can similarly decompose R+ (\u03c4 ) =\nM+ (\u03c4 )+Q+ (\u03c4 ) and R\u2212 (\u03c4 ) = M\u2212 (\u03c4 )+Q\u2212 (\u03c4 ).\nWe will call the ratio \u2212M\u2212 (\u03c4 )/M+ (\u03c4 ) the liquidity imbalance. This makes the term originally introduced by Lillo and Farmer more\nprecise. As we will demonstrate in the next\nsection, \u2212R+ (\u03c4 )/R\u2212 (\u03c4 ) \u2248 \u2212M\u2212 (\u03c4 )/M+ (\u03c4 )\nfor large values of \u03c4 , so that the return imbalance is fairly well approximated by the liquidity imbalance.\nIn Figure 1 we compare the transaction\nimbalance, return imbalance, and liquidity\nimbalance, using data from the on-book market of the London Stock Exchange for the\nstock Astrazeneca during the period 20002002. Here and in the following analyses the\n4\n\nFIG. 1: A comparison of the transaction imbalance P+ (\u03c4 )/P\u2212 (\u03c4 ) (blue circles), return imbalance \u2212R\u2212 /R+ (red\ndown triangles), and liquidity imbalance \u2212M\u2212 (\u03c4 )/M+ (\u03c4 ) (green up triangles), for the stock Astrazeneca based\non on-book data from 2000\u22122002. Note\nthat we have excluded values at \u03c4 = 0,\nwhere they diverge or are undefined; the\npeaks occur at \u03c4 = \u22121.\n\ntime \u03c4 is measured in number of transactions,\nrather than in real time. The transaction imbalance reaches a peak just before and after\nthe transaction, and is roughly symmetric for\npositive and negative values of \u03c4 . The transaction imbalance is not defined for \u03c4 = 0 and\nthe slow decay of transaction imbalance is\ndue to the long memory of order sign. For\nnegative values of \u03c4 the return imbalance\nrises even more than the transaction imbalance, drops immediately after the transaction, and then builds up again. The liquidity\nimbalance behaves similarly but overshoots\nand becomes negative at small positive values of \u03c4 and then responds more slowly, so\nthat after \u03c4c \u2248 40 it is roughly equal to the\ntransaction imbalance (and the return imbalance).\nThis result can be interpreted as follows.\nPrior to the transaction there is a buildup\nof the liquidity imbalance, which is amplified\nThis was originally done in Equation (12) of Lillo by direct movement of quotes. Immediately\nand Farmer, and is also equivalent to Equation (12) after the transaction the liquidity at the opposite best price is depleted by the transacof BKP.\n\n\f5\n\nFIG. 2: A comparison of \u2206r(\u03c4 ) (black\ndown triangles), \u2206rM (\u03c4 ) (blue circles)\nand \u2206rQ (\u03c4 ) (green crosses) for the stock\nAstrazeneca based on on-book data\nfrom 2000 \u2212 2002. Returns are in units\nof the average spread, which is 0.00154\nin logarithmic price.\n\ntion, so that the liquidity imbalance dips below one. This means that the price impact is\nactually amplified by the liquidity imbalance.\nHowever, the depth of orders at the opposite\nbest price immediately builds, and the liquidity imbalance quickly rises above one. Even\nthough orders of the same sign continue to\nbe more frequent, their impact is blunted by\nthe buildup of liquidity at the opposite best.\nAfter about 40 transactions this buildup becomes sufficiently strong so that the imbalance of signs is cancelled by the asymmetry\nin the price response.\nIII.\n\nLIQUIDITY IMBALANCE VS.\nQUOTE REVERSION\n\nFIG. 3: A comparison of cumulative\nprice impacts when different effects are\nincluded. RN (T ) (red up triangles) is\nthe naive cumulative price impact calculated as a sum of fixed price impacts with no liquidity variation and\nno variable quote updating. RLC (T )\n(green crosses) includes the effect of\nnon-transaction driven quote changes\nbut does not include fluctuating liquidity. RF L (T ) (blue circles) includes\nthe effect of the liquidity imbalance,\nwithout including any effect of nontransaction driven quote changes. Finally, R(T ) (black down triangles) corresponds to the real cumulative price\nimpact. All results are for the stock\nVodafone Group based on the on-book\ndata from 2000 \u2212 2002. Returns are\nin units of the average spread, which\nis approximately 0.00246 in logarithmic\nprice.\n\nabove zero, which pushes prices further from\nefficiency, but eventually does turn negative\nand helps to mean-revert the price. This effect is relatively small, however, and is not\nconsistent across stocks, as we show in a moment for Vodafone - where \u2206rQ has an overall\neffect of making prices less efficient.\n\nTo make the time dynamics of the price\nimpact more clear, in Figure 2 we show\n\u2206r(\u03c4 ), \u2206rM (\u03c4 ) and \u2206rQ (\u03c4 ) as a function\nof time. This shows that price efficiency\nis mainly the result of the liquidity imbalance and not mean-reverting quote changes.\nIn Figure 3 we present cumulative price\n\u2206r(\u03c4 ) quickly approaches zero due mainly to impacts for Vodafone rather than Asthe quick decay of \u2206rM (\u03c4 ), which is a result trazeneca. We show four different curves.\nof the liquidity imbalance. \u2206rQ (\u03c4 ) begins The first of these (red up triangles) shows\n\n\f6\nthe naive cumulative\nprice impact,\nP defined as\nP\nRN (T ) = T\u03c4=0 \u2206rN (\u03c4 ) = R0 T\u03c4=0 [P+ (\u03c4 ) \u2212\nP\u2212 (\u03c4 )], where R0 is a constant, the average unconditional absolute midprice impact\nmeasured from immediately before to immediately after a transaction. This amounts\nto assuming that there is no fluctuating liquidity and no non-transaction driven quote\nchanges \u2013 as each transaction arrives it gives\nthe price a kick, whose size is independent\nof time and equal to the average value. The\nsecond curve (green crosses) adds the quote\nchanging effects of P\nlimit orders and cancellations, RLC (T ) = T\u03c4=0 [\u2206rN (\u03c4 ) + \u2206rQ (\u03c4 )].\nThis would be observed if all transactions had\nimpact R0 and non-transaction driven quote\nchanges occurred as usual. Bouchaud et al\noriginally conjectured that non-transaction\ndriven quote changes play a major role in\nmean reverting prices. We see that in this\ncase they actually have the opposite effect \u2013 they increase rather than decrease\nthe cumulative expected return. The third\ncurve (blue circles) shows the cumulative\nprice impact if only the effects of fluctuating liquidity on transaction\nimpacts are\nPT\nAll\nincluded, RF L (T ) =\n\u03c4 =0 \u2206rM (\u03c4 ).\nnon-transaction driven quote changes are excluded. In this case the return is actually more efficient than the true cumulative\nprice impact (black down triangles), R(T ) =\nPT\nPT\n\u03c4 =0 [\u2206rM (\u03c4 ) + \u2206rQ (\u03c4 )]. For\n\u03c4 =0 \u2206r(\u03c4 ) =\nAstrazeneca we observe the opposite behavior, i.e. for \u03c4 larger than 20 transactions RLC\nis smaller than RN and RF L is larger than\nthe true cumulative impact R. However the\neffect of non-transaction driven quotes is generally very small, as originally demonstrated\nby Lillo and Farmer5 .\n\nder impacts. In other results that we do not\ndescribe here, we find that the liquidity imbalance is the dominant effect. We also find\nthat the imbalance in market order impacts\nis largely driven by an imbalance in the frequency with which transactions cause nonzero returns, rather than asymmetric variations in the size of the returns. We intend to\nreport these results in more detail in a future\npaper (Farmer et al., 2006).\nIV.\n\nSTATISTICAL SIGNIFICANCE\nOF LONG TIME BEHAVIOR\n\nOne of the reasons that Bouchaud et al.\nargued that the bare impact must be temporary was the observation of mean reversion of\nprice impact at very long times. In the range\n1000 < T < 5000, they sometimes observe\nthat price impact becomes close to zero or\neven becomes negative, while in other cases it\nincreases dramatically. They argue that this\nreflects fluctuations in the balance between\nliquidity taking and liquidity providing \u2013 in\nsome stocks and in some periods the liquidity providers are stronger, and in others the\nliquidity demanders are stronger.\nA key issue that is not properly addressed\nis statistical significance. Are these deviations real, or are they just statistical fluctuations, causing random variations from stock\nto stock? In Figure 10 of Bouchaud et al.\nthere are error bars on the price impact,\nwhich appear to indicate that the reversion\nof the impact that is empirically observed is\nstatistically significant. However, these are\nbased on standard errors. This can be problematic when long-memory is a possibility, in\nwhich case under the assumption of a norIn this section and throughout the com- mal distribution the one standard deviation\nment we have assumed that the imbalance errors are of size\nin market order impacts is due only to the\n\u03c3\nliquidity imbalance, but this is not entirely\n(4)\nE \u2248 (1\u2212H) ,\nn\ntrue. An imbalance in transaction volumes\ncan also cause an imbalance in market or- where n is the number of non-overlapping ob5\n\nSee figures 7 and 12.\n\nservations, H = 1 \u2212 \u03b3/2 is the Hurst exponent, and \u03c3 is the standard deviation of\n\n\f7\nthe random process (Beran, 1994). When\nH = 1/2 this reduces to the expression for\nstandard error, but when H > 1/2 there is\nlong-memory and errors can be much larger\nthan one might naively expect. Volatility\nis a long-memory process with Hurst exponents in the neighborhood of H \u2248 0.75 (Gillemot, Farmer, and Lillo, 2005). Thus, errors\ndecrease roughly as the fourth root rather\nthan the square root of the number of nonoverlapping observations.\nThis problem is compounded by the fact\nthat the increments of the response function\nare overlapping. Thus, in a data series with\na million points, at lags of T = 1000 there\nare only 1000 non-overlapping intervals. To\navoid crossing daily boundaries Bouchaud et\nal and BKP only used events within the same\nday, which decreases the number of independent intervals for large values of T even\nmore. Because of the overlapping intervals\nand long-memory effects, errors at nearby\ntimes are highly correlated \u2013 once the price\nimpact function becomes large (or small), it\nis likely to remain so for some time simply\nbecause of the correlated errors.\nProperly resolving the question of whether\nor not the large excursions of the price impact at long times are statistically significant\nis a difficult job that is beyond the scope\nof this comment. But just to illustrate the\nproblem, in Figure 4 we make a crude estimate of error bars for the price impact. We\ndo this by measuring the standard deviation\n\u03c3(T ) of impacts at several different time intervals T and estimating the one standard\ndeviation statistical error using Equation 4.\nThe number of non-overlapping intervals is\nn = N/T , where N is the total number of\npoints in the data set. Because the standard\n\u221a\ndeviation of the impact grows roughly as T ,\nthe error bars therefore grow roughly as T 3/2 .\nAs a result, at T \u2248 100 the error bars become bigger than the estimated values. The\nfigure also shows the error bars computed assuming standard errors, i.e. H = 1/2. In\nthis case the error bars are smaller than the\n\nFIG. 4: A crude estimate of the statistical errors in the price impact at different times for Astrazeneca based on\nthe on-book data for 2000-2002 based\non equation 4 (triangle up). The circles are the estimated mean impact. For\ncomparison the figure shows also standard errors (triangle down). Returns\nare shown in units of the average spread.\n\nmean values. This procedure is crude \u2013 it assumes normality, which is a poor assumption\nfor price impacts, and the use of overlapping\nintervals should give a somewhat more accurate estimate than this procedure would indicate. But at least it takes long-memory into\naccount, and it indicates that a more careful study is needed to determine whether the\ndivergences in the price impact observed at\nlong times by Bouchaud et al and BKP are\nstatistical fluctuations.\n\nV.\n\nSTRATEGIC INTERPRETATION\n\nWhile the discussion in Sections 2 and\n3 gives insight into how efficiency is maintained, it does not address the strategic motivations for why it is maintained. Is the motive profit seeking, liquidity demanding, risk\nreduction, or is there some other cause? If it\nis profit seeking, then what kind of strategy\ncauses the inefficiency to be removed? For example, suppose there is a buying wave. We\nhave demonstrated that the main force stop-\n\n\f8\nping a run up in prices is the rapid formation\nof a liquidity imbalance. Is this imbalance\ncreated intentionally by market makers, or is\nit a side effect of some other behavior?\nBouchaud et al and BKP speculate that\nthis is due to intentional controlling of prices\nby market makers. We fully agree that longmemory is bad news for market makers, but\nwhether they can solve it by controlling the\nprice is not so obvious. The main reasons\nfor our skepticism are inventory control and\nthe need for cooperative behavior if market making is competitive. When a buying\nwave occurs, to keep the price from rising by\nmaintaining a liquidity imbalance the market\nmakers must sell and thereby absorb most\nof the buying wave themselves. This causes\nthem to accumulate a negative inventory. To\nflatten this inventory they eventually have to\nbuy, which will tend to drive the price up.\nAlternatively, they might wait for the next\nselling wave, but this could be a long time\ncoming \u2013 once in a buying wave, because of\nthe long-memory, the most likely future is\nmore buying waves. Also, it might not match\nthe previous buying wave in size, still leaving\nthem with a net negative inventory. In a competitive market making situation (which exists for both the London and Paris Stock Exchanges), inventory constraints gives strong\nincentives for market makers to try to free\nride on each other. Once they have fulfilled\ntheir inventory goals, free riders will back\ntheir quotes off to let someone else absorb the\nrest of the dangerous negative inventory. It\nseems that the Nash equilibrium would be for\neveryone to defect. Taken together, these issues could make it difficult for market makers\nto control the price, particularly in a competitive situation.\nAn alternate hypothesis is that liquidity providing and liquidity taking are selfreinforcing. Liquidity is not only provided\nby market makers \u2013 it is also provided by directional traders who are simply more patient\nthan their liquidity taking cousins. By directional trader we mean someone who at any\n\ngiven time either wants to buy or wants to\nsell but never wants to do both. Because they\nare more patient they use limit orders, but to\navoid broadcasting their true intentions they\nonly place orders of a size that they think\nthe market can absorb, and place new orders\nonly after their existing orders are hit. When\nthe patient sellers observe an impatient buying wave of liquidity takers, they increase the\nsize of their sell orders and replace them more\nfrequently. The impatient buyers see the resulting increase in liquidity, which stimulates\nthem to submit more market orders. This\ngives rise to bi-directional causality \u2013 buy liquidity taking causes sell liquidity providing,\nand sell liquidity providing causes buy liquidity taking (and similarly with buying and\nselling reversed). This scenario is indirectly\nsuggested by the lack of a clear lead-lag relationship between liquidity taking and liquidity providing in Figure 1. The key difference is that under this scenario the inventory\nswings are absorbed by traders who want to\nabsorb them, rather than by market makers\nwho may not want to absorb them if they are\ntoo large. Market makers will participate in\nliquidity provision to the extent that it conforms to their inventory constraints, but hide\nbehind directional liquidity providers when it\ndoes not.\n\nSuch bursts of buying and selling may be\ntriggered by the occurrence of large hidden\norders, according to the theory developed\nby Lillo, Mike and Farmer (2005). When\ntraders receive large hidden orders, some may\nchoose to execute them via a sequence of\nsmaller limit orders and some via a sequence\nof smaller market orders. In either case, under this scenario such a hidden order will trigger a response of other hidden orders of the\nopposite sign and opposite liquidity type, amplifying the exogenous input of large hidden\norders.\n\n\f9\nVI.\n\nCONCLUDING REMARKS\n\nWe have demonstrated that efficiency in\nthe face of long-memory in transaction signs\nis maintained by the creation of a liquidity imbalance that asymmetrically alters the\nexpected return triggered by a transaction.\nThis liquidity imbalance takes a fairly short\ntime to build up \u2013 for the cases we have observed here most of the build up happens\nin about 5 transactions (on average a few\nminutes for Astrazeneca), and the build up\nis completed by about 40 transactions (on\naverage about 25 minutes for Astrazeneca).\nAs a result the price impact rises to roughly\n0.25 \u2212 0.3 of the average spread and then\nlevels out. Under this view, price impact is\nvariable and permanent. When a transaction\nhappens, it affects the next 40 or so transactions by building up their liquidity, until the\nliquidity imbalance matches the transaction\nimbalance, and after that the two move in\ntandem. This generalizes the proposal originally made by Lillo and Farmer by allowing\nsome time (but not much) for the growth of\nthe liquidity imbalance.\nThe fixed bare propagator approach of\nBouchaud et al does not formally contradict\nthis view \u2013 in fact in BKP they more or less\nembrace it. However, to us this interpretation does not seem to arise naturally from\n\n[1] J. Beran. Statistics for Long-Memory Processes. Chapman & Hall, New York, 1994.\n[2] J-P. Bouchaud, Y. Gefen, M. Potters, and\nM. Wyart. Fluctuations and response in financial markets: The subtle nature of \"random\" price changes. Quantitative Finance,\n4(2):176\u2013190, 2004.\n[3] J-P. Bouchaud, J. Kockelkoren, and\nM. Potters. Random walks, liquidity molasses and critical response in financial markets, Quantitative Finance (in press), eprint cond-mat/0406224, 2004.\n[4] J. D. Farmer, L. Gillemot, F. Lillo, S. Mike,\n\ntheir formalism. By proposing a bare propagator that is fixed, their phenomenological\ntheory requires that it be temporary in order\nto eventually blunt the growth of the price\nimpact. This is formally correct \u2013 once the\nliquidity imbalance is set up, for \u03c4 > \u03c4c the\ntime decay of the bare propagator is needed\nto match the time decay of the transaction\nimbalance. We think that the results we have\npresented here shows that it is simpler and\nmore natural to think in terms of a permanent but variable impact function. This is\nperhaps just a matter of taste \u2013 one can think\nabout this phenomenon in either way. In any\ncase, in this comment we have presented some\nnew results that make the explicit mechanisms that enforce market efficiency clearer.\n\nAcknowledgments\n\nWe would like to thank Barclay's Bank\nfor supporting this research. F.L acknowledges partial support from MIUR research\nproject \" Dinamica di altissima frequenza\nnei mercati finanziari\", MIUR-FIRB research project RBNE01CW3M and NESTDYSONET 12911 EU project. We would also\nlike to thank J-P. Bouchaud and Marc Potters for useful discussions.\n\nand A. Sen. What really causes large price\nchanges? Quantitative Finance, 4(4):383\u2013\n397, 2004.\n[5] J. D. Farmer and F. Lillo. On the origin of\npower laws in financial markets. Quantitative Finance, 314:7\u201310, 2004.\n[6] J.D. Farmer, A. Gerig, F. Lillo, and\nS. Mike. Reconciling market efficiency with\nthe long-memory of supply and demand,\n2006.\n[7] Laszlo Gillemot, J. Doyne Farmer, and Fabrizio Lillo. There's more to volatility than\nvolume, e-print physics/0510007, 2005.\n\n\f10\nory for long memory in supply and demand.\n[8] F. Lillo and J. D. Farmer. The long memory\nPhysical Review E, 7106(6 pt 2):287\u2013297,\nof the efficient market. Studies in Nonlinear\n2005.\nDynamics & Econometrics, 8(3), 2004.\n[9] F. Lillo and J. D. Farmer. The key role of [11] P. Weber and B. Rosenow. Large stock\nprice changes: volume or liquidity?, e-print\nliquidity fluctuations in determining large\ncond-mat/0401132, 2004.\nprice fluctuations. Fluctuations and Noise\nLetters, 5:L209\u2013L216, 2005.\n[10] F. Lillo, S. Mike, and J. D. Farmer. The-\n\n\f"}