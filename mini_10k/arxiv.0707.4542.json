{"id": "http://arxiv.org/abs/0707.4542v1", "guidislink": true, "updated": "2007-07-31T06:30:27Z", "updated_parsed": [2007, 7, 31, 6, 30, 27, 1, 212, 0], "published": "2007-07-31T06:30:27Z", "published_parsed": [2007, 7, 31, 6, 30, 27, 1, 212, 0], "title": "Structural properties of proportional fairness: stability and\n  insensitivity", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0707.3692%2C0707.1624%2C0707.0323%2C0707.1316%2C0707.4476%2C0707.3607%2C0707.3473%2C0707.4426%2C0707.1314%2C0707.4035%2C0707.3104%2C0707.3523%2C0707.4267%2C0707.3674%2C0707.4216%2C0707.0288%2C0707.2979%2C0707.1767%2C0707.0157%2C0707.2717%2C0707.4313%2C0707.2301%2C0707.3439%2C0707.0328%2C0707.3252%2C0707.0909%2C0707.3711%2C0707.3635%2C0707.3816%2C0707.2233%2C0707.2516%2C0707.4187%2C0707.0336%2C0707.0309%2C0707.1545%2C0707.3755%2C0707.2286%2C0707.1153%2C0707.3515%2C0707.0160%2C0707.4501%2C0707.3353%2C0707.4109%2C0707.2722%2C0707.0996%2C0707.0929%2C0707.0647%2C0707.4197%2C0707.0606%2C0707.1610%2C0707.0021%2C0707.4325%2C0707.0862%2C0707.1932%2C0707.4213%2C0707.3967%2C0707.2910%2C0707.4520%2C0707.3579%2C0707.0351%2C0707.3206%2C0707.1520%2C0707.1823%2C0707.4093%2C0707.0398%2C0707.3492%2C0707.0934%2C0707.3164%2C0707.3326%2C0707.4193%2C0707.1143%2C0707.4356%2C0707.0850%2C0707.3349%2C0707.2976%2C0707.2805%2C0707.1068%2C0707.0153%2C0707.2227%2C0707.1688%2C0707.2474%2C0707.3158%2C0707.1139%2C0707.4321%2C0707.3247%2C0707.2062%2C0707.0745%2C0707.4541%2C0707.4007%2C0707.3497%2C0707.1318%2C0707.0430%2C0707.3169%2C0707.1633%2C0707.0954%2C0707.0629%2C0707.0998%2C0707.2562%2C0707.4542%2C0707.3619%2C0707.0514&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Structural properties of proportional fairness: stability and\n  insensitivity"}, "summary": "In this article we provide a novel characterization of the proportionally\nfair bandwidth allocation of network capacities, in terms of the\nFenchel--Legendre transform of the network capacity region. We use this\ncharacterization to prove stability (i.e., ergodicity) of network dynamics\nunder proportionally fair sharing, by exhibiting a suitable Lyapunov function.\nOur stability result extends previously known results to a more general model\nincluding Markovian users routing. In particular, it implies that the stability\ncondition previously known under exponential service time distributions remains\nvalid under so-called phase-type service time distributions. We then exhibit a\nmodification of proportional fairness, which coincides with it in some\nasymptotic sense, is reversible (and thus insensitive), and has explicit\nstationary distribution. Finally we show that the stationary distributions\nunder modified proportional fairness and balanced fairness, a sharing criterion\nproposed because of its insensitivity properties, admit the same large\ndeviations characteristics. These results show that proportional fairness is an\nattractive bandwidth allocation criterion, combining the desirable properties\nof ease of implementation with performance and insensitivity.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0707.3692%2C0707.1624%2C0707.0323%2C0707.1316%2C0707.4476%2C0707.3607%2C0707.3473%2C0707.4426%2C0707.1314%2C0707.4035%2C0707.3104%2C0707.3523%2C0707.4267%2C0707.3674%2C0707.4216%2C0707.0288%2C0707.2979%2C0707.1767%2C0707.0157%2C0707.2717%2C0707.4313%2C0707.2301%2C0707.3439%2C0707.0328%2C0707.3252%2C0707.0909%2C0707.3711%2C0707.3635%2C0707.3816%2C0707.2233%2C0707.2516%2C0707.4187%2C0707.0336%2C0707.0309%2C0707.1545%2C0707.3755%2C0707.2286%2C0707.1153%2C0707.3515%2C0707.0160%2C0707.4501%2C0707.3353%2C0707.4109%2C0707.2722%2C0707.0996%2C0707.0929%2C0707.0647%2C0707.4197%2C0707.0606%2C0707.1610%2C0707.0021%2C0707.4325%2C0707.0862%2C0707.1932%2C0707.4213%2C0707.3967%2C0707.2910%2C0707.4520%2C0707.3579%2C0707.0351%2C0707.3206%2C0707.1520%2C0707.1823%2C0707.4093%2C0707.0398%2C0707.3492%2C0707.0934%2C0707.3164%2C0707.3326%2C0707.4193%2C0707.1143%2C0707.4356%2C0707.0850%2C0707.3349%2C0707.2976%2C0707.2805%2C0707.1068%2C0707.0153%2C0707.2227%2C0707.1688%2C0707.2474%2C0707.3158%2C0707.1139%2C0707.4321%2C0707.3247%2C0707.2062%2C0707.0745%2C0707.4541%2C0707.4007%2C0707.3497%2C0707.1318%2C0707.0430%2C0707.3169%2C0707.1633%2C0707.0954%2C0707.0629%2C0707.0998%2C0707.2562%2C0707.4542%2C0707.3619%2C0707.0514&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "In this article we provide a novel characterization of the proportionally\nfair bandwidth allocation of network capacities, in terms of the\nFenchel--Legendre transform of the network capacity region. We use this\ncharacterization to prove stability (i.e., ergodicity) of network dynamics\nunder proportionally fair sharing, by exhibiting a suitable Lyapunov function.\nOur stability result extends previously known results to a more general model\nincluding Markovian users routing. In particular, it implies that the stability\ncondition previously known under exponential service time distributions remains\nvalid under so-called phase-type service time distributions. We then exhibit a\nmodification of proportional fairness, which coincides with it in some\nasymptotic sense, is reversible (and thus insensitive), and has explicit\nstationary distribution. Finally we show that the stationary distributions\nunder modified proportional fairness and balanced fairness, a sharing criterion\nproposed because of its insensitivity properties, admit the same large\ndeviations characteristics. These results show that proportional fairness is an\nattractive bandwidth allocation criterion, combining the desirable properties\nof ease of implementation with performance and insensitivity."}, "authors": ["Laurent Massouli\u00e9"], "author_detail": {"name": "Laurent Massouli\u00e9"}, "author": "Laurent Massouli\u00e9", "links": [{"title": "doi", "href": "http://dx.doi.org/10.1214/105051606000000907", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/0707.4542v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/0707.4542v1", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "Published at http://dx.doi.org/10.1214/105051606000000907 in the\n  Annals of Applied Probability (http://www.imstat.org/aap/) by the Institute\n  of Mathematical Statistics (http://www.imstat.org)", "arxiv_primary_category": {"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.PR", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "60K25, 68M20, 90B15 (Primary)", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/0707.4542v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/0707.4542v1", "journal_reference": "Annals of Applied Probability 2007, Vol. 17, No. 3, 809-839", "doi": "10.1214/105051606000000907", "fulltext": "The Annals of Applied Probability\n2007, Vol. 17, No. 3, 809\u2013839\nDOI: 10.1214/105051606000000907\nc Institute of Mathematical Statistics, 2007\n\narXiv:0707.4542v1 [math.PR] 31 Jul 2007\n\nSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS:\nSTABILITY AND INSENSITIVITY\nBy Laurent Massouli\u00e9\nThomson Paris Research Lab\nIn this article we provide a novel characterization of the proportionally fair bandwidth allocation of network capacities, in terms of\nthe Fenchel\u2013Legendre transform of the network capacity region. We\nuse this characterization to prove stability (i.e., ergodicity) of network\ndynamics under proportionally fair sharing, by exhibiting a suitable\nLyapunov function. Our stability result extends previously known results to a more general model including Markovian users routing. In\nparticular, it implies that the stability condition previously known\nunder exponential service time distributions remains valid under socalled phase-type service time distributions.\nWe then exhibit a modification of proportional fairness, which\ncoincides with it in some asymptotic sense, is reversible (and thus\ninsensitive), and has explicit stationary distribution. Finally we show\nthat the stationary distributions under modified proportional fairness and balanced fairness, a sharing criterion proposed because of\nits insensitivity properties, admit the same large deviations characteristics.\nThese results show that proportional fairness is an attractive bandwidth allocation criterion, combining the desirable properties of ease\nof implementation with performance and insensitivity.\n\n1. Introduction. The abstract network bandwidth allocation (NBA) problem can be formulated as follows. A network supports connections of distinct\ntypes, indexed by r, the index r spanning the set of types R, assumed finite.\nGiven the number xr of users of each type r \u2208 R, with xr \u2208 N, the problem\nis to determine the total capacity allocated to type r users, denoted be \u03bbr ,\nwith \u03bbr \u2208 R+ . The quantity \u03bbr represents the rate at which data is received\ncollectively by all users of type r. The allocation vector \u03bb := {\u03bbr }r\u2208R is\n|R|\nconstrained to lie in a set C \u2282 R+ .\nReceived September 2005; revised October 2006.\nAMS 2000 subject classifications. 60K25, 68M20, 90B15.\nKey words and phrases. Ergodicity, insensitivity, fairness, network bandwidth sharing.\n\nThis is an electronic reprint of the original article published by the\nInstitute of Mathematical Statistics in The Annals of Applied Probability,\n2007, Vol. 17, No. 3, 809\u2013839. This reprint differs from the original in pagination\nand typographic detail.\n1\n\n\f2\n\nL. MASSOULI\u00c9\n\nFig. 1.\n\nExample of a two-link network supporting three types of users.\n\nThe set C is a suitable abstraction of all the physical capacity constraints\nof the actual network under consideration. An example of a two-link network\nis represented in Figure 1. This network supports three types of users, data\ndestined to type-1 users going through link 1 only, data to type-2 users going\nthrough link 2 only, while data for type-3 users goes through the two links.\nThus, when the two links have unit capacities, the corresponding set C is\ngiven by {\u03bb \u2208 R3+ : \u03bbi + \u03bb3 \u2264 1, i = 1, 2}. This example can be extended to\nthe case where the network consists of an arbitrary number of links, and\nuser types r are characterized by collections of links used by data destined\nto them. Denoting by L the collection of links, and by cl the capacity of link\nl \u2208 L, the corresponding network capacity region then takes the form\nC=\n\n(\n\n\u03bb \u2208 RR\n+:\n\nX\n\n)\n\nAlr \u03bbr \u2264 cl , l \u2208 L ,\n\nr\u2208R\n\nwhere Alr equals 1 or 0 according to whether type-r users require capacity\nat link l or not. Such types of capacity constraints have been considered for\ninstance in [13, 14], as suitable models of wired networks with fixed routing\nsuch as the Internet, the matrix A then reflecting the route that data of\nusers of given type follows through the network. More general polyhedral\ncapacity sets C arise when users of a given type r can send data along several\ndistinct routes through the network. Yet more general, nonpolyhedral (albeit\nstill convex) capacity sets can adequately model the impact of interferences\nbetween data transmissions of distinct types in wireless networks; see [4] for\nsuch examples.\nIn the present work we only require the set C to be convex, and nonincreas\u2032\ning, that is to say, for any two vectors \u03bb, \u03bb\u2032 \u2208 RR\n+ such that \u03bbr \u2264 \u03bbr , r \u2208 R,\nthen \u03bb belongs to C whenever \u03bb\u2032 does. These two assumptions are met in all\nthe examples above mentioned.\nMo and Walrand [19] introduced the following criterion for determining the allocation vector \u03bb. Given weights wr > 0, and a parameter \u03b1 \u2265 0,\nthe so-called (w, \u03b1)-fair allocation vector is the solution to the optimization\nproblem\n(1)\n\nmax\n\u03bb\u2208C\n\nX\n\nr\u2208R\n\nxr Ur (\u03bbr /xr ),\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n3\n\nwhere\n(2)\n\nUr (y) =\n\n( wr\n\ny 1\u2212\u03b1 ,\n1\u2212\u03b1\nwr log(y),\n\nif \u03b1 6= 1,\nif \u03b1 = 1.\n\nThis parametric family of allocation criteria contains the so-called proportional fairness criterion, introduced by Kelly [13], which corresponds to the\nspecial case \u03b1 = 1 and wr \u2261 1. In the limit \u03b1 \u2192 \u221e, the (w, \u03b1)-fair allocation\ncoincides with the so-called max-min fair allocation (see [2] for a definition).\nThe rationale for proportional fairness, as explained in [13], lies in the\nfollowing desirable decomposition property. Assume that the ultimate goal\nof bandwidth allocation is to maximize the sum of utility functions, Ur , of\nthe rates \u03bbr /xr allocated to users of class r, exactly as in equation (1), these\nutility functions being known to the users but not to the network. Then the\ndecomposition result of [13] states that this can be done by letting on the\none hand the network allocate bandwidth according to proportional fairness, with weights wr specified by the network users, and on the other hand\nthe network users selecting these weights wr appropriately, given their (privately known) utility functions Ur , and the network allocation in response\nto distinct weights wr .\nAlternatively, the unweighted proportional fairness allocation arises naturally from results in bargaining theory, in contrast to the above justifications\nbased on microeconomic theory. Indeed, the results of Stefanescu and Stefanescu [27] (see also [17] for further discussion) imply that it is the only\nallocation of bandwidth that satisfies four natural axioms introduced by\nNash [20] (namely, invariance with respect to affine utility transformations,\nPareto optimality, independence of irrelevant alternatives, and symmetry),\nassuming that users' utility is a linear function of the rate they receive. (Note\nthe difference with the previous microeconomic framework, which allowed\narbitrary concave utility functions.) It is in fact the natural extension of\nNash's bargaining solution, originally derived in the special context of two\nusers, to an arbitrary number of users.\nThe rationales for candidate NBA solutions we have just reviewed originate from microeconomic theory of utility, and game (bargaining) theory,\nand assume a static set of network users. There is another line of approach\nto the NBA problem, which is essentially motivated by performance issues\nin a dynamic setting.\nSpecifically, assume that network users arrive and leave the system, the\narrivals of type r users being at the instants of a Poisson process of rate \u03bdr .\nAssume further that users remain in the system until they have transferred\na file of a given size, files associated with type r users being exponentially\ndistributed with parameter \u03bcr . The state variable x = {xr }r\u2208R is then a\n\n\f4\n\nL. MASSOULI\u00c9\n\nMarkov process, with nonzero transition rates\n(3)\n\nxr \u2192 xr + 1\n\nwith rate \u03bdr ,\n\nxr \u2192 xr \u2212 1\n\nwith rate \u03bcr \u03bbr .\n\nA suitable rationale for selecting a NBA is to guarantee desirable properties\nof the above Markov process. One such property is stability (or equivalently,\nergodicity), as it in turn implies that sojourn times of users are almost surely\nfinite. Ergodicity cannot be guaranteed for all sets of traffic parameters \u03bdr ,\n\u03bcr and network capacity sets C. In particular, letting \u03c1r := \u03bdr /\u03bcr denote the\nload brought by type r-users, when the vector \u03c1 = {\u03c1r }r\u2208R does not belong\nto the capacity set C, the process cannot be ergodic (for a proof, see, e.g., [4]).\nWhen \u03c1 is on the boundary of C, Kelly and Williams [15] have established\nthat the process cannot be positive recurrent, for sets C corresponding to\nwired networks with fixed routes. Their proof extends to the case of general\nconvex nonincreasing capacity sets C with minor modifications.\nA reasonable performance requirement is thus that, provided the traffic\n\u25e6\nintensity vector \u03c1 lies in the interior C of C, then the above Markov process is\nergodic. Such a property is in fact satisfied for all (w, \u03b1)-fair bandwidth allocation criteria, as follows from the Lyapunov function-based stability proof\nof Bonald and Massouli\u00e9 [3] (see also de Veciana, Lee and Konstantopoulos [10] who first established the result for the case of max-min fairness,\nYe [29] and Key and Massouli\u00e9 [16] for an extension to more general utility\nfunctions Ur in the allocation definition (1)).\nThus, the requirement of achieving ergodicity for the largest possible set\nof traffic intensity vectors \u03c1, being met by all (w, \u03b1)-fair NBA, does not\ndistinguish one such criterion as superior to the others.\nA more stringent requirement has been suggested by Bonald and Prouti\u00e8re\n[5], namely that not only the stability region (defined to be the set of vectors \u03c1 such that the system is ergodic) be maximal, but also that the corresponding Markov process be insensitive to the distribution of sizes of the\nfiles transferred by each class of users. Roughly speaking, insensitivity means\nthat the stationary distribution of the numbers of users in the system is unaffected if the service time distributions are modified, provided their mean\nis left unchanged. For characterizations of insensitive systems, we refer the\nreader to Schassberger [25] and references therein. In particular, it holds\nthat, when service rate to users of one type is shared equally among such\nusers, that is to say, under a processor sharing assumption, reversibility of\nthe original Markov process ensures it is insensitive [5, 25].\nIf insensitivity holds, the system remains ergodic under the natural stability condition for arbitrary phase-type (i.e., mixtures of convolutions of exponential distributions; see, [1], page 80), not necessarily exponential, service\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n5\n\ntime distributions. Note that ergodicity under the natural stability conditions, and for general, nonexponential service time distributions, has so far\nbeen established for the max-min fairness NBA in a recent article of Bramson [6], but a similar result has been missing for all other (w, \u03b1) NBAs.\nAlthough restricted to max-min fairness, the results of Bramson apply under very weak integrability assumptions on the service time distributions,\nand are not restricted to phase-type distributions.\nBonald and Prouti\u00e8re have identified a new NBA, the so-called balanced\nfairness allocation, which meets the two requirements of maximal stability region and insensitivity, and moreover maximizes the fraction of time\nduring which the system is empty, among all allocations meeting these two\nrequirements. They have furthermore identified special network topologies\nfor which balanced fairness coincides with proportional fairness, and have\nshown that for all other network topologies, balanced fairness is distinct\nfrom any utility maximization NBA.\nThis leaves several questions open regarding the choice of an NBA. On\nthe one hand, utility maximization allocations, such as (w, \u03b1)-fairness or\nmore specifically proportional fairness, can be implemented in a distributed\nmanner (see, e.g., the seminal paper by Kelly, Maulloo and Tan [14]), and\nare motivated by microeconomic theory and game theory arguments in a\nstatic setting. In addition, they satisfy the criterion of maximal stability\nregion in the dynamic setting, but do not seem to meet the more stringent\nrequirement of insensitivity. On the other hand, balanced fairness does meet\nthe latter requirement, but no simple distributed technique for realizing this\nNBA is known, if we except the special network topologies, identified in [5],\nwhere it coincides with proportional fairness.\nIn the present work, we provide a novel characterization of proportional\nfairness, and use it to improve upon this unsatisfactory state of affairs. Indeed, relying on this structural property, we show that the seemingly fortuitous coincidence of balanced fairness and proportional fairness on specific network topologies in fact reflects a deeper relationship between the\ntwo NBAs, that holds for any network topology as captured by the set C.\nMore precisely, we exhibit a third NBA, namely modified proportional fairness, which coincides in some asymptotic sense with proportional fairness.\nUnder modified proportional fairness, the system is reversible, and hence\ninsensitive. Furthermore, the steady state distributions under modified proportional fairness and balanced fairness admit the same large deviations\ncharacteristics, described by a simple explicit rate function.\nAs a by-product, we give a new proof of ergodicity of proportional fairness, which extends to a more general model of network dynamics including\nMarkovian users routing. This in turn implies that the usual stability conditions still hold with service time distributions that are of phase type rather\nthan exponential.\n\n\f6\n\nL. MASSOULI\u00c9\n\nIn view of these results, proportional fairness is an attractive candidate\nas a default NBA. Indeed, it is motivated by the following factors: (1) the\ndecomposition property of [13], (2) axiomatic arguments from bargaining\ntheory [27], (3) as an implementable approximation to balanced fairness,\nmeeting the additional criteria of performance and insensitivity.\nThe structure of the paper is as follows. Section 2 gives the novel characterization of proportional fairness. Stability properties with Markovian user\nrouting are proven in Section 3. The special case of phase type service distributions is discussed in Section 4. Section 5 establishes the relationships\nbetween balanced fairness and modified proportional fairness, and in particular the fact that the corresponding equilibrium distributions have the same\nlarge deviations characteristics.\n2. Characterization of proportional fairness via convex duality. It is convenient to consider the logarithms of the allocated capacities \u03bbr , rather than\nthe \u03bbr themselves. Denote by K the subset of R|R| in which these must lie,\nthat is,\n\u03b3 = {\u03b3r } \u2208 K \u21d4 \u03bb = {exp(\u03b3r )} \u2208 C.\n\u03b3\u2032\n\nGiven \u03b3,\nin K, and \u03b5 \u2208 (0, 1), by convexity of the exponential function,\nfor all r \u2208 R, one has\nexp(\u03b5\u03b3r + (1 \u2212 \u03b5)\u03b3r\u2032 ) \u2264 \u03b5 exp(\u03b3r ) + (1 \u2212 \u03b5) exp(\u03b3r\u2032 ),\nand thus since C is convex, nonincreasing, then so is K. Denote by \u03b3 PF (x)\nthe vector of logarithms of proportionally fair allocations, that necessarily\nbelong to K.\nDenote by \u03b4K the function that equals zero on K, and +\u221e\noutside of K.\nP\nPF\nThe original characterization of \u03bb (x) as a maximizer of r\u2208R xr log(\u03bbr )\nover \u03bb \u2208 C readily implies that\n(4)\n\n\u03b3 PF (x) \u2208 arg sup(h\u03b3, xi \u2212 \u03b4K (\u03b3)).\n\u03b3\u2208RR\n\n\u2217 denote the Fenchel\u2013Legendre convex conjugate function of \u03b4 ,\nLet now \u03b4K\nK\nthat is,\n\u2217\n\u03b4K\n(x) = sup (h\u03b3, xi \u2212 \u03b4K (\u03b3)).\n\u03b3\u2208RR\n\nRecall that the subgradient of a convex function J defined on Rn at a point\nx \u2208 Rn , which is denoted by \u2202J(x), is the set consisting of all the vectors h\nsuch that, for all y \u2208 Rn ,\nJ(x) + hh, y \u2212 xi \u2264 J(y).\nWe then have the following compact characterization of the function \u03b3 PF .\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\nLemma 1.\n\n7\n\nThe function \u03b3 PF satisfies for all x \u2208 RR\n+,\n\u2217\n\u03b3 PF (x) \u2208 \u2202\u03b4K\n(x),\n\n(5)\n\n\u2217 (x) denotes the subgradient of the convex function \u03b4 \u2217 at x.\nwhere \u2202\u03b4K\nK\n\nProof. It follows from Theorem 23.5, page 218 in Rockafellar [22] that\n\u2217 .\nconditions (4) and (5) are equivalent for any proper convex function \u03b4K\nRecall that a convex function is proper if it nowhere takes the value \u2212\u221e,\n\u2217 , which\nand it takes finite values at some points. Both conditions hold for \u03b4K\nestablishes the lemma. \u0003\nThis simple result allows to use the powerful theory of convex duality in\nthe study of the function x \u2192 \u03b3 PF (x). For instance, we have the following:\n\u2217 is continuously differentiable on (0, \u221e)R ,\nLemma 2. The function \u03b4K\n\u2217 at\nand thus on (0, \u221e)R , \u03b3 PF (x) coincides with the ordinary gradient of \u03b4K\nx, and depends continuously on x.\n\nProof. By Theorem 25.1, page 242 in [22], at a point x where a convex\nfunction admits a unique subgradient, it is differentiable, and its subgradient\nreduces to its ordinary gradient. The original allocation vector \u03bbPF (x) is\nuniquely defined at x whenever xr > 0 for all r \u2208 R, by strict concavity of\nthe log function. Thus, \u03b3 PF (x) is also uniquely defined at x \u2208 (0, \u221e)R , and\n\u2217 at x.\nhence it coincides with the ordinary gradient of \u03b4K\nFurthermore, by Theorem 25.5, page 246 in [22], the gradient of a proper\nconvex function is continuous on the domain where the function is differentiable. The claimed continuity of the allocation vector \u03b3 PF (x) on x \u2208 (0, \u221e)R\nfollows. \u0003\nIntroduce now the alternative NBA, denoted PF\u2032 for modified proportional fairness, and defined by\n\u2032\n\u03bbPF\nr (x) =\n\n\u001a\n\n\u2217 (x) \u2212 \u03b4 \u2217 (x \u2212 e )),\nexp(\u03b4K\nr\nK\n0,\n\nif xr > 0,\notherwise.\n\nDefine the function L on RR\n+ by\n(6)\n\n\u2217\nL(x) = \u03b4K\n(x) \u2212\n\nX\n\nlog(\u03c1r )xr ,\n\nr\u2208R\n\nwhere \u03c1r = \u03bdr /\u03bcr , r \u2208 R. It is readily verified that, under the PF\u2032 allocation\nstrategy, the Markov process is reversible, and thus insensitive. Indeed, one\n\u2032\neasily shows that the measure \u03c0 PF on ZR\n+ by\n(7)\n\n\u2032\n\n\u03c0 PF (x) = exp(\u2212L(x))\n\n\f8\n\nL. MASSOULI\u00c9\n\nverifies the detailed balance equations\n\u2032\n\n\u2032\n\n\u2032\n\nPF\n\u03c0 PF (x + er )\u03bcr \u03bbPF\n(x)\u03bdr ,\nr (x + er ) = \u03c0\n\nr \u2208 R, x \u2208 ZR\n+.\n\nThe natural stability condition is, as discussed previously, the following:\n\u25e6\n\n\u03c1\u2208C.\n\n(8)\n\nThe following lemma gives useful properties satisfied by function L:\nLemma 3. The function L is lower semicontinuous on RR , and continuous on RR\n+ . Furthermore, under assumption (8), there exist positive constants a, A > 0 such that for all x \u2208 RR\n+,\n(9)\n\nakxk\u221e \u2264 L(x) \u2264 Akxk\u221e ,\n\nwhere kxk\u221e := supr\u2208R |xr |.\n\u2217 is lower semicontinuous, as the Fenchel\u2013Legendre\nProof. The function \u03b4K\nconjugate of a proper convex function (by Theorem 12.2, page 104 in [22]).\nThe sum of an affine-and hence continuous-function with a lower semicontinuous function is lower semicontinuous. Thus L is lower semicontinuous.\nContinuity of L on RR\n+ follows from Theorem 2.35, page 59 in Rockafellar\nand Wets [23] and the fact that it is convex, lower semicontinuous, and finite\non RR\n+.\nUnder the stability condition (8), there exists some \u03b5 > 0 such that (1 +\n\u03b5)\u03c1 \u2208 C. Thus,\n\u2217\n\u03b4K\n(x) \u2265\n\nX\n\nxr log((1 + \u03b5)\u03c1r ).\n\nr\u2208R\n\nIt follows that\nL(x) \u2265 log(1 + \u03b5)\n\nX\n\nxr .\n\nr\u2208R\n\nThis provides the first inequality in (9). In order to establish the second\ninequality, use the homogeneity property of L to write\nL(x) = kxk\u221e L(kxk\u22121\n\u221e x) \u2264 kxk\u221e\n\nsup\n\nL(y).\n\ny\u2208RR\n+ ,kyk\u221e =1\n\nThe supremum of a continuous function on a compact set is finite, which\nyields the second half of (9). \u0003\nIt follows from equation (9) that, under condition (8), the stationary\nmeasure (7) can be normalized to a probability measure, which then implies\nstability (ergodicity) of the Markov process under the modified proportional\nfairness NBA, when (8) holds.\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n9\n\nFix now y \u2208 RR\n+ , and let x = ny, where n is large. The heuristic calculation\n\u2032\n\n\u2217\n\u2217\n\u22121\n\u03bbPF\nr (x) = exp(n\u03b4K (y) \u2212 n\u03b4K (y \u2212 n er ))\n\u2217\n\u2248 exp(\u2202r \u03b4K\n(y))\n\n= \u03bbPF\nr (x),\n\u2217 , according to which \u03b4 \u2217 (ny) =\nbased on the homogeneity property of \u03b4K\nK\n\u2217\nn\u03b4K (y), and a heuristic Taylor approximation, suggests that the behavior of\nthe systems under PF and PF\u2032 are similar, at least far from the origin. At\nthis stage we content ourselves with making the following conjecture:\n\u2032\n\nConjecture 1. Let X PF and X PF denote the number of customers in\nsteady state under PF and PF', respectively. We conjecture that the rescaled\n\u2032\nvectors n\u22121 X PF and n\u22121 X PF satisfy, as n \u2192 \u221e, a large deviations principle\nwith the same rate function L as defined in (6).\n\u2032\n\nRemark that the vector of allocations \u03bbPF\nr (x) belongs to the convex set\nR\n\u2217 :\nC for all x \u2208 Z+ , in view of the following property of the function \u03b4K\nLemma 4.\nr \u2208 R,\n(10)\n\n\u2217 is such that, for all x \u2208 RR , and all \u03b5 > 0,\nThe function \u03b4K\nr\n+\n\n\u001a\n\n\u001b\n\n\u2217 (x) \u2212 \u03b4 \u2217 (x \u2212 \u03b5 e )\n\u03b4K\nr r\nK\n\u2208 K.\n\u03b5r\n\nIt is understood in this expression that a vector u with coordinates in {\u2212\u221e}\u222a\nR belongs to K when the vector eu with coordinates eur belongs to the original\nconvex set C, and e\u2212\u221e = 0.\nProof. Let x \u2208 RR\n+ . Assume first that all the coordinates xr are strictly\npositive. It follows that the vector u achieving the supremum in the original\n\u2217 (x) is uniquely defined. By Lemma 1 above, and Theorem\ndefinition of \u03b4K\n\u2217 is differentiable at x, its (ordinary)\n25.1, page 242 in [22], it follows that \u03b4K\ngradient being the vector u achieving that supremum. Also, the function\n\u2217 (x) \u2212 \u03b4 \u2217 (x \u2212 \u03b5e )] is nonincreasing in \u03b5 > 0, and achieves its\n\u03b5 \u2192 \u03b5\u22121 [\u03b4K\nr\nK\nmaximum as \u03b5 \u0581 0, where it equals the coordinate ur of the gradient (see\nTheorem 23.1, pages 213\u2013214 in [22]). By monotonicity of the set K, it\n\u2217 satisfies the condition (10) at x.\nfollows that \u03b4K\nWe now show that the same is true when some coordinates of x equal\nzero. Let I \u2282 R denote the set of indices r for which the coordinate xr\nequals zero. We say that x belongs to the face I when x \u2208 RR\n+ and xr = 0 if\nand only if r \u2208 I. We also denote by KI the subset of K consisting of these\n\u2217 (x), we\nvectors u with ur = \u2212\u221e if and only if r \u2208 I. In the definition of \u03b4K\n\n\f10\n\nL. MASSOULI\u00c9\n\nmay actually replace the optimization domain by KI rather than K. There\nis then a single vector u of KI which achieves the corresponding supremum.\nWe may conclude as in the previous case that (10) holds in the present case\nas well. \u0003\n3. Stability properties of proportional fairness. The above characterization is now applied to the study of stability properties of the Markov process\ndescribing the number of users in the system under proportional fairness.\nErgodicity is established by following the general approach of fluid limits,\nintroduced in the contexts of more traditional queueing systems by Rybko\nand Stolyar [24] and Dai [9].\nThe section is organized as follows. The general model with Markovian\nusers routing is first introduced. A characterization of the fluid limits of\nthis process is then given. It is next established that the function L defined\nin (6) is a Lyapunov function for these fluid limits, from which stability (or\nequivalently, ergodicity) of the original Markov process is deduced, under\ncondition (8) for suitably defined loads \u03c1r , r \u2208 R.\nThe model with Markovian users routing is as follows. As before, users are\nof different types, r \u2208 R. External arrivals of type r users are according to a\nPoisson process with intensity \u03bd r ; the service times of type-r users are again\nexponential with parameter \u03bcr . However, after completing service, type r\nusers will re-enter the system as type s users with some probability prs .\nThus the nonzero transition rates are now given by\n\n(11)\n\nx \u2192 x + er\n\nwith rate \u03bd r ,\n\nx \u2192 x \u2212 er + es\n\nwith rate \u03bcr \u03bbPF\nr (x)prs ,\n\nx \u2192 x \u2212 er\n\nwith rate\n\n\u03bcr \u03bbPF\nr (x)\n\n1\u2212\n\nX\n\ns\u2208R\n\n!\n\nprs .\n\nIn the above, er denotes the rth unit vector in RR . It is assumed that\nthe matrix P = (prs )r,s\u2208R is substochastic, and that its spectral radius is\nstrictly less than 1. Thus, there exists a unique vector \u03bd = (\u03bdr )r\u2208R solving\nthe traffic equations\n\u03bdr = \u03bd r +\n\nX\n\npsr \u03bds ,\n\nr \u2208 R,\n\ns\u2208R\n\nalso written in matrix form\n(I \u2212 P T )\u03bd = \u03bd,\nwhere P T is the transposition of the routing probability matrix P . Introduce\nthe notation \u03c1r = \u03bdr /\u03bcr , and \u03c1 = (\u03c1r )r\u2208R . The main result of this section is\nthe following:\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n11\n\nTheorem 1. The Markov process with Markovian users routing is ergodic under condition (8).\nIn order to establish the theorem, a characterization of the fluid limits of\nthe original Markov process is required. To this end, the following definition\nwill be used. Note that the constant A appearing in this definition differs\nfrom the one appearing in Lemma 3. In the sequel, to simplify notations, A\nwill always be used to denote an arbitrary finite constant, whose value may\nvary from one statement to another.\nDefinition 1. The functions xr : R+ \u2192 R+ , r \u2208 R, are called fluid trajectories of the system with Markovian users routing if there exist nondecreasing, Lipschitz continuous functions Dr : R+ \u2192 R+ , r \u2208 R, such that\nDr (0) = 0, admitting A as a Lipschitz constant for any A such that C \u2282\n[0, A]R , that verify\n(12)\n\nX\n\nxr (t) = xr (0) + \u03bd r t \u2212 \u03bcr Dr (t) +\n\npsr \u03bcs Ds (t),\n\nt \u2208 R+ , r \u2208 R,\n\ns\u2208R\n\nand for almost every t \u2208 R+ , all r \u2208 R, the derivatives \u1e0ar (t) exist and verify\n(13)\n(14)\n\n\u1e0ar (t) \u2208\n\n\u0014\n\n\u0015\n\n0, lim sup \u03bbPF\nr (y)\ny\u2192x(t)\n\n,\n\nPF\nxr (t) > 0 \u21d2 \u1e0ar (t) = \u03bbPF\nr (x(t)) = exp(\u03b3r (x(t))).\n\nThe following notation will be used in the sequel. For any x \u2208 RR\n+ , S(x)\ndenotes the set of all fluid trajectories of the system with initial condition\nx. Thus it is a subset of C([0, +\u221e), RR\n+ ), that is the space of continuous,\nRR\n-valued\nfunctions\non\n[0,\n+\u221e).\n+\nNote that at this stage neither existence nor uniqueness of fluid trajectories with a given initial condition have been established.\nThe following result is the first step of the proof of Theorem 1. It implies\nas a corollary that the set S(x) is nonempty, for any x \u2208 RR\n+ . However no\nclaim of uniqueness of fluid trajectories is made.\nTheorem 2. Consider a sequence of initial conditions X k (0) = (Xrk (0))r\u2208R ,\nk \u2265 1, such that for a sequence of positive numbers (zk )k\u2208N , limk\u2192\u221e zk =\n+\u221e, and the limit limk\u2192\u221e zk\u22121 X k (0) = x(0) exists in RR\n+.\nThen for all T > 0, and all \u03b5 > 0, the following convergence takes place:\n\u0012\n\nlim P\n\nk\u2192\u221e\n\ninf\n\nsup\n\nf \u2208S(x(0)) t\u2208[0,T ]\n\n\u0013\n\n|zk\u22121 X k (zk t) \u2212 f (t)| \u2265 \u03b5\n\n= 0.\n\nIn words, the restriction of the rescaled process zk\u22121 X k (zk *) to any compact\ninterval [0, T ] converges in probability to the set S(x(0)) of fluid trajectories\n\n\f12\n\nL. MASSOULI\u00c9\n\nwith initial condition x(0), where convergence of processes is for the uniform\nnorm.\nThe proof of Theorem 2 is deferred to the Appendix A. We expect a similar\nresult to hold for other NBA, in particular for \u03b1-fair NBA, provided one\nreplaces \u03bbPF by the corresponding allocation vector \u03bbNBA in the definition\nof the fluid trajectories. Indeed the proof given in the Appendix A relies on\ntwo technical lemmas by Ye, Ou and Yuan [30] which apply to general \u03b1-fair\nNBA, and the rest of the proof can be adapted in a straightforward manner.\nThe second step of the proof of Theorem 1 consists in establishing a\nsuitable uniform convergence to zero of fluid trajectories:\nTheorem 3. Under the stability condition (8), there exists \u03c4 > 0 and\n\u03b5 > 0 such that, for any fluid trajectory {x(t)}t\u2208R+ , provided L(x(0)) = 1,\nthen L(x(\u03c4 )) \u2264 1 \u2212 \u03b5.\nThe following lemma will be needed in the proof of Theorem 3:\nLemma 5. Let {x(t)}t\u2208R+ be a fluid trajectory as per Definition 1. For\nevery t \u2265 0, let I(t) denote the set of indices r \u2208 R such that xr (t) = 0, and\n \u0304 = R \\ I(t).\nI(t)\n \u0304\n(i) There exist modified arrival rates \u03bd\u0303r , r \u2208 I(t),\nand modified routing\n \u0304\nprobabilities, p\u0303rs , r, s \u2208 I(t),\nthat depend only on the set I(t), such that the\nmatrix (p\u0303rs )r,s\u2208I(t)\nis sub-stochastic with spectral radius strictly less than 1,\n \u0304\nthe identity\nT \u22121\n(\u03bdr )r\u2208I(t)\n \u0304 = (I \u2212 P\u0303 ) \u03bd\u0303\n\n(15)\n\nholds, and furthermore, for almost every t > 0,\nX\nd\nPF\nxr (t) = \u03bd\u0303r +\n\u03bcs p\u0303sr \u03bbPF\ns (x(t)) \u2212 \u03bcr \u03bbr (x(t)),\ndt\n \u0304\n\n \u0304\nr \u2208 I(t),\n\nr\u2208I(t)\n\n(16)\n\nd\nx(t) = 0,\ndt\n\nr \u2208 I(t).\n\nLet f (t) := L(x(t)).\n(ii) For almost every t > 0, it holds that:\n(17)\n\nlim sup\nh\u05810\n\nX\nf (t + h) \u2212 f (t)\n(\u03b3rPF (x(t)) \u2212 log(\u03c1r ))\u1e8br (t),\n\u2264\nh\n \u0304\nr\u2208I(t)\n\nwhere the derivatives \u1e8br (t) are as in (16).\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n13\n\n(iii) There exists a constant A such that, for all t > 0,\n(18)\n\nlim sup\nh\u05810\n\nf (t + h) \u2212 f (t)\n\u2264 A.\nh\n\nThe proof of the lemma is given in Appendix B.\nThe following auxiliary result will also be used:\nLemma 6. Let a continuous function f : [0, T ] \u2192 R be given. Assume\nthat there exists \u03b5 \u2208 R such that, for almost all t \u2208 [0, T ]:\n(19)\n\nlim sup\nh\u05810\n\nf (t + h) \u2212 f (t)\n\u2264 \u2212\u03b5.\nh\n\nAssume further the existence of a constant A \u2208 R such that for all t \u2208 [0, T ],\n(20)\n\nlim sup\nh\u05810\n\nf (t + h) \u2212 f (t)\n\u2264 A.\nh\n\nThen it holds that, for all s, t \u2208 [0, T ), s < t,\n(21)\n\nf (t) \u2212 f (s) \u2264 \u2212\u03b5(t \u2212 s).\n\nRemark 1. The following example illustrates the role of assumption (20)\nin Lemma 6. Let f + (t) = m([0, t]), where m is the uniform measure on the\nCantor set obtained by successive exclusion of the middle third from the\ninterval [0, 1] (see, e.g., Falconer [11] for background). More precisely, this\nmeasure can be defined by specifying the mass it puts on intervals [0, x]\nwhere x is a triadic number, that is\nx=\n\n\u221e\nX\n\nzi 3\u2212i ,\n\ni=1\n\nwhere zi \u2208 {0, 1, 2}, i \u2265 1. The uniform measure m on this Cantor set is then\nspecified by\nm([0, x]) =\n\nk\nX\n\nzi 2\u2212i\u22121 ,\n\ni=1\n\nwhere k = min{i \u2265 1 : zi = 1}.\nDefine then\nf (t) = \u2212\u03b5t + f + (t).\nThe function f is continuous, because the measure m has no atoms. Moreover, the measure m is supported by a set of null Lebesgue measure, so that\nthe function f satisfies condition (19) of Lemma 6. However, the conclusion (21) does not hold, precisely because condition (20) is not satisfied.\n\n\f14\n\nL. MASSOULI\u00c9\n\nThe result of Theorem 3 is established as follows.\nProof of Theorem 3. Let {x(t)}t\u2208R+ denote a fluid trajectory. Introduce the notation ur = log(\u03bbPF\nr (x(t))/\u03c1r ). The right-hand side of equation (17), which we shall denote h(t), can then be rewritten, in view of (16),\nas\nh(t) =\n\nX\n\n \u0304\nr\u2208I(t)\n\n\"\n\nur\n\nur \u03bd\u0303r \u2212 \u03bdr e\n\n+\n\nX\n\nus\n\np\u0303sr \u03bds e\n\n \u0304\ns\u2208I(t)\n\n#\n\n,\n\nor equivalently, in matrix form,\nh(t) = hu, \u03bd\u0303 \u2212 (I \u2212 P\u0303 T )(\u03bdeu )i.\nWe use the notation \u2308\u03b7\u230b to denote the diagonal matrix with diagonal entries\nprovided by the coordinates of the vector \u03b7. Elementary manipulations entail\nthat\nh(t) = \u2212hu, (I \u2212 P\u0303 T )\u2308\u03bd\u230b(eu \u2212 1)i\n= \u2212h\u03bd, \u2308(I \u2212 P\u0303 )u\u230b(eu \u2212 1)i\n\n(22)\n\n= \u2212h\u03bd\u0303, (I \u2212 P\u0303 )\u22121 \u2308(I \u2212 P\u0303 )u\u230b(eu \u2212 1)i,\nthe first equality relying on identity (15). In order to show that the previous\n \u0304\nexpression is nonpositive, it is enough to show that for each r \u2208 I(t),\nthe\ncoefficient of \u03bd\u0303r is nonpositive, that is,\n(23)\n\nFr (u) :=\n\nX X\n\n \u0304\nn\u22650 s\u2208I(t)\n\n\"\n\nus\np\u0303(n)\nrs (e \u2212 1) us \u2212\n\nX\n\n \u0304\nl\u2208I(t)\n\n#\n\npsl ul \u2265 0,\n\n \u0304\nr \u2208 I(t).\n\nThe following lemma, whose proof is deferred to the Appendix D, is now\nneeded:\nLemma 7. For any substochastic matrix P\u0303 = (p\u0303rs )r,s\u2208I \u0304 with spectral ra \u0304 then:\ndius strictly less than 1, and any real numbers us , s \u2208 I,\n(i) Inequality (23) holds.\n(ii) The function Fr as defined in (23) verifies Fr (u) \u2265 Fr (u+ ) for all\n \u0304\n+\nu \u2208 RI+ , where u+ := (u+\ns )s\u2208I \u0304, and us = max(us , 0).\nP\n(n)\n(iii) There is equality in (23) only if for all states s such that n\u22650 p\u0303rs >\n0, one has us = 0.\nThat the term h(t) is nonpositive follows from Lemma 7(i).\nWhen x(t) 6= 0, the allocation vector \u03bbPF (x(t)) must lie on the external\nboundary of the capacity set C. Thus, by (8), for some positive \u03b5, there must\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n15\n\nexist some coordinate r such that \u03bbPF\nr (x(t)) \u2265 (1 + \u03b5)\u03c1r . Therefore, setting\n \u0304 There must also exist\n\u03b4 = log(1 + \u03b5) > 0, it holds that us \u2265 \u03b4 for some s \u2208 I.\nP\n(n)\nsome r \u2208 I \u0304 such that \u03bd\u0303r > 0, and n\u22650 p\u0303rs > 0. It is also the case that the\nuk are bounded from above by some constant A, since the allocations \u03bbPF\nk\nare bounded from above.\nBy Lemma 7(ii), one thus has\nx(t) 6= 0 \u21d2 h(t) \u2264 \u2212 inf \u03bd\u0303r inf Fr (u),\nr:\u03bd\u0303r >0\n\nu\u2208S\n\nwhere the set S is defined as\n\u001a\n\n \u0304\n\n\u001b\n\nS = u \u2208 [0, A]I : max uk \u2265 \u03b4 .\nk\u2208I \u0304\n\nSince the function Fr is continuous and the set S is compact, the infimum of\nFr (u) over S is attained; however it cannot be zero, in view of Lemma 7(iii)\nand the definition of S. Thus, the right-hand side of the above is less than\n\u2212\u03b5(I(t)) for some strictly positive \u03b5(I(t)) that depends only on the set I(t).\nBy assumption, the initial condition of the fluid trajectory in the statement of Theorem 2 is such that L(x(0)) = 1.\nThus, in view of (9), there exists r so that xr (0) \u2265 1/K for some finite\npositive constant K. Setting \u03c4 = 1/(2KA), where A is such that the capacity\nset C is a subset of [0, A]R , it then follows that for any fluid trajectory\nwith initial condition x(0) such that L(x(0)) = 1, then x(t) 6= 0 on [0, \u03c4 ].\nHence, by the previous evaluations, in view of (17,18) for any such fluid\ntrajectory, the function f (t) = L(x(t)) satisfies the assumptions of Lemma 6,\nwith \u03b5 := inf I\u2282R,I6=R \u03b5(I) > 0. Thus, by Lemma 6:\nL(x(\u03c4 )) \u2264 1 \u2212 \u03c4 \u03b5 < 1.\nThe claim of the theorem follows. \u0003\nThe proof of Theorem 1 will require to combine Theorems 2, 3 and the\nfollowing ergodicity criterion, which is a direct consequence of Theorem 8.13,\npage 224 in Robert [21]:\nTheorem 4 ([21]). Let X(t) be a Markov jump process on a countable\nstate space S. Assume there exists a function L : S \u2192 R+ and constants A,\n\u03b5, and an integrable stopping time \u03c4\u0302 > 0 such that for all x \u2208 S:\n(24)\n\nL(x) > A \u21d2 Ex L(X(\u03c4\u0302 )) \u2264 L(x) \u2212 \u03b5Ex (\u03c4\u0302 ).\n\nIf in addition the set {x : L(x) \u2264 A} is finite, and Ex L(X(1)) < +\u221e for all\nx \u2208 S, then the process X(t) is ergodic.\n\n\f16\n\nL. MASSOULI\u00c9\n\nProof of Theorem 1. Let \u03c4 be as in Theorem 3. Consider the deterministic stopping time \u03c4\u0302 = L(x(0))\u03c4 . Denote by Px the probability distribution of the Markov process (X(t)) with initial condition x \u2208 NR .\nIt is readily seen that the collection of probability distributions\n{Px (L(x)\u22121 Xr (\u03c4\u0302 ) \u2208 *)}r\u2208R,x\u2208NR \\{0}\nis uniformly integrable. Indeed, let Ar denote independent unit rate Poisson\nprocesses, used to generate users arrival times. Then the process X(t) can\nbe generated so that\n(25)\n\nXr (t) \u2264 Xr (0) + Ar (\u03bdr t),\n\nt \u2265 0, r \u2208 R.\n\nThus, for X(0) = x,\nxr\nAr (\u03bdr L(x))\nXr (\u03c4\u0302 )\n\u2264\n+\n*\nL(x)\nL(x)\nL(x)\nThe first term is bounded from above uniformly in x 6= 0, in view of Lemma 3, (9).\nThe second term has mean 1. Its variance equals \u03bdr /L(x). Thus the second moments of these variables are uniformly bounded in x 6= 0. Therefore,\nLavall\u00e9e\u2013Poussin criterion for uniform integrability applies.\nIn view of (9), it then follows that the collection of probability distributions\n{Px (L(x)\u22121 L(X(\u03c4\u0302 )) \u2208 *)}x\u2208NR \\{0}\nis also uniformly integrable.\nThe result of Theorem 2 entails that for any sequence of initial conditions xk such that kxk k\u221e \u2192 \u221e as k \u2192 \u221e, the corresponding rescaled variables X k (L(xk )\u03c4 )/L(xk ) converge in probability to the set V defined as\nV :=\n\n[\n\n{x(\u03c4 ), x(*) \u2208 S(x)}.\n\nx\u2208RR\n+ ,L(x)=1\n\nIn words, V is the set of states of fluid trajectories at time \u03c4 for all fluid\ntrajectories with initial condition x(0) satisfying L(x(0)) = 1.\nIt can be verified from (9) and the definition of fluid trajectories that the\nset V is compact. Continuity of L together with compactness of V entail\nthat the sequence of random variables L(X k (L(xk )\u03c4 ))/L(xk ) converges in\nprobability to the set L(V ).\nThus, by Theorem 3, the sequence of random variables L(X k (L(xk )\u03c4 ))/L(xk )\nconverges in probability to the interval [0, 1 \u2212 \u03b5], where \u03b5 > 0.\nCombined with the uniform integrability just shown, this yields\n1\nEx L(X(L(x)\u03c4 )) \u2264 1 \u2212 \u03b5.\nL(x)\nL(x)\u2192\u221e\nlim sup\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n17\n\nThus, Condition (24) of Theorem 4 holds for A sufficiently large. The second\nrequirement, that the set {x : L(x) \u2264 A} be finite, follows from (9). Finally,\nthe last condition, that is Ex L(X(1)) < +\u221e for all x is easily verified, invoking once more the bounds (25) and (9). \u0003\n4. Application to phase-type service distributions. We now apply Theorem 1 to systems with general phase-type distributions rather than exponential service time distributions. More precisely, we consider the same setting\nas before, with user classes r \u2208 R, and capacity set C \u2282 RR\n+ . New type r\nusers arrive as usual according to a Poisson process with intensity \u03bdr .\nThe service time distribution of type r customers is now defined as follows.\nA finite set Ir , referred to as the set of service phases, is given. The total\nservice time is characterized as the aggregation of service times required in\nsubsequent visits to phases. At each visit to phase i, a corresponding service\ntime that is exponentially distributed, with parameter \u03bcr,i , is required. A\nvisit to phase i is followed by a visit to phase j with probability pr;ij . A probability distribution {\u03b1i }i\u2208Ir on Ir specifies the phase in which service starts.\nThe transition matrix Pr := (pr;ij )i,j\u2208Ir is assumed to be sub-stochastic, with\nspectral radius strictly less than 1. It is easily checked that the above description is equivalent to the definition of phase-type distributions given in\n[1], page 83.\nb the set of pairs (r, i) with r \u2208 R and i \u2208 Ir . For all (r, i) \u2208 R,\nb\nDenote by R\nlet xr,i denote the number of class r users who are currently in phase i of\ntheir service.\nThe process (xr,i )(r,i)\u2208R\nb is then a Markov process of the kind covered by\nTheorem 1. More precisely, it corresponds to the following parameters. For\nb the external arrival rate \u03bd s is given by \u03bdr \u03b1r,i and the\nthe class s = (r, i) \u2208 R,\ncorresponding service time parameter is \u03bcs = \u03bcr,i . For two classes s = (r, i),\ns\u2032 = (r \u2032 , i\u2032 ), the corresponding routing probability pss\u2032 is zero if r 6= r \u2032 , and\notherwise equals pr;ii\u2032 . Finally, the capacity set Cb is determined from the\noriginal capacity set C as follows. The allocation vector (\u03bbs )s\u2208R\nb belongs to\nCb if and only if the allocation vector (\u03bbr )r\u2208R belongs to C, where \u03bbr is given\nP\nby i\u2208Ir \u03bb(r,i) .\nWe then have the following:\n\nTheorem 5. The process tracking the numbers xr of users of class r,\nunder proportionally fair allocation of resources characterized by the set C,\nassuming Poisson arrivals and phase type distributions as just described, is\nergodic under the usual condition (8), where \u03c1r = \u03bdr \u03c3r , and \u03c3r is the mean\nservice time for class r users.\n\n\f18\n\nL. MASSOULI\u00c9\n\nProof. By Theorem 1, ergodicity holds provided the vector (\u03c1(r,i) )(r,i)\u2208R\nb\n\u02c6 Equivalently, it holds if the vector with rth cobelongs to the interior of C.\nP\n\n\u25e6\n\nordinate i\u2208Ir \u03c1(r,i) belongs to C .\nWith the specific routing probability matrix P obtained from the characteristics of the phase type service distributions, one has\n\u03c1(r,i) =\n\n1 X X (n)\np \u03bd r,j\n\u03bcr,i j\u2208I n\u22650 r;ji\nr\n\n=\n\n1 XX\n\n\u03bcr,i j\u2208I\n\nr\n\n(n)\n\npr;ji\u03b1r,j \u03bdr .\n\nn\u22650\n\nThis in turn implies that\nX\n\n\u03c1(r,i) = \u03bdr\n\ni\u2208Ir\n\nX 1\n\ni\u2208Ir\n\nX\n\n\u03bcr,i j\u2208I\n\n(n)\n\n\u03b1r,j pr;ji .\n\nr ,n\u22650\n\nNoting that in the above expression, the last sum over j \u2208 Ir and n \u2265 0 gives\nthe average number of visits to phase i in a class r service time, it readily\nfollows that this last expression coincides with \u03bdr \u03c3r , which completes the\nproof. \u0003\n5. Relationships between balanced fairness and proportional fairness. In\nthis section we define the balanced fairness NBA, give an equivalent characterization and then use it to relate the stationary distributions under\nbalanced fairness and modified proportional fairness.\nThe balanced fairness NBA, introduced in [5], is best defined in terms\nof the balance function. The balance function, denoted \u03c8, is defined by\nR\ninduction on ZR\n+ , starting from \u03c8(0) = 1, \u03c8(x) = 0 for any x not in R+ , and\n\u03c8(x) = inf{a > 0 : {a\u22121 \u03c8(x \u2212 er )}r\u2208R \u2208 C},\nwhere er is the rth unit vector in RR . The balanced fairness rate allocation\nvector \u03bbBF is then defined as\n\u03bbBF\nr (x) =\n\n\u03c8(x \u2212 er )\n,\n\u03c8(x)\n\nx \u2208 ZR\n+ , r \u2208 R.\n\nAs for proportional fairness, it is convenient to consider the logarithms \u03b3r\nof the allocated capacities \u03bbr , rather than the \u03bbr themselves. Denote by\n\u03b3 BF (x) the vector of logarithms of balanced fair allocations, that must lie in\nthe convex nonincreasing set K. Introduce the notation \u03c6(x) = \u2212 log \u03c8(x).\nThus one has\n\u03b3rBF (x) = \u03c6(x) \u2212 \u03c6(x \u2212 er ).\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n19\n\nIn other words, the vector \u03b3 BF (x) is given by the increments of the function \u03c6\nat x, and can be seen as an approximate gradient of \u03c6 at x. We introduce the\nnotation \u2207d f (x) = {f (x) \u2212 f (x \u2212 er )}r\u2208R . Note that a stationary measure\nfor the Markov process counting users of all types is given in terms of the\nfunction \u03c6 by\n(26)\n\n\u03c0\n\nBF\n\n!\n\nX\n1\nxr log(\u03c1r )\n(x) = exp \u2212\u03c6(x) +\nZ\nr\u2208R\n\nfor some normalization constant Z. A consequence of the reversibility property of the Markov process is that this measure is also stationary for the\nmodified Markov process with Markovian routing [5].\nWe now give an alternative definition of \u03c6.\nLemma 8.\n\nThe function \u03c6 admits the following characterization:\n\u03c6(x) = sup {f (x)}\nf \u2208F\n\nwhere F is the set of functions defined on ZR such that f (0) = 0, f (y) = +\u221e\nR\nfor y \u2208\n/ ZR\n+ , and \u2207d f (y) belongs to K for all y \u2208 Z+ .\nProof. Denote by \u03c6\u0302(x) the result of the optimization problem in the\nright-hand side of the above expression. Proceed by induction on x \u2208 ZR\n+\nto show that \u03c6(x) = \u03c6\u0302(x). Clearly, \u03c6(0) = \u03c6\u0302(0) = 0. Also, as the function \u03c6\nsatisfies the conditions over which the optimization is performed, necessarily\none has that \u03c6(x) \u2264 \u03c6\u0302(x), for all x \u2208 ZR\n+ . Assume thus that \u03c6\u0302(y) = \u03c6(y) for\nall y \u2264 x, y 6= x. The definition by induction of \u03c8 implies that\n\u03c6(x) = sup{a : {a \u2212 \u03c6(x \u2212 er )}r\u2208R \u2208 K}.\nOn the other hand, for any f satisfying the assumptions,\nf (x) \u2264 sup{a : {a \u2212 f (x \u2212 er )}r\u2208R \u2208 K}\n\u2264 sup{a : {a \u2212 \u03c6(x \u2212 er )}r\u2208R \u2208 K}\n= \u03c6(x).\nWe have used for the first inequality the definition of the constraints satisfied\nby f , for the second we have used the induction hypothesis that f (x \u2212 er ) \u2264\n\u03c6(x \u2212 er ) together with monotonicity of the set K, and the last equality is\njust the inductive definition of \u03c6. \u0003\nWe are now ready to establish the following:\n\n\f20\n\nL. MASSOULI\u00c9\n\nTheorem 6.\n(27)\n\nFor any x \u2208 ZR\n+ , the following inequalities hold:\n\u2217\n\u2217\n\u03b4K\n(x) \u2264 \u03c6(x) \u2264 \u03b4K\n(x) + r(x),\n\nwhere\nr(x) :=\n\nX\n\nxr\nX\n1\n\nr\u2208R:xr >0 m=1\n\nm\n\n.\nP\n\nProof. The two inequalities shall be established by induction on r\u2208R xr\n\u2217 (0) = 0. Assume\nfor x \u2208 ZR\nas \u03c6(0) = \u03b4K\n+ . They obviously hold true for x = 0,\nP\nR\nthus that they hold for all y \u2208 P\nZ+ such that r\u2208R yr \u2264 n, for some integer\nbe\ngiven,\nn \u2265 0, and let x \u2208 ZR\nr\u2208R xr = n + 1. By the induction hypothesis\n+\nand the result of Lemma 8, it holds that\n\u03c6(x) = sup{a : {a \u2212 \u03c6(x \u2212 er )}r\u2208R \u2208 K}\n\u2217\n\u2265 sup{a : {a \u2212 \u03b4K\n(x \u2212 er )}r\u2208R \u2208 K}.\n\nNow, in view of Lemma 4, it holds that\n\u2217\n\u2217\n{\u03b4K\n(x) \u2212 \u03b4K\n(x \u2212 er )}r\u2208R \u2208 K.\n\nTherefore,\n\u2217\n\u03c6(x) \u2265 \u03b4K\n(x),\n\nand the first inequality in (27) is established.\nBy the induction hypothesis again, we have that\n(28)\n\n\u2217\n\u03c6(x) \u2264 sup{a : {a \u2212 \u03b4K\n(x \u2212 es ) \u2212 r(x \u2212 es )}s\u2208R \u2208 K}.\n\nConsider first the case where xs > 0 for all s \u2208 R. We shall rely on the\nfollowing lemma, the proof of which will be given after the end of the current\nproof.\nLemma 9. For all x, h \u2208 RR , such that x has strictly positive coordinates, and x + h has nonnegative coordinates, it holds that\n(29)\n\n\u2217\n\u2217\n\u03b4K\n(x + h) \u2264 \u03b4K\n(x) + hh, \u03b3 PF (x)i +\n\nX h2\ns\n\ns\u2208R\n\nxs\n\n*\n\nThus, in view of the previous equation, we have that\n1\n\u2217\n\u2217\n\u03b4K\n(x \u2212 es ) \u2264 \u03b4K\n(x) \u2212 \u03b3sPF (x) + *\nxs\nCombining this upper bound with (28), as the vector (\u03b3sPF (x))s\u2208R is in K,\nwe have that\n\u001b\n\u001a\n1\n\u2217\n.\n\u03c6(x) \u2264 \u03b4K (x) + sup r(x \u2212 es ) +\nxs\ns\u2208R\n\n\f21\n\nSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\nIn view of the definition of r(y), the second term in the right-hand side is\nclearly upper bounded by r(x), which establishes the desired inequality for\nx.\nTo conclude the proof, it remains to deal with the case where some coordinates xs equal zero. This case is in fact similar to the previous one: if\nx belongs to face I (i.e., xs = 0 if and only if s \u2208 I), the previous argument\nR\\I\ncarries over in Z+ by considering the convex set KI instead of K. \u0003\nProof of Lemma 9. Let x, h \u2208 RR be fixed, such that x has strictly\npositive coordinates, and x + h has nonnegative coordinates. Let \u03b3 \u2208 RR be\nsuch that\n\u2217\n\u03b4K\n(x) = hx, \u03b3i \u2212 \u03b4K (\u03b3).\n\u2217 (x). In addition,\nThe pair (x, \u03b3) verifies the relations x \u2208 \u2202\u03b4K (\u03b3), \u03b3 \u2208 \u2202\u03b4K\nthe following one-to-one correspondence between subgradients of \u03b4C and \u03b4K\ncan be established:\n\nx \u2208 \u2202\u03b4K (\u03b3) \u21d4 {xs e\u2212\u03b3s }s\u2208R \u2208 \u2202\u03b4C ({e\u03b3s }s\u2208R ).\nLet h \u2208 RR be fixed. We have that\n\u2217\n\u03b4K\n(x + h) = sup {hg, x + hi \u2212 \u03b4K (g)}\ng\u2208RR\n\n= sup {hu + \u03b3, x + hi \u2212 \u03b4K (u + \u03b3)}\nu\u2208RR\n\n\u2217\n(x) + hh, \u03b3i + sup {hu, x + hi + \u03b4K (\u03b3) \u2212 \u03b4K (\u03b3 + u)}.\n= \u03b4K\nu\u2208RR\n\nHowever, by convexity of \u03b4C , and recalling that e\u2212\u03b3 x \u2208 \u2202\u03b4C (e\u03b3 ), we have the\nfollowing inequality:\n\u03b4K (\u03b3 + u) = \u03b4C (e\u03b3+u )\n\u2265 \u03b4C (e\u03b3 ) + he\u03b3+u \u2212 e\u03b3 , e\u2212\u03b3 xi\nX\n\n= \u03b4K (\u03b3) +\n\n(eus \u2212 1)xs .\n\ns\u2208R\n\u2217 (x + h), this yields\nCombined with the previous expression for \u03b4K\n\u2217\n\u2217\n\u03b4K\n(x + h) \u2264 \u03b4K\n(x) + hh, \u03b3i +\n\nsup\nu\u2208RR\n\n\u2217\n= \u03b4K\n(x) + hh, \u03b3i +\n\n(\n\nX\n\nus\n\nus (xs + hs ) \u2212 (e\n\ns\u2208R\n\nX\n\n(xs + hs ) log(1 + hs /xs ) \u2212 hs\n\ns\u2208R:xs +hs >0\n\n+\n\nX\n\ns\u2208R:xs +hs =0\n\nxs .\n\n\u2212 1)xs\n\n)\n\n\f22\n\nL. MASSOULI\u00c9\n\nThe claimed inequality (29) now follows by noting that (i) log(1 + hs /xs ) \u2264\nhs /xs , and (ii) \u03b3 = \u03b3 PF (x). \u0003\nA simple consequence of the theorem is the following.\nCorollary 1.\n\nFor any x \u2208 R+ , it holds that\n1\n\u2217\nlim \u03c6(nx) = \u03b4K\n(x).\nn\u2192\u221e n\n\n\u2217 is positively homogeProof. This follows trivially since the function \u03b4K\n\u2217 (nx) = n\u03b4 \u2217 (x), and since the remainder term r(nx) in (27)\nneous, that is, \u03b4K\nK\nis of order log(n), and a fortiori o(n). \u0003\n\nNote that, in view of (26),\nlog(Z)\n\u03c6(nx) X\n1\nxr log(\u03c1r ) \u2212\nlog(\u03c0 BF (nx)) = \u2212\n+\n.\nn\nn\nn\nr\u2208R\nThe last term must go to zero as n \u2192 \u221e. This together with Corollary 1\nyield the following:\nCorollary 2. The stationary distribution \u03c0 BF as in (26) admits the\nfollowing large deviations asymptotics:\n1\nlim log \u03c0 BF (nx) = \u2212L(x),\n(30)\nx \u2208 RR\n+,\nn\u2192\u221e n\nwhere L is the Lyapunov function (6) used in the study of stability properties\nof proportional fairness. It thus admits the same large deviations characteristics as the stationary distribution (7) of the system under PF\u2032 sharing.\nRemark 2. The result of Theorem 6 also implies that, if for all x \u2208 RR\n+,\nBF\nthere exists a limit limn\u2192\u221e \u03bb (nx) of the allocation vector under balanced\nfairness, then it must coincide with \u03bbPF (x). So far we have not been able\nto establish the existence of such a limit, except in the special case where\n|R| = 2, although it seems plausible that the limit exists more generally.\nAPPENDIX A: PROOF OF THEOREM 2\nWe argue by contradiction, assuming that for some \u03b5 > 0, and for all k in\nan infinite subsequence of the original sequence, it holds that\n(31)\n\n\u0012\n\nP\n\ninf\n\n\u0013\n\nsup |zk\u22121 X k (zk t) \u2212 f (t)| \u2265 \u03b5 \u2265 \u03b5.\n\nf \u2208S(x(0)) t\u2208[0,T ]\n\nIn the rest of the proof, without loss of generality we assume that the above\nevaluation holds true for all k \u2265 1.\n\n\f23\n\nSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\nThe trajectories of the processes X k (t) can be represented explicitly in\nk , D k , k \u2265 0, r,\nterms of independent unit rate Poisson processes Akr , Drs\nr\ns \u2208 R, as follows:\nXrk (t) = Xrk (0) + Akr (\u03bd r t) +\n\nX\n\n\u0012\n\nk\nDsr\n\u03bcs psr\n\ns\u2208R\n\n\u2212\n\nX\n\n\u0012\n\nk\nDrs\n\u03bcr prs\n\ns\u2208R\n\n\u2212 Drk\n\n\u03bcr 1 \u2212\n\nZ\n\nt\n\n0\n\nX\n\nZ\n\nt\n0\n\nk\n\u03bbPF\nr (X (u)) du\n\nprs\n\ns\u2208R\n\n!Z\n\nt\n0\n\n\u0013\n\nk\n\u03bbPF\ns (X (u)) du\n\n\u0013\n\nk\n\u03bbPF\nr (X (u)) du\n\n!\n\n.\n\nThis implies the following, by a change of variables in the integrals, and\nusing the fact that \u03bbPF (ax) = \u03bbPF (x) for all scalar a > 0:\nX\n1 k\n1\n\u03bcs psr\nXr (zk t) = Xrk (0) + \u03bd r t +\nzk\nzk\ns\u2208R\n\n\u2212 \u03bcr\nwhere the error term\n\nZ\n\n0\n\nt\n\nZ\n\nt\n\n0\n\n\u22121 k\n\u03bbPF\ns (zk X (zk u)) du\n\n\u22121 k\nk\n\u03bbPF\nr (zk X (zk u)) du + \u03b5r (t),\n\n\u03b5kr (t)\n\nverifies, for all T > 0,\n1\nsup |\u03b5kr (t)| \u2264\nsup |Akr (zk t) \u2212 zk t|\nz\nk t\u2208[0,\u03bd r T ]\nt\u2208[0,T ]\n+\n+\n+\n\nX 1\n\nz\ns\u2208R k\nX 1\n\nz\ns\u2208R k\n1\nzk\n\nsup\nt\u2208[0,\u03bcs psr AT ]\n\nsup\nt\u2208[0,\u03bcr prs AT ]\n\nsup\nt\u2208[0,\u03bcr AT ]\n\nk\n|Dsr\n(zk t) \u2212 zk t|\n\nk\n|Drs\n(zk t) \u2212 zk t|\n\n|Drk (zk t) \u2212 zk t|.\n\nIn these expressions, A is a constant such that C \u2282 [0, A]R .\nThe following large deviations bound on the maximal deviation of a unit\nrate Poisson process from its mean is now needed:\nLemma A.1. Let \u039e be a unit rate Poisson process. Then for all T > 0,\nand all \u03bb > 0, it holds that\n(32)\n\n\u0012\n\nP\n\nsup |\u039e(t) \u2212 t| \u2265 \u03bbT\n\n0\u2264t\u2264T\n\n\u0013\n\n\u2264 e\u2212T h(\u03bb) + e\u2212T h(\u2212\u03bb) ,\n\nwhere\n(33)\n\nh(\u03bb) := (1 + \u03bb) log(1 + \u03bb) \u2212 \u03bb\n\n\f24\n\nL. MASSOULI\u00c9\n\nis the Cram\u00e9r transform of a unit mean, centered Poisson random variable.\nIn the above formula, it is understood that h(\u2212\u03bb) = +\u221e if \u03bb > 1.\nThis result and its proof are standard (see, e.g., [26]). It implies the existence of a subsequence k(l), l \u2265 1 of the original sequence, and a sequence\n\u03b5(l) decreasing to zero, such that\nX\n\n\u0012\n\nP\n\nl\u22651\n\nsup\nt\u2208[0,T ]\n\n\u0013\n\n|\u03b5k(l)\nr (t)| \u2265 \u03b5(l)\n\n< \u221e,\n\nr \u2208 R.\n\nIndeed, it can be checked from the definition of \u03b5kr (t) and Lemma A.1 that\nthe sum in the left-hand side is finite for the particular choice\n\uf8f1\n\uf8f2 k(1) = 1,\n\uf8f3\n\nk(l) = min{k > k(l \u2212 1) : zk \u2265 l},\n\u03b5(l) = l\u22121/4 ,\n\nl > 1,\nl \u2265 1.\n\nWithout loss of generality we again assume that finiteness of the sum holds\ntrue for the original sequence k \u2265 1. Thus, by Borel\u2013Cantelli's lemma, almost\nsurely, supt\u2208[0,T ] |\u03b5kr (t)| \u2192 0 as k \u2192 \u221e. The following variation on Arzela\u2013\nAscoli's theorem will then be used to proceed:\nLemma A.2 (Lemma 6.3, [30]). Suppose that a sequence of functions\nfk : [0, T ] \u2192 R has the following properties:\n(i) {fk (0)}k\u22650 is bounded;\n(ii) there is a constant M > 0, and a sequence of positive numbers \u03c3k ,\nwith \u03c3k \u2192 0 as k \u2192 \u221e, such that\n|fk (t) \u2212 fk (s)| \u2264 M (t \u2212 s) + \u03c3k ,\n\nk \u2265 0, s, t \u2208 [0, T ].\n\nThen the sequence admits a subsequence that converges uniformly on [0, T ]\nto a Lipschitz continuous function f : [0, T ] \u2192 R with Lipschitz constant M .\nIn the present setup, this result guarantees that for any T > 0, with probability 1, for any subsequence of the original sequence k \u2265 1, there exists a\nfurther subsequence, denoted k\u2032 , along which, for all r \u2208 R, the following\nconvergences take place, uniformly on [0, T ]:\nZ\n\n0\n\nt\n\n\u2032\n\n\u22121 k\n\u03bbPF\nr (zk \u2032 X (zk \u2032 u)) du \u2192 Dr (t),\n\u2032\n\nk\nzk\u22121\n\u2032 Xr (zk \u2032 t) \u2192 xr (t) := x(0) + \u03bd r t +\n\nX\n\npsr \u03bcs Ds (t) \u2212 \u03bcr Dr (t),\n\ns\u2208R\n\nwhere the functions Dr are A-Lipschitz. (A set in which any infinite sequence\nadmits a convergent subsequence is usually called sequentially compact.\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n25\n\nSequential compactness is equivalent to compactness in the case of metric\nspaces.) We shall now establish that all such limits are fluid trajectories of\nthe system. To this end, the following lemma, also taken from [30], Lemma\n6.2(b), is needed:\nLemma A.3. For all r \u2208 R, and any x \u2208 RR\n+ such that xr > 0, the bandwidth allocation function \u03bbPF\nis\ncontinuous\nat\nx.\nr\nIn fact, Ye, Ou and Yuan establish this result in the context of particular,\npolyhedral capacity sets C; however their proof applies more generally to\nthe current context of convex, nonincreasing sets C. We do not reproduce it\nhere.\nLet then t be a point at which all functions Dr are differentiable. By\nRademacher's theorem, this holds for almost every t \u2208 [0, T ]. Consider first\nthe case where xr (t) > 0. One then has, for all h > 0:\nZ\n\nt+h\n\nt\n\n\u2032\n\n\u22121 k\n\u03bbPF\nr (zk \u2032 X (zk \u2032 u)) du \u2192\n\nZ\n\nt+h\n\nt\n\n\u03bbPF\nr (x(u)) du,\n\nin view of (i) Lipschitz continuity of u \u2192 x(u), which entails positivity of\nxr (u) on [t, t + h], the continuity property of \u03bbPF\ngiven in Lemma A.3,\nr\nand finally by an application of Lebesgue's dominated convergence theorem.\nTherefore, appealing once more to Lemma A.3, the derivative of function\nDr at u must coincide with \u03bbPF\nr (x(t)).\nConsider now the case where xr (t) = 0. Clearly, by Fatou's lemma, for all\nh > 0, one has\nlim sup\nk \u2032 \u2192\u221e\n\nZ\n\nt\n\nt+h\n\n\u22121 k \u2032\n\u03bbPF\nr (zk \u2032 X (zk \u2032 u)) du\n\n\u2264\n\nZ\n\nt+h\n\nt\n\nlim sup \u03bbPF\nr (y) du.\ny\u2192x(u)\n\nOn the other hand, the function x \u2192 lim supy\u2192x \u03bbPF\nr (y) is upper semi-continuous,\nand thus it follows that\n\u0014\n\nlim sup\nu\u2192t\n\n\u0015\n\nlim sup \u03bbPF\nr (y)\ny\u2192x(u)\n\n\u2264 lim sup \u03bbPF\nr (y).\ny\u2192x(t)\n\nThis readily implies that, necessarily, the derivative of u \u2192 Dr (u) at t must\nlie in the interval [0, lim supy\u2192x(t) \u03bbPF\nr (y)].\nWe have thus shown that for any interval [0, T ], with probability 1, from\nany subsequence one can extract a further subsequence k\u2032 along which the\n\u2032\nrescaled process zk\u22121\n\u2032 X k(zk \u2032 *) converges to a fluid trajectory, uniformly on\n[0, T ]. That is to say, almost surely, the accumulation points of the rescaled\ntrajectories consist only of fluid trajectories. This is in contradiction with\n(31), and the result of Theorem 2 then follows.\n\n\f26\n\nL. MASSOULI\u00c9\n\nAPPENDIX B: PROOF OF LEMMA 5\nProof of part (i). Let u \u2192 x(u) denote a fluid trajectory. Let t > 0 be\na point at which all the associated functions Dr are differentiable. For notational convenience, write x for x(t), I for I(t), I \u0304 for R \\ I, and \u03bbr for\n \u0304\n\u03bbPF\nr (x(t)). For r \u2208 I, Theorem 2 establishes that \u1e0ar (t) = \u03bbr . Let dr denote\nthe derivative \u1e0ar (t) for r \u2208 I. As the trajectories u \u2192 xr (u) are constrained\nto be nonnegative, necessarily one has for all r \u2208 I:\n\u1e8br (t) = 0 = \u03bd r +\n\nX\n\n\u03bcs psr \u03bbs +\n\ns\u2208I\n/\n\nX\n\n\u03bcs psr ds \u2212 \u03bcr dr .\n\ns\u2208I\n\nThis can be written in matrix form as\n(\u03bcd)I = \u03bd I + (P T )I \u012a (\u03bc\u03bb)\u012a + (P T )II (\u03bcd)I ,\nwhere (x)J denotes the vector with entries j \u2208 J , and (M )IJ denotes the\nmatrix with entries Mij , i \u2208 I, j \u2208 J . The matrix (P T )II has a spectral\nradius strictly less than 1, for otherwise the original routing matrix P would\nhave a spectral radius of at least 1. Thus there exists a unique solution (\u03bcd)I\nto the above equation, given by\n(\u03bcd)I = (I \u2212 (P T )II )\u22121 [\u03bd I + (P T )I \u012a (\u03bc\u03bb)I \u0304].\n \u0304 the time derivatives \u1e8br (t) can be written\nIn view of this expression, for r \u2208 I,\nas\n(\u1e8b)I \u0304 = (\u03bd)I \u0304 + (P T )\u012a \u012a (\u03bc\u03bb)I \u0304 + (P T )\u012a I (\u03bcd)I\n= (\u03bd)I \u0304 + (P T )\u012a I (I \u2212 (P T )II )\u22121 \u03bd I\n+ [(P T )\u012a \u012a + (P T )\u012a I (I \u2212 (P T )II )\u22121 (P T )I \u012a ](\u03bc\u03bb)I \u0304\n= \u03bd\u0303 + P\u0303 T (\u03bc\u03bb)I ,\nwhere we have introduced the notation\n\u03bd\u0303 = (\u03bd)I \u0304 + (P T )\u012a I (I \u2212 (P T )II )\u22121 \u03bd I ,\nP\u0303 T = (P T )\u012a \u012a + (P T )\u012a I (I \u2212 (P T )II )\u22121 (P T )I \u012a .\nThe modified routing probability p\u0303rs can be interpreted as the probability\n \u0304 evolving according to the\nthat, in a Markov chain on R started at r \u2208 I,\noriginal routing probabilities pij (which may become absorbed outside the\nset R), the next visit to the set I \u0304 is precisely to state s. That is to say, p\u0303\ncapture the transition probability in the original chain, after removing all\nexcursions to the set I. This interpretation allows to deduce at once that the\nmodified routing probability matrix P\u0303 is sub-stochastic and with spectral\nradius strictly less than 1 whenever P is so.\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n27\n\nIt remains to establish the identity\n(\u03bd)I \u0304 = (I \u2212 P\u0303 T )\u22121 \u03bd\u0303.\nAgain, this can be established from a probabilistic interpretation. Assume\nwithout loss of generality (by joint rescaling) that the vector \u03bd's entries sum\nto 1. Then \u03bdr can be interpreted as the average number of visits to state r in\nthe Markov chain, with transition probabilities p, assuming that the initial\ndistribution is specified by \u03bd. It is readily verified that \u03bd\u0303 then represents\nthe distribution of the first visit to I \u0304 which is also the initial distribution of\nthe chain where excursions to I are removed. The mean number of visits to\nstates r \u2208 I \u0304 is the same with or without removal of excursions into I, hence\nthe desired identity holds.\nProof of part (ii). Let us establish (17). In view of Lemma 1, one has\n(34)\n\nL(x(t + h)) \u2212 L(x(t)) =\n\n|R| Z\nX\n\nxr (t+h)\n\nr=1 xr (t)\n\n[\u03b3rPF (y r (u)) \u2212 log(\u03c1r )] du,\n\nwhere the vector y r (u) is defined as\nysr (u) =\n\n\uf8f1\n\uf8f2 xs (t + h),\n\nu,\n\uf8f3\nxs (t),\n\ns < r,\ns = r,\ns > r.\n\nAt a point t where the fluid trajectories are differentiable, one thus has,\n \u0304 which follows from\nby the continuity of functions \u03b3rPF at x(t) for r \u2208 I,\nLemma A.3,\n(35)\n\n1\nlim\nh\u21920 h\n\nZ\n\nxr (t+h)\n\nxr (t)\n\n[\u03b3rPF (y r (u)) \u2212 log(\u03c1u )] du = \u1e8br (t)[\u03b3rPF (x(t)) \u2212 log(\u03c1r )].\n\nFor r \u2208 I and h > 0, one has the evaluation\nZ\n\nxr (t+h)\n\nxr (t)\n\n\u03b3rPF (y r (u)) du \u2264 sup (\u03b3rPF (y))(xr (t + h) \u2212 xr (t)).\ny\u2208RR\n+\n\nIndeed, this holds because xr (t + h) \u2212 xr (t) \u2265 0, which holds in turn because\nxr (t) = 0 for r \u2208 I, and xr (t + h) \u2265 0. This inequality entails that\n1\nlim sup\nh\nh\u05810\n\nZ\n\nxr (t+h)\nxr (t)\n\n\u03b3rPF (y r (u)) du \u2264 sup (\u03b3rPF (y))\u1e8br (t) = 0,\ny\u2208RR\n+\n\nwhere boundedness from above of \u03b3rPF has been used. This inequality, together with (35) and (34) establish (17).\n\n\f28\n\nL. MASSOULI\u00c9\n\nProof of part (iii). We finally prove (18). To this end, we establish upper bounds on each of the terms in the right-hand side of (34). Note that,\n \u0304\nfor all t > 0, and r \u2208 I(x(t)),\nthe functions Dr are differentiable at t, with\nPF\nderivative \u03bbr (x(t)). Also, for all s \u2208 R, the functions Ds are nondecreasing\n \u0304\nand Lipschitz with some constant A. It thus follows that, for r \u2208 I:\nlim sup\nh\u05810\n\n1\nh\n\nZ\n\nxr (t+h)\n\nxr (t)\n\n[\u03b3rPF (y r (u)) \u2212 log(\u03c1r )] du\n\n\u2264 sup (\u03b3rPF (y) \u2212 log(\u03c1r ))(\u03bd r + |R|A)\ny\u2208RR\n+\n\nPF\nPF\n\u2212 \u03bcr log(\u03c1r )\u03bbPF\nr (x(t)) \u2212 \u03bcr \u03b3r (x(t))\u03bbr (x(t)).\n\nThe first two terms in the right-hand side are bounded from above, and the\nPF\nlast term is uniformly bounded, since \u03bbPF\nr (x(t)) = exp(\u03b3r (x(t))) and the\nu\nfunction u \u2192 ue is bounded on a range (\u2212\u221e, A].\nIt remains to consider the case where r \u2208 I. One then has\nZ\n\nxr (t+h)\n\nxr (t)\n\n[\u03b3rPF (y r (u)) \u2212 log(\u03c1r )] du\n\n\u2264 sup (\u03b3rPF (y) \u2212 log(\u03c1r ))[xr (t + h) \u2212 xr (t)]\ny\u2208RR\n+\n\n\u2264 sup (\u03b3rPF (y) \u2212 log(\u03c1r ))hA,\ny\u2208RR\n+\n\nwhere A is a Lipschitz constant for u \u2192 xr (u), and nonnegativity of the fluid\ntrajectories has been used. These last two upper bounds together combine\nto give (18).\nAPPENDIX C: PROOF OF LEMMA 6\nIt follows from Proposition 3, page 21 in [8] (see also [18]) that a continuous function f verifying assumption (20) is such that\n(36)\n\ns < t \u21d2 f (t) \u2212 f (s) \u2264 (t \u2212 s)A.\n\nDefine now the increasing variation Vf+ (t) as the supremum over partitions\n\u03c40 = 0 < \u03c41 < * * * < \u03c4m = t of the sum\nm\u22121\nX\n\n(f (\u03c4i+1 ) \u2212 f (\u03c4i ))+ .\n\ni=0\n\nIn view of (36), it follows that\nVf+ (t) \u2264 At,\n\nt \u2208 [0, T ].\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n29\n\nIt is easily shown that for all s < t \u2208 [0, T ], one has\nVf+ (t) \u2212 Vf+ (s) =\n\nsup\n\nn\u22121\nX\n\n\u03c40 =s<***<\u03c4n =t i=0\n\n(f (\u03c4i+1 ) \u2212 f (\u03c4i ))+ ,\n\nwhere the supremum is taken over all finite partitions \u03c40 = s < * * * < \u03c4n = t.\nThis together with (36) implies that\n0 \u2264 Vf+ (t) \u2212 Vf+ (s) \u2264 A(t \u2212 s),\n\ns < t \u2208 [0, T ].\n\nMoreover, if one defines Vf\u2212 (t) as\nVf\u2212 (t) := Vf+ (t) \u2212 f (t),\none readily sees that u \u2192 Vf\u2212 (u) is a nondecreasing function. One may associate a nonnegative measure \u03bc\u2212 on [0, T ] to Vf\u2212 by setting\n\u03bc\u2212 ([0, t]) = Vf\u2212 (t+) \u2212 Vf\u2212 (0).\nBy Radon\u2013Nykodim's theorem, this measure can further be decomposed into\na measure that is absolutely continuous with respect to Lebesgue measure,\nwhose density we shall denote by g\u2212 (t), and into a measure \u03bd \u2212 that is\nsupported by a set F of null Lebesgue measure.\nBy Rademacher's theorem, the Lipschitz-continuous function Vf+ is almost everywhere differentiable; denote its derivative by g+ (t). Thus, the\nfunction f is differentiable almost everywhere, with derivative g + (t) \u2212 g\u2212 (t).\nMoreover, by condition (19), for almost every t, it holds that\ng + (t) \u2212 g\u2212 (t) \u2264 \u2212\u03b5.\nTo conclude, for s < t < T , write\nf (t) \u2212 f (s) \u2264\n\nZ\n\nt\n\n(g + (u) \u2212 g\u2212 (u)) du \u2212 \u03bd \u2212 ((s, t))\n\ns\n\n\u2264 \u2212\u03b5(t \u2212 s),\nwhich is the announced result.\nAPPENDIX D: PROOF OF LEMMA 7\nProof. Using the notation x\u00b1 = max(0, \u00b1x), note that the factor of\nin (23) reads\n\n(n)\nprs\n\nus\n\n(e\n\n\"\n\n\u2212 1) us \u2212\n\nX\n\nl\u2208R\n\n#\n\npsl ul = [(eus \u2212 1)+ \u2212 (eus \u2212 1)\u2212 ] \u00d7 * * *\n\n\f30\n\nL. MASSOULI\u00c9\n\n\"\n\n\u2212\n\u00d7 u+\ns \u2212 us \u2212\n\nX\n\n= (eus \u2212 1)+ u+\ns \u2212\n\u2212\n\n\u2212 1)\n\n+ (e\n\nl\u2208R\n\nl\u2208R\n\n\"\n\nus\n\npsl u+\nl +\n\n+ (eus \u2212 1)+\n\nX\n\npsl u+\nl\n\nl\u2208R\n\n\"\n\nu\u2212\ns\n\n\u2212\n\nX\n\nX\n\n#\n\npsl u\u2212\nl\n\nl\u2208R\n\nX\n\npsl u\u2212\nl\n\n#\n\n#\n\npsl u\u2212\nl\n\nl\u2208R\n\n+ (eus \u2212 1)\u2212\n\nX\n\npsl u+\nl .\n\nl\u2208R\n\nIn order to obtain the above expansion, we have used the fact that (eus \u22121)\u00b1 u\u2213\ns = 0.\nNote that the last two terms in this expansion are nonnegative. Note also\nthat the first two terms both read\n\"\n\nX\n\n(evs \u2212 1) vs \u2212\n\npsl vl\n\nl\u2208R\n\n#\n\n\u2212\nfor adequate choices of vs , namely vs = u+\ns for the first term, and vs = \u2212us\nfor the second term. This establishes claim (ii) of the lemma. This further\nimplies that, in order to prove claims (i) and (iii) of the lemma, it is sufficient\nto restrict attention to the case where the us all have the same sign, which\nwe now assume.\nIntroduce the notation\n\nX\n\uf8f1\n\uf8f4\nM\n(s,\nl)\n:=\np(n)\n\uf8f4\nrs psl ,\n\uf8f4\n\uf8f4\n\uf8f4\nn\u22650\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f2\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f3\n\nN (s, l) := M (s, l) + 1l=r\n=\n\nX\n\nX\n\n(n)\nprs\n1\u2212\n\nn\u22650\n\n(n)\nprs\npsl + 1l=r 1 \u2212\n\nn\u22650\n\nX\n\n!\n\npsk\nk\u2208R !!\n\nX\n\npsk\n\n.\n\nk\u2208R\n\nCondition (23) thus reads\nX\n\nM (s, l)(eus \u2212 1)ul \u2264\n\ns,l\u2208R\n\nX\n\nN (s, l)(eus \u2212 1)us .\n\ns,l\u2208R\n\nLet us now show that this last condition is satisfied. Note first that it is\nenough to prove the same inequality, with N instead of M in the left-hand\nside, since\nX\n\ns,l\u2208R\n\nN (s, l)(eus \u2212 1)ul \u2212\n\nX\n\ns,l\u2208R\n\nM (s, l)(eus \u2212 1)ul\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n(37)\n=\n\nXX\n\np(n)\n1\u2212\nrs\n\ns\u2208R n\u22650\n\nX\n\n31\n\n!\n\npsk (eus \u2212 1)ur ,\n\nk\u2208R\n\nand this difference is indeed nonnegative under the current assumption that\nthe us all have the same sign.\nWe thus need to show that\n(38)\n\nX\n\nN (s, l)(eus \u2212 1)ul \u2264\n\nX\n\nN (s, l)(eus \u2212 1)us .\n\ns,l\u2208R\n\ns,l\u2208R\n\nNote now that the marginals of the measure N (*, *) coincide. Indeed,\nX\n\nN (s, l) =\n\np(n)\nrs ,\n\nn\u22650\n\nl\u2208R\n\nX\n\nX\n\nN (s, l) =\n\nX\n\n(n+1)\n\nprl\n\nn\u22650\n\ns\u2208R\n\n=\n\nX\n\n+ 1l=r\n\nXX\n\n(n+1)\n(p(n)\n)\nrs \u2212 prs\n\nn\u22650 s\u2208R\n(n)\n\nprl .\n\nn\u22650\n\nThus, after renormalization of both sides of (38) by the total mass of the\nmeasure N , it equivalently reads\n(39)\n\nE[(eU \u2212 1)V ] \u2264 E[(eU \u2212 1)U ],\n\nwhere the random variables U , V have the same distributions. An inequality due to Hoeffding [12] (see also [28] and [7] for more easily accessible\nreferences) states that, given two random variables U , V with identical distributions, for any two nondecreasing functions f, g : R \u2192 R such that f (U )\nand g(U ) have finite variances, one has\nE[f (U )g(V )] \u2264 E[f (U )g(U )].\nNote that the inequality we need to prove is of that form, with as nondecreasing functions f (U ) = U and g(U ) = eU \u2212 1. Finiteness of variances is\ntrivially satisfied as the random variables U take only finitely many values.\nThis concludes the proof of the first claim of the lemma.\nLet us now show that, in order to have equality in (23), all us such\nP\n(n)\nthat n\u22650 prs > 0 must be zero. Equality in (23) implies equality in (39).\nHowever, the latter holds if and only the distributions of (f (U ), g(V )) and\n(f (U ), g(U )) coincide; see, for example, [28]. As the functions f , g are strictly\nincreasing, this in turn holds if the distributions of (U, V ) and (U, U ) coincide. This means that we can partition the set R such that on each subset\nof the partition, the us are constant, and for s, l in two different subsets of\nP\n(n)\nthe partition, N (s, l) = 0. Thus, for all s such that n\u22650 prs > 0, one must\n\n\f32\n\nL. MASSOULI\u00c9\n\nhave ur = us . This is needed to ensure equality in (38) . However, in order to\nensure equality in (23), the right-hand side of (37) must also be zero, which,\nusing the fact that all us coincide, also reads\nur\nr \u2208 I \u0304 \u21d2 wr = \u03b3rPF (x) = log(\u03bbPF\nr (x))ur (e \u2212 1)\n\nX\n\ns\u2208R\n\np(n)\n1\u2212\nrs\n\nX\n\nk\u2208R\n\n!\n\npsk = 0.\n\nEquivalently, one must have ur (exp(ur ) \u2212 1) = 0, that is, ur = 0, which concludes the proof of the lemma. \u0003\nRemark A.1. Note that the statement of Lemma 7 remains true if we\nreplace the terms [exp(us ) \u2212 1] by f (us ) in (23), where f is any strictly\nincreasing function such that f (0) = 0.\nAcknowledgments. The author is very grateful to the editor and reviewers, whose comments greatly helped improve this work. In particular, they\npointed to a serious gap in an earlier version. Theorem 2, Lemmas 5 and 6\nhave been established and included in the present version so as to fill the\ngap in the previous treatment.\nThe author would also like to acknowledge stimulating discussions related\nto this work with Maury Bramson, A. J. Ganesh, Frank Kelly and Ruth\nWilliams.\nREFERENCES\n[1] Asmussen, S. (2003). Applied Probability and Queues. Springer, New York.\nMR1978607\n[2] Bertsekas, D. and Gallager, R. (1992). Data Networks. Prentice Hall, New York.\n[3] Bonald, T. and Massouli\u00e9, L. (2001). Impact of fairness on Internet performance.\nIn Proceedings of ACM Sigmetrics 82\u201391.\n[4] Bonald, T., Massouli\u00e9, L., Prouti\u00e8re, A. and Virtamo, J. (2006). A queueing analysis of max-min fairness, proportional fairness and balanced fairness.\nQueueing System Theory Appl. 53 65\u201384. MR2230014\n[5] Bonald, T. and Prouti\u00e8re, A. (2003). Insensitive bandwidth sharing in data networks. Queueing Systems 44 69\u2013100. MR1989867\n[6] Bramson, M. (2005). Communication at the INFORMS Applied Probability Conference, Ottawa.\n[7] Bratley, P., Fox, B. L. and Schrage, L. E. (1986). A Guide to Simulation.\nSpringer, New York.\n[8] Ceragioli, F. M. (1999). Discontinuous ordinary differential equations and stabilization. Ph.D. dissertation, Univ. degli Studi di Firenze.\n[9] Dai, J. G. (1995). On positive Harris recurrence of multiclass queuing networks: A\nunified approach via fluid limit models. Ann. Appl. Probab. 5 49\u201377. MR1325041\n[10] De Veciana, G., Lee, T. J. and Konstantopoulos, T. (1999). Stability and\nperformance analysis of networks supporting services with rate control-could\nthe Internet be unstable? In Proc. IEEE Infocom'99.\n\n\fSTRUCTURAL PROPERTIES OF PROPORTIONAL FAIRNESS\n\n33\n\n[11] Falconer, K. (1990). Fractal Geometry. Mathematical Foundations and Applications. Wiley, Chichester. MR1102677\n[12] Hoeffding, W. (1940). Masstabinvariante korrelationstheorie. Schriften des Mathematischen Instituts und des Instituts f\u00fcr Angewandte Mathematik der Universitat Berlin 5 179\u2013233.\n[13] Kelly, F. (1997). Charging and rate control for elastic traffic. Eur. Trans. Telecommun. 8 33\u201337.\n[14] Kelly, F., Maulloo, A. and Tan, D. (1998). Rate control in communication networks: Shadow prices, proportional fairness and stability. J. Oper. Res. Soc. 49\n237\u2013252.\n[15] Kelly, F. P. and Williams, R. J. (2004). Fluid model for a network operating under\na fair bandwidth-sharing policy. Ann. Appl. Probab. 14 1055\u20131083. MR2071416\n[16] Key, P. and Massouli\u00e9, L. (2006). Fluid models of integrated traffic and multipath\nrouting. Queueing Systems Theory Appl. 53 85\u201398. MR2230015\n[17] Mazumdar, R., Mason, L. and Douligeris, C. (1991). Fairness in network optimal\nflow control: Optimality of product forms. IEEE Trans. Commun. 39 775\u2013782.\n[18] McShane, E. J. (1947). Integration. Princeton Univ. Press. MR0082536\n[19] Mo, J. and Walrand, J. (2000). Fair end-to-end window-based congestion control.\nIEEE/ACM Transactions on Networking 8 556\u2013567.\n[20] Nash, J. (1950). The bargaining problem. Econometrica 18 155\u2013162. MR0035977\n[21] Robert, P. (2003). Stochastic Networks and Queues. Springer, Berlin. MR1996883\n[22] Rockafellar, R. T. (1970). Convex Analysis. Princeton Univ. Press. MR0274683\n[23] Rockafellar, R. T. and Wets, R. J. B. (2004). Variational Analysis. Springer,\nBerlin. MR1491362\n[24] Rybko, A. N. and Stolyar, A. L. (1992). Ergodicity of stochastic processes describing the operations of open queueing networks. Problemy Pederachi Informatsii\n28 2\u201326. MR1189331\n[25] Schassberger, R. (1986). Two remarks on insensitive stochastic models. Adv. in\nAppl. Probab. 18 791\u2013814. MR0857330\n[26] Shorak, G. and Wellner, J. (1986). Empirical Processes with Applications to\nStatistics. Wiley, New York. MR0838963\n[27] Stefanescu, A. and Stefanescu, M. W. (1984). The arbitrated solution for multiobjective convex programming. Rev. Roum. Math. Pure Appl. 29 593\u2013598.\nMR0759520\n[28] Whitt, W. (1976). Bivariate distributions with given marginals. Ann. Statist. 4\n1280\u20131289. MR0426099\n[29] Ye, H. Q. (2003). Stability of data networks under an optimization-based bandwidth\nallocation. IEEE Trans. Automat. Control 48 1238\u20131242. MR1988097\n[30] Ye, H. Q., Ou, J. H. and Yuan, X. M. (2005). Stability of data networks: Stationary\nand bursty models. Oper. Res. 53 107\u2013125. MR2131101\nParis Research Lab\nThomson\n46 Quai A. Le Gallo\n92648 Boulogne Cedex\nFrance\nE-mail: laurent.massoulie@thomson.net\n\n\f"}