{"id": "http://arxiv.org/abs/0710.2659v1", "guidislink": true, "updated": "2007-10-14T13:51:09Z", "updated_parsed": [2007, 10, 14, 13, 51, 9, 6, 287, 0], "published": "2007-10-14T13:51:09Z", "published_parsed": [2007, 10, 14, 13, 51, 9, 6, 287, 0], "title": "Rigidity and persistence for ensuring shape maintenance of multiagent\n  meta formations (ext'd version)", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0710.3643%2C0710.5669%2C0710.5325%2C0710.3528%2C0710.2297%2C0710.5033%2C0710.1283%2C0710.2631%2C0710.2587%2C0710.1589%2C0710.3402%2C0710.3536%2C0710.1759%2C0710.0055%2C0710.2390%2C0710.4428%2C0710.2871%2C0710.5601%2C0710.3938%2C0710.2659%2C0710.4024%2C0710.0291%2C0710.0084%2C0710.1800%2C0710.0874%2C0710.1219%2C0710.0341%2C0710.2811%2C0710.3176%2C0710.2268%2C0710.5149%2C0710.1477%2C0710.4527%2C0710.5935%2C0710.1338%2C0710.3935%2C0710.3537%2C0710.2011%2C0710.0076%2C0710.1773%2C0710.5215%2C0710.3874%2C0710.3521%2C0710.0880%2C0710.1089%2C0710.2366%2C0710.4039%2C0710.4932%2C0710.2223%2C0710.5323%2C0710.0963%2C0710.0316%2C0710.1365%2C0710.3504%2C0710.5217%2C0710.1261%2C0710.0381%2C0710.3149%2C0710.4094%2C0710.4904%2C0710.2615%2C0710.1565%2C0710.3488%2C0710.3128%2C0710.0063%2C0710.1630%2C0710.4916%2C0710.0177%2C0710.5754%2C0710.5443%2C0710.2975%2C0710.3379%2C0710.1062%2C0710.4748%2C0710.2588%2C0710.3313%2C0710.4138%2C0710.0902%2C0710.5574%2C0710.2311%2C0710.2690%2C0710.2982%2C0710.0834%2C0710.4497%2C0710.5580%2C0710.2387%2C0710.0052%2C0710.3562%2C0710.3837%2C0710.0999%2C0710.3748%2C0710.2916%2C0710.2504%2C0710.1426%2C0710.2878%2C0710.3140%2C0710.0536%2C0710.0570%2C0710.3247%2C0710.1954%2C0710.2180&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Rigidity and persistence for ensuring shape maintenance of multiagent\n  meta formations (ext'd version)"}, "summary": "This paper treats the problem of the merging of formations, where the\nunderlying model of a formation is graphical. We first analyze the rigidity and\npersistence of meta-formations, which are formations obtained by connecting\nseveral rigid or persistent formations. Persistence is a generalization to\ndirected graphs of the undirected notion of rigidity. In the context of moving\nautonomous agent formations, persistence characterizes the efficacy of a\ndirected structure of unilateral distance constraints seeking to preserve a\nformation shape. We derive then, for agents evolving in a two- or\nthree-dimensional space, the conditions under which a set of persistent\nformations can be merged into a persistent meta-formation, and give the minimal\nnumber of interconnections needed for such a merging. We also give conditions\nfor a meta-formation obtained by merging several persistent formations to be\npersistent.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0710.3643%2C0710.5669%2C0710.5325%2C0710.3528%2C0710.2297%2C0710.5033%2C0710.1283%2C0710.2631%2C0710.2587%2C0710.1589%2C0710.3402%2C0710.3536%2C0710.1759%2C0710.0055%2C0710.2390%2C0710.4428%2C0710.2871%2C0710.5601%2C0710.3938%2C0710.2659%2C0710.4024%2C0710.0291%2C0710.0084%2C0710.1800%2C0710.0874%2C0710.1219%2C0710.0341%2C0710.2811%2C0710.3176%2C0710.2268%2C0710.5149%2C0710.1477%2C0710.4527%2C0710.5935%2C0710.1338%2C0710.3935%2C0710.3537%2C0710.2011%2C0710.0076%2C0710.1773%2C0710.5215%2C0710.3874%2C0710.3521%2C0710.0880%2C0710.1089%2C0710.2366%2C0710.4039%2C0710.4932%2C0710.2223%2C0710.5323%2C0710.0963%2C0710.0316%2C0710.1365%2C0710.3504%2C0710.5217%2C0710.1261%2C0710.0381%2C0710.3149%2C0710.4094%2C0710.4904%2C0710.2615%2C0710.1565%2C0710.3488%2C0710.3128%2C0710.0063%2C0710.1630%2C0710.4916%2C0710.0177%2C0710.5754%2C0710.5443%2C0710.2975%2C0710.3379%2C0710.1062%2C0710.4748%2C0710.2588%2C0710.3313%2C0710.4138%2C0710.0902%2C0710.5574%2C0710.2311%2C0710.2690%2C0710.2982%2C0710.0834%2C0710.4497%2C0710.5580%2C0710.2387%2C0710.0052%2C0710.3562%2C0710.3837%2C0710.0999%2C0710.3748%2C0710.2916%2C0710.2504%2C0710.1426%2C0710.2878%2C0710.3140%2C0710.0536%2C0710.0570%2C0710.3247%2C0710.1954%2C0710.2180&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "This paper treats the problem of the merging of formations, where the\nunderlying model of a formation is graphical. We first analyze the rigidity and\npersistence of meta-formations, which are formations obtained by connecting\nseveral rigid or persistent formations. Persistence is a generalization to\ndirected graphs of the undirected notion of rigidity. In the context of moving\nautonomous agent formations, persistence characterizes the efficacy of a\ndirected structure of unilateral distance constraints seeking to preserve a\nformation shape. We derive then, for agents evolving in a two- or\nthree-dimensional space, the conditions under which a set of persistent\nformations can be merged into a persistent meta-formation, and give the minimal\nnumber of interconnections needed for such a merging. We also give conditions\nfor a meta-formation obtained by merging several persistent formations to be\npersistent."}, "authors": ["Julien M. Hendrickx", "Changbin Yu", "Baris Fidan", "Brian D. O. Anderson"], "author_detail": {"name": "Brian D. O. Anderson"}, "author": "Brian D. O. Anderson", "arxiv_comment": "1 zip file containing 1 .tex files, and 39 .eps files. The paper\n  (including the appendix) contains 13 Figures", "links": [{"href": "http://arxiv.org/abs/0710.2659v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/0710.2659v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "cs.MA", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "cs.MA", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "cs.DM", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/0710.2659v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/0710.2659v1", "journal_reference": null, "doi": null, "fulltext": "RIGIDITY AND PERSISTENCE FOR ENSURING\nSHAPE MAINTENANCE OF MULTIAGENT\nMETA FORMATIONS (EXT'D VERSION)\n\narXiv:0710.2659v1 [cs.MA] 14 Oct 2007\n\nJULIEN M. HENDRICKX, CHANGBIN YU, BARI\u015e FIDAN AND BRIAN D.O. ANDERSON\n\nAbstract. This paper treats the problem of the merging of formations, where the underlying model of a formation is graphical. We first analyze the rigidity and persistence of metaformations, which are formations obtained by connecting several rigid or persistent formations.\nPersistence is a generalization to directed graphs of the undirected notion of rigidity. In the\ncontext of moving autonomous agent formations, persistence characterizes the efficacy of a directed structure of unilateral distance constraints seeking to preserve a formation shape. We\nderive then, for agents evolving in a two- or three-dimensional space, the conditions under\nwhich a set of persistent formations can be merged into a persistent meta-formation, and give\nthe minimal number of interconnections needed for such a merging. We also give conditions for\na meta-formation obtained by merging several persistent formations to be persistent.\n\nKeywords: Formations, Meta-formations, Rigidity, Persistence, Autonomous Agents\n1. Introduction\nRecently, significant interest has been shown on the behavior of autonomous agent formations\n(groups of autonomous agents interacting which each other) [2, 4, 7, 9, 19], and more recently on\nmeta-formations, which is the name ascribed to an interconnection of formations, generally\nwith the individual formations being separate [1, 25]. By autonomous agent, we mean here\nany human-controlled or unmanned vehicle moving by itself and having a local intelligence or\ncomputing capacity, such as ground robots, air vehicles or underwater vehicles. Many reasons\nsuch as obstacle avoidance and dealing with a predator can indeed lead a (meta-)formation to\nbe split into smaller formations which are later re-merged. Those smaller formations need to\nbe organized in such a way that they can behave autonomously when the formation is split.\nConversely, some formations may need to be temporarily merged into a meta-formation to accomplish a certain task, this meta-formation being split afterwards.\nThe particular property of formations and meta-formations which we analyze here is persistence. This graph-theoretical notion which generalizes the notion of rigidity to directed graphs\nwas introduced in [9] to analyze the behavior of autonomous agent formations governed by unilateral distance constraints: Many applications require the shape of a multi-agent formation\nJ. M. Hendrickx is with Department of Mathematical Engineering, Universit\u00e9 catholique de Louvain, Avenue\nGeorges Lemaitre 4, B-1348 Louvain-la-Neuve, Belgium; julien.hendrickx@uclouvain.be. His work is supported by the Belgian Programme on Interuniversity Attraction Poles initiated by the Belgian Federal Science\nPolicy Office, and the Concerted Research Action (ARC) \"Large Graphs and Networks\" of the French Community of Belgium. The scientific responsibility rests with its authors. Julien Hendrickx holds a FNRS fellowship\n(Belgian Fund for Scientific Research).\nC. Yu, B. Fidan and B. Anderson are with Australian National University and National ICT Australia, 216\nNorthbourne Ave, Canberra ACT 2601 Australia ; brad.yu,baris.fidan,brian.anderson@anu.edu.au.\nTheir work is supported by an Australian Research Council Discovery Project Grant and by National ICT Australia, which is funded by the Australian Government's Department of Communications, Information Technology\nand the Arts and the Australian Research Council through the Backing Australia's Ability Initiative.\n\n\fto be preserved during a continuous move. For example, target localization by a group of unmanned airborne vehicles (UAVs) using either angle of arrival data or time difference of arrival\ninformation appears to be best achieved (in the sense of minimizing localization error) when the\nUAVs are located at the vertices of a regular polygon [5]. Other examples of optimal placements\nfor groups of moving sensors can be found in [17]. This objective can be achieved by explicitly keeping some inter-agent distances constant. In other words, some inter-agent distances\nare explicitly maintained constant so that all the inter-agent distances remain constant. The\ninformation structure arising from such a system can be efficiently modelled by a graph, where\nagents are abstracted by vertices and actively constrained inter-agent distances by edges.\nWe assume here that those constraints are unilateral, i.e., that the responsibility for maintaining a distance is not shared by the two concerned agents but relies on only one of them. This\nunilateral character can be a consequence of the technological limitations of the autonomous\nagents. Some UAV's can for example not efficiently sense objects that are behind them or have\nan angular sensing range smaller than 360\u25e6 [3, 8, 20]. Also, some of the authors of this paper\nare working with agents in which optical sensors have blind three dimensional cones. It can also\nbe desired to ease the trajectory control of the formation, as it allows so-called leader-follower\nformations [2, 6, 21]. In such a formation, one agent (leader) is free of inter-agent distance constraints and is only constrained by the desired trajectory of the formation, and a second agent\n(first follower) is responsible for only one distance constraint and can set the relative orientation\nof the formation. The other agents have no decision power and are forced by their distance\nconstraints to follow the two first agents.\nThis asymmetry is modelled using directed edges in the graph. Intuitively, an information\nstructure is persistent if, provided that each agent is trying to satisfy all the distance constraints\nfor which it is responsible, it can do so, with all the inter-agent distances then remaining constant, and as a result the formation shape is preserved. A necessary but not sufficient condition\nfor persistence is rigidity [9], which intuitively means that, provided that all the prescribed\ndistance constraints are satisfied during a continuous displacement, all the inter-agent distances\nremain constant (These concepts of persistence and rigidity are more formally reviewed in the\nnext section). The above notion of rigidity can also be applied to structural frameworks where\nthe vertices correspond to joints and the edges to bars. The main difference between rigidity and\npersistence is that rigidity assumes all the constraints to be satisfied, as if they were enforced\nby an external agency or through some mechanical properties, while persistence considers each\nconstraint to be the responsibility of a single agent. As explained in [9], persistence implies\nrigidity, but it also implies that the responsibilities imposed on each agent are not inconsistent,\nfor there can indeed be situations where this is so, and they must be avoided. Rigidity is thus\nan undirected notion (not depending on the edge directions), while persistence is a directed one.\nBoth rigidity and persistence can be analyzed from a graph-theoretical point of view, and it can\nbe proved [9, 22, 28] that if a formation is rigid (resp. persistent), then almost all formations\nrepresented by the same graph are rigid (resp. persistent).\nAs stated in [1], the problem of merging rigid formations into a rigid meta-formation has been\nconsidered in a number of places. In [18, 23], the rigidity of a multi-graph (a graph in which\nsome vertices are abstractions of smaller graphs) is analyzed. In two dimensions, the vertices of\na multi-graph can be thought as two dimensional solid bodies at the boundary of which some\nbars can be attached; two vertices are then connected by an edge if the corresponding bodies are\nattached to the same bar. Of course, the idea extends obviously to three dimensions. Operational ways to merge two rigid formations into a larger rigid formation can also be found in [7,26].\n\n\f1\n8\n\n7\n6\n\n3\n\n4\n\n5\n2\n\n(a)\n\n(b)\n\n(c)\n\nFigure 1. In R2 , the graph represented in (a) is not rigid because it can be\ndeformed (dashed line), while the one in (b) is rigid. The graph (c) satisfies the\nfirst two conditions of Theorem 2 but not the third one, and is therefore not rigid\nin R3 : the two parts of the graph can rotate around the axis defined by 1 and 2.\nIn this paper, we treat the problem of determining whether a given meta-formation obtained\nby merging several persistent formations is persistent. For this purpose, we first consider the\nabove mentioned problem of determining whether a meta-formation obtained by merging rigid\nformations is rigid. We also analyze the conditions under which a collection of persistent formations can be merged into a persistent meta-formation. Conditions are then given on the minimal\nnumber of additional links that are needed to achieve such a merging. Note that throughout all\nthe paper, we always assume that the internal structure of the formations cannot be modified.\nMoreover, we use a convenient graph theoretical formalism, abstracting agents by vertices and\n(unilateral) distance constraints by (directed) edges.\nAfter reviewing some properties of rigidity and persistence of graphs in Section 2, we examine\nin Section 3 the issues mentioned above for agents evolving in a two-dimensional space. We\nshow in Section 4 how our results can be generalized in a three-dimensional space, and explain\nwhy this generalization can only partially be achieved. Note that some proofs are omitted for\nthree-dimensional space when they are direct generalization of results on two-dimensional space.\nThe paper ends with the concluding remarks in Section 5.\nThis paper is an extended version of [12] in which some proofs are omitted for space reasons.\nSome preliminary results have also been published in [11] without proofs, and are included here\nat a greater level of details. Moreover, Propositions 7 and 8 correct the unproven Proposition 5\nin [11], which did not take the case described in Proposition 7 into account.\n2. Review of Rigidity and Persistence\n2.1. Rigidity. As explained in Section 1, the rigidity of a graph has the following intuitive\nmeaning: Suppose that each vertex represents an agent in a formation, and each edge represents\nan inter-agent distance constraint enforced by an external observer. The graph is rigid if for\nalmost every such structure, the only possible continuous moves are those which preserve every\ninter-agent distance, as shown in Fig. 1(a) and (b). For a more formal definition, the reader is\nreferred to [9, 22]. In R2 , that is, if the agents represented by the vertices of the graph evolve in\ntwo dimensions, there exists a combinatorial criterion to check if a given graph is rigid:\nTheorem 1 (Laman [15, 24]). A graph G = (V, E), with |V | > 1, is rigid in R2 if and only if\nthere is a sub-set E \u2032 \u2286 E such that\n(i) |E \u2032 | = 2 |V | \u2212 3.\n\n\f(ii) For all non-empty E \u2032\u2032 \u2286 E \u2032 there holds\n|E \u2032\u2032 | \u2264 2 |V (E \u2032\u2032 )| \u2212 3,\nwhere V (E \u2032\u2032 ) is the set of vertices incident to edges of E \u2032\u2032 .\nUnfortunately, the analogous criterion in R3 is only necessary.\nTheorem 2. If a graph G = (V, E), with |V | > 2, is rigid in R3 , there exists E \u2032 \u2286 E such that\n(i) |E \u2032 | = 3 |V | \u2212 6.\n(ii) For all non-empty E \u2032\u2032 \u2286 E \u2032 , there holds\n|E \u2032\u2032 | \u2264 3 |V (E \u2032\u2032 )| \u2212 6, where V (E \u2032\u2032 ) is the set of vertices incident to edges of E \u2032\u2032 .\n(iii) The graph G\u2032 (V, E \u2032 ) is 3-connected (i.e. remains connected after removal of any pair of\nvertices).\nCondition (iii), which also implies the 3-connectivity of G, is not usually stated but is independently necessary even if the two first conditions are satisfied. Fig. 1(c) shows for example a\nnon-rigid graph for which (i) and (ii) are satisfied, but not (iii). Intuitively, the graph G\u2032 in the\ntheorem needs to be sufficient to ensure \"alone\" the rigidity of G. 3-connectivity is then needed\nas otherwise two or more parts of the graph could rotate around the axis defined by any pair of\nvertices whose removal would disconnect the graph. Note that such connectivity condition is not\nnecessary in 2-dimensional spaces, as the counting conditions (i) and (ii) of Theorem 1 imply the\n2-connectivity. For more information on necessary conditions for rigidity in three-dimensional\nspaces, we refer the reader to [16].\nWe say that a graph is minimally rigid if it is rigid and if no single edge can be removed\nwithout losing rigidity. It follows from the results above that a graph is minimally rigid in R2\n(resp. in R3 ) if and only if it is rigid and contains 2 |V | \u2212 3 (resp. 3 |V | \u2212 6) edges [22]. Therefore\nwe have the following characterization of minimal rigidity in R2 .\nTheorem 3 (Laman [15, 24]). A graph G = (V, E), with |V | > 1, is minimally rigid in R2 if\nand only if it is rigid and contains 2 |V | \u2212 3 edges, or equivalently if and only if\n(i) |E| = 2 |V | \u2212 3.\n(ii) For all non-empty E \u2032\u2032 \u2286 E there holds\n|E \u2032\u2032 | \u2264 2 |V (E \u2032\u2032 )| \u2212 3, where V (E \u2032\u2032 ) is the set of vertices incident to edges of E \u2032\u2032 .\nThe notion of rigidity can also be described from a linear algebraic point of view, using the\nso-called rigidity matrix. Suppose that a position pi \u2208 Rd (with d = 2, 3) is given to each vertex\ni of a graph G = (V, E), and let p \u2208 Rd|V | be the juxtapositions of all positions. For each vertex,\nconsider now an infinitesimal displacement \u03b4pi , and let \u03b4p be a vector obtained by juxtaposing\nthese displacements. Since with infinitesimal displacements one can neglect higher order terms,\nthe distance between the positions of two vertices i and j is preserved by the set of infinitesimal\ndisplacements if\n(1)\n\n(pi \u2212 pj )T (\u03b4pi \u2212 \u03b4pj ) = 0.\n\nHence, if each edge represents a distance constraint, a set of infinitesimal displacements is allowed if and only if (1) is satisfied for any edge (i, j) \u2208 E. This set of linear constraints can\nbe conveniently re-expressed in a condensed form as RG \u03b4p = 0 where RG \u2208 R|E|\u00d7d|V | is the\nrigidity matrix, which contains one row for each edge and d columns for each vertex. In the row\ncorresponding to the edge (i, j), the d(i \u2212 1) + 1st to dith columns are (pi \u2212 pj )T , the d(j \u2212 1) + 1st\nto dj th columns are (pj \u2212 pi )T , and all other columns are 0. A graph G is rigid if for almost all\nposition assignment its rigidity matrix has a rank d |V | \u2212 f (d, |V |), where f (d, |V |) is the number\n\n\f2\n\n2\n\n1\n\n1 4\n\n4\n\n3\n\n3\n(a)\n\n(b)\n\nFigure 2. In R2 , the graph represented in (a) is rigid but not persistent. For\nalmost all uncoordinated displacements of 2, 3 and 4 (even if they satisfy their\nconstraints), 4 is indeed unable to satisfy its three constraints. This problem\ncannot happen for the graph represented in (b), which is persistent.\nof degrees of freedom in a d\u2212dimensional space of a min(|V | \u2212 1, d)-dimensional rigid body (Observe that min(|V | \u2212 1, d) is the largest possible dimension of a graph on |V | vertices embedded\nin a d-dimension space). In a 2-dimensional space, a single point has two DOFs f (2, 1) = 2, and\nany one or two-dimensional body has three DOFs. In a three-dimensional space, a single point\nhas three DOFs, a one-dimensional object has five DOFs, and any other object has six DOFs.\nA subgraph G\u2032 (V \u2032 , E \u2032 ) \u2286 G(V, E) is rigid if the restriction RG\u2032 of RG to the rows and columns\ncorresponding to E \u2032 and V \u2032 has a rank d |V \u2032 | \u2212 f (d, |V \u2032 |). Note that the rank d |V \u2032 | \u2212 f (d, |V \u2032 |) is\nthe maximal that can be attained by a rigidity (sub-)matrix. In a minimally rigid (sub-)graph,\nthis rank is attained with a minimal number of edges and all rows of the rigidity matrix are thus\nlinearly independent. For more information on the rigidity matrix, we refer the reader to [22].\n\n2.2. Persistence. Consider now that the constraints are not enforced by an external entity,\nbut that each constraint is the responsibility of one agent to enforce. To each agent, one assigns\na (possibly empty) set of unilateral distance constraints represented by directed edges: the\n\u2212\u2212\u2192\nnotation (i, j) for a directed edge connotes that the agent i has to maintain its distance to\nj constant during any continuous move. As explained in the Introduction, the persistence of\nthe directed graph means that provided that each agent is trying to satisfy its constraints, the\ndistance between any pair of connected or non-connected agents is maintained constant during\nany continuous move, and as a consequence the shape of the formation is preserved. Note though\nthat the assignments given to an agent may be impossible to fulfill, in which case persistence is\nnot achieved. An example of a persistent and a non-persistent graph having the same underlying\nundirected graph is shown in Fig. 2. For a more formal definition of persistence, the reader is\nreferred to [9, 28], where are also proved the rigidity of all persistent graphs and the following\ncriterion to check persistence:\nTheorem 4. A graph G is persistent in R2 (resp. R3 ) if and only if every subgraph obtained\nfrom G by removing edges leaving vertices whose out-degree is greater than 2 (resp. 3) until no\nsuch vertex is present anymore in the graph is rigid.\nA key result in the proof of Theorem 4 [9, 28] is the following:\nProposition 1. A persistent graph R2 (resp. R3 ) remains persistent after removal of an edge\nleaving a vertex whose out-degree is larger than 2 (resp. 3).\n\n\fWe use the term number of degrees of freedom of a vertex i to denote the (generic) dimension\nof the set in which the corresponding agent can choose its position (all the other agents being\nfixed). Thus it represents in some sense the decision power of this agent. In a three-dimensional\nspace, an agent being responsible for one distance constraint can for example freely move on the\nsurface of a sphere centered on the agent from which the distance needs to be maintained, and\nhas thus two degrees of freedom. The number of degrees of freedom of a vertex i in R2 (resp. R3 )\nis given by max (0, 2 \u2212 d+ (i)) (resp. max (0, 3 \u2212 d+ (i))), where d+ (i) represent the out-degree\nof the vertex i. A vertex having a maximal number of degrees of freedom (i.e. an out-degree\n0) is called a leader since the corresponding agent does not have any distance constraint to\nsatisfy. We call the number of degrees of freedom of a graph the sum of the numbers of degrees\nof freedom over all its vertices. It is proved in [9, 28] that this quantity cannot exceed 3 in R2\nand 6 in R3 . Note that those numbers correspond to the number of independent translations\nand rotations in R2 and R3 . In the sequel we abbreviate degree of freedom by DOF.\nAs explained in [28], although the concept of persistence is applicable in three and larger\ndimensions, it is not sufficient to imply the desired stability of the formation shape. For the\nshape stability, the graph corresponding to a three-dimensional formation needs in addition to\nbe structurally persistent. In R3 , a graph is structurally persistent if and only if it is persistent\nand contains at most one leader, i.e. at most one vertex with no outgoing edge. In R2 , persistence and structural persistence are equivalent.\nSimilarly to minimal rigidity, we say that a graph is minimally persistent if it is persistent\nand if no single edge can be removed without losing persistence. It is proved in [9, 28] that a\ngraph is minimally persistent if and only if it is persistent and minimally rigid. The number of\nedges of such a graph is thus uniquely determined by the number of its vertices as it is the case\nfor minimally rigid graphs.\n3. Rigidity and Persistence of 2D Meta-Formations\n3.1. Rigidity. Consider a set N of disjoint rigid (in R2 ) graphs G1 , . . . , G|N | having at least\ntwo vertices each, and a set S of single-vertex graphs G|N |+1 , . . . , G|N |+|S| . In the sequel, those\ngraphs are called meta-vertices, and it is assumed that no modification can be made on their\ninternal structure: no internal edge or vertex can be added to or removed from a meta-vertex.\nWe define the merged graph G by taking the union of all the meta-vertices, and of some additional edges EM each of which has end-points belonging to different meta-vertices.\nThe conditions under which the merging of two meta-vertices leads to a rigid graph are\ndetailed in [26]: If both meta-vertices contain more than one vertex, the merged graph is rigid\nif and only if EM contains at least three edges, the aggregate of which are incident to at least\ntwo vertices of each meta-vertex. This is actually a particular case of the following result for an\narbitrary number of graphs (analogous to a result in [18] which is obtained under the assumption\nthat no vertex of any meta-vertex is incident to more than one edge of EM ):\n\u0010S\n\u0011\nTheorem 5. If it contains at least two vertices, G =\n\u222a EM (with N and S as defined\nG\ni\nN,S\n\n\u2032 \u2286E\nat the beginning of this section) is rigid if and only if there exists EM\nM such that\n\u2032\n(i) |EM | = 3 |N | + 2 |S| \u2212 3.\n\u2032\u2032 \u2286 E \u2032 , there holds\n(ii) For all non-empty EM\nM\n\u2032\u2032 | \u2264 3 |I(E \u2032\u2032 )| + 2 |J(E \u2032\u2032 )| \u2212 3,\n|EM\nM\nM\n\u2032\u2032 ) is the set of meta-vertices such that there are at least two vertices within the metawhere I(EM\n\u2032\u2032 , and J(E \u2032\u2032 ) is the set of meta-vertices such that there is\nvertex all incident to edges of EM\nM\n\u2032\u2032 . Note\nprecisely one vertex within the meta-vertex that is incident to one or several edges of EM\n\n\fthat in each case, there can be an arbitrary number of vertices in the meta-vertex which are not\n\u2032\u2032 .\nincident on any edge of EM\nTo prove this theorem, we first need the following lemma, which we shall prove the both for\nR2 and R3 , intending to use the R3 result in the next section.\nLemma 1. Let G(V, E) be a rigid graph (in R2 or R3 ), and G\u20321 , . . . G\u2032N be minimally rigid\nsubgraphs of G having distinct vertices. Then there exists a minimally rigid subgraph G\u2032 (V, E \u2032 )\nof G containing all vertices of G and all subgraphs Gi .\nProof. For simplicity, let us first consider the 2-dimensional case. Consider the rigidity matrix\nRG of G. Since G is rigid, it has (for almost all positions) a rank 2 |V | \u2212 3. Since each G\u2032i is\nminimally rigid, the restriction RG\u2032i of RG to the rows and columns corresponding to the edges\nand vertices of G\u2032i has 2 |Vi | \u2212 3 linearly independent rows (or is an empty matrix if |Vi | = 1).\nAlso, since the vertices of the different G\u2032i are distinct, there can be no dependence between rows\ncorresponding to edges of different subgraphs G\u2032i . Therefore, all rows of RS G\u2032i , corresponding to\nS\nall edges of G\u2032i , are linearly independent. Since the rank of RG is 2 |V |\u22123, it is a standard result\nin linear algebra that RS G\u2032i can be completed by the addition of further rows of RG to obtain a\nsubset of 2 |V | \u2212 3 linearly independent rows of RG . Letting E \u2032 be the set of edges corresponding\nto this set of rows, the graph G\u2032 (V, E \u2032 ) is a minimally rigid subgraph of G containing all G\u2032i .\nThis completes the proof for the 2-dimensional case. The proof for the 3-dimensional case is\nestablished following the same steps above, but replacing 2 |V | \u2212 3 by 3 |V | \u2212 6 and adding a\nspecial case for |Vi | = 2 in addition to the case where |Vi | = 1.\n\u0003\nWe can now prove Theorem 5.\nProof. For every Gi , let G\u2032i be a minimally rigid subgraph of Gi on the same vertices (The existence of such subgraphs follows directly from the definition of minimal rigidity, and they can\nbe obtained by successively removing edges from the initial graph). Since they are minimally\nrigid, they contain 2 |Vi | \u2212 3 edges if Gi \u2286 N and no edge if Gi \u2286 S.\n\u2032 as described in the theorem and prove the rigidity\nWe first suppose that there exists a set EM\n\u0010S\n\u0011\n\u2032 \u222aE \u2032\nof G, by proving the minimal rigidity of one of its subgraph viz., G\u2032 = (V, E \u2032 ) =\nG\nN,S i\nM\n\nwhich contains all its vertices. The number of edges in G\u2032 is\nP\n\u2032 |+\n\u2032\n|E \u2032 | = |EM\nGi \u2208N |Ei |P\n= 3 |N | + 2 |S| \u2212 3 + Gi \u2208N (2 |Vi | \u2212 3)\n= 2 |V | \u2212 3,\nP\nsince |V | = |S| + Gi \u2208N |Vi |. To show that G\u2032 satisfies the second condition of Theorem 1,\nsuppose that there exists a subset of edges E \u2032\u2032 \u2282 E \u2032 such that |E \u2032\u2032 | > 2 |V (E \u2032\u2032 )| \u2212 3, let I be\nthe set of meta-vertices containing at least two vertices of V (E \u2032\u2032 ) and J the set of meta-vertices\n\u2032\u2032 = E \u2229 E \u2032\u2032 and for each i, V \u2032\u2032 = V (E \u2032\u2032 ) \u2229 V\ncontaining only one vertex of V (E \u2032\u2032 ). Let now P\nEM\nM\ni\ni\nP\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032 | + |J|, and E \u2032\u2032 = E \u2032\u2032 +\n\u2032\u2032 |.\nand Ei = E \u2229 Ei . There holds V (E ) =\n|V\n|E\ni\ni\nGi \u2208I\nM\nGi \u2208I\nMoreover, since each G\u2032i is minimally rigid, it follows from Theorem 3 that |Ei\u2032\u2032 | \u2264 2 |Vi\u2032\u2032 | \u2212 3.\nWe have then\nP\n\u2032\u2032 | = |E \u2032\u2032 | \u2212\n|EM\n|Ei\u2032\u2032 |\nGi \u2208I\nP\n> 2 |V \u2032\u2032 | \u2212 3 \u2212 Gi \u2208I (2 |Vi\u2032\u2032 | \u2212 3)\n= 3 |I| + 2 |J| \u2212 3,\n\u2032\u2032\n\u2032\nso that this EM \u2286 EM does not satisfy condition (ii) in the theorem.\n\n\fWe now suppose that G is rigid. It follows from Lemma 1 that there is a minimally rigid\n\u2032 = E \u2032 \u2229 E ; we prove that E \u2032 satisfies the\nsubgraph G\u2032 (V, E \u2032 ) \u2286 G containing all G\u2032i . Let EM\nM\nM\n\u2032 is minimally rigid, there holds |E \u2032 | = 2 |V | \u2212 3. Moreover,\ncondition of this theorem.\nSince\nG\nP\nP\n\u2032 |+\n\u2032\n\u2032\nwe have |E \u2032 | = |EM\ni\u2208N |Ei |, and |V | =\nGi \u2208N |Vi | + |S|, so that\nX\n\u2032\nEM\n= 2 |V | \u2212 3 \u2212\n(2 |Vi | \u2212 3) = 3 |N | + 2 |S| \u2212 3.\nGi \u2208N\n\n\u2032\nEM\n\n\u2032\u2032 such\ncontains thus the predicted number of edges. We suppose now that there is a set EM\n\u2032\u2032\n\u2032\u2032\nthat |EM | > 3 |I(EM )| + 2 |J(EM )| \u2212 3 and show that this contradicts the minimal rigidity of\n\u2032\u2032\n\u2032\n\u2032\u2032\nG\u2032 . Let us build E \u2032\u2032 by\nPtaking the union of EM and all Ei for which Gi \u2208 I(EM ). There holds\n\u2032\u2032\n\u2032\u2032\n|V (E )| = |J(EM )| + Gi \u2208I(E \u2032\u2032 ) |Vi |. Therefore, we have\nM\nP\n\u2032\n\u2032\u2032 | +\n|E \u2032\u2032 | = |EM\n\u2032\u2032 ) |Ei |\ni\u2208I(EM\n\u2032\u2032\n\u2032\u2032\n> 3 |I(E\nP M )| + 2 |J(EM )| \u2212 3\n+ Gi \u2208I(E \u2032\u2032 ) (2 |Vi | \u2212 3)\nM\n= 2V (E \u2032\u2032 ) \u2212 3.\n\nBy Theorem 3, this contradicts the minimal rigidity of G\u2032 (V, E \u2032 ) as E \u2032\u2032 \u2286 E \u2032 .\n\u0003\nThis criterion can be checked by a quadratic time algorithm (with respect to the number of\nmeta-vertices) which would be a simple adaptation of the pebble game algorithm that is used\nfor rigid graphs (see [14]), or even faster [18].\nFor a given collection of meta-vertices, we say that G is an edge-optimal rigid merging if no\nsingle edge of EM can be removed without losing rigidity. Notice that a single graph can be an\nedge-optimal rigid merging with respect to a certain collection of meta-vertices, and not with\nrespect to another one, as shown in Fig. 3. If all meta-vertices are minimally rigid, then an\nedge-optimal rigid merging is also a minimally rigid graph. From Theorem 5, one can deduce\nthe following characterization of edge-optimal rigid merging.\n\u0010S\n\u0011\nTheorem 6. G =\nN,S Gi \u222a EM (with N and S as defined at the beginning of this section)\ncontaining at least two vertices is an edge-optimal rigid merging if and only if it is rigid and\nsatisfies |EM | = 3 |N | + 2 |S| \u2212 3. Moreover, each rigid merging contains an edge-optimal rigid\nmerging on the same set of meta-vertices.\nProof. Observe first that Theorem 5 requires a rigid merged graph G to satisfy EM \u2265 3 |N | +\n2 |S| \u2212 3. Therefore a rigid merged graph for which EM = 3 |N | + 2 |S| \u2212 3 is an edge-optimal\n\u2032 \u2282 E\nmerging. Let now G be a rigid merged graph. By Theorem 5 there exists EM\nM with\n\u2032\nEM = 3 |N | + 2 |S| \u2212 3 satisfying\n(ii) of this same theorem. One can see, again\n\u0010S condition\n\u0011\n\u2032\n\u2032\n\u2032\nusing Theorem 5, that G =\nN,S Gi \u222a EM is rigid, as the set EM trivially contains itself\n\n\u2032 and from the\nand satisfies both conditions (i) and (ii). It follows then from the size of EM\n\u2032\ndiscussion above that G is an edge-optimal rigid merging. We have thus proved that any rigid\nmerged graph G contains an edge-optimal rigid merged graph G\u2032 on the same meta-vertices\n\u2032 = 3 |N | + 2 |S| \u2212 3. Therefore it cannot contain less than 3 |N | + 2 |S| \u2212 3 edges,\nsatisfying EM\nand if it contains more of them, it is not edge-optimal. It is thus edge-optimal if and only if\nEM = 3 |N | + 2 |S| \u2212 3.\n\u0003\n\n3.2. Persistence. Next we analyze the case where the meta-vertices Gi are directed persistent\ngraphs, and adapt the definitions of N and S in consequence. If it is possible to merge them\ninto a persistent graph, then it is possible to do so in such a way that all the edges of EM leave\nvertices which have an out-degree not greater than 2 in G: a set of edges EM that would make\n\n\fG'2\nG1\n\nG1\nG2\n\nG'3\n(a)\n\n(b)\n\nFigure 3. The graph represented in (a) and (b) is an edge-optimal rigid merge\nif it is obtained by merging G1 and G2 (a) but not if it is obtained by merging\nG1 , G\u20322 and G\u20323 (b). The dashed edges represent the edges of EM\nG persistent but that would not satisfy this property could indeed be reduced by Proposition 1\nuntil it satisfies it. Moreover, we have the following proposition.\n\u0010S\n\u0011\nProposition 2. Let G =\n\u222a EM with N and S as defined at the beginning of this\nG\ni\nN,S\nsection, and with all Gi persistent. If no vertex left by an edge of EM has an out-degree larger\nthan 2, then G is persistent if and only if it is rigid.\nProof. Rigidity is a necessary condition for persistence, so we just have to prove that it is here\nsufficient. Let G\u2032 be a (directed) graph obtained from G by removing edges leaving vertices with\nout-degree larger than 2 until no such vertex exists in the graph. It follows from Theorem 4 that\nwe just need to prove the rigidity of any such G\u2032 . For every i, let G\u2032i be the restriction of G\u2032 to\nthe meta-vertex G\n. Since \u0011\nin G, every edge of EM leaves a vertex with an out-degree at most 2,\n\u0010iS\n\u2032\n\u2032\n\u2032\nthere holds G =\nN,S Gi \u222a EM as no edge of EM is removed when building G . Moreover, for\n\nevery i, G\u2032i can be obtained from Gi by removing edges leaving vertices with an out-degree larger\nthan 2 until no such vertex exists in the graph anymore. The only vertices that are not left by\nexactly the same edges in G as in Gi are indeed those left by edges of EM , which by hypothesis\nhave an out-degree at most 2 and are therefore unaffected by the edge-removal procedure. It\nfollows then from the persistence of all Gi and from Theorem 4 that all G\u2032i are rigid. And since\nG is rigid, E\nsatisfies\n\u0010M\n\u0011 the necessary and sufficient conditions of Theorem 5. Therefore, the\nS\n\u2032 \u222aE\ngraph G\u2032 =\nG\nM is also rigid, as the conditions of Theorem 5 do not depend on the\nN,S i\nedges inside the different meta-vertices. As explained above, this implies the persistence of G\u2032 .\n\u0003\n\nThe condition on the out-degrees of the vertices with an outgoing edge of EM can be conveniently re-expressed in terms of degrees of freedom: To each DOF (within a single meta-vertex)\nof any vertex there corresponds at most one outgoing edge of EM . By an abuse of language,\nwe say that such edges leave a vertex with one or more local DOFs, i.e. a vertex which inside\nits meta-vertex has one or more DOFs and which is then left by no more edges of EM than the\nnumber of DOFs is has. This allows reformulating Proposition 2, the proof of which can directly\nbe extended to any dimension, in a dimension-free way:\nTheorem 7. A collection of persistent meta-vertices can be merged into a persistent graph if\nand only if it can be merged into a persistent graph by adding edges leaving vertices with one or\nmore local DOFs, the number of added edges not exceeding the number of local DOFs. In that\n\n\fG1\n**\n\n*\n\nG3\n\nG4\n\nG2\n(a)\n\n(b)\n\nFigure 4. Merging of the persistent meta-vertices G1 and G2 into a persistent\ngraph in R2 (a). The symbol \"*\" represents one DOF (with respect to the metavertex). (b) represents two persistent meta-vertex that cannot be merged into a\npersistent graph in R2 by addition of interconnecting edges because none of their\nvertices has a DOF.\ncase, the merged graph is persistent if and only if it is rigid.\nIf one or more edges of EM do leave a vertex with an out-degree larger than 2, no criterion has\nbeen found yet to determine whether the merged graph is persistent or not, while also taking\nadvantage of the fact that the graph is obtained by merging several persistent meta-vertices.\nTying Theorem 7 together with what is known and reviewed above regarding the merging of\ntwo rigid meta-vertices, we conclude: two persistent meta-vertices Ga and Gb each having two\nor more vertices can be merged into a persistent graph if and only if three edges leaving vertices\nwith local DOFs can be added in such a way that they are incident to at least two vertices in\neach meta-vertex. There must thus be at least three local DOFs available among the vertices\nin Ga and Gb . Conversely, if there are available three local DOFs among the vertices of Ga and\nGb , since no vertex can have more than two DOFs, it is possible to add a total of at least three\nedges leaving at least two vertices of Ga \u222a Gb . The vertices to which those edges arrive can then\nbe chosen in such a way that at least two vertices of both Ga and Gb are incident to edges of\nEM , as in the example shown in Fig. 4. It follows then from Theorem 5 that this graph is rigid,\nwhich by Theorem 7 implies that the merged graph is persistent:\nProposition 3. Two persistent meta-vertices each having two or more vertices can be merged\ninto a persistent graph if and only if the sum of their DOF numbers is at least 3. At least three\nedges are needed to perform this merging, and merging can always be done with exactly three\nedges.\nIf one or two of the meta-vertices are single vertex graphs, the result still holds, but the minimal number of added edges (and therefore the number of needed DOFs) are then respectively\n2 and 1. We define the number of missing DOFs (mDOF ) to be the maximal number of DOFs\nthat any graph with the same number of vertices can have, less the number of DOFs the graph\nactually has. In R2 , this maximal number is 2 for the single vertex graphs, and 3 for other\npersistent graphs. There is an interesting consequence: when the minimal number of edges is\nused to merge two meta-vertices Ga and Gb , the number of missing DOFs is preserved through\nthe process, i.e. mDOF (Ga \u222a Gb \u222a EM ) = mDOF (Ga ) + mDOF (Gb ).\nConsider now an arbitrary number of persistent meta-vertices, possibly containing singlevertex graphs, but such that the total number of vertices is at least 2. If the sum of their\nnumber of missing DOFs is no greater than 3, it follows from Proposition 3 that any two of\n\n\fthem can be merged in such a way that the obtained graph is persistent and that the total\nnumber of missing DOFs remains unchanged. Any pair of those meta-vertices would indeed\ncontain at least the required number of DOFs. Doing this recursively, it is possible to merge all\nthese meta-vertices into a single persistent graph. In case there are more than 3 missing DOFs,\nthe total DOF number is by definition smaller than 3 |N |+2 |S|\u22123, which is the minimal number\nof edges required to make the merged graph rigid. It follows then from Theorem 7 that such\nmeta-vertices cannot be merged in a persistent graph by addition of interconnecting edges. We\nhave thus proved the following result:\nProposition 4. A collection of persistent meta-vertices N \u222a S (with N and S as defined in the\nbeginning of this section) can be merged into a persistent graph if and only if the total number\nof missing DOFs is no greater than 3, or equivalently if the total number of local DOF in N \u222a S\nis at least 3 |N | + 2 |S| \u2212 3. At least 3 |N | + 2 |S| \u2212 3 edges are needed to perform this merging,\nand merging can always be done with exactly this number of edges.\nAs when merging rigid meta-vertices, we say that G is an edge-optimal persistent merging if\nno single edge of EM can be removed without losing persistence. Again, if all meta-vertices are\nminimally persistent, then G is an edge-optimal persistent merging if and only if it is minimally\npersistent.\n\u0010S\n\u0011\nTheorem 8. G =\nG\nN,S i \u222aEM (with N and S as defined at the beginning of this section and\nwith all Gi persistent) is an edge-optimal persistent merging if and only if it is an edge-optimal\nrigid merging and all edges of EM leave vertices with local DOFs.\nProof. Let G be a persistent merging. If there is an edge that lies in EM leaving a vertex with\nno local DOF, then it follows from Proposition 1 that the graph obtained by removing this edge\nwould also be persistent, and thus that G is not an edge-optimal persistent merging.\nNow if G is a persistent merging for which all edges of EM leave local DOFs but which is not\nan edge-optimal rigid merging, then by removing one edge of EM it is possible to obtain a rigid\ngraph which by Proposition 2 is also persistent, so that G is not an edge-optimal persistent\nmerging.\nThere remains to prove that an edge-optimal rigid merging G where all edges of EM leave local\nDOFs is an edge-optimal persistent merging. Since such G is rigid, it follows from Proposition\n2 that it is also persistent. Moreover, since it is an edge-optimal rigid merging, removing any\nedge of EM destroys rigidity and therefore persistence.\n\u0003\nTying Theorem 8 with Theorem 6 leads to the following more explicit characterization of\nedge-optimal persistent merging.\n\u0010S\n\u0011\nTheorem 9. G =\nG\nN,S i \u222a EM (with N and S as defined at the beginning of this section\nand with all Gi persistent) containing at least two vertices is an edge-optimal persistent merging\nin R2 if and only if the following conditions all hold:\n(i) |EM | = 3 |N | + 2 |S| \u2212 3.\n\u2032\u2032 \u2286 E \u2032 , there holds\n(ii) For all non-empty EM\nM\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032 )| \u2212 3\n|EM | \u2264 3 |I(EM )| + 2 |J(EM\n\u2032\u2032 ) and J(E \u2032 ) as defined in Theorem 5\nwith I(EM\nM\n(iii) All edges of EM leave vertices with local DOFs.\nNotice that an efficient way to obtain such a merging is provided in the discussion immediately\npreceding Proposition 4.\n\n\f|Va |\n|Vb |\nmin |EM |\nTable 1. Minimal number of\nGb into a single rigid graph in\n\n1\n1\n1\nedges\nR3 .\n\n1\n1\n2\n2 \u22653\n2 \u22653\n2 \u22653 \u22653\n2\n3\n4\n5\n6\nrequired to merge two rigid graphs Ga and\n\n4. Rigidity and Persistence of 3D Meta-Formations\n4.1. Rigidity. We now consider a set N of disjoint rigid (in R3 ) graphs G1 , . . . , G|N | having at\nleast three vertices each, a set D of graphs containing two (connected) vertices G|N |+1 , . . . , G|N |+|D| ,\nand a set S of single-vertex graphs G|N |+|D|+1 , . . . , G|N |+|D|+|S| . As in Section 3, these graphs\nare called meta-vertices, and we define the merged graph G by taking the union of all the metavertices, and of some additional edges EM each of which has end-points belonging to different\nmeta-vertices.\nThe merging of two rigid meta-vertices, each containing more than two vertices, is treated\nin [26]: At least six edges are needed, and they must be incident to at least three vertices of each\nmeta-vertex (which is necessary for 3-connectivity). But these conditions are only necessary, as\nthey do not imply 3-connectivity. For example, the so-called \"double-banana\" graph in Fig. 1(c)\ncan be obtained by merging two distinct rigid tetrahedral meta-vertices (1,3,4,5) and (2,5,7,8)\nusing a total of six edges incident to four vertices of each meta-vertex. However, it is always\npossible to achieve a rigid merging using exactly six edges incident to exactly three vertices\nof each meta-vertex, with no single vertex having more than three incident edges out of the\nsix. With a minor modification, the merging result above holds in the cases where at least one\nmeta-vertex has less than 3 vertices: The required number of edges is different, as summarized\nin Table 1 where min |EM | represents the minimal number of edges required to merge the metavertices Ga (Va , Ea ) and Gb (Vb , Eb ) into a rigid graph. Also, if a meta-vertex has less than 3\nvertices, all of them should be incident to edges of EM , otherwise at least 3 of them should\nbe. When merging several meta-vertices, there is no available necessary and sufficient condition\nfor the rigidity of G. Determining whether a merged graph is rigid in R3 is indeed a more\ngeneral problem than determining whether a given graph is rigid (for which it suffices to take\nN = D = \u2205) and there is no known set of combinatorial necessary and sufficient conditions for\nthis. We can however prove that the rigidity of the merged graph G only depends on EM , on\nthe vertices to which nodes of EM are incident and on the belonging of the Gi to N , D or S.\n\u0010S\n\u0011\nProposition 5. Let G =\nG\nN,D,S i \u222a EM with N, D, S as defined at the beginning of this\nsection. Suppose that a meta-vertex Gi is replaced by a meta vertex G\u2032i with the same set of\nvertices incident to EM , with the same set membership, N , S or D, as Gi , but otherwise with\ndifferent internal structure. Let G' be the graph so obtained. Then G\u2032 is rigid if and only if G\nis rigid.\n\nProof. This could be proved using algebraic arguments based on the rigidity matrix, but we\nprefer the following more intuitive argument.\nThe result is trivial for meta-vertices of D and S as they are entirely determined by their belonging to these classes; we assume therefore that Gi \u2208 N . We also assume that the set Vi (EM )\nof vertices of Gi (and G\u2032i ) that are incident on edges of EM contains at least three vertices. In\ncase this assumption is not verified, both G and G\u2032 fail to be 3-connected and therefore rigid (by\nTheorem 2), so that the result is also trivial. We then prove that the non-rigidity of G implies\nthe non-rigidity of G\u2032 . Since the roles of G and G\u2032 can be exchanged, this is sufficient to prove\n\n\fthe theorem.\nSuppose that G is not rigid, and give positions in R3 to its vertices. Then there is a smooth\nmotion M (satisfying the distance constraints corresponding to edges in G) of the vertices of G\napart from pure translation or rotation. Because Gi is rigid, the restriction of M to the vertices\nof Gi is a rigid motion, that is a translation and/or rotation, which we call T . Therefore, the\nrestriction of M to (G \\ Gi ) \u222a Vi (EM ) is not a rigid motion. Otherwise all distances would\nbe preserved by M apart from some distances between vertices of Gi \\ Vi (EM ) and vertices of\nG \\ Gi . We would then have two vertices whose relative distance is not preserved while their\nrelative distance with respect to all the three or more vertices of Vi (EM ) are preserved, which is\nimpossible. We call M \u2217 this restriction to (G \\ Gi ) \u222a Vi (EM ). Let now M \u2032 be a smooth motion\nof the vertices of G\u2032 , which for the vertices of G\u2032i is the translation and/or rotation T , and for\nthe vertices of (G\u2032 \\ G\u2032i ) \u222a Vi (EM ) is the motion M \u2217 (observe that that the two motions are\nidentical on V (EM ) which is the intersection of the two sets on which M \u2032 is defined). Since\nM \u2217 is a non-rigid motion (not preserving all distances), so is M \u2032 . Therefore, we just need to\nprove that M \u2032 satisfies all distance constraints on vertices connected by edges in G\u2032 to prove the\nnon-rigidity of G\u2032 . Consider a pair of vertices. If they both belong to (G\u2032 \\ G\u2032i ) \u222a Vi (EM ), their\nconstraint in G\u2032 is the same as in G, and their motion is defined by M \u2217 which satisfies all distance\nconstraints. If they do not both belong to (G\u2032 \\ G\u2032i ) \u222a Vi (EM ), then due to the structure of the\ngraph they necessarily both belong to G\u2032i , and their motion is the rotation and/or translation\nwhich by essence preserve all distances.\n\u0003\nMoreover, we have the following necessary condition:\nTheorem\n\u0010S 10. Let\n\u0011 Gi for i = 1, 2, ...., |N | + |D| + |S| be rigid meta-vertices, and suppose\nG =\nN,D,S Gi \u222a EM (with N, D, S as defined at the beginning of this section) is rigid in\n\n\u2032 \u2286E\nR3 and contains at least three vertices. Then there exists EM\nM such that\n\u2032\n(i) |EM | = 6 |N | + 5 |D| + 3 |S| \u2212 6\n\u2032\u2032 \u2286 E \u2032 , there holds\n(ii) For all non-empty EM\nM\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032 )| + 3 |K(E \u2032\u2032 )| \u2212 6,\n|EM | \u2264 6 |I(EM )| + 5 |J(EM\nM\n\u2032\u2032\nwhere I(EM ) is the set of meta-vertices such that either there are at least three vertices within\n\u2032\u2032 , or precisely two vertices within the meta-vertex\nthe meta-vertex all incident to edges of EM\n\u2032\u2032 . J(E \u2032\u2032 ) is the set of meta-vertices such\nwhich are unconnected and both incident to edges of EM\nM\nthat there are precisely two vertices within the meta-vertex which are connected and both incident\n\u2032\u2032 ; K(E \u2032\u2032 ) is the set of meta vertices such that there is precisely one vertex within\nto edges of EM\nM\n\u2032\u2032 . Note that in each case, there\nthe meta-vertex that is incident to one or several edges of EM\ncan be an arbitrary number of vertices in the meta-vertex which are not incident on any edge of\n\u2032\u2032 .\nEM\n\u0011\n\u0010S\n\u2032 is rigid.\n\u222a EM\nMoreover, the graph\nG\ni\nN,D,S\n\nProof. The proof is similar to the one of Theorem 5 (necessary part). For every Gi , let G\u2032i be a\nminimally rigid subgraph of Gi on the same vertices, which therefore contains 3 |Vi | \u2212 6 edges if\nGi \u2208 N , one edge if Gi \u2208 D and no edge if Gi \u2286 S. As mentioned in its proof, Lemma 1 can also\nbe applied in a three-dimensional space. So if G is rigid, there is a minimally rigid subgraph\n\u2032 = E \u2032 \u2229 E ; we shall prove that E \u2032 satisfies the\nG\u2032 (V, E \u2032 ) \u2286 G containing all G\u2032i . Let EM\nM\nM\n\u2032\ncondition of this theorem.\nSince\nG\nis\nminimally\nrigid,\nthere holds |E \u2032 | = 3 |V | \u2212 6. Moreover,\nP\nP\n\u2032 |+\n\u2032\n\u2032\nwe have |E \u2032 | = |EM\nGi \u2208N |Ei | + |D|, and |V | =\nGi \u2208N |Vi | + 2 |D| + |S|, so that\nP\n\u2032 | = 3 |V | \u2212 6 \u2212\n|EM\nGi \u2208N (3 |Vi | \u2212 6) \u2212 |D|\n= 6 |N | + 5 |D| + 3 |S| \u2212 6.\n\n\f\u2032 contains thus the predicted number of edges. We suppose now that there is a set E \u2032\u2032 such\nEM\nM\n\u2032\u2032 | > 6 |I(E \u2032\u2032 )| + 5 |J(E \u2032\u2032 )| + 3 |K(E \u2032\u2032 )| \u2212 6 and show that this contradicts the minimal\nthat |EM\nM\nM\nM\n\u2032\u2032 and all E \u2032 for which i \u2208 I(E \u2032\u2032 ),\nrigidity of G\u2032 . Let us then build E \u2032\u2032 by taking the union of EM\ni\nM\n\u2032\u2032\n\u2032\u2032 ). There\nand the edge connecting the two vertices\nincident\nto\nE\nin\nall\nmeta-vertices\nin\nJ(E\nM\nM\nP\n\u2032\u2032 )| + 2 |J(E \u2032\u2032 )| +\nholds V (E \u2032\u2032 ) = |K(EM\n\u2032\u2032 ) |Vi |. Therefore, we have\nM\nGi \u2208I(EM\nP\n\u2032\n\u2032\u2032\n\u2032\u2032 | +\n|E \u2032\u2032 | = |EM\n\u2032\u2032 ) |Ei | + |J(EM )|\nGi \u2208I(EM\n\u2032\u2032\n\u2032\u2032\n\u2032\u2032 )| \u2212 6\n> 6 |I(E\nP M )| + 5 |J(EM )| + 3 |K(EM\n\u2032\u2032\n+ Gi \u2208I(E \u2032\u2032 ) (3 |Vi | \u2212 6) + |J(EM )|\nM\n= 3 |V (E \u2032\u2032 )| \u2212 6.\n\u0010S\n\u0011\n\u2032\nThis however contradicts the minimal rigidity of G\u2032 as E \u2032\u2032 \u2286 E \u2032 . Finally, since G\u2032 =\nN,D,S Gi \u222a\n\u0010S\n\u0011\n\u2032 is rigid, it follows from several applications of Proposition 5 that\n\u2032 is also\nEM\n\u222a EM\nG\ni\nN,D,S\nrigid.\n\u0003\nS\n\u2032 is explicitly mentioned here and not in Theorem 5,\nNote that the rigidity of ( Gi ) \u222a EM\nbecause in a two-dimensional space it follows directly from sufficiency of the counting conditions.\nBut, the counting conditions of Theorem 10 are not sufficient for rigidity, as the non-rigid graph\nof Fig. 1(c) which can be obtained by merging two rigid tetrahedral meta-vertices (1,3,4,5) and\n(2,6,7,8) would indeed satisfy them. Nevertheless, one can deduce from Theorem 10 that G is\nan edge-optimal rigid merging in R3 if and only if it is rigid and |EM | = 6 |N | + 5 |D| + 3 |S| \u2212 6,\n\u2032 exactly in the same way as in Theorem 6.\nusing EM\n\n4.2. Persistence. We consider now that all meta-vertices Gi are persistent graphs, and adapt\nthe definitions of N , D and S in consequence. Theorem 7 can be generalized to three dimensions,\nas it follows from Proposition 2, the proof of which can be immediately extended to three\ndimensions.\nTheorem 11. A collection of (structurally) persistent meta-vertices can be merged into a (structurally) persistent graph if and only if it can be merged into a (structurally) persistent graph by\nadding edges leaving vertices with one or more local DOFs. In that case, the merged graph is\npersistent if and only if it is rigid.\nProof. Suppose first that a collection of persistent meta-vertices can be merged into a persistent\ngraph in such a way that some edges do not leave local DOFs. Then, it follows from Proposition\n1 that these edges can be removed without destroying the persistence of the merged graph, so\nthat the same collections of meta-vertices can be merged without having connecting edges that\ndo not leave local DOFs. In case the meta-vertices are structurally persistent and are merged\ninto a structurally persistent graph, the result still holds as removing edges that do not leave\nlocal DOFs never destroys structural persistence. The reverse implication is trivial.\nThe proof of the rest of the result is done exactly as in Theorem 2, using Proposition 5 instead\nof Theorem 5.\n\u0003\nMerging two meta-vertices into a persistent graph is however a more complicated problem\nin R3 than in R2 . Consider indeed a meta-vertex Ga without any DOF, and a meta-vertex Gb\nwhich is not structurally persistent, i.e. which is persistent and contains two vertices (leaders)\nhaving three DOFs. The number of available DOFs is equal to the minimal number of edges that\nshould be added to obtain a rigid merged graph. However, the only way to add six edges leaving\nlocal DOFs is to add three edges leaving each leader of Gb and arriving in Ga , as represented\nby the example in Fig. 5(a). Only two vertices of Gb would thus be incident to the added\n\n\f***\n\nGa\n\nGb\n\n***\n\n***\n\n***\n\nGc\n\nGd\n\n***\n\n***\n\n(a)\n\n(b)\n\nFigure 5. Example of a persistent but not structurally persistent meta-vertex\nGb which cannot be merged into a persistent or rigid graph with the meta-vertex\nGa , the latter being persistent but having no DOF. (b) shows how two nonstructurally persistent meta-vertices can be merged into a structurally persistent\ngraph. The symbol \"*\" represents one DOF, and the dashed edges are the edges\nof EM .\n\n***\n\nGa\n\nGb\n\n***\n\nFigure 6. Ga and Gb both have all their DOFs concentrated on one leader. As\na result they cannot be merged into a persistent graph. The only way to add 6\nedges leaving local DOFs is depicted and does not lead to a rigid graph, because\nthe overall graph is not 3-connected. The symbol \"*\" represents one DOF, and\nthe dashed edges are the edges of EM .\nedges, which prevents the merged graph from being rigid and therefore persistent as it is thus\nnot 3-connected. We have thus proved the following condition:\nProposition 6. If two persistent meta-vertices are such that one is not structurally persistent\nand the other does not have any DOF, they cannot be merged into a persistent graph by addition\nof interconnecting edges.\nAnother problem appears when Ga and Gb each have one leader (having three DOFs) and no\nother vertex has DOFs. Again, the number of available DOFs is equal to the minimal number\nof edges that should be added to obtain a rigid merged graph, but the only way to add six edges\nleaving local DOFs does not lead to a rigid graph. One can indeed only add three edges leaving\neach leader as shown in Fig. 6. This results in a graph that is not 3-connected and therefore not\nrigid by Theorem 2, as the removal of the two ex-leaders would render the graph unconnected.\nWe have thus proved the following condition:\nProposition 7. If two persistent meta-vertices have each one leader (with 3 DOFs) and no\nother DOF, they cannot be merged into a persistent graph by addition of interconnecting edges.\n\n\fHowever, these are the only cases for which the argument used in establishing Proposition 3\ncannot be generalized to establish an analogous property in R3 :\nProposition 8. Two persistent meta-vertices (each with three or more vertices) can be merged\ninto a persistent graph by addition of directed connecting edges if and only if the sum of their\nDOFs is at least 6 and the DOFs are located on more than two vertices. At least six edges are\nneeded to perform this merging, and merging can always be done with exactly six edges and in\nsuch a way that the graph obtained is structurally persistent and does not have all its DOFs\nlocated on leaders.\nProof. Consider two meta-vertices each having more than 2 vertices. It follows from Theorem\n11 that they can be merged into a persistent graph if and only if it is possible to add directed\nedges leaving local DOFs in such a way that the obtained graph is rigid.\nSuppose first that the total number of available DOFs is 6. If all these DOFs are located on\ntwo leaders, the two graphs satisfy the conditions of either Proposition 6 or Proposition 7, so\nthat they cannot be merged into a persistent graph. If the 6 DOFs are located on more than\n2 vertices, an exhaustive verification (see Appendix) show that the two graphs can always be\nmerged into a rigid graph by adding 6 edges, each leaving a vertex with a local DOF, with at\nleast one DOF for each edge. Note that this exhaustive verification is needed as no sufficient\ncondition for rigidity of a graph obtained by connecting two rigid graphs is known which is\nsufficiently weak to be helpful for this proof.\nIf the total number of DOFs is larger than 6, they are located on at least 3 vertices, as a\nvertex has at most 3 DOFs. It is therefore possible to select a subset of 6 DOFs located on at\nleast 3 vertices, and to apply the result obtained above for 6 DOFs.\nThere remains to prove that the merging can always be done in such a way that the obtained\ngraph does not have all its DOFs located on leaders, or in other words the obtained graph\nhas only vertices with 0 or 3 DOFs (This also implies that the graph obtained is structurally\npersistent, as the only persistent graphs that are not structurally persistent are those with two\nleaders and therefore no other DOF). Such a situation, i.e. the obtained graph has only vertices\nwith 0 or 3 DOFs, could only happen if this graph has exactly 3 or 6 DOFs, and thus if 9 or\n12 DOFs are initially available, as the merge is done by addition of 6 edges. A simple way of\navoiding having all remaining DOFs on leaders is then to select the 6 DOFs that are going to\nbe removed in the merging process in such a way that a number of DOFs different from 3 and\n6 is left in each of the initial graphs. At least one vertex has then indeed one or two DOFs.\n\u0003\nIn case at least one of the two meta-vertices has less than 3 vertices, an exhaustive consideration of all possible cases (see Appendix) shows that the result still holds, but with a different\nrequired number of edges in EM and therefore of available DOFs: these minimal numbers\nare both equal to min |EM | in Table 1 (for the merging of a graph Ga (Va , Ea ) with a graph\nGb (Vb , Eb )). Observe that as in the 2-dimensional case, the merge can be done in such a way\nthat the number of missing DOFs is preserved, the number of missing DOFs being defined in the\nsame way as in Section 3.2, with maximal number of DOFs being 6, 5 and 3 for meta-vertices\nof respectively N , D and S. It is worth noting that even if one or both of the meta-vertices\nare not structurally persistent, it is possible to obtain a structurally persistent merged graph,\nas represented in Fig. 5(b). This has already been observed in [28] for the case where one\nmeta-vertex is a single vertex graph.\n\n\fConsider now a collection of meta-vertices such that the total number of vertices is at least 3.\nUnless the collection consists in two meta-vertices satisfying the hypotheses of Proposition 6 or 7,\nall the graphs that compose it can be merged into one large persistent graph by addition of edges.\nProposition 9. A collection of persistent meta-vertices N \u222a D \u222a S (with N, D, S as defined in\nthe beginning of this section) containing in total at least three vertices and that does not consist\nof only two meta-vertices satisfying the condition of Proposition 6 or 7 can be merged into a\npersistent graph if and only if the total number of missing DOFs is no greater than 6, or equivalently if the total number of local DOFs in N \u222a D \u222a S is at least 6 |N | + 5 |D| + 3 |S| \u2212 6. At\nleast 6 |N | + 5 |D| + 3 |S| \u2212 6 edges are needed to perform this merging. Merging can always be\ndone with exactly this number of edges, and in such a way that the merged graph is structurally\npersistent.\nProof. The proof is similar to the one of Proposition 4. If a pair of meta-vertices can be merged\ninto a persistent graph, this merging can be done in such a way that the number of missing\nDOFs is preserved, and by adding only edges leaving vertices with local DOFs (with at most\none edge for each DOF). Doing this recursively, we eventually obtain a single persistent graph\nthat has the same number of missing DOFs as the initial collection of graphs. The number of\nadded edges is then equal to the number of DOFs that have disappeared during the merging\nprocess, that is 6 |N | + 5 |D| + 3 |S| \u2212 6.\nThere remains to prove that these mergings can actually be done, and that the obtained graph\nis structurally persistent. By Proposition 8 (and its extension to graphs with 1 or 2 vertices),\nwhen their number of missing DOFs is smaller than 6, two persistent graphs can always be\nmerged into a structurally persistent graph, unless either one of them is not structurally persistent while the other has no DOF (case of Proposition 6), or both of them have one leader and\nno other DOF (case of Proposition 7). In these two cases, the two \"problematic\" meta-vertices\nhave at least three vertices each.\nSuppose first that one meta-vertex has no DOF (and that the rest of the meta-vertices collection does not consist in one single non structurally persistent meta-vertex). Then since the total\nnumber of missing DOF is 6, no other meta-vertex has a missing DOF, and by hypothesis there\nare at least two other meta-vertices (or possibly exactly one structurally persistent meta-vertex).\nIt follows then from successive applications of Proposition 8 that they all can be merged into a\nstructurally persistent graph that still does not have any missing DOF. This latter graph can\nthen be merged with the graph that has no DOF, and the graph obtained is also structurally\npersistent.\nSuppose now that two meta-vertices have exactly one leader and no other DOF. It follows then\nfrom the hypotheses that there is at least one other meta-vertex in the collection. And again,\nno other meta-vertex has any missing DOF. Temporarily isolating one of the meta-vertices with\none leader and no other DOF, it follows again from successive applications of Proposition 8 that\nall other graphs can be merged into a persistent graph that does not have all its DOFs located\non one single leader, and this graph can then be merged with the temporarily isolated graph\ninto a structurally persistent graph.\n\u0003\nAs in the two-dimensional case, a merged graph is an edge-optimal persistent merging if and\nonly if it is an edge-optimal rigid merging and all edges in EM (such as defined in the beginning of\nthis subsection) leave local DOFs. The proof of this is an immediate generalization of Theorem\n\n\f8. However, due to the absence of necessary and sufficient conditions allowing a combinatorial\nchecking of the rigidity of a graph or of a merged graph in R3 , the result cannot be expressed in\na purely combinatorial way. Since the number of edges in EM in an edge-optimal rigid merging\nis fixed, the above criterion can be re-expressed as\n\u0010S\n\u0011\nTheorem 12. G =\n\u222a EM (with N, D, S as defined at the beginning of this section\nG\ni\nN,D,S\nand with all Gi persistent) containing in total at least three vertices is an edge-optimal persistent\nmerging in R3 if and only if the following conditions all hold:\n(i) G is rigid.\n(ii) All edges of EM leave local DOFs.\n(iii) |EM | = 6 |N | + 5 |D| + 3 |S| \u2212 6.\n\nAgain, an efficient way to obtain an edge-optimal persistent merging from a collection of\nmeta-vertices satisfying the hypotheses of Proposition 9 is to first merge two of them and then\nto iterate, as in the discussion of Propositions 4 and 9.\n5. Conclusions\nWe have analyzed the conditions under which a formation resulting from the merging of\nseveral persistent formations is itself persistent. Necessary and sufficient conditions were found\nto determine which collections of persistent formations could be merged into a larger persistent\nformation. We first treated these issues in R2 . Our analysis was then generalized to R3 and to\nstructural persistence, leading to somewhat less powerful results. This is especially the case for\nthose which rely on the sufficient character of Laman's conditions for rigidity in R2 (Theorem 1),\nno equivalent condition being known in R3 . Following this work, we plan to develop systematic\nways to build all possible optimally merged persistent formations, similarly to what has been\ndone for minimally persistent formations [10] and for minimally rigid merged formations [27].\nThese references canvas generalizations of the Henneberg sequence concept [13, 22] for building\nall minimally rigid graphs in two dimensions.\nReferences\n[1] B.D.O. Anderson, C. Yu, B. Fidan, and J.M. Hendrickx. Use of meta-formations for cooperative control.\nIn Proceedings of the 17th International Symposium on Mathematical Theory of Networks and Systems\n(MTNS2006), pages 2381\u20132387, Kyoto (Japan), July 2006.\n[2] J. Baillieul and A. Suri. Information patterns and hedging brockett's theorem in controlling vehicle formations. In Proc. of the 42nd IEEE Conf. on Decision and Control, volume 1, pages 556\u2013563, Hawaii, December\n2003.\n[3] J.M. Borky. Payload technologies and applications for uninhabited air vehicles (uavs). In Proc. of the IEEE\nAerospace Conf., volume 3, pages 267\u2013283, Aspen (CO), USA, February 1997.\n[4] A. Das, R. Fierro, V. Kumar, and Ostrowski J.P. A vison based formation control framework. IEEE trans.\non Robotics and Automation, 18(5):813\u2013825.\n[5] K. Dogancay. Optimal receiver trajectories for scan-based radar localization. In Proc. Information, Decision\nand Control Conference 2007, Adelaide (SA), Australia, February 2007.\n[6] T. Eren, B.D.O. Anderson, A.S. Morse, Whiteley W., and P.N. Belhumeur. Information structures to secure\ncontrol of rigid formations with leader-follower structure. In Proc. of the American Control Conference, pages\n2966\u20132971, Portland, Oregon, June 2005.\n[7] T. Eren, B.D.O. Anderson, W. Whiteley, A.S. Morse, and P.N. Belhumeur. Operations on rigid formations\nof autonomous agents. Communications in Onformations and Systems, 3(4):223\u2013258, 2004.\n[8] H.R Everett. Sensors for Mobile Robots: Theory and Application. A.K. Peters, 1995.\n[9] J.M. Hendrickx, B.D.O. Anderson, J.-C. Delvenne, and V.D. Blondel. Directed graphs for the analysis of\nrigidity and persistence in autonomous agents systems. International Journal of Robust and Nonlinear Control, 17:960\u2013981, 2007.\n\n\f[10] J.M. Hendrickx, B. Fidan, C. Yu, B.D.O. Anderson, and V.D. Blondel. Primitive operations for the construction and reorganization of minimally persistent formations. To appear in IEEE Transactions on Automatic\nControl.\n[11] J.M. Hendrickx, C. Yu, B. Fidan, and B.D.O. Anderson. Rigidity and persistence of meta-formations. In\nProceedings of the 45th IEEE Conference on Decision and Control, pages 4567\u20134663, San Diego (CA), USA,\nDecember 2006.\n[12] J.M. Hendrickx, C. Yu, B. Fidan, and B.D.O. Anderson. Rigidity and persistence for ensuring shape maintenance in multiagent meta-formations. To appear in Asian Journal of control's special issue on Collective\nBehavior and Control of Multi-Agent Systems, 2008.\n[13] L. Henneberg. Die graphische Statik der starren Systeme. Leipzig, 1911.\n[14] Donald J. Jacobs and Bruce Hendrickson. An algorithm for two-dimensional rigidity percolation: the pebble\ngame. J. Comput. Phys., 137(2):346\u2013365, 1997.\n[15] G. Laman. On graphs and rigidity of plane skeletal structures. J. Engrg. Math., 4:331\u2013340, 1970.\n[16] A. Mantler and J. Snoeyinkn. Banana spiders: A study of connectivity in 3d combinatorial rigidity. In Proceedings of the 16th Canadian Conference on Computational Geometry (CCCG 2004), pages 44\u201347, Montr\u00e9al,\nCanada, August 2004.\n[17] S. Martinez and F. Bullo. Optimal sensor placement and motion coordination for target tracking. Automatica,\n42(3):661\u2013668, 2006.\n[18] C. Moukarzel. An efficient algorithm for testing the generic rigidity of graphs in the plane. J. Phys. A,\n29(24):8079\u20138098, 1996.\n[19] R. Olfati-Saber and R.M Murray. Graph rigidity and distributed formation stabilization of multi-vehicle\nsystems. In Proceedings of the 41st Conference on Decision and Control, volume 3, pages 2965\u20132971, Las\nVegas, NV, December 2002.\n[20] M. Pachter and J. Hebert. Cooperative aircraft control for minimum radar exposure, pages 199\u2013211. Kluwer\nAcademic, 2002.\n[21] H.G. Tanner, G.J. Pappas, and V. Kumar. Leader-to-formation stability. IEEE Transactions on Robotics and\nAutomation, 4(3):433\u2013455, 2004.\n[22] T. Tay and W. Whiteley. Generating isostatic frameworks. Structural Topology, (11):21\u201369, 1985.\n[23] T.S. Tay. Rigidity of multigraphs. I. Linking rigid bodies in n-space. J. Combin. Theory Ser. B, 36(1):95\u2013112,\n1984.\n[24] W. Whiteley. Some matroids from discrete applied geometry. In Matroid theory (Seattle, WA, 1995), volume\n197 of Contemp. Math., pages 171\u2013311. Amer. Math. Soc., Providence, RI, 1996.\n[25] A. Williams, S. Glavas\u0306ki, and T. Samad. Formations of formations: Hierarchy and stability. In Proc. of the\n2004 American Control Conference, pages 2992\u20132997, Boston (MA), USA, July 2004.\n[26] C. Yu, B. Fidan, and B.D.O. Anderson. Principles to control autonoumous formation merging. Proc. of the\n2006 American Control Conference, pages 762\u2013768, June 2006.\n[27] C. Yu, B. Fidan, J.M. Hendrickx, and B.D.O. Anderson. Multiple formations merging: a meta-formation\nprospective. In Proceedings of the 45th IEEE Conference on Decision and Control, pages 4657\u20134663, San\nDiego (CA, USA), December 2006.\n[28] C. Yu, J.M. Hendrickx, B. Fidan, B.D.O. Anderson, and V.D. Blondel. Three and higher dimensional autonomous formations: Rigidity, persistence and structural persistence. Automatica, 43:387\u2013402, 2007.\n\nIn this appendix, we complete the proof of Proposition 8 on the merging of persistent metavertices in a 3-dimensional space, and extend this proposition to cases where one of the metavertices has less than 3 vertices. We have to prove that two persistent graphs (in a threedimensional space) Ga and Gb having in total 6 DOFs located on at least three vertices can\nalways be merged into a rigid graph by addition of six edges leaving vertices with local DOFs,\nwith at least one local DOF for each added edge.\nFor this purpose, we use the following lemma, which summarizes results obtained in [26].\nLemma 2. Let Ga and Gb be two (initially distinct) rigid graphs each with three or more vertices. Performing a sequence of three or more operations selected among the two following types\nof operations results in merging Ga and Gb into a rigid graph by addition of 6 edges.\nOperation (v): Taking a vertex i of Ga not connected yet to any vertex of Gb , and connecting it\nto 3 \u2212 t vertices of Gb , where t is the number of operations already performed.\nOperation (e): Taking a vertex i of Ga not connected yet to any vertex of Gb , and an edge (k, j)\nwith k \u2208 VA and j \u2208 VB . Replacing the edge (k, j) by (i, j) and connecting i to 2 \u2212 t other\n\n\fd+\nEM\nGa\n\nGa\n\nGb\n\nGb\n\n3\n\n2\n\n1\n\nOperations: (v)(v)(v)\n\n(a)\n\n(b)\n\nFigure 7. (a) represents a rigid merged graph obtained by performing three\noperations (v). It is shown in (b) how directions can be given to the edges in\nsuch a way that three vertices of Ga are left by respectively 3, 2 and 1 edges.\nvertices in Gb , where t is the number of operations already performed.\nWithout loss of generality, we suppose that Ga has at least as many DOFs as Gb . The partition of DOFs can thus be 6-0, 5-1, 4-2 or 3-3. In the sequel, we prove the result for each of\nthese particular cases, starting with Ga having 6 DOFs.\nIt follows from Lemma 2 that the merged graph represented in Fig. 7(a) is rigid. It can\nindeed be obtained by three applications of the operation (v). Moreover, one can see in Fig.\n7(b) that directions can be given to the connecting edges in such a way that the out-degree\ndistribution (with respect to the connecting edges) is (3, 2, 1), that is one vertex of Ga is left by\nthree connecting edges, one by two, and one by one. Suppose now that Ga is a persistent graph\nwith 6 DOFs with a DOF allocation (3, 2, 1), that is a persistent graph having one vertex having\n3 DOFs, one 2 DOFs, and one 1 DOF. Then it can be merged with Gb into a rigid graph by\nadding 6 edges leaving vertices with local DOF (with one DOF for each edge). It suffices indeed\nto take the edges represented in Fig. 7(b), identifying each vertex with \u03b4 DOFs with a vertex\nleft by \u03b4 connecting edges.\nWe now treat a DOF allocation (2, 2, 2). It follows again from Lemma 2 that the merged\ngraph represented in Fig. 8(a) is rigid, as it can be obtained by two applications of the operation (v) followed by one application of operation (e). Moreover, Fig. 8(b) shows that directions\ncan be assigned to the edges in such a way that the out-degree distribution (with respect to the\nconnecting edges) is (2, 2, 2). For the same reason as above, Ga can thus be merged with Gb\ninto a rigid graph by adding 6 edges leaving vertices with local DOF (with one DOF for each\nedge) if its DOF distribution is (2, 2, 2).\nNext we show that such construction can be obtained in all other cases, except those where\nthe 6 DOFs are all located on two vertices. When Ga has 6 DOFs, the remaining possible DOF\ndistributions are (3, 1, 1, 1), (2, 2, 1, 1), (2, 1, 1, 1, 1) and (1, 1, 1, 1, 1, 1), the case (3, 3) does not\nsatisfy the hypotheses. The construction in these four cases are obtained by performing the\noperation (e) of Lemma 2 (up to three times) on the constructions detailed above for (3, 2, 1)\nand (2, 2, 2). They are represented in Fig. 9\nIf Ga has 5 DOFs and Gb one DOF, the required construction can always be obtained from\none of the construction for the case where Ga has 6 DOFs. It suffices indeed to use one of the\n\n\fd+\nEM\nGa\n\nGa\n\nGb\n\nGb\n\n2\n\n2\n\n2\n\nOperations: (v)(v)(e)\n\n(a)\n\n(b)\n\nFigure 8. (a) represents a rigid merged graph obtained by performing three\noperations (v). It is shown in (b) how directions can be given to the edges in\nsuch a way that the three vertices of Ga are each left by 2 edges.\nd+\nEM 3\n\n1\n\n1\n\nd+\nEM 2\n\n1\n\nGa\n\nGa\n\nGb\n\nGb\n\nOperations: (e) from (3,2,1)\n\nd+\nEM 2\n\n2\n\n1\n\nOperations: (e) from (3,1,1,1)\n\nd+\nEM\n\n1\n\nGa\n\nGa\n\nGb\n\nGb\n\nOperations: (e) from (2,2,2)\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\nOperations: (e) from (2,1,1,1,1)\n\nFigure 9. Representations of how a rigid graph can be obtained by merging two\npersistent graphs Ga and Gb where Gb has no DOF and where the DOF allocation\nof Ga is (3, 1, 1, 1), (2, 2, 1, 1), (2, 1, 1, 1, 1) or (1, 1, 1, 1, 1, 1). The operations (v)\nand (e) used to obtain the structure are also mentioned.\nconstructions already provided by temporarily adding one vertex with one DOF to the distribution of 5 DOFs in Ga , executing the appropriate construction from the group above, and then\nreversing the direction of the edge leaving a vertex with one DOF, as shown in Fig. 10 for a\nDOF distribution (3, 2).\nSuppose now that Ga has 4 DOFs, and Gb 2 DOFs. Then the possible DOF distribution for\nGa are (3, 1), (2, 2), (2, 1, 1) and (1, 1, 1, 1). For Gb , they are (2) and (1, 1). The construction\nproving the result for these eight cases are shown in Fig. 11.\nFinally, if both graphs have 3 DOFs, the possible distribution for each are (3), (2, 1) and\n(1, 1, 1). The case where they both have a distribution (3) does not satisfy the hypotheses of\nthis Proposition, and three other cases do not need to be treated for symmetry reasons. The\n\n\fd+\nEM\n\n3\n\nd+\nEM\n\n1\n\n2\n\nGa\n\nGa\n\nGb\n\nGb\nd+\nEM\n\n3\n\n2\n\n1\n\nFigure 10. Representation of how the construction for a DOF partition 5-1\nbetween Ga and Gb can be obtained from a construction for a partition 6-0.\nd+\nEM\n\n3\n\nd+\nEM\n\n1\n\nGa\n\nGa\n\nGb\n\nGb\n\nd+\nEM\n\n2\n\n1\n\n1\n\nd+\nEM\n\n1\n\n1\n\nd+\nEM\n\nGa\n\nGa\n\nGa\n\nGb\n\nGb\n\nGb\n\nd+\nEM\n\n1\n\nd+\nEM 1\n\nd+\nEM\n\n1\n\n1\n\nGa\n\n2\n\nd+\nEM 1\n\n2\n\nd+\nEM\n\n2\n\n1\n\n2\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\n1\n\nGa\n\nGb\nd+\nEM\n\n1\n\n2\n\nGb\n\nd+\nEM\n\n2\n\nd+\nEM\n\n1\n\nGa\n\nd+\nEM\n\n2\n\n2\n\n3\n\nGb\n2\n\nd+\nEM\n\nFigure 11. Constructions for the eight possible DOF allocations when Ga has 4\nDOFs and Gb 2 DOFs. The graphs are all rigid are they have the same undirected\nunderlying graphs as construction in Fig. 7, 8 or 9.\nconstruction for the remaining 5 cases is shown in Fig. 12.\nWe now suppose that at least one of the graphs has less than 3 vertices, and show that a\nrigid graph can be obtained by adding directed edges leaving vertices with local DOFs, the\nnumber of these edges being provided in Table 1. Observe that a graph consisting of one single\nvertex always has 3 DOFs, and thus that it is never needed to use any DOF of the other graph.\nSimilarly, each vertex of a graph containing two vertices has at least 2 DOFs, so that at most\none DOF of the other graph needs to be used, and only when the other graph has three or\nmore vertices. Fig. 13 shows how these mergings can be performed. Note that the rigidity of\n\n\fd+\nEM\n\n1\n\n2\n\n2\n\nd+\nEM\n\n1\n\nGa\n\nGa\n\nGa\n\nGb\n\nGb\n\nGb\n\nd+\nEM\n\n1\n\nd+\nEM\n\n2\n\nd+\nEM\n\n1\n\n1\n\n1\n\nGa\n\nGb\n\nGb\nd+\nEM\n\nGa\nd+\nEM\n\n1\n\n1\n\n1\n\nd+\nEM\n\n1\n\nd+\nEM\n\n1\n\n1\n\n3\n\n1\n\n1\n\n2\n\n1\n\n1\n\n3\n\nFigure 12. Constructions for the five different DOF allocations satisfying the\nhypothesis of Proposition 8 when each of Ga and Gb has 3 DOFs. The graphs\nare all rigid are they have the same undirected underlying graphs as construction\nin Fig. 7, 8 or 9 or rotated versions of them.\nd+\nEM = 1\n\nd+\nEM = 2\n\nGa\n\nGa\n\nGb\n\nGb\n\n2\n\nGb\n\nd+\nEM = 3\n\n2\nd+\nEM\nGa\n\nGa\n\nGb\n\nd+\nEM 2\nGa\n\n2\n\nGb\nd+\nEM = 1\n\nFigure 13. Illustration of the merging between two graphs, one of which at least\nhas less than 3 vertices. The dashed line represent the internal edge(s) of graphs\nwith two vertices, the orientation of which is not relevant for our purpose. The\nvertex count in Gb is precisely 1,2 and 2 for the first three and a minimum of 3\nfor the last two.\nthe three first graphs is immediate as they are complete graphs. The rigidity of the other two\nfollows from the fact that they can be obtained from Gb by performing one of two operations\n(v), which guarantees the rigidity of the graph obtained [22].\n\n\f"}