{"id": "http://arxiv.org/abs/math/0304428v1", "guidislink": true, "updated": "2003-04-27T18:02:10Z", "updated_parsed": [2003, 4, 27, 18, 2, 10, 6, 117, 0], "published": "2003-04-27T18:02:10Z", "published_parsed": [2003, 4, 27, 18, 2, 10, 6, 117, 0], "title": "Formal power series arising from multiplication of quantum integers", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0304448%2Cmath%2F0304025%2Cmath%2F0304009%2Cmath%2F0304474%2Cmath%2F0304103%2Cmath%2F0304236%2Cmath%2F0304278%2Cmath%2F0304291%2Cmath%2F0304268%2Cmath%2F0304476%2Cmath%2F0304115%2Cmath%2F0304324%2Cmath%2F0304102%2Cmath%2F0304478%2Cmath%2F0304104%2Cmath%2F0304297%2Cmath%2F0304446%2Cmath%2F0304259%2Cmath%2F0304288%2Cmath%2F0304375%2Cmath%2F0304280%2Cmath%2F0304211%2Cmath%2F0304455%2Cmath%2F0304454%2Cmath%2F0304134%2Cmath%2F0304304%2Cmath%2F0304223%2Cmath%2F0304192%2Cmath%2F0304188%2Cmath%2F0304152%2Cmath%2F0304229%2Cmath%2F0304412%2Cmath%2F0304449%2Cmath%2F0304265%2Cmath%2F0304215%2Cmath%2F0304033%2Cmath%2F0304014%2Cmath%2F0304459%2Cmath%2F0304344%2Cmath%2F0304433%2Cmath%2F0304057%2Cmath%2F0304500%2Cmath%2F0304489%2Cmath%2F0304113%2Cmath%2F0304301%2Cmath%2F0304419%2Cmath%2F0304226%2Cmath%2F0304079%2Cmath%2F0304077%2Cmath%2F0304294%2Cmath%2F0304145%2Cmath%2F0304322%2Cmath%2F0304461%2Cmath%2F0304328%2Cmath%2F0304493%2Cmath%2F0304243%2Cmath%2F0304260%2Cmath%2F0304348%2Cmath%2F0304251%2Cmath%2F0304195%2Cmath%2F0304099%2Cmath%2F0304250%2Cmath%2F0304040%2Cmath%2F0304308%2Cmath%2F0304405%2Cmath%2F0304283%2Cmath%2F0304488%2Cmath%2F0304480%2Cmath%2F0304299%2Cmath%2F0304171%2Cmath%2F0304334%2Cmath%2F0304279%2Cmath%2F0304380%2Cmath%2F0304042%2Cmath%2F0304471%2Cmath%2F0304420%2Cmath%2F0304133%2Cmath%2F0304235%2Cmath%2F0304087%2Cmath%2F0304264%2Cmath%2F0304475%2Cmath%2F0304196%2Cmath%2F0304132%2Cmath%2F0304011%2Cmath%2F0304111%2Cmath%2F0304126%2Cmath%2F0304070%2Cmath%2F0304059%2Cmath%2F0304214%2Cmath%2F0304482%2Cmath%2F0304350%2Cmath%2F0304460%2Cmath%2F0304107%2Cmath%2F0304148%2Cmath%2F0304462%2Cmath%2F0304244%2Cmath%2F0304120%2Cmath%2F0304182%2Cmath%2F0304428%2Cmath%2F0304472%2Cmath%2F0304311&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Formal power series arising from multiplication of quantum integers"}, "summary": "For the quantum integer [n]_q = 1+q+q^2+... + q^{n-1} there is a natural\npolynomial multiplication such that [mn]_q = [m]_q \\otimes_q [n]_q. This\nmultiplication is given by the functional equation f_{mn}(q) = f_m(q) f_n(q^m),\ndefined on a sequence {f_n(q)} of polynomials such that f_n(0)=1 for all n. It\nis proved that if {f_n(q)} is a solution of this functional equation, then the\nsequence {f_n(q)} converges to a formal power series F(q).\n  Quantum mulitplication also leads to the functional equation f(q)F(q^m) =\nF(q), where f(q) is a fixed polynomial or formal power series with constant\nterm f(0)=1, and F(q)=1+\\sum_{k=1}^{\\infty}b_kq^k is a formal power series. It\nis proved that this functional equation has a unique solution F(q) for every\npolynomial or formal power series f(q). If the degree of f(q)is at most m-1,\nthen there is an explicit formula for the coefficients b_k of F(q) in terms of\nthe coefficients of f(q) and the m-adic representation of k.\n  The paper also contains a review of convergence properties of formal power\nseries with coefficients in an arbitrary field or integeral domain.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=math%2F0304448%2Cmath%2F0304025%2Cmath%2F0304009%2Cmath%2F0304474%2Cmath%2F0304103%2Cmath%2F0304236%2Cmath%2F0304278%2Cmath%2F0304291%2Cmath%2F0304268%2Cmath%2F0304476%2Cmath%2F0304115%2Cmath%2F0304324%2Cmath%2F0304102%2Cmath%2F0304478%2Cmath%2F0304104%2Cmath%2F0304297%2Cmath%2F0304446%2Cmath%2F0304259%2Cmath%2F0304288%2Cmath%2F0304375%2Cmath%2F0304280%2Cmath%2F0304211%2Cmath%2F0304455%2Cmath%2F0304454%2Cmath%2F0304134%2Cmath%2F0304304%2Cmath%2F0304223%2Cmath%2F0304192%2Cmath%2F0304188%2Cmath%2F0304152%2Cmath%2F0304229%2Cmath%2F0304412%2Cmath%2F0304449%2Cmath%2F0304265%2Cmath%2F0304215%2Cmath%2F0304033%2Cmath%2F0304014%2Cmath%2F0304459%2Cmath%2F0304344%2Cmath%2F0304433%2Cmath%2F0304057%2Cmath%2F0304500%2Cmath%2F0304489%2Cmath%2F0304113%2Cmath%2F0304301%2Cmath%2F0304419%2Cmath%2F0304226%2Cmath%2F0304079%2Cmath%2F0304077%2Cmath%2F0304294%2Cmath%2F0304145%2Cmath%2F0304322%2Cmath%2F0304461%2Cmath%2F0304328%2Cmath%2F0304493%2Cmath%2F0304243%2Cmath%2F0304260%2Cmath%2F0304348%2Cmath%2F0304251%2Cmath%2F0304195%2Cmath%2F0304099%2Cmath%2F0304250%2Cmath%2F0304040%2Cmath%2F0304308%2Cmath%2F0304405%2Cmath%2F0304283%2Cmath%2F0304488%2Cmath%2F0304480%2Cmath%2F0304299%2Cmath%2F0304171%2Cmath%2F0304334%2Cmath%2F0304279%2Cmath%2F0304380%2Cmath%2F0304042%2Cmath%2F0304471%2Cmath%2F0304420%2Cmath%2F0304133%2Cmath%2F0304235%2Cmath%2F0304087%2Cmath%2F0304264%2Cmath%2F0304475%2Cmath%2F0304196%2Cmath%2F0304132%2Cmath%2F0304011%2Cmath%2F0304111%2Cmath%2F0304126%2Cmath%2F0304070%2Cmath%2F0304059%2Cmath%2F0304214%2Cmath%2F0304482%2Cmath%2F0304350%2Cmath%2F0304460%2Cmath%2F0304107%2Cmath%2F0304148%2Cmath%2F0304462%2Cmath%2F0304244%2Cmath%2F0304120%2Cmath%2F0304182%2Cmath%2F0304428%2Cmath%2F0304472%2Cmath%2F0304311&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "For the quantum integer [n]_q = 1+q+q^2+... + q^{n-1} there is a natural\npolynomial multiplication such that [mn]_q = [m]_q \\otimes_q [n]_q. This\nmultiplication is given by the functional equation f_{mn}(q) = f_m(q) f_n(q^m),\ndefined on a sequence {f_n(q)} of polynomials such that f_n(0)=1 for all n. It\nis proved that if {f_n(q)} is a solution of this functional equation, then the\nsequence {f_n(q)} converges to a formal power series F(q).\n  Quantum mulitplication also leads to the functional equation f(q)F(q^m) =\nF(q), where f(q) is a fixed polynomial or formal power series with constant\nterm f(0)=1, and F(q)=1+\\sum_{k=1}^{\\infty}b_kq^k is a formal power series. It\nis proved that this functional equation has a unique solution F(q) for every\npolynomial or formal power series f(q). If the degree of f(q)is at most m-1,\nthen there is an explicit formula for the coefficients b_k of F(q) in terms of\nthe coefficients of f(q) and the m-adic representation of k.\n  The paper also contains a review of convergence properties of formal power\nseries with coefficients in an arbitrary field or integeral domain."}, "authors": ["Melvyn B. Nathanson"], "author_detail": {"name": "Melvyn B. Nathanson"}, "author": "Melvyn B. Nathanson", "arxiv_comment": "27 pages, LaTex", "links": [{"href": "http://arxiv.org/abs/math/0304428v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/math/0304428v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.NT", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.NT", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.CO", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "30B12, 81R50, 11B13", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/math/0304428v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/math/0304428v1", "journal_reference": "Unusual applications of number theory, American Math. Society,\n  2004, pages 145--167", "doi": null, "fulltext": "arXiv:math/0304428v1 [math.NT] 27 Apr 2003\n\nFormal power series arising from\nmultiplication of quantum integers\u2217\nMelvyn B. Nathanson\u2020\nDepartment of Mathematics\nLehman College (CUNY)\nBronx, New York 10468\nEmail: nathansn@alpha.lehman.cuny.edu\nNovember 7, 2018\n\nAbstract\nFor the quantum integer [n]q = 1+q +q 2 +* * *+q n\u22121 there is a natural\npolynomial multiplication such that [mn]q = [m]q \u2297q [n]q . This multiplication is described by the functional equation fmn (q) = fm (q)fn (q m ),\ndefined on a given sequence F = {fn (q)}\u221e\nn=1 of polynomials such that\nfn (0) = 1 for all n. If F = {fn (q)}\u221e\nn=1 is a solution of the functional\nequation, then there exists a formal power series F (q) such that the sequence {fn (q)}\u221e\nn=1 converges to F (q).\nQuantum mulitplication suggests the functional equation\nf (q)F (q m ) = F (q),\nwhere f (q) is a fixed polynomial\npower series with constant\nP or formal\nk\nterm f (0) = 1, and F (q) = 1 + \u221e\nk=1 bk q is a formal power series. It is\nproved that this functional equation has a unique solution F (q) for every\npolynomial or formal power series f (q). If the degree of f (q) is at most\nm \u2212 1, then there is an explicit formula for the coefficients bk of F (q) in\nterms of the coefficients of f (q) and the m-adic representation of k.\nThe paper also contains a review of convergence properties of formal\npower series with coefficients in an arbitrary field or integeral domain.\n\n1\n\nQuantum multiplication\n\nNathanson [1, 2] introduced the functional equation for multiplication of quantum integers as follows.\n\u2217 2000\n\nMathematics Subject Classification: Primary 30B12, 81R50. Secondary 11B13. Key\nwords and phrases. Quantum integers, quantum polynomial, polynomial functional equation,\nq-series, formal power series.\n\u2020 This work was supported in part by grants from the NSA Mathematical Sciences Program\nand the PSC-CUNY Research Award Program.\n\n1\n\n\fLet N= {1, 2, 3, . . .} denote the set of positive integers and N0 = N \u222a {0}\nthe set of nonnegative integers. For n \u2208 N, the polynomial\n[n]q = 1 + q + q 2 + * * * + q n\u22121\nis called the quantum integer n. With the usual multiplication of polynomials,\nhowever, we observe that [m]q [n]q 6= [mn]q for all m \u2265 2 and n \u2265 2. We would\nlike to define a polynomial multiplication such that the product of the quantum\nintegers [m]q and [n]q is [mn]q .\nLet F = {fn (q)}\u221e\nn=1 be a sequence of polynomials with coefficients in a field.\nWe define a multiplication operation on the polynomials in F by\nfm (q) \u2297q fn (q) = fm (q)fn (q m ).\nIf fn (q) = [n]q is the n-th quantum integer, then\n[m]q \u2297q [n]q = [m]q [n]qm\n= 1 + q + q 2 + * * * + q m\u22121\n= 1 + q + q 2 + * * * + q mn\u22121\n= [mn]q\n\n\u0001\u0010\n\n1 + q m + q 2m + * * * + q m(n\u22121)\n\n\u0011\n\nfor all positive integers m and n, and so the sequence F = {[n]q }\u221e\nn=1 satisfies\nthe functional equation\nfmn (q) = fm (q) \u2297q fn (q).\n\n(1)\n\nThis is called the functional equation for quantum multiplication.\nMany other sequences of polynomials also satisfy this functional equation.\nFor example, for every positive integer t, the sequence of polynomials {q t(n\u22121) }\u221e\nn=1\nsatisfies (1).\nProblem 1 Determine all sequences of polynomials F = {fn (q)}\u221e\nn=1 that satisfy the functional equation\nfmn (q) = fm (q) \u2297q fn (q).\nThe sequence of F = {fn (q)}\u221e\nn=1 is called nonzero if fn (q) 6= 0 for some\ninteger n. The functional equation implies that\nf1 (q) = f1 (q)2 ,\nand so f1 (q) = 0 or 1. If f1 (q) = 0, then\nfn (q) = f1*n (q) = f1 (q)fn (q) = 0\nfor all n \u2208 N. Therefore, a solution F = {fn (q)}\u221e\nn=1 of (1) is nonzero if and\nonly if f1 (q) = 1.\n2\n\n\fThe support of F is the set\nsupp(F ) = {n \u2208 N : fn (q) 6= 0}.\nIf a nonzero sequence of polynomials F = {fn (q)}\u221e\nn=1 is a solution of the functional equation (1), then supp(F ) is a multiplicative subsemigroup of the positive integers. Nathanson [1] proved that supp(F ) is a semigroup of the form\nS(P ), where P is a set of prime numbers and S(P ) is the semigroup of positive\nintegers generated by P .\nEvery nonzero polynomial f (q) with coefficients in a field can be written\nuniquely in the form\nf (q) = aq v(f ) g(q),\n(2)\nwhere a 6= 0, v(f ) \u2208 N0 , and g(q) is a polynomial with constant term g(0) = 1.\nLet F = {fn (q)}\u221e\nn=1 be a nonzero sequence of polynomials that is a solution of\nthe functional equation (1). We represent each nonzero polynomial fn (q) in the\nform\nfn (q) = a(n)q v(fn ) gn (q),\nwhere a(n) 6= 0, v(fn ) \u2208 N0 , and gn (0) = 1. We define gn (q) = 0 and a(n) = 0\nfor all n \u2208 N0 \\ supp(F ).\nFor all m, n \u2208 supp(F ), we have\na(mn)q v(fmn ) gmn (q) = fmn (q)\n= fm (q)fn (q m )\n= a(m)q v(fm ) gm (q)a(n)q mv(fn ) gn (q m )\n= a(m)a(n)q v(fm )+mv(fn ) gm (q)gn (q m ).\nSince\ngmn (0) = gm (0)gn (0) = 1,\nit follows that\na(mn) = a(m)a(n)\nfor all m, n \u2208 supp(F ), and so a is a completely multiplicative arithmetic function on the semigroup supp(F ) with a(n) 6= 0 for all n \u2208 supp(F ). Similarly,\nq v(fmn ) = q v(fm )+mv(fn ) ,\nand so\nv(fm ) + mv(fn ) = v(fmn ) = v(fnm ) = v(fn ) + nv(fm )\nfor all integers m and n in supp(F ). This implies that there exists a nonnegative\nrational number t such that\nv(fm )\nv(fn )\n=\n=t\nm\u22121\nn\u22121\nfor all m, n \u2208 supp(F ) \\ {1}. Moreover,\nt(n \u2212 1) \u2208 N0\n3\n\n\fand\nq v(fn ) = q t(n\u22121)\nfor all n \u2208 supp(F ).\nFinally, we see that G = {gn (q)}\u221e\nn=1 is also a solution of the functional\nequation for quantum multiplication with supp(G) = supp(F ), and gn (0) = 1\nfor all n \u2208 supp(G). It follows that to solve Problem 1 it suffices to classify\nsolutions F = {fn (q)}\u221e\nn=1 of (1) such that fn (0) = 1 for all n \u2208 supp(F ).\nLet F = {fn (q)}\u221e\nn=1 be a solution of (1). The operation \u2297q is commutative\non F since\nfm (q) \u2297q fn (q) = fmn (q) = fnm (q) = fn (q) \u2297q fm (q).\nEquivalently,\nfm (q)fn (q m ) = fn (q)fm (q n )\n\n(3)\n\nfor all positive integers m and n. Moreover,\ndeg(fm ) + m deg(fn ) = deg(fn ) + n deg(fm ),\nand so deg(fm ) = t(m\u2212 1) and deg(fn ) = t(n\u2212 1) for some nonnegative rational\nnumber t. This suggests the following problem.\nProblem 2 Let m and n be positive integers. For a fixed polynomial fm (q),\ndetermine all polynomials fn (q) that satisfy the functional equation\nfm (q)fn (q m ) = fn (q)fm (q n ).\nP\nPt(n\u22121)\nLet fm (q) = t(m\u22121)\nai q i and fn (x) = j=0\nbj q j be polynomials of dei=0\ngrees t(m \u2212 1) and t(n \u2212 1), respectively, with constant terms a0 = b0 = 1. If\nfm (q) and fn (q) satisfy equation (3), then\n\uf8f6\n\uf8eb\nt(n\u22121)\nt(n\u22121)\n\u0011\n\u0010\nX\nX\nbj q j \uf8f8 1 + a1 q n + * * * + at(m\u22121) q nt(m\u22121) .\nbj q mj = \uf8ed\nfm (q)\nj=0\n\nj=0\n\nLetting n tend to infinity, we obtain the functional equation\nfm (q)\n\n\u221e\nX\n\nbj q mj =\n\n\u221e\nX\n\nbj q j ,\n\nj=0\n\nj=0\n\nor, equivalently,\nfm (q)F (q m ) = F (q),\nwhere\nF (q) =\n\n\u221e\nX\n\nbk q k\n\nk=0\n\nis a formal power series with constant term b0 = 1.\n4\n\n\fProblem 3 Let m be positive integer and f (q) a polynomial or formal power\nseries with constant term f (0) = 1. Determine all formal power series F (q) that\nsatisfy the functional equation\nf (q)F (q m ) = F (q).\n\n(4)\n\nProblems 1 and 2 are unsolved. Problem 3, however, will be solved in Section 4, where we prove that for every polynomial f (q), and, more generally, for\nevery formal power series f (q) with constant term f (0) = 1, there is a unique\nformal power series F (q) that is a solution of the functional equation\nf (q)F (q m ) = F (q).\nMoreover, we shall explicitly construct the coefficients of the formal power series\nF (q) when f (q) is a polynomial of degree at most m \u2212 1.\n\n2\n\nConvergence of formal power series\n\nWe review here some elementary convergence properties of formal power series\nwith coefficients in a ring.\n\n2.1\n\nThe ring of formal powers series\n\nA formal power series in the variable q with coefficients in a ring R is an expression of the form\n\u221e\nX\n\nan q n = a0 + a1 q = a2 q 2 + * * * ,\n\nn=0\n\nwhere the coefficients an are elements of R. The coefficient a0 is called the\nconstant term of the power series. We denote by R[[q]] the set of all formal\npower series with coefficients in R. The sum and product of formal power series\nare defined, as usual, by\n\u221e\nX\n\nn\n\nan q +\n\nn=0\n\nand\n\nn\n\nbn q =\n\nn=0\n\n\u221e\nX\n\nn=0\n\nwhere\n\n\u221e\nX\n\nn\n\nan q *\n\n(an + bn )q n\n\nn=0\n\n\u221e\nX\n\nn\n\nbn q =\n\nn=0\n\ncn =\n\n\u221e\nX\n\n\u221e\nX\n\ncn q n ,\n\nn=0\n\nn\nX\n\nai bn\u2212i .\n\ni=0\n\nWith these operations of addition and multiplication, R[[q]] is a ring.\n\n5\n\n\fIn this paper we shall always assume that R is an integral domain. Then\nthe ring of formal power series R[[q]] is also an integral domain.\nA formal power series f (q) is invertible if there exists a formal power series\ng(q) such that f (q)g(q) = 1. If f (q) \u2208 R[[q]] is invertible, then there is a unique\nformal power series g(q) such thatPf (q)g(q) = 1. The inverse g(q) is denoted\n\u221e\nf (q)\u22121 . For example, (1 \u2212 q)\u22121 = n=0 q n .\nP\u221e\nTheorem 1 The formal power series f (q) = n=0 an q n is invertible in R[[q]]\nif and only if the coefficient a0 is invertible in the ring R.\nP\u221e\nProof. If the power series n=0 bn q n is the multiplicative inverse of f (q),\nthen a0 b0 = 1 and so a0 is invertible in R.\nConversely,\nsuppose that a0 is invertible in R. The formal power series\nP\u221e\ng(q) = n=0 bn q n is a solution of the equation f (q)g(q) = 1 if and only if the\ncoefficients bn satisfy the identities\na0 b 0 = 1\nand\n\nn\nX\n\nai bn\u2212i = a0 bn + a1 bn\u22121 + * * * + an b0 = 0\n\nfor all n \u2265 1.\n\ni=0\n\nThese conditions are equivalent to\nb0 = a\u22121\n0\nand\nbn = \u2212a\u22121\n0\n\nn\nX\n\nai bn\u2212i\n\nfor all n \u2265 1.\n\ni=1\n\nWe can now construct inductively\nsequence {bn }\u221e\nn=1 of elements of\nP\u221e the unique\nn\nthe ring R such that g(q) = n=0 bn q = f (q)\u22121 . This completes the proof.\n\u0003\nLet f (q) =\n\nP\u221e\n\nn=0\n\nan q n be a formal power series. We define the valuation\nv : R[[q]] \u2192 N0 \u222a {\u221e}\n\nas follows: If f (q) 6= 0, then v(f ) is the smallest integer n such that an 6= 0. If\nf (q) = 0, then we\nP\u221e\nP\u221eset v(f ) = \u221e.\nLet f (q) = n=0 an q n and g(q) = n=0 bn q n be formal power series. We\nwrite\nf (q) \u2261 g(q) (mod q N )\nif an = bn for n = 0, 1, . . . , N \u2212 1. This is equivalent to the inequality v(f \u2212 g) \u2265\nN.\nTheorem 2 Let R be an integral domain, and let f, g \u2208 R[[q]]. The valuation\nv : R[[q]] \u2192 N0 \u222a {\u221e} satisfies the following properties:\n6\n\n\f(i)\nv(\u2212f ) = v(f )\n(ii)\nv(f g) = v(f ) + v(g)\n(iii)\nv(f \u00b1 g) \u2265 min(v(f ), v(g))\n(iv)\nv(f \u00b1 g) = min(v(f ), v(g))\n\nif v(f ) 6= v(g).\n\n(v)\nv(f (q k ) \u2212 f (0)) \u2265 k.\nP\u221e\nn\nP\u221eProof.n Let v(f ) = s and v(g) = t. Then f (q) = n=s an q and g(q) =\nb\nq\n,\nwhere\na\nand\nb\nare\nnonzero\nelements\nof\nthe\nring\nR.\nThen\n\u2212as 6= 0,\ns\nt\nn=t n\nand so v(\u2212f ) = s. This proves (i).\nStatement (ii) is a consequence of the identity\n\u221e\nX\n\nf (q)g(q) = as bt q s+t +\n\ncn q n ,\n\nn=s+t+1\n\nwhere cn \u2208 R for n \u2265 s + t + 1. Since R is an integral domain, it follows that\nas bt 6= 0, and so v(f g) = s + t = v(f ) + v(g).\nTo prove (iii) and (iv), we observe that if s = t, then\nf (q) \u00b1 g(q) =\n\n\u221e\nX\n\n(an \u00b1 bn )q n\n\nn=s\n\nand v(f \u00b1 g) \u2265 s = min(v(f ), v(g)). If s < t, then\nf (q) \u00b1 g(q) =\n\nt\u22121\nX\n\n\u221e\nX\n(an \u00b1 bn )q n\n\nan q n +\n\nn=s\n\nn=t\n\nand so v(f \u00b1 g) = s = min(v(f ), v(g)). P\nn\nFinally, if s = 0, then f (q) \u2212 f (0) = \u221e\nn=r an q , where v(f \u2212 f (0)) = r \u2265 1\nand ar 6= 0. Then\nf (q k ) \u2212 f (0) = ar q kr +\n\n\u221e\nX\n\nan q kn ,\n\nn=r+1\n\nand\nv(f (q k ) \u2212 f (0) = kr \u2265 k.\nIf s \u2265 1, then f (0) = 0 and\nk\n\nk\n\nf (q ) \u2212 f (0) = f (q ) = as q\n\nks\n\n+\n\n\u221e\nX\n\nn=s+1\n\n7\n\nan q kn ,\n\n\fand\nv(f (q k ) \u2212 f (0) = ks \u2265 k.\nThis proves (v). \u0003\nWe introduce a topology on the ring of formal power series as follows. Let\n{fk (q)}\u221e\nk=1 be a sequence of formal power series in R[[q]], where\nfk (q) =\n\n\u221e\nX\n\nak,n q n .\n\nn=0\n\nLet\n\n\u221e\nX\n\nf (q) =\n\nan q n \u2208 R[[q]].\n\nn=0\n\nThe sequence {fk (q)}\u221e\nk=1 converges to f (q), that is,\nlim fk (q) = f (q),\n\nk\u2192\u221e\n\nif for every n \u2265 0 there exists an integer k0 (n) such that ak,n = an for all\nk \u2265 k0 (n). For example, the sequence {[k]q }\u221e\nk=1 of quantum integers converges\nto (1 \u2212 q)\u22121 .\nSimilarly, if\n\u221e\nX\nfk (q) =\nak,n q n .\nn=0\n\nis a formal power series for all\n\nk = (k1 , . . . , kd ) \u2208 Nd0 ,\nwhere Nd0 is the set of all d-tuples of nonnegative integers, then\nlim fk (q)\n\nk\u2192\u221e\n\nlim\n\nk1 ,...,kd \u2192\u221e\n\nfk1 ,...,kd (q) = f (q),\n\nif for every n \u2265 0 there exists an integer k0 (n) such that ak,n = an for all k \u2208 Nd0\nwith ki \u2265 k0 (n) for i = 1, . . . , d.\nWe consider convergence in the case d = 2 in Theorem 9.\nTheorem 3 Let {fk (q)}\u221e\nk=1 be a sequence of formal power series in R[[q]]. The\nsequence {fk (q)}\u221e\nconverges\nif and only if\nk=1\nlim v(fk \u2212 fl ) = \u221e.\n\nk,l\u2192\u221e\n\nMoreover, if f (q) \u2208 R[[q]], then\nlim fk (q) = f (q)\n\nk\u2192\u221e\n\nif and only if\nlim v(f \u2212 fk ) = \u221e.\n\nk\u2192\u221e\n\n8\n\n\fProof. This follows immediately from the definitions of the valuation v and\nconvergence in the ring of formal power series. \u0003\n\nTheorem 4 If\nlim fk (q) = f (q)\n\nk\u2192\u221e\n\nand\n\nlim gk (q) = g(q),\n\nk\u2192\u221e\n\nthen\nlim (fk (q) + gk (q)) = f (q) + g(q)\n\n(5)\n\nlim fk (q)gk (q) = f (q)g(q).\n\n(6)\n\nk\u2192\u221e\n\nand\nk\u2192\u221e\n\nIf fk (q) is invertible for all k \u2265 1, then f (q) is invertible and\nlim fk (q)\u22121 = f (q)\u22121 .\n\nk\u2192\u221e\n\n(7)\n\nProof. Statements (5) and (6) are straightforward verifications.\nTo prove (7), let ak,0 and a0 be the constant terms of the formal power series\nfk (q) and f (q), respectively, for all k \u2265 1. Since fk (q) is invertible, it follows\nthat ak,0 is a unit in R. Since a0 = ak,0 for all sufficiently large k, it follows\nthat a0 is a unit, and so f (q) is invertible by Theorem 1. Applying Theorem 2\nto the identity\nf (q)\u22121 \u2212 fk (q)\u22121 = (fk (q) \u2212 f (q))f (q)\u22121 fk (q)\u22121 ,\nwe obtain\nv(f \u22121 \u2212 fk\u22121 ) = v(fk \u2212 f ) + v(f \u22121 ) + v(fk\u22121 ) \u2265 v(fk \u2212 f ).\nSince fk (q) converges to f (q), it follows that v(fk \u2212 f ) tends to infinity, hence\nv(f \u22121 \u2212 fk\u22121 ) also tends to infinity and fk (q)\u22121 converges to f (q)\u22121 . This\ncompletes the proof. \u0003\n\n2.2\n\nInfinite series and infinite products\n\nWe define convergence of the infinite series\n\u221e\nX\n\nfk (q)\n\nk=0\n\nof formal power series as follows. The m\u2013th partial sum\nsm (q) =\n\nm\u22121\nX\nk=0\n\n9\n\nfk (q)\n\n\fis simply a finite sum of formal power series. If the sequence {sm (q)}\u221e\nm=0 converges to f (q) \u2208 R[[q]], then we write that the infinite series converges to f (q),\nthat is,\n\u221e\nX\nfk (q) = lim sm (q) = f (q).\nm\u2192\u221e\n\nk=0\n\nFor example, if fk (q) =\n\nP\u221e\n\nn=k\n\u221e\nX\n\nq n for k = 0, 1, 2, . . ., then\n\u221e\nX\n\nfk (q) =\n\n(n + 1)q n .\n\nn=0\n\nk=0\n\n\u221e\nTheorem\nP\u221e 5 Let {fk (q)}k=0 be a sequence of formal power series. The infinite\nseries k=0 fk (q) converges if and only if limk\u2192\u221e v(fk ) = \u221e.\nP\u221e\nn\nProof. Let fk (q) =\nn=0 ak,n q . If limk\u2192\u221e v(fk ) = \u221e, then for every\nnonnegative integer n we have ak,n = 0 for all sufficiently large k. The coefficient\nof q n in the partial sum sm (q) is\nm\nX\n\n(8)\n\nak,n .\n\nk=0\n\nSince this sum is constant for all sufficiently large m, it follows that the sequence\n{sm (q)}\u221e\nm=0 converges.\nConversely, if limk\u2192\u221e v(fk ) 6= \u221e, then there exists a nonnegative integer n\nsuch that ak,n 6= 0 for infinitely many integers k. It follows that the sum (8) is\nnot constant for sufficiently large m, and so the sequence {sm (q)}\u221e\nm=0 does not\nconverge. This completes the proof. \u0003\nTheorem 5 allows us to substitute one formal power series into another. Let\nf (q) and h(q) be formal power series with v(h) \u2265 1. If\nf (q) =\n\n\u221e\nX\n\nan q n ,\n\nn=0\n\nthen we define the composite function\n(f \u25e6 h)(q) = f (h(q)) =\n\n\u221e\nX\n\nan h(q)n .\n\n(9)\n\nn=0\n\nSince\nv(an h(q)n ) = v(an ) + nv(h) \u2265 n,\nit follows that the infinite series (9) converges. Moreover,\nv(f \u25e6 h) = v(f )v(h).\n\n10\n\n(10)\n\n\fTheorem 6 Let a0 \u2208 R. If {fk (q)}\u221e\nk=1 is a sequence of formal power series such\nthat fk (q) has constant term a0 for all k \u2265 1, and if {mk }\u221e\nk=1 is a sequence of\nnonnegative integers such that\nlim mk = \u221e,\n\nk\u2192\u221e\n\nthen\nlim fk (q mk ) = a0 .\n\nk\u2192\u221e\n\n(11)\n\nIn particular, for any formal power series f (q),\nlim f (q mk ) = f (0).\n\nk\u2192\u221e\n\n(12)\n\nProof. We have v(fk \u2212 a0 ) \u2265 1 for all k \u2265 1. The convergence of (11) follows\nfrom (10) and the observation that\n\u0011\n\u0010\nk\nv fk (q m ) \u2212 a0 = v ((fk \u2212 a0 )(q mk )) = v (fk \u2212 a0 ) mk \u2265 mk ,\n\nhence\n\n\u0011\n\u0010\nk\nlim v fk (q m ) \u2212 a0 = \u221e.\n\nk\u2192\u221e\n\nThe convergence of (12) follows from Theorem 3. \u0003\n\nTheorem 7 Let (ki , li )\u221e\ni=0 be a sequence of ordered pairs of nonnegative integers such that every ordered pair (k, l) occurs exactly once in the sequence. If\nthe infinite series\n\u221e\nX\nf (q) =\nfk (q)\nk=0\n\nand\n\ng(q) =\n\n\u221e\nX\n\ngl (q)\n\nl=0\n\nconverge in R[[q]], then the infinite series\n\u221e\nX\n\nfki (q)gli (q)\n\n(13)\n\ni=0\n\nconverges, and\nf (q)g(q) =\n\n\u221e\nX\n\nfki (q)gli (q).\n\ni=0\n\nIn particular,\nf (q)g(q) =\n\n\u221e X\nX\n\nn=0 k+l=n\n\n11\n\nfk (q)gl (q)\n\n(14)\n\n\fProof. By Theorem 5,\nlim v(fk ) = lim v(gl ) = \u221e,\n\nk\u2192\u221e\n\nl\u2192\u221e\n\nand so, for every N , there exists an integer j0 = j0 (N ) such that v(fk ) \u2265 N and\nv(gl ) \u2265 N for all k > j0 and l > j0 . There are only finitely many ordered pairs\n(ki , li ) with both ki \u2264 j0 and li \u2264 j0 , and so there is an integer i0 = i0 (N ) such\nthat, for all i > i0 , we have ki > j0 or li > j0 , hence\nv(fki gli ) = v(fki ) + v(gli ) \u2265 N\nand\nlim v(fki gli ) = \u221e.\n\ni\u2192\u221e\n\nBy Theorem 5, the series (13) converges. Moreover, for m \u2265 i0 ,\nsm (q) =\n\nm\nX\n\nfki (q)gli (q)\n\ni=0\n\n\u2261\n\ni0\nX\n\nfki (q)gli (q)\n\n(mod q N )\n\ni=0\n\n\u2261\n\nj0\nX\n\nfk (q)\n\nk=0\n\nj0\nX\n\ngl (q)\n\n(mod q N )\n\nl=0\n\n\u2261 f (q)g(q) (mod q N ),\nand so\nv(f g \u2212 sm ) \u2265 N\nand\nlim v(f g \u2212 sm ) = \u221e.\n\nm\u2192\u221e\n\nBy Theorem 3,\n\u221e\nX\ni=0\n\nfki (q)gli (q) = lim sm (q) = f (q)g(q).\nm\u2192\u221e\n\nIdentity (14) is a special case of this result. \u0003\nWe define convergence of the infinite product\n\u221e\nY\n\nfk (q)\n\nk=1\n\nof formal power series as follows. The m\u2013th partial product\npm (q) =\n\nm\nY\n\nk=1\n\n12\n\nfk (q)\n\n\fis simply a finite product of formal power series. If the sequence {pm (q)}\u221e\nm=1\nconverges to f (q) \u2208 R[[q]], then we write that the infinite product converges to\nf (q), that is,\n\u221e\nY\nfk (q) = lim pm (q) = f (q).\nm\u2192\u221e\n\nk=1\n\nFor example, from the unique representation of an integer as the sum of distinct\npowers of 2, we have\nm\nY\n\n(1 + q\n\n2k\u22121\n\n2\n\n4\n\n) = (1 + q)(1 + q )(1 + q ) * * * (1 + q\n\n2m\u22121\n\nqn ,\n\nn=0\n\nk=1\n\nand so\n\n)=\n\nm\n2X\n\u22121\n\n\u221e\nY\n\nm\u22121\n\n(1 + q 2\n\n)=\n\nm=1\n\n\u221e\nX\n\nq n = (1 \u2212 q)\u22121 .\n\nn=0\n\nTheorem 8 Let {fk (q)}\u221e\nk=1 be a sequence of formal power seriesQsuch that\nfk (q) has constant term fk (q) 1 for all k \u2265 1. The infinite product \u221e\nk=1 fk (q)\nconverges\nif\nand\nonly\nif\nlim\nv(f\n(q)\n\u2212\n1)\n=\n\u221e\nif\nand\nonly\nif\nthe\ninfinite\nk\u2192\u221e\nk\nP\u221e\nseries k=1 (fk (q) \u2212 1) converges.\nProof. This follows immediately from the definition of convergence. \u0003\n\n2.3\n\nChange of variables in formal power series\n\nThe next result allows us to substitute variables in identities of formal power\nseries.\nTheorem 9 Let {gk (q)}\u221e\nk=1 be a sequence of formal power series in R[[q]] that\nconverges to g(q) and let {hl (q)}\u221e\nl=1 be a sequence of formal power series that\nconverges to h(q). If\nv(hl ) \u2265 1\nfor all l \u2265 1,\nthen\nlim gk (hl (q)) = g(h(q)).\n\nk,l\u2192\u221e\n\nProof. For every nonnegative integer N and formal power series\nf (q) =\n\n\u221e\nX\n\nan q n ,\n\nn=0\n\nlet\nf (N ) (q) =\n\nN\n\u22121\nX\nn=0\n\n13\n\nan q n .\n\n\fThen\nf (q) \u2261 f (N ) (q)\n\n(mod q N ).\n\nSince v(hl ) \u2265 1 for all l, it follows that v(h) \u2265 1, and so the formal power series\ng(h(q)) and gk (hl (q)) are well-defined for all nonnegative integers k and l. Since\nlimk\u2192\u221e gk (q) = g(q), there exists an integer k0 (N ) such that\n(N )\n\ngk (q) = g (N ) (q)\n\nfor all k \u2265 k0 (N ).\n\nSimilarly, since liml\u2192\u221e hl (q) = h(q), there exists an integer l0 (N ) such that\n(N )\n\nhl\n\n(q) = h(N ) (q)\n\nfor all l \u2265 l0 (N ).\n\nTherefore, for k \u2265 k0 (N ) and l \u2265 l0 (N ) we have\n\u0010\n\u0011\n\u0010\n\u0011\n(N )\n(N )\ngk (hl (q)) \u2261 gk\nhl (q) = g (N ) h(N ) (q) \u2261 g(h(q))\n\n(mod q N ).\n\nThis completes the proof. \u0003\n\nTheorem 10 Let {gk (q)}\u221e\nk=1 be a sequence of formal power series in R[[q]] that\nconverges to g(q) \u2208 R[[q]], and let h(q) be a formal power series with v(h) \u2265 1.\nThen\nlim gk (h(q)) = g(h(q)).\nk\u2192\u221e\n\nProof. This follows from Theorem 9 with hl (q) = h(q) for all l \u2265 1. \u0003\nTheorem 10 is often applied in the following form.\n\u221e\nTheorem 11 Let {fk (q)}\u221e\nk (q)}k=1 be sequences of formal power sek=0 and\nP{g\n\u221e\nries\nQ\u221e such that the infinite series k=1 fk (q) converges and the infinite product\nk=1 gk (q) converges. Let h(q) be a formal power series with v(h) \u2265 1. If\n\u221e\nX\n\nfk (q) =\n\nk=0\n\nthen\n\n\u221e\nX\n\n\u221e\nX\n\nfk (h(q)) =\n\nk=0\n\nfk (q) =\n\ngk (q),\n\nk=1\n\nk=0\n\nProof. Let\n\n\u221e\nY\n\n\u221e\nY\n\ngk (h(q)).\n\nk=1\n\nm\u22121\nX\nk=0\n\n14\n\nfk (q) = F (q).\n\n\fTheorem 10 implies that\n\u221e\nX\n\nfk (h(q)) = lim\n\nm\u2192\u221e\n\nk=0\n\nSimilary,\n\n\u221e\nY\n\n\u221e\nY\n\nm\u2192\u221e\n\ngk (h(q)) = lim\n\nm\u2192\u221e\n\nk=1\n\nIt follows that\n\n\u221e\nX\n\nfk ((h(q)) = F (h(q)).\n\nk=0\n\ngk (q) = lim\n\nk=1\n\nimplies that\n\nm\u22121\nX\n\nm\nY\n\ngk (q) = F (q)\n\nk=1\n\nm\nY\n\ngk (h(q)) = F (h(q)).\n\nk=1\n\nfk (h(q)) =\n\nk=1\n\n\u221e\nY\n\ngk (h(q)).\n\nk=1\n\nThis completes the proof. \u0003\n\nTheorem 12 Let {gk (q)}\u221e\nk=1 be a sequence of formal power series in R[[q]],\nand let h(q) be a formal power series with v(h) \u2265 1. If\nlim gk (h(q)) = g(h(q)),\n\nk\u2192\u221e\n\nthen\nlim gk (q) = g(q).\n\nk\u2192\u221e\n\nProof. Let\ngk (q) =\n\n\u221e\nX\n\nbk,n q n\n\nn=0\n\nand\ng(q) =\n\n\u221e\nX\n\nbn q n .\n\nn=0\n\nWe must show that for every nonnegative integer n we have bk,n = bn for all\nsufficiently large k. The proof will be by induction on n. Let\nh(q) =\n\n\u221e\nX\n\ncm q m ,\n\nwhere v(h) = M \u2265 1 and cM 6= 0.\n\nm=M\n\nThen\nh(q) \u2261 cM q M\n\n(mod q M+1 ).\n\nThe congruences\ngk (h(q)) \u2261 bk,0\n15\n\n(mod q)\n\n\fand\ng(h(q)) \u2261 b0\n\n(mod q)\n\nimply that bk,0 = b0 for all sufficiently large k. Let N \u2265 1. Suppose there\nexists an integer k0 (N ) such that, for k \u2265 k0 (N ) and 0 \u2264 n \u2264 N \u2212 1, we have\nbk,n = bn . Then\n\u221e\nX\n\nbk,n (h(q))n \u2261 bk,N cM q M\n\nn=N\n\nand\n\n\u221e\nX\n\nbn (h(q))n \u2261 bN cM q M\n\nn=N\n\nSince\n\nlim\n\nk\u2192\u221e\n\n\u221e\nX\n\n\u0001N\n\n\u0001N\n\nMN\n\u2261 bk,N cN\nMq\n\nMN\n\u2261 b N cN\nMq\n\nbk,n (h(q))n =\n\nn=N\n\n\u221e\nX\n\n(mod q MN +1 )\n\n(mod q MN +1 ).\n\nbn (h(q))n ,\n\nn=N\n\nit follows that for suffficiently large k we have\n\nbk,N cMN\n= bN cMN\nM\nM ,\nand so\nbk,N = bN .\nThis completes the proof. \u0003\n\nTheorem 13 Let R and S be rings, and let \u03c6 : R \u2192 S[[q]] be a ring homomorphism. Let v be the valuation in the formal power series ring S[[q]]. Let\nh(q) \u2208 S[[q]] with v(h) \u2265 1. The map \u03a6 : R[[q]] \u2192 S[[q]] defined by\n!\n\u221e\n\u221e\nX\nX\nn\n=\n\u03c6(an )h(q)n\n(15)\n\u03a6\nan q\nn=0\n\nn=0\n\nis a ring homomorphism.\nProof. Since\nv (\u03c6(an )h(q)n ) = v (\u03c6(an )) + nv (h) \u2265 nv(h) \u2265 n,\nit follows from Theorem 5 that the infinite series on the right\nP\u221eside of (15)\nconverges in the formal power series ring S[[q]]. Let f (q) = n=0 an q n and\n\n16\n\n\fg(q) =\n\nP\u221e\n\nn=0 bn q\n\nn\n\n. Then\n\n\u03a6(f (q)) + \u03a6(g(q)) =\n=\n=\n\n\u221e\nX\n\nn=0\n\u221e\nX\n\nn=0\n\u221e\nX\n\n\u03c6(an )h(q)n +\n\n\u221e\nX\n\n\u03c6(bn )h(q)n\n\nn=0\n\n(\u03c6(an ) + \u03c6(bn )) h(q)n\n\u03c6 (an + bn ) h(q)n\n\nn=0\n\n=\u03a6\n\n\u221e\nX\n\n(an + bn ) q\n\nn=0\n\nn\n\n!\n\n= \u03a6 (f (q) + g(q)) .\nSimilarly,\n\u221e\nX\n\n\u03a6(f (q))\u03a6(g(q)) =\n\nn=0\n\u221e\nX\n\n=\n\nn=0\n\u221e\nX\n\n=\n\nn\n\n\u03c6(an )h(q)\nX\n\n\u03c6\n\nak b l\n\nX\n\n!\n\nak b l\n\nk+l=n\n\n\u221e\nX\n\n\u03c6(bn )h(q)\n\nn=0\n\n!\n\n\u03c6(ak )\u03c6(bl ) h(q)n\n\nk+l=n\n\u221e\nX\n\nn\n\n!\n\nX\n\nn=0\n\n=\u03a6\n\n\u221e\nX\n\nk+l=n\n\nn=0\n\n=\u03a6\n\n!\n\nan q\n\nn\n\nn=0\n\n= \u03a6 (f (q)g(q)) .\n\n!\n\nh(q)n\n!\n\n\u221e\nX\n\nn=0\n\nqn\n\n!\n\nbn q\n\nn\n\n!!\n\nThis completes the proof. \u0003\n\n3\n\nLimits of solutions of the functional equation\nfor quantum multiplication\n\nThe main result (Theorem 18) in this section states that if F = {fn (q)}\u221e\nn=1 is\na solution of the functional equation (1) with supp(F ) = S(P ) for a nonempty\nset P of prime numbers, and if fp (0) = 1 for all p \u2208 P, then there exists a formal\npower series F (q) such that\nF (q) = n\u2192\u221e\nlim fn (q).\nn\u2208S(P )\n\n17\n\n\fFor example, the sequence F = {[n]q }\u221e\nn=1 has support supp(F ) = N = S(P ),\nwhere P is the set of all primes, and limn\u2192\u221e [n]q = (1 \u2212 q)\u22121 .\nTheorem 14 Let F = {fn (q)}\u221e\nn=1 be a sequence of polynomials that satisfies\nthe functional equation\nfmn (q) = fm (q)fn (q m ).\nLet {ai }\u221e\ni=1 be a sequence of positive integers such that ai \u2265 2 for infinitely\nmany i. Let n0 = 1 and\nnk = a1 a2 * * * ak\nfor k \u2265 1. If fai (0) = 1 for all i \u2265 1, then the infinite product\n\u221e\nY\n\nfai (q ni\u22121 )\n\ni=1\n\nconverges, and\nlim fnk (q) =\n\nk\u2192\u221e\n\n\u221e\nY\n\nfai (q ni\u22121 ).\n\n(16)\n\ni=1\n\nIn particular, if ai = a \u2265 2 for all i, then there exists a formal power series\nFa\u221e (q) such that\n(17)\nFa\u221e (q) = lim fak (q).\nk\u2192\u221e\n\nProof. We shall show by induction that\nfnk (q) =\n\nk\nY\n\nfai (q ni\u22121 )\n\ni=1\n\nfor all k \u2265 1. The functional equation implies that\nfn1 (q) = fa1 (q) = fa1 (q n0 )\nfn2 (q) = fa1 a2 (q) = fa1 (q)fa2 (q a1 ) = fa1 (q n0 )fa2 (q n1 )\nfn3 (q) = fa1 a2 a3 (q) = fa1 a2 (q)fa3 (q a1 a2 )\n= fa1 (q n0 )fa2 (q n1 )fa3 (q n3 ),\nand so formula (18) holds for k = 1, 2, 3. If (18) holds for k, then\nfnk+1 (q) = fnk ak+1 (q)\n= fnk (q)fak+1 (q nk )\n!\nk\nY\nni\u22121\n) fak+1 (q nk )\nfai (q\n=\ni=1\n\n=\n\nk+1\nY\n\nfai (q ni\u22121 ) .\n\ni=1\n\n18\n\n(18)\n\n\fThis completes the induction.\nSince fai (0) = 1 for all i \u2265 1, it follows that fnk (0) = 1 and v(fnk (q)\u22121) \u2265 1\nfor all k \u2265 1. By Theorem 6,\nv (fnk (q nk\u22121 ) \u2212 1) \u2265 nk\u22121 .\nSince limk\u2192\u221e nk = \u221e, Theorem 8 implies the convergence of the infinite product (16). This immediately implies (17). \u0003\n\nTheorem 15 Let F = {fn (q)}\u221e\nn=1 be a sequence of polynomials that satisfies\nthe functional equation\nfmn (q) = fm (q)fn (q m ).\nIf a \u2265 2, b \u2265 2, and fa (0) = fb (0) = 1, then\nFa\u221e (q) = lim fak (q) = lim fbk (q) = Fb\u221e (q).\nk\u2192\u221e\n\nk\u2192\u221e\n\nProof. The functional equation implies that fak (0) = fbk (0) = f(ab)k (0) = 1\nfor all k \u2265 1. By Theorem 6,\nk\n\nFb\u221e (0) = lim fbk (q a ) = 1.\nk\u2192\u221e\n\nIt follows from Theorem 14 that\nF(ab)\u221e (q) = lim f(ab)k (q)\nk\u2192\u221e\n\nk\n\n= lim fak (q)fbk (q a )\nk\u2192\u221e\n\nk\n\n= lim fak (q) lim fbk (q a )\nk\u2192\u221e\n\nk\u2192\u221e\n\n= Fa\u221e (q).\nSimilarly, F(ab)\u221e (q) = Fb\u221e (q) and so Fa\u221e (q) = Fb\u221e (q). This completes the\nproof. \u0003\n\nTheorem 16 Let F = {fn (q)}\u221e\nn=1 be a sequence of polynomials that satisfies\nthe functional equation\nfmn (q) = fm (q)fn (q m ).\nIf supp(F ) = S(P ) for some nonempty finite set P of prime numbers, and if\nfp (0) = 1 for all p \u2208 P, then there exists a formal power series F (q) such that\nF (q) = n\u2192\u221e\nlim fn (q).\nn\u2208S(P )\n\n19\n\n(19)\n\n\fProof. Since fp (0) = 1 for all p \u2208 P, it follows that fm (0) = 1, v(fm ) = 0,\nand v(fm \u2212 1) \u2265 1 for all m \u2208 S(P ).\nBy Theorem 15, there exists a formal power series F (q) such that\nF (q) = Fp\u221e (q) = lim fpk (q)\n\nfor all p \u2208 P .\n\nk\u2192\u221e\n\nSince the set P is finite, for every integer N there exists an integer\nk0 = k0 (N ) \u2265 N\nsuch that\nv(F \u2212 fpk ) \u2265 N\nfor all p \u2208 P and k \u2265 k0 .\nQ\nk0 \u22121\n. If n > n0 and n \u2208 S(P ), then n = pk0 m for\nLet n0 = n0 (N ) = p\u2208P p\nsome p \u2208 P and m \u2208 S(P ). Moreover,\nk0\n\nF (q) \u2212 fn (q) = F (q) \u2212 fpk0 (q)fm (q p )\n\u0010\n\u0011\nk0\n= F (q) \u2212 fpk0 (q) \u2212 fpk0 (q) fm (q p ) \u2212 1 .\n\nWe have\n\nv(F \u2212 fpk0 ) \u2265 N\nand\n\u0011\n\u0010\n\u0011\u0011\n\u0010\n\u0010\n\u0001\nk0\nk0\nv fpk0 (q) fm (q p ) \u2212 1 = v fpk0 + v fm (q p ) \u2212 1\n\u0010\n\u0011\nk0\n= v fm (q p ) \u2212 1\n= v(fm \u2212 1)pk0\n\u2265 pk0\n\u2265 N.\nIt follows that\n\u0011\u0011\u0011\n\u0010\n\u0010\n\u0010\nk0\n\u2265N\nv(F \u2212 fn ) \u2265 min v(F \u2212 fpk0 ), v fpk0 (q) fm (q p ) \u2212 1\n\nfor all n \u2265 n0 . This completes the proof of (19). \u0003\n\nTheorem 17 Let F = {fn (q)}\u221e\nn=1 be a sequence of polynomials that satisfies\nthe functional equation\nfmn (q) = fm (q)fn (q m ).\nIf supp(F ) = S(P ), where P is an infinite set of prime numbers, and if fp (0) = 1\nfor all p \u2208 P, then there exists a formal power series FP (q) such that\nFP (q) = p\u2192\u221e\nlim fp (q).\np\u2208P\n\n20\n\n(20)\n\n\fProof. If p1 and p2 are prime numbers in P such that p1 \u2265 N and p2 \u2265 N,\nthen\nfp1 (q) \u2212 fp2 (q) = fp1 (q) \u2212 fp1 p2 (q) + fp1 p2 (q) \u2212 fp2 (q)\n= fp1 (q) \u2212 fp1 (q)fp2 (q p1 ) + fp2 (q)fp1 (q p2 ) \u2212 fp2 (q)\n= fp1 (q) (1 \u2212 fp2 (q p1 )) + fp2 (q) (fp1 (q p2 ) \u2212 1) .\nSince\nv(fp1 ) = v(fp2 ) = 0\nand, by Theorem 2,\nv (1 \u2212 fp2 (q p1 )) \u2265 p1 \u2265 N,\nand\nv (fp1 (q p2 ) \u2212 1) \u2265 p2 \u2265 N,\nit follows that\nv(fp1 \u2212 fp2 ) \u2265 N.\nTherefore,\nlim\n\np1 ,p2 \u2192\u221e\n\nv(fp1 \u2212 fp2 ) = \u221e,\n\nand Theorem 3 implies the existence of the limit (20). This completes the proof.\n\u0003\n\nTheorem 18 Let F = {fn (q)}\u221e\nn=1 be a sequence of polynomials that satisfies\nthe functional equation\nfmn (q) = fm (q)fn (q m ).\nLet supp(F ) = S(P ), where P is a nonempty set of prime numbers. If fp (0) = 1\nfor all p \u2208 P, then there exists a formal power series F (q) such that\nF (q) = n\u2192\u221e\nlim fn (q).\n\n(21)\n\nn\u2208S(P )\n\nProof. If P is finite, then the result is Theorem 16.\nSuppose that P is an infinite set of prime numbers. Let N be a positive\ninteger. By Theorem 17, there is a formal power series FP (q) such that\nFP (q) = p\u2192\u221e\nlim fp (q),\np\u2208P\n\nand so there exists a prime number\np0 = p0 (N ) \u2265 N\nsuch that\nv(FP \u2212 fp ) \u2265 N\n\nfor all p \u2208 P with p \u2265 p0 .\n21\n\n\fIf n = pm \u2208 S(P ), where p \u2208 P and p \u2265 p0 , then\nFP (q) \u2212 fn (q) = FP (q) \u2212 fp (q)fm (q p )\n= (FP (q) \u2212 fp (q)) + fp (q) (1 \u2212 fm (q p )) .\nSince v (1 \u2212 fm (q p )) \u2265 p > p0 \u2265 N, it follows that v(FP \u2212 fn ) \u2265 N.\nBy Theorem 15, there is a formal power series F (q) such that\nF (q) = lim fpk (q)\nk\u2192\u221e\n\nfor all p \u2208 P. There exists an integer\nk0 = k0 (N ) \u2265 N\nsuch that\n\u0001\nv F \u2212 fpk \u2265 N\n\nfor all k \u2265 k0 and p \u2208 P with p < p0 .\n\nIf n = pk m \u2208 S(P ), where k \u2265 k0 and p \u2208 P with p < p0 , then\nk\n\nF (q) \u2212 fn (q) = F (q) \u2212 fpk (q)fm (q p )\n\u0010\n\u0011\n\u0001\nk\n= F (q) \u2212 fpk (q) + fpk (q) 1 \u2212 fm (q p ) .\n\n\u0010\n\u0011\nk\nSince v 1 \u2212 fm (q p ) \u2265 pk \u2265 k \u2265 k0 \u2265 N, it follows that v(F \u2212 fn ) \u2265 N.\nLet p1 and p2 be prime numbers in P such that p1 < p0 \u2264 p2 , and let k \u2265 k0 .\nLet n = pk1 p2 . Then\nv(FP \u2212 fn ) \u2265 N,\nv(F \u2212 fn ) \u2265 N,\nand so\nv(F \u2212 FP ) = v ((F \u2212 fn ) \u2212 (fn \u2212 FP )) \u2265 N.\nThis holds for all N , and so\nF (q) = FP (q).\nLet n0 =\n\nQ\n\np<p0\np\u2208P\n\npk0 \u22121 = n0 (N ) and let n \u2208 S(P ) with n \u2265 n0 . If p divides\n\nn for some prime p \u2208 P , p \u2265 p0 , then v(F \u2212 fn ) = v(FP \u2212 fn ) \u2265 N.\nQ If every\nprime factor of n is less than p0 , then n is an integer of the form n = p<p0 pap ,\np\u2208P\n\nwhere ap \u2208 N0 for all p \u2208 P . Since n \u2265 n0 , it follows that ap \u2265 k0 for some p,\nand so v(F \u2212 fn ) \u2265 N. Therefore,\nlim v(F \u2212 fn ) = \u221e.\n\nn\u2192\u221e\nn\u2208S(P )\n\nThis completes the proof. \u0003\n22\n\n\fLet F = {fn (q)}\u221e\nn=1 be a sequence of polynomials satisfying the functional\nequation (1). We assume that supp(F ) = S(P ), where P is a nonempty set\nof prime numbers, and fp (0) = 1 for all p \u2208 P. By Theorem 18, there exists a\nformal power series F (q) such that\nF (q) = n\u2192\u221e\nlim fn (q).\nn\u2208S(P )\n\nProblem 4 Which formal power series are limits of solutions of the functional\nequation (1)?\nProblem 5 To what extent is it possible to reconstruct the sequence F from the\nformal power series F (q)? If F (q) is the limit of a solution of the functional\nequation (1), determine all solutions F of (1) whose limit is F (q).\nLet G = {gn (q)}\u221e\nn=1 be a solution of the functional equation (1) with support\nS(PG ) and with limit\nF (q) = n\u2192\u221e\nlim gn (q).\nn\u2208S(PG )\n\nWe observe that if P is a nonempty subset of PG , then we can construct another\nsolution F = {fn (q)}\u221e\nn=1 of (1) by restriction of G to the subsemigroup S(P ) of\nS(PG ) as follows:\n\u001a\ngn (q) if n \u2208 S(P ),\nfn (q) =\n0\nif n 6\u2208 S(P ).\nSince\nF (q) = n\u2192\u221e\nlim fn (q),\nn\u2208S(P )\n\nit follows that F (q) does not uniquely determine F .\nThe suggests the following definition. A solution F = {fn (q)}\u221e\nn=1 of the\nfunctional equation (1) will be called maximal if F cannot be constructed from\nanother solution G of the functional equation by restriction to a subsemigroup\nof supp(G).\nTheorem 19 Every solution of the functional equation (1) is contained in at\nleast one maximal solution.\nProof. Let F = {fn (q)}\u221e\nn=1 be a solution of (1) with supp(F ) = S(P ). Let\nX be the set of all pairs (G, PG ) such that\n(i) PG is a set of prime numbers and P \u2286 PG ,\n(ii) G is a solution of the functional equation (1) with support S(PG ),\n(iii) The restriction of G to S(P ) is F .\n\n23\n\n\fThe set X is partially ordered as follows: (G, PG ) \u0016 (H, PH ) if PG \u2286 PH and\nthe restriction of H to S(PG ) is G. Every chain in X has an upper bound, and\nso, by Zorn's Lemma, the set X contains a maximal element (H, PH ). Then H\nis a maximal solution of the functional equation (1) that restricts to F . \u0003\n\nProblem 6 Describe the maximal solutions of the functional equation (1). For\nwhich sets P of prime numbers does there exist a maximal solution F of (1) with\nsupp(F ) = S(P )?\n\n4\n\nA functional equation for formal power series\n\nWe shall prove that the functional equation f (q)F (q m ) = F (q) has a unique\nsolution not only for polynomials f (q) but also for formal power series f (q)\nwith constant term 1.\nTheorem 20 Let m be a positive integer. For every formal power series f (q)\nwith constant term f (0) = 1, there exists a unique formal power series\nF (q) =\n\n\u221e\n\u0010 2\u0011\n\u0010 i\u0011\nY\nf q m = f (q)f (q m )f q m * * *\n\n(22)\n\ni=1\n\nthat satisfies the functional equation\nf (q)F (q m ) = F (q).\n\n(23)\n\nProof. The infinite product (22) converges in the ring of formal power series,\nsince\n\u0011\n\u0010 \u0010 i\u0011\nv f q m \u2212 1 = v(f (q) \u2212 1)mi\nand\n\n\u0011\n\u0010 \u0010 i\u0011\nlim v f q m \u2212 1 = \u221e.\n\ni\u2192\u221e\n\nThen\n\nf (q)F (q m ) = f (q)\n= f (q)\n= f (q)\n\n\u221e\n\u0011\n\u0010\nY\ni\nf (q m )m\n\ni=0\n\u221e\nY\n\ni=0\n\u221e\nY\n\ni=1\n\n\u0010 i+1 \u0011\nf qm\n\u0010 i\u0011\nf qm\n\n\u221e\n\u0010 i\u0011\nY\nf qm\n=\ni=0\n\n= F (q).\n24\n\n\fThis proves that the formal power series (22) is a solution of (23).\nConversely, let F (q) be a formal power series that is a solution of (23). We\nshall prove that\nk\u22121\nY \u0010 i\u0011 \u0010 k\u0011\n(24)\nf qm F qm\nF (q) =\ni=0\n\nfor every positive integer k. From the functional equation (23), we obtain\n2\n\nF (q) = f (q)F (q m ) = f (q) (f (q m )F ((q m )m )) = f (q)f (q m )F (q m ).\nThis proves (24) for k = 1 and 2. If (24) holds for some integer k \u2265 2, then\nF (q) = f (q)\n\nk\u22121\nY\ni=0\n\n=\n\nk\nY\n\ni=0\n\n\u0010 i+1 \u0011 \u0010 k+1 \u0011\nF qm\nf qm\n\n\u0010 i \u0011 \u0010 k+1 \u0011\n,\nf qm F qm\n\nand so (24) holds for k + 1. This completes the induction. Since F (0) = 1, it\nfollows from Theorem 6 that\nF (q) = lim\n\nk\u2192\u221e\n\n= lim\n\nk\u2192\u221e\n\nk\u22121\nY\ni=0\n\nk\u22121\nY\ni=0\n\n\u0010 k\u0011\n\u0010 i\u0011\nf q m lim F q m\nk\u2192\u221e\n\n\u0010 i\u0011\nf qm\n\n\u221e\n\u0010 i\u0011\nY\nf qm .\n=\ni=0\n\nThis completes the proof. \u0003\nIf m is a positive integer and fm (q) a polynomial of degree less than m, then\nwe can explicitly construct the coefficients of the unique formal power series\nthat satisfies the equation fm (q)F (q m ) = m(q). We need the following notation.\nLet m be an integer, m \u2265 2. Every integer k has a unique m\u2013adic representation\nk=\n\n\u221e\nX\n\net,k mt ,\n\nt=0\n\nwhere\net,k \u2208 {0, 1, 2, . . . , m \u2212 1}\nfor all t, and et,k = 0 for all but finitely many t. For i = 1, 2, . . . , m \u2212 1, let\nX\n1.\ndi (k) =\net,k =i\n\n25\n\n\fThen di (k) is the arithmetic function that counts the number of digits equal\nto i in the m\u2013adic representation of k. For example, if m = 3, then 71 =\n2 * 30 + 2 * 31 + 1 * 32 + 2 * 33 , and so d1 (71) = 1 and d2 (71) = 3.\nPm\u22121\ni\nTheorem 21\nP\u221eLet fmk(q) = 1 + i=1 ai q be a polynomial of degree m \u2212 1. Let\nF (q) = 1 + k=1 bk q be the formal power series with coefficients\nbk =\n\nm\u22121\nY\n\nd (k)\n\nai i\n\nfor all k = 1, 2, 3, . . . .\n\n(25)\n\ni=1\n\nThen\nfm (q)F (q m ) = F (q).\nP\u221e\n\n(26)\n\nk\n\nConversely, if F (q) = 1 + k=1 bk q is a formal power series that satisfies the\nfunctional equation (26), then the coefficients of F (q) are given by (25).\nProof. Let a0 = b0 = 1. From the functional equation (26) we have\n\uf8f6\n!\uf8eb \u221e\n\u221e\nm\u22121\n\u221e\nm\u22121\nX\nXX\nX\nX\nai bj q i+mj =\nbk q k ,\nbj q mj \uf8f8 =\nai q i \uf8ed\ni=0\n\ni=0 j=0\n\nj=0\n\nk=0\n\nif and only if\n\nai bj = bi+mj\nfor all i = 0, 1, . . . , m\u22121 and j \u2208 N0 . We shall prove that the the unique solution\nof (4) is (25).\nFor j = 0, we have\nm\u22121\nY d (k)\nai i\nb k = ak =\ni=0\n\nfor k = 0, 1, . . . , m \u2212 1. This proves (25) for 0 \u2264 k < m.\nSuppose that (25) holds for all nonnegative integers k < mr . Let k be an\ninteger in the interval mr \u2264 k < mr+1 . We can write\nk = i + mj,\n\nwhere 0 \u2264 i \u2264 m \u2212 1 and mr\u22121 \u2264 j < mr .\n\nIf\nj=\n\n\u221e\nX\n\net,j mt ,\n\nt=0\n\nthen\nmj =\n\n\u221e\nX\n\net,j mt+1 =\n\nt=0\n\nand\n\n\u221e\nX\n\net,mj mt ,\n\nt=1\n\net,mj = et\u22121,j\n\nfor all t \u2208 N.\n\n26\n\n\fThen\nk = i + mj = i +\n\n\u221e\nX\n\net,mj mt ,\n\nt=1\n\nand so\ndt (k) =\n\n\u001a\n\ndt (j)\nfor t 6= i\ndt (j) + 1 for t = i.\n\nTherefore,\nm\u22121\nY\n\nd (k)\nat t\n\n=\n\nd (k)\nai i\n\nt=0\n\nm\u22121\nY\n\nd (k)\n\nat t\n\nt=0\nt6=i\n\nd (j)+1\n\n= ai i\n\nm\u22121\nY\n\nd (j)\n\nat t\n\nt=0\nt6=i\n\n= ai\n\nm\u22121\nY\n\nd (j)\n\nat t\n\nt=0\n\n= ai b j\n= bk .\nThis completes the proof. \u0003\n\nAcknowledgement. I wish to thank Yang Wang for a helpful discussion about\nself-similar sets.\n\nReferences\n[1] M. B. Nathanson, A functional equation arising from multiplication of quantum integers, J. Number Theory, to appear.\n[2]\n\n, Additive number theory and the ring of quantum integers,\nwww.arXiv.org, math.NT/0204006.\n\n27\n\n\f"}