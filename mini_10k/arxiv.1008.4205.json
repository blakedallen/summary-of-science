{"id": "http://arxiv.org/abs/1008.4205v1", "guidislink": true, "updated": "2010-08-25T05:23:38Z", "updated_parsed": [2010, 8, 25, 5, 23, 38, 2, 237, 0], "published": "2010-08-25T05:23:38Z", "published_parsed": [2010, 8, 25, 5, 23, 38, 2, 237, 0], "title": "The Orbifold Topological Vertex", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1008.3380%2C1008.0440%2C1008.0740%2C1008.1201%2C1008.2886%2C1008.2405%2C1008.1916%2C1008.2157%2C1008.4753%2C1008.0886%2C1008.2852%2C1008.4244%2C1008.2545%2C1008.3884%2C1008.2535%2C1008.4667%2C1008.3940%2C1008.1328%2C1008.3172%2C1008.0257%2C1008.3285%2C1008.3446%2C1008.4697%2C1008.4141%2C1008.2429%2C1008.2533%2C1008.3762%2C1008.1780%2C1008.4551%2C1008.4890%2C1008.3394%2C1008.2597%2C1008.0953%2C1008.4949%2C1008.3635%2C1008.4129%2C1008.1961%2C1008.4686%2C1008.0211%2C1008.2947%2C1008.0682%2C1008.4936%2C1008.4280%2C1008.3516%2C1008.5065%2C1008.5131%2C1008.4071%2C1008.5331%2C1008.0621%2C1008.4205%2C1008.1799%2C1008.3910%2C1008.2231%2C1008.5201%2C1008.5060%2C1008.3552%2C1008.5397%2C1008.3636%2C1008.3982%2C1008.1398%2C1008.0841%2C1008.2634%2C1008.4801%2C1008.3960%2C1008.4913%2C1008.1475%2C1008.4504%2C1008.4680%2C1008.3137%2C1008.4453%2C1008.3248%2C1008.2336%2C1008.2906%2C1008.3084%2C1008.5343%2C1008.5341%2C1008.0268%2C1008.4682%2C1008.2240%2C1008.2742%2C1008.4413%2C1008.1697%2C1008.4271%2C1008.3758%2C1008.4238%2C1008.4773%2C1008.0122%2C1008.1379%2C1008.4347%2C1008.2917%2C1008.4462%2C1008.4138%2C1008.3993%2C1008.1861%2C1008.4024%2C1008.0374%2C1008.4037%2C1008.1319%2C1008.0929%2C1008.4039%2C1008.2551&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "The Orbifold Topological Vertex"}, "summary": "We define Donaldson-Thomas invariants of Calabi-Yau orbifolds and we develop\na topological vertex formalism for computing them. The basic combinatorial\nobject is the orbifold vertex, a generating function for the number of 3D\npartitions asymptotic to three given 2D partitions and colored by\nrepresentations of a finite Abelian group G acting on C^3. In the case where\nG=Z_n acting on C^3 with transverse A_{n-1} quotient singularities, we give an\nexplicit formula for the vertex in terms of Schur functions. We discuss\napplications of our formalism to the Donaldson-Thomas Crepant Resolution\nConjecture and to the orbifold Donaldson-Thomas/Gromov-Witten correspondence.\nWe also explicitly compute the Donaldson-Thomas partition function for some\nsimple orbifold geometries: the local football and the local BZ_2 gerbe.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=1008.3380%2C1008.0440%2C1008.0740%2C1008.1201%2C1008.2886%2C1008.2405%2C1008.1916%2C1008.2157%2C1008.4753%2C1008.0886%2C1008.2852%2C1008.4244%2C1008.2545%2C1008.3884%2C1008.2535%2C1008.4667%2C1008.3940%2C1008.1328%2C1008.3172%2C1008.0257%2C1008.3285%2C1008.3446%2C1008.4697%2C1008.4141%2C1008.2429%2C1008.2533%2C1008.3762%2C1008.1780%2C1008.4551%2C1008.4890%2C1008.3394%2C1008.2597%2C1008.0953%2C1008.4949%2C1008.3635%2C1008.4129%2C1008.1961%2C1008.4686%2C1008.0211%2C1008.2947%2C1008.0682%2C1008.4936%2C1008.4280%2C1008.3516%2C1008.5065%2C1008.5131%2C1008.4071%2C1008.5331%2C1008.0621%2C1008.4205%2C1008.1799%2C1008.3910%2C1008.2231%2C1008.5201%2C1008.5060%2C1008.3552%2C1008.5397%2C1008.3636%2C1008.3982%2C1008.1398%2C1008.0841%2C1008.2634%2C1008.4801%2C1008.3960%2C1008.4913%2C1008.1475%2C1008.4504%2C1008.4680%2C1008.3137%2C1008.4453%2C1008.3248%2C1008.2336%2C1008.2906%2C1008.3084%2C1008.5343%2C1008.5341%2C1008.0268%2C1008.4682%2C1008.2240%2C1008.2742%2C1008.4413%2C1008.1697%2C1008.4271%2C1008.3758%2C1008.4238%2C1008.4773%2C1008.0122%2C1008.1379%2C1008.4347%2C1008.2917%2C1008.4462%2C1008.4138%2C1008.3993%2C1008.1861%2C1008.4024%2C1008.0374%2C1008.4037%2C1008.1319%2C1008.0929%2C1008.4039%2C1008.2551&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We define Donaldson-Thomas invariants of Calabi-Yau orbifolds and we develop\na topological vertex formalism for computing them. The basic combinatorial\nobject is the orbifold vertex, a generating function for the number of 3D\npartitions asymptotic to three given 2D partitions and colored by\nrepresentations of a finite Abelian group G acting on C^3. In the case where\nG=Z_n acting on C^3 with transverse A_{n-1} quotient singularities, we give an\nexplicit formula for the vertex in terms of Schur functions. We discuss\napplications of our formalism to the Donaldson-Thomas Crepant Resolution\nConjecture and to the orbifold Donaldson-Thomas/Gromov-Witten correspondence.\nWe also explicitly compute the Donaldson-Thomas partition function for some\nsimple orbifold geometries: the local football and the local BZ_2 gerbe."}, "authors": ["Jim Bryan", "Charles Cadman", "Ben Young"], "author_detail": {"name": "Ben Young"}, "author": "Ben Young", "arxiv_comment": "70 pages, lots of figures", "links": [{"href": "http://arxiv.org/abs/1008.4205v1", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/1008.4205v1", "rel": "related", "type": "application/pdf"}], "arxiv_primary_category": {"term": "math.AG", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "math.AG", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "hep-th", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "math.CO", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/1008.4205v1", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/1008.4205v1", "journal_reference": null, "doi": null, "fulltext": "THE ORBIFOLD TOPOLOGICAL VERTEX\n\narXiv:1008.4205v1 [math.AG] 25 Aug 2010\n\nJIM BRYAN, CHARLES CADMAN, AND BEN YOUNG\nA BSTRACT. We define Donaldson-Thomas invariants of Calabi-Yau orbifolds and we develop a topological vertex formalism for computing\nG\nthem. The basic combinatorial object is the orbifold vertex V\u03bb\u03bc\u03bd\n, a generating function for the number of 3D partitions asymptotic to 2D partitions \u03bb, \u03bc, \u03bd and colored by representations of a finite Abelian group\nG acting on C3 . In the case where G \u223c\n= Zn acting on C3 with transG\nverse An\u22121 quotient singularities, we give an explicit formula for V\u03bb\u03bc\u03bd\nin terms of Schur functions. We discuss applications of our formalism to\nthe Donaldson-Thomas Crepant Resolution Conjecture and to the orbifold Donaldson-Thomas/Gromov-Witten correspondence. We also explicitly compute the Donaldson-Thomas partition function for some simple orbifold geometries: the local football P1a,b and the local BZ2 gerbe.\n\nC ONTENTS\n1. Introduction\n2. Orbifold CY3s and DT theory\n2.1. Orbifold CY3s\n2.2. The K-theory of X .\n2.3. The Hilbert scheme of substacks\n2.4. Definition of DT invariants\n2.5. DT partition functions.\n3. The Orbifold Vertex Formalism\n3.1. 3D partitions, 2D partitions, and the vertex.\n3.2. Orbifolds with transverse An\u22121 singularities.\n3.3. Generators for F1 K(X )\n3.4. The vertex formula\n4. Applications of the orbifold vertex\n4.1. The orbifold DT crepant resolution conjecture and the orbifold\nDT/GW correspondence.\n4.2. Example: the local football.\n4.3. Example: The local BZ2 gerbe.\n5. Proof of Theorem 10\n5.1. Overview\n5.2. The K-theory decomposition\n1\n\n2\n4\n4\n5\n5\n5\n6\n6\n7\n9\n11\n12\n15\n15\n17\n19\n21\n21\n22\n\n\f2\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n6. The Sign Formula\n6.1. Overview\n6.2. General Sign Formula\n6.3. Sign formula in the transverse An\u22121 case\n7. Proof of Theorem 12\n7.1. Review of vertex operators\nn\n(q0 , . . . , qn\u22121 ) as a vertex operator product\n7.2. Writing V\u03bb\u03bc\u03bd\n7.3. n-quotient, n-core, and the retrograde\nAppendix A. Grothendieck-Riemann-Roch for orbifolds and the\nToen operator.\nAppendix B. Orbifold toric CY3s and web diagrams\nB.1. Reading off the local model at a point from the web diagram\nB.2. Reading off the local data at a curve from the web diagram\nReferences\n\n31\n31\n31\n38\n40\n40\n42\n48\n60\n63\n65\n66\n68\n\n1. I NTRODUCTION\nThe topological vertex is a powerful tool for computing the GromovWitten (GW) or Donaldson-Thomas (DT) partition function of any toric\nCalabi-Yau threefold (toric CY3). The vertex was originally discovered\nin physics using the duality between Chern-Simons theory and topological\nstring theory [1]. A mathematical treatment of the topological vertex in GW\ntheory was given in [18, 17, 21], and the topological vertex for DT theory\nwas developed in [20], where it was used to prove the DT/GW correspondence in the toric CY3 case.\nIn this paper we develop a topological vertex formalism which computes\nthe DT partition function of an orbifold toric CY3 .\nG\nThe central object in our theory is the orbifold vertex V\u03bb\u03bc\u03bd\n. It is a generating function for the number of 3D partitions, colored by representations\nof G, and asymptotic to a triple of 2D partitions (\u03bb, \u03bc, \u03bd). Here G is an\nAbelian group acting on C3 with trivial determinant and the action dictates\na fixed coloring scheme for the boxes in the 3D partition (see \u00a7 3.1). The\nusual topological vertex is the case where G is the trivial group.\nAssociated to an orbifold toric CY3 X is a trivalent graph whose vertices\nare the torus fixed points and whose edges are the torus invariant curves.\nThere is additional data at the vertices describing the stabilizer group of\nthe fixed point and there is additional data at the edges giving the degrees\nof the line bundles normal to the fixed curve. The general orbifold vertex\nformalism determines the DT partition function DT (X ) by a formula of the\n\n\fThe Orbifold Topological Vertex\n\n3\n\nform\n(1)\n\nDT (X ) =\n\nX\n\nY\n\nE(e)\n\nedge\ne\u2208Edges\nassignments\n\nY\n\nb G (v)\nV\n\u03bb\u03bc\u03bd\n\nv\u2208Vertices\n\nwhere the sum is over all ways of assigning 2D partitions to the edges. The\nedge terms E(e) are relatively simple and depend on the normal bundle of\nthe corresponding curve as well as the partition assigned to the edge. The\nb G (v) are given by the universal series VG modified by\nvertex terms V\n\u03bb\u03bc\u03bd\n\u03bb\u03bc\u03bd\ncertain signs with G, \u03bb, \u03bc, \u03bd obtained as the local group of the vertex v and\nthe partitions along the incident edges.\nTo make the above formula computationally effective, one needs a closed\nG\n. One of our main results is Theorem 12\nformula for the universal series V\u03bb\u03bc\u03bd\nG\nwhich gives an explicit formula, in terms of Schur functions, for V\u03bb\u03bc\u03bd\nin the\n3\ncase where G is Zn acting on C with weights (1, \u22121, 0). This corresponds\nto the case where the orbifold structure of X occurs along smooth, disjoint\ncurves which then necessarily have transverse An\u22121 singularities (n can\nvary from curve to curve). We call this the transverse An\u22121 case and we\nmake the above formula fully explicit in that instance (Theorem 10).\nBesides providing a tool to compute DT partition functions of orbifolds,\nour orbifold vertex formalism gives insight into two central questions in the\nDT theory of orbifolds.\n\u2022 How is the DT theory of an orbifold X related to the GW theory of\nX?\n\u2022 How is the DT theory of X related to the DT theory of Y , a CalabiYau resolution of X, the singular space underlying X ?\nThe four relevant theories can be arranged schematically in the diagram\nbelow:\nDT (Y )\n\nDT/GW\ncorrespondence\n\nDT crepant\nresolution conjecture\n\nDT (X )\n\nGW (Y )\nGW crepant\nresolution conjecture\n\norbi-DT/GW\ncorrespondence\n\nGW (X )\n\nIn the transverse An\u22121 case, or more generally when X satisfies the Hard\nLefschetz condition [9, Defn 1.1] c.f. [8, Lem 24], the (conjectural) equivalences of the four theories take on a particularly nice form. Namely, the\n(suitably renormalized) partition functions of the four theories are equal after a change of variables and analytic continuation. For the top equivalence,\n\n\f4\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nthis is the famous DT/GW correspondence of Maulik, Nekrasov, Okounkov,\nand Pandharipande [20], for the right equivalence, this is the Bryan-Graber\nversion of the crepant resolution conjecture in GW theory [9].\nIn \u00a74, we formulate the DT crepant resolution conjecture for X satisfying the hard Lefschetz condition. In a forthcoming paper [16], we will use\nour orbifold vertex to prove the conjecture for the case where X is toric\nwith transverse An\u22121 orbifold structure. We will also formulate an orbifold version of the DT/GW correspondence. This correspondence can be\nproved for a large class of toric orbifolds with transverse An\u22121 structure\nby using the other three equivalences in the diagram: our proof of the DT\ncorrespondence, the (non-orbifold) DT/GW correspondence of [20], and a\nproof of the GW crepant resolution conjecture for a large class of toric orbifolds with transverse An\u22121 structure which has been obtained by Coates\nand Iritani[12].\nOur paper is organized as follows. In \u00a7 2, we define DT theory for orbifolds. In \u00a7 3 we introduce the vertex formalism and give our main two\nresults: Theorem 10, an explicit formula for the partition function of an orbifold toric CY3 with transverse An\u22121 orbifold structure and Theorem 12, a\nformula for the Zn vertex in terms of Schur functions. In \u00a7 4, we formulate\nthe DT crepant resolution conjecture. We then use our vertex formalism to\ncompute the partition function of the local football (Proposition 3) and the\nlocal BZ2 -gerbe (\u00a7 4.3). Each of these examples is used to illustrate the\nDT crepant resolution conjecture and the orbifold DT/GW correspondence.\nThe derivation of the vertex formalism and the proof of Theorem 10 begins in \u00a7 5. A key component of the proof is a K-theory decomposition of\nthe structure sheaf of a torus invariant substack into edge and vertex terms\n(Propositions 4 and 5 and Lemma 15). The proof of Theorem 10 is finished\nin \u00a7 6 where the signs in the vertex formula are derived. Finally, a proof of\nTheorem 12 is given in \u00a7 7 using vertex operators. Necessary background\non orbifold toric CY3s and orbifold Riemann-Roch is collected in two brief\nappendices.\n\n2. O RBIFOLD CY3 S AND DT THEORY\n2.1. Orbifold CY3s. An orbifold CY3 is defined to be a smooth, quasiprojective, Deligne-Mumford stack X over C of dimension three having\ngenerically trivial stabilizers and trivial canonical bundle,\nKX \u223c\n= OX .\nThe definition implies that the local model for X at a point p is [C3 /Gp ]\nwhere Gp \u2282 SL(3, C) is the (finite) group of automorphisms of p.\n\n\fThe Orbifold Topological Vertex\n\n5\n\n2.2. The K-theory of X . Our DT invariants will be indexed by compactly\nsupported elements of K-theory, up to numerical equivalence. Let Kc (X )\nbe the Grothendieck group of compactly supported coherent sheaves on X .\nWe say that F1 , F2 \u2208 Kc (X ) are numerically equivalent,\nF1 \u223cnum F2 ,\nif\n\u03c7(E \u2297 F1 ) = \u03c7(E \u2297 F2 )\nfor all sheaves E on X .\nIn this paper, K-theory will always mean compactly supported K-theory\nmodulo numerical equivalence:\nK(X ) = Kc (X )/ \u223cnum .\nThere is a natural filtration\nF0 K(X ) \u2282 F1 K(X ) \u2282 F2 K(X ) \u2282 K(X )\ngiven by the dimension of the support. An element of Fd K(X ) can be\nrepresented by a formal sum of sheaves having support of dimension d or\nless.\n2.3. The Hilbert scheme of substacks. Given \u03b1 \u2208 K(X ), we define\nHilb\u03b1 (X )\nto be the category of families of substacks Z \u2282 X having [OZ ] = \u03b1. By a\ntheorem of Olsson-Starr [26], Hilb\u03b1 (X ) is represented by a scheme which\nwe also denote by Hilb\u03b1 (X ). Note that our indexing is slightly different\nthan Olsson-Starr who index instead by the corresponding Hilbert function\nE 7\u2192 \u03c7(E \u2297 \u03b1).\nNote that the Hilbert scheme Hilb\u03b1 (X ) is a scheme rather than just a stack,\nas its objects (substacks Z \u2282 X ) do not have automorphisms.\n2.4. Definition of DT invariants. In [2], Kai Behrend defined an integervalued constructible function\n\u03bdS : S \u2192 Z\nassociated to any scheme S over C.\nDefinition 1. The DT invariant of X in the class \u03b1 \u2208 K(X ) is given by\nthe topological Euler characteristic of Hilb\u03b1 (X ), weighted by Behrend's\nfunction \u03bd : Hilb\u03b1 (X ) \u2192 Z. That is\nDT\u03b1 (X ) = e(Hilb\u03b1 (X ), \u03bd)\nX\n\u0001\n=\nk e \u03bd \u22121 (k)\nk\u2208Z\n\n\f6\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nwhere e(\u2212) is the topological Euler characteristic.\nRemark 2. In the case where X is compact and a scheme, and \u03b1 \u2208 F1 K(X ),\nour definition coincides (via Behrend [2, Theorem 4.18]) with the definition\ngiven in [20] which uses a perfect obstruction theory. It should be possible\nto construct a perfect obstruction theory on Hilb\u03b1 (X ) along the lines of\n[20, 28], but we don't pursue that in this paper. One advantage of defining\nthe invariants directly in terms of the weighted Euler characteristic is that\nDT\u03b1 (X ) is well defined for non-compact geometries.\nRemark 3. If \u03b1 = [OZ ] \u2208 F1 K(X ) and X = X is a scheme, we can\nrecover the more familiar discrete invariants n = \u03c7(OZ ) and \u03b2 = [Z] \u2208\nH2 (X) via the Chern character:\nch(OZ ) = [Z]\u2228 + \u03c7(OZ )[pt]\u2228 .\n2.5. DT partition functions. We define the DT partition function by\nX\nDT (X ) =\nDT\u03b1 (X )q \u03b1 .\n\u03b1\u2208F1 K(X )\n\nWith an appropriate choice of a basis e1 , . . . , er for F1 K(X ), we can\nregard DT (X ) as a formal Laurent series in a set of variables q1 , . . . , qr\nwhere\nq \u03b1 = q1d1 * * * qrdr\nPr\nfor \u03b1 = i=1 di ei .\nWe define the degree zero DT partition function by\nX\nDT0 (X ) =\nDT\u03b1 (X )q \u03b1 ,\n\u03b1\u2208F0 K(X )\n\nand we define the reduced DT partition function by\nDT (X )\nDT 0 (X ) =\n.\nDT0 (X )\nIn the case where X = X is a scheme, Maulik, Nekrasov, Okounkov,\nand Pandharipande conjectured that the reduced DT partition function is\nequal to the reduced GW partition function after a change of variables [20,\nConjecture 2].\n3. T HE O RBIFOLD V ERTEX F ORMALISM\nIn the case where X = X is a scheme and toric, the topological vertex\nformalism computes the DT partition function DT (X) in terms of the topological vertex V\u03bb\u03bc\u03bd , a universal object which is a generating function for 3D\npartitions asymptotic to (\u03bb, \u03bc, \u03bd). We extend the vertex formalism to toric\norbifolds, particularly in the case where X has transverse An\u22121 orbifold\nstructure.\n\n\fThe Orbifold Topological Vertex\n\n7\n\n3.1. 3D partitions, 2D partitions, and the vertex.\nDefinition 4. Let (\u03bb, \u03bc, \u03bd) be a triple of ordinary partitions. A 3D partition\n\u03c0 asymptotic to (\u03bb, \u03bc, \u03bd) is a subset\n\u03c0 \u2282 (Z\u22650 )3\nsatisfying\n(1) if any of (i + 1, j, k), (i, j + 1, k), and (i, j, k + 1) is in \u03c0, then\n(i, j, k) is also in \u03c0, and\n(2) (a) (j, k) \u2208 \u03bb if and only if (i, j, k) \u2208 \u03c0 for all i \u001d 0,\n(b) (k, i) \u2208 \u03bc if and only if (i, j, k) \u2208 \u03c0 for all j \u001d 0,\n(c) (i, j) \u2208 \u03bd if and only if (i, j, k) \u2208 \u03c0 for all k \u001d 0.\nwhere we regard ordinary partitions as finite subsets of (Z\u22650 )2 via their\ndiagram.\nIntuitively, \u03c0 is a pile of boxes in the positive octant of 3-space. Condition\n(1) means that the boxes are stacked stably with gravity pulling them in the\n(\u22121, \u22121, \u22121) direction; condition (2) means that the pile of boxes is infinite\nalong the coordinate axes with cross-sections asymptotically given by \u03bb, \u03bc,\nand \u03bd.\nThe subset {(i, j, k) : (j, k) \u2208 \u03bb} \u2282 \u03c0 will be called the leg of \u03c0 in the i\ndirection, and the legs in the j and k directions are defined analogously. Let\n(2)\n\n\u03be\u03c0 (i, j, k) = 1 \u2212 # of legs of \u03c0 containing (i, j, k).\n\nWe define the renormalized volume of \u03c0 by\nX\n|\u03c0| =\n\u03be\u03c0 (i, j, k).\n(i,j,k)\u2208\u03c0\n\nNote that |\u03c0| can be negative.\nDefinition 5. The topological vertex V\u03bb\u03bc\u03bd is defined to be\nX\nV\u03bb\u03bc\u03bd =\nq |\u03c0|\n\u03c0\n\nwhere the sum is taken over all 3D partitions \u03c0 asymptotic to (\u03bb, \u03bc, \u03bd).\nWe regard V\u03bb\u03bc\u03bd as a formal Laurent series in q. Note that V\u03bb\u03bc\u03bd is clearly\ncyclically symmetric in the indices, and reflection about the i = j plane\nyields\nV\u03bb\u03bc\u03bd = V\u03bc0 \u03bb0 \u03bd 0\nwhere 0 denotes conjugate partition:\n\u03bb0 = {(i, j) : (j, i) \u2208 \u03bb}.\n\n\f8\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nThis definition of topological vertex differs from the vertex C(\u03bb, \u03bc, \u03bd)\nof the physics literature by a normalization factor. Our V\u03bb\u03bc\u03bd is equal to\nP (\u03bb, \u03bc, \u03bd) defined by Okounkov, Reshetikhin, and Vafa [25, eqn 3.16].\nThey derive an explicit formula for V\u03bb\u03bc\u03bd = P (\u03bb, \u03bc, \u03bd) in terms of Schur\nfunctions [25, eqns 3.20 and 3.21].\nThe Zn orbifold vertex counts 3D partitions colored with n colors. We\ncolor the boxes of a 3D partition \u03c0 according to the rule that a box (i, j, k) \u2208\n\u03c0 has color i \u2212 j mod n (c.f. [4]).\nn\nDefinition 6. The Zn vertex V\u03bb\u03bc\u03bd\nis defined by\nX |\u03c0|\n|\u03c0|\nn\nV\u03bb\u03bc\u03bd\n=\nq0 0 * * * qn\u22121n\u22121\n\u03c0\n\nwhere the sum is taken over all 3D partitions \u03c0 asymptotic to (\u03bb, \u03bc, \u03bd) and\n|\u03c0|a is the (normalized) number of boxes of color a in \u03c0. Namely\nX\n|\u03c0|a =\n\u03be\u03c0 (i, j, k)\ni,j,k\u2208\u03c0\ni\u2212j=a mod n\n\nwhere \u03be\u03c0 is defined in equation (2).\nn\nNote that the Zn -orbifold vertex V\u03bb\u03bc\u03bd\nhas fewer symmetries than the\nusual vertex since the k axis is distinguished. However, reflection through\nthe i = j plane yields\nn\nV\u03bb\u03bc\u03bd\n(q0 , q1 , . . . , qn\u22121 ) = V\u03bcn0 \u03bb0 \u03bd 0 (q0 , qn\u22121 , . . . , q1 ).\n\nIn general, if F is a series in the variables qk with k \u2208 Zn , we let F denote\nthe same series with the variable qk replaced by q\u2212k . So for example, the\nabove symmetry can be written\nn\n\nn\nV\u03bb\u03bc\u03bd\n= V\u03bc0 \u03bb0 \u03bd 0 .\n\nThe G vertex is defined in general as follows. Given a finite Abelian\ngroup G acting on C3 via characters r1 , r2 , r3 we define\nXY\nG\n(3)\nV\u03bb\u03bc\u03bd\n=\nqr|\u03c0|r\n\u03c0\n\nb\nr\u2208G\n\nwhere the sum is over 3D partitions asymptotic to (\u03bb, \u03bc, \u03bd) and where |\u03c0|r\nb\nis the (normalized) number of boxes in \u03c0 of color r \u2208 G:\nX\n|\u03c0|r =\n\u03be\u03c0 (i, j, k).\ni,j,k\u2208\u03c0\nr1i r2j r3k =r\n\nOne of our main results is an explicit formula for the Zn -orbifold vertex\n(see Theorem 12).\n\n\fThe Orbifold Topological Vertex\n\n9\n\n3.2. Orbifolds with transverse An\u22121 singularities. Let X be a orbifold\ntoric CY3 whose orbifold structure is supported on a disjoint union of smooth\ncurves. Then the local group along each curve is Zn (where n can vary from\ncurve to curve) and the coarse space X has transverse An\u22121 singularities\nalong the curves. By Lemma 40, X is determined by its coarse space X.\nThe combinatorial data determining a toric variety X is well understood\nand is most commonly expressed as the data of a fan (by the Lemma 40, we\ndo not require the stacky fans of Borisov, Chen and Smith [5]). In the case\nof a orbifold toric CY3 , it is convenient to use equivalent (essentially dual)\ncombinatorial data, namely that of a (p, q)-web diagram. Web diagrams are\ndiscussed in more detail in \u00a7 B.\nAssociated to X is a planar trivalent graph \u0393 = {Edges, Vertices} where\nthe vertices correspond to torus fixed points, the edges correspond to torus\nfixed curves, and the regions in the plane delineated by the graph correspond\nto torus fixed divisors. \u0393 will necessarily have some non-compact edges;\nthese correspond to non-compact torus fixed curves. We denote the set of\ncompact edges by Edgescpt .\nIt will be notationally convenient to choose an orientation on \u0393:\nDefinition 7. Let \u0393 be a trivalent planar graph. An orientation is a choice\nof direction for each edge and an ordering (e1 (v), e2 (v), e3 (v)) of the edges\nincident to each vertex v which is compatible with the counterclockwise\ncyclic ordering.\nGiven an orientation on the graph \u0393 associated to X , let the two regions\nin the plane incident to an edge e be denoted by D(e) and D0 (e) with the\nconvention that D(e) lies to the right of e (see Figure 1). We also use D(e)\nand D0 (e) to denote the corresponding torus invariant divisors and we let\nC(e) \u2282 X denote the torus invariant curve corresponding to e. Let p0 (e)\nand p\u221e (e) denote the the torus fixed points corresponding to the initial and\nfinal vertices incident to e. Let D0 (e) and D\u221e (e) denote the torus invariant\ndivisors meeting C(e) transversely at p0 (e) and p\u221e (e) respectively. Let\nD1 (v), D2 (v), D3 (v) be the regions (and the corresponding torus invariant\ndivisors) opposite the edges e1 (v), e2 (v), e3 (v).\nLet\nm = m(e) = deg OC(e) (D(e))\nm0 = m0 (e) = deg OC(e) (D0 (e)).\nDefine n(e) such that Zn(e) is the local group of C(e) \u2282 X . If n(e) 6= 1,\nthen C(e) is a BZn(e) gerbe over P1 and\nm, m0 \u2208\n\n1\nZ\nn(e)\n\n\f10\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n@\n@\nR f0\n@\nD0 (e) @\n\nf\n\nD0 (e)\n-\n\ne\nD(e)\n\ng0 \u0012\nD\u221e (e)\n@\n@\ng I\n@\n@\n\nF IGURE 1. The edge e with orientations chosen for adjacent edges.\nwith\nm + m0 = \u22122.\nIf n(e) = 1, then one of\na = n(f ),\n\na0 = n(f 0 ),\n\nb = n(g),\n\nb0 = n(g 0 ),\n\nand/or one of\nis possibly greater than one and C(e) is a football: a P1 with root constructions of order max(a, a0 ) and max(b, b0 ) at 0 and \u221e.\nWe define\n(\n1 if a > 1\n\u03b40 =\n0 if a = 1.\n0\nsimilarly according to the values of a0 , b, and\nWe define \u03b400 , \u03b4\u221e , and \u03b4\u221e\nb0 respectively. Note that at least one of (\u03b40 , \u03b400 ) is zero and likewise for\n0\n(\u03b4\u221e , \u03b4\u221e\n). Using the condition that OC (D + D0 ) = KC = OC (\u2212p0 \u2212 p\u221e ),\nwe can write\n\nOC (D) = OC (mp\ne \u2212 \u03b40 p0 \u2212 \u03b4\u221e p\u221e ),\n0\nOC (D0 ) = OC (m\ne 0 p \u2212 \u03b400 p0 \u2212 \u03b4\u221e\np\u221e ),\n\nwhere\n\u03b40 \u03b4\u221e\n\u2212\n,\na\nb\n\u03b40\n\u03b40\nm0 = m\ne 0 \u2212 00 \u2212 \u221e0\na\nb\nsince p0 , p\u221e \u2208 C are orbifold points of order max(a, a0 ) and max(b, b0 )\nrespectively. Note that m,\ne m\ne 0 \u2208 Z and the Calabi-Yau condition implies\nm=m\ne\u2212\n\n0\nm\ne +m\ne 0 = \u03b40 + \u03b400 + \u03b4\u221e + \u03b4\u221e\n\u2212 2.\n\n\fThe Orbifold Topological Vertex\n\n11\n\nBy convention, we define m\ne = m and m\ne 0 = m0 if n(e) > 1 (but note that\n0\nin this case, m\ne and m\ne may not be integers).\n3.3. Generators for F1 K(X ). To write an explicit formula for DT (X ),\nwe must choose generators for F1 K(X ). Let p \u2208 X be a generic point and\nlet p(e) be a generic point on the curve C(e) (so p(e) \u223c\n= BZn(e) ). Let \u03c1k ,\nk \u2208 {0, . . . , n(e) \u2212 1} be the irreducible representations of Zn(e) with the\nindexing chosen so that\nOp(e) (\u2212kD(e)) \u223c\n= Op(e) \u2297 \u03c1k .\nWe define the following classes in F1 K(X ) and their associated variables.\nClass in F1 K(X ) Associated variable\n\nIndexing set\n\n[Op ]\n\nq\n\n[Op(e) \u2297 \u03c1k ]\n\nqe,k\n\ne \u2208 Edges,\n\n[OC(e) (\u22121) \u2297 \u03c1k ]\n\nve,k\n\ne \u2208 Edgescpt , k \u2208 {0,...,n(e)\u22121}\n\nk \u2208 {0,...,n(e)\u22121}\n\nPushforwards by the inclusions of p, p(e), and C(e) into X are implicit\nin the above. The class [OC(e) (\u22121) \u2297 \u03c1k ] is defined as follows. The curve\nC(e) is a BZn(e) gerbe over P1 . If C(e) \u223c\n= P1 \u00d7 BZn(e) is the trivial gerbe,\nthen OC(e) (\u22121) is pulled back from P1 and \u03c1k is pulled back from BZn(e) .\ne\nMore generally, let \u03c0 : C(e)\n\u2192 C(e) be the degree n cover obtained from\n1\n1\ne\nthe base change P \u2192 P , z 7\u2192 z n . Then C(e)\nis the trivial BZn(e) gerbe\nand we define [OC(e) (\u22121) \u2297 \u03c1k ] to be the class n1 \u03c0\u2217 [OC(e)\ne (\u22121) \u2297 \u03c1k ]. In\ngeneral, this class is not defined with Z coefficients.\nThe above classes generate F1 K(X ) (over Q) but there are relations. In\nparticular, for each e \u2208 Edges, there is the relation\n[Op ] = [Op(e) \u2297 Rreg ]\n\n(4)\nP\n\nwhere Rreg = k \u03c1k denotes the regular representation of Zn(e) . This relation gives rise to the relation\nn(e)\u22121\n\nq=\n\nY\n\nqe,k .\n\nk=0\n\nThere may be additional relations among the classes supported on curves\ncoming from the global geometry of X . We leave relations among the corresponding variables implicit in all our formulas.\n\n\f12\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nRemark 8. If n(e) = 1 for all edges e, then X = X is not an orbifold. In\nthis case, the only variables are q corresponding to [Op ] and ve corresponding to OC(e) (\u22121). If Z \u2282 X is a subscheme with \u03c7(OZ ) = n and\nX\n\u03b2 = [Z] =\ndi [C(ei )],\ni\n\nthen\n[OZ ] = n[Op ] +\n\nX\n\ndi [OC(ei ) (\u22121)]\n\ni\n\nin K-Theory.\nthe associated DT invariant appears as the coefficient of\nQ Thus\ndi\nn \u03b2\nn\nq v =q\ni vi which is consistent with the notation of [20].\n3.4. The vertex formula. Let\n\u03bb[k, n] = {(i, j) \u2208 \u03bb : i \u2212 j = k\n\nmod n}\n\nbe the set of boxes in \u03bb of color k mod n. Let\n|\u03bb|k = |\u03bb[k, n]|\ndenote the number of boxes of color k in \u03bb. Usually, n is understood from\nthe context, but if we need to make it explicit, we write |\u03bb|k,n .\nDefinition 9. An edge assignment on \u0393 is a choice of a partition \u03bb(e) for\neach edge e such that \u03bb(e) = \u2205 for every non-compact edge. An edge\nassignment is called multi-regular if each \u03bb = \u03bb(e) satisfies |\u03bb|k = n1 |\u03bb| for\nall k.\nAssume that \u0393 has an orientation (Definition 7). Given an edge assignment and a vertex v, we get a triple of partitions (\u03bb1 (v), \u03bb2 (v), \u03bb3 (v)) by\nsetting \u03bbi (v) = \u03bb(ei (v)) if e(vi ) has the orientation pointing outward from\nv and \u03bbi (v) = \u03bb(ei (v))0 if ei (v) has the inward orientation. We also impose\nthe convention that if any of the edges ei (v) have n(ei (v)) 6= 1, then we\nfix the ordering so that this (necessarily unique) edge is given by e3 (v). We\nwill call such an edge the special edge and denote it also as simply e(v).\nThe following quantities are used in the vertex formula. Let\nX\n\u03bb\nCm,\n=\n\u2212mi\ne \u2212m\ne 0 j + 1.\n0\ne m\ne\n(i,j)\u2208\u03bb\n\nand let\n\u03bb\nCm,\ne m\ne 0 [k, n] =\n\nX\n\n\u2212mi\ne \u2212m\ne 0 j + 1.\n\n(i,j)\u2208\u03bb[k,n]\n\nWe define\n\nX \u0016i + k \u0017\n.\nA\u03bb (k, n) =\nn\n(i,j)\u2208\u03bb\n\n\fThe Orbifold Topological Vertex\n\n13\n\nLet e = e(v) be the special edge associated to a vertex. We write\n(\n(qe,0 , qe,1 * * * , qe,n(e)\u22121 ) if e is oriented outward from v and\nqv =\n(qe,0 , qe,n(e)\u22121 , . . . , qe,1 ) if e is oriented inward toward v.\nWe define\n(\u22121)s(\u03bb) qv\n\n(5)\n\nto be the same as qv but with the variable qe,k multiplied by the additional\nsign (\u22121)sk (\u03bb) where\nsk (\u03bb) = |\u03bb|k\u22121 + |\u03bb|k+1 .\nNote that this sign is trivial in the multi-regular case.\nWe also adopt a product convention for our variables. Namely, we set\nn(e)\u22121\n\nve|\u03bb|\n\n:=\n\nY\n\n|\u03bb|\n\nve,kk,n(e) ,\n\nk=0\nn(e)\u22121\n\nC\u03bb\n\n0\n\ne m\ne\nqe m,\n:=\n\nY\n\nC\u03bb\n\ne m\ne\nqe,km,\n\n0 [k,n(e)]\n\n,\n\nk=0\nn(e)\u22121\n\nqeA\u03bb\n\n:=\n\nY\n\nA (k,n(e))\n\nqe,k\u03bb\n\n.\n\nk=0\n\nWe will need an additional sign (\u22121)S\u03bb(e) (e) associated to each edge e.\nLet \u03bb = \u03bb(e), n = n(e), and let\nS\u03bb (e) =\n\nn\u22121\nX\n\n\u03bb\nCm,m\n0 [k, n]\n\n\u0010\n\n\u0011\n\n\u0010\n\n\u0011\n\ne 0 +\u03b4\u221e )|\u03bb|k\u22121 .\n|\u03bb|k\u22121 \u2212|\u03bb|k+1 +|\u03bb|k 1+(1+m+\u03b4\n\nk=0\n\nNote that in the multi-regular case this sign simplifies significantly:\ne 0 +\u03b4\u221e )|\u03bb|\n(\u22121)S\u03bb (e) = (\u22121)(m+\u03b4\n\nFinally, we need on more sign (\u22121)\u03a3\u03c0(v) attached to each vertex partition.\nHere\nn\u22121\nX\n\u03a3\u03c0(v) =\n|\u03bb3 |k (|\u03bb1 |k + |\u03bb2 |k + |\u03bb1 |k\u22121 + |\u03bb2 |k+1 )\nk=0\n\nwhere \u03bb1 , \u03bb2 , \u03bb3 are the legs of \u03c0(v) and the color of (j, k) \u2208 \u03bb1 , (k, i) \u2208 \u03bb2 ,\nand (i, j) \u2208 \u03bb3 is given by i\u2212j mod n. Note that in the multi-regular case,\nthis sign is trivial. Indeed, then |\u03bb3 |k is independent of k and so the sum can\nbe rearranged so that the other terms cancel mod 2 in pairs.\nThe following theorems provide an explicit formula for the DT partition\nfunction of a toric orbifold with transverse An\u22121 singularities.\n\n\f14\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nTheorem 10. Let X be a orbifold toric CY3 with transverse An\u22121 singularities and let \u0393 be the diagram of X . Define DT (X ) to be\nX\nY\nY\n\u0001\nn(e(v))\nE\u03bb(e) (e)\n(\u22121)\u03a3\u03c0(v) V\u03bb1 (v)\u03bb2 (v)\u03bb3 (v) (\u22121)s(\u03bb3 (v)) qv\nedge\ne\u2208Edges\nassignments\n\nv\u2208Vertices\n\nwhere\nC\u03bb\n\n0\n\ne\nm\ne (e)\nE\u03bb (e) = (\u22121)S\u03bb (e) ve|\u03bb| qe m(e),\n\n\u0010\n\nqfA\u03bb\n\n\u0011 \u03b40 \u0010\n\nA\n\nqf 0\u03bb0\n\n\u0011\u03b400 \u0010\n\nqgA\u03bb\n\n\u0011 \u03b4\u221e \u0010\n\nA\n\nqg 0 \u03bb 0\n\n0\n\u0011 \u03b4\u221e\n\nand where (f, f 0 , g, g 0 ) are the edges meeting e arranged and oriented as in\nFigure 1. Then the DT partition function DT (X ) is obtained from DT (X )\nby adding a minus sign to the variables qe,0 (and hence also to q).\nNote that for multi-regular edge assignments, the signs (\u22121)\u03a3\u03c0(v) and\n(\u22121)s(\u03bb3 (v)) are both 1.\nRemark 11. Switching the orientation of an edge e has the effect of switching the variables qe,k \u2194 qe,n(e)\u2212k , for k = 1, . . . , n(e) \u2212 1. The edge term in\nthe formula is written for the orientations in Figure 1 but is easily modified\nto an arbitrary orientation using this rule.\nTo make the above formula fully explicit, we give a closed formula for\nn\nthe Zn vertex V\u03bb\u03bc\u03bd\n(q0 , . . . , qn\u22121 ). We first introduce a little more notation.\nConsider the indices on the variables q0 , . . . , qn\u22121 to be in Zn and define\nqt recursively by q0 = 1 and\nqt = qt * qt\u22121\nfor positive and negative t, in other words\n\u22121 \u22121\n{. . . , q\u22122 , q\u22121 , q0 , q1 , q2 , . . . } = {. . . , q0\u22121 q\u22121\n, q0 , 1, q1 , q1 q2 , . . . }.\n\nLet\nq = q0 * * * qn\u22121\nand let\nq\u2022 = {q0 , q1 , q2 , q3 , . . . } = {1, q1 , q1 q2 , q1 q2 q3 , . . . }.\nGiven a partition \u03bd = (\u03bd0 \u2265 \u03bd1 \u2265 * * * ), let\nq\u2022\u2212\u03bd = {q\u2212\u03bd0 , q1\u2212\u03bd1 , q2\u2212\u03bd2 , q3\u2212\u03bd3 , . . . }.\nn\nTheorem 12. The Zn vertex V\u03bb\u03bc\u03bd\n(q0 , . . . , qn\u22121 ) is given by the following\nformula:\nX \u2212|\u03b7|\nn\nn\nV\u03bb\u03bc\u03bd\n= V\u2205\u2205\u2205\n* q \u2212A\u03bb * q \u2212A\u03bc0 * H\u03bd * O\u03bd *\nq0 * s\u03bb0 /\u03b7 (q\u2022\u2212\u03bd ) * s\u03bc/\u03b7 (q\u2022\u2212\u03bd 0 ).\n\u03b7\n\n\fThe Orbifold Topological Vertex\n\n15\n\nwhere s\u03b1/\u03b2 is the skew Schur function associated to partitions \u03b2 \u2282 \u03b1\n(s\u03b1/\u03b2 = 0 if \u03b2 6\u2282 \u03b1), the overline denotes the exchange of variables qk \u2194\nq\u2212k , and\nY\n1\nH\u03bd 0 =\nQn hs\u03bd 0 (j,i)\n(j,i)\u2208\u03bd 0 1 \u2212\ns=1 qs\nhs\u03bd 0 (j, i) = the number of boxes of color s in the (j, i)-hook of \u03bd 0 ,\nO\u03bd =\n\nn\u22121\nY\n\nn\nV\u2205\u2205\u2205\n(qk , qk+1 , . . . , qn+k\u22121 )\u22122|\u03bd|k +|\u03bd|k+1 +|\u03bd|k\u22121 ,\n\nk=0\nn\nV\u2205\u2205\u2205\n\nY\n\n= M (1, q)n\n\nM (qa * * * qb , q)M (qa\u22121 * * * qb\u22121 , q),\n\n0<a\u2264b<n\n\nM (v, q) =\n\n\u221e\nY\n\n1\n.\n(1 \u2212 vq m )m\nm=1\n\nRecall that by our product convention\nq\n\n\u2212A\u03bb\n\n=\n\nn\u22121\nY\n\n\u2212A\u03bb (k,n)\n\nqk\n\n.\n\nk=0\n\nNote that in the multi-regular case, O\u03bd = 1.\n4. A PPLICATIONS OF THE ORBIFOLD VERTEX\n4.1. The orbifold DT crepant resolution conjecture and the orbifold\nDT/GW correspondence. We give a brief description of the DT Crepant\nResolution Conjecture which will be spelled out in detail in [16].\nLet X be an orbifold CY3 and let X be its coarse space. Let\nY = Hilb[Op ] (X )\nbe the Hilbert scheme parameterizing substacks in the class [Op ] \u2208 F0 K(X ).\nY is birational to X and admits a proper morphism \u03c0 : Y \u2192 X. By a theorem of Bridgeland, King, and Reid [7], Y is a smooth CY3 and moreover,\nthere is a Fourier-Mukai isomorphism [7, 11]\n\u03a6 : K(X ) \u2192 K(Y )\ndefined by\nE 7\u2192 Rq\u2217 p\u2217 E\nwhere\np : Z \u2192 X, q : Z \u2192 Y\nare the projections from the universal substack Z \u2282 X \u00d7Y onto each factor.\nThe Fourier-Mukai isomorphism does not respect the filtrations F\u2022 K(X )\nand F\u2022 K(Y ). However, if X has transverse An\u22121 orbifold structure, or\n\n\f16\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nmore generally satisfies the Hard Lefschetz condition [9, Defn 1.1] c.f. [8,\nLem 24], then the image of F0 K(X ) under \u03a6 is contained in F1 K(Y ). We\ncall this image Fexc K(Y ); its elements can be represented by formal differences of sheaves supported on the exceptional fibers of \u03c0 : Y \u2192 X. We\ndefine the multi-regular part of K-theory, Fmr K(X ), to be the pre-image\nof F1 K(Y ) under \u03a6. Its elements can be represented by formal differences\nof sheaves supported in dimension one where at the generic point of each\ncurve in the support, the associated representation of the stabilizer of that\npoint is a multiple of the regular representation. In summary, the following\nfiltration is respected by the Fourier-Mukai isomorphism\nF0 K(X ) \u2282 Fmr K(X ),\n\nFexc K(Y ) \u2282 F1 K(Y ).\n\nWe define the exception partition function of Y and the multi-regular partition function of X as follows\nX\nDTexc (Y ) =\nDT\u03b1 (Y )q \u03b1 ,\n\u03b1\u2208Fexc K(Y )\n\nDTmr (X ) =\n\nX\n\nDT\u03b1 (Y )q \u03b1 .\n\n\u03b1\u2208Fmr K(X )\n\nWe then have our DT crepant resolution conjecture:\nConjecture 1. Let X be an orbifold CY3 satisfying the Hard Lefschetz condition. Let Y the the Calabi-Yau resolution of X described above. Then\nusing \u03a6 to identify the variables we have an equality\nDTmr (X )\nDT (Y )\n=\n.\nDT0 (X )\nDTexc (Y )\nThe series DT0 (X ) and DTexc (Y ) are not unrelated. The conjecture in\n[4, Conjecture A.6] globalizes to\nConjecture 2. Using \u03a6 to identify variables, we have the equality\nDT0 (X ) =\n\ng exc (Y )\nDTexc (Y )DT\nDT0 (Y )\n\ng exc (Y )(q) = DTexc (Y )(q \u22121 ).\nwhere DT\nConjecture 1 will be proven in the toric transverse An\u22121 case in [16] using\nthe orbifold vertex developed in this paper. Conjecture 2 was proven in the\ntransverse An\u22121 case in [4]1\n1\n\nThe theorem in [4] is for the local case X = [C3 /Zn ]. Conjecture 2 is local in nature;\nextending from X = [C3 /Zn ] to X global is routine.\n\n\fThe Orbifold Topological Vertex\n\n17\n\nWe will see in the examples below that the series\n0\nDTmr\n(X ) =\n\nDTmr (X )\nDT0 (X )\n\nwhich we call the reduced, multi-regular DT partition function of X , is\nequal to the reduced GW partition function GW 0 (X ) after a change of variables and analytic continuation. The general change of variables can be\nformulated in terms of Iritani's stacky Mukai vector [15], but we will not\nformulate that explicitly here.\n4.2. Example: the local football. Let\nXa,b = Tot(O(\u2212p0 ) \u2295 O(\u2212p\u221e ) \u2192 P1a,b )\nbe the total space of the bundle O(\u2212p0 ) \u2295 O(\u2212p\u221e ) over the football P1a,b\nwhich is by definition P1 with root constructions [10] of order a and b at the\npoints p0 and p\u221e respectively. Xa,b is a natural orbifold generalization of the\nresolved conifold which is the special case X1,1 . We use our orbifold vertex\nformalism to derive a closed formula for the partition function DT (Xa,b ).\nLet O(D) = O(\u2212p0 ) and let O(D0 ) = O(\u2212p\u221e ). Then the graph in\nFigure 1 is the whole graph of Xa,b and we have\nn(f ) = a,\n\nn(g 0 ) = b,\n\nn(f 0 ) = n(g) = n(e) = 1,\n\nm\ne =m\ne 0 = 0,\n\nand so\nm\ne + \u03b40 + \u03b4\u221e = 1.\nWe write our variables as follows:\npk = qf,k , k = 0, . . . , a \u2212 1\nrk = qg0 ,k , k = 0, . . . , b \u2212 1\nv = ve\nand of course\nq = p0 * * * pa\u22121 = r0 * * * rb\u22121 .\nAs in the usual conifold case, the variables v and q keep track of the\ndegree and the holomorphic Euler characteristic of the curve respectively.\nLoosely speaking, the new variables pk and rl can be thought of as keeping\nba\ntrack of embedded points on the stacky locus having representation k \u2208 Z\nb b respectively.\nand l \u2208 Z\nSince the orbifold edges, namely f and g 0 , are non-compact, the edge\nassignments are multi-regular and so only sign in the formula for DT (Xa,b )\ne 0 +\u03b4\u221e )|\u03bb|\nis the sign (\u22121)(m+\u03b4\n. Thus\nX\na\nDT (Xa,b ) =\nE\u03bb * V\u03bb\u2205\u2205\n(p0 , . . . , pa\u22121 ) * V\u03bbb 0 \u2205\u2205 (r0 , . . . , rb\u22121 )\n\u03bb\n\n\f18\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nwhere\nA (0,a)\n\nE\u03bb = (\u22121)|\u03bb| v |\u03bb| q |\u03bb| p0 \u03bb\n\nA (a\u22121,a)\n\n\u03bb\n* * * pa\u22121\n\nA (0,b)\n\nr0 \u03bb0\n\nA (b\u22121,b)\n\n\u03bb0\n* * * rb\u22121\n\n.\n\nApplying the formula in Theorem 12, we get\n\u2212A\u03bb (0,a)\n\n* * * pa\u22121\u03bb\n\n\u2212A\u03bb0 (0,b)\n\n* * * rb\u22121\u03bb0\n\na\na\nV\u03bb\u2205\u2205\n(p) = V\u2205\u2205\u2205\n(p) * p0\nb\n(r) * r0\nV\u03bbb 0 \u2205\u2205 (r) = V\u2205\u2205\u2205\n\n\u2212A (a\u22121,a)\n\n* s\u03bb0 (p\u2022 )\n\n\u2212A (b\u22121,b)\n\n* s\u03bb (r\u2022 )\n\nwhere\np = (p0 , . . . , pa\u22121 ), p\u2022 = (1, p1 , p1 p2 , p1 p2 p3 , . . . ),\nr = (r0 , . . . , rb\u22121 ), r\u2022 = (1, r1 , r1 r2 , r1 r2 r3 , . . . ).\nThe formula then reads\na\nb\n(p)V\u2205\u2205\u2205\n(r)\nDT (Xa,b ) = V\u2205\u2205\u2205\n\nX\n\ns\u03bb0 (\u2212vq p\u2022 ) s\u03bb (r\u2022 ).\n\n\u03bb\n2\n\n3\n\nIf we write Q = (1, q, q , q , . . . ), then we can rewrite the variables p\u2022 and\nr\u2022 as\np\u2022 = (Q, p1 Q, p1 p2 Q, . . . , p1 * * * pa\u22121 Q)\nr\u2022 = (Q, r1 Q, r1 r2 Q, . . . , r1 * * * rb\u22121 Q)\nand hence\np\u2022 = (Q, pa\u22121 Q, pa\u22121 pa\u22122 Q, . . . , p1 * * * pa\u22121 Q)\nr\u2022 = (Q, rb\u22121 Q, rb\u22121 rb\u22122 Q, . . . , r1 * * * rb\u22121 Q)\nUsing the orthogonality of Schur functions [19, \u00a7 I.4 (4.3')] and the fact\nthat\nY\n(1 + xi yi ) = M (w, q)\u22121\ni,j\n\nif\n(x1 , x2 , x3 , . . . ) = \u2212wqQ,\n\n(y1 , y2 , y3 , . . . ) = Q,\n\nwe get\nDT (Xa,b ) =\n\nb\na\n(p)V\u2205\u2205\u2205\n(r)\nV\u2205\u2205\u2205\n\na Y\nb\nY\n\nM (vpk * * * pa\u22121 rl * * * rb\u22121 , q)\u22121 .\n\nk=1 l=1\n\nUsing the formula for\n\nn\nV\u2205\u2205\u2205\n,\n\nwe arrive at the following\n\nProposition 3. The DT partition function of the local football Xa,b is given\nby\nY\nY\nDT (Xa,b ) = M (1, \u2212q)a+b\nM (w, \u2212q)\nM (u, \u2212q)\u22121\n+\nw\u2208Ca,b\n\n\u2212\nu\u2208Ca,b\n\n\fThe Orbifold Topological Vertex\n\n19\n\nwhere\n+\n\u22121\n\u22121\n\u22121\nCa,b\n= {pi * * * pj , p\u22121\ni * * * pj , rk * * * rl , rk * * * rl , 0 < i \u2264 j < a, 0 < k \u2264 l < b}\n\u2212\nCa,b\n= {vpk * * * pa\u22121 rl * * * rb\u22121 : k = 1, . . . , a, l = 1, . . . , b}.\n\nSince the only stacky curves in Xa,b are non-compact, the reduced multiregular DT partition function is equal to the usual reduced partition function:\nY\n0\nDTmr\n(Xa,b ) = DT 0 (Xa,b ) =\nM (u, \u2212q)\u22121 .\n\u2212\nu\u2208Ca,b\n\nThe Calabi-Yau resolution Y \u2192 X has a single (\u22121, \u22121) curve given by\nthe proper transform of the football to which are attached two chains of\n(0, \u22122)-curves having a \u2212 1 and b \u2212 1 components each. Using the usual\n(non-orbifold) vertex formalism, one can verify that as predicted\nY\nDT (Y )\n=\nM (u, \u2212q)\u22121\nDTexc (Y )\n\u2212\nu\u2208Ca,b\n\nwhere on Y , the variables p1 , . . . , pa\u22121 and r1 , . . . , rb\u22121 correspond to the\nclasses of the curves in each of the chains and v corresponds to the class of\nthe (\u22121, \u22121)-curve.\n4.3. Example: The local BZ2 gerbe. Another example related to the conifold is the local BZ2 gerbe. In this case, X is the global quotient of the\nresolved conifold Tot(O(\u22121) \u2295 O(\u22121) \u2192 P1 ) by Z2 acting fiberwise by\n-1. The graph of X is again given by the one in Figure 1 but now with e\nbeing the only orbifold edge. The numerical invariants are\nn(e) = 2, m = m\ne = m0 = m\ne 0 = \u22121,\nand the variables are\nq0 , q 1 , v 0 , v 1\ncorresponding to the K-theory classes\nOp \u2297 \u03c10 , Op \u2297 \u03c11 , OC (\u22121) \u2297 \u03c10 , OC (\u22121) \u2297 \u03c11 ,\nwhere p = p(e) is a point on the curve C = C(e).\nThe Calabi-Yau resolution Y \u2192 X is given by local P1 \u00d7 P1 , namely\n\u0001\nY = Tot O(\u22122, \u22122) \u2192 P1 \u00d7 P1 .\nUnlike the local football, there is not a nice closed formula for DT (X ).\nHowever, our vertex formula does provides an explicit formula for the coefficients of the expansion of DT (X ) as a series in v0 and v1 . For applications\nto the DT/GW correspondence and the DT crepant resolution conjecture, we\ncan restrict ourselves to curve classes whose generic point has a representation which is a multiple of the regular representation. This corresponds to\n\n\f20\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nexpanding DT (X ) about the variable v = v0 v1 , which in the vertex formula\ncorresponds to summing over multi-regular edge assignments. Recall that\nthis series is denoted DTmr (X ). We compute with the vertex formula:\nX\n\u00012\n2\nDT mr (X ) =\n(q0 , q1 )\nE\u03bd V\u2205\u2205\u03bd\n\u03bd\n|\u03bd|0 =|\u03bd|1\n\nwhere\nE\u03bd = v\n\n|\u03bd|0\n\nP\n\n* q0\n\ni,j\u2208\u03bd[0,2]\n\ni+j+1\n\nand\n2\n2\nV\u2205\u2205\u03bd\n= V\u2205\u2205\u2205\n\n* q1\n\ni,j\u2208\u03bd[1,2]\n\ni+j+1\n\n1\n\nY\nj,i\u2208\u03bd 0\n\nP\n\n1\u2212\n\nh0 (j,i) h1 (j,i)\nq0 \u03bd 0 q1 \u03bd 0\n\n\u00012\n\n2\nNoting that DT 0 (X ) = V\u2205\u2205\u2205\n, we get\n\nDT mr (X )\n=\nDT 0 (X )\n\n\u221e\nX\nd=0\n\nP\n\nv\n\nX\n\nd\n\n\u03bd\n|\u03bd|0 =|\u03bd|1 =d\n\nq0\nQ\n\ni,j\u2208\u03bd[0,2]\n\ni+j+1\n\nP\n\nq1\n\ni,j\u2208\u03bd[1,2]\n\ni+j+1\n\n\u0010\n\u0011\nh0\u03bd 0 (j,i) h1\u03bd 0 (j,i) 2\nq1\nj,i\u2208\u03bd 0 1 \u2212 q0\n\nWe expand the above to order 3 in v. The linear term corresponds to the\ntwo partitions of size 2 and the quadratic term corresponds to the 5 partitions\nof size 4. The rational function in the \u03bd sum is invariant under \u03bd \u2194 \u03bd 0 and\nis easily evaluated:\n2q0 q12\n1+ v\n(1 \u2212 q0 q1 )2 (1 \u2212 q1 )2\n(\n+ v2\n\n2q04 q16\n+\n(1 \u2212 q02 q12 )2 (1 \u2212 q0 q12 )2 (1 \u2212 q0 q1 )2 (1 \u2212 q1 )2\n\n2q04 q14\n(1 \u2212 q02 q12 )2 (1 \u2212 q0 q1 )2 (1 \u2212 q0 )2 (1 \u2212 q1 )2\nq04 q14\n+\n(1 \u2212 q0 q12 )2 (1 \u2212 q0 q1 )4 (1 \u2212 q0 )2\n\n)\n+ O(v 3 )\n\nAs predicted by Conjecture 1, the above series (after replacing q0 with\n\u2212q0 ) matches with DT (Y )/DT exc (Y ) under the change of variables\nq = q0 q1 ,\n\nvs = q1 v,\n\nv f = q1 .\n\nHere vs and vf are the variables associated to the generating curve classes\nin P1 \u00d7 P1 (the section and fiber classes).\nWe note that it is noticeably more efficient to compute with the orbifold\nvertex than to compute on local P1 \u00d7 P1 .\n\n\fThe Orbifold Topological Vertex\n\n21\n\nThe GW partition function of X is obtained from DTmr (X )/DT0 (X ) by\nthe change of variables\nq0 q1 = \u2212ei\u03bb ,\n\nq1 = \u2212eix ,\n\nv = w,\n\nwhere \u03bb is the genus parameter, w is the degree parameter, and x indexes\nthe number of marked BZ2 points. So for example, if GW1,g,n (X ) denotes\nthe GW invariant of degree 1 maps whose domain curve is genus g with n\nmarked BZ2 points, then\n\u0012\n\u0013\u22122\nX\n1\nx\n\u03bb\n2g\u22122 n\nGW1,g,n (X )\u03bb\nx =\n2 sin\nsec2 .\n2\n2\n2\nn,g\n5. P ROOF OF T HEOREM 10\n5.1. Overview. Our computation of the DT partition function of X uses a\nlocalization technique. The action of the torus T on X induces a T action on\nHilb\u03b1 (X ) with isolated fixed points. The fixed points are given by substacks\nof X defined by monomial ideals on each chart and these correspond to 3D\npartitions at each vertex. We use a theorem of Behrend and Fantechi [3,\nTheorem 3.4] which says that the weighted Euler characteristic of Hilb\u03b1 (X )\nis given by a signed count of fixed points:\nDT\u03b1 (X ) = e(Hilb\u03b1 (X ), \u03bdHilb\u03b1 (X ))\nX\n\u03b1\n=\n(\u22121)dim Tp Hilb (X ) .\np\u2208Hilb\u03b1 (X )T\n\nThe above formula is also apparent from the point of view of virtual localization as used in [20], although we avoid non-compactness issues by the\nuse of weighted Euler characteristics.\nThus the main two tasks are the following.\n(1) A combinatorial description of the T -fixed substacks and the computation of the K-theory class of a given T -fixed substack.\n(2) The computation of the parity of the tangent space to a fixed point\nin order to determine the sign.\nOur approach to the above two tasks are quite different from [20] whose\ntechniques do not readily generalize to the orbifold case. In fact our approach provides a substantial simplification in the non-orbifold case over\nthe proof of [20]; in particular, we avoid the need for the combinatorial\nanalysis in [20, \u00a7 4.11].\nTo handle (1), we find a K-theory decomposition of T -invariant substacks into edge and vertex terms, and we use well chosen functions on\nK-theory to write the class in our basis. This is carried out in \u00a7 5.2.\n\n\f22\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nTo handle (2), we exploit T -equivariant Serre duality and the Euler pairing in K-theory to determine the vertex and edge contributions to the signs.\nThis is quite involved and is carried out in \u00a7 6.\nOur techniques yield a vertex formalism for an arbitrary orbifold toric\nCY3 X (not just the transverse An\u22121 case). Namely, we derive a formula of\nthe form given by equation (1) where E(e) is a signed monomial depending\nb G is the generating function\non \u03bb(e) and the local geometry of C(e) and V\n\u03bb\u03bc\u03bd\nfor 3D partitions asymptotic to (\u03bb, \u03bc, \u03bd), colored by representations of G\n(as in equation (3)), except counted with the sign rule given in Theorem 21\n(see Remark 24). Although the formula is completely combinatorial and\ncan be made explicit, it is not as computational effective as the formula for\nthe transverse An\u22121 case because we do not have an explicit formula for the\nb G as we do in the transverse An\u22121 case. We also\ngeneral orbifold vertex V\n\u03bb\u03bc\u03bd\nexpect there to an explicit formula for the vertex for G = Z2 \u00d7 Z2 but not\nin general.\n5.2. The K-theory decomposition.\nLemma 13. Torus fixed points in\nG\n\nHilb\u03b1 (X )\n\n\u03b1\u2208F1 K(X )\n\nare isolated and in bijective correspondence with sets {\u03bb(e), \u03c0(v)} where\n\u03bb(e) is an edge assignment (Definition 9) and {\u03c0(v) : v \u2208 Vertices} is a collection of 3D-partitions such that \u03c0(v) is asymptotic to (\u03bb1 (v), \u03bb2 (v), \u03bb3 (v)).\nProof. Fix an orientation of \u0393, the graph associated to X . Recall that D(e)\nand D0 (e) are the invariant divisors incident to C(e) corresponding to the regions to the left and right of e respectively. Recall that (D1 (e), D2 (e), D3 (e))\nare the invariant divisors incident to p(e) corresponding to the regions opposite of (e1 (v), e2 (v), e3 (v)) from v.\nLet Y \u2282 X be a torus invariant substack of dimension at most one. We\nassociate to Y a collection {\u03bb(e), \u03c0(v)} as follows. Define \u03bb(e) to be the\nset (i, j) such that the composition\nOX (\u2212iD(e) \u2212 jD0 (e)) \u2192 OX \u2192 OY\nis non-zero at a general point of C(e).\nSimilarly, we define \u03c0(v) to be the set (i, j, k) such that the composition\nOX (\u2212iD1 (v) \u2212 jD2 (v) \u2212 kD3 (v)) \u2192 OX \u2192 OY\nis non-zero at p(v). The fact that \u03c0(v) is asymptotic to (\u03bb1 (v), \u03bb2 (v), \u03bb3 (v))\nfollows easily from the construction and our conventions.\nConversely, given {\u03bb(e), \u03c0(v)}, an edge assignment \u03bb(e) and a set {\u03c0(v)}\nof 3D-partitions asymptotic to (\u03bb1 (v), \u03bb2 (v), \u03bb3 (v)), we construct a torus\n\n\fThe Orbifold Topological Vertex\n\n23\n\ninvariant substack Y \u2282 X as follows. Note that the edge assignment is\nuniquely determined by the 3D-partitions {\u03c0(v)}. For each v, consider the\nideal sheaf I\u03c0(v) \u2282 OX generated by the image of the maps\nOX (\u2212iD1 (v) \u2212 jD2 (v) \u2212 kD3 (v)) \u2192 OX\nfor (i, j, k) not contained in \u03c0(v). This determines a torus invariant substack\nin the torus open invariant neighborhood of the point p(v) for each v. By the\ncompatibility of the edge partitions, these substacks agree on the overlaps\nand thus determine a global substack.\n\u0003\nRemark 14. It will be convenient notation to identify an element (i, j, k) \u2208\n\u03c0(v) with the corresponding divisor. Thus if we write D \u2208 \u03c0(v) we will\nmean\nD = iD1 (v) + jD2 (v) + kD3 (v)\nfor the corresponding (i, j, k) \u2208 \u03c0(v). Similarly, D \u2208 \u03bb(e) means\nD = iD(e) + jD0 (e)\nfor the corresponding (i, j) \u2208 \u03bb(e). Our orientation conventions guarantee\nconsistency between the divisors associated to elements of edge partitions\nand the divisors associated to elements of the legs of vertex partitions.\nWe write the K-theory class of the structure sheaf of a torus invariant\nsubstack as a sum over edge and vertex terms:\nProposition 4. Let Y \u2282 X be a T -invariant substack of dimension no\ngreater than one. Let {\u03bb(e), \u03c0(v)} be the corresponding set of vertex and\nedge partitions. Then in T -equivariant compactly supported K-theory we\nhave\nX X\nX\nX\nOY =\nOC(e) (\u2212D) +\n\u03be\u03c0(v) (D)Op(v) (\u2212D).\ne\u2208Edges D\u2208\u03bb(e)\n\nv\u2208Vertices D\u2208\u03c0(v)\n\nProof. For any N \u2208 N let N be the cubical 3D-partition of size N , that\nis N = {(i, j, k) : 0 \u2264 i, j, k < N }. Let ZN be the T -invariant substack\nhaving empty edge partitions and vertex partitions all equal to N. Let YN be\nthe stack theoretic union of Y and ZN . Choose N large enough so that for\neach v, \u03c0(v) is contained in the the union of the legs of \u03c0(v) with N.\nWe have embeddings Y \u2282 YN and ZN \u2282 YN from which we get the\nfollowing K-theory equalities:\nX\nX\nIY \u2212 IYN =\nOp(v) (\u2212D)\nv\u2208Vertices\n\nIZN \u2212 IYN =\n\nX\n\nD\u2208N\nD6\u2208\u03c0(v)\n\nX\n\ne\u2208Edges D\u2208\u03bb(e)\n\nOC(e) (\u2212D \u2212 N D0 (e) \u2212 N D\u221e (e)).\n\n\f24\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nFor any D \u2208 \u03bb(e), we have\nOC(e) (\u2212D) = OC(e) (\u2212D \u2212 N D0 (e) \u2212 N D\u221e (e))\n+\n\nN\n\u22121\nX\n\nOp0 (e) (\u2212D \u2212 kD0 (e)) + Op\u221e (e) (\u2212D \u2212 kD\u221e (e)).\n\nk=0\n\nWe note that if v is the initial vertex of e, then\n\u22121\nX N\nX\n\nOp0 (e) (\u2212D \u2212 kD0 (e)) =\n\nD\u2208\u03bb(e) k=0\n\nX\n\nOp(v) (\u2212D)\n\nD\u2208N\u2229Lege \u03c0(v)\n\nwhere Lege \u03c0(v) is the leg of \u03c0(v) in the e direction. The similar statement\nholds for p\u221e (e).\nPutting it all together we get:\nOY = OZN \u2212 (IY \u2212 IYN ) + (IZN \u2212 IYN )\n\uf8eb\nX\n\n=\n\nv\u2208Vertices\n\n+\n\nX\n\n\uf8f6\n\nX\n\uf8f7\n\uf8ecX\n\uf8ec\nOp(v) (\u2212D)\uf8f7\nO\n(\u2212D)\n\u2212\np(v)\n\uf8f8\n\uf8ed\nD\u2208N\nD6\u2208\u03c0(v)\n\nD\u2208N\n\nX\n\nOC(e) (\u2212D \u2212 N D0 (e) \u2212 N D\u221e (e))\n\ne\u2208Edges D\u2208\u03bb(e)\n\n=\n\nX\n\nX\n\nOp(v) (\u2212D)\n\nv\u2208Vertices D\u2208\u03c0(v)\u2229N\n\n+\n\nX\n\nX\n\nOC(e) (\u2212D) \u2212\n\ne\u2208Edges D\u2208\u03bb(e)\n\n=\n\nX\n\n!\n\nN\n\u22121\nX\n\n(Op0 (e) (\u2212D \u2212 kD0 (e)) + Op\u221e (e) (\u2212D \u2212 kD\u221e (e)))\n\nk=0\n\nX\n\n\u03be\u03c0(v) (D)Op(v) (\u2212D) +\n\nv\u2208Vertices D\u2208\u03c0(v)\n\nwhich proves the proposition.\n\nX\n\nX\n\nOC(e) (\u2212D)\n\ne\u2208Edges D\u2208\u03bb(e)\n\n\u0003\n\nIn the case where X has transverse An\u22121 orbifold structure, we can further refine our K-theory decomposition of OY into the basis described in\n\u00a7 3.3. In the below lemmas, we write the decompositions of the vertex and\nthe edge terms.\nLemma 15. The vertex terms decompose as follows\n(P\nX\n[Op(v) \u2297 \u03c1i\u2212j ] if e(v) is oriented outward,\nOp(v) (\u2212D) = Pi,j,k\u2208\u03c0(v)\nif e(v) is oriented inward.\ni,j,k\u2208\u03c0(v) [Op(v) \u2297 \u03c1j\u2212i ]\nD\u2208\u03c0(v)\n\n\fThe Orbifold Topological Vertex\n\n25\n\nProof. This follows immediately from our conventions (\u00a7 3.2) and our choice\nof the indexing of the representations \u03c1k of Zn(e(v)) (\u00a7 3.3).\n\u0003\nProposition 5. Let e be a compact edge corresponding to a curve C = C(e)\nand let \u03bb = \u03bb(e) be an edge partition. Let D = D(e), D0 = D0 (e) and let\nm = deg(D), m0 = deg(D0 ). Assume that e and its incident edges f , f 0 ,\ng, g 0 are oriented as in figure 1. Let n = n(e), a = n(f ), a0 = n(f 0 ),\nb = n(g), and b0 = n(g 0 ), then\nX\n\nn\u22121\nX\n\n0\n\nOC (\u2212iD \u2212 jD ) =\n\ni,j\u2208\u03bb\n\n|\u03bb|k * [OC (\u22121) \u2297 \u03c1k ]\n\nk=0\n\n+\n\nn\u22121\nX\n\n\u03bb\nCm,\ne m\ne 0 [k, n] * [Op(e) \u2297 \u03c1k ]\n\nk=0\n\n+ \u03b40\n\na\u22121\nX\n\nA\u03bb (k, a ) * [Op(f ) \u2297 \u03c1k ]\n\nk=0\n\n+\n\n\u03b400\n\n0 \u22121\na\nX\n\nA\u03bb0 (k, a0 ) * [Op(f 0 ) \u2297 \u03c1k ]\n\nk=0\n\n+ \u03b4\u221e\n\nb\u22121\nX\n\nA\u03bb (k, b ) * [Op(g ) \u2297 \u03c1k ]\n\nk=0\n0\n\n+\n\n0\n\u03b4\u221e\n\nb \u22121\nX\n\nA\u03bb0 (k, b0 ) * [Op(g0 ) \u2297 \u03c1k ].\n\nk=0\n\nSince OC (\u2212iD \u2212jD0 ) is supported on C, it must be a combination of the\nclasses [OC (\u22121)\u2297\u03c1k ] k = 0, . . . , n\u22121, [Op(edge) \u2297\u03c1k ] k = 0 * * * , n(edge)\u2212\n1 for edge \u2208 {e, f, f 0 , g, g 0 }, and [Op ] since the remaining generators are\nalways supported away from C. The classes [Op(edge) \u2297 \u03c10 ] can be written\nin terms of the other classes using the relation (4). There are no further\nrelations and hence the decomposition of OC (\u2212iD \u2212 jD0 ) into the above\nclasses (without [Op(edge) \u2297 \u03c10 ]) has unique coefficients. We first compute\nthe coefficients of that decomposition and then restore the classes with \u03c10\nvia the relation (4). Let B be the set of such classes:\n\b\nB = [Op ], [OC (\u22121) \u2297 \u03c1k ]k=0,...,n\u22121 , [Op(edge) \u2297 \u03c1k ]k=1,...,n(edge),edge\u2208{e,f,f 0 ,g,g0 } .\nP\nThe coefficient of [OC (\u22121) \u2297 \u03c1k ] in i,j\u2208\u03bb OC (\u2212iD \u2212 jD0 ) is clearly\n|\u03bb|k since each summand acts with weight i\u2212j mod n at the generic point.\nTo determine the other coefficients, we construct functions on K-theory\nvanish on all the elements of B except one. For example, the holomorphic\n\n\f26\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nEuler characteristic \u03c7 which vanishes on all the classes in B except [Op ] on\nwhich it is one.\nWe first suppose that n > 1. Then we have that f = f 0 = g = g 0 = 1 and\nthe only point classes are [Op(e) \u2297\u03c1k ] for k = 1 * * * n\u22121 and [Op ]. We define\na function \u03b1k on K-theory as follows. Let Cl \u2282 IC be the component\nof\n\u0001\nthe inertia stack corresponding to l \u2208 Zn . Let \u03c9 = exp 2\u03c0i\nand\nlet\n\u03c4\nbe\nn\nthe Toen operator (see Appendix A). We define\nn\u22121 Z\nX\n\u0001\n\u03b1k (E) =\n\u03c9 \u2212lk \u2212 1 \u03c4 (E).\nCl\n\nl=0\n\nLemma 16. The function \u03b1k equals 0 on all classes of B except for [Op(e) \u2297\n\u03c1k ] on which it is 1.\nProof. Recall that by definition [OC (\u22121) \u2297 \u03c1l ] = n1 \u03c0\u2217 [OCe (\u22121) \u2297 \u03c1l ] where\ne \u2192 C is an n-fold cover with C\ne \u223c\n\u03c0 : C\n= P1 \u00d7 BZn . By the functorial\nproperties of the Toen operator (Theorem 35 in Appendix A), we have\n\u03c4 ([OC (\u22121) \u2297 \u03c1l ]) =\n\n1\n\u03c0\u2217 \u03c4 [OCe (\u22121) \u2297 \u03c1l ].\nn\n\nHowever, since \u03c4 (OCe (\u22121)) has vanishing H 2 terms on each component of\ne all the integrals in \u03b1k ([OC (\u22121) \u2297 \u03c1l ]) are zero. For the point classes,\nI C,\nwe compute (using example 36 from Appendix A)\nn\u22121 Z\nX\n(\u03c9 \u2212lk \u2212 1)\u03c4 (Op(e) \u2297 \u03c1j )\n\u03b1k ([Op(e) \u2297 \u03c1j ]) =\nl=0\n\n=\n\nn\u22121\nX\n\nCl\n\n(\u03c9\n\n\u2212lk\n\nZ\n\u2212 1)\n\n\u03c9 lj [p(e)]\n\nCl\n\nl=0\nn\u22121\n\n1 X l(k\u2212j)\n=\n\u03c9\n\u2212 \u03c9 lj\nn l=0\n= \u03b4k\u2212j,0 \u2212 \u03b4j,0 .\nNote that\n\u03b1k (Op ) = \u03b1k (Op(e) \u2297 Rreg ) =\n\nn\u22121\nX\n\n\u03b4k\u2212j,0 \u2212 \u03b4j,0 = 0\n\nj=0\n\nand the lemma is proved.\n\n\u0003\n\nBy the above lemma, the coefficient of Op(e) \u2297 \u03c1k in OC (\u2212iD \u2212 jD0 ) is\ngiven by \u03b1k (OC (\u2212iD \u2212 jD0 )). Using example 37 in Appendix A we can\n\n\fThe Orbifold Topological Vertex\n\n27\n\ncompute as follows\n0\n\n\u03b1k (OC (\u2212iD \u2212 jD )) =\n\nn\u22121 Z\nX\n\n\u0001\n\u03c9 \u2212lk \u2212 1 \u03c4 (OC (\u2212iD \u2212 jD0 ))\n\nCl\n\nl=0\n\nZ\nn\u22121\nX\n\u2212lk\n=\n(\u03c9 \u2212 1)\n\u03c9 l(i\u2212j) (1 + [p(e)](1 \u2212 im \u2212 jm0 ))\nCl\n\nl=0\n\nn\u22121\n\n1 X l(i\u2212j\u2212k)\n\u03c9\n\u2212 \u03c9 l(i\u2212j)\n= (1 \u2212 im \u2212 jm )\nn l=0\n0\n\n= (1 \u2212 im\ne \u2212 jm\ne 0 )(\u03b4i\u2212j,k \u2212 \u03b4i\u2212j,0 ).\nTherefore\n!\nX\n\nCoeff [Op(e) \u2297\u03c1k ]\n\nOC (\u2212iD \u2212 jD0 )\n\n\u03bb\n\u03bb\n= Cm,\ne m\ne 0 [k, n] \u2212 Cm,\ne m\ne 0 [0, n].\n\ni,j\u2208\u03bb\n\nWe also have\n!\nCoeff [Op ]\n\nX\n\nOC (\u2212iD \u2212 jD0 )\n\n!\nX\n\n=\u03c7\n\ni,j\u2208\u03bb\n\nOC (\u2212iD \u2212 jD0 )\n\ni,j\u2208\u03bb\n\n=\n\nn\u22121 Z\nXX\ni,j\u2208\u03bb l=0\n\n\u03c4 (OC (\u2212iD \u2212 jD0 ))\n\nCl\n\nn\u22121\nX 1X\n\u03c9 l(i\u2212j) (1 \u2212 im \u2212 jm0 )\nn\ni,j\u2208\u03bb\nl=0\nX\n=\n(1 \u2212 im \u2212 jm0 )\u03b4i\u2212j,0\n\n=\n\ni,j\u2208\u03bb\n\u03bb\n= Cm,\ne m\ne 0 [0, n]\n\nUsing the relation\n[Op ] =\n\nn\u22121\nX\n\n[Op(e) \u2297 \u03c1k ],\n\nk=0\n\nwe find that\nX\n\nn\u22121\nX\n\n0\n\n[OC (\u2212iD \u2212 jD )] =\n\ni,j\u2208\u03bb\n\n|\u03bb|k * [OC (\u22121) \u2297 \u03c1k ]\n\nk=0\n\n+\n\nn\u22121\nX\n\n\u03bb\nCm,\ne m\ne 0 [k, n] * [Op(e) \u2297 \u03c1k ]\n\nk=0\n\nand Proposition 5 is proved for the case of n > 1.\n\n\f28\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n0\nWe now assume that n = 1. Recall the definitions of \u03b40 , \u03b400 , \u03b4\u221e , \u03b4\u221e\n, m,\ne\n0\nand m\ne from \u00a7 3.4.\nThe holomorphic Euler characteristic of a general line bundle on the football C is given in example 38 in Appendix A:\n\u0016\n\u0017 \u0016\n\u0017\ns\nt\n\u03c7 (OC (dp + sp0 + tp\u221e )) = d + 1 +\n+\nmax(a, a0 )\nmax(b, b0 )\nThus\n0\n\u03c7(OC (\u2212iD \u2212 jD0 )) = \u03c7(OC ((\u2212im\ne \u2212 jm\ne 0 )p + (i\u03b40 + j\u03b400 )p0 + (i\u03b4\u221e + j\u03b4\u221e\n)p\u221e ))\n\u0016\n\u0017\n\u0016\n\u0017\n0\ni\u03b40 + j\u03b400\ni\u03b4\u221e + j\u03b4\u221e\n= \u2212im\ne \u2212 jm\ne0 + 1 +\n+\nmax(a, a0 )\nmax(b, b0 )\n\u0017 \u0016 0 \u0017\n\u0016 \u0017 \u0016 0\u0017 \u0016\nj\u03b40\ni\u03b4\u221e\nj\u03b4\u221e\ni\u03b40\n0\n+\n+\n+\n= \u2212im\ne \u2212 jm\ne +1+\n0\na\na\nb\nb0\n\nwhere in the last equality we used the fact that either \u03b40 or \u03b400 is zero and\n0\nis zero.\nthat either \u03b4\u221e or \u03b4\u221e\nWe conclude that\n!\nX\n\u03bb\n0\n0\nCoeff [Op ]\nOC (\u2212iD \u2212 jD0 ) =Cm,\ne m\ne 0 + \u03b40 A\u03bb (0, a) + \u03b40 A\u03bb0 (0, a )\ni,j\u2208\u03bb\n0\n+ \u03b4\u221e A\u03bb (0, b) + \u03b4\u221e\nA\u03bb0 (0, b0 )\n\nFor k = 1, . . . , max(a, a0 ) \u2212 1 we define\n\u03bck (E) = \u03c7(E(kD0 )) \u2212 \u03c7(E).\nFor k = 1, . . . , max(b, b0 ) \u2212 1 we define\n\u03bdk (E) = \u03c7(E(kD\u221e )) \u2212 \u03c7(E).\nLemma 17. The function \u03bck is zero on all the classes in B except for\n\u03b40 [Op(f ) \u2297 \u03c1k ] + \u03b400 [Op(f 0 ) \u2297 \u03c1k ] on which it is 1. Likewise, the function\n0\n\u03bdk is zero on all the classes in B except for \u03b4\u221e [Op(g) \u2297 \u03c1k ] + \u03b4\u221e\n[Op(g0 ) \u2297 \u03c1k ]\non which it is 1.\nProof. Since OC (D0 ) = OC (p0 ), we have\n\u03bck (OC (\u22121)) = \u03c7(OC (\u2212p + kp0 )) \u2212 \u03c7(OC (\u2212p))\n\u0016\n\u0017\nk\n=\n= 0.\nmax(a, a0 )\nBy our orientation conventions, the weight of the action of O(kD0 ) on Op(f )\nand Op(f 0 ) is \u2212k. Then for k, l \u2208 {1, . . . , a \u2212 1}\n\u03bck (Op(f ) \u2297 \u03c1l ) = \u03c7(Op(f ) \u2297 \u03c1l\u2212k ) \u2212 \u03c7(Op(f ) \u2297 \u03c1k )\n= \u03b4l,k\n\n\fThe Orbifold Topological Vertex\n\n29\n\nand similarly for k, l \u2208 {1, . . . , a0 \u2212 1} we have\n\n\u03bck (Op(f 0 ) \u2297 \u03c1l ) = \u03b4l,k .\n\nFinally, \u03bck vanishes on [Op ], [Op(g) \u2297\u03c1l ], and [Op(g0 ) \u2297\u03c1l ] since these classes\ncan be taken with support disjoint from D0 . This proves the assertions of\nthe lemma for \u03bck ; the proof for \u03bdk is similar.\n\u0003\n\nBy theP\nlemma, we can use \u03bck and \u03bdk to determine the remaining coefficients of i,j\u2208\u03bb OC (\u2212iD \u2212 jD0 ) in the basis B.\n\n0\n\u03bck (OC (\u2212iD \u2212 jD0 )) =\u03c7(OC ((\u2212im\ne \u2212 jm\ne 0 )p + (i\u03b40 + j\u03b400 + k)p0 + (i\u03b4\u221e + j\u03b4\u221e\n)p\u221e ))\n0\n+ \u03c7(OC ((\u2212im\ne \u2212 jm\ne 0 )p + (i\u03b40 + j\u03b400 )p0 + (i\u03b4\u221e + j\u03b4\u221e\n)p\u221e ))\n\u0016\n\u0017 \u0016\n\u0017\n0\n0\ni\u03b40 + j\u03b40 + k\ni\u03b40 + j\u03b40\n=\n\u2212\n0\nmax(a, a )\nmax(a, a0 )\n\u0017 \u0016 \u0017\u0013\n\u0012\u0016\n\u0012\u0016\n\u0017 \u0016 \u0017\u0013\ni+k\ni\nj+k\nj\n0\n=\u03b40\n\u2212\n+ \u03b40\n\u2212 0\n0\na\na\na\na\n\nwhere in the last equality we use the fact that at least one of \u03b40 , \u03b400 is zero.\nComputing similarly, we get that\n\n0\n\n\u03bdk (OC (\u2212iD \u2212 jD )) = \u03b4\u221e\n\n\u0012\u0016\n\n\u0017 \u0016 \u0017\u0013\n\u0012\u0016\n\u0017 \u0016 \u0017\u0013\ni\nj+k\nj\ni+k\n0\n\u2212\n+ \u03b4\u221e\n\u2212 0\n.\n0\nb\nb\nb\nb\n\n\f30\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nPutting together the computations, we obtain\nX\nOC (\u2212iD \u2212 jD0 ) = |\u03bb| * [OC (\u22121)]\ni,j\u2208\u03bb\n0\n0\n\u03bb\nCm,\ne m\ne 0 + \u03b40 A\u03bb (0, a) + \u03b40 A\u03bb0 (0, a )\n\n+\n\n!\n0\nA\u03bb0 (0, b0 ) [Op ]\n+ \u03b4\u221e A\u03bb (0, b) + \u03b4\u221e\n\n+\n\na\u22121\nX\n\n(A\u03bb (k, a ) \u2212 A\u03bb (0, a )) * [Op(f ) \u2297 \u03c1k ]\n\nk=1\n\n+\n\n0 \u22121\na\nX\n\n(A\u03bb0 (k, a0 ) \u2212 A\u03bb0 (0, a0 )) * [Op(f 0 ) \u2297 \u03c1k ]\n\nk=1\n\n+\n\nb\u22121\nX\n\n(A\u03bb (k, b ) \u2212 A\u03bb (0, b )) * [Op(g ) \u2297 \u03c1k ]\n\nk=1\n0\n\n+\n\nb \u22121\nX\n\n(A\u03bb0 (k, b0 ) \u2212 A\u03bb0 (0, b0 )) * [Op(g0 ) \u2297 \u03c1k ].\n\nk=1\n\nNote that we can multiply the f (respectively f 0 , g, g 0 ) sum by \u03b40 (respec0\ntively \u03b400 , \u03b4\u221e , \u03b4\u221e\n) without changing the equality. Thus applying the relation (4), we get\nX\nOC (\u2212iD \u2212 jD0 ) = |\u03bb| * [OC (\u22121)]\ni,j\u2208\u03bb\n\u03bb\n+ Cm,\ne m\ne 0 * [Op(e) \u2297 \u03c10 ]\n\n+ \u03b40\n\na\u22121\nX\n\nA\u03bb (k, a ) * [Op(f ) \u2297 \u03c1k ]\n\nk=1\n\n+\n\n\u03b400\n\n0 \u22121\na\nX\n\nA\u03bb0 (k, a0 ) * [Op(f 0 ) \u2297 \u03c1k ]\n\nk=1\n\n+ \u03b4\u221e\n\nb\u22121\nX\n\nA\u03bb (k, b ) * [Op(g ) \u2297 \u03c1k ]\n\nk=1\n0\n\n+\n\n0\n\u03b4\u221e\n\nb \u22121\nX\nk=1\n\nA\u03bb0 (k, b0 ) * [Op(g0 ) \u2297 \u03c1k ]\n\n\fThe Orbifold Topological Vertex\n\n31\n\nwhich proves Proposition 4 in the case where n = 1 and hence completes\nits proof.\n6. T HE S IGN F ORMULA\nSign, sign, everywhere a sign\nBlocking out the scenery, breaking my mind\n-Five Man Electrical Band\n6.1. Overview. By [3, Theorem 3.4] and Lemma 13, the invariant DT\u03b1 (X )\nis given by a signed count of torus invariant ideal sheaves I where the sign\n1\nis given by (\u22121)Ext0 (I,I) . This section is devoted to computing those signs\nand arranging them into vertex and edge terms. In \u00a7 6.2 we derive a general\nsign formula, theorem 21, and in \u00a7 6.3, we compute the sign formula in the\ncase where X has transverse An\u22121 orbifold structure.\n6.2. General Sign Formula. Let I \u2286 OX be the ideal sheaf of Y . The\nZariski tangent space to Y in Hilb(X ) is isomorphic to Ext10 (I, I). We want\nto compute its dimension modulo 2 in terms of the associated partitions\n{\u03bb(e)} and {\u03c0(v)}. Let T be the 3-dimensional torus acting on X .\nFor a T -representation V , we use V \u2228 to denote the dual representation.\nBy equivariant Serre duality, we have\nExti (F, G)\u2228 = Ext3\u2212i (G, F \u2297 \u03c9X ),\nand likewise for traceless Ext. If w \u2208 Hom(T, C\u2217 ), we use the notation\nC[w] to denote a 1-dimensional T -representation with weight w.\nLemma 18. As a T -equivariant line bundle, \u03c9X \u223c\n= OX \u2297C C[\u03bc] for some\nprimitive weight \u03bc.\nProof. The Calabi-Yau condition on X implies that \u03c9X must be an equivariant lift of OX and hence it is of the form OX \u2297 C[\u03bc]. If \u03bc is not primitive,\nthen the generic stabilizer of X is non-trivial.\n\u0003\nDefinition 19. We define the shifted dual of a T -representation V by the\nformula\nV \u2217 = V \u2228 \u2297 C[\u2212\u03bc].\nNote that the shifted dual induces a fixed-point free involution on characters of T .\nProposition 6. The shifted dual satisfies the following properties.\n(1) For any T -equivariant sheaves F and G,\nExti (F, G)\u2217 \u223c\n= Ext3\u2212i (G, F).\n\n\f32\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n(2) Let V and W be virtual T -representations such that\nV \u2212 V \u2217 = W \u2212 W \u2217.\nThen the virtual dimensions of V and W are equal modulo 2.\nProof. The first statement is a restatement of equivariant Serre duality. The\nsecond statement follows by comparing the dimensions of the \u03bd and \u2212\u03bd \u2212 \u03bc\nweight spaces of V and W as \u03bd runs through half the characters of T . \u0003\nDefinition 20. Let V be a virtual T -representation. We define s(V ) \u2208\nZ/2Z to be the dimension modulo 2 of V . We also define \u03c3(V \u2212 V \u2217 ) =\ns(V ), where the input of \u03c3 is required to be an anti-self shifted dual virtual\nrepresentation. \u03c3 is well-defined by Proposition 6.\nConsidered as T -representations, we have that\nExt10 (I, I) \u2212 Ext20 (I, I) = \u03c7(OX , OX ) \u2212 \u03c7(I, I).\nUsing the exact sequence\n0 \u2192 I \u2192 OX \u2192 OY \u2192 0,\nwe can write\n\u03c7(OX , OX ) \u2212 \u03c7(I, I) = \u03c7(OX , OY ) + \u03c7(OY , OX ) \u2212 \u03c7(OY , OY ).\nSince \u03c7(OX , OY )\u2217 = \u2212\u03c7(OY , OX ), we have\ns(Ext10 (I, I)) = s(\u03c7(OX , OY )) + \u03c3(\u03c7(OY , OY )).\nThe first term is \u03c7(OY ) modulo 2, so we are left to compute the second\nterm. For this we use the K-theory P\ndecomposition above.\nGiven any decomposition OY = i Ki in KT (X ), we have\nX\n\u03c7(OY , OY ) =\n\u03c7(Ki , Kj )\ni,j\n\n=\n\nX\n\n+\n\nX\n\n[(Ext0 (Ki , Ki ) \u2212 Ext1 (Ki , Ki )) \u2212 (Ext0 (Ki , Ki ) \u2212 Ext1 (Ki , Ki ))\u2217 ]\n\ni\n\n[\u03c7(Ki , Kj ) \u2212 \u03c7(Ki , Kj )\u2217 ],\n\ni<j\n\nand therefore\n\u03c3(\u03c7(OY , OY )) =\n\nX\ni\n\ns(Hom(Ki , Ki )\u2212Ext1 (Ki , Ki ))+\n\nX\n\ns(\u03c7(Ki , Kj )).\n\ni<j\n\nWe treat the first sum first, and call these the diagonal terms. It can be\ndivided into edge terms and vertex terms.\nProposition 7. If K and L are supported on curves, then\nExt1 (K, L) \u223c\n= H 0 (Ext1 (K, L)) \u2295 H 1 (Hom(K, L)).\n\n\fThe Orbifold Topological Vertex\n\n33\n\nProof. The local-to-global spectral sequence degenerates at the E2 term.\n\u0003\nFirst we consider edge terms. Let e be a compact edge and let C = C(e),\nD = D(e), and D0 = D0 (e) so that C = D \u2229 D0 . For A \u2208 \u03bb(e) (recall\nRemark 14) we have\n(6) 0 \u2192 OX (\u2212A \u2212 D \u2212 D0 ) \u2192\nOX (\u2212A \u2212 D) \u2295 OX (\u2212A \u2212 D0 ) \u2192 OX (\u2212A) \u2192 OC (\u2212A) \u2192 0.\nIf we apply the functor Hom(*, OC (\u2212A)) to this we obtain a complex which\ncomputes the local Ext sheaves.\n(1) Hom(OC (\u2212A), OC (\u2212A)) = OC\n(2) Ext1 (OC (\u2212A), OC (\u2212A)) = NC/X\n(3) Ext2 (OC (\u2212A), OC (\u2212A)) = \u22272 NC/X\nSince h0 (OC ) = 1 and h1 (OC ) = 0 we deduce that each edge e contributes\n|\u03bb(e)|(1 + h0 (NC/X ))\nto the diagonal terms.\nWe compute the vertex terms as follows. Let v be a vertex and let p =\np(v) and Di = Di (v). For A \u2208 \u03c0(v), we have the following exact sequence.\n(7)\n\n0 \u2192 OX (\u2212A \u2212\n\nX\ni\n\nM\n\nDi ) \u2192\n\nM\n\nOX (\u2212A \u2212 Di \u2212 Dj ) \u2192\n\n1\u2264i<j\u22643\n\nOX (\u2212A \u2212 Di ) \u2192 OX (\u2212A) \u2192 Op (\u2212A) \u2192 0.\n\n1\u2264i\u22643\n\nBy a similar computation to the edge case, we see that every vertex v contributes\n|\u03c0(v)|(1 + h0 (Np/X ))\nto\nP the diagonal terms. Note that |\u03c0(v)| is not the cardinality of \u03c0(v), but\nA\u2208\u03c0(v) \u03be\u03c0 (A).\nFinally, we must compute the off-diagonal terms s(\u03c7(Ki , Kj )). These\ncan be divided into edge terms, where Ki and Kj are supported on the same\nedge, and vertex terms, which come in three types:\n(1) Ki and Kj are supported at the same p = p(v).\n(2) Kj is supported at p = p(v) and Ki is supported along C = C(e)\nwhere e is incident to v.\n(3) Ki is supported on C = C(e) and Kj is supported on C 0 = C(e0 ),\nwhere e 6= e0 have the vertex v in common.\n\n\f34\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nIt is convenient to introduce an arbitrary total order on each partition \u03bb(e)\nand \u03c0(v). For each A < B in \u03bb(e), if we apply Hom(*, OC (\u2212B)) to (6),\nwe obtain the complex which computes the local Ext sheaves:\nExti (OC (\u2212A), OC (\u2212B)) = OC (A \u2212 B) \u2297 \u2227i NC/X .\nIt follows that each edge C \u2208 E contributes\nX\n\u03c7(OC (A \u2212 B) \u2297 \u03bb\u22121 (NC/X ))\nA,B\u2208\u03bb(e)\nA<B\n\nto the off-diagonal terms of \u03c3(\u03c7(OY , OY )).\nFor each A < B in \u03c0(v), we can apply the same argument to (7) to obtain\na contribution of\nX\n\u03be\u03c0(v) (A)\u03be\u03c0(v) (B)\u03c7(Op (A \u2212 B) \u2297 \u03bb\u22121 (Np/X ))\nA,B\u2208\u03c0(v)\nA<B\n\nto the type 1 terms.\nIf v is incident to e, A \u2208 \u03bb(e), and B \u2208 \u03c0(v), then applying Hom(*, Op (\u2212B))\nto (6) produces\n0 \u2192 Op (A \u2212 B) \u2192 Op (A \u2212 B) \u2297 NC/X \u2192 Op (A \u2212 B) \u2297 \u22272 NC/X \u2192 0,\nwhich yields a type 2 vertex contribution at v of\n3\nX\nX\n\nX\n\n\u03be\u03c0(v) (B)\u03c7(Op (A \u2212 B) \u2297 \u03bb\u22121 (NC(ei )/X )).\n\ni=1 A\u2208\u03bb(ei ) B\u2208\u03c0(v)\n\nFinally, suppose C = C(e) = D \u2229 D0 , C 0 = C(f 0 ) = D \u2229 D0 , and\np = p(v) = C \u2229 C 0 (see figure 1). Let A \u2208 \u03bb(e), and B \u2208 \u03bb(f 0 ). If we\napply Hom(*, OC 0 (B)) to (6), we obtain the complex\n0 \u2192 OC 0 (A\u2212B) \u2192 OC 0 (A\u2212B+D)\u2295OC 0 (A\u2212B+D0 ) \u2192 OC 0 (A\u2212B+D+D0 ) \u2192 0.\nUsing the fact that OC 0 \u2192 OC 0 (D0 ) is injective, we compute the cohomology of the above complex to obtain\n(1) Hom(OC (A), OC 0 (B)) = 0,\n(2) Ext1 (OC (A), OC 0 (B)) = Op (A \u2212 B + D0 )\n(3) Ext2 (OC (A), OC 0 (B)) = Op (A \u2212 B + D + D0 )\n\u22121\nNote that Op (D0 ) = Np/C 0 and Op (D+D0 ) = Np/C\nsince by the Calabi-Yau\ncondition, Op (D + D0 + D0 ) = Op . Therefore\n\u2228\ns(\u03c7(OC (A), OC 0 (B))) = h0 (Op (A \u2212 B) \u2297 Np/C 0 ) + h0 (Op (A \u2212 B) \u2297 Np/C\n)\n\n= h0 (Op (A \u2212 B) \u2297 Np/C 0 ) + h0 (Op (B \u2212 A) \u2297 Np/C ).\n\n\fThe Orbifold Topological Vertex\n\n35\n\nNow summing up over all contributions of this type we can write the type 3\noff-diagonal vertex contribution of a vertex v as\nX X\nX\nh0 (Op (v)(A \u2212 B) \u2297 Np(v)/C(ej (v)) ).\ni6=j A\u2208\u03bb(ei (v)) B\u2208\u03bb(ej (v))\n\nPutting it all together yields the following sign formula.\n(8)\nX\ns(Ext10 (I, I)) = \u03c7(OY ) +\n|\u03bb(e)|(1 + h0 (NC(e)/X )) +\ne\u2208Edges\n\n+\n\nX\n\nX\n\nX\n\n|\u03c0(v)|(1 + h0 (Np(v)/X ))\n\nv\u2208Vertices\n\n\u03c7(OC(e) (A \u2212 B) \u2297 \u03bb\u22121 (NC(e)/X ))\n\ne\u2208Edges A,B\u2208\u03bb(e)\nA<B\n\n+\n\nX\n\nX\n\n\u03be\u03c0(v) (A)\u03be\u03c0(v) (B)h0 (Op(v) (A \u2212 B) \u2297 \u03bb\u22121 (Np(v)/X ))\n\nv\u2208Vertices A,B\u2208\u03c0(v)\nA<B\n\n+\n\nX\n\n3\nX\n\nX\n\nX\n\n\u03be\u03c0(v) (B)h0 (Op(v) (A \u2212 B) \u2297 \u03bb\u22121 (NC(ei )/X ))\n\nv\u2208Vertices i=1 A\u2208\u03bb(ei (v)) B\u2208\u03c0(v)\n\n+\n\nX\n\nX\n\nX\n\nX\n\nh0 (Op(v) (A \u2212 B) \u2297 Np(v)/C(ej (v)) )\n\nv\u2208Vertices i6=j A\u2208\u03bb(ei (v)) B\u2208\u03bb(ej (v))\n\nThe above formula can be divided into three pieces. The first is an overall\n\u03c7(OY ), the second is a sum over edges and the third is a sum over vertices.\nThe contribution of an edge e is\nX\n|\u03bb(e)|(1 + h0 (NC(e)/X )) +\n\u03c7(OC(e) (A \u2212 B) \u2297 \u03bb\u22121 (NC(e)/X )).\nA,B\u2208\u03bb(e)\nA<B\n\nRecall that < was an arbitrary total order. We can resymmetrize as follows.\nLet C = C(e), D = D(e), and D0 = D0 (e). We have that\nNC/X = OC (D) + OC (D0 ),\n\u03bb\u22121 NC/X = OC \u2212 OC (D) \u2212 OC (D0 ) + KC .\nBy Serre duality\n\u03c7(OC (A \u2212 B)) = \u2212\u03c7(OC (B \u2212 A) \u2297 KC ),\n\u03c7(OC (A \u2212 B + D)) = \u2212\u03c7(OC (B \u2212 A + D0 )),\nh0 (OC (D0 )) = h1 (OC (D)).\nThis allows the second half of the edge contribution to be rewritten as a sum\nover all pairs (A, B), where the diagonal terms are accounted for by the first\n\n\f36\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nhalf. So the edge contribution is given by\nX\n\u03c7(OC (A \u2212 B) + OC (A \u2212 B + D)).\nA,B\u2208\u03bb(e)\n\nAt each vertex v, we can do a similar cancellation with the terms\nX\n|\u03c0(v)|(1+h0 (Np/X ))+\n\u03be\u03c0(v) (A)\u03be\u03c0(v) (A)h0 (Op (A\u2212B)\u2297\u03bb\u22121 (Np/X ))\nA,B\u2208\u03c0(v)\nA<B\n\nusing the fact that\n3\nX\n\u03bb\u22121 (Np/X ) =\n(Op (\u2212Di ) \u2212 Op (Di )).\ni=1\n\nThese terms become\nX\n\n|\u03c0(v)| +\n\n\u03be\u03c0(v) (A)\u03be\u03c0(v) (B)h0\n\n3\nX\n\n!\nOp (A \u2212 B + Di ) .\n\ni=1\n\nA,B\u2208\u03c0(v)\n\nThe computations of this section are summarized by the following theorem.\nTheorem 21. Let I \u2282 OX be a torus fixed ideal corresponding to a substack\nY \u2282 X and let {\u03bb(e), \u03c0(v)} be the corresponding sets of partitions. Then\ns(Ext10 (I, I)), the parity of the dimension of the Zariski tangent space of I\nin Hilb(X ), is given by\nX\nX\ns(Ext10 (I, I)) = \u03c7(OY ) +\nSE\u03bb(e) (e) +\nSV\u03c0(v) (v)\ne\u2208Edges\n\nv\u2208Vertices\n\nwhere\nSE\u03bb (e) =\n\nX\n\n\u0001\n\u03c7 OC(e) (A \u2212 B) + OC(e) (A \u2212 B + D(e))\n\nA,B\u2208\u03bb\n\nand\nSV\u03c0 (v) = |\u03c0| +\n\nX\n\n\u03be\u03c0 (A)\u03be\u03c0 (B)h0\n\n+\n\n!\nOp(v) (A \u2212 B + Di (e))\n\ni=1\n\nA,B\u2208\u03c0\n3\nX\n\n3\nX\n\nX\n\nX\n\n\u03be\u03c0 (B)h0 Op(v) (A \u2212 B) \u2297 \u03bb\u22121 NC(ei (v))/X\n\ni=1 A\u2208\u03bb(ei (v)) B\u2208\u03c0\n\n+\n\nX\n\nX\n\nX\n\ni6=j A\u2208\u03bb(ei (v)) B\u2208\u03bb(ej (v))\n\nh0 (Op(v) (A \u2212 B + Dj )).\n\n\u0001\n\n\fThe Orbifold Topological Vertex\n\n37\n\nExample 22. If X = X is a scheme, then SE\u03bb (e) simplifies to m(e)|\u03bb| and\nSV\u03c0 (v) simplifies to 0 and we recover the signs of the classical topological\nvertex. The simplifications are straightforward:\nX\nSE\u03bb (e) =\ndeg(A \u2212 B) + 1 + deg(A \u2212 B + D(e)) + 1\nA,B\u2208\u03bb\n\n=\n\nX\n\ndeg(D(e))\n\nA,B\u2208\u03bb\n\n= m(e)|\u03bb|2 = m(e)|\u03bb| mod 2.\nAs for the vertex term, note that \u03bb\u22121 NC(ei (v))/X restricted to p(v) is zero, so\nX\nSV\u03c0 (v) = |\u03c0| +\n3 \u03be\u03c0 (A)\u03be\u03c0 (B)\nA,B\u2208\u03c0\n\n+\n\nX\n\nX\n\nX\n\n1\n\ni6=j A\u2208\u03bb(ei (v)) D\u2208\u03bb(ej (v))\n\n= |\u03c0| + 3|\u03c0|2 + 2\n\nX\n\n|\u03bb(ei (v))| * |\u03bb(ej (v))|\n\ni<j\n\n=0\n\nmod 2.\n\nExample 23. If X = [C3 /G] then there is a single vertex and each torus invariant ideal I corresponds to a single (leg-less) partition \u03c0. Let r1 , r2 , r3 \u2208\nb be the characters of G given by Op (Di ) and let 0 \u2208 G\nb be the trivial charG\nacter. Let |\u03c0|r be the number of boxes in \u03c0 colored by the character r. Then\nthe sign associated to I simplifies as follows.\ns(Ext10 (I, I)) = \u03c7(OY ) + SV\u03c0\n= |\u03c0|0 + |\u03c0| +\n\n3\nX X\n\nh0 (Op (A \u2212 B + Di ))\n\nA,B\u2208\u03c0 i=1\n\n= |\u03c0|0 + |\u03c0| +\n\nX\n\n|\u03c0|r (|\u03c0|r+r1 + |\u03c0|r+r2 + |\u03c0|r+r3 )\n\nb\nr\u2208G\n\nRemark 24. A general orbifold vertex formula can now be obtained. Using\nour identification of the torus fixed points (Lemma 13), our K-Theory decomposition of torus fixed ideas (Proposition 4), our general sign formula\n(Theorem 21), and the Behrend-Fantechi theorem, we get a combinatorial\nformula for DT (X ) of the form given by equation (1). The details of the\nformula, particularly the edge term, depend on the choice of generators for\nF1 K(X ).\n\n\f38\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n6.3. Sign formula in the transverse An\u22121 case. In this section we simplify the sign formula from Theorem 21 in the case where X has transverse\nAn\u22121 orbifold structure.\nWe first simplify the edge term SE\u03bb (e). First suppose that n = n(e) > 1\nso that C = C(e) is a BZn gerbe. Let D = D(e). Then\nSE\u03bb (e) =\n\nn\u22121\nX\nX\nk=0\n\n=\n\nn\u22121\nX\n\n\u03c7 (OC (A \u2212 B)) + \u03c7 (OC (A \u2212 B + D))\n\nA,B\u2208\u03bb\nA\u2208\u03bb[k,n]\n\n\uf8eb\n\n\uf8f6\nX\n\ndeg(A) \u2212 deg(B) + 1\uf8f8\n\n\uf8ed\nk=0\n\nA,B\u2208\u03bb[k,n]\n\n\uf8eb\n\uf8ec\n+\uf8ec\n\uf8ed\n\n=\n\nn\u22121\nX\n\n\uf8f6\nX\nA\u2208\u03bb[k,n]\nB\u2208\u03bb[k\u22121,n]\n\n\uf8f7\n(deg(A) + 1) \u2212 (deg(B) + 1) + deg(D) + 1\uf8f7\n\uf8f8\n\n\u03bb\n\u03bb\n|\u03bb|2k + |\u03bb|k\u22121 Cm,m\n0 [k, n] \u2212 |\u03bb|k Cm,m0 [k \u2212 1, n] + (1 + m)|\u03bb|k |\u03bb|k\u22121\n\nk=0\n\n=\n\nn\u22121\nX\n\n\u03bb\n|\u03bb|2k + Cm,m\n0 [k, n] (|\u03bb|k\u22121 \u2212 |\u03bb|k+1 ) + (1 + m)|\u03bb|k |\u03bb|k\u22121 .\n\nk=0\n\nNow suppose that n = 1 so that C is a football. Extracting the edge terms\nfrom equation (8), we get\nX\n\u0001\n\u0001\n\u03c7 OC (A \u2212 B) \u2297 \u03bb\u22121 NC/X .\nSE\u03bb (e) = |\u03bb| 1 + h0 (NC/X ) +\nA,B\u2208\u03bb\nA<B\n\nSince C is a football, and \u03bb\u22121 NC/X has rank and degree zero, it is trivial in\nK-theory and so the term in the sum is zero. Thus we compute (mod 2):\n\u0001\nSE\u03bb (e) = |\u03bb| 1 + h0 (OC (D) \u2295 OC (D0 ))\n\u0001\n= |\u03bb| 1 + h0 (OC (D)) + h1 (OC (\u2212D0 + K))\n= |\u03bb| (1 + \u03c7(OC (D)))\n= |\u03bb| (1 + m\ne + 1 \u2212 \u03b40 \u2212 \u03b400 )\n= |\u03bb| (m\ne + \u03b40 + \u03b400 ) .\nThe vertex term simplifies as follows. Writing \u03bbi = \u03bb(ei (v)) and using\nthe facts that \u03bb\u22121 Np(v)/X = 0 and \u03bb\u22121 NC(ei )/X = 0 if i = 1 or 2, the vertex\n\n\fThe Orbifold Topological Vertex\n\n39\n\nterms from equation (8) simplify to become\nXX\nSV\u03c0 = |\u03c0| +\n\u03be\u03c0 (B)h0 (Op (A \u2212 B + D1 ) + Op (A \u2212 B + D2 ))\nA\u2208\u03bb3 B\u2208\u03c0\n\n+\n\nXX X\n\nh0 (Op (A \u2212 B + Dj ))\n\ni6=j A\u2208\u03bbi B\u2208\u03bbj\nn\u22121\nX\n\n=\n\n|\u03c0|k (|\u03bb3 |k\u22121 + |\u03bb3 |k+1 )\n\nk=0\n\n+\n\nn\u22121\nX\n\n|\u03bb3 |k (|\u03bb1 |k + |\u03bb2 |k + |\u03bb1 |k\u22121 + |\u03bb2 |k+1 ) .\n\nk=0\n\nThe above computations yield the following theorem.\nTheorem 25. Let X be a orbifold toric CY3 with transverse An\u22121 orbifold\nstructure. Then the sign formula in theorem 21 simplifies as follows\nX\nX\nSV\u03c0(v) (v)\nSE\u03bb(e) (e) +\ns(Ext10 (I, I)) = \u03c7(OY ) +\ne\u2208Edges\n\nv\u2208Vertices\n\nwhere\nSE\u03bb (e) =\n\nn\u22121\nX\n\n\u03bb\nCm,m\n0 [k, n] (|\u03bb|k\u22121 \u2212 |\u03bb|k+1 ) + |\u03bb|k (1 + (1 + m)|\u03bb|k\u22121 )\n\nk=0\n\nif n = n(e) > 1,\nSE\u03bb (e) = |\u03bb| (m\ne + \u03b40 + \u03b4\u221e )\nif n = 1, and\nn\u22121\nX\n\nSV\u03c0 =\n\n|\u03c0|k (|\u03bb3 |k\u22121 + |\u03bb3 |k+1 )\n\nk=0\n\n+\n\nn\u22121\nX\n\n|\u03bb3 |k (|\u03bb1 |k + |\u03bb2 |k + |\u03bb1 |k\u22121 + |\u03bb2 |k+1 ) .\n\nk=0\n\nTheorem 10, our vertex formula for DT (X ) in the transverse An\u22121 case\nis now easily proved. By Lemma 13 and [3, Theorem 3.4], the partition\nfunction is given by a signed sum over edge assignments and compatible\n3D partitions at the vertices. Using Proposition 4, Lemma 15, and Proposition 5, the variable associated to each term in the sum is assigned. Finally,\nthe sign of each term is determined by Theorem 25: the \u03c7(OY ) term is accounted for by adding a sign to the q variable and all the qe,0 variables. The\nSE\u03bb (e) term is accounted for by the S\u03bb (e) term in the formula, the first term\nin SV\u03c0 (v) is accounted for by changing the signs on the vertex variables as\n\n\f40\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nin equation 5, and the second term in SV\u03c0 (v) is accounted for by the sign\n(\u22121)\u03a3\u03c0(v) .\n7. P ROOF OF T HEOREM 12\nThe proof of Theorem 12 involves some intricate combinatorics, and thus\nwe have broken it into several subsections.\n7.1. Review of vertex operators.\nLet \u03bb \u2282 Z2\u22650 be a partition (considered as a Young diagram). The rows or\nparts of \u03bb are the integers \u03bbj = min{i | (i, j) 6\u2208 \u03bb}, for j \u2265 0. Let \u03bb and \u03bc\nbe two partitions. We write \u03bb \u001f \u03bc if\n\u03bb0 \u2265 \u03bc0 \u2265 \u03bb1 \u2265 \u03bc1 \u2265 * * *\nand note that \u03bb \u001f \u03bc if and only if as diagrams \u03bc \u2282 \u03bb and \u03bb and \u03bc are two\nadjacent diagonal slices in some 3D partition (see for example [25, \u00a73]).\nFix n, and let q0 , . . . , qn\u22121 be indeterminates. Let R be the ring of formal\nLaurent series in q0 , . . . , qn\u22121 . Let P be the set of all Young diagrams, and\nlet RP be the free R module generated by elements of P.\nWe define two types of operators on RP in terms of their action upon an\nelement of P.\nDefinition 26. Let x be a monomial in q0 , . . . , qn\u22121 . Then\nX\ndef\n\u0393+ (x)\u03bb =\nx|\u03bb|\u2212|\u03bc| \u03bc\n\u03bc\u227a\u03bb\n\nX\ndef\n\u0393\u2212 (x)\u03bb =\nx|\u03bc|\u2212|\u03bb| \u03bc\n\u03bc\u001f\u03bb\n|\u03bb|\n\nQi \u03bb = qi \u03bb (0 \u2264 i \u2264 n \u2212 1)\nWe will sometimes use the following shorthand notation:\n\u0393+1 (x) = \u0393+ (x)\n\n\u0393\u22121 (x) = \u0393\u2212 (x)\n\nQ = Q0 Q1 * * * Qn\u22121\n\nLemma 27. Let {xi | i \u2208 Z\u22650 } be monomials in q0 , . . . , qn\u22121 . Then\n*\n+\nY\n\u03bc\n\u0393\u2212 (xi ) \u03bb0 = s\u03bc/\u03bb0 (x0 , x1 , x2 , . . .),\ni\u2208Z\u22650\n\n*\n\u03bc\n\n+\nY\ni\u2208Z\u22650\n\n\u0393+ (xi ) \u03bb0\n\n= s\u03bb0 /\u03bc (x0 , x1 , x2 , . . .).\n\n\fThe Orbifold Topological Vertex\n\n41\n\nProof. By elementary properties of Schur functions, this reduces immediately to the case where xi = 0 for i > 1 - which in turn follows from the\nsemistandard Young tableau definition of the Schur function[27, Definition\n7.10.1].\n\u0003\nCorollary 28. Let {xi }, {yi } be monomials in q0 , . . . , qn\u22121 . Then\n*\n\u03bc\n\n+\nY\n\n\u0393\u2212 (xi )\n\ni\u2208Z\u22650\n\nY\n\n\u0393+ (yi ) \u03bb0\n\n=\n\nX\n\ns\u03bc/\u03b7 ({xi })s\u03bb0 /\u03b7 ({yi }).\n\n\u03b7\n\ni\u2208Z\u22650\n\nProof. If \u03b7 is a partition, then let \u03b4\u03b7 be the projection operator onto the space\nspanned by |\u03b7i. Then\n+\n\n*\nY\n\n\u03bc\n\n\u0393\u2212 (xi )\n\ni\u2208Z\u22650\n\n*\n=\n\nX\n\n=\n\nX\n\n\u03b7\n\nY\n\n\u0393+ (yi ) \u03bb0\n\ni\u2208Z\u22650\n\n\uf8eb\n\n\u03bc \uf8ed\n\n\uf8f6\nY\n\n\uf8eb\n\n\u0393\u2212 (xi )\uf8f8 \u03b4\u03b7 \uf8ed\n\ni\u2208Z\u22650\n\n\uf8f6\nY\n\n+\n\n\u0393+ (yi )\uf8f8 \u03bb0\n\ni\u2208Z\u22650\n\ns\u03bc/\u03b7 ({xi })s\u03bb0 /\u03b7 ({yi }).\n\n\u03b7\n\n\u0003\nIt follows from Lemma 27 that these \u0393\u00b1 are the same vertex operators as\nused in [23, 24, 25]. We therefore have\nLemma 29. Let \u03c3, \u03c4 = \u00b11 and let a, b be monomials in q0 , . . . , qn\u22121 . Then\n\u0393\u03c3 (a)\u0393\u03c4 (b) = (1 \u2212 ab)\n\n\u03c4 \u2212\u03c3\n2\n\n\u0393\u03c4 (b)\u0393\u03c3 (a).\n\nProof. The identity is derived by expressing \u0393+ and \u0393\u2212 as the exponential\nof another operator, and then applying the Campbell-Baker-Hausdorff theorem. This is done for the case \u03c3 = \u2212\u03c4 in [4, Lemma 31] and the other\ncases are essentially the same.\n\u0003\nLemma 30. Let z be a monomial in q0 , . . . , qn\u22121 . Then\n\u0393\u03c3 (z)Qi = Qi \u0393\u03c3 (zqi\u03c3 ).\n\n\f42\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nProof. It is easy to check that, for any partitions \u03bb, \u03bc,\n(\n|\u03bc|\nz |\u03bc/\u03bb| qi , \u03bb \u2286 \u03bc\nh\u03bb |\u0393+ (z)Qi | \u03bci = \u03bb Qi \u0393+ (zqi+1 ) \u03bc =\n0,\n\u03bb 6\u2286 \u03bc,\n(\n|\u03bc|\nz |\u03bb/\u03bc| qi\n\u03bc\u2286\u03bb\nh\u03bb |\u0393\u2212 (z)Qi | \u03bci = \u03bb Qi \u0393\u2212 (zqi\u22121 ) \u03bc =\n0,\n\u03bc\u2286\n6 \u03bb.\n\u0003\nWe must also establish some notation for the edge sequence of the partition \u03bd. Define the set S(\u03bd) by\nS(\u03bd) = {\u03bdj \u2212 j \u2212 1 | j \u2265 0}.\nWe define the edge sequence of \u03bd: for t \u2208 Z,\n(\n+1 if t \u2208 S(\u03bd),\n\u03bd(t) =\n\u22121 if t 6\u2208 S(\u03bd).\n\n(9)\n\nFor example\nS(\u2205) = {\u22121, \u22122, \u22123, . . . },\n\n(\n+1 t < 0,\n\u2205(t) =\n\u22121 t \u2265 0.\n\nNote that the complement of S(\u03bd) is given by\nS(\u03bd)c = \u2212S(\u03bd 0 ) \u2212 1 = {\u2212\u03bdj0 + j | j \u2265 0}.\nWe use the following shorthand:\nDefinition 31. If \u03b1 and \u03b2 are partitions, and \u03c3 = \u00b11, we write \u03b1 \u227a\u001f \u03b2 to\n\u03c3\nmean\n(\n\u03b1 \u227a \u03b2 if \u03c3 = +1,\n\u03b1 \u001f \u03b2 if \u03c3 = \u22121.\nn\n7.2. Writing V\u03bb\u03bc\u03bd\n(q0 , . . . , qn\u22121 ) as a vertex operator product.\n\n\fThe Orbifold Topological Vertex\n\n43\n\nRecall the following notation:\nX \u0016i + k \u0017\nA\u03bb (k, n) =\n,\nn\n(i,j)\u2208\u03bb\n\nq\n\n\u2212A\u03bb\n\n=\n\nn\u22121\nY\n\n\u2212A\u03bb (k,n)\n\nqk\n\n,\n\nk=0\n\nqt = q\n\n\u2212N\n\nt\nY\n\nqk\n\nfor large N, and\n\nk=\u2212nN +1\n\nq = q0 * * * qn\u22121 .\nRecall also that an overline denotes the exchange of variables qk \u2194 q\u2212k\nwith subscripts in Zn .\nWe will apply the following conventions for products of possibly noncommuting operators. For operators \u03a6t depending on t \u2208 S \u2282 Z we let\n\u2212\u2192\nY\n\u03a6t\nt\u2208S\n\ndenote the product where t increases from left to right in the order the operators are written. We denote the retrograde expression as\n\u2190\u2212\nY\n\u03a6t .\nt\u2208S\n\nProposition 8. The orbifold vertex is given by the following vertex operator\nexpression:\n+\n* \u2212\u2192\n\u0010 0 \u0011\nY\n\u2212\u03bd (t)\n\u2212|\u03bb|\nn\n\u03bc\n\u0393\u03bd 0 (t) qt\n\u03bb0 .\nV\u03bb\u03bc\u03bd\n= q \u2212A\u03bb q \u2212A\u03bc0 q0\nt\nn\nProof. We first make a slight refinement to the definition of V\u03bb\u03bc\u03bd\n, as follows: Fix an integer N , and set\nX |\u03c0|\n|\u03c0|\nn,N\nV\u03bb\u03bc\u03bd\n=\nq0 0 * * * qn\u22121n\u22121 .\n\u03c0\n\nwhere the sum is now taken over all 3D partitions \u03c0 asymptotic to (\u03bb, \u03bc, \u03bd)\nsuch that any boxes (i, j, k) not contained in the \u03bb-leg or the \u03bc-leg satisfy\ni < nN, j < nN . It is clear that\nn,N\nn\nlim V\u03bb\u03bc\u03bd\n= V\u03bb\u03bc\u03bd\n\nN \u2192\u221e\n\nn,N\nn\nin the sense that the low order terms of V\u03bb\u03bc\u03bd\nand V\u03bb\u03bc\u03bd\nagree.\n\n\f44\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nFollowing the strategy of [23, 4], we will calculate this generating function as a matrix coefficient in a product of vertex operators. The simplest\ncase, \u03bb = \u03bc = \u03bd = \u2205, is done in full detail in [4]. The case n = 1 but with\n\u03bb, \u03bc, \u03bd arbitrary is handled in [23].\nn,N\nConsider, as a first approximation to V\u03bb\u03bc\u03bd\n, the expression\n(10)\n\n+\n\n\u2212\u2192\nY\n\n*\n\u03bc\n\nQt \u0393\u03bd 0 (t) (1) \u03bb0\n\n\u2212nN +1\u2264t\u2264nN \u22121\n\nObserve that, for each t,\nX\n\nQt \u0393\u03bd 0 (t) (1) |\u03b3i =\n\n|\u03b7|\n\nqt |\u03b7i .\n\n\u03b7 \u227a\u001f \u03b3\n\u03bd 0 (t)\n\nSo, in other words, Qt \u0393\u03bd 0 (t) (1) sends a partition |\u03b3i to a weighted formal\nsum of all partitions |\u03b7i such that \u03b3 and \u03b7 are the (t + 1)st and tth slices,\n|\u03b7|\nrespectively, in a 3D partition. In this sum, each \u03b7 is weighted by qt . Since\nQt \u0393\u03bd 0 (t) (1) is a linear operator, this property extends to linear combinations\nof such |\u03b3i, so\nX\n|\u03b1|\n|\u03b2|\nQt+1 \u0393\u03bd 0 (t+1) (1)Qt \u0393\u03bd 0 (t) (1) |\u03b3i =\nQt+1 Qt |\u03b1i ,\n\u03b1 \u227a\u001f \u03b2 \u227a\u001f \u03b3\n\u03bd 0 (t+1) \u03bd 0 (t)\n\nand so forth. Since the indices on the Qi operators are taken modulo n, the\nh\u03bc| coordinate of\n\u2212\u2192\nY\nQt \u0393\u03bd 0 (t) (1) |\u03bb0 i\n\u2212nN +1\u2264t\u2264nN \u22121\n\ncounts sequences of Zn -weighted Young diagrams, interlacing according to\nn,N\n\u03bd 0 , 2 beginning with \u03bb0 and ending with \u03bc, as does V\u03bb\u03bc\u03bd\n. However, there are\nn,N\ntwo important differences between V\u03bb\u03bc\u03bd and (10).\nn\nFirst, the contribution of the box (i, j, k) in the 3D partition \u03c0 to V\u03bb\u03bc\u03bd\nis\n\u03be\u03c0 (i,j,k)\nqi\u2212j\n, where recall that\n\u03be\u03c0 (i, j, k) = 1 \u2212 # of legs of \u03c0 containing (i, j, k).\n\u03be 0 (i,j,k)\n\n\u03c0\nBy contrast, (10) assigns weight qi\u2212j\nwhere\n(\n1 (i, j, k) \u2208 \u03c0 \\ {\u03bd leg},\n\u03be\u03c00 (i, j, k) =\n0 otherwise.\n\n2\n\nThe easiest way to see that we must use the edge sequence associated to \u03bd 0 and not \u03bd\nis to look at Figure 7 and note that the i and j axes not in the standard order so that we are\nlooking at \u03bd \"from the bottom\" and hence getting \u03bd 0 .\n\n\fThe Orbifold Topological Vertex\n\n45\n\nn,N\nF IGURE 2. Differences in weighting between (10) and V\u03bb\u03bc\u03bd\n\n\u03bd\n\n1\n\n0\n-1\n\n-1\n\n\u03bc\n\n0\n0\n\n-2\n0\n\n1\n\n\u03bd\n\n0\n\n\u03bc\n\n0\n0\n\n-1\n\n\u03bb\n\n1\n\n1\n1\n\n\u03bb\n\u03be\u03c00 (i, j, k)\n\n\u03be\u03c0 (i, j, k)\n\nSee Figure (2) for a comparison of \u03be and \u03be 0 .\nTo account for this difference, we divide (10) by the weight of the \u03bb and\n\u03bc legs, (q0 * * * qn\u22121 )N (|\u03bb|+|\u03bc|) . This may be achieved with the Q operators:\n*\n+\n\u2212\u2192\nY\n\u03bc Q\u2212N\nQt \u0393\u03bd 0 (t) (1)Q\u2212N \u03bb0\n\u2212nN +1\u2264t\u2264nN \u22121\n\nUsing the commutation relations of Lemma 30, we move the operators Qt\nto the left if t \u2264 0, and to the right if t > 0, giving\n!\n+\n*\n\u2212\u2192\nY\n0\n\u2212\u03bd (t)\n\u0393\u03bd 0 (t) (qt\n) Q\u22121\n\u03bb0 .\n(11)\n\u03bc\n0\n\u2212nN +1\u2264t\u2264nN \u22121\nn,N\nThe second difference between (11) and V\u03bb\u03bc\u03bd\nis that each partition in (10)\nhas a contribution from the boxes which lie inside the \u03bb or \u03bc-leg, outside\nthe region i, j \u2264 n, and inside the region |i \u2212 j| \u2264 n; these are the regions\nin Figure 3 at the left and right sides of the first picture, whose projections\nto the xy plane are triangular, and whose cross-sections, when viewed from\nthe left, are \u03bb and \u03bc0 .\nThe weights contributed by these regions are q A\u03bb and q A\u03bc0 , as explained\nin Lemma 32 below. In the non-orbifold case, [23] refers to these constants\nn,N\nas framing factors. The terms from the corresponding partitions in V\u03bb\u03bc\u03bd\ndo\nnot have this contribution.\nAt this point we have nearly proven the proposition. We have\n*\n+\n\u2212\u2192\n\u0010 0 \u0011\nY\n\u2212|\u03bb|\n\u2212\u03bd\n(t)\nn,N\nV\u03bb\u03bc\u03bd = q \u2212A\u03bb q \u2212A\u03bc0 q0\n\u03bc\n\u0393\u03bd 0 (t) qt\n\u03bb0 + error\n\u2212nN +1\u2264t\u2264nN \u22121\n\n\f46\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nF IGURE 3. A 3D partition which fits within an N \u00d7 N \u00d7 \u221e\nbox, compared with the corresponding sequence of 2N + 1\nYoung diagrams.\nk\n\u03bd\n\nj\ni\n\u03bc\n\n\u03bb\n\nwhere the expressions in both sides assign the same weight to a 3D partition.\nn,N\nAll that remains is to understand the \"error\" term: V\u03bb\u03bc\u03bd\nand (11), written as\nformal sums over 3D partitions, are not supported on the same index set. In\nparticular, (11) includes contributions from 3D partitions which have boxes\noutside of [0, N ] \u00d7 [0, N ] \u00d7 [0, \u221e] but inside the region |x \u2212 y| < N .\nHowever, the smallest such 3D partition grows without bound as N grows\nlarge, so the error term disappears in the large-N limit.\n\u0003\nLemma 32. Let L, M \u2286 (Z\u22650 )3 be the regions\nL = {(i, j, k) | (j, k) \u2208 \u03bb, i > nN \u2212 1, i \u2212 j \u2264 nN \u2212 1} ,\nM = {(i, j, k) | (i, k) \u2208 \u03bc0 , j > nN \u2212 1, i \u2212 j \u2265 \u2212nN + 1} .\nThen\nY\n\nqi\u2212j = q A\u03bb ,\n\n(i,j,k)\u2208L\n\nY\n\nqi\u2212j = q A\u03bc0 .\n\n(i,j,k)\u2208M\n\nProof. Let Lt denote the diagonal slice\nLt = {(i, j, k) \u2208 L | i \u2212 j = t}.\nObserve that when t > nN \u2212 1, Lt is the empty set. Moreover, LnN \u22121 is\nthe largest of the Lt ; it consists of boxes (nN \u2212 1 + j, j, k) where (j, k) \u2208 \u03bb\nand j \u2265 1 (see Figure 4). Each of these boxes contributes weight q\u22121 to\n\n\fThe Orbifold Topological Vertex\n\nQ\n\nL qi\u2212j ,\n\n47\n\nsince the subscripts of q are taken mod n. Similarly, for c > 0,\n\nLnN \u2212c = {(nN \u2212 c + j, j, k) | (j, k) \u2208 \u03bb, j \u2265 c}\n\nwhere each box in LnN \u2212c has color \u2212c. It follows that\n\nY\n\nqi\u2212j =\n\n\u221e\nY\n\nY\n\nq\u2212c\n\nc=1 (i,j,k)\u2208LnN \u2212c\n\n(i,j,k)\u2208L\n\n=\n\n\u221e Y\nn\nY\nY\n\nq\u2212ec\n\nm=0 e\nc=1 (j,k)\u2208\u03bb\nj\u2265nm+e\nc\n\n=\n\nj\u2212e\nc\nn\nn c\nY\nY bY\n\nq\u2212ec\n\ne\nc=1 (j,k)\u2208\u03bb m=0\n\n=\n\nn\nY\nY\n\nb j\u2212ec c+1\nq\u2212ec n\n\ne\nc=1 (j,k)\u2208\u03bb\n\n=\n\nn\u22121\nY\n\nY\n\nb j+c c\nqc n .\n\nc=0 (j,k)\u2208\u03bb\n\nThe second line uses the fact that the subscripts of the qi are taken modulo\nn. In the last line we changed variables by e\nc 7\u2192 n \u2212 c. The end result is\nA\u03bb\nprecisely equal to q as defined in Section 3.4.\nSimilarly, let\n\nMt = {(i, j, k) \u2208 M | i \u2212 j = t}.\n\nWhen t < \u2212nN + 1, Mt is empty; otherwise, for c > 0,\n\nM\u2212nN +c = {(i, nN \u2212 c + i, k) | (i, k) \u2208 \u03bc0 , i \u2265 c},\n\n\f48\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nF IGURE 4. Computation of the framing factor associated to \u03bb\n\n...\n\nt = nN \u2212 1\n\nt = nN \u2212 2\n\nt = nN \u2212 3\n\nwhere each box in M\u2212nN +c has color c. It follows that\n\u221e\nY\nY\nY\nqi\u2212j =\nqc\nc=1 (i,j,k)\u2208M\u2212nN +c\n\n(i,j,k)\u2208M\n\n=\n\n\u221e Y\nn\nY\nY\nm=0 e\nc=1\n\n=\n\nqec\n\n(i,k)\u2208\u03bc0\ni\u2265nm+e\nc\n\ni\u2212e\nc\n\u221e\nn c\nY\nY bY\n\nqec\n\ne\nc=1 (i,k)\u2208\u03bc0 m=0\n\n=\n\nn\nY\nY\ne\nc=1 (i,k)\u2208\u03bc0\n\n=\n\nn\u22121\nY\n\nY\n\nb i\u2212ec c+1\nqec n\nb (i+c) c\nq\u2212c n\n\nc=0 (i,k)\u2208\u03bc0\n\n= q A\u03bc 0 .\n\u0003\n7.3. n-quotient, n-core, and the retrograde.\n7.3.1. Edge sequences and charge. Let \u03bd : Z \u2192 {\u00b11} be a function satisfying \u03bd(t) = \u22121 for t \u001d 0, and \u03bd(t) = 1 for t \u001c 0. We say that \u03bd(t)\nis an edge sequence, and to such a sequence we associate its slope diagram\nwhich consists of the graph of a continuous, piecewise linear function having slopes \u00b11, such that the slope of the function at t is given by \u03bd(t) and\nsuch the changes in slope occur at half-integers.\nThe slope diagram associated to a sequence \u03bd determines a Young diagram and hence a partition. The Young diagram is given by rotating the\nslope diagram 135 degrees counterclockwise and translating so that the positive x and y axes eventually coincide with the rotated slope diagram. Note\n\n\fThe Orbifold Topological Vertex\n\n49\n\nF IGURE 5. A three-core \u03bd, viewed as a partition and as a\ntriple of integers (3, \u22122, \u22121) summing to zero. Note that\n\u03bd0 , \u03bd1 , \u03bd2 are empty partitions.\n-3\n\n-2\n\n-1\n\n0\n\n1\n\n2\n\n3\n\n\u03bd2\n\u03bd1\n\u03bd0\n\nthat this association is consistent with the edge sequence \u03bd(t) associated\nwith a partition \u03bd as defined in equation (9). However, there are many edge\nsequences having the same associated partition. If \u03bd(t) is an edge sequence\nhaving associated partition \u03bd, then there exists a unique integer c(\u03bd) \u2208 Z\nsuch that\n\u03bd = Rc(\u03bd) \u03bd\nwhere R is the right-shift operator, which acts on an edge sequence \u03b7 by\nR\u03b7(t) = \u03b7(t \u2212 1).\nWe call c(\u03bd) the charge of \u03bd. The edge sequence \u03bd(t) associated to a partition by equation (9) always has charge zero; we adopt the convention an\nedge sequence without an underline always has charge zero. The uniqueness of c(\u03bd) implies that the map\n(12)\n\n{edge sequences} \u2192 {partitions} \u00d7 Z\n\u03bd(t) 7\u2192 (\u03bd, c(\u03bd(t))\n\nis a bijection, so we will use these notations interchangeably.\n\n\f50\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n7.3.2. Ribbons, the n-quotient, and n-core.\nThere is an operation known as adding a ribbon to an edge sequence \u03bd.\nFix t1 < t2 with \u03bd(t1 ) = 1, \u03bd(t2 ) = \u22121 (there are infinitely many such pairs\n(t1 , t2 )). Then construct a new edge sequence \u03c1 such that\n\uf8f1\n\uf8f4\n\uf8f2\u22121 t = t1\n\u03c1(t) = +1 t = t2\n\uf8f4\n\uf8f3\u03bd(t) otherwise.\nIf \u03bd and \u03c1 are the Young diagrams associated to \u03bd and \u03c1, then the settheoretic difference \u03c1 \u2212 \u03bd is a connected strip of boxes which contains no\n2 \u00d7 2 region, commonly called a ribbon, border strip or rim hook in the\ncombinatorics literature; we shall use the term to refer to either the strip\nof boxes or to the endpoints (t1 , t2 ), according to whether we are speaking\nof Young diagrams or edge sequences. We say that the ribbon is of length\nt2 \u2212 t1 and to lie at position t1 . It is easy to check that adding a ribbon does\nnot affect the charge of an edge sequence.\nObserve that any charge-zero edge sequence can be constructed from \u2205\nby adding ribbons of length 1. This corresponds to adding boxes to a Young\ndiagram in such a way that the result remains a Young diagram.\nIf \u03bd is an edge sequence, we define its associated n-tuple (\u03bd 0 , . . . , \u03bd n\u22121 )\nof edge sequences by\n\u03bd i (t) = \u03bd(nt + i).\nLetting (\u03bdi , ci ) = \u03bd i under the bijection (12), we then define the n-quotient\nand the n-core of \u03bd to be (\u03bd0 , . . . , \u03bdn\u22121 ) and (c0 , . . . , ci ) respectively.\nThe process of passing from an edge sequence to its n-core and n-quotient\nis reversible: there is a unique way to construct an edge sequence \u03bd with a\nprescribed n-core and n-quotient. As such, we identify \u03bd with its n-quotient\ntogether with its n-core:\n\u03bd \u2194 ((\u03bd0 , . . . , \u03bdn\u22121 ), (c0 , . . . , cn\u22121 )).\nIf the edge sequence \u03bd is charge zero (i.e. it came from a partition), then\nP\ni ci = 0. Customarily, one only considers n-cores arising from partitions,\nP and so unless otherwise stated, we will assume that all n-cores satisfy\ni ci = 0. One special case is worthy of note. The partition whose nquotient is c = (c0 , . . . , cn\u22121 ) and whose n-quotient is (\u2205, . . . , \u2205) is often\nidentified with c, and is customarily also called an n-core.\nNote that adding an n-hook to \u03bd at position t \u2261 t0 (mod n) corresponds\nto adding a 1-hook (i.e. a single box) to \u03bdt0 , without altering the n-core, or\nany of the other \u03bdi . It follows that the n-core of \u03bd is the (unique) partition\nobtained by iteratively removing n-hooks from \u03bd until it is impossible to do\nso.\n\n\fThe Orbifold Topological Vertex\n\n51\n\nLet Rk be the operator which acts on an edge sequence \u03bd by right-shifting\nthe kth component of the associated n-tuple of \u03bd:\nRk (\u03bd 0 , \u03bd 1 , . . . , \u03bd n\u22121 ) = (\u03bd 0 , \u03bd 1 , . . . , R\u03bd k , . . . , \u03bd n\u22121 ).\nNote that Rk increases the charge of \u03bd by one. It follows that the operator\n\u22121\nRk Rk+1\nleaves the charge of \u03bd unaffected, so it restricts to an operator on\n\u22121\npartitions and hence defines an operator on RP. The effect of Rk Rk+1\nis to\nleave the n-quotient of \u03bd unaffected, while incrementing ck and decrement\u22121\ning ck+1 . Moreover, the operators Rk Rk+1\nand their inverses, acting on \u2205,\nare sufficient to generate any n-core. Indeed, if \u03bd is an n-core (c0 , . . . , cn\u22121 ),\nthen the associated edge sequence is given by\n\n\u03bd=\n\nn\u22121\nY\n\nRici \u2205.\n\ni=0\n\nRemark 33. We can prove statements about partitions inductively, in the\nfollowing manner. To prove the statement P (\u03bd):\n(1) Prove P (\u2205).\n\u22121\n(2) Prove that P (\u03bd) \u21d4 P (Rk Rk+1\n\u03bd) for each k.\n(3) Prove that P (\u03bd) \u21d2 P (\u03c1), where \u03c1 is any partition obtained from \u03bd\nby adding a ribbon.\nProving (1) and (2) establishes P for all n-core partitions, and then (3)\nextends the proof to all partitions.\n\n7.3.3. Comparison of the operator with its retrograde.\nProposition 9. The operator expression appearing in Proposition 8 can be\nwritten in terms of its retrograde and a scalar operator, namely\n\u2212\u2192\nY\nt\n\n\u0393\u03bd 0 (t)\n\n\u0010\n\n\u2212\u03bd 0 (t)\nqt\n\n\u0011\n\n=\n\nn\nV\u2205\u2205\u2205\n\n* O\u03bd *\n\nMon\u22121\n\u03bd0\n\n*\n\n\u2190\u2212\nY\nt\n\n\u0010 0 \u0011\n\u2212\u03bd (t)\n\u0393\u03bd 0 (t) qt\n\n\f52\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nF IGURE 6. Applying R0 R1\u22121 to a 4-core generates a new\n4-core, increasing the weight by q1\u22121 q.\n-2\n\n-1\n\n0\n\n1\n\n2\n\n\u03bd3\n\u03bd2\n\u03bd1\n\u03bd0\n\nq3\nq2\n\nq0\n\nwhere\nO\u03bd =\n\nn\u22121\nY\n\nn\nV\u2205\u2205\u2205\n(qk , qk+1 , . . . , qn+k\u22121 )\u22122|\u03bd|k +|\u03bd|k+1 +|\u03bd|k\u22121 ,\n\nk=0\nn\nV\u2205\u2205\u2205\n= M (1, q)n\n\nY\n\nM (qa * * * qb , q)M (qa\u22121 * * * qb\u22121 , q),\n\n0<a\u2264b<n\n\nM (v, q) =\n\n\u221e\nY\n\n1\n,\nm )m\n(1\n\u2212\nvq\nm=1\nY n\u22121\nY\n\nMon\u03bd 0 = (\u22121)|\u03bd|\n\n(j,i)\u2208\u03bd 0\n\nhs\u03bd 0 (j, i)\n\nhs (j,i)\n\nqs \u03bd 0\n\n, and\n\ns=0\n\n= the number of boxes of color s in the (j, i)-hook of \u03bd 0 .\n\nProof. Replacing the product with its retrograde has the effect of reversing\n\u2212\u03bd 0 (t)\n\u2212\u03bd 0 (t0 )\nthe order of every pair of operators \u0393\u03bd 0 (t) (qt\n), \u0393\u03bd 0 (t0 ) (qt0\n) for t0 > t.\nBy Lemma 29, this introduces a scalar factor:\n\u2212\u2192\n\u2190\u2212\n\u0010 0 \u0011 Y\n\u0010 0 \u0011\nY\nY\n\u2212\u03bd (t)\n\u2212\u03bd 0 (t) \u2212\u03bd 0 (t0 ) 1 (\u03bd 0 (t0 )\u2212\u03bd 0 (t))\n\u2212\u03bd (t)\n\u0393\u03bd 0 (t) qt\n=\n(1\u2212qt\nqt0\n)2\n*\n\u0393\u03bd 0 (t) qt\nt\n\nt<t0\n\nt\n\n\fThe Orbifold Topological Vertex\n\n53\n\nso that to prove the Lemma, we must prove\nY\n\u2212\u03bd 0 (t) \u2212\u03bd 0 (t0 ) 1 (\u03bd 0 (t0 )\u2212\u03bd 0 (t))\n(1 \u2212 qt\nqt0\n)2\n= Mon\u22121\n\u03bd 0 * V\u2205\u2205\u2205 * O\u03bd 0 .\nt<t0\n\nWe begin by simplifying the right hand side. Let\nHook\u03bd 0 = {(t, t0 ) \u2208 Z2 | t < t0 , \u03bd 0 (t) = \u22121, \u03bd 0 (t0 ) = 1}.\nObserve that Hook\u03bd 0 is a finite set, and indeed is in bijection with the set\nof hooks of \u03bd 0 , as the ordered pairs (t, t0 ) represent the ends of the legs of\na hook. In turn, each hook of \u03bd 0 corresponds uniquely to some (j, i) \u2208 \u03bd 0\ngiven by the corner of the hook. The product over the hooks then becomes:\n\u0011 1 (\u03bd 0 (t0 )\u2212\u03bd 0 (t))\n\u0010\nY\n\u2212\u03bd 0 (t) \u2212\u03bd 0 (t0 ) 2\n1 \u2212 qt\nqt0\n(t,t0 )\u2208Hookv0\n\nY\n\n=\n\n\u22121\n1 \u2212 q+1\nt qt0\n\n\u0001\n\n(t,t0 )\u2208Hookv0\n\nY\n\n=\n\n\u22121\n\u2212q+1\nt qt0\n\n(t,t0 )\u2208Hookv0\n\n=(\u22121)|\u03bd|\n\nY\n\n\u0001\n\n\u0001\n\n(t,t0 )\u2208Hookv0\n\nY\n\nY\n\n\u22121\nqt+1\n* * * qt\u22121\n0\n\n(t,t0 )\u2208Hookv0\n\n=Mon\u22121\n\u03bd0\n\n1 \u2212 q\u22121\nt qt0\n\nY\n\n+1\n(1 \u2212 q\u22121\nt qt0 )\n\n(t,t0 )\u2208Hookv0\n+1\n(1 \u2212 q\u22121\nt qt0 )\n\n(t,t0 )\u2208Hookv0\n\nwhere the last equality follows from the fact that (t + 1, . . . , t0 ) are exactly\nthe set of colors of the boxes in the (j, i)-hook of \u03bd 0 corresponding to (t, t0 ).\nUsing the above, we can then write\n\u0011 1 (\u03bd 0 (t0 )\u2212\u03bd 0 (t))\nY\u0010\n\u2212\u03bd 0 (t) \u2212\u03bd 0 (t0 ) 2\n= C(\u03bd 0 ) * Mon\u22121\n1 \u2212 qt\nqt0\n\u03bd0\nt<t0\n\nwhere\n(13)\n\nC(\u03bd 0 ) =\n\nY\n\n+1\n1 \u2212 q\u22121\nt qt0\n\n\u0001 21 (\u03bd 0 (t0 )\u2212\u03bd 0 (t))\n\n.\n\nt<t0\nn\nWe need to prove that C(\u03bd 0 ) = V\u2205\u2205\u2205\n* O\u03bd and we will do so using the\ninduction strategy described in Remark 33.\nWe first study the base case for this strategy, \u03bd 0 = \u2205.\n\nC(\u2205) =\n\nYY\nt<0 t0 \u22650\n\n+1\n1 \u2212 q\u22121\nt qt0\n\n\u0001\u22121\n\n.\n\n\f54\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nF IGURE 7. The partition \u03c10 is obtained from \u03bd 0 by adding a\nlength n border strip at time T = i \u2212 j.\nT\n\n\u03bd0\ni\nj\n\n0\n\n\u03c1\n\nLetting t = nt0 + c and t0 = nt00 + d where c, d\nthat\n\uf8f1 0\nt \u2212t\n\uf8f4\n\uf8f2q 0 0 * qc+1 * * * qd\n0\n+1\nq\u22121\nq t0 \u2212t0\nt qt0 =\n\uf8f4\n\uf8f3q t00 \u2212t0 * q \u22121 * * * q \u22121\nc\nd+1\n\n\u2208 {0, . . . , n \u2212 1} we see\nd > c,\nd = c,\nd < c.\n\nThen writing m = t00 \u2212 t0 we get\nC(\u2205) =\n=\n\n\u221e\nY\n\n(1 \u2212 q m )\u2212mn\n\nm=1\nn\nV\u2205\u2205\u2205\n\nY\n\n(1 \u2212 qa * * * qb * q m )\u2212m 1 \u2212 qa\u22121 * * * qb\u22121 * q m\n\n0<a\u2264b<n\n\n* O\u2205\n\nwhich proves the base case of the induction.\nObserve that adding an n-hook to \u03bd 0 leaves the quantity\n\u22122|\u03bd 0 |k + |\u03bd 0 |k\u22121 + |\u03bd 0 |k+1\ninvariant, for each k: an n-border strip contains one box of each of the n\ncolors. As such, O\u03bd 0 depends only upon the n-core of \u03bd 0 . We will show that\nC(\u03bd 0 ) also depends only upon the n-core of \u03bd 0 , which lets us reduce to the\ncase where \u03bd 0 itself is an n-core partition.\nTo do this, let \u03c10 be a partition obtained by adding an n-border strip to \u03bd 0\nat position T (see Figure 7). In particular, this means that\n\u03c10 (T ) = \u22121,\n\n\u03bd 0 (T ) = +1,\n\n\u03c10 (T + n) = +1,\n\n\u03bd 0 (T + n) = \u22121.\n\nWe will show that C(\u03c10 )/C(\u03bd 0 ) = 1. First, it is helpful to rewrite C(\u03bd 0 ) as\nfollows:\n\n\u0001\u2212m\n\n\fThe Orbifold Topological Vertex\n\nC(\u03bd 0 ) =\n\nYY\n\n\u22121\n1 \u2212 q+1\nt+k qt\n\n\u0001 12 (\u03bd(t+k)\u2212\u03bd(t))\n\n55\n\n.\n\nk\u22650 t\u2208Z\n\nLet\nK(t, k) =\n\n1\n[(\u03c1(t + k) \u2212 \u03bd(t + k)) \u2212 (\u03c1(t) \u2212 \u03bd(t))]\n2\n\nso that\n\u0001\nC 0 (\u03c1) Y Y\n+1 \u22121 K(t,k)\n=\n1\n\u2212\nq\nq\n.\nt\nt+k\nC 0 (\u03bd) k\u22650 t\u2208Z\nObserve that K(t, k) = 0 unless \u03c10 (t) 6= \u03bd 0 (t) or \u03c10 (t + k) 6= \u03bd 0 (t + k).\nMoreover, the edge sequences of \u03c10 and \u03bd 0 differ only at T and at T +n, since\n\u03c10 is the result of adding an n-border strip at position T to \u03bd 0 . Therefore,\nY\nY\nC(\u03c10 )\n+1\n\u22121 K(T,k)\n\u22121\nK(T +n,k)\n(1\n\u2212\nq\n=\nq\n)\n(1 \u2212 q+1\nT +k T\nT +n+k qT +n )\nC(\u03bd 0 )\nk\u22650\nk\u22650\nY\nY\n\u22121 K(T \u2212k,k)\n\u22121\nK(T +n\u2212k,k)\n*\n(1 \u2212 q+1\nq\n)\n(1 \u2212 q+1\nT\nT +n qT +n\u2212k )\nT \u2212k\nk\u22650\n\nY\n\n=\n\nk\u22650\n\n(1 \u2212\n\n\u22121 K(T,k)+K(T +n,k)\nq+1\nT +k qT )\n\nk\u22650\n\n*\n\nY\n\n\u22121 K(T \u2212k,k)+K(T +n\u2212k,k)\n(1 \u2212 q+1\n.\nT qT \u2212k )\n\nk\u22650\n\nWe next examine the quantity K(T, k) + K(T + n, k). Consider first the\ncase k 6= n. In this case we have \u03c1(T + k) = \u03bd(T + k), \u03c1(T + k \u2212 n) =\n\u03bd(T + k \u2212 n), so\n2(K(T, k) + K(T + n, k)) = \u03c10 (T ) \u2212 \u03bd 0 (T ) + \u03c10 (T + n) \u2212 \u03bd 0 (T + n)\n=0\nbecause \u03c10 (T ) = \u2212\u03c10 (T + n), \u03bd 0 (T ) = \u2212\u03bd 0 (T + n). As such, all terms other\nthan possibly those where k = n cancel from the product, so\nC(\u03c10 )\n\u22121 K(T,n)+K(T +n,n)\n\u22121\nK(T \u2212n,n)+K(T,n)\n= (1 \u2212 q+1\n(1 \u2212 q+1\nT +n qT )\nT qT \u2212n )\nC(\u03bd 0 )\n= (1 \u2212 q)2K(T,n)+K(T +n,n)+K(T \u2212n,n) .\n\n\f56\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nAll of the terms in the exponent can now be computed explicitly, since they\ninvolve only known quantities:\n1\nK(T + n, n) = (\u2212\u03c10 (T + n) + \u03bd 0 (T + n)) = \u22121,\n2\n1\nK(T, n) = ((\u03c10 (T + n) \u2212 \u03bd 0 (T + n)) \u2212 (\u03c10 (T ) \u2212 \u03bd 0 (T ))) = 2,\n2\n1\nK(T \u2212 n, n) = (\u2212\u03c10 (T + n) + \u03bd 0 (T + n)) = 1.\n2\n0\nThus we have C(\u03c1 )/C(\u03bd 0 ) = 1. This means that adding an n-border strip to\n\u03bd 0 does not affect C(\u03bd 0 ), and as such C(\u03c10 ) depends only upon the n-core of\n\u03bd 0.\nThus to finish the proof of proposition 9 using the induction argument\noutlined in Remark 33, it remains only to prove the following lemma.\n\u22121 0\nLemma 34. Let \u03bd 0 be an n-core and let \u03c10 = Rk Rk+1\n\u03bd , then\n\nC(\u03c10 )\nO\u03c10\n=\n.\n0\nC(\u03bd )\nO\u03bd 0\nWe prove the lemma by direct computation. To streamline the notation\nwe will drop the primes from \u03bd 0 and \u03c10 .\nWe define Tk to be the operator which cyclically permutes the variables\nby k:\n(Tk F )(q0 , . . . , qn\u22121 ) = F (qk , . . . , qk+n\u22121 ).\nNote that it follows immediately from equation (13) that\nC(Rk \u03bd) = Tk C(\u03bd).\n\n(14)\n\nWe begin with a computation:\nn\nY\nV\u2205\u2205\u2205\nM (qa * * * qb , q)M (qa\u22121 * * * qb\u22121 , q)\n=\n\u22121\n\u22121\nn\nT1 V\u2205\u2205\u2205\nM (qa+1 * * * qb+1 , q)M (qa+1\n* * * qb+1\n, q)\n0<a\u2264b<n\n\u221e\nY\n\n\u22121\n\u22121 m m\nq )\n(1 \u2212 qa+1 * * * qb+1 q m )m (1 \u2212 qa+1\n* * * qb+1\n=\n(1 \u2212 qa * * * qb q m )m (1 \u2212 qa\u22121 * * * qb\u22121 q m )m\nm=1 0<a\u2264b<n\n\u221e Qn\u22121\n\u22121\nm m\n\u22121 m m\nY\na=1 (1 \u2212 qa+1 * * * qn q ) (1 \u2212 qa+1 * * * qn q )\n=\nQ\nn\u22121\n\u22121\n\u22121 m m\nm m\nb=1 (1 \u2212 q1 * * * qb q ) (1 \u2212 q1 * * * qb q )\nm=1\n\n=\n\nY\n\n\u221e n\u22121\nY\nY (1 \u2212 qc+1 * * * qn q m )m (1 \u2212 q1 * * * qc q m\u22121 )m\nm=1 c=1\n\n(1 \u2212 q1 * * * qc q m )m (1 \u2212 qc+1 * * * qn q m\u22121 )m\n\n\u221e n\u22121\nY\nY (1 \u2212 q1 * * * qc q m\u22121 )\n=\n.\nm\u22121 )\n(1\n\u2212\nq\n*\n*\n*\nq\nq\nc+1\nn\nm=1 c=1\n\n\fThe Orbifold Topological Vertex\n\n57\n\nIn the above, the equality from the second to the third line is because all the\nterms cancel except for those in the numerator with (a, b) = (a, n \u2212 1) and\nthose in the denominator with (a, b) = (1, b). The equality from the fourth\nto the last line uses the reindexing m 7\u2192 m \u2212 1 on the first terms in the\nnumerator and denominator.\nWe now wish to compare C(\u03bd) to C(R0 \u03bd). Since \u03bd = (c0 , . . . , cn\u22121 ) is an\nn-core, we have that\n(\n+1 c < c0 ,\n\u03bd(cn) =\n\u22121 c \u2265 c0 .\nThus R0 \u03bd = (c0 +1, c1 , . . . , cn\u22121 ) differs from \u03bd (as an edge sequence) only\nat t = c0 n where we have\n\u03bd(c0 n) = \u22121.\n\n(R0 \u03bd)(c0 n) = 1\nThus\n\nY\n\u0001 21 (\u22121\u2212\u03bd(t))\u2212 12 (1\u2212\u03bd(t))\nC(\u03bd)\n=\n1 \u2212 q\u22121\nq\nc\nn\n0\nt\nC(R0 \u03bd) t<c n\n0\nY\n\u0001 12 (\u03bd(t)+1)\u2212 12 (\u03bd(t)\u22121)\n1 \u2212 q\u22121\n*\nc0 n qt\nc0 n<t\n\n=\n\nY\n\n1 \u2212 q\u22121\nt q c0 n\n\nt<c0 n\n\n\u0001\u22121\n\n*\n\nY\n\n1 \u2212 q\u22121\nc0 n qt\n\n\u0001+1\n\n.\n\nc0 n<t\n\nIn the above expression, we can rewrite the product over t > c0 n as a\nproduct over m = 1, 2, . . . and a = 1, . . . , n by setting t = (c0 +m\u22121)n+a\nso that\nm\u22121\nq\u22121\n.\nc0 n qt = qc0 n+1 * * * q(c0 +m\u22121)n+a = q1 * * * qa * q\nSimilarly, we can rewrite the product over t < c0 n as a product over m =\n1, 2, . . . and a = n \u2212 1, n \u2212 2, . . . , 0 by t = n(c0 \u2212 m) + a so that\nm\u22121\nq\u22121\n.\nt qc0 n = qn(c0 \u2212m)+a+1 * * * qc0 n = qa+1 * * * qn * q\n\nThus\nQn\n\u221e\nm\u22121\nY\n)\nC(\u03bd)\na=1 (1 \u2212 q1 * * * qa q\n=\nQn\u22121\nm\u22121\nC(R0 \u03bd) m=1 a=0 (1 \u2212 qa+1 * * * qn q\n)\n\u221e n\u22121\nY\nY (1 \u2212 q1 * * * qa q m\u22121 )\n=\n(1 \u2212 qa+1 * * * qn q m\u22121 )\nm=1 a=1\n\n=\n\nn\nV\u2205\u2205\u2205\nn\nT1 V\u2205\u2205\u2205\n\n\f58\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nand so we have shown\nC(R0 \u03bd) =\n\n(15)\n\nn\nT1 V\u2205\u2205\u2205\n* C(\u03bd)\nn\nV\u2205\u2205\u2205\n\nfor any edge sequence \u03bd with empty n-quotient.\nThe operator Rk can be obtained from R0 by conjugating with Rk :\nRk = Rk R0 R\u2212k\nand thus\n\u22121\nRk Rk+1\n= Rk R0 RR0\u22121 R\u2212k\u22121 .\nWe now compute using equations (14) and (15):\n\u22121\nC(Rk Rk+1\n\u03bd) = C(Rk R0 R R0\u22121 R\u2212k\u22121 \u03bd)\n\n= Tk C(R0 (R R0\u22121 R\u22121\u2212k \u03bd))\n\u0013\n\u0012\nn\nT1 V\u2205\u2205\u2205\n\u22121 \u2212k\u22121\n* C(R R0 R\n\u03bd)\n= Tk\nn\nV\u2205\u2205\u2205\nn\nTk+1 V\u2205\u2205\u2205\n=\n* Tk+1 C(R0\u22121 R\u2212k\u22121 \u03bd)\nn\nTk V\u2205\u2205\u2205\n\u0013\n\u0012 n\nn\nTk+1 V\u2205\u2205\u2205\nV\u2205\u2205\u2205\n\u2212k\u22121\n=\n* Tk+1\n* C(R\n\u03bd)\nn\nn\nTk V\u2205\u2205\u2205\nT1 V\u2205\u2205\u2205\nn\nn\nTk+1 V\u2205\u2205\u2205\nTk+1 V\u2205\u2205\u2205\n*\n* Tk+1 T\u2212k\u22121 C(\u03bd)\n=\nn\nn\nTk V\u2205\u2205\u2205\nTk+2 V\u2205\u2205\u2205\nand so\n\n\u22121\nn\nC(Rk Rk+1\n\u03bd)\n)2\n(Tk+1 V\u2205\u2205\u2205\n=\n.\nn\nn\nC(\u03bd)\nTk V\u2205\u2205\u2205\n* Tk+2 V\u2205\u2205\u2205\nOn the other hand, we have\nn\u22121\nORk R\u22121 \u03bd\nY\nk+1\nn\n=\n(Tl V\u2205\u2205\u2205\n)\u000fl\nO\u03bd\nl=0\n\nwhere\n\u0001 \u0010\n\u22121\n\u22121\n\u000fl = \u22122 Rk Rk+1\n\u03bd l \u2212 |\u03bd|l + Rk Rk+1\n\u03bd\n\n\u0011 \u0010\n\u22121\n\u2212\n|\u03bd|\nl\u22121 + Rk Rk+1 \u03bd\nl\u22121\n\n\u0011\n\u2212\n|\u03bd|\nl+1 .\nl+1\n\n\u22121\nadds one box of each color except for k + 1 to an\nThe operation Rk Rk+1\nn-core \u03bd (see figure 6). Therefore\n\n\u000fl = \u22122(1 \u2212 \u03b4k+1,l ) + (1 \u2212 \u03b4k+1,l\u22121 ) + (1 \u2212 \u03b4k+1,l+1 )\n= +2\u03b4k+1,l \u2212 \u03b4k+1,l\u22121 \u2212 \u03b4k+1,l+1\nand so\n\nORk R\u22121\n\nk+1 \u03bd\n\nO\u03bd\n\n\u22121\nn\nC(Rk Rk+1\n\u03bd)\n(Tk+1 V\u2205\u2205\u2205\n)2\n=\n=\n.\nn\nn\nTk V\u2205\u2205\u2205 * Tk+2 V\u2205\u2205\u2205\nC(\u03bd)\n\n\fThe Orbifold Topological Vertex\n\n59\n\nThis completes the proof of Lemma 34 and hence of Proposition 9.\n\n\u0003\n\nProposition 10.\n* \u2190\u2212\n+\n\u0010 0 \u0011\nY\n\u2212\u03bd (t)\n\u0393\u03bd 0 (t) qt\n\u03bc\n\u03bb0 = H\u03bd 0 * Mon\u03bd 0 * Schur\u03bb\u03bc\u03bd\nt\n\nwhere\nH\u03bd 0 =\n\nY\n(j,i)\u2208\u03bd 0\n\n1\u2212\n\nMon\u03bd 0 = (\u22121)|\u03bd|\n\n1\nQn\u22121\n\nhs\u03bd 0 (j,i)\ns=0 qs\n\nY n\u22121\nY\n(j,i)\u2208\u03bd 0\n\nSchur\u03bb\u03bc\u03bd =\n\nX\n\n,\n\nhs (j,i)\n\nqs \u03bd 0\n\n, and\n\ns=0\n\n\u0001\n\u0001\ns\u03bc/\u03b7 qt |\u03bd 0 (t)=\u22121 s\u03bb0 /\u03b7 q\u22121\nt |\u03bd 0 (t)=+1 .\n\n\u03b7\n\nProof. We commute the operators so that all the \u0393+ s are on the right and all\nthe \u0393\u2212 s are on the left. Using the commutation relations we obtain\n\u2190\u2212\n\u0010 0 \u0011\nY\nY\nY\nY\n1\n\u2212\u03bd (t)\n0\n\u0393\u03bd (t) qt\n=\n\u0393\u2212 (qt )\n\u0393+ (q\u22121\nt ).\n\u22121 +1\n1 \u2212 qt0 qt \u03bd 0 (t)=\u22121\nt\n\u03bd 0 (t)=+1\nt0 >t\n\u03bd 0 (t)=\u22121\n\u03bd 0 (t0 )=+1\n\nObserve that \u03bd 0 (t) = \u22121, \u03bd 0 (t0 ) = 1 for t < t0 if and only if there is a\nhook of \u03bd 0 with endpoints at t, t0 . Moreover, we can rewrite the monomials\nappearing in the scalar factor above as follows:\n\u22121\n+1\n\u22121\n\u22121\nq\u22121\nt0 qt = qt+1 * qt+2 * * * qt0\n\n=\n\nn\u22121\nY\n\n\u2212hs\u03bd 0 (j,i)\n\nqs\n\ns=0\n\nwhere the hook corresponding to (t0 , t) has corner (j, i) \u2208 \u03bd 0 and hs\u03bd 0 (j, i) is\nthe number of boxes of color s in the hook. Clearing the denominators of\ninverses, we find that the scalar factor is exactly equal to\nH\u03bd 0 * Mon\u03bd 0 .\nThe equality\n*\n\u03bc\n\n+\nY\n\u03bd 0 (t)=\u22121\n\n\u0393\u2212 (qt )\n\nY\n\n0\n\u0393+ (q\u22121\nt ) \u03bb\n\n= Schur\u03bb\u03bc\u03bd\n\n\u03bd 0 (t)=+1\n\nfollows immediately from Corollary 28 and the lemma is proved.\n\n\u0003\n\n\f60\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nWe can now put it all together and complete the proof of Theorem 12.\nCombining Propositions 8 and 9 we get\n+\n* \u2190\u2212\n\u0010 0 \u0011\nY\n\u2212\u03bd (t)\n\u2212|\u03bb|\nn\nn\nV\u03bb\u03bc\u03bd\n= V\u2205\u2205\u2205\n* q \u2212A\u03bb * q \u2212A\u03bc0 O\u03bd * q0 * \u03bc\n\u0393\u03bd 0 (t) qt\n\u03bb0 .\nt\n\nApplying Proposition 10 and using homogeneity of Schur functions, we get\nn\nn\n(16) V\u03bb\u03bc\u03bd\n= V\u2205\u2205\u2205\n* q \u2212A\u03bb * q \u2212A\u03bc0 * O\u03bd * H\u03bd *\nX \u2212|\u03b7|\n\u0001\n\u0001\nq0 s\u03bc/\u03b7 qt |\u03bd 0 (t)=\u22121 s\u03bb0 /\u03b7 q0\u22121 * q\u22121\nt |\u03bd 0 (t)=+1 .\n\u03b7\n\nFinally, using\nS(\u03bd 0 ) = \u2212S(\u03bd 0 )c \u2212 1,\n\nq0\u22121 * q\u22121\nt = q\u22121\u2212t ,\n\nwe observe the following equalities of sets:\n{qt : \u03bd 0 (t) = \u22121} = {qt : t \u2208 S(\u03bd 0 )c }\n= q\u2022\u2212\u03bd 0\n{q0\u22121 * q\u22121\n: \u03bd 0 (t) = +1} = {q\u22121\u2212t : t \u2208 S(\u03bd 0 )}\nt\n= {q\u22121\u2212t : t \u2208 \u2212S(\u03bd 0 )c \u2212 1}\n= {qT : T \u2208 S(\u03bd 0 )c }\n= q\u2022\u2212\u03bd 0\nwhich, when substituted into equation (16), completes the proof of Theorem 12.\n\u0003\n\nA PPENDIX A. G ROTHENDIECK -R IEMANN -ROCH FOR ORBIFOLDS AND\nTHE T OEN OPERATOR .\nWe briefly review Grothendieck-Riemann-Rock for Deligne-Mumford\nstacks and we work out some examples needed in the paper. The basic\nreference is [29]; see also [30, Appendix A].\nLet X be a smooth Deligne-Mumford stack. Let IX be the inertia stack\nof X . The objects of IX are pairs (x, g) where x is an object of X and g is\nan automorphism of x. There is a local immersion\n\u03c0 : IX \u2192 X\nwhich forgets g.\n\n\fThe Orbifold Topological Vertex\n\n61\n\nLet E be a vector bundle on IX . There is a canonical automorphism3 of\nE and consequently there is a decomposition\nE = \u2295\u03c9 E \u03c9\nwhere the sum is over roots of unity \u03c9 \u2208 C and the canonical automorphism\nacts by multiplication by \u03c9 on E \u03c9 .\nWe define an endomorphism \u03c1 of K(IX ) \u2297 C by\nX\n\u03c1(E) =\n\u03c9[E \u03c9 ].\n\u03c9\n\nLet N be the normal bundle to the local immersion \u03c0 : IX \u2192 X and let\nX\n\u03bb\u22121 (N \u2228 ) =\n(\u22121)i \u039bi N \u2228 \u2208 K(IX ).\ni\n\nWe define the Toen operator\n\u03c4X : K(X ) \u2192 A(IX )\nby\nch(\u03c1(\u03c0 \u2217 E))\n* td(TIX )\nch(\u03c1(\u03bb\u22121 N \u2228 ))\nwhere td(TIX ) is the Todd class of IX .\nToen's Grothendieck-Riemman-Roch theorem for stacks asserts [29, 4.10, 4.11]\nthat \u03c4 is functorial with respect to proper pushforwards.\n\u03c4X (E) =\n\nTheorem 35 (Toen). Let f : X \u2192 Y be a proper morphism of smooth\nDeligne-Mumford stacks, then for all E \u2208 K(X ),\nf\u2217 (\u03c4X (E)) = \u03c4Y (f\u2217 E).\nIn particular, for f : X \u2192 pt, we get\nZ\n\u03c7(E) =\n\n\u03c4X (E).\n\nIX\nn\u22121 l\nExample 36. Let X = BZn , then IX = \u222al=0\nX where X l \u223c\n= BZn . If\nLk \u2192 X is the line bundle determined by the 1-dimensional\nrepresenta\u0001\n2\u03c0i\nk\ntion of Zn having character \u03c9 where \u03c9 = exp n , then the canonical\nautomorphism acts by multiplication with \u03c9 kl on Lk restricted to X l . Thus\n\n\u03c4X (Lk )|X l = \u03c9 kl .\nExample 37. Let C \u2192 P1 be a BZn gerbe and let Lk,m \u2192 C be a line\nbundle with\n1\ndeg(Lk,m ) = m \u2208 Z\nn\n3\n\ninduced by the canonical 2-morphism \u03c0 \u21d2 \u03c0 given by (x, g) 7\u2192 g.\n\n\f62\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nand such that the restriction of Lk,m to a point BZn \u2208 C is the bundle Lk\nn\u22121 l\nfrom example 36. Then IC = \u222al=0\nC and\n\u03c4 (Lk,m )|C l = \u03c9 kl (1 + m[pt]).\nExample 38. Let P1a,b be the football, i.e. the stack given by root constructions [10] of orders a and b at the points [0] \u2208 P1 and [\u221e] \u2208 P1 respectively.\nLet [pt] \u2208 P1a,b be a non-stacky point. The following lemma gives a formula\nfor the Euler characteristic of a line bundle on the football.\nLemma 39.\n\u0016 \u0017 \u0016 \u0017\n\u0010\n\u0011\ns\nt\n\u03c7 OP1a,b (d[pt] + s[0] + t[\u221e]) = d + 1 +\n+\n.\na\nb\nThe inertia stack breaks into components as follows:\nIP1a,b = P1a,b\n\na\u22121\n[\nk=0\n\nPk\n\nb\u22121\n[\n\nQl\n\nl=0\n\n\u0001\n\u0001\n2\u03c0i\nand\n\u03c9\n=\nexp\n,\nwhere Pk \u223c\n= BZa and Ql \u223c\n= BZb . Let \u03c9a = exp 2\u03c0i\nb\na\nb\nk\nthen NPk /P1a,b is the line bundle on BZa with character \u03c9a and NQl /P1a,b is\nthe line bundle on BZb with character \u03c9bl . Therefore\n\u0013\n\u0012\n\u0010\n\u0011\n1\n= (1 + d[pt] + s[0] + t[\u221e])* 1 + ([0] + [\u221e]) ,\n\u03c4 OP1a,b (d[pt] + s[0] + t[\u221e])\n2\nP1\na,b\n\n!\nch \u03c1(O(s[0])\n\n\u0010\n\n\u0011\n\u03c4 OP1a,b (d[pt] + s[0] + t[\u221e])\n\n=\nPk\n\n)\n\n\u03c9aks\n\u0010 \u0010\n\u0011\u0011 =\n,\n1 \u2212 \u03c9a\u2212k\nch \u03c1 1 \u2212 NP\u2228k /IP1\nPk\n\na,b\n\nand similarly\n\u0010\n\n\u0011\n\u03c4 OP1a,b (d[pt] + s[0] + t[\u221e])\n\n=\nQl\n\n\u03c9blt\n.\n1 \u2212 \u03c9b\u2212l\n\nNow integrating \u03c4 (O(d[pt] + s[0] + t[\u221e])) over IP1a,b , we get\na\u22121\nb\u22121\n\u0011\ns t 1 1 1 X \u03c9aks\n1 X \u03c9blt\n\u03c7 OP1a,b (d[pt] + s[0] + t[\u221e]) = d+ + + + +\n+\n.\na b 2a 2b a k=1 1 \u2212 \u03c9a\u2212k b l=1 1 \u2212 \u03c9b\u2212l\n\n\u0010\n\n\fThe Orbifold Topological Vertex\n\n63\n\nThe lemma then follows from the identity4\n\u0016 \u0017\na\u22121\ns a\u22121\n1 X \u03c9aks\ns\n\u2212 +\n=\n\u2212k\na k=1 1 \u2212 \u03c9a\na\na\n2a\nand its counterpart for the sum over l.\nA PPENDIX B. O RBIFOLD TORIC CY3 S AND WEB DIAGRAMS\nA orbifold toric CY3 is a smooth toric Deligne-Mumford stack X with\ngenerically trivial stabilizers and having trivial canonical bundle.\nLemma 40. A orbifold toric CY3 X is uniquely determined by its coarse\nmoduli space X.\nP ROOF : This follows from the classification result of Fantechi, Mann,\nand Nironi [13]. They show that if X is a smooth Deligne-Mumford toric\nstack, then the structure morphism to the coarse space factors canonically\nvia toric morphisms\nX \u2192 X rig \u2192 X can \u2192 X\nwhere X \u2192 X rig is an Abelian gerbe over X rig , X rig \u2192 X can is a fibered\nproduct of roots of toric divisors, and X can \u2192 X is the minimal orbifold\nhaving X as its coarse moduli space. They prove that X can is unique and\ncanonically associated to X. Since we assume X is an orbifold, we have\nX = X rig . Since we assume KX is trivial, the stacky locus in X has codimension at least two and hence X = X can .\n\u0003\nThe combinatorial data determining a toric variety is well understood and\nis most commonly expressed as the data of a fan (by the above lemma, we\ndo not require the stacky fans of Borisov, Chen and Smith [5]). In the case\nof an orbifold toric CY3 , it is convenient to use equivalent (essentially dual)\ncombinatorial data, namely that of a web diagram.\nDefinition 41. A web diagram consists of the data\n\u2022 A graph \u0393 which is trivalent and embedded in the plane. The graph\nis finite and necessarily has some non-compact edges.\n\u2022 A marking {xv,e }, which consists of a non-zero vector xv,e \u2208 Z2 for\neach pair (v, e) where e is an edge incident to a vertex v.\nThe data satisfies the following.\n4\n\nYou can have some fun and try to prove this elementary identity for yourself. If you\nget stuck, a complete proof can be found at:\nwww.math.ubc.ca/\u223cjbryan/papers/identity.pdf.\n\n\f64\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n\u2022 For each compact edge e with bounding vertices v and v 0 ,\nxv,e + xv0 e = 0.\n\u2022 For each vertex v with incident edges (e1 , e2 , e3 ),\nxv,e1 + xv,e2 + xv,e3 = 0.\nTwo markings {xv,e } and {x0v,e } are equivalent if there exists g \u2208 SL2 (Z)\nsuch that gxe,v = x0v,e for all (v, e).\nLemma 42. Every orbifold toric CY3 X determines a web diagram \u0393X ,\nunique up to equivalence.\nP ROOF : By lemma 40, X is determined by its coarse space X, a toric variety with Gorenstein finite quotient singularities and trivial canonical bundle. Such an X determines a simplicial fan \u03a3 \u2282 N \u2297Q with N \u223c\n= Z3 . Since\nthe canonical divisor is trivial, there exists a linear function l : N \u2192 Z such\nthat l(vi ) = 1 for all the generators vi of the one dimensional cones of \u03a3.\nb having integral\nThus \u03a3 intersects the plane {l = 1} in a triangulation \u0393\nb in the plane {l = 1}. We\nvertices. Let \u0393X = \u0393 be the graph dual to \u0393\ndefine a marking of \u0393 as follows. Under duality, a vertex in \u0393 with incident\nb and a bounding edge eb. Fixing an\nedge e corresponds to a triangle vb in \u0393\norientation on the plane, the edge eb inherits an orientation from the triangle\nvb. The oriented edge defines an integral vector xv,e in {l = 0}. The set\n{xv,e } satisfies the conditions of a marking by construction.\n\u0003\nRemark 43. When we picture the web diagram \u0393 in relation to the trib we will use an element of SL2 (Z) to rotate the vectors xv,e\nangulation \u0393,\ncounterclockwise by ninety degrees so that the edges of \u0393 are perpendicular\nb In Figure 8, we show the web diagrams and the dual fan\nto the edges of \u0393.\ntriangulation for (1) local P1 \u00d7 P1 , namely the total space of the canonical\nbundle over P1 \u00d7 P1 and, (2) local P1 \u00d7 BZ2 , namely the orbifold quotient\nof the resolved conifold O(\u22121) \u2295 O(\u22121) \u2192 P1 by Z2 acting fiberwise.\nNote that the coarse space of local P1 \u00d7 BZ2 has a transverse A1 singularity\nand its unique crepant resolution is given by local P1 \u00d7 P1 .\nRemark 44. The term web-diagram comes from physics (e.g. [1]). It is\nessentially the same as the data determining a tropical plane curve [22]. The\ntropical curve associated to \u0393X may be interpreted as the tropicalization of\nthe curve mirror to X [14, \u00a7 4].\nRemark 45. The vertices of \u0393X correspond to torus fixed points in X , the\nedges correspond to torus invariant curves, and the regions in the plane\ndelineated by the graph correspond to torus invariant divisors.\n\n\fThe Orbifold Topological Vertex\n\n65\n\ns(1,0,2)\n@\ns(1,0,2)\n@\n@\n@\n@\n@\n@\n@\n(\u22121,1)@\n(1,1)\n@\n@\n@\nI (1,0)\n\u0012\n(\u22121,0)\n@\n\u001b\n@ @\n@\n@\n@\n@\n(0,\u22121)\n(0,\u22121)\n@ (\u22121,1)\n?\n?\n(1,1)@\n@\n@\n@\nI\n\u0012@\n(1,\u22121,1)s\ns(1,0,1)\n@s(1,1,1)\n@s(1,1,1) (1,\u22121,1)s\n@ (2,0) -\u001b (\u22122,0)\n@\n@\n@\nR\n(1,\u22121)@\n@ (\u22121,\u22121)\n@\n(0,1)\n@\n@ (0,1) 6\n6\n@\n\u001b\n@\n@\n@\n(1,0)\n(\u22121,0)\n@\n@\n@\n@\n(\u22121,\u22121)\n(1,\u22121)\nR\n@\n@\n@\n@\n@\n@\n@\n@s(1,0,0)\n@\n@\n@\n@\n@\n@s(1,0,0)\n@\n@\n\nF IGURE 8. The web diagrams and fan triangulations for local P1 \u00d7 P1 and local P1 \u00d7 BZ2\nB.1. Reading off the local model at a point from the web diagram. The\nlocal model for X at a torus fixed point is given as follows.\nLemma 46. Let v be the vertex of \u0393X , let (e1 , e2 , e3 ) be the three edges\nincident to v, and let xv,ei = (ai , bi ) be the markings. Then X has an\nopen neighborhood about the torus fixed point corresponding to v given by\n[C3 /G] where G is the subgroup of the torus T = (C\u2217 )3 given by\na\n\nti j = taj i ,\n\nt1 t2 t3 = 1,\n\nb\n\nti j = tbji .\n\nThe action of G on C3 is given by\n(z1 , z2 , z3 ) 7\u2192 (t1 z1 , t2 z2 , t3 z3 )\nwhere the zi coordinate axis is the T invariant curve corresponding to the\nedge ei .\nP ROOF : The local model is easily read off from the fan (e.g. [6, Eqn. 3]).\nThe lemma is obtained by simply translating the fan data into the web diagram.\n\u0003\nFor\nxi = (ai , bi )\n\n\f66\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nwe define\nx i \u2227 x j = ai b j \u2212 aj b i .\nWe order the edges (e1 , e2 , e3 ) cyclically in the counterclockwise direction.\nThen it follows from the lemma that the order of G is given by:\n|G| = x1 \u2227 x2 = x2 \u2227 x3 = x3 \u2227 x1 .\nMoreover, the order of Hi , the stabilizer group of a generic point on the T\ninvariant curve corresponding to ei is given by\n|Hi | = div(xi )\nwhere div(xi ) = gcd(ai , bi ) is the divisibility of xi .\nB.2. Reading off the local data at a curve from the web diagram. Let e\nbe a compact edge in the web diagram and let C \u2282 X be the corresponding torus invariant curve. By the Fantechi-Mann-Nironi classification, C is\ngiven by an Abelian gerbe over a football. There is a neighborhood of C\nin X isomorphic to the total space of the normal bundle of C in X . The\nnormal bundle is the sum of two line bundles, so to specify the neighborhood of C we must determine the two normal bundles. In the case where C\nis a scheme, a line bundle is determined by its degree. In general, the line\nbundles are determined by a slight generalization of the numerical degree,\nand we explain below how to extract this data from the web-diagram.\nDefinition 47. Let P1k0 ,k\u221e be the stack obtained from P1 by root constructions [10] of order k0 and k\u221e at the points [0], [\u221e] \u2208 P1 (the so-called\n\"football\"). Let\n\u03c0 : C \u2192 P1k0 ,k\u221e\nbe a Zh gerbe over the football P1k0 ,k\u221e and let L \u2192 C be a line bundle. We\ndefine the type of L to be the triple of integers (a0 , a\u221e , m) such that\n0 \u2264 a0 < k0 ,\n\n0 \u2264 a\u221e < k\u221e ,\n\nand\nL\u2297h \u223c\n= \u03c0 \u2217 OP1k\n\n0 ,k\u221e\n\n(a0 [0] + a\u221e [\u221e] + m[p])\n\nwhere [p] \u2208 P1k0 ,k\u221e is a generic point. L is determined up to isomorphism\nby its type the degree of L to be\n\u0012\n\u0013\n1 a0 a\u221e\ndeg(L) =\n+\n+m .\nh k0 k\u221e\nThe web diagram of X near the edge e is given by the following diagram:\n\n\fThe Orbifold Topological Vertex\n\n@\n@\n\nD0\n\nx02\n@\nI\n@\n\n67\n\nx\u221e\n3\n\nD\nx\u221e\n\u001b1\n\nx01-\n\nx03\n\nD0\n\n\u0012\n\nD\u221e\n\n@\nR\nx\u221e\n2 @\n@\n@\n\nSince the divisibility of x01 is h, we may use the action of SL2 (Z) to set\n= (h, 0) and thus x\u221e\n1 = (\u2212h, 0). Since the order of the local groups at 0\nand \u221e is k0 h and k\u221e h respectively, we know that x03 and x\u221e\n2 have the form\nx01\n\nx03 = (e\na0 , \u2212k0 )\n\nx\u221e\na\u221e , \u2212k\u221e )\n2 = (\u2212e\n\nfor some integers e\na0 and e\na\u221e . We define a0 , a\u221e , and m such that\na0 = e\na0\na\u221e = e\na\u221e\nand\nm=\n\nmod k0\nmod k\u221e\n\n0 \u2264 a0 < k0 ,\n0 \u2264 a\u221e < k\u221e ,\n\ne\na0 \u2212 a0 e\na\u221e \u2212 a\u221e\n+\n.\nk0\nk\u221e\n\nLemma 48. The type of OC (D) is given by (a0 , a\u221e , m) and the numerical\ndegree of OC (D) is given by\n1\nx\u221e \u2227 x03 .\nhk0 k\u221e 2\nP ROOF : The generators of the one dimensional cones in the fan of X corresponding to the divisors D0 , D, D0 , and D\u221e can be taken to be (1, 0, 0),\n(1, h, 0), (1, \u2212e\na0 , k0 ) and (1, \u2212e\na\u221e , \u2212k\u221e ) respectively (c.f. proof of Lemma 42).\nLinear functions on the fan give rise to relations among the divisors [6,\nTheorem 4.10]. The linear functions corresponding to the second and third\nentries of the above vectors give rise to relations which we restrict to C:\nOC (hD \u2212 e\na0 D0 \u2212 e\na\u221e D\u221e ) \u223c\n= OC ,\nOC (k0 D0 \u2212 k\u221e D\u221e ) \u223c\n= OC .\n\nBoth relations pullback from P1k0 ,k\u221e where the second can be written\nOP1k ,k (k0 [0]) \u223c\n= OP1k ,k (k\u221e [\u221e]) \u223c\n= OP1k ,k ([p]).\n0\n\n\u221e\n\n0\n\n\u221e\n\n0\n\n\u221e\n\nThen the first assertion of the lemma, which is equivalent to\nOC (hD) = \u03c0 \u2217 OP1k\n\n0 ,k\u221e\n\n(a0 [0] + a\u221e [\u221e] + m[p]),\n\nfollows from the definitions and the above relations.\n\n\f68\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\nComputing the degree from the above relation, we get\n\u0012\n\u0013\n1 a0 a\u221e\ndeg(OC (D)) =\n+\n+m\nh k0 k\u221e\n\u0012\n\u0013\na\u221e\n1 e\na0 e\n+\n=\nh k0 k\u221e\n1\n=\n(k\u221ee\na0 + k 0 e\na\u221e )\nhk0 k\u221e\n1\n(\u2212e\na\u221e , \u2212k\u221e ) \u2227 (e\na0 , \u2212k0 )\n=\nhk0 k\u221e\n1\n0\n=\nx\u221e\n2 \u2227 x3 .\nhk0 k\u221e\n\u0003\nThe Calabi-Yau condition implies\nOC (D + D0 ) \u223c\n= \u03c0 \u2217 OP1k\n\n0 ,k\u221e\n\n(\u2212[0] \u2212 [\u221e]).\n\nIn terms of the corresponding types (a0 , a\u221e , m) and (a00 , a0\u221e , m0 ), the condition is given by\na0 + a00 = \u22121\na\u221e +\nand\n\na0\u221e\n\n= \u22121\n\nmod k0 ,\nmod k\u221e ,\n\na0 a\u221e\na0\na0\n1\n1\n+\n+ m + 0 + \u221e + m0 = \u2212 \u2212\n.\nk0 k\u221e\nk0 k\u221e\nk0 k\u221e\nR EFERENCES\n\n[1] Mina Aganagic, Albrecht Klemm, Marcos Mari\u00f1o, and Cumrun Vafa. The topological vertex. Comm. Math. Phys., 254(2):425\u2013478, 2005. arXiv:hep-th/0305132.\n[2] Kai Behrend. Donaldson-Thomas invariants via microlocal geometry. To appear in\nAnnals of Math. arXiv:math/0507523.\n[3] Kai Behrend and Barbara Fantechi. Symmetric obstruction theories and Hilbert\nschemes of points on threefolds. Algebra Number Theory, 2(3):313\u2013345, 2008.\narXiv:math/0512556.\n[4] Jim Bryan Ben Young. Generating functions for colored 3D Young diagrams and the\nDonaldson-Thomas invariants of orbifolds. Duke Math. J., 152(1):115\u2013153, 2010.\narXiv:math/0802.3948.\n[5] Lev A. Borisov, Linda Chen, and Gregory G. Smith. The orbifold Chow ring of toric\nDeligne-Mumford stacks. J. Amer. Math. Soc., 18(1):193\u2013215 (electronic), 2005.\narXiv:math/0309229.\n[6] Lev A. Borisov and R. Paul Horja. On the K-theory of smooth toric DM stacks. In\nSnowbird lectures on string geometry, volume 401 of Contemp. Math., pages 21\u201342.\nAmer. Math. Soc., Providence, RI, 2006. arXiv:math/0503277.\n\n\fThe Orbifold Topological Vertex\n\n69\n\n[7] Tom Bridgeland, Alastair King, and Miles Reid. The McKay correspondence as an\nequivalence of derived categories. J. Amer. Math. Soc., 14(3):535\u2013554 (electronic),\n2001.\n[8] Jim Bryan and Amin Gholampour. The Quantum McKay correspondence\nfor polyhedral singularities. Inventiones Mathematicae, 178(3):655\u2013681, 2009.\narXiv:0803.3766.\n[9] Jim Bryan and Tom Graber. The crepant resolution conjecture. In Algebraic\nGeometry-Seattle 2005, volume 80 of Proc. Sympos. Pure Math., pages 23\u201342.\nAmer. Math. Soc., Providence, RI, 2009. arXiv: math.AG/0610129.\n[10] Charles Cadman. Using stacks to impose tangency conditions on curves. Amer. J.\nMath., 129(2):405\u2013427, 2007. arXiv:math/0312349.\n[11] Jiun-Cheng Chen and Hsian-Hua Tseng. A note on derived McKay correspondence.\nMath. Res. Lett., 15(3):435\u2013445, 2008. arXiv:math/0609737.\n[12] Tom Coates and Hiroshi Iritani. Personal communication.\n[13] Barbara Fantechi, Etienne Mann, and Fabio Nironi. Smooth toric DM stacks.\narXiv:math/0708.1254.\n[14] Mark Gross. Examples of special Lagrangian fibrations. In Symplectic geometry and\nmirror symmetry (Seoul, 2000), pages 81\u2013109. World Sci. Publ., River Edge, NJ,\n2001. arXiv:math/0012002.\n[15] Hiroshi Iritani. An integral structure in quantum cohomology and mirror symmetry\nfor toric orbifolds. arXiv:math/0903.1463.\n[16] Charles Cadman Jim Bryan, Ben Young. The crepant resolution conjecture in\nDonaldson-Thomas theory. In preparation.\n[17] Jun Li, Chiu-Chu Melissa Liu, Kefeng Liu, and Jian Zhou. A Mathematical Theory\nof the Topological Vertex. arXiv:math/0408426.\n[18] Chiu-Chu Melissa Liu, Kefeng Liu, and Jian Zhou. A formula of twopartition Hodge integrals. J. Amer. Math. Soc., 20(1):149\u2013184 (electronic), 2007.\narXiv:math.AG/0310272.\n[19] I. G. Macdonald. Symmetric functions and Hall polynomials. Oxford Mathematical\nMonographs. The Clarendon Press Oxford University Press, New York, second edition, 1995. With contributions by A. Zelevinsky, Oxford Science Publications.\n[20] D. Maulik, N. Nekrasov, A. Okounkov, and R. Pandharipande. Gromov-Witten theory and Donaldson-Thomas theory. I. Compos. Math., 142(5):1263\u20131285, 2006.\narXiv:math.AG/0312059.\n[21] D. Maulik, A. Oblomkov, A. Okounkov, and R. Pandharipande. GromovWitten/Donaldson-Thomas correspondence for toric 3-folds. arXiv:math/0809.3976.\n[22] Grigory Mikhalkin. Enumerative tropical algebraic geometry in R2 . J. Amer. Math.\nSoc., 18(2):313\u2013377 (electronic), 2005. arXiv:math/0312530.\n[23] A. Okounkov and N. Reshetikhin. Correlation function of Schur process with application to local geometry of a random 3-dimensional Young diagram. Journal of the\nAmerican Mathematical Society, 16(3):581\u2013603, 2003.\n[24] A. Okounkov and N. Reshetikhin. Random skew plane partitions and the Pearcey\nprocess. Communications in Mathematical Physics, 269(3):571\u2013609, 2007.\n[25] Andrei Okounkov, Nikolai Reshetikhin, and Cumrun Vafa. Quantum Calabi-Yau and\nclassical crystals. In The unity of mathematics, volume 244 of Progr. Math., pages\n597\u2013618. Birkh\u00e4user Boston, Boston, MA, 2006. arXiv:hep-th/0309208.\n[26] Martin Olsson and Jason Starr. Quot functors for Deligne-Mumford stacks. Comm.\nAlgebra, 31(8):4069\u20134096, 2003. Special issue in honor of Steven L. Kleiman.\n\n\f70\n\nJ. BRYAN, C. CADMAN, AND B. YOUNG\n\n[27] R.P. Stanley. Enumerative combinatorics. Cambridge Univ Pr, 2001.\n[28] R. P. Thomas. A holomorphic Casson invariant for Calabi-Yau 3-folds, and bundles\non K3 fibrations. J. Differential Geom., 54(2):367\u2013438, 2000.\n[29] B. Toen. Th\u00e9or\u00e8mes de Riemann-Roch pour les champs de Deligne-Mumford. KTheory, 18(1):33\u201376, 1999.\n[30] Hsian-Hua Tseng. Orbifold quantum Riemann-Roch, Lefschetz and Serre. Geom.\nTopol., 14(1):1\u201381, 2010.\nE-mail address: jbryan@math.ubc.ca\nE-mail address: mythirty@gmail.com\nE-mail address: byoung@math.mcgill.ca,benyoung@msri.org\nD EPARTMENT OF M ATHEMATICS , U NIVERSITY OF B RITISH C OLUMBIA , ROOM\n121, 1984 M ATHEMATICS ROAD , VANCOUVER , B.C., C ANADA V6T 1Z2\n\n\f"}