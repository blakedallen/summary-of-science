{"id": "http://arxiv.org/abs/0808.3364v3", "guidislink": true, "updated": "2009-03-25T17:52:18Z", "updated_parsed": [2009, 3, 25, 17, 52, 18, 2, 84, 0], "published": "2008-08-25T14:48:43Z", "published_parsed": [2008, 8, 25, 14, 48, 43, 0, 238, 0], "title": "Optimal Resource Allocation in Random Networks with Transportation\n  Bandwidths", "title_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0808.0426%2C0808.1417%2C0808.3675%2C0808.3649%2C0808.0048%2C0808.2074%2C0808.2764%2C0808.3448%2C0808.0871%2C0808.0126%2C0808.3061%2C0808.1495%2C0808.1252%2C0808.3924%2C0808.0989%2C0808.3240%2C0808.0230%2C0808.0402%2C0808.2869%2C0808.1828%2C0808.3040%2C0808.2393%2C0808.2370%2C0808.3540%2C0808.1116%2C0808.4038%2C0808.3058%2C0808.3970%2C0808.0791%2C0808.0435%2C0808.2507%2C0808.1112%2C0808.3819%2C0808.2696%2C0808.0751%2C0808.0612%2C0808.0861%2C0808.0593%2C0808.3206%2C0808.1907%2C0808.4056%2C0808.3381%2C0808.3768%2C0808.0526%2C0808.3166%2C0808.2215%2C0808.0329%2C0808.2506%2C0808.2521%2C0808.0681%2C0808.3008%2C0808.2908%2C0808.2637%2C0808.3777%2C0808.2902%2C0808.4022%2C0808.1222%2C0808.3629%2C0808.1337%2C0808.0186%2C0808.0995%2C0808.2336%2C0808.3526%2C0808.1439%2C0808.3361%2C0808.3641%2C0808.2711%2C0808.2352%2C0808.1186%2C0808.0727%2C0808.2652%2C0808.2163%2C0808.0864%2C0808.0495%2C0808.0045%2C0808.3128%2C0808.2454%2C0808.2106%2C0808.2263%2C0808.2348%2C0808.0166%2C0808.0555%2C0808.2446%2C0808.2508%2C0808.3232%2C0808.3088%2C0808.3057%2C0808.2924%2C0808.4013%2C0808.2905%2C0808.2805%2C0808.0385%2C0808.0940%2C0808.1878%2C0808.2447%2C0808.3364%2C0808.3311%2C0808.3943%2C0808.1595%2C0808.1344%2C0808.3425&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "Optimal Resource Allocation in Random Networks with Transportation\n  Bandwidths"}, "summary": "We apply statistical physics to study the task of resource allocation in\nrandom sparse networks with limited bandwidths for the transportation of\nresources along the links. Useful algorithms are obtained from recursive\nrelations. Bottlenecks emerge when the bandwidths are small, causing an\nincrease in the fraction of idle links. For a given total bandwidth per node,\nthe efficiency of allocation increases with the network connectivity. In the\nhigh connectivity limit, we find a phase transition at a critical bandwidth,\nabove which clusters of balanced nodes appear, characterised by a profile of\nhomogenized resource allocation similar to the Maxwell's construction.", "summary_detail": {"type": "text/plain", "language": null, "base": "http://export.arxiv.org/api/query?search_query=&id_list=0808.0426%2C0808.1417%2C0808.3675%2C0808.3649%2C0808.0048%2C0808.2074%2C0808.2764%2C0808.3448%2C0808.0871%2C0808.0126%2C0808.3061%2C0808.1495%2C0808.1252%2C0808.3924%2C0808.0989%2C0808.3240%2C0808.0230%2C0808.0402%2C0808.2869%2C0808.1828%2C0808.3040%2C0808.2393%2C0808.2370%2C0808.3540%2C0808.1116%2C0808.4038%2C0808.3058%2C0808.3970%2C0808.0791%2C0808.0435%2C0808.2507%2C0808.1112%2C0808.3819%2C0808.2696%2C0808.0751%2C0808.0612%2C0808.0861%2C0808.0593%2C0808.3206%2C0808.1907%2C0808.4056%2C0808.3381%2C0808.3768%2C0808.0526%2C0808.3166%2C0808.2215%2C0808.0329%2C0808.2506%2C0808.2521%2C0808.0681%2C0808.3008%2C0808.2908%2C0808.2637%2C0808.3777%2C0808.2902%2C0808.4022%2C0808.1222%2C0808.3629%2C0808.1337%2C0808.0186%2C0808.0995%2C0808.2336%2C0808.3526%2C0808.1439%2C0808.3361%2C0808.3641%2C0808.2711%2C0808.2352%2C0808.1186%2C0808.0727%2C0808.2652%2C0808.2163%2C0808.0864%2C0808.0495%2C0808.0045%2C0808.3128%2C0808.2454%2C0808.2106%2C0808.2263%2C0808.2348%2C0808.0166%2C0808.0555%2C0808.2446%2C0808.2508%2C0808.3232%2C0808.3088%2C0808.3057%2C0808.2924%2C0808.4013%2C0808.2905%2C0808.2805%2C0808.0385%2C0808.0940%2C0808.1878%2C0808.2447%2C0808.3364%2C0808.3311%2C0808.3943%2C0808.1595%2C0808.1344%2C0808.3425&start=0&max_results=1000&sortBy=relevance&sortOrder=descending", "value": "We apply statistical physics to study the task of resource allocation in\nrandom sparse networks with limited bandwidths for the transportation of\nresources along the links. Useful algorithms are obtained from recursive\nrelations. Bottlenecks emerge when the bandwidths are small, causing an\nincrease in the fraction of idle links. For a given total bandwidth per node,\nthe efficiency of allocation increases with the network connectivity. In the\nhigh connectivity limit, we find a phase transition at a critical bandwidth,\nabove which clusters of balanced nodes appear, characterised by a profile of\nhomogenized resource allocation similar to the Maxwell's construction."}, "authors": ["C. H. Yeung", "K. Y. Michael Wong"], "author_detail": {"name": "K. Y. Michael Wong"}, "author": "K. Y. Michael Wong", "links": [{"title": "doi", "href": "http://dx.doi.org/10.1088/1742-5468/2009/03/P03029", "rel": "related", "type": "text/html"}, {"href": "http://arxiv.org/abs/0808.3364v3", "rel": "alternate", "type": "text/html"}, {"title": "pdf", "href": "http://arxiv.org/pdf/0808.3364v3", "rel": "related", "type": "application/pdf"}], "arxiv_comment": "28 pages, 11 figures", "arxiv_primary_category": {"term": "physics.soc-ph", "scheme": "http://arxiv.org/schemas/atom"}, "tags": [{"term": "physics.soc-ph", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "cond-mat.dis-nn", "scheme": "http://arxiv.org/schemas/atom", "label": null}, {"term": "cond-mat.stat-mech", "scheme": "http://arxiv.org/schemas/atom", "label": null}], "pdf_url": "http://arxiv.org/pdf/0808.3364v3", "affiliation": "None", "arxiv_url": "http://arxiv.org/abs/0808.3364v3", "journal_reference": "J. Stat. Mech P03029 (2009)", "doi": "10.1088/1742-5468/2009/03/P03029", "fulltext": "arXiv:0808.3364v3 [physics.soc-ph] 25 Mar 2009\n\nOptimal Resource Allocation in Random Networks\nwith Transportation Bandwidths\nC. H. Yeung and K. Y. Michael Wong\nDepartment of Physics, The Hong Kong University of Science and Technology, Hong\nKong, China\nE-mail: phbill@ust.hk, phkywong@ust.hk\nAbstract. We apply statistical physics to study the task of resource allocation in\nrandom sparse networks with limited bandwidths for the transportation of resources\nalong the links. Recursive relations from the Bethe approximation are converted into\nuseful algorithms. Bottlenecks emerge when the bandwidths are small, causing an\nincrease in the fraction of idle links. For a given total bandwidth per node, the efficiency\nof allocation increases with the network connectivity. In the high connectivity limit,\nwe find a phase transition at a critical bandwidth, above which clusters of balanced\nnodes appear, characterised by a profile of homogenized resource allocation similar to\nthe Maxwell's construction.\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n2\n\n1. Introduction\nAnalytical techniques developed in the statistical physics of spin models have been\nwidely employed in the analysis of systems in a wide variety of fields, such as neural\nnetworks [1, 2], econophysical models [3], and error-correcting codes [2, 4]. Analogy is\ndrawn between the interactions and dynamics commonly present in the spin models and\nother systems. Consequently, notions such as cost functions and noises can find their\ncorresponding physical quantities in spin models. This parallelism contributes to the\nsuccess of statistical mechanics in various fields.\nRecently, a statistical physics perspective was successfully applied to the problem of\nresource allocation on sparse random networks [5, 6]. Resource allocation is a well known\nnetwork problem in the areas of computer science and operations management [7, 8].\nIt is relevant to applications such as load balancing in computer networks, reducing\nInternet traffic congestion, and streamlining network flow of commodities [9, 10]. In a\ntypical setup, each node of the network has its own demand or supply of resources, and\nthe task is to transport the resources through the links to satisfy the demands while a\nglobal transportation cost function is optimized.\nThe work in [5, 6] can be extended to consider the effects of bandwidths of the\ntransportation links. In communication networks, connections usually have assigned\nbandwidths. Bandwidths limit the currents flowing in the links or, in equivalent\nmodels, the interaction strengths defined on the links connecting the site variables. The\nsignificance of finite bandwidths was recently recognized in several similar problems. For\nexample, transportation problems with global constraints on interaction strengths were\nstudied, through a model of transportation network with limited total conductance [11],\nand another model of transportation network with limited total pipe volume or surface\narea which increase the resistance of pipes [12]. Among these studies, constraints on\ninteraction strengths were implemented as limits on conductance.\nThe purpose of this paper is twofold. First, we demonstrate the close relation\nbetween statistical mechanics and distributed algorithms. Such close relations have\nfacilitated statistical mechanics to provide insights to a number of principled algorithms\nrecently, as illustrated by the relation between Bethe approximation and error-correcting\ncodes [2, 13, 14], and probabilistic inference [15], as well as the replica symmetrybreaking ansatz and the survey propagation algorithm in K-satisfiability problems [16].\nThese contributions were made in problems with discrete variables. In this paper, we\nextend the Bethe approximation to the resource allocation involving continuous variable\nwith finite bandwidths. Since bandwidths limit the currents along the links, both the\nmessage-passing and price iteration algorithms proposed in [5, 6] have to be modified,\nwhich enable us to find the optimal solutions without the need of a global optimizer.\nThe second purpose is to study the behavior of the optimized networks when\nthe connectivity and bandwidth changes, using insights generated from the recursion\nrelations of the free energy. We observe a number of interesting physical phenomena\nin networks with finite bandwidths. For example, there is the emergence of bottlenecks\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n3\n\nwhen the bandwidth decreases, resulting in the shrinking of the fraction of unsaturated\nlinks. We also identify the correlations between the capacities of the nodes and their\nroles as sources, sinks and relays. We find that resources are more efficiently distributed\nwith increasing connectivity. Scaling relations are found in the distributions of currents\nand chemical potentials. In the high connectivity limit, we find a phase transition at a\ncritical bandwidth, above which clusters of balanced nodes appear, characterised by a\nprofile of homogenized resource distribution reminiscent of the Maxwell's construction\nin thermodynamics. When adapted to scale-free networks, changes in this profile enable\nus to identify the enhanced homogeneity of resources brought by the presence of hubs\nto nodes with low connectivity.\nThe paper is organized as follows. In Section 2, we introduce the general model,\nand the analysis is presented in Section 3. We demonstrate the conversion of the derived\nrecursive equations into algorithms in Section 4. In Section 5, we compare the analytic\nsolutions with numerical simulations in networks with low connectivity, and report on\nthe bottleneck effect. We will examine the limit of high connectivity in Section 6. We\nconclude the paper and point out the potential applications of the model in Section 7.\n2. The model\nWe address the problem of resource allocation on random sparse networks of nodes and\nlinks. Each node of the network has its own supply or demand of resources, and the task\nis to transport the resources through the links to satisfy the demands while optimizing\na cost function of transportation costs. The amount of resources transported through\na link is limited by the bandwidth, which leads to extra constraints in the resource\nallocation problem.\nBandwidth limitations require us to generalize the problem in the following way.\nIn the case of infinite bandwidths, currents along the links can be set arbitrarily large\nto satisfy the demands of all nodes. Hence hard constraints on the satisfiability of the\nnode demands can be realized, provided that the networkwide supply of resource is\ngreater than their resource demand. On the other hand, in the present model of finite\nbandwidth, a node with resource demand can still experience shortage even though its\nneighbors have adequate supply of resources, since the provision of resources can be\nlimited by the bandwidths of the links. Hence, the hard constraints on node satisfaction\nof the infinite-bandwidth model is replaced by soft constraints, and the energy function\nis generalized to include the cost of unsatisfaction, or shortage of resources.\nSpecifically, we consider a network with N nodes, labelled i = 1, . . . , N. Each node i\nis randomly connected to c other nodes. The connectivity matrix is given by Aij = 1, 0\nfor connected and unconnected node pairs respectively. Except for the discussion on\nscale-free networks in Section 6 B4, we focus on sparse networks, namely, those of\nintensive connectivity c \u223c O(1) \u226a N.\nEach node i has a capacity \u039bi randomly drawn from a distribution \u03c1(\u039bi ). Positive\nand negative values of \u039bi correspond to supply and demand of resources respectively.\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n4\n\nThe task of resource allocation involves transporting resources between nodes such that\nthe demands of the nodes can be satisfied to the largest extent. Hence we assign\nyij \u2261 \u2212yji to be the current drawn from node j to i, aiming at reducing the shortage \u03bei\nof node i defined by\n\u0010\n\u0011\nX\n\u03bei = max \u2212\u039bi \u2212\nAij yij , 0 .\n(1)\n(ij)\n\nThe magnitudes of the currents are bounded by the bandwidth W , i.e., |yij | \u2264 W . For\nsimplicity and clarity, we deal with the case of homogeneous connectivity and bandwidth\nin the paper, but the analyses and algorithms can be trivially generalized to handle real\nnetworks having heterogeneous connectivity and bandwidth.\nTo minimize the shortage of resources after their allocation, we include in the total\ncost both the shortage cost and the transportation cost. Hence, the general cost function\nof the system can be written as\nX\nX\n\u03c8(\u039bi , {yij |Aij = 1}).\n(2)\nE=R\nAij \u03c6(yij ) +\n(ij)\n\ni\n\nThe summation (ij) corresponds to summation over all node pairs, and \u039bi is a quenched\nvariable defined on node i.\nIn the present model of resource allocation, the first and second terms correspond\nto the transportation and shortage costs respectively. The parameter R corresponds to\nthe resistance on the currents, and \u039bi is the capacity of node i. The transportation\ncost \u03c6(yij ) can be a general even function of yij . (Our model can be generalized\nto consider transportation costs \u03c6 that are odd functions of yij . In such cases, one\nsimply has to introduce extra quenched variables of the links representing the favored\ndirections of the currents.) In this paper, we consider \u03c6 and \u03c8 to be concave functions\nof their arguments, that is, \u03c6\u2032 (y) and \u03c8 \u2032 (\u03be) are non-decreasing functions. Specifically,\nwe have the quadratic transportation cost \u03c6(y) = y 2/2, and the quadratic shortage cost\n\u03c8(\u039bi , {yij |Aij = 1}) = \u03bei2 /2. As considered previously, other concave and continuous\nfunctions of \u03c6, such as the anharmonic function in [6], result in similar network behavior.\nThe model can also be extended to probabilistic inference on graphical models\n[17]. In this context yij = yji may represent the coupling between observables in nodes\nj and i, \u03c6(yij ) may correspond to the logarithm of the prior distribution of yij , and\n\u03c8(\u039bi , {yij |Aij = 1}) the logarithm of the likelihood of the observables \u039bi .\n3. Analysis\nThe analysis of the model is made convenient by the introduction of the variables \u03bei . It\ncan be written as the minimization of Eq. (2) in the space of yij and \u03bei , subject to the\nconstraints\nX\n\u039bi +\nAij yij + \u03bei \u2265 0,\n(ij)\n\n\u03bei \u2265 0,\n\n(3)\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n5\n\nand the constraints on the bandwidths of the links\nW \u2212 yij \u2265 0,\nW + yij \u2265 0.\n\n(4)\n\nWe consider the dual of the original optimization problem. Introducing Lagrange\nmultipliers to the above inequality constraints, the function to be minimized becomes\n\u0011\ni\n\u0010\nXh\nX\nL=\n\u03c8(\u03bei ) + \u03bci \u039bi +\nAij yij + \u03bei + \u03b1i \u03bei\ni\n\n+\n\nX\n(ij)\n\n(ij)\n\nh\ni\n+\n\u2212\nAij R\u03c6(yij ) + \u03b3ij (W \u2212 yij ) + \u03b3ij (W + yij ) ,\n\n(5)\n\nwith the Kuhn-Tucker condition\n\u0010\n\u0011\nX\n\u03bci \u039bi +\nAij yij + \u03bei = 0,\n(ij)\n\n\u03b1i \u03bei = 0,\n\u03b3ij+ (W \u2212 yij ) = 0,\n\u03b3ij\u2212 (W + yij ) = 0,\n\n(6)\n\nand the constraints \u03bci \u2264 0, \u03b1i \u2264 0, \u03b3ij+ \u2264 0 and \u03b3ij\u2212 \u2264 0. Optimizing L with respect to\nyij , one obtains\nyij = Y (\u03bcj \u2212 \u03bci )\n(7)\nn\nh\n\u0010 x \u0011io\n.\n(8)\nY (x) = max \u2212W, min W, [\u03c6\u2032 ]\u22121\nR\nThe Lagrange multiplier \u03bci is referred to as the chemical potential of node i, and \u03c6\u2032 is\nthe derivative of \u03c6 with respect to its argument. The function Y (\u03bcj \u2212 \u03bci ) relates the\npotential difference between nodes i and j to the current driven from node j to i. For\nthe quadratic cost, it consists of a linear segment between \u03bcj \u2212 \u03bci = \u00b1W R reminiscent\nof Ohm's law in electric circuits. Beyond this range, y is bounded above and below by\n\u00b1W respectively. Thus, obtaining the optimized configuration of currents yij among\nthe nodes is equivalent to finding the corresponding set of chemical potentials \u03bci , from\nwhich the optimized yij 's are then derived from Y (\u03bcj \u2212 \u03bci ). This implies that we can\nconsider the original optimization problem in the space of chemical potentials.\nThe network behavior depends on whether \u03c8 \u2032 (0) is zero or not; \u03c8 \u2032 (0) can be\nconsidered as the friction necessary for the chemical potentials to overcome when the\nshortage changes from zero to nonzero. For the frictionless case of \u03c8 \u2032 (0) = 0, to which\nthe quadratic \u03c8 considered in this paper belongs, two types of nodes can be identified.\nP\nThose nodes i with excess resources (\u039bi + ij Aij yij > 0) are characterized by \u03bci = 0\nand \u03bei = 0. Those nodes i with resource shortage are characterized by \u03bci < 0 and \u03bei > 0.\nFor the friction case of \u03c8 \u2032 (0) > 0, there is a third type of nodes i with fully utilized\nP\nresources (\u039bi + ij Aij yij = 0) and characterized by \u03bci < 0 and \u03bei = 0.\nThree types of links can be identified. Those links (ij) with |yij | = W are referred\nto as the saturated links. Those with 0 < |yij | < W and |yij | = 0 are referred to as\nunsaturated and idle links respectively.\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n6\n\nWe introduce the free energy at a temperature T \u2261 \u03b2 \u22121 ,\nF = \u2212T ln Z,\n\n(9)\n\nwhere Z is the partition function\nh\ni\nYZ W\nX\nX\nZ=\ndyij exp \u2212\u03b2\nAij \u03c6(yij ) \u2212 \u03b2\n\u03c8(\u039bi , {yij |Aij = 1}) .\n(ij)\n\n\u2212W\n\ni\n\n(ij)\n\n(10)\nThe statistical mechanical analysis of the free energy can be carried out using the replica\nmethod or the Bethe approximation, both yielding the same results [6]. The replica\napproach for networks with finite bandwidths is a direct generalization of the case\nwith infinite bandwidth in [6]. Here, we describe the Bethe approach, whose physical\ninterpretation is more transparent.\nIn large sparse networks, the probability of finding loops of finite lengths on the\nnetwork is low, and the local environment of a node resembles a tree. In the Bethe\napproximation, a node is connected to c branches of the tree, and the correlations\namong the branches are neglected. In each branch, nodes are arranged in generations,\nA node is connected to an ancestor node of the previous generation, and another c \u2212 1\ndescendent nodes of the next generation.\nWe consider the vertex V (T) of a tree T. We let F (y|T) be the free energy of the\ntree when a current y is drawn from the vertex by its ancestor node. One can express\nF (y|T) in terms of the free energies F (yk |Tk ) of its descendents k = 1, . . . , c \u2212 1,\n\u0013\n\u001aY\nc\u22121\nc\u22121 \u0012Z W\nh\nX\nF (yk |Tk )\ndyk exp \u2212\u03b2\nF (y|T) = \u2212T ln\nk=1\n\n\u2212 \u03b2R\n\nc\u22121\nX\nk=1\n\n\u2212W\n\nk=1\n\nc\u22121\n\u0011i\u001b\n\u0010\nX\nyk + y, 0)\n,\n\u03c6(yk ) \u2212 \u03b2\u03c8 max(\u2212\u039bV (T) \u2212\n\n(11)\n\nk=1\n\nwhere Tk represents the tree terminated at the k th descendent of the vertex, and \u039bV (T)\nis the capacity of V (T). We then consider the free energy as the sum of two parts,\nF (y|T) = NTFav +FV (y|T),\n\n(12)\n\nwhere NT is the number of nodes in the tree T, and Fav is the vertex free energy per\nnode. FV (y|T) is referred to as the vertex free energy. Note that when a vertex is added\nto a tree, there is a change in the free energy due to the added vertex. In the language of\nthe cavity method [18], the vertex free energies are equivalent to the cavity fields, since\nthey describe the state of the system when the ancestor node is absent. From Eq. (12),\nwe obtain a recursion relation for the vertex free energy. In the zero temperature limit,\nthis relation reduces to\n\u0013\n\u0014X\nc\u22121 \u0012\nFV (yk |Tk ) + R\u03c6(yk )\nFV (y|T) =\nmin\n{yk ||yk |\u2264W }\n\nk=1\n\n\u0013\u0015\n\u0012\nc\u22121\nX\nyk + y, 0) \u2212 Fav .\n+ \u03c8 max(\u2212\u039bV (T) \u2212\nk=1\n\n(13)\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n7\n\nNote that Fav has to be subtracted from the above relation, since the number of nodes\nincreases by 1 when a new vertex is added to the trees.\nThe average free energy is obtained by considering the average change in the free\nenergy when a vertex is connected to its c neighbors, resulting in\n\u0013\n\u001c\n\u0014X\nc \u0012\nFV (yk |Tk ) + R\u03c6(yk )\nFav (y|T) =\nmin\n{yk ||yk |\u2264W }\n\nk=1\n\n\u0012\n\u0013\u0015\u001d\nc\nX\n+ \u03c8 max(\u2212\u039bV (T) \u2212\nyk , 0)\n.\nk=1\n\n(14)\n\n\u039b\n\nwhere \u039bV is the capacity of the vertex V fed by c trees T1 , . . . , Tc , and h. . .i\u039b\nrepresents the average over the distribution \u03c1(\u039b). The shortage distribution and current\ndistribution can be derived accordingly [6].\n4. The Message-Passing Algorithm\nDue to the local nature of the recursion relation (13), the optimization problem can be\nsolved by message-passing approaches, which have been successful in problems such as\nerror-correcting cods [13] and probabilistic inference [15]. However, in contrast to other\nmessage-passing algorithms which pass conditional probability estimates of discrete\nvariables to neighboring nodes, the messages in the present context are more complex,\nsince they are free energy functions FV (y|T) of the continuous variable y. Inspired\nby the success of replacing the function messages by their first and second derivatives\nin [6], we follow the same route and simplify the messages devised for this problem.\nNote that the validity of this simplification is not obvious in this problem, owing to\nthe non-quadratic nature of the energy function as a result of the finite bandwidths.\nThese additional constraints increase the complexity of the problem and complicate the\nmessages.\nWe form two-parameter messages using the first and second derivatives of the vertex\nfree energies. Let (Aij , Bij ) \u2261 (\u2202FV (yij |Tj )/\u2202yij , \u2202 2 FV (yij |Tj )/\u2202yij2 ) be the messages\npassed from node j to its ancestor node i, based on the messages received from its\ndescendents in the tree Tj . The recursion relation of the message can be obtained by\nminimizing the vertex free energy in the space of the current adjustments \u01ebjk drawn\nfrom the descendents. We minimize\ni\nh\nX\nR\n1\n(15)\nFij =\nAjk Ajk \u03b5jk + Bjk \u03b52jk + R\u03c6\u2032jk \u03b5jk + \u03c6\u2032\u2032jk \u03b52jk + \u03c8(\u03bej ),\n2\n2\nk6=i\nsubject to the constraints\nX\nAjk (yjk + \u03b5jk ) \u2212 yij + \u039bj + \u03bej \u2265 0,\n\n(16)\n\nk6=i\n\n\u03bej \u2265 0,\ntogether with the constraints on bandwidths,\n|yjk + \u01ebjk | \u2264 W.\n\n(17)\n\n\f8\n\nOptimal Resource Allocation with Transportation Bandwidths\n\n\u03c6\u2032jk and \u03c6\u2032\u2032jk represent the first and second derivatives of \u03c6(y) at y = yjk respectively.\nWe introduce Lagrange multiplier \u03bcij for constraints (16). After optimizing the energy\nfunction of node j, the messages from node j to i are given by\n\nwhere\n\nAij \u2190 \u2212\u03bcij ,\n\uf8f1\n\uf8f4\n0\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\nnX\n\uf8f4\n\uf8f4\n\uf8f4\nAjk (R\u03c6\u2032\u2032jk + Bjk )\u22121\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\nk6=i\n\uf8f4\n\uf8f4\n\uf8f4\nh\n\uf8f4\n\uf8f4\nR\u03c6\u2032jk + Ajk + \u03bcij io\u22121\n\uf8f4\n\uf8f4\n\u00d7\u0398\nW\n\u2212\ny\n\u2212\n\uf8f4\njk\n\uf8f2\nR\u03c6\u2032\u2032jk + Bjk\nBij \u2190\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\nn\nX\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\nAjk (R\u03c6\u2032\u2032jk + Bjk )\u22121\n\u03c8 \u2032\u2032 (\u03be)\u22121 +\n\uf8f4\n\uf8f4\n\uf8f4\nk6=i\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f4\nh\n\uf8f4\nR\u03c6\u2032jk + Ajk + \u03bcij io\u22121\n\uf8f4\n\uf8f4\n\u00d7\u0398\nW\n\u2212\ny\n\u2212\n\uf8f4\njk\n\uf8f4\n\uf8f4\nR\u03c6\u2032\u2032jk + Bjk\n\uf8f4\n\uf8f4\n\uf8f4\n\uf8f3\n\n(18)\nfor\n\nh\u22121\nij (0)\n\n> 0,\n\nfor \u2212\u03c8 \u2032 (0) \u2264 h\u22121\nij (0) \u2264 0,\n\n(19)\n\n\u2032\nfor h\u22121\nij (0) < \u2212\u03c8 (0),\n\ngij (x) = [\u03c8 \u2032 \u25e6 hij ](x) + x,\n\uf8f1\nfor h\u22121\n\uf8f4\nij (0) > 0,\n\uf8f20\n\u03bcij = h\u22121\nfor \u2212\u03c8 \u2032 (0) \u2264 h\u22121\nij (0)\nij (0) \u2264 0,\n\uf8f4\n\uf8f3 \u22121\n\u22121\ngij (0)\nfor hij (0) < \u2212\u03c8 \u2032 (0),\n\n(20)\n\n(21)\n\nand hij (x) is defined by\n\nhij (x) = yij \u2212 \u039bj \u2212\n\nn\nh\nR\u03c6\u2032jk + Ajk + x io\nmax \u2212W, min W, yjk \u2212\nR\u03c6\u2032\u2032jk + Bjk\nk6=i\n\nX\n\n(22)\n\nThese variables can be interpreted as the cavity variables of node j in the absence of i,\nwhen a current yij is drawn from node j. \u03bcij is the cavity chemical potential of node j.\nhij (x) is the cavity shortage of resource at node j when \u03bcij takes the value x. \u03c8 \u2032 \u25e6 hij (x)\nis then the corresponding dissatisfaction cost per unit resource of node j. The condition\nthat \u03c8 \u2032 \u25e6 hij (x) + x = 0 in Eq. (21) is thus to require the chemical potential to be set at\nthe minus of the dissatisfaction cost per unit resource shortage.\nFor the frictionless case of \u03c8 \u2032 (0) = 0, \u03c8 \u2032 (h) changes continuously when h varies\nfrom zero to negative. Hence when yij changes, \u03c8 \u2032 \u25e6 hij changes continuously, resulting\nin a continuous change in the chemical potential \u03bcij as well as the first derivatives of the\nvertex free energy function Aij . Hence, for the quadratic load balancing task, defined by\n\u03c6(y) = y 2 /2, the vertex free energies in the recursion relation Eq. (13) will be piecewise\nquadratic with continuous slopes, with respect to continuous changes of currents yij ,\nimplying the consistency of the proposed optimization algorithm. This validifies the\nreplacement of the message functions by the two-parameter messages.\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n9\n\nSince the messages are simplified to be the first two derivatives of the vertex free\nenergies, it is essential for the nodes to determine the working points at which the\nderivatives are taken. That is, each node needs to estimate the current yij drawn by\nits ancestor. This determination of the working point is achieved by passing additional\ninformation-provision messages among the nodes. Here, we describe the method of\nbackward information-provision messages. This is in contrast to conventional messagepassing algorithms, in which messages are passed in the forward direction only. An\nalternative method of forward information-provision messages can also be formulated\nfollowing [5].\nAfter the minimization of the vertex free energy at a node j, forward messages\n(Aij , Bij ) are sent forward from node j to ancestor node i. Optimal currents yjk are\ncomputed and sent backward from node j to the descendent nodes k 6= i. These\nbackward messages serve as a key in information provision to descendents, so that the\nderivatives in the subsequent messages are to be taken at the updated working points.\nMinimizing the free energy (15) with respect to yjk , the backward message is found to\nbe\nn\nh\nR\u03c6\u2032jk + Ajk + \u03bcij io\n(23)\nyjk \u2190 max \u2212W, min W, yjk \u2212\nR\u03c6\u2032\u2032jk + Bjk\nWhen implemented on real networks, the nodes are not divided into fixed\ngenerations, and there are no fixed ancestors or descendents among the neighbors of\na particular node. Individual nodes are randomly chosen and updated, by randomly\nsetting one of its neighbors to be a temporary ancestor. This results in independent\nupdates of the currents yij and yjk in the opposite directions of the same link. To\nachieve more efficient convergence of the algorithm, we can set yij = \u2212yji during the\nupdates. For the cost function used in this work, we find that this procedure speeds up\nthe balance of demands from the two nodes connected by the link.\nAn alternative distributed algorithm can be obtained by iterating the chemical\npotentials of the nodes. The optimal currents are given by Eq. (7) in terms of the\nchemical potentials \u03bci which, from Eqs. (1) and (6), are related to their neighbors via\n\uf8f1\nfor h\u22121\n\uf8f4\ni (0) > 0,\n\uf8f20\n\u03bci = h\u22121\n(24)\nfor \u2212\u03c8 \u2032 (0) \u2264 h\u22121\ni (0)\ni (0) \u2264 0,\n\uf8f4\n\uf8f3 \u22121\n\u2032\ngi (0)\nfor h\u22121\ni (0) < \u2212\u03c8 (0),\n\nwhere hi (x) and gi (x) are given by\nX\nhi (x) = \u2212\u039bi \u2212\nAij Y (\u03bcj \u2212 x),\nj\n\n\u2032\n\ngi (x) = \u03c8 \u25e6 hi (x) + x,\n\n(25)\n\nwith function Y again given Eq. (8). This provides a simple local iteration method\nfor the optimization problem in which the optimal currents can be evaluated from the\npotential differences of neighboring nodes. Simulation results in Section 5 show that\nthe chemical potential iterations have an excellent agreement with the message-passing\nalgorithm in Eqs.(18)-(22).\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n10\n\nWe may interpret this algorithm as a price iteration scheme by noting that the\nLagrangian in Eq. (5) can be written as\nX\nL=\nAij Lij + constant,\n(26)\n(ij)\n\nwhere\nLij = \u03c6(yij ) + (\u03bci \u2212 \u03bcj )yij .\n\n(27)\n\nTherefore the problem can be decomposed into independent optimization problems, each\nfor a current on a link. \u03bci is the storage price per unit resource at node i, and each\nproblem involves balancing the transportation cost on the link, and the storage cost at\nnode i less that at node j. From Eqs. (24) and (25), we see that when node i is short\nof resources, \u03bci = \u2212\u03c8 \u2032 \u25e6 h(\u03bci ). That is, the storage price at a node is equal to minus\nthe dissatisfaction energy of that node. This means that the algorithm gives bonuses\nto the link controls instead of charging them, so as to encourage them to station their\nresources at the nodes with resource shortage. The amount of bonus per unit resource\ncompensates exactly the dissatisfaction energy per unit resource. This corresponds to a\npricing scheme for the individual links to optimize, which simultaneously optimizes the\nglobal performance. The concept is based on the same consideration as those used in\ndistributed adaptive routing algorithms in communication networks [19].\n5. Results and Physical Implications\nWe examine the properties of the optimized networks by first solving the theoretical\nrecursive equation (13) numerically to obtain various quantities of interest, including the\nenergy, the fraction of idle links and saturated links. The results are then compared with\nthe simulation results obtained by the message-passing and price iteration algorithms.\nAll experiments assume a quadratic shortage cost \u03c8(\u03be) = \u03be 2 /2 for shortage \u03be given in\nEq. (3), and a quadratic transportation cost \u03c6(y) = y 2 /2, and the capacity distribution\n\u03c1(\u039b) a Gaussian with mean h\u039bi and variance 1.\nTo solve numerically the recursive equation (13), we have discretized the vertex\nfree energy functions FV (y|T) into a vector, whose ith component is the value of the\nfunction corresponding to the current yi . At each generation of the calculation, a node j\nis randomly chosen and its capacity \u039bj is drawn from the distribution \u03c1(\u039bj ). The node\nis randomly connected to c\u22121 nodes of the previous generation with vertex free energies\nFV (yk |Tk ). Then the vertex free energy FV (y|T) is found by minimizing the right hand\nside of Eq. (13) using standard numerical methods for every discretized components\nof y, subject to the constraints of |yk | \u2264 W . Thus a new generation of vertex energy\nfunctions is generated and the process continue in a recursive manner.\n5.0.1. Effects of Bandwidths Figure 1 shows the average energy as a function of the\nbandwidth W , obtained by, respectively, the message-passing and the price iteration\nalgorithm simulations, and the recursive equation (13). Simulation results collapse\n\n\f11\n\nOptimal Resource Allocation with Transportation Bandwidths\n0.4\n\n1\nFraction\n\n0.8\n0.3\n\nSaturated\n\n0.6\nUnsaturated\n\n0.4\n\nE/N\n\n0.2\n0\n0\n\n0.2\n\nIdle\n\n0.5\n\n1\nW\n\n2\n\nChemcial Potential\nMessage-Passing\nTheoretical\n<\u039b>=\u22120.2\n<\u039b>=\u22120.1\n\n0.1\n\n0\n0\n\n1.5\n\n<\u039b>=0\n\n0.5\n\n1\nW\n\n1.5\n\n2\n\nFigure 1. Simulation results of average energy per node as a function of bandwidth\nW for N = 1000, c = 3, R = 0.1 and h\u039bi = 0, \u22120.1, \u22120.2 with 200 samples, as\ncompared to the numerical solution of Eq. (13). \u00d7's correspond to the energy in the\nzero bandwidth limit as obtained from Eq. (28). Inset: The fraction of idle, unsaturated\nand saturated links as a function of bandwidth for h\u039bi =0. \u00d7 corresponds to fidle in\nthe zero bandwidth limit as obtained from Eq. (29).\n\nalmost perfectly with the recursive equation. We find that the average energy increases\nwith decreasing bandwidths. Physically, decreasing bandwidth corresponds to the\nincreasing limitations in the allocation of resources. Thus, it is natural to have higher\nenergy. In the limit of zero bandwidth with small finite connectivity, the solution\nis equivalent to the initially unoptimized condition. As the bandwidth vanishes, no\nresources are transported among the network, and the average network energy is given\nby\nZ 0 2\n\u039b\n\u03c1(\u039b)d\u039b.\n(28)\nE=N\n\u2212\u221e 2\n\nIn the limit of zero bandwidth, a link can only be idle or saturated, with no\nintermediate unsaturated state. A link is idle only if the two connected nodes are\nsatisfied already, with their own initial resources. The probability of finding an idle link\nis thus determined by the initial resources of the connected nodes, yielding the fraction\nof idle links as\n\u0013\u00152\n\u0014\n\u0012\n\u0014Z \u221e\n\u00152\nh\u039bi\n1\n,\n(29)\n1 \u2212 erf \u221a\nfidle =\n\u03c1(\u039b)d\u039b =\n4\n2\n0\nwhere the last equality is specific to the Gaussian \u03c1(\u039b). The fraction of saturated link is\nindeed given by 1 \u2212 fidle . The corresponding limit is shown in the inset of Fig. 1, which\nis consistent with the simulation results.\n5.0.2. Bottleneck Effect Another interesting physical consequence of decreasing\nbandwidth is also shown in the inset of Fig. 1. We note that as the bandwidth decreases,\nthe fraction of saturated link increases, which is a direct consequence of the attempt to\n\n\f12\n\nOptimal Resource Allocation with Transportation Bandwidths\n\u039b = +1\n\n\u039b = +1\n\ny=0\n\ny=1\n\u039b = +1\n\n\u039b = +1\n\ny=2\n\n\u039b = -2\n\nBandwidth W = 2\n\ny=1\n\u039b = -2\n\nBandwidth W = 1\n\nFigure 2. An example of bottleneck effect.\n\nminimize the shortages of nodes fed by the saturated links. A similar agreement would\nlead us to anticipate a decreasing fraction of idle links as the bandwidth decreases, since\nmore links should participate in the task of resource allocation. Surprisingly, we notice\nan increasing fraction of idle links as the bandwidth decreases, in contrast with our\nanticipation.\nThis is a consequence of the bottleneck effect, as illustrated in Fig. 2. When the\nbandwidth decreases, resources transferred from the secondary neighbors may become\nredundant since resources from nearest neighbors already saturate the link to the\ndissatisfied node, which can therefore be considered as a bottleneck in transportation.\nThis makes the resource distribution among the nodes less uniform, since resources are\nless free to be transported through the links. As a result, more nodes are having either\nexcess resources or large shortage, leading to a higher network energy. On the other\nhand, the existence of these bottlenecks confirm the efficiency of our algorithms, since\nredundant flows to distant nodes are eliminated.\nThe existence of bottlenecks is common in many real networks. Among the most\ncommon examples are bottlenecks occurring in traffic congestions. Further studies can\nbe carried out to minimize the bottleneck effect, such as using heterogeneous bandwidths\nfor different links. The highway is an example of enlarging the bandwidth on a link\nwith heavy traffic. Similar considerations have been applied to routing of traffic on\ntelecommunication networks [19].\n5.0.3. Density of Saturated Links and Its Physical Implications To study the roles\nplayed by the different nodes in resource allocation, we consider the example of networks\nwith c = 3 and very negative h\u039bi, so that all resources in the networks have to be utilized\nfor optimization. We classify the nodes into four classes, the nodes of each class having\nnsat = 0 to 3 saturated links connected to them. Figure 3 shows the conditional capacity\ndistribution of these four classes.\nFor nodes having no saturated links, their participation in the optimization task is\n\n\f13\n\nOptimal Resource Allocation with Transportation Bandwidths\n2 in\n1 out\n\n3 in\n\n1 in\n2 out\n\n3 out\n\n0.5\n\nnSat\n0\n1\n2\n3\n\nP(\u039b|nSat)\n\n0.4\n1 in\n1 out\n\n0.3\n0.2\n\n2 in\n\n2 out\n\n0.1\n0\n-10\n\n-5\n\u039b\n\n0\n\nFigure 3. The distribution of initial resource \u039b given different number of saturated\nlinks nSat after optimization for N = 1000, h\u039bi = \u22125, c = 3, R = 0.1 and W = 1 with\n4000 samples.\n\nrelatively inactive, and their capacity distribution is approximately Gaussian with an\naverage h\u039bi. For nodes having one saturated link, two peaks are found around \u039b \u2212 W\nand \u039b + W in the conditional capacity distribution, respectively corresponding to nodes\nacquiring resources from or providing resources to their neighbors, in order to lower the\nglobal shortage cost.\nFor nodes having two saturated links, we obtain a trimodal distribution. The right\nand the left peaks at around \u039b + 2W and \u039b \u2212 2W correspond to resource donors and\nreceptors respectively, which export or import resources, saturating two of the connected\nlinks. The central peak at \u039b corresponds to nodes with initial resources close to the\naverage value. These nodes have little tendency to donate resources to their neighbors\nor receive from them. Thus they are referred as relays which participate in optimization\nby transferring resources from one neighbor to another. For nodes with three saturated\nlinks, we observe a four-modal distribution. Similarly, the rightmost and the leftmost\npeaks correspond to sources and sinks of resources respectively. The middle-right and\nthe middle-left peaks correspond to source-like relays and sink-like relays respectively,\nnamely, they serve partially as relays and partially as sources and sinks. All these\ndistributions show the strong dependence of the number of saturated links of a node\non its own initial resources, which identify an inborn optimization role for each node\nduring the resource allocation.\n6. The High Connectivity Limit\nThe optimal network behavior can be studied analytically in the limit of high\nconnectivity. In this limit, the bandwidth of the links plays an important role in the\nscaling laws of the physical quantities of interest. Two cases will be considered in this\nsection. In the first case, the bandwidths of the individual links remains constant when\nthe connectivity scales up. This increases the total available bandwidth connecting a\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n14\n\nnode, and hence the freedom in resource allocation.\nIn the second case, we scale the bandwidth of the individual links as c\u22121 when the\nconnectivity c scales up. Hence, the total available bandwidth connecting the individual\nnodes is conserved, but the burden of transporting resources is divided into smaller\ncurrents shared by a larger number of neighbors.\nTo further simplify the analysis, we set \u03c6(y) = y 2/2, \u03c8(\u03be) = \u03be 2 /2 and R \u223c O(1) in\nthe subsequent derivations.\n6.1. High Connectivity with Non-vanishing Bandwidths\n6.1.1. The Optimal Solution In the high connectivity limit, the magnitudes of the\ncurrents in individual links are reduced, owing to the division of the transportation\nburden among the links. Since the bandwidths remain constant, the fraction of saturated\nlinks becomes negligible. Hence, Eq. (19) converges to the result\nR\nBij = \u0398(\u2212\u03bcij ) .\nc\nAt the steady state, all current adjustments \u01ebjk vanish, reducing Eq. (23) to\n1\n(Aij \u2212 Ajk ) .\nR\nThus, Eq. (21) for \u03bcij in the message-passing algorithms can be simplified to\n\u001a\u0012\n\u0013\u22121 h\ni \u001b\nc\n1 X\nAij = max 1 +\nyij \u2212 \u039bj +\nAjk Ajk , 0 ,\nR\nR k6=i\nyjk =\n\n(30)\n\n(31)\n\n(32)\n\nwhere we have approximated c \u2212 1 by c. This expression of Aij corresponds to the\nshortage on node j after optimization for the quadratic cost \u03c8 \u2032 (\u03be) = \u03be. We then utilize\nthe fact that the messages from the descendents are independent to each other. This\nallows us to express the collective effects of the descendents on a node in terms of the\nstatistical properties of the descendents. By virtue of the law of large numbers, it is\nsufficient to consider the mean mA and the variance \u03c3A2 of the messages Ajk . In Eq. (32),\nthe term yij is negligible in the limit of high connectivity. After applying the law of\nP\nlarge numbers to the term k Ajk Ajk , we can write\n\u0013\n\u0012\ncmA \u2212 R\u039bj\n,0 .\n(33)\nAij = max\nc+R\nAveraging over \u039bj , which is drawn from a Gaussian distribution of mean h\u039bi and\nvariance 1, we obtain a self-consistent expression for mA ,\n\u0014\n\u00112 \u0015\n1\n1 \u0010 cmA\nh\u039bi + mA = \u221a exp \u2212\n\u2212 h\u039bi\n2\nR\n2\u03c0\n\u0011 \u0010 cm\n\u0011\n\u0010 cm\nA\nA\n\u2212 h\u039bi H\n\u2212 h\u039bi ,\n(34)\n\u2212\nR\nR\n\u221a\nwhere H(x) = 21 [1 \u2212 erf(x/ 2)]. In the limit of high connectivity, this further implies\nmA = max(\u2212h\u039bi, 0).\n\n(35)\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n15\n\nThis equation relates the average shortage mA after optimization to the average initial\nresources h\u039bi of the system, implying a uniform resource redistribution in the large\nconnectivity limit. Given a negative h\u039bi, the equation implies no nodes are keeping\nexcess resources relative to the average h\u039bi. All excess initial resources are redistributed\nto achieve a global optimized state. We note that the currents scale as (c + R)\u22121 ,\nresulting in a much smaller transportation cost compared with the shortage cost when\nthe connectivity increases. This allows the re-allocation of initial resources through\nvanishing currents to minimize the shortage cost. The sum of c currents of O[(c + R)\u22121 ]\nresults in a total resource transport of O(1) transported to or from a node. It provides an\nextremely large freedom in resource allocation. For positive h\u039bi, the average shortage\nmA vanishes in the limit high connectivity limit, corresponding to a zero fraction of\nunsatisfied nodes. Hence, increasing connectivity results in better resource allocation of\nthe system.\n6.1.2. Network Properties We obtain the current distribution by combining the\nexpression for Aij in Eq. (33) with the equation for current in Eq. (31), such that\n\u0010 cm\n\u0011\n\u0010 cm\n\u0011i\n1 h\nA\nA\nmax\n\u2212 \u039bi , 0 \u2212 max\n\u2212 \u039bj , 0 .\n(36)\nyij =\nc+R\nR\nR\nHence the current distribution is given by\n\u001a\nZ\nZ\nP (y) = d\u039b1\u03c1(\u039b1 ) d\u039b2\u03c1(\u039b2 )\u03b4 y \u2212\n\u0010 cm\n\u0011\n\u0010 cm\n\u0011\u001b\n1\nA\nA\nmax\n\u2212 \u039b1 , 0 \u2212 max\n\u2212 \u039b2 , 0\n.\n(37)\nc+R\nR\nR\nFor the Gaussian distribution \u03c1(\u039b), we obtain\nr\n\u0015\n\u0014\n2\n1\n2\n2\n(38)\nP (y) = H (\u03c7)\u03b4(y) +\n(c + R)H(\u03c7) exp \u2212 ((c + R)y \u2212 \u03c7)\n\u03c0\n2\n\u0015\n\u0014\n1\nc + R \u0010 (c + R)y \u2212 2\u03c7 \u0011\n2 2\n\u221a\nexp \u2212 ((c + R) y ) ,\n+ \u221a H\n4\n\u03c0\n2\nwhere \u03c7 \u2261 cmA /R \u2212 h\u039bi. This shows that the rescaled distribution P [(c + R)y]/(c + R)\nis independent of c and solely dependent on h\u039bi. This confirms that the currents scale\nas (c + R)\u22121 as the connectivity increases, as described before.\nWe obtain the chemical potential distribution by considering the chemical potential\nof a central node 0 fed by c descendents. Introducing Lagrange multipliers, the\nLagrangian becomes\nc\nc h\n2\n\u0010\n\u0011\nX\nX\nRy0j\n\u03be02\n+ \u03bc \u039b0 +\ny0j + \u03be0 + \u03b1\u03be0 +\n+ A0j y0j\nL=\n2\n2\nj=1\nj=1\n2\ni\nRy0j\n\u2212\n+ \u0398(\u2212\u03bc0j )\n+ \u03bb+\n(W\n\u2212\ny\n)\n+\n\u03bb\n(W\n+\ny\n)\n.\n(39)\n0j\n0j\n0j\n0j\n2c\nThe currents are given by y0j = (\u2212A0j \u2212 \u03bc)/R, and the chemical potential is given by\nc\n\u0011\n\u0010\n1\n1X\nA\n,\n0\n.\n(40)\n\u03bc=\nmin\n\u039b\n\u2212\n0j\n0\n1 + Rc\nR j=1\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n16\n\nUsing the statistical properties of A0j in the high connectivity limit, the approximate\nexpression for \u03bc becomes\n\u0010\ncmA \u0011\n1\n,0 .\n(41)\nmin \u039b0 \u2212\n\u03bc=\n1 + Rc\nR\nFor Gaussian distribution of the initial resource, we derive the chemical potential\ndistribution given by\n\u001a h\u0010\ni2 \u001b\n1 + Rc\n1\nc\u0011\nP (\u03bc) = \u221a\nexp \u2212\n1+\n\u03bc+\u03c7\n\u0398(\u2212\u03bc) + H (\u03c7) \u03b4(\u03bc).\n(42)\n2\nR\n2\u03c0\nFinally, the average energy per node is given by\nRc 2\n1\nhy i,\n(43)\nhEi = h\u03bc2 i +\n2\n4\nwhere the first term corresponds to the shortage energy per node and the the second\nterm corresponds to the transportation energy on the links connected to a node. Using\nEqs. (36) and (41), the average energy per node becomes\nD\n\u0010 cm\n\u00112 E\nD\n\u0010 cm\n\u0011E2\nRc\nR\nA\nA\nmax\n\u2212 \u039b, 0\n\u2212\nmax\n\u2212 \u039b, 0\n.\nhEi =\n2(c + R)\nR\n2(c + R)2\nR\n(44)\nFor the Gaussian initial resource distribution, this reduces to\nR\nRc\nI2 (\u03c7) \u2212\nI1 (\u03c7)2 ,\nhEi =\n2\n2(c + R)\n2(c + R)\n\n(45)\n\nwhere\n\u03c72\n\n\u03c7\n\ne\u2212 2\nI1 (\u03c7) =\nDz(\u03c7 \u2212 z) = \u221a + \u03c7H(\u2212\u03c7),\n2\u03c0\n\u2212\u221e\nZ\n\n\u03c72\n\n\u03c7\n\ne\u2212 2\nI2 (\u03c7) =\nDz(\u03c7 \u2212 z) = \u03c7 \u221a + (\u03c72 + 1)H(\u2212\u03c7).\n2\u03c0\n\u2212\u221e\nZ\n\n(46)\n\n2\n\n(47)\n\n6.1.3. Efficient Resource Allocation in The Shortage Reigme In the regime of negative\nh\u039bi, apart from the uniform resource redistribution deduced from Eq. (35), the current\ndistribution, the chemical potential distribution and the energy also show universal\ncharacteristics of efficient resource allocation. When h\u039bi is negative, \u03c7 \u226b 1 in the high\nconnectivity limit, the current distribution reduces to\n\u0015\n\u0014\n(c + R)2 y 2\nc+R\n.\n(48)\nP (y) = \u221a exp \u2212\n\u03c0\n4\nPhysically, the disappearance of the term \u03b4(y) in the expression of the current\ndistribution for negative h\u039bi implies that none of the nodes are holding excess resources\nrelative to the average h\u039bi, reproducing our conclusion from Eq. (35).\nThe chemical potential distribution becomes\n\u001a h\u0010\ni2 \u001b\n1 + Rc\nc\u0011\n1\n1+\n(\u03bc \u2212 h\u039bi)\nP (\u03bc) = \u221a\n.\n(49)\nexp \u2212\n2\nR\n2\u03c0\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n17\n\nThis shows that the distribution P [(1 + c/R)(\u03bc \u2212 h\u039bi)]/(1 + c/R) is independent of c\nand depends solely on h\u039bi. Thus, the width of the distribution scales as (1 + c/R)\u22121 .\nThe variable \u2212\u03bc = \u03be0 , corresponding to the shortage of a node. This implies that\nthe variance of the shortage distribution also scales as (1 + c/R)\u22121 , indicating a more\nefficient allocation of resources. The absence of the delta function component at \u03bc = 0\nimplies that none of the nodes are holding excess resources in the negative h\u039bi regime.\nAs both the current and chemical potential distributions are Gaussian, the average\nenergy per node is simplified to\nR\n1\n.\n(50)\nhEi = h\u039bi2 +\n2\n2(c + R)\nNote that in the high connectivity limit, the average energy per node approaches h\u039bi2/2.\nThis corresponds to the theoretical limit of efficient and uniform resource allocation, in\nwhich the total shortage is evenly shared among all nodes.\n6.1.4. Comparison with Simulations Simulation results are compared with the\nanalytical prediction in the high connectivity limit. Figure 4 shows the rescaled current\ndistribution P [(c + R)y]/(c + R). For positive h\u039bi, the distributions for different\nconnectivities collapse almost perfectly after the currents are rescaled by (c + R)\u22121 ,\nwith a very weak dependence on c, approaching the high connectivity limit progressively.\nFor negative h\u039bi, the distributions also approach the high connectivity limit when the\nconnectivity increases, although the dependence on c is larger.\nThe distribution has a delta function component at y = 0 and a continuous\ncomponent when h\u039bi is positive. However, when h\u039bi is negative, the delta function\ncomponent disappears and the distribution approaches a Gaussian. As shown in the\ninset of Fig. 4, the magnitude of the delta function component, that is, the fraction of\nidle links, vanishes as h\u039bi becomes more negative. Another delta function component is\nobserved at |y| = W when c is small, and dissappears as c increases when the distribution\napproaches the high connectivity limit.\nFigure 5 shows the rescaled chemical potential distributions P [(1 + c/R)(\u03bc \u2212\nh\u039bi)]/(1+c/R) compared with the high connectivity limit. For negative h\u039bi, the rescaled\ndistributions are Gaussian-like and approaching the high connectivity limit. Compared\nwith the corresponding rescaled current distribution, there is a larger dependence on c.\nThe inset of Fig. 5 shows the variances of chemical potentials which approach different\nasymptotic values values as h\u039bi decreases, for different fixed values of connectivity.\nRemarkably, for sufficiently negative h\u039bi, the variances become h\u039bi independent.\nThis further confirms the convergence of chemical potential distributions to universal\nGaussian distributions in the negative h\u039bi regime.\nFigure 6 shows the average shortage, as measured by mA , obtained from simulations\nat different connectivities as compared to the theory. In the neighborhood of h\u039bi \u2248 0, as\nthe connectivity increases, mA gradually approaches the high connectivity limit which\ncorresponds to most uniform allocation of resources given by Eq. (35). Away from\nh\u039bi \u2248 0, mA collapses well with the analytical results.\n\n\f18\n\nOptimal Resource Allocation with Transportation Bandwidths\n1\n\nP(y=0)\n\nP[(c+R)y]/(c+R)\n\n0.75\n\n0.4\nc=3\nc=5\nc=7\nLarge c\n\n0.3\n0.2\n0.1\n0\n-0.5\n\n0.5\n\n0\n<\u039b>\n\n0.5\n\n<\u039b> = \u22121\n\n0.25\n<\u039b> = 0.5\n\n0\n0\n\n1\n\n2\n\n3\n\n(c+R)y\n\nFigure 4. The rescaled current distribution P [(c + R)y]/(c + R) for N = 10000,\nR = 0.1 and W = 1 with 200 samples at different values of h\u039bi, as compared to the\ncorresponding theoretical large connectivity limits given by Eqs. (38) and (48). Inset:\nThe fraction of idle links P (y = 0) as a function of h\u039bi.\n\n2\n\n0.01\n\n0.3\n\n\u03c3\u03bc\n\nP[(1+c/R)(\u03bc\u2212<\u039b>)]/(1+c/R)\n\n0.4\n\n0.001\n0.0001\n\n0.2\n\n<\u039b> = -5\n\n-1\n\n-0.6 -0.2\n<\u039b>\n\nc=3\nc=5\nc=7\nLarge c\n\n0.1\n\n0\n-10\n\n0.2\n\n0\n(1+c/R)(\u03bc\u2212<\u039b>)\n\n10\n\nFigure 5. The rescaled chemical potential distribution P [(1+c/R)(\u03bc\u2212h\u039bi)]/(1+c/R)\nfor N = 10000, R = 0.1, W = 1 and h\u039bi = \u22125 with 200 samples, as compared to the\ntheoretical large connectivity limit given by Eq. (49). Inset: The variance of chemical\npotential \u03c3\u03bc2 as a function of h\u039bi.\n\nRemarkably, the distributions of currents and chemical potentials, and the average\nshortage mA , all approach their high connectivity limits, for relatively low values\nof c already. We also analyze the finite size effects of the system in approaching\nthe asymptotic behavior of the high connectivity limit. The inset of Fig. 6 shows\nthe difference between the variance of chemical potentials and its asymptotic value\n(1 + c/R)\u22122 When the connectivity is low, the differences are larger as indicated by the\npower law fit.\nTo summarize, our analysis shows that in the high connectivity limit, the optimized\nstate of the system is one in which the resources are uniformly allocated, such that\n\n\f19\n\nOptimal Resource Allocation with Transportation Bandwidths\n0\n\n-2\n\n-0.25\n\n<\u039b>=-5\n\n0.001\n\n\u03c3\u03bc \u2212(1+c/R)\n\nc=5\nc=6\nc=7\nPower law fit\n\n2\n\nmA\n\nc=3\nc=5\nc=7\nLarge c\n\n1000\n-0.5\n\n-0.4\n\n-0.2\n\n0\n<\u039b>\n\n10000\nN\n0.2\n\n0.4\n\nFigure 6. The parameter mA as a function of h\u039bi for N = 10000, R = 0.1 and W = 1\nwith 200 samples, as compared to the theoretical large connectivity limit given by\nEq. (35). Inset: The difference \u03c3\u03bc2 \u2212 (1 + c/R)\u22122 between the variance of the chemical\npotential and its corresponding large connectivity limit, given by Eq. (49) as a function\nof system size N . The dashed lines shows the power law fits.\n\nthe final resources on every individual node are equal. Simulations with increasing\nconnectivities reveal the asymptotic approach to this uniform limit, and the deviation\nfrom the limit decreases as the connectivity and the system size increase.\n6.2. High Connectivity with Vanishing Bandwidth\nWe now consider the case that the bandwidth of individual links scales as W\u0303 /c when the\nconnectivity increases, where W\u0303 is a constant. Thus the total bandwidth W\u0303 available\nto an individual node remains a constant. This is applicable to real networks in which\nthe allocation of resources is limited by the processing power of individual nodes.\n6.2.1. The Well-defined Chemical Potential Function We start by writing the chemical\npotentials using Eq. (24),\nN\nh\ni\nX\n\u03bci = min \u039bi +\nAij Y (\u03bcj \u2212 \u03bci ), 0 .\n\n(51)\n\nj=1\n\nIn the high connectivity limit, the interaction of a node with all its connected neighbors\nbecome self-averaging, making it a function which is singly dependent on its own\nchemical potential, namely,\nN\nX\nj=1\n\nAij Y (\u03bcj \u2212 \u03bci ) \u2248 cM(\u03bci ).\n\n(52)\n\nPhysically, the function M(\u03bc) corresponds to the average interaction of a node with its\nneighbors when its chemical potential is \u03bc. Thus, we can write Eq. (51) as\n\u03bc = min[\u039b + cM(\u03bc), 0],\n\n(53)\n\n\fOptimal Resource Allocation with Transportation Bandwidths\nwhere \u03bc is now a function of \u039b, and we have\nZ \u221e\nM(\u03bci ) =\nd\u039b\u03c1(\u039b)Y (\u03bc(\u039b) \u2212 \u03bci )\n\n20\n\n(54)\n\n\u2212\u221e\n\nwhere we have written the chemical potential of the neighbors as \u03bc(\u039b), assuming that\nthey are well-defined functions of their capacities \u039b.\nTo explicitly derive M(\u03bc), we take advantage of the fact that the rescaled\nbandwidth, W\u0303 /c vanishes in the high connectivity limit, so that the current function\nY (\u03bcj \u2212 \u03bci ) is effectively a sign function, which implies that the current on a link is\nalways saturated. (This approximation is not fully valid if c is large but finite, and will\nbe further refined in subsequent discussions.) Thus, we approximate\nZ\nW\u0303 \u221e\nd\u039b\u03c1(\u039b)sgn[\u03bc(\u039b) \u2212 \u03bci ].\n(55)\nM(\u03bci ) =\nc \u2212\u221e\n\nAssuming that \u03bc(\u039b) is a monotonic function of \u039b, then we have sgn[\u03bc(\u039b) \u2212 \u03bci ] =\nsgn(\u039b \u2212 \u039bi ), such that\n\u0014Z \u221e\n\u0015\nZ \u039bi\nW\u0303\nd\u039b\u03c1(\u039b) \u2212\nM(\u03bci ) =\nd\u039b\u03c1(\u039b) .\n(56)\nc\n\u039bi\n\u2212\u221e\nFor Gaussian distribution of capacities, M(\u03bci ) is given by\nW\u0303 \u0010 \u039bi \u2212 h\u039bi \u0011\n\u221a\nM(\u03bci ) = \u2212 erf\n.\n(57)\nc\n2\nThus, \u03bc(\u039b) is explicitly given by\nh\n\u0010 \u039b \u2212 h\u039bi \u0011 i\n\u221a\n\u03bc = min \u039b \u2212 W\u0303 erf\n,0 .\n(58)\n2\nThis equation relates the chemical potential of a node, i.e. the shortage after resource\nallocation, to its initial resource before. Resource allocation through a large number\nof links with a fixed total bandwidth results in a well-defined function relating the two\nquantities.\n6.2.2. p\nMaxwell's Construction Eq. (58) gives a well-defined function \u03bc(\u039b)\np as long as\nW\u0303 \u2264 p \u03c0/2. However, a phase transition takes place when W\u0303 reaches \u03c0/2. When\nW\u0303 > \u03c0/2, turning points exists in \u03bc(\u039b) as shown in Fig. 7(a), due to the dominant\neffect of the error function component in the equation. \u03bc(\u039b) is no longer a monotonic\nfunction. This creates a thermodynamically unstable scenario, since in the region of\n\u03bc(\u039b) with negative slope, nodes with lower capacities have higher chemical potentials\nthan their neighbors with higher capacities. This implies that the current flows from\npoorer nodes to richer ones. Mathematically, the non-monotonicity of \u03bc(\u039b) means that\nsgn[\u03bc(\u039b) \u2212 \u03bci ] and sgn(\u039b \u2212 \u039bi ) are no longer necessarily equal, and Eq. (58) is no longer\nvalid.\nNevertheless, Eq. (51) permits another solution of constant \u03bc in a range of \u039b. This\nis possible since for any \u03bci and \u03bcj in this range, |\u03bci \u2212 \u03bcj | \u2264 RW\u0303 /c implies that the\nlink between nodes i and j is unsaturated. If an extensive fraction of the c links of\n\n\f21\n\nOptimal Resource Allocation with Transportation Bandwidths\n(a)\n\n(b)\n\n\u03bc\n\n\u03bc\n\u039b>\n\n\u039b<\n\n\u039b<\n\n\u039b\n\n\u039b>\n\n\u039b\n\nA\nB\nUnstable Region\n\nFigure 7. Maxwell's construction on \u03bc(\u039b).\n\nsuch a node are connected to other nodes in the range, then the freedom of tuning the\ncurrents in the unsaturated links enables the nodes in the range to have the same level\nof resources after optimization.\nHence, we propose that the unstable region of \u03bc(\u039b) should be replaced by a\nrange of constant \u03bc as shown in Fig. 7(b) analogous to Maxwell's construction in\nthermodynamics. Let (\u039b< , \u03bco) and (\u039b> , \u03bco) be the end points of the Maxwell's\nconstruction as shown in Fig. 7(b). The position of this construction can be determined\nby the conservation of resources. Since the construction is not necessary for positive\nh\u039bi, we focus on the case of negative h\u039bi. In the high connectivity limit, resources are\nso efficiently allocated that the resources of the rich nodes are maximally allocated to\nthe poor nodes as much as the total bandwidth W\u0303 allows. Let \u039bo be the capacity of a\nnode beyond which nodes can have positive final resources (i.e. zero chemical potential).\nNodes with \u039b \u2265 \u039bo send out their resources without drawing inward currents from their\nneighbors, and can be regarded as donors. The value of \u039bo is given by the self-consistent\nequation\nZ \u039bo\nd\u039b\u03c1(\u039b).\n(59)\n\u039bo = W\u0303\n\u2212\u221e\n\nFor Gaussian distribution of capacities,\n\u0010 \u039b \u2212 h\u039bi \u0011i\nW\u0303 h\no\n\u221a\n,\n(60)\n1 + erf\n\u039bo =\n2\n2\nBy equating the networkwide shortage to minus the initially available resources, we find\ni\nX\nXh\n\u2212\n\u03bci =\n\u2212\u039bi \u0398(\u039bo \u2212 \u039bi ) \u2212 \u039bo \u0398(\u039bi \u2212 \u039bo ) .\n(61)\ni\n\ni\n\nOn the right hand side, the first term corresponds to the sharing of shortages among the\nnon-donors, while the second term corresponds to the resources donated by the donors\nto reduce the total shortage. In the high connectivity limit, this equation becomes\n\u0012Z \u039bo Z \u039b< \u0013\nZ \u039b>\nd\u039b\u03c1(\u039b)\u03bc(\u039b)\n+\nd\u039b\u03c1(\u039b)\u03bco \u2212\n\u2212\n\u039b>\n\n\u039b<\n\n=\u2212\n\nZ\n\n\u039bo\n\u2212\u221e\n\nd\u039b\u03c1(\u039b)\u039b \u2212 \u039bo\n\nZ\n\n\u221e\n\n\u039bo\n\n\u2212\u221e\n\nd\u039b\u03c1(\u039b).\n\n(62)\n\n\f22\n\nOptimal Resource Allocation with Transportation Bandwidths\n1\n\nfbal\n\n0.8\n0.6\n0.4\n0.2\n0\n0\n\n1\n\n2\n\n~\nW\n\n3\n\n4\n\n5\n\nFigure 8. The dependence of the fraction of balanced nodes on the bandwidth W\u0303 .\n\nSubstituting Eqs. (53), (56) and (59), and making use of the symmetry relation\nZ \u039bo\nZ \u039bo\nd\u039b\u2032 \u03c1(\u039b\u2032 )sgn(\u039b\u2032 \u2212 \u039b) = 0\nd\u039b\u03c1(\u039b)\nW\u0303\n\u221e\n\nwe arrive at the condition\nZ\nZ \u039b>\nd\u039b\u03c1(\u039b) =\n\u03bco\n\u039b<\n\n(63)\n\n\u221e\n\n\u039b>\n\nd\u039b\u03c1(\u039b)\u03bc(\u039b),\n\n(64)\n\n\u039b<\n\nwhich implies that the value of \u03bco should be chosen such that the areas A and B in\nFig. 7(b), weighted by the distribution \u03c1(\u039b), should be equal \u2013 in direct correspondence\nwith the Maxwell's construction in thermodynamics.\nFor capacity distributions \u03c1(\u039b) symmetric with respect to h\u039bi, we have\n1\n\u03bco = h\u039bi = (\u039b< + \u039b> ).\n(65)\n2\nAs a result, the function \u03bc(\u039b) is given by\n\uf8f1\n\uf8f4\nfor \u03bc< < \u03bc < \u03bc> ,\n\uf8f2 h\u039bi\n\u0013 \u0015\n\u0014\n\u0012\n(66)\n\u03bc(\u039b) =\n\u039b \u2212 h\u039bi\n\uf8f4\n\u221a\n,0\nfor otherwise,\n\uf8f3 min \u039b \u2212 W\u0303 erf\n2\nwhere as \u039b< and \u039b> are respectively given by the lesser and greater roots of the equation\n\u0010 x \u2212 h\u039bi \u0011\n\u221a\nx = h\u039bi + W\u0303 erf\n.\n(67)\n2\nNodes i with chemical potentials \u03bci = h\u039bi represent clusters of nodes interconnected\nby an extensive fraction of unsaturated links, which provides the freedom to fine tune\ntheir currents so that the shortages among the nodes are uniform. They will be referred\nto as the balanced nodes. On the other hand, nodes outside the balanced clusters are\nconnected by saturated links only.\nThe fraction fbal of balanced nodes is given by the equation\n\u0010 W\u0303 f \u0011\nbal\nfbal = erf \u221a\n.\n(68)\n2\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n23\n\nFigure 9. (Colour online) The simulation results of \u03bc(\u039b) for N = 10000, c = 15,\nR = 0.1, h\u039bi = \u22121 and W\u0303 = 3 with 70000 data points, compared with theoretical\nprediction. Inset: The corresponding results for W\u0303 = 1.2.\n\nNote that fbal has the same dependence on W\u0303 for all negative h\u039bi. Fig. 8 shows\nthat when the total bandwidth W\u0303 increases, the fraction of balanced nodes increases,\nreflecting the more efficient resource allocation brought by the convenience of increased\nbandwidths. When W\u0303 becomes very large, a uniform chemical potential of h\u039bi\nnetworkwide is recovered, converging to the case of non-vanishing bandwidths.\nThe chemical potential distribution can be obtained from Eq. (66). Unlike the\ncorresponding distribution in the case of non-vanishing bandwidths described in the\nprevious subsection, there is no explicit scaling on the connectivity. In addition, it\nis not purely Gaussian. The delta function component \u03b4(\u03bc \u2212 h\u039bi) corresponds to the\nbalanced clusters. The weight of the delta function component is a measure of the\nefficiency of resource allocation.\nWe\np compare the analytical result of \u03bc(\u039b) in Eq. (66) with simulations in Fig. 9. For\nW\u0303 > \u03c0/2, data points (\u039b, \u03bc) of individual nodes from network simulations follow the\nanalytical result of \u03bc(\u039b), giving an almost perfect overlap of data. The presence of the\nbalanced nodes with effectively constant chemical potentials is obvious and essential to\nexplain the behavior of the majority of data points from simulations. Outside the p\nregion\nof balanced nodes, the data points follow the tails of the function \u03bc(\u039b). For W\u0303 < \u03c0/2,\nthe analytical \u03bc(\u039b) shows no turning point as shown in the inset of Fig. 9. Despite the\nscattering of data points, they generally follow the trend of the theoretical \u03bc(\u039b). This\nscattering effect may be explained by the use of a finite connectivity in simulations. We\nfound that the extent of scattering can be much reduced by increasing the connectivity\nin the simulations.\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n24\n\n6.2.3. Large but Finite Connectivity Our analysis can be generalized to the case of\nlarge but finite connectivity, where the approximation in Eq. (55) is not fully valid.\nThis modifies the chemical potentials of the balanced nodes, for which Eq. (55) has to\nbe replaced by\nZ \u039b<\nZ\n\u0010 \u03bc(\u039b) \u2212 \u03bc \u0011\ni Z \u039b>\nW\u0303 h \u221e\nd\u039b\u03c1(\u039b)\nd\u039b\u03c1(\u039b) +\nd\u039b\u03c1(\u039b) \u2212\n.\nM(\u03bc) =\nc \u039b>\nR\n\u039b<\n\u2212\u221e\n(69)\nWe introduce an ansatz of a linear relationship between \u03bc and \u039b for the balanced nodes,\nnamely,\n\u03bc = m\u039b + b.\n\n(70)\n\nAfter direct substitution of Eq. (70) into M(\u03bc) given by Eq. (69), we get the selfconsistent equations for m and b,\nR\n\u0011,\n\u0010\n(71)\nm=\nR + c erf \u039b>\u221a\u2212h\u039bi\n2\n\u0010\n\u0011\nc erf \u039b>\u221a\u2212h\u039bi\n2\n\u0010\n\u0011 h\u039bi.\n(72)\nb=\n\u039b> \u2212h\u039bi\n\u221a\nR + c erf\n2\n\nThus, the Maxwell's construction has a non-zero slope when the connectivity is finite.\nWe remark that the approximation in Eq. (69) assumes that the potential differences\nof the balanced nodes lie in the range of 2RW\u0303 /c, so that their connecting links remain\nunsaturated. Note that the end points of the Maxwell's construction have chemical\npotentials h\u039bi \u00b1 RW\u0303 /c respectively, rendering the approximation in Eq. (69) exact at\none special point, namely, the central point of the Maxwell's construction. Hence, this\napproximation works well in the central region of the Maxwell's construction. However,\nwhen one approaches the end points of the Maxwell's construction, the balanced nodes\nare also connected to nodes outside the balanced clusters with potential differences less\nthan 2RW\u0303 /c. Hence, we expect to see deviations from the theoretical linear prediction\nnear the end points of the Maxwell's construction.\nThe chemical potential distribution can be obtained. Compared with corresponding\ndistribution in the high connectivity limit, the delta function component of the balanced\nnodes is now smeared into a Gaussian component lying in a strip of width m(\u039b> \u2212\u039b< ). It\nimplies a lower efficiency in resource allocation due to the finiteness of the connectivity.\nIn the simulation data shown in Fig. 10, the data points of (\u039b, \u03bc) from different\nresistance R follow the trend of the corresponding analytical results, both within and\noutside the linear region, with increasing scattering within the linear region as R\nincreases. As expected, there are derivations between the analytical and simulational\nresults at the two ends of the linear region, with smoothened corners appearing in the\nsimulation data, especially in the case of R = 2. We note that when R increases, the\ngradient of the linear region increases, corresponding to a less uniform allocation of\nresources caused by higher transportation costs during optimization. As shown in the\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n25\n\nFigure 10. (Colour online) Simulation results of (\u039b, \u03bc) for N = 2\u00d7105, W\u0303 = 3, c = 12\nand h\u039bi = \u22125 at different values of R, each with 65000 data points. as compared to\nthe theoretical predictions. Inset: the corresponding chemical potential distribution\nP (\u03bc) of the 3 cases.\n\ninset of Fig. 10, the chemical potential distributions follow the trend of the analytical\nresults.\nRemarkably, as evident from Eq. (71), even with constant available bandwidth W\u0303 ,\nincreasing connectivity causes m to decrease, and hence sharpens the chemical potential\ndistribution. The narrower distributions correspond to higher efficiency in resource\nallocation. It leads us to realize the potential benefits of increasing connectivity in\nnetwork optimization even for a given constant total bandwidth connecting a node,\ndespite a decrease in bandwidth on individual links.\n6.2.4. Resource Allocation in Scale-free Networks Recent studies show that complex\ncommunication networks have highly hetergeneous structures, and the connectivity\ndistribution obeys a power law [20]. These networks are commonly known as scalefree networks and are characterized by the presence of hubs. The presence of these\nnodes with very high connectivity can modify the network behavior significantly.\nFigure 11 shows the simulation results of node i with ci = 3 and ci = 10 in a scalefree network, where ci is the connectivity of node i and is drawn from the distribution\nP (ci ) \u223c c\u22123\ni when the scale-free network is constructed. The data points of (\u039b, \u03bc) follow\nthe corresponding analytical results of Eqs. (71) and (72), for both sets of nodes with\nci = 3 and ci = 10. This implies that the previous argument of increasing efficiency\nby increasing connectivity also hold for scale-free networks, as a smaller gradient m is\nfound for nodes with higher connectivity. As can be seen from Fig. 11, the data points\nare less scattered for nodes with large ci , implying a more efficient resource allocation\nfor the hubs, in addition to the effect of smaller m.\n\n\f26\n\nOptimal Resource Allocation with Transportation Bandwidths\n\n\u03bc\n\n(a) -0.5\n\nSimulation (Scale-free Network)\nTheoretical\n\n-1\n\nci = 10\n\n\u03bc\n\n-1.5\n-6\n(b) -0.5\n\n-4\n\n-2\n\n0\n\n2\n\nSimulation (Regular Network of c = 3)\nSimulation (Scale-free Network)\nTheoretical\n\n-1\n\nci = 3\n-1.5\n-6\n\n-4\n\n-2\n\n\u039b\n\n0\n\n2\n\nFigure 11. (Colour online) Simulation results of (\u039b, \u03bc) for N = 2 \u00d7 105 , R = 0.1,\nW\u0303 = 3 and h\u039bi = \u22121 as compared with theoretical results, for (a) nodes with ci = 10\nin scale-free networks with P (ci ) \u223c c\u22123\ni , (b) nodes with ci = 3 in scale-free networks\nand nodes in regular networks with c = 3. Each data set contains 2500 data points.\n\nMore important, nodes with low connectivity benefit from the presence of hubs in\nthe networks. To see these benefits, the simulation results of nodes in scale-free networks\nare compared with nodes in regular networks of the same connectivity. As shown in Fig.\n11(b), the data points from regular networks are more scattered away from the Maxwell's\nconstruction, when compared with those from scale-free networks. This shows that the\npresence of hubs increases the efficiency of the entire network, especially for nodes with\nlow connectivity. This provides support that scale-free networks are better candidates\nfor resource allocation than regular networks.\n7. Conclusion\nWe have applied statistical mechanics to a system in which magnitude of the interactions\n(such as currents in resource allocation) between on-site variables (such as the shortages)\nare constrained. This allows us to study an optimization task of resource allocation on a\nsparse network, in which nodes with different capacities are connected by links of finite\nbandwidths. Analogy can be drawn between interaction of spins in magnetic systems\nand that of resources of nodes in networks. The bandwidths serve as constraints on\nthe interaction magnitudes and limit the information exchange among the neighbors.\nDespite these additional constraints, we found that the analyses of the unrestricted case\nin [5, 6] are applicable after appropriate adaptations, such as allowing for shortages with\nfinite penalty and obtaining a non-linear relationship between currents and potential\ndifferences.\nBy adopting suitable cost functions, such as quadratic transportation and shortage\ncosts, the model can be applied to the study of realistic networks with constrained\ntransport between neighbors. In this paper, we focus on cases in which the shortage\ndominates. By employing the Bethe approximation or equivalently the replica method,\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n27\n\nrecursive relations of the vertex free energies can be derived.\nAnalytically, the recursive relations enable us to make theoretical predictions of\nvarious quantities of interest, including the average energy, the current distribution, and\nthe chemical potential distribution. The predictions are confirmed by simulation results.\nIn particular, the study reveals interesting effects due to finite bandwidths. When the\nbandwidth decreases, resource allocation is less efficient, and links are more prone to\nsaturation. A consequence is the creation of bottlenecks, which refer to the saturation\nof links feeding the poor nodes, rendering the secondary provision of resources from\ntheir next nearest neighbors redundant. This causes certain links previously assigned\nfor secondary transport to become idle, lowering the participation of individual links in\nglobal optimization and making the resources less uniformly distributed. In the context\nof resource allocation, further studies can be carried out to suppress the bottleneck\neffect.\nAn equally remarkable phenomenon is found in networks with fixed total\nbandwidths per node, where bandwidths per link vanish in the high connectivity limit\nand the relation between the chemical potential and capacity is well defined. For\nsufficiently large total bandwidths, we find a phase transition beyond which the chemical\npotential function has to be described by the Maxwell's construction, implying the\nexistence of clusters of balanced nodes having a uniform shortage among them. In the\ncase of large but finite connectivity, the Maxwell's construction becomes a linear region\nwith nonzero slope, implying a less uniform shortage among the balanced nodes. This\nreflects the benefits of increasing the number of connections in resource allocation. When\nadapted to scaled-free networks, deviations from the Maxwell's construction reveal that\nthe presence of hubs is able to homogenize the resources among the nodes with low\nconnectivities.\nFor future extensions, the theory and algorithms in this paper can be generalized\nto model real networks with inhomogeneous connectivity and bandwidths. Scale-free\nnetworks with adjustable bandwidth distributions would be one of the most interesting\nsystems to study. Further studies can also be done on minimizing the bottleneck effect\nby using heterogeneous bandwidths on different links. It is also worthwhile to consider\nother non-linear shortage costs. We believe that the techniques presented in this paper\nare useful in many different network optimization problems and will lead to a large\nvariety of potential applications.\nAcknowledgements\nWe thank David Saad for very meaningful discussions. This work is supported by the\nResearch Grant Council of Hong Kong (grant numbers HKUST 603606 and HKUST\n603607).\n\n\fOptimal Resource Allocation with Transportation Bandwidths\n\n28\n\nReferences\n[1] J. Hertz, A. Krogh, and R. G. Palmer, 1999 Introduction to the Theory of Neural Computation\n(Redwood City: Addison-Wesley)\n[2] H. Nishimori, 2001 Statistical Physics of Spin Glasses and Information Processing (Oxford, UK:\nOxford University Press)\n[3] D. Challet, M. Marsili and Y.-C. Zhang, 2005 Minority Games (Oxford, UK: Oxford University\nPress)\n[4] Y. Kabashima and D. Saad, Statistical mechanics of low-density parity-check codes, 2004 J. Phys. A\n37 R1\n[5] K. Y .M. Wong and D. Saad, Equilibration through local information exchange in networks, 2006\nPhys. Rev. E 74 010104(R)\n[6] K. Y .M. Wong and D. Saad, Inference and optimization of real edges on sparse graphs: A statistical\nphysics perspective, 2007 Phys. Rev. E 76 011115\n[7] L. Peterson and B.S. Davie, 2000 Computer Networks: A Systems Approach (San Diego CA:\nAcademic Press)\n[8] Y. C. Ho, L. Servi, and R. Suri, A class of center-free resource allocation algorithms, 1980 Large\nScale Syst. 1 51\n[9] S. Shenker, D. Clark, D. Estrin and S. Herzog, Pricing in computer networks: Reshaping the\nresearch agenda, 1996 Comput. Commun. Rev. 26 19\n[10] R. L. Rardin, 1998 Optimization in Operations Research (Englewood Cliffs, NJ: Prentice Hall)\n[11] S. Bohn and Marcelo O. Magnasco, Structure, Scaling, and Phase Transition in the Optimal\nTransport Network, 2007 Phys. Rev. Lett 98 088702\n[12] M. Durand, Phys. Structure of Optimal Transport Networks Subject to a Global Constraint, 2007\nRev. Lett. 98 088701\n[13] M. Opper and D. Saad, eds, 1999 Advanced Mean Field Methods (Cambridge, MA: MIT Press)\n[14] R. Vicente, D. Saad and Y. Kabashima, Finite-connectivity systems as error-correcting codes, 1999\nPhys. Rev. E 60 5352\n[15] D. J. C. Mackey, 2003 Information Theory, Inference and Learning Algorithms (UK: Cambridge\nUniversity Press)\n[16] M. M\u00e9zard and R. Zecchina, Random K-satisfiability problem: From an analytic solution to an\nefficient algorithm, 2002 Phys. Rev. E 66 056126; M. M\u00e9zard, G. Parisi and R. Zecchina, Analytic\nand algorithmic solution of random satisfiability problems, 2002 Science 297 812\n[17] M. I. Jordan, ed., 1999 Learning in Graphical Models (Cambridge, MA: MIT Press)\n[18] M. M\u00e9zard, G. Parisi and M. A. Virasoro 1987 Spin Glass Theory and Beyond (World Scientific)\n[19] F. P. Kelly, Network routing, 1991 Phil. Trans. R. Soc. Lond. A 337 343\n[20] A. L. Barab\u00e1si and R. Albert, Emergence of Scaling in Random Networks, 1999 Science 286 509\n\n\f"}